var xM=Object.defineProperty;var yM=(t,e,s)=>e in t?xM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Be=(t,e,s)=>yM(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pb={exports:{}},sh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SS;function bM(){if(SS)return sh;SS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,a,i){var l=null;if(i!==void 0&&(l=""+i),a.key!==void 0&&(l=""+a.key),"key"in a){i={};for(var d in a)d!=="key"&&(i[d]=a[d])}else i=a;return a=i.ref,{$$typeof:t,type:r,key:l,ref:a!==void 0?a:null,props:i}}return sh.Fragment=e,sh.jsx=s,sh.jsxs=s,sh}var kS;function vM(){return kS||(kS=1,pb.exports=bM()),pb.exports}var n=vM(),xb={exports:{}},Lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES;function wM(){if(ES)return Lt;ES=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function x(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,v={};function j(z,G,X){this.props=z,this.context=G,this.refs=v,this.updater=X||w}j.prototype.isReactComponent={},j.prototype.setState=function(z,G){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,G,"setState")},j.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function k(){}k.prototype=j.prototype;function T(z,G,X){this.props=z,this.context=G,this.refs=v,this.updater=X||w}var P=T.prototype=new k;P.constructor=T,N(P,j.prototype),P.isPureReactComponent=!0;var U=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(z,G,X,re,xe,ze){return X=ze.ref,{$$typeof:t,type:z,key:G,ref:X!==void 0?X:null,props:ze}}function C(z,G){return I(z.type,G,void 0,void 0,void 0,z.props)}function E(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function D(z){var G={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(X){return G[X]})}var V=/\/+/g;function B(z,G){return typeof z=="object"&&z!==null&&z.key!=null?D(""+z.key):G.toString(36)}function M(){}function Y(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(M,M):(z.status="pending",z.then(function(G){z.status==="pending"&&(z.status="fulfilled",z.value=G)},function(G){z.status==="pending"&&(z.status="rejected",z.reason=G)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Q(z,G,X,re,xe){var ze=typeof z;(ze==="undefined"||ze==="boolean")&&(z=null);var me=!1;if(z===null)me=!0;else switch(ze){case"bigint":case"string":case"number":me=!0;break;case"object":switch(z.$$typeof){case t:case e:me=!0;break;case f:return me=z._init,Q(me(z._payload),G,X,re,xe)}}if(me)return xe=xe(z),me=re===""?"."+B(z,0):re,U(xe)?(X="",me!=null&&(X=me.replace(V,"$&/")+"/"),Q(xe,G,X,"",function(Z){return Z})):xe!=null&&(E(xe)&&(xe=C(xe,X+(xe.key==null||z&&z.key===xe.key?"":(""+xe.key).replace(V,"$&/")+"/")+me)),G.push(xe)),1;me=0;var Ce=re===""?".":re+":";if(U(z))for(var ve=0;ve<z.length;ve++)re=z[ve],ze=Ce+B(re,ve),me+=Q(re,G,X,ze,xe);else if(ve=x(z),typeof ve=="function")for(z=ve.call(z),ve=0;!(re=z.next()).done;)re=re.value,ze=Ce+B(re,ve++),me+=Q(re,G,X,ze,xe);else if(ze==="object"){if(typeof z.then=="function")return Q(Y(z),G,X,re,xe);throw G=String(z),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return me}function H(z,G,X){if(z==null)return z;var re=[],xe=0;return Q(z,re,"","",function(ze){return G.call(X,ze,xe++)}),re}function W(z){if(z._status===-1){var G=z._result;G=G(),G.then(function(X){(z._status===0||z._status===-1)&&(z._status=1,z._result=X)},function(X){(z._status===0||z._status===-1)&&(z._status=2,z._result=X)}),z._status===-1&&(z._status=0,z._result=G)}if(z._status===1)return z._result.default;throw z._result}var de=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function ge(){}return Lt.Children={map:H,forEach:function(z,G,X){H(z,function(){G.apply(this,arguments)},X)},count:function(z){var G=0;return H(z,function(){G++}),G},toArray:function(z){return H(z,function(G){return G})||[]},only:function(z){if(!E(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Lt.Component=j,Lt.Fragment=s,Lt.Profiler=a,Lt.PureComponent=T,Lt.StrictMode=r,Lt.Suspense=u,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Lt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return R.H.useMemoCache(z)}},Lt.cache=function(z){return function(){return z.apply(null,arguments)}},Lt.cloneElement=function(z,G,X){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var re=N({},z.props),xe=z.key,ze=void 0;if(G!=null)for(me in G.ref!==void 0&&(ze=void 0),G.key!==void 0&&(xe=""+G.key),G)!O.call(G,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&G.ref===void 0||(re[me]=G[me]);var me=arguments.length-2;if(me===1)re.children=X;else if(1<me){for(var Ce=Array(me),ve=0;ve<me;ve++)Ce[ve]=arguments[ve+2];re.children=Ce}return I(z.type,xe,void 0,void 0,ze,re)},Lt.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:i,_context:z},z},Lt.createElement=function(z,G,X){var re,xe={},ze=null;if(G!=null)for(re in G.key!==void 0&&(ze=""+G.key),G)O.call(G,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(xe[re]=G[re]);var me=arguments.length-2;if(me===1)xe.children=X;else if(1<me){for(var Ce=Array(me),ve=0;ve<me;ve++)Ce[ve]=arguments[ve+2];xe.children=Ce}if(z&&z.defaultProps)for(re in me=z.defaultProps,me)xe[re]===void 0&&(xe[re]=me[re]);return I(z,ze,void 0,void 0,null,xe)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(z){return{$$typeof:d,render:z}},Lt.isValidElement=E,Lt.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:W}},Lt.memo=function(z,G){return{$$typeof:h,type:z,compare:G===void 0?null:G}},Lt.startTransition=function(z){var G=R.T,X={};R.T=X;try{var re=z(),xe=R.S;xe!==null&&xe(X,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(ge,de)}catch(ze){de(ze)}finally{R.T=G}},Lt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Lt.use=function(z){return R.H.use(z)},Lt.useActionState=function(z,G,X){return R.H.useActionState(z,G,X)},Lt.useCallback=function(z,G){return R.H.useCallback(z,G)},Lt.useContext=function(z){return R.H.useContext(z)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(z,G){return R.H.useDeferredValue(z,G)},Lt.useEffect=function(z,G,X){var re=R.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(z,G)},Lt.useId=function(){return R.H.useId()},Lt.useImperativeHandle=function(z,G,X){return R.H.useImperativeHandle(z,G,X)},Lt.useInsertionEffect=function(z,G){return R.H.useInsertionEffect(z,G)},Lt.useLayoutEffect=function(z,G){return R.H.useLayoutEffect(z,G)},Lt.useMemo=function(z,G){return R.H.useMemo(z,G)},Lt.useOptimistic=function(z,G){return R.H.useOptimistic(z,G)},Lt.useReducer=function(z,G,X){return R.H.useReducer(z,G,X)},Lt.useRef=function(z){return R.H.useRef(z)},Lt.useState=function(z){return R.H.useState(z)},Lt.useSyncExternalStore=function(z,G,X){return R.H.useSyncExternalStore(z,G,X)},Lt.useTransition=function(){return R.H.useTransition()},Lt.version="19.1.0",Lt}var TS;function Pw(){return TS||(TS=1,xb.exports=wM()),xb.exports}var _=Pw();const ss=Rw(_);var yb={exports:{}},rh={},bb={exports:{}},vb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS;function NM(){return CS||(CS=1,function(t){function e(H,W){var de=H.length;H.push(W);e:for(;0<de;){var ge=de-1>>>1,z=H[ge];if(0<a(z,W))H[ge]=W,H[de]=z,de=ge;else break e}}function s(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var W=H[0],de=H.pop();if(de!==W){H[0]=de;e:for(var ge=0,z=H.length,G=z>>>1;ge<G;){var X=2*(ge+1)-1,re=H[X],xe=X+1,ze=H[xe];if(0>a(re,de))xe<z&&0>a(ze,re)?(H[ge]=ze,H[xe]=de,ge=xe):(H[ge]=re,H[X]=de,ge=X);else if(xe<z&&0>a(ze,de))H[ge]=ze,H[xe]=de,ge=xe;else break e}}return W}function a(H,W){var de=H.sortIndex-W.sortIndex;return de!==0?de:H.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var u=[],h=[],f=1,p=null,x=3,w=!1,N=!1,v=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function U(H){for(var W=s(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=H)r(h),W.sortIndex=W.expirationTime,e(u,W);else break;W=s(h)}}function R(H){if(v=!1,U(H),!N)if(s(u)!==null)N=!0,O||(O=!0,B());else{var W=s(h);W!==null&&Q(R,W.startTime-H)}}var O=!1,I=-1,C=5,E=-1;function D(){return j?!0:!(t.unstable_now()-E<C)}function V(){if(j=!1,O){var H=t.unstable_now();E=H;var W=!0;try{e:{N=!1,v&&(v=!1,T(I),I=-1),w=!0;var de=x;try{t:{for(U(H),p=s(u);p!==null&&!(p.expirationTime>H&&D());){var ge=p.callback;if(typeof ge=="function"){p.callback=null,x=p.priorityLevel;var z=ge(p.expirationTime<=H);if(H=t.unstable_now(),typeof z=="function"){p.callback=z,U(H),W=!0;break t}p===s(u)&&r(u),U(H)}else r(u);p=s(u)}if(p!==null)W=!0;else{var G=s(h);G!==null&&Q(R,G.startTime-H),W=!1}}break e}finally{p=null,x=de,w=!1}W=void 0}}finally{W?B():O=!1}}}var B;if(typeof P=="function")B=function(){P(V)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Y=M.port2;M.port1.onmessage=V,B=function(){Y.postMessage(null)}}else B=function(){k(V,0)};function Q(H,W){I=k(function(){H(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(H){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var de=x;x=W;try{return H()}finally{x=de}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var de=x;x=H;try{return W()}finally{x=de}},t.unstable_scheduleCallback=function(H,W,de){var ge=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?ge+de:ge):de=ge,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=de+z,H={id:f++,callback:W,priorityLevel:H,startTime:de,expirationTime:z,sortIndex:-1},de>ge?(H.sortIndex=de,e(h,H),s(u)===null&&H===s(h)&&(v?(T(I),I=-1):v=!0,Q(R,de-ge))):(H.sortIndex=z,e(u,H),N||w||(N=!0,O||(O=!0,B()))),H},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(H){var W=x;return function(){var de=x;x=W;try{return H.apply(this,arguments)}finally{x=de}}}}(vb)),vb}var AS;function jM(){return AS||(AS=1,bb.exports=NM()),bb.exports}var wb={exports:{}},qr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS;function _M(){if(RS)return qr;RS=1;var t=Pw();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:u,containerInfo:h,implementation:f}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,qr.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(u,h,null,f)},qr.flushSync=function(u){var h=l.T,f=r.p;try{if(l.T=null,r.p=2,u)return u()}finally{l.T=h,r.p=f,r.d.f()}},qr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},qr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},qr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,p=d(f,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:w}):f==="script"&&r.d.X(u,{crossOrigin:p,integrity:x,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},qr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=d(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},qr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=d(f,h.crossOrigin);r.d.L(u,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},qr.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=d(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},qr.requestFormReset=function(u){r.d.r(u)},qr.unstable_batchedUpdates=function(u,h){return u(h)},qr.useFormState=function(u,h,f){return l.H.useFormState(u,h,f)},qr.useFormStatus=function(){return l.H.useHostTransitionStatus()},qr.version="19.1.0",qr}var PS;function SM(){if(PS)return wb.exports;PS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wb.exports=_M(),wb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IS;function kM(){if(IS)return rh;IS=1;var t=jM(),e=Pw(),s=SM();function r(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function l(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function d(o){if(i(o)!==o)throw Error(r(188))}function u(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(r(188));return c!==o?null:o}for(var m=o,g=c;;){var b=m.return;if(b===null)break;var S=b.alternate;if(S===null){if(g=b.return,g!==null){m=g;continue}break}if(b.child===S.child){for(S=b.child;S;){if(S===m)return d(b),o;if(S===g)return d(b),c;S=S.sibling}throw Error(r(188))}if(m.return!==g.return)m=b,g=S;else{for(var F=!1,$=b.child;$;){if($===m){F=!0,m=b,g=S;break}if($===g){F=!0,g=b,m=S;break}$=$.sibling}if(!F){for($=S.child;$;){if($===m){F=!0,m=S,g=b;break}if($===g){F=!0,g=S,m=b;break}$=$.sibling}if(!F)throw Error(r(189))}}if(m.alternate!==g)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?o:c}function h(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=h(o),c!==null)return c;o=o.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),P=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function B(o){return o===null||typeof o!="object"?null:(o=V&&o[V]||o["@@iterator"],typeof o=="function"?o:null)}var M=Symbol.for("react.client.reference");function Y(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===M?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case N:return"Fragment";case j:return"Profiler";case v:return"StrictMode";case R:return"Suspense";case O:return"SuspenseList";case E:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case P:return(o.displayName||"Context")+".Provider";case T:return(o._context.displayName||"Context")+".Consumer";case U:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return c=o.displayName||null,c!==null?c:Y(o.type)||"Memo";case C:c=o._payload,o=o._init;try{return Y(o(c))}catch{}}return null}var Q=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},ge=[],z=-1;function G(o){return{current:o}}function X(o){0>z||(o.current=ge[z],ge[z]=null,z--)}function re(o,c){z++,ge[z]=o.current,o.current=c}var xe=G(null),ze=G(null),me=G(null),Ce=G(null);function ve(o,c){switch(re(me,c),re(ze,o),re(xe,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?Z2(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=Z2(c),o=eS(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}X(xe),re(xe,o)}function Z(){X(xe),X(ze),X(me)}function Se(o){o.memoizedState!==null&&re(Ce,o);var c=xe.current,m=eS(c,o.type);c!==m&&(re(ze,o),re(xe,m))}function Te(o){ze.current===o&&(X(xe),X(ze)),Ce.current===o&&(X(Ce),Qu._currentValue=de)}var te=Object.prototype.hasOwnProperty,Oe=t.unstable_scheduleCallback,Ae=t.unstable_cancelCallback,qe=t.unstable_shouldYield,Ve=t.unstable_requestPaint,Xe=t.unstable_now,Et=t.unstable_getCurrentPriorityLevel,Qe=t.unstable_ImmediatePriority,nt=t.unstable_UserBlockingPriority,It=t.unstable_NormalPriority,lt=t.unstable_LowPriority,xt=t.unstable_IdlePriority,ct=t.log,it=t.unstable_setDisableYieldValue,Je=null,Ye=null;function Ze(o){if(typeof ct=="function"&&it(o),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Je,o)}catch{}}var ut=Math.clz32?Math.clz32:mt,je=Math.log,He=Math.LN2;function mt(o){return o>>>=0,o===0?32:31-(je(o)/He|0)|0}var Dt=256,Fe=4194304;function dt(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Nt(o,c,m){var g=o.pendingLanes;if(g===0)return 0;var b=0,S=o.suspendedLanes,F=o.pingedLanes;o=o.warmLanes;var $=g&134217727;return $!==0?(g=$&~S,g!==0?b=dt(g):(F&=$,F!==0?b=dt(F):m||(m=$&~o,m!==0&&(b=dt(m))))):($=g&~S,$!==0?b=dt($):F!==0?b=dt(F):m||(m=g&~o,m!==0&&(b=dt(m)))),b===0?0:c!==0&&c!==b&&(c&S)===0&&(S=b&-b,m=c&-c,S>=m||S===32&&(m&4194048)!==0)?c:b}function Kt(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Qs(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(){var o=Dt;return Dt<<=1,(Dt&4194048)===0&&(Dt=256),o}function Rs(){var o=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),o}function ks(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function ns(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Zr(o,c,m,g,b,S){var F=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var $=o.entanglements,K=o.expirationTimes,ce=o.hiddenUpdates;for(m=F&~m;0<m;){var ke=31-ut(m),De=1<<ke;$[ke]=0,K[ke]=-1;var he=ce[ke];if(he!==null)for(ce[ke]=null,ke=0;ke<he.length;ke++){var fe=he[ke];fe!==null&&(fe.lane&=-536870913)}m&=~De}g!==0&&as(o,g,0),S!==0&&b===0&&o.tag!==0&&(o.suspendedLanes|=S&~(F&~c))}function as(o,c,m){o.pendingLanes|=c,o.suspendedLanes&=~c;var g=31-ut(c);o.entangledLanes|=c,o.entanglements[g]=o.entanglements[g]|1073741824|m&4194090}function pr(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var g=31-ut(m),b=1<<g;b&c|o[g]&c&&(o[g]|=c),m&=~b}}function Ps(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function zr(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function xr(){var o=W.p;return o!==0?o:(o=window.event,o===void 0?32:bS(o.type))}function ae(o,c){var m=W.p;try{return W.p=o,c()}finally{W.p=m}}var ee=Math.random().toString(36).slice(2),ye="__reactFiber$"+ee,Ee="__reactProps$"+ee,Ke="__reactContainer$"+ee,tt="__reactEvents$"+ee,Mt="__reactListeners$"+ee,is="__reactHandles$"+ee,Hs="__reactResources$"+ee,Sn="__reactMarker$"+ee;function en(o){delete o[ye],delete o[Ee],delete o[tt],delete o[Mt],delete o[is]}function Js(o){var c=o[ye];if(c)return c;for(var m=o.parentNode;m;){if(c=m[Ke]||m[ye]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(o=nS(o);o!==null;){if(m=o[ye])return m;o=nS(o)}return c}o=m,m=o.parentNode}return null}function yr(o){if(o=o[ye]||o[Ke]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Tr(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(r(33))}function Cr(o){var c=o[Hs];return c||(c=o[Hs]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Is(o){o[Sn]=!0}var $i=new Set,qi={};function kn(o,c){Fn(o,c),Fn(o+"Capture",c)}function Fn(o,c){for(qi[o]=c,o=0;o<c.length;o++)$i.add(c[o])}var Ko=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xo={},wa={};function Qo(o){return te.call(wa,o)?!0:te.call(Xo,o)?!1:Ko.test(o)?wa[o]=!0:(Xo[o]=!0,!1)}function ne(o,c,m){if(Qo(c))if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+m)}}function Ie(o,c,m){if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+m)}}function Le(o,c,m,g){if(g===null)o.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(c,m,""+g)}}var rt,Tt;function ft(o){if(rt===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);rt=c&&c[1]||"",Tt=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rt+o+Tt}var ot=!1;function $t(o,c){if(!o||ot)return"";ot=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(fe){var he=fe}Reflect.construct(o,[],De)}else{try{De.call()}catch(fe){he=fe}o.call(De.prototype)}}else{try{throw Error()}catch(fe){he=fe}(De=o())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(fe){if(fe&&he&&typeof fe.stack=="string")return[fe.stack,he.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),F=S[0],$=S[1];if(F&&$){var K=F.split(`
`),ce=$.split(`
`);for(b=g=0;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;for(;b<ce.length&&!ce[b].includes("DetermineComponentFrameRoot");)b++;if(g===K.length||b===ce.length)for(g=K.length-1,b=ce.length-1;1<=g&&0<=b&&K[g]!==ce[b];)b--;for(;1<=g&&0<=b;g--,b--)if(K[g]!==ce[b]){if(g!==1||b!==1)do if(g--,b--,0>b||K[g]!==ce[b]){var ke=`
`+K[g].replace(" at new "," at ");return o.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",o.displayName)),ke}while(1<=g&&0<=b);break}}}finally{ot=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?ft(m):""}function Br(o){switch(o.tag){case 26:case 27:case 5:return ft(o.type);case 16:return ft("Lazy");case 13:return ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return $t(o.type,!1);case 11:return $t(o.type.render,!1);case 1:return $t(o.type,!0);case 31:return ft("Activity");default:return""}}function aa(o){try{var c="";do c+=Br(o),o=o.return;while(o);return c}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Ar(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Jo(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function yc(o){var c=Jo(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,S=m.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return b.call(this)},set:function(F){g=""+F,S.call(this,F)}}),Object.defineProperty(o,c,{enumerable:m.enumerable}),{getValue:function(){return g},setValue:function(F){g=""+F},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function bc(o){o._valueTracker||(o._valueTracker=yc(o))}function iu(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var m=c.getValue(),g="";return o&&(g=Jo(o)?o.checked?"true":"false":o.value),o=g,o!==m?(c.setValue(o),!0):!1}function Zo(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var wx=/[\n"\\]/g;function Zs(o){return o.replace(wx,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function En(o,c,m,g,b,S,F,$){o.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?o.type=F:o.removeAttribute("type"),c!=null?F==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Ar(c)):o.value!==""+Ar(c)&&(o.value=""+Ar(c)):F!=="submit"&&F!=="reset"||o.removeAttribute("value"),c!=null?Hi(o,F,Ar(c)):m!=null?Hi(o,F,Ar(m)):g!=null&&o.removeAttribute("value"),b==null&&S!=null&&(o.defaultChecked=!!S),b!=null&&(o.checked=b&&typeof b!="function"&&typeof b!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?o.name=""+Ar($):o.removeAttribute("name")}function el(o,c,m,g,b,S,F,$){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.type=S),c!=null||m!=null){if(!(S!=="submit"&&S!=="reset"||c!=null))return;m=m!=null?""+Ar(m):"",c=c!=null?""+Ar(c):m,$||c===o.value||(o.value=c),o.defaultValue=c}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=$?o.checked:!!g,o.defaultChecked=!!g,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(o.name=F)}function Hi(o,c,m){c==="number"&&Zo(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function ri(o,c,m,g){if(o=o.options,c){c={};for(var b=0;b<m.length;b++)c["$"+m[b]]=!0;for(m=0;m<o.length;m++)b=c.hasOwnProperty("$"+o[m].value),o[m].selected!==b&&(o[m].selected=b),b&&g&&(o[m].defaultSelected=!0)}else{for(m=""+Ar(m),c=null,b=0;b<o.length;b++){if(o[b].value===m){o[b].selected=!0,g&&(o[b].defaultSelected=!0);return}c!==null||o[b].disabled||(c=o[b])}c!==null&&(c.selected=!0)}}function xs(o,c,m){if(c!=null&&(c=""+Ar(c),c!==o.value&&(o.value=c),m==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=m!=null?""+Ar(m):""}function tl(o,c,m,g){if(c==null){if(g!=null){if(m!=null)throw Error(r(92));if(Q(g)){if(1<g.length)throw Error(r(93));g=g[0]}m=g}m==null&&(m=""),c=m}m=Ar(c),o.defaultValue=m,g=o.textContent,g===m&&g!==""&&g!==null&&(o.value=g)}function zn(o,c){if(c){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=c;return}}o.textContent=c}var sl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rf(o,c,m){var g=c.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?g?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":g?o.setProperty(c,m):typeof m!="number"||m===0||sl.has(c)?c==="float"?o.cssFloat=m:o[c]=(""+m).trim():o[c]=m+"px"}function ou(o,c,m){if(c!=null&&typeof c!="object")throw Error(r(62));if(o=o.style,m!=null){for(var g in m)!m.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var b in c)g=c[b],c.hasOwnProperty(b)&&m[b]!==g&&rf(o,b,g)}else for(var S in c)c.hasOwnProperty(S)&&rf(o,S,c[S])}function lu(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vc(o){return jx.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var ni=null;function Bn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ai=null,ii=null;function cu(o){var c=yr(o);if(c&&(o=c.stateNode)){var m=o[Ee]||null;e:switch(o=c.stateNode,c.type){case"input":if(En(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),c=m.name,m.type==="radio"&&c!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Zs(""+c)+'"][type="radio"]'),c=0;c<m.length;c++){var g=m[c];if(g!==o&&g.form===o.form){var b=g[Ee]||null;if(!b)throw Error(r(90));En(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<m.length;c++)g=m[c],g.form===o.form&&iu(g)}break e;case"textarea":xs(o,m.value,m.defaultValue);break e;case"select":c=m.value,c!=null&&ri(o,!!m.multiple,c,!1)}}}var Na=!1;function nf(o,c,m){if(Na)return o(c,m);Na=!0;try{var g=o(c);return g}finally{if(Na=!1,(ai!==null||ii!==null)&&(Jf(),ai&&(c=ai,o=ii,ii=ai=null,cu(c),o)))for(c=0;c<o.length;c++)cu(o[c])}}function rl(o,c){var m=o.stateNode;if(m===null)return null;var g=m[Ee]||null;if(g===null)return null;m=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(r(231,c,typeof m));return m}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$n=!1;if(ia)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){$n=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{$n=!1}var ja=null,Gi=null,oi=null;function du(){if(oi)return oi;var o,c=Gi,m=c.length,g,b="value"in ja?ja.value:ja.textContent,S=b.length;for(o=0;o<m&&c[o]===b[o];o++);var F=m-o;for(g=1;g<=F&&c[m-g]===b[S-g];g++);return oi=b.slice(o,1<g?1-g:void 0)}function _a(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Sa(){return!0}function uu(){return!1}function br(o){function c(m,g,b,S,F){this._reactName=m,this._targetInst=b,this.type=g,this.nativeEvent=S,this.target=F,this.currentTarget=null;for(var $ in o)o.hasOwnProperty($)&&(m=o[$],this[$]=m?m(S):S[$]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Sa:uu,this.isPropagationStopped=uu,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),c}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wc=br(cs),al=f({},cs,{view:0,detail:0}),af=br(al),Nc,jc,ka,il=f({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ka&&(ka&&o.type==="mousemove"?(Nc=o.screenX-ka.screenX,jc=o.screenY-ka.screenY):jc=Nc=0,ka=o),Nc)},movementY:function(o){return"movementY"in o?o.movementY:jc}}),qn=br(il),of=f({},il,{dataTransfer:0}),_x=br(of),ol=f({},al,{relatedTarget:0}),_c=br(ol),hu=f({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Sc=br(hu),lf=f({},cs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),kc=br(lf),Sx=f({},cs,{data:0}),mu=br(Sx),ll={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},df={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fu(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=df[o])?!!c[o]:!1}function cl(){return fu}var uf=f({},al,{key:function(o){if(o.key){var c=ll[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=_a(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?cf[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cl,charCode:function(o){return o.type==="keypress"?_a(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?_a(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Ec=br(uf),hf=f({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gu=br(hf),li=f({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cl}),mf=br(li),ff=f({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),gf=br(ff),pf=f({},il,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Tc=br(pf),tn=f({},cs,{newState:0,oldState:0}),xf=br(tn),yf=[9,13,27,32],Ea=ia&&"CompositionEvent"in window,y=null;ia&&"documentMode"in document&&(y=document.documentMode);var A=ia&&"TextEvent"in window&&!y,L=ia&&(!Ea||y&&8<y&&11>=y),q=" ",oe=!1;function pe(o,c){switch(o){case"keyup":return yf.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $e(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Xt=!1;function lr(o,c){switch(o){case"compositionend":return $e(c);case"keypress":return c.which!==32?null:(oe=!0,q);case"textInput":return o=c.data,o===q&&oe?null:o;default:return null}}function Qt(o,c){if(Xt)return o==="compositionend"||!Ea&&pe(o,c)?(o=du(),oi=Gi=ja=null,Xt=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return L&&c.locale!=="ko"?null:c.data;default:return null}}var vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!vr[o.type]:c==="textarea"}function ci(o,c,m,g){ai?ii?ii.push(g):ii=[g]:ai=g,c=ng(c,"onChange"),0<c.length&&(m=new wc("onChange","change",null,m,g),o.push({event:m,listeners:c}))}var Rr=null,Ta=null;function pu(o){Y2(o,0)}function bf(o){var c=Tr(o);if(iu(c))return o}function g1(o,c){if(o==="change")return c}var p1=!1;if(ia){var kx;if(ia){var Ex="oninput"in document;if(!Ex){var x1=document.createElement("div");x1.setAttribute("oninput","return;"),Ex=typeof x1.oninput=="function"}kx=Ex}else kx=!1;p1=kx&&(!document.documentMode||9<document.documentMode)}function y1(){Rr&&(Rr.detachEvent("onpropertychange",b1),Ta=Rr=null)}function b1(o){if(o.propertyName==="value"&&bf(Ta)){var c=[];ci(c,Ta,o,Bn(o)),nf(pu,c)}}function WD(o,c,m){o==="focusin"?(y1(),Rr=c,Ta=m,Rr.attachEvent("onpropertychange",b1)):o==="focusout"&&y1()}function YD(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return bf(Ta)}function KD(o,c){if(o==="click")return bf(c)}function XD(o,c){if(o==="input"||o==="change")return bf(c)}function QD(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Tn=typeof Object.is=="function"?Object.is:QD;function xu(o,c){if(Tn(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),g=Object.keys(c);if(m.length!==g.length)return!1;for(g=0;g<m.length;g++){var b=m[g];if(!te.call(c,b)||!Tn(o[b],c[b]))return!1}return!0}function v1(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function w1(o,c){var m=v1(o);o=0;for(var g;m;){if(m.nodeType===3){if(g=o+m.textContent.length,o<=c&&g>=c)return{node:m,offset:c-o};o=g}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=v1(m)}}function N1(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?N1(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function j1(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Zo(o.document);c instanceof o.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)o=c.contentWindow;else break;c=Zo(o.document)}return c}function Tx(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var JD=ia&&"documentMode"in document&&11>=document.documentMode,Cc=null,Cx=null,yu=null,Ax=!1;function _1(o,c,m){var g=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Ax||Cc==null||Cc!==Zo(g)||(g=Cc,"selectionStart"in g&&Tx(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),yu&&xu(yu,g)||(yu=g,g=ng(Cx,"onSelect"),0<g.length&&(c=new wc("onSelect","select",null,c,m),o.push({event:c,listeners:g}),c.target=Cc)))}function dl(o,c){var m={};return m[o.toLowerCase()]=c.toLowerCase(),m["Webkit"+o]="webkit"+c,m["Moz"+o]="moz"+c,m}var Ac={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionrun:dl("Transition","TransitionRun"),transitionstart:dl("Transition","TransitionStart"),transitioncancel:dl("Transition","TransitionCancel"),transitionend:dl("Transition","TransitionEnd")},Rx={},S1={};ia&&(S1=document.createElement("div").style,"AnimationEvent"in window||(delete Ac.animationend.animation,delete Ac.animationiteration.animation,delete Ac.animationstart.animation),"TransitionEvent"in window||delete Ac.transitionend.transition);function ul(o){if(Rx[o])return Rx[o];if(!Ac[o])return o;var c=Ac[o],m;for(m in c)if(c.hasOwnProperty(m)&&m in S1)return Rx[o]=c[m];return o}var k1=ul("animationend"),E1=ul("animationiteration"),T1=ul("animationstart"),ZD=ul("transitionrun"),e5=ul("transitionstart"),t5=ul("transitioncancel"),C1=ul("transitionend"),A1=new Map,Px="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Px.push("scrollEnd");function oa(o,c){A1.set(o,c),kn(c,[o])}var R1=new WeakMap;function Hn(o,c){if(typeof o=="object"&&o!==null){var m=R1.get(o);return m!==void 0?m:(c={value:o,source:c,stack:aa(c)},R1.set(o,c),c)}return{value:o,source:c,stack:aa(c)}}var Gn=[],Rc=0,Ix=0;function vf(){for(var o=Rc,c=Ix=Rc=0;c<o;){var m=Gn[c];Gn[c++]=null;var g=Gn[c];Gn[c++]=null;var b=Gn[c];Gn[c++]=null;var S=Gn[c];if(Gn[c++]=null,g!==null&&b!==null){var F=g.pending;F===null?b.next=b:(b.next=F.next,F.next=b),g.pending=b}S!==0&&P1(m,b,S)}}function wf(o,c,m,g){Gn[Rc++]=o,Gn[Rc++]=c,Gn[Rc++]=m,Gn[Rc++]=g,Ix|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function Dx(o,c,m,g){return wf(o,c,m,g),Nf(o)}function Pc(o,c){return wf(o,null,null,c),Nf(o)}function P1(o,c,m){o.lanes|=m;var g=o.alternate;g!==null&&(g.lanes|=m);for(var b=!1,S=o.return;S!==null;)S.childLanes|=m,g=S.alternate,g!==null&&(g.childLanes|=m),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(b=!0)),o=S,S=S.return;return o.tag===3?(S=o.stateNode,b&&c!==null&&(b=31-ut(m),o=S.hiddenUpdates,g=o[b],g===null?o[b]=[c]:g.push(c),c.lane=m|536870912),S):null}function Nf(o){if(50<$u)throw $u=0,Fy=null,Error(r(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Ic={};function s5(o,c,m,g){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(o,c,m,g){return new s5(o,c,m,g)}function Mx(o){return o=o.prototype,!(!o||!o.isReactComponent)}function di(o,c){var m=o.alternate;return m===null?(m=Cn(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function I1(o,c){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,c=m.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function jf(o,c,m,g,b,S){var F=0;if(g=o,typeof o=="function")Mx(o)&&(F=1);else if(typeof o=="string")F=nM(o,m,xe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case E:return o=Cn(31,m,c,b),o.elementType=E,o.lanes=S,o;case N:return hl(m.children,b,S,c);case v:F=8,b|=24;break;case j:return o=Cn(12,m,c,b|2),o.elementType=j,o.lanes=S,o;case R:return o=Cn(13,m,c,b),o.elementType=R,o.lanes=S,o;case O:return o=Cn(19,m,c,b),o.elementType=O,o.lanes=S,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case k:case P:F=10;break e;case T:F=9;break e;case U:F=11;break e;case I:F=14;break e;case C:F=16,g=null;break e}F=29,m=Error(r(130,o===null?"null":typeof o,"")),g=null}return c=Cn(F,m,c,b),c.elementType=o,c.type=g,c.lanes=S,c}function hl(o,c,m,g){return o=Cn(7,o,g,c),o.lanes=m,o}function Ox(o,c,m){return o=Cn(6,o,null,c),o.lanes=m,o}function Lx(o,c,m){return c=Cn(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Dc=[],Mc=0,_f=null,Sf=0,Wn=[],Yn=0,ml=null,ui=1,hi="";function fl(o,c){Dc[Mc++]=Sf,Dc[Mc++]=_f,_f=o,Sf=c}function D1(o,c,m){Wn[Yn++]=ui,Wn[Yn++]=hi,Wn[Yn++]=ml,ml=o;var g=ui;o=hi;var b=32-ut(g)-1;g&=~(1<<b),m+=1;var S=32-ut(c)+b;if(30<S){var F=b-b%5;S=(g&(1<<F)-1).toString(32),g>>=F,b-=F,ui=1<<32-ut(c)+b|m<<b|g,hi=S+o}else ui=1<<S|m<<b|g,hi=o}function Ux(o){o.return!==null&&(fl(o,1),D1(o,1,0))}function Vx(o){for(;o===_f;)_f=Dc[--Mc],Dc[Mc]=null,Sf=Dc[--Mc],Dc[Mc]=null;for(;o===ml;)ml=Wn[--Yn],Wn[Yn]=null,hi=Wn[--Yn],Wn[Yn]=null,ui=Wn[--Yn],Wn[Yn]=null}var sn=null,Vs=null,ls=!1,gl=null,Ca=!1,Fx=Error(r(519));function pl(o){var c=Error(r(418,""));throw wu(Hn(c,o)),Fx}function M1(o){var c=o.stateNode,m=o.type,g=o.memoizedProps;switch(c[ye]=o,c[Ee]=g,m){case"dialog":Ht("cancel",c),Ht("close",c);break;case"iframe":case"object":case"embed":Ht("load",c);break;case"video":case"audio":for(m=0;m<Hu.length;m++)Ht(Hu[m],c);break;case"source":Ht("error",c);break;case"img":case"image":case"link":Ht("error",c),Ht("load",c);break;case"details":Ht("toggle",c);break;case"input":Ht("invalid",c),el(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),bc(c);break;case"select":Ht("invalid",c);break;case"textarea":Ht("invalid",c),tl(c,g.value,g.defaultValue,g.children),bc(c)}m=g.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||c.textContent===""+m||g.suppressHydrationWarning===!0||J2(c.textContent,m)?(g.popover!=null&&(Ht("beforetoggle",c),Ht("toggle",c)),g.onScroll!=null&&Ht("scroll",c),g.onScrollEnd!=null&&Ht("scrollend",c),g.onClick!=null&&(c.onclick=ag),c=!0):c=!1,c||pl(o)}function O1(o){for(sn=o.return;sn;)switch(sn.tag){case 5:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:sn=sn.return}}function bu(o){if(o!==sn)return!1;if(!ls)return O1(o),ls=!0,!1;var c=o.tag,m;if((m=c!==3&&c!==27)&&((m=c===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||sb(o.type,o.memoizedProps)),m=!m),m&&Vs&&pl(o),O1(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(m=o.data,m==="/$"){if(c===0){Vs=ca(o.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++;o=o.nextSibling}Vs=null}}else c===27?(c=Vs,lo(o.type)?(o=ib,ib=null,Vs=o):Vs=c):Vs=sn?ca(o.stateNode.nextSibling):null;return!0}function vu(){Vs=sn=null,ls=!1}function L1(){var o=gl;return o!==null&&(gn===null?gn=o:gn.push.apply(gn,o),gl=null),o}function wu(o){gl===null?gl=[o]:gl.push(o)}var zx=G(null),xl=null,mi=null;function Wi(o,c,m){re(zx,c._currentValue),c._currentValue=m}function fi(o){o._currentValue=zx.current,X(zx)}function Bx(o,c,m){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===m)break;o=o.return}}function $x(o,c,m,g){var b=o.child;for(b!==null&&(b.return=o);b!==null;){var S=b.dependencies;if(S!==null){var F=b.child;S=S.firstContext;e:for(;S!==null;){var $=S;S=b;for(var K=0;K<c.length;K++)if($.context===c[K]){S.lanes|=m,$=S.alternate,$!==null&&($.lanes|=m),Bx(S.return,m,o),g||(F=null);break e}S=$.next}}else if(b.tag===18){if(F=b.return,F===null)throw Error(r(341));F.lanes|=m,S=F.alternate,S!==null&&(S.lanes|=m),Bx(F,m,o),F=null}else F=b.child;if(F!==null)F.return=b;else for(F=b;F!==null;){if(F===o){F=null;break}if(b=F.sibling,b!==null){b.return=F.return,F=b;break}F=F.return}b=F}}function Nu(o,c,m,g){o=null;for(var b=c,S=!1;b!==null;){if(!S){if((b.flags&524288)!==0)S=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var F=b.alternate;if(F===null)throw Error(r(387));if(F=F.memoizedProps,F!==null){var $=b.type;Tn(b.pendingProps.value,F.value)||(o!==null?o.push($):o=[$])}}else if(b===Ce.current){if(F=b.alternate,F===null)throw Error(r(387));F.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(o!==null?o.push(Qu):o=[Qu])}b=b.return}o!==null&&$x(c,o,m,g),c.flags|=262144}function kf(o){for(o=o.firstContext;o!==null;){if(!Tn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function yl(o){xl=o,mi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function $r(o){return U1(xl,o)}function Ef(o,c){return xl===null&&yl(o),U1(o,c)}function U1(o,c){var m=c._currentValue;if(c={context:c,memoizedValue:m,next:null},mi===null){if(o===null)throw Error(r(308));mi=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else mi=mi.next=c;return m}var r5=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(m,g){o.push(g)}};this.abort=function(){c.aborted=!0,o.forEach(function(m){return m()})}},n5=t.unstable_scheduleCallback,a5=t.unstable_NormalPriority,dr={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qx(){return{controller:new r5,data:new Map,refCount:0}}function ju(o){o.refCount--,o.refCount===0&&n5(a5,function(){o.controller.abort()})}var _u=null,Hx=0,Oc=0,Lc=null;function i5(o,c){if(_u===null){var m=_u=[];Hx=0,Oc=Wy(),Lc={status:"pending",value:void 0,then:function(g){m.push(g)}}}return Hx++,c.then(V1,V1),c}function V1(){if(--Hx===0&&_u!==null){Lc!==null&&(Lc.status="fulfilled");var o=_u;_u=null,Oc=0,Lc=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function o5(o,c){var m=[],g={status:"pending",value:null,reason:null,then:function(b){m.push(b)}};return o.then(function(){g.status="fulfilled",g.value=c;for(var b=0;b<m.length;b++)(0,m[b])(c)},function(b){for(g.status="rejected",g.reason=b,b=0;b<m.length;b++)(0,m[b])(void 0)}),g}var F1=H.S;H.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&i5(o,c),F1!==null&&F1(o,c)};var bl=G(null);function Gx(){var o=bl.current;return o!==null?o:Ss.pooledCache}function Tf(o,c){c===null?re(bl,bl.current):re(bl,c.pool)}function z1(){var o=Gx();return o===null?null:{parent:dr._currentValue,pool:o}}var Su=Error(r(460)),B1=Error(r(474)),Cf=Error(r(542)),Wx={then:function(){}};function $1(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Af(){}function q1(o,c,m){switch(m=o[m],m===void 0?o.push(c):m!==c&&(c.then(Af,Af),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,G1(o),o;default:if(typeof c.status=="string")c.then(Af,Af);else{if(o=Ss,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=c,o.status="pending",o.then(function(g){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=g}},function(g){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,G1(o),o}throw ku=c,Su}}var ku=null;function H1(){if(ku===null)throw Error(r(459));var o=ku;return ku=null,o}function G1(o){if(o===Su||o===Cf)throw Error(r(483))}var Yi=!1;function Yx(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kx(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ki(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Xi(o,c,m){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(fs&2)!==0){var b=g.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),g.pending=c,c=Nf(o),P1(o,null,m),c}return wf(o,g,c,m),Nf(o)}function Eu(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var g=c.lanes;g&=o.pendingLanes,m|=g,c.lanes=m,pr(o,m)}}function Xx(o,c){var m=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,m===g)){var b=null,S=null;if(m=m.firstBaseUpdate,m!==null){do{var F={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};S===null?b=S=F:S=S.next=F,m=m.next}while(m!==null);S===null?b=S=c:S=S.next=c}else b=S=c;m={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}var Qx=!1;function Tu(){if(Qx){var o=Lc;if(o!==null)throw o}}function Cu(o,c,m,g){Qx=!1;var b=o.updateQueue;Yi=!1;var S=b.firstBaseUpdate,F=b.lastBaseUpdate,$=b.shared.pending;if($!==null){b.shared.pending=null;var K=$,ce=K.next;K.next=null,F===null?S=ce:F.next=ce,F=K;var ke=o.alternate;ke!==null&&(ke=ke.updateQueue,$=ke.lastBaseUpdate,$!==F&&($===null?ke.firstBaseUpdate=ce:$.next=ce,ke.lastBaseUpdate=K))}if(S!==null){var De=b.baseState;F=0,ke=ce=K=null,$=S;do{var he=$.lane&-536870913,fe=he!==$.lane;if(fe?(Jt&he)===he:(g&he)===he){he!==0&&he===Oc&&(Qx=!0),ke!==null&&(ke=ke.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var Ct=o,jt=$;he=c;var vs=m;switch(jt.tag){case 1:if(Ct=jt.payload,typeof Ct=="function"){De=Ct.call(vs,De,he);break e}De=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=jt.payload,he=typeof Ct=="function"?Ct.call(vs,De,he):Ct,he==null)break e;De=f({},De,he);break e;case 2:Yi=!0}}he=$.callback,he!==null&&(o.flags|=64,fe&&(o.flags|=8192),fe=b.callbacks,fe===null?b.callbacks=[he]:fe.push(he))}else fe={lane:he,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ke===null?(ce=ke=fe,K=De):ke=ke.next=fe,F|=he;if($=$.next,$===null){if($=b.shared.pending,$===null)break;fe=$,$=fe.next,fe.next=null,b.lastBaseUpdate=fe,b.shared.pending=null}}while(!0);ke===null&&(K=De),b.baseState=K,b.firstBaseUpdate=ce,b.lastBaseUpdate=ke,S===null&&(b.shared.lanes=0),no|=F,o.lanes=F,o.memoizedState=De}}function W1(o,c){if(typeof o!="function")throw Error(r(191,o));o.call(c)}function Y1(o,c){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)W1(m[o],c)}var Uc=G(null),Rf=G(0);function K1(o,c){o=wi,re(Rf,o),re(Uc,c),wi=o|c.baseLanes}function Jx(){re(Rf,wi),re(Uc,Uc.current)}function Zx(){wi=Rf.current,X(Uc),X(Rf)}var Qi=0,Vt=null,ys=null,er=null,Pf=!1,Vc=!1,vl=!1,If=0,Au=0,Fc=null,l5=0;function Gs(){throw Error(r(321))}function ey(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!Tn(o[m],c[m]))return!1;return!0}function ty(o,c,m,g,b,S){return Qi=S,Vt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,H.H=o===null||o.memoizedState===null?P_:I_,vl=!1,S=m(g,b),vl=!1,Vc&&(S=Q1(c,m,g,b)),X1(o),S}function X1(o){H.H=Vf;var c=ys!==null&&ys.next!==null;if(Qi=0,er=ys=Vt=null,Pf=!1,Au=0,Fc=null,c)throw Error(r(300));o===null||wr||(o=o.dependencies,o!==null&&kf(o)&&(wr=!0))}function Q1(o,c,m,g){Vt=o;var b=0;do{if(Vc&&(Fc=null),Au=0,Vc=!1,25<=b)throw Error(r(301));if(b+=1,er=ys=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}H.H=g5,S=c(m,g)}while(Vc);return S}function c5(){var o=H.H,c=o.useState()[0];return c=typeof c.then=="function"?Ru(c):c,o=o.useState()[0],(ys!==null?ys.memoizedState:null)!==o&&(Vt.flags|=1024),c}function sy(){var o=If!==0;return If=0,o}function ry(o,c,m){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~m}function ny(o){if(Pf){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Pf=!1}Qi=0,er=ys=Vt=null,Vc=!1,Au=If=0,Fc=null}function mn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?Vt.memoizedState=er=o:er=er.next=o,er}function tr(){if(ys===null){var o=Vt.alternate;o=o!==null?o.memoizedState:null}else o=ys.next;var c=er===null?Vt.memoizedState:er.next;if(c!==null)er=c,ys=o;else{if(o===null)throw Vt.alternate===null?Error(r(467)):Error(r(310));ys=o,o={memoizedState:ys.memoizedState,baseState:ys.baseState,baseQueue:ys.baseQueue,queue:ys.queue,next:null},er===null?Vt.memoizedState=er=o:er=er.next=o}return er}function ay(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(o){var c=Au;return Au+=1,Fc===null&&(Fc=[]),o=q1(Fc,o,c),c=Vt,(er===null?c.memoizedState:er.next)===null&&(c=c.alternate,H.H=c===null||c.memoizedState===null?P_:I_),o}function Df(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ru(o);if(o.$$typeof===P)return $r(o)}throw Error(r(438,String(o)))}function iy(o){var c=null,m=Vt.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var g=Vt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=ay(),Vt.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(o),g=0;g<o;g++)m[g]=D;return c.index++,m}function gi(o,c){return typeof c=="function"?c(o):c}function Mf(o){var c=tr();return oy(c,ys,o)}function oy(o,c,m){var g=o.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=m;var b=o.baseQueue,S=g.pending;if(S!==null){if(b!==null){var F=b.next;b.next=S.next,S.next=F}c.baseQueue=b=S,g.pending=null}if(S=o.baseState,b===null)o.memoizedState=S;else{c=b.next;var $=F=null,K=null,ce=c,ke=!1;do{var De=ce.lane&-536870913;if(De!==ce.lane?(Jt&De)===De:(Qi&De)===De){var he=ce.revertLane;if(he===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),De===Oc&&(ke=!0);else if((Qi&he)===he){ce=ce.next,he===Oc&&(ke=!0);continue}else De={lane:0,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},K===null?($=K=De,F=S):K=K.next=De,Vt.lanes|=he,no|=he;De=ce.action,vl&&m(S,De),S=ce.hasEagerState?ce.eagerState:m(S,De)}else he={lane:De,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},K===null?($=K=he,F=S):K=K.next=he,Vt.lanes|=De,no|=De;ce=ce.next}while(ce!==null&&ce!==c);if(K===null?F=S:K.next=$,!Tn(S,o.memoizedState)&&(wr=!0,ke&&(m=Lc,m!==null)))throw m;o.memoizedState=S,o.baseState=F,o.baseQueue=K,g.lastRenderedState=S}return b===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function ly(o){var c=tr(),m=c.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=o;var g=m.dispatch,b=m.pending,S=c.memoizedState;if(b!==null){m.pending=null;var F=b=b.next;do S=o(S,F.action),F=F.next;while(F!==b);Tn(S,c.memoizedState)||(wr=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),m.lastRenderedState=S}return[S,g]}function J1(o,c,m){var g=Vt,b=tr(),S=ls;if(S){if(m===void 0)throw Error(r(407));m=m()}else m=c();var F=!Tn((ys||b).memoizedState,m);F&&(b.memoizedState=m,wr=!0),b=b.queue;var $=t_.bind(null,g,b,o);if(Pu(2048,8,$,[o]),b.getSnapshot!==c||F||er!==null&&er.memoizedState.tag&1){if(g.flags|=2048,zc(9,Of(),e_.bind(null,g,b,m,c),null),Ss===null)throw Error(r(349));S||(Qi&124)!==0||Z1(g,c,m)}return m}function Z1(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=Vt.updateQueue,c===null?(c=ay(),Vt.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function e_(o,c,m,g){c.value=m,c.getSnapshot=g,s_(c)&&r_(o)}function t_(o,c,m){return m(function(){s_(c)&&r_(o)})}function s_(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!Tn(o,m)}catch{return!0}}function r_(o){var c=Pc(o,2);c!==null&&Dn(c,o,2)}function cy(o){var c=mn();if(typeof o=="function"){var m=o;if(o=m(),vl){Ze(!0);try{m()}finally{Ze(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:o},c}function n_(o,c,m,g){return o.baseState=m,oy(o,ys,typeof g=="function"?g:gi)}function d5(o,c,m,g,b){if(Uf(o))throw Error(r(485));if(o=c.action,o!==null){var S={payload:b,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){S.listeners.push(F)}};H.T!==null?m(!0):S.isTransition=!1,g(S),m=c.pending,m===null?(S.next=c.pending=S,a_(c,S)):(S.next=m.next,c.pending=m.next=S)}}function a_(o,c){var m=c.action,g=c.payload,b=o.state;if(c.isTransition){var S=H.T,F={};H.T=F;try{var $=m(b,g),K=H.S;K!==null&&K(F,$),i_(o,c,$)}catch(ce){dy(o,c,ce)}finally{H.T=S}}else try{S=m(b,g),i_(o,c,S)}catch(ce){dy(o,c,ce)}}function i_(o,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(g){o_(o,c,g)},function(g){return dy(o,c,g)}):o_(o,c,m)}function o_(o,c,m){c.status="fulfilled",c.value=m,l_(c),o.state=m,c=o.pending,c!==null&&(m=c.next,m===c?o.pending=null:(m=m.next,c.next=m,a_(o,m)))}function dy(o,c,m){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=m,l_(c),c=c.next;while(c!==g)}o.action=null}function l_(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function c_(o,c){return c}function d_(o,c){if(ls){var m=Ss.formState;if(m!==null){e:{var g=Vt;if(ls){if(Vs){t:{for(var b=Vs,S=Ca;b.nodeType!==8;){if(!S){b=null;break t}if(b=ca(b.nextSibling),b===null){b=null;break t}}S=b.data,b=S==="F!"||S==="F"?b:null}if(b){Vs=ca(b.nextSibling),g=b.data==="F!";break e}}pl(g)}g=!1}g&&(c=m[0])}}return m=mn(),m.memoizedState=m.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c_,lastRenderedState:c},m.queue=g,m=C_.bind(null,Vt,g),g.dispatch=m,g=cy(!1),S=gy.bind(null,Vt,!1,g.queue),g=mn(),b={state:c,dispatch:null,action:o,pending:null},g.queue=b,m=d5.bind(null,Vt,b,S,m),b.dispatch=m,g.memoizedState=o,[c,m,!1]}function u_(o){var c=tr();return h_(c,ys,o)}function h_(o,c,m){if(c=oy(o,c,c_)[0],o=Mf(gi)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=Ru(c)}catch(F){throw F===Su?Cf:F}else g=c;c=tr();var b=c.queue,S=b.dispatch;return m!==c.memoizedState&&(Vt.flags|=2048,zc(9,Of(),u5.bind(null,b,m),null)),[g,S,o]}function u5(o,c){o.action=c}function m_(o){var c=tr(),m=ys;if(m!==null)return h_(c,m,o);tr(),c=c.memoizedState,m=tr();var g=m.queue.dispatch;return m.memoizedState=o,[c,g,!1]}function zc(o,c,m,g){return o={tag:o,create:m,deps:g,inst:c,next:null},c=Vt.updateQueue,c===null&&(c=ay(),Vt.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=o.next=o:(g=m.next,m.next=o,o.next=g,c.lastEffect=o),o}function Of(){return{destroy:void 0,resource:void 0}}function f_(){return tr().memoizedState}function Lf(o,c,m,g){var b=mn();g=g===void 0?null:g,Vt.flags|=o,b.memoizedState=zc(1|c,Of(),m,g)}function Pu(o,c,m,g){var b=tr();g=g===void 0?null:g;var S=b.memoizedState.inst;ys!==null&&g!==null&&ey(g,ys.memoizedState.deps)?b.memoizedState=zc(c,S,m,g):(Vt.flags|=o,b.memoizedState=zc(1|c,S,m,g))}function g_(o,c){Lf(8390656,8,o,c)}function p_(o,c){Pu(2048,8,o,c)}function x_(o,c){return Pu(4,2,o,c)}function y_(o,c){return Pu(4,4,o,c)}function b_(o,c){if(typeof c=="function"){o=o();var m=c(o);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function v_(o,c,m){m=m!=null?m.concat([o]):null,Pu(4,4,b_.bind(null,c,o),m)}function uy(){}function w_(o,c){var m=tr();c=c===void 0?null:c;var g=m.memoizedState;return c!==null&&ey(c,g[1])?g[0]:(m.memoizedState=[o,c],o)}function N_(o,c){var m=tr();c=c===void 0?null:c;var g=m.memoizedState;if(c!==null&&ey(c,g[1]))return g[0];if(g=o(),vl){Ze(!0);try{o()}finally{Ze(!1)}}return m.memoizedState=[g,c],g}function hy(o,c,m){return m===void 0||(Qi&1073741824)!==0?o.memoizedState=c:(o.memoizedState=m,o=S2(),Vt.lanes|=o,no|=o,m)}function j_(o,c,m,g){return Tn(m,c)?m:Uc.current!==null?(o=hy(o,m,g),Tn(o,c)||(wr=!0),o):(Qi&42)===0?(wr=!0,o.memoizedState=m):(o=S2(),Vt.lanes|=o,no|=o,c)}function __(o,c,m,g,b){var S=W.p;W.p=S!==0&&8>S?S:8;var F=H.T,$={};H.T=$,gy(o,!1,c,m);try{var K=b(),ce=H.S;if(ce!==null&&ce($,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var ke=o5(K,g);Iu(o,c,ke,In(o))}else Iu(o,c,g,In(o))}catch(De){Iu(o,c,{then:function(){},status:"rejected",reason:De},In())}finally{W.p=S,H.T=F}}function h5(){}function my(o,c,m,g){if(o.tag!==5)throw Error(r(476));var b=S_(o).queue;__(o,b,c,de,m===null?h5:function(){return k_(o),m(g)})}function S_(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:de},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:m},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function k_(o){var c=S_(o).next.queue;Iu(o,c,{},In())}function fy(){return $r(Qu)}function E_(){return tr().memoizedState}function T_(){return tr().memoizedState}function m5(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var m=In();o=Ki(m);var g=Xi(c,o,m);g!==null&&(Dn(g,c,m),Eu(g,c,m)),c={cache:qx()},o.payload=c;return}c=c.return}}function f5(o,c,m){var g=In();m={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Uf(o)?A_(c,m):(m=Dx(o,c,m,g),m!==null&&(Dn(m,o,g),R_(m,c,g)))}function C_(o,c,m){var g=In();Iu(o,c,m,g)}function Iu(o,c,m,g){var b={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Uf(o))A_(c,b);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var F=c.lastRenderedState,$=S(F,m);if(b.hasEagerState=!0,b.eagerState=$,Tn($,F))return wf(o,c,b,0),Ss===null&&vf(),!1}catch{}finally{}if(m=Dx(o,c,b,g),m!==null)return Dn(m,o,g),R_(m,c,g),!0}return!1}function gy(o,c,m,g){if(g={lane:2,revertLane:Wy(),action:g,hasEagerState:!1,eagerState:null,next:null},Uf(o)){if(c)throw Error(r(479))}else c=Dx(o,m,g,2),c!==null&&Dn(c,o,2)}function Uf(o){var c=o.alternate;return o===Vt||c!==null&&c===Vt}function A_(o,c){Vc=Pf=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function R_(o,c,m){if((m&4194048)!==0){var g=c.lanes;g&=o.pendingLanes,m|=g,c.lanes=m,pr(o,m)}}var Vf={readContext:$r,use:Df,useCallback:Gs,useContext:Gs,useEffect:Gs,useImperativeHandle:Gs,useLayoutEffect:Gs,useInsertionEffect:Gs,useMemo:Gs,useReducer:Gs,useRef:Gs,useState:Gs,useDebugValue:Gs,useDeferredValue:Gs,useTransition:Gs,useSyncExternalStore:Gs,useId:Gs,useHostTransitionStatus:Gs,useFormState:Gs,useActionState:Gs,useOptimistic:Gs,useMemoCache:Gs,useCacheRefresh:Gs},P_={readContext:$r,use:Df,useCallback:function(o,c){return mn().memoizedState=[o,c===void 0?null:c],o},useContext:$r,useEffect:g_,useImperativeHandle:function(o,c,m){m=m!=null?m.concat([o]):null,Lf(4194308,4,b_.bind(null,c,o),m)},useLayoutEffect:function(o,c){return Lf(4194308,4,o,c)},useInsertionEffect:function(o,c){Lf(4,2,o,c)},useMemo:function(o,c){var m=mn();c=c===void 0?null:c;var g=o();if(vl){Ze(!0);try{o()}finally{Ze(!1)}}return m.memoizedState=[g,c],g},useReducer:function(o,c,m){var g=mn();if(m!==void 0){var b=m(c);if(vl){Ze(!0);try{m(c)}finally{Ze(!1)}}}else b=c;return g.memoizedState=g.baseState=b,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:b},g.queue=o,o=o.dispatch=f5.bind(null,Vt,o),[g.memoizedState,o]},useRef:function(o){var c=mn();return o={current:o},c.memoizedState=o},useState:function(o){o=cy(o);var c=o.queue,m=C_.bind(null,Vt,c);return c.dispatch=m,[o.memoizedState,m]},useDebugValue:uy,useDeferredValue:function(o,c){var m=mn();return hy(m,o,c)},useTransition:function(){var o=cy(!1);return o=__.bind(null,Vt,o.queue,!0,!1),mn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,m){var g=Vt,b=mn();if(ls){if(m===void 0)throw Error(r(407));m=m()}else{if(m=c(),Ss===null)throw Error(r(349));(Jt&124)!==0||Z1(g,c,m)}b.memoizedState=m;var S={value:m,getSnapshot:c};return b.queue=S,g_(t_.bind(null,g,S,o),[o]),g.flags|=2048,zc(9,Of(),e_.bind(null,g,S,m,c),null),m},useId:function(){var o=mn(),c=Ss.identifierPrefix;if(ls){var m=hi,g=ui;m=(g&~(1<<32-ut(g)-1)).toString(32)+m,c=""+c+"R"+m,m=If++,0<m&&(c+="H"+m.toString(32)),c+=""}else m=l5++,c=""+c+"r"+m.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:fy,useFormState:d_,useActionState:d_,useOptimistic:function(o){var c=mn();c.memoizedState=c.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=gy.bind(null,Vt,!0,m),m.dispatch=c,[o,c]},useMemoCache:iy,useCacheRefresh:function(){return mn().memoizedState=m5.bind(null,Vt)}},I_={readContext:$r,use:Df,useCallback:w_,useContext:$r,useEffect:p_,useImperativeHandle:v_,useInsertionEffect:x_,useLayoutEffect:y_,useMemo:N_,useReducer:Mf,useRef:f_,useState:function(){return Mf(gi)},useDebugValue:uy,useDeferredValue:function(o,c){var m=tr();return j_(m,ys.memoizedState,o,c)},useTransition:function(){var o=Mf(gi)[0],c=tr().memoizedState;return[typeof o=="boolean"?o:Ru(o),c]},useSyncExternalStore:J1,useId:E_,useHostTransitionStatus:fy,useFormState:u_,useActionState:u_,useOptimistic:function(o,c){var m=tr();return n_(m,ys,o,c)},useMemoCache:iy,useCacheRefresh:T_},g5={readContext:$r,use:Df,useCallback:w_,useContext:$r,useEffect:p_,useImperativeHandle:v_,useInsertionEffect:x_,useLayoutEffect:y_,useMemo:N_,useReducer:ly,useRef:f_,useState:function(){return ly(gi)},useDebugValue:uy,useDeferredValue:function(o,c){var m=tr();return ys===null?hy(m,o,c):j_(m,ys.memoizedState,o,c)},useTransition:function(){var o=ly(gi)[0],c=tr().memoizedState;return[typeof o=="boolean"?o:Ru(o),c]},useSyncExternalStore:J1,useId:E_,useHostTransitionStatus:fy,useFormState:m_,useActionState:m_,useOptimistic:function(o,c){var m=tr();return ys!==null?n_(m,ys,o,c):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:iy,useCacheRefresh:T_},Bc=null,Du=0;function Ff(o){var c=Du;return Du+=1,Bc===null&&(Bc=[]),q1(Bc,o,c)}function Mu(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function zf(o,c){throw c.$$typeof===p?Error(r(525)):(o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function D_(o){var c=o._init;return c(o._payload)}function M_(o){function c(ie,se){if(o){var le=ie.deletions;le===null?(ie.deletions=[se],ie.flags|=16):le.push(se)}}function m(ie,se){if(!o)return null;for(;se!==null;)c(ie,se),se=se.sibling;return null}function g(ie){for(var se=new Map;ie!==null;)ie.key!==null?se.set(ie.key,ie):se.set(ie.index,ie),ie=ie.sibling;return se}function b(ie,se){return ie=di(ie,se),ie.index=0,ie.sibling=null,ie}function S(ie,se,le){return ie.index=le,o?(le=ie.alternate,le!==null?(le=le.index,le<se?(ie.flags|=67108866,se):le):(ie.flags|=67108866,se)):(ie.flags|=1048576,se)}function F(ie){return o&&ie.alternate===null&&(ie.flags|=67108866),ie}function $(ie,se,le,Re){return se===null||se.tag!==6?(se=Ox(le,ie.mode,Re),se.return=ie,se):(se=b(se,le),se.return=ie,se)}function K(ie,se,le,Re){var at=le.type;return at===N?ke(ie,se,le.props.children,Re,le.key):se!==null&&(se.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===C&&D_(at)===se.type)?(se=b(se,le.props),Mu(se,le),se.return=ie,se):(se=jf(le.type,le.key,le.props,null,ie.mode,Re),Mu(se,le),se.return=ie,se)}function ce(ie,se,le,Re){return se===null||se.tag!==4||se.stateNode.containerInfo!==le.containerInfo||se.stateNode.implementation!==le.implementation?(se=Lx(le,ie.mode,Re),se.return=ie,se):(se=b(se,le.children||[]),se.return=ie,se)}function ke(ie,se,le,Re,at){return se===null||se.tag!==7?(se=hl(le,ie.mode,Re,at),se.return=ie,se):(se=b(se,le),se.return=ie,se)}function De(ie,se,le){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=Ox(""+se,ie.mode,le),se.return=ie,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return le=jf(se.type,se.key,se.props,null,ie.mode,le),Mu(le,se),le.return=ie,le;case w:return se=Lx(se,ie.mode,le),se.return=ie,se;case C:var Re=se._init;return se=Re(se._payload),De(ie,se,le)}if(Q(se)||B(se))return se=hl(se,ie.mode,le,null),se.return=ie,se;if(typeof se.then=="function")return De(ie,Ff(se),le);if(se.$$typeof===P)return De(ie,Ef(ie,se),le);zf(ie,se)}return null}function he(ie,se,le,Re){var at=se!==null?se.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return at!==null?null:$(ie,se,""+le,Re);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case x:return le.key===at?K(ie,se,le,Re):null;case w:return le.key===at?ce(ie,se,le,Re):null;case C:return at=le._init,le=at(le._payload),he(ie,se,le,Re)}if(Q(le)||B(le))return at!==null?null:ke(ie,se,le,Re,null);if(typeof le.then=="function")return he(ie,se,Ff(le),Re);if(le.$$typeof===P)return he(ie,se,Ef(ie,le),Re);zf(ie,le)}return null}function fe(ie,se,le,Re,at){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return ie=ie.get(le)||null,$(se,ie,""+Re,at);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case x:return ie=ie.get(Re.key===null?le:Re.key)||null,K(se,ie,Re,at);case w:return ie=ie.get(Re.key===null?le:Re.key)||null,ce(se,ie,Re,at);case C:var Bt=Re._init;return Re=Bt(Re._payload),fe(ie,se,le,Re,at)}if(Q(Re)||B(Re))return ie=ie.get(le)||null,ke(se,ie,Re,at,null);if(typeof Re.then=="function")return fe(ie,se,le,Ff(Re),at);if(Re.$$typeof===P)return fe(ie,se,le,Ef(se,Re),at);zf(se,Re)}return null}function Ct(ie,se,le,Re){for(var at=null,Bt=null,gt=se,_t=se=0,jr=null;gt!==null&&_t<le.length;_t++){gt.index>_t?(jr=gt,gt=null):jr=gt.sibling;var os=he(ie,gt,le[_t],Re);if(os===null){gt===null&&(gt=jr);break}o&&gt&&os.alternate===null&&c(ie,gt),se=S(os,se,_t),Bt===null?at=os:Bt.sibling=os,Bt=os,gt=jr}if(_t===le.length)return m(ie,gt),ls&&fl(ie,_t),at;if(gt===null){for(;_t<le.length;_t++)gt=De(ie,le[_t],Re),gt!==null&&(se=S(gt,se,_t),Bt===null?at=gt:Bt.sibling=gt,Bt=gt);return ls&&fl(ie,_t),at}for(gt=g(gt);_t<le.length;_t++)jr=fe(gt,ie,_t,le[_t],Re),jr!==null&&(o&&jr.alternate!==null&&gt.delete(jr.key===null?_t:jr.key),se=S(jr,se,_t),Bt===null?at=jr:Bt.sibling=jr,Bt=jr);return o&&gt.forEach(function(fo){return c(ie,fo)}),ls&&fl(ie,_t),at}function jt(ie,se,le,Re){if(le==null)throw Error(r(151));for(var at=null,Bt=null,gt=se,_t=se=0,jr=null,os=le.next();gt!==null&&!os.done;_t++,os=le.next()){gt.index>_t?(jr=gt,gt=null):jr=gt.sibling;var fo=he(ie,gt,os.value,Re);if(fo===null){gt===null&&(gt=jr);break}o&&gt&&fo.alternate===null&&c(ie,gt),se=S(fo,se,_t),Bt===null?at=fo:Bt.sibling=fo,Bt=fo,gt=jr}if(os.done)return m(ie,gt),ls&&fl(ie,_t),at;if(gt===null){for(;!os.done;_t++,os=le.next())os=De(ie,os.value,Re),os!==null&&(se=S(os,se,_t),Bt===null?at=os:Bt.sibling=os,Bt=os);return ls&&fl(ie,_t),at}for(gt=g(gt);!os.done;_t++,os=le.next())os=fe(gt,ie,_t,os.value,Re),os!==null&&(o&&os.alternate!==null&&gt.delete(os.key===null?_t:os.key),se=S(os,se,_t),Bt===null?at=os:Bt.sibling=os,Bt=os);return o&&gt.forEach(function(pM){return c(ie,pM)}),ls&&fl(ie,_t),at}function vs(ie,se,le,Re){if(typeof le=="object"&&le!==null&&le.type===N&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case x:e:{for(var at=le.key;se!==null;){if(se.key===at){if(at=le.type,at===N){if(se.tag===7){m(ie,se.sibling),Re=b(se,le.props.children),Re.return=ie,ie=Re;break e}}else if(se.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===C&&D_(at)===se.type){m(ie,se.sibling),Re=b(se,le.props),Mu(Re,le),Re.return=ie,ie=Re;break e}m(ie,se);break}else c(ie,se);se=se.sibling}le.type===N?(Re=hl(le.props.children,ie.mode,Re,le.key),Re.return=ie,ie=Re):(Re=jf(le.type,le.key,le.props,null,ie.mode,Re),Mu(Re,le),Re.return=ie,ie=Re)}return F(ie);case w:e:{for(at=le.key;se!==null;){if(se.key===at)if(se.tag===4&&se.stateNode.containerInfo===le.containerInfo&&se.stateNode.implementation===le.implementation){m(ie,se.sibling),Re=b(se,le.children||[]),Re.return=ie,ie=Re;break e}else{m(ie,se);break}else c(ie,se);se=se.sibling}Re=Lx(le,ie.mode,Re),Re.return=ie,ie=Re}return F(ie);case C:return at=le._init,le=at(le._payload),vs(ie,se,le,Re)}if(Q(le))return Ct(ie,se,le,Re);if(B(le)){if(at=B(le),typeof at!="function")throw Error(r(150));return le=at.call(le),jt(ie,se,le,Re)}if(typeof le.then=="function")return vs(ie,se,Ff(le),Re);if(le.$$typeof===P)return vs(ie,se,Ef(ie,le),Re);zf(ie,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,se!==null&&se.tag===6?(m(ie,se.sibling),Re=b(se,le),Re.return=ie,ie=Re):(m(ie,se),Re=Ox(le,ie.mode,Re),Re.return=ie,ie=Re),F(ie)):m(ie,se)}return function(ie,se,le,Re){try{Du=0;var at=vs(ie,se,le,Re);return Bc=null,at}catch(gt){if(gt===Su||gt===Cf)throw gt;var Bt=Cn(29,gt,null,ie.mode);return Bt.lanes=Re,Bt.return=ie,Bt}finally{}}}var $c=M_(!0),O_=M_(!1),Kn=G(null),Aa=null;function Ji(o){var c=o.alternate;re(ur,ur.current&1),re(Kn,o),Aa===null&&(c===null||Uc.current!==null||c.memoizedState!==null)&&(Aa=o)}function L_(o){if(o.tag===22){if(re(ur,ur.current),re(Kn,o),Aa===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Aa=o)}}else Zi()}function Zi(){re(ur,ur.current),re(Kn,Kn.current)}function pi(o){X(Kn),Aa===o&&(Aa=null),X(ur)}var ur=G(0);function Bf(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||ab(m)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function py(o,c,m,g){c=o.memoizedState,m=m(g,c),m=m==null?c:f({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var xy={enqueueSetState:function(o,c,m){o=o._reactInternals;var g=In(),b=Ki(g);b.payload=c,m!=null&&(b.callback=m),c=Xi(o,b,g),c!==null&&(Dn(c,o,g),Eu(c,o,g))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var g=In(),b=Ki(g);b.tag=1,b.payload=c,m!=null&&(b.callback=m),c=Xi(o,b,g),c!==null&&(Dn(c,o,g),Eu(c,o,g))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=In(),g=Ki(m);g.tag=2,c!=null&&(g.callback=c),c=Xi(o,g,m),c!==null&&(Dn(c,o,m),Eu(c,o,m))}};function U_(o,c,m,g,b,S,F){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,F):c.prototype&&c.prototype.isPureReactComponent?!xu(m,g)||!xu(b,S):!0}function V_(o,c,m,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,g),c.state!==o&&xy.enqueueReplaceState(c,c.state,null)}function wl(o,c){var m=c;if("ref"in c){m={};for(var g in c)g!=="ref"&&(m[g]=c[g])}if(o=o.defaultProps){m===c&&(m=f({},m));for(var b in o)m[b]===void 0&&(m[b]=o[b])}return m}var $f=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function F_(o){$f(o)}function z_(o){console.error(o)}function B_(o){$f(o)}function qf(o,c){try{var m=o.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function $_(o,c,m){try{var g=o.onCaughtError;g(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function yy(o,c,m){return m=Ki(m),m.tag=3,m.payload={element:null},m.callback=function(){qf(o,c)},m}function q_(o){return o=Ki(o),o.tag=3,o}function H_(o,c,m,g){var b=m.type.getDerivedStateFromError;if(typeof b=="function"){var S=g.value;o.payload=function(){return b(S)},o.callback=function(){$_(c,m,g)}}var F=m.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(o.callback=function(){$_(c,m,g),typeof b!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var $=g.stack;this.componentDidCatch(g.value,{componentStack:$!==null?$:""})})}function p5(o,c,m,g,b){if(m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=m.alternate,c!==null&&Nu(c,m,b,!0),m=Kn.current,m!==null){switch(m.tag){case 13:return Aa===null?By():m.alternate===null&&Fs===0&&(Fs=3),m.flags&=-257,m.flags|=65536,m.lanes=b,g===Wx?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([g]):c.add(g),qy(o,g,b)),!1;case 22:return m.flags|=65536,g===Wx?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([g]):m.add(g)),qy(o,g,b)),!1}throw Error(r(435,m.tag))}return qy(o,g,b),By(),!1}if(ls)return c=Kn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,g!==Fx&&(o=Error(r(422),{cause:g}),wu(Hn(o,m)))):(g!==Fx&&(c=Error(r(423),{cause:g}),wu(Hn(c,m))),o=o.current.alternate,o.flags|=65536,b&=-b,o.lanes|=b,g=Hn(g,m),b=yy(o.stateNode,g,b),Xx(o,b),Fs!==4&&(Fs=2)),!1;var S=Error(r(520),{cause:g});if(S=Hn(S,m),Bu===null?Bu=[S]:Bu.push(S),Fs!==4&&(Fs=2),c===null)return!0;g=Hn(g,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,o=b&-b,m.lanes|=o,o=yy(m.stateNode,g,o),Xx(m,o),!1;case 1:if(c=m.type,S=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ao===null||!ao.has(S))))return m.flags|=65536,b&=-b,m.lanes|=b,b=q_(b),H_(b,o,m,g),Xx(m,b),!1}m=m.return}while(m!==null);return!1}var G_=Error(r(461)),wr=!1;function Pr(o,c,m,g){c.child=o===null?O_(c,null,m,g):$c(c,o.child,m,g)}function W_(o,c,m,g,b){m=m.render;var S=c.ref;if("ref"in g){var F={};for(var $ in g)$!=="ref"&&(F[$]=g[$])}else F=g;return yl(c),g=ty(o,c,m,F,S,b),$=sy(),o!==null&&!wr?(ry(o,c,b),xi(o,c,b)):(ls&&$&&Ux(c),c.flags|=1,Pr(o,c,g,b),c.child)}function Y_(o,c,m,g,b){if(o===null){var S=m.type;return typeof S=="function"&&!Mx(S)&&S.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=S,K_(o,c,S,g,b)):(o=jf(m.type,null,g,c,c.mode,b),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,!ky(o,b)){var F=S.memoizedProps;if(m=m.compare,m=m!==null?m:xu,m(F,g)&&o.ref===c.ref)return xi(o,c,b)}return c.flags|=1,o=di(S,g),o.ref=c.ref,o.return=c,c.child=o}function K_(o,c,m,g,b){if(o!==null){var S=o.memoizedProps;if(xu(S,g)&&o.ref===c.ref)if(wr=!1,c.pendingProps=g=S,ky(o,b))(o.flags&131072)!==0&&(wr=!0);else return c.lanes=o.lanes,xi(o,c,b)}return by(o,c,m,g,b)}function X_(o,c,m){var g=c.pendingProps,b=g.children,S=o!==null?o.memoizedState:null;if(g.mode==="hidden"){if((c.flags&128)!==0){if(g=S!==null?S.baseLanes|m:m,o!==null){for(b=c.child=o.child,S=0;b!==null;)S=S|b.lanes|b.childLanes,b=b.sibling;c.childLanes=S&~g}else c.childLanes=0,c.child=null;return Q_(o,c,g,m)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Tf(c,S!==null?S.cachePool:null),S!==null?K1(c,S):Jx(),L_(c);else return c.lanes=c.childLanes=536870912,Q_(o,c,S!==null?S.baseLanes|m:m,m)}else S!==null?(Tf(c,S.cachePool),K1(c,S),Zi(),c.memoizedState=null):(o!==null&&Tf(c,null),Jx(),Zi());return Pr(o,c,b,m),c.child}function Q_(o,c,m,g){var b=Gx();return b=b===null?null:{parent:dr._currentValue,pool:b},c.memoizedState={baseLanes:m,cachePool:b},o!==null&&Tf(c,null),Jx(),L_(c),o!==null&&Nu(o,c,g,!0),null}function Hf(o,c){var m=c.ref;if(m===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(o===null||o.ref!==m)&&(c.flags|=4194816)}}function by(o,c,m,g,b){return yl(c),m=ty(o,c,m,g,void 0,b),g=sy(),o!==null&&!wr?(ry(o,c,b),xi(o,c,b)):(ls&&g&&Ux(c),c.flags|=1,Pr(o,c,m,b),c.child)}function J_(o,c,m,g,b,S){return yl(c),c.updateQueue=null,m=Q1(c,g,m,b),X1(o),g=sy(),o!==null&&!wr?(ry(o,c,S),xi(o,c,S)):(ls&&g&&Ux(c),c.flags|=1,Pr(o,c,m,S),c.child)}function Z_(o,c,m,g,b){if(yl(c),c.stateNode===null){var S=Ic,F=m.contextType;typeof F=="object"&&F!==null&&(S=$r(F)),S=new m(g,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=xy,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=g,S.state=c.memoizedState,S.refs={},Yx(c),F=m.contextType,S.context=typeof F=="object"&&F!==null?$r(F):Ic,S.state=c.memoizedState,F=m.getDerivedStateFromProps,typeof F=="function"&&(py(c,m,F,g),S.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(F=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),F!==S.state&&xy.enqueueReplaceState(S,S.state,null),Cu(c,g,S,b),Tu(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(o===null){S=c.stateNode;var $=c.memoizedProps,K=wl(m,$);S.props=K;var ce=S.context,ke=m.contextType;F=Ic,typeof ke=="object"&&ke!==null&&(F=$r(ke));var De=m.getDerivedStateFromProps;ke=typeof De=="function"||typeof S.getSnapshotBeforeUpdate=="function",$=c.pendingProps!==$,ke||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||($||ce!==F)&&V_(c,S,g,F),Yi=!1;var he=c.memoizedState;S.state=he,Cu(c,g,S,b),Tu(),ce=c.memoizedState,$||he!==ce||Yi?(typeof De=="function"&&(py(c,m,De,g),ce=c.memoizedState),(K=Yi||U_(c,m,K,g,he,ce,F))?(ke||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=ce),S.props=g,S.state=ce,S.context=F,g=K):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{S=c.stateNode,Kx(o,c),F=c.memoizedProps,ke=wl(m,F),S.props=ke,De=c.pendingProps,he=S.context,ce=m.contextType,K=Ic,typeof ce=="object"&&ce!==null&&(K=$r(ce)),$=m.getDerivedStateFromProps,(ce=typeof $=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==De||he!==K)&&V_(c,S,g,K),Yi=!1,he=c.memoizedState,S.state=he,Cu(c,g,S,b),Tu();var fe=c.memoizedState;F!==De||he!==fe||Yi||o!==null&&o.dependencies!==null&&kf(o.dependencies)?(typeof $=="function"&&(py(c,m,$,g),fe=c.memoizedState),(ke=Yi||U_(c,m,ke,g,he,fe,K)||o!==null&&o.dependencies!==null&&kf(o.dependencies))?(ce||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,fe,K),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,fe,K)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||F===o.memoizedProps&&he===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&he===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=fe),S.props=g,S.state=fe,S.context=K,g=ke):(typeof S.componentDidUpdate!="function"||F===o.memoizedProps&&he===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&he===o.memoizedState||(c.flags|=1024),g=!1)}return S=g,Hf(o,c),g=(c.flags&128)!==0,S||g?(S=c.stateNode,m=g&&typeof m.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,o!==null&&g?(c.child=$c(c,o.child,null,b),c.child=$c(c,null,m,b)):Pr(o,c,m,b),c.memoizedState=S.state,o=c.child):o=xi(o,c,b),o}function e2(o,c,m,g){return vu(),c.flags|=256,Pr(o,c,m,g),c.child}var vy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wy(o){return{baseLanes:o,cachePool:z1()}}function Ny(o,c,m){return o=o!==null?o.childLanes&~m:0,c&&(o|=Xn),o}function t2(o,c,m){var g=c.pendingProps,b=!1,S=(c.flags&128)!==0,F;if((F=S)||(F=o!==null&&o.memoizedState===null?!1:(ur.current&2)!==0),F&&(b=!0,c.flags&=-129),F=(c.flags&32)!==0,c.flags&=-33,o===null){if(ls){if(b?Ji(c):Zi(),ls){var $=Vs,K;if(K=$){e:{for(K=$,$=Ca;K.nodeType!==8;){if(!$){$=null;break e}if(K=ca(K.nextSibling),K===null){$=null;break e}}$=K}$!==null?(c.memoizedState={dehydrated:$,treeContext:ml!==null?{id:ui,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},K=Cn(18,null,null,0),K.stateNode=$,K.return=c,c.child=K,sn=c,Vs=null,K=!0):K=!1}K||pl(c)}if($=c.memoizedState,$!==null&&($=$.dehydrated,$!==null))return ab($)?c.lanes=32:c.lanes=536870912,null;pi(c)}return $=g.children,g=g.fallback,b?(Zi(),b=c.mode,$=Gf({mode:"hidden",children:$},b),g=hl(g,b,m,null),$.return=c,g.return=c,$.sibling=g,c.child=$,b=c.child,b.memoizedState=wy(m),b.childLanes=Ny(o,F,m),c.memoizedState=vy,g):(Ji(c),jy(c,$))}if(K=o.memoizedState,K!==null&&($=K.dehydrated,$!==null)){if(S)c.flags&256?(Ji(c),c.flags&=-257,c=_y(o,c,m)):c.memoizedState!==null?(Zi(),c.child=o.child,c.flags|=128,c=null):(Zi(),b=g.fallback,$=c.mode,g=Gf({mode:"visible",children:g.children},$),b=hl(b,$,m,null),b.flags|=2,g.return=c,b.return=c,g.sibling=b,c.child=g,$c(c,o.child,null,m),g=c.child,g.memoizedState=wy(m),g.childLanes=Ny(o,F,m),c.memoizedState=vy,c=b);else if(Ji(c),ab($)){if(F=$.nextSibling&&$.nextSibling.dataset,F)var ce=F.dgst;F=ce,g=Error(r(419)),g.stack="",g.digest=F,wu({value:g,source:null,stack:null}),c=_y(o,c,m)}else if(wr||Nu(o,c,m,!1),F=(m&o.childLanes)!==0,wr||F){if(F=Ss,F!==null&&(g=m&-m,g=(g&42)!==0?1:Ps(g),g=(g&(F.suspendedLanes|m))!==0?0:g,g!==0&&g!==K.retryLane))throw K.retryLane=g,Pc(o,g),Dn(F,o,g),G_;$.data==="$?"||By(),c=_y(o,c,m)}else $.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=K.treeContext,Vs=ca($.nextSibling),sn=c,ls=!0,gl=null,Ca=!1,o!==null&&(Wn[Yn++]=ui,Wn[Yn++]=hi,Wn[Yn++]=ml,ui=o.id,hi=o.overflow,ml=c),c=jy(c,g.children),c.flags|=4096);return c}return b?(Zi(),b=g.fallback,$=c.mode,K=o.child,ce=K.sibling,g=di(K,{mode:"hidden",children:g.children}),g.subtreeFlags=K.subtreeFlags&65011712,ce!==null?b=di(ce,b):(b=hl(b,$,m,null),b.flags|=2),b.return=c,g.return=c,g.sibling=b,c.child=g,g=b,b=c.child,$=o.child.memoizedState,$===null?$=wy(m):(K=$.cachePool,K!==null?(ce=dr._currentValue,K=K.parent!==ce?{parent:ce,pool:ce}:K):K=z1(),$={baseLanes:$.baseLanes|m,cachePool:K}),b.memoizedState=$,b.childLanes=Ny(o,F,m),c.memoizedState=vy,g):(Ji(c),m=o.child,o=m.sibling,m=di(m,{mode:"visible",children:g.children}),m.return=c,m.sibling=null,o!==null&&(F=c.deletions,F===null?(c.deletions=[o],c.flags|=16):F.push(o)),c.child=m,c.memoizedState=null,m)}function jy(o,c){return c=Gf({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Gf(o,c){return o=Cn(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function _y(o,c,m){return $c(c,o.child,null,m),o=jy(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function s2(o,c,m){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Bx(o.return,c,m)}function Sy(o,c,m,g,b){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:m,tailMode:b}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=m,S.tailMode=b)}function r2(o,c,m){var g=c.pendingProps,b=g.revealOrder,S=g.tail;if(Pr(o,c,g.children,m),g=ur.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&s2(o,m,c);else if(o.tag===19)s2(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}switch(re(ur,g),b){case"forwards":for(m=c.child,b=null;m!==null;)o=m.alternate,o!==null&&Bf(o)===null&&(b=m),m=m.sibling;m=b,m===null?(b=c.child,c.child=null):(b=m.sibling,m.sibling=null),Sy(c,!1,b,m,S);break;case"backwards":for(m=null,b=c.child,c.child=null;b!==null;){if(o=b.alternate,o!==null&&Bf(o)===null){c.child=b;break}o=b.sibling,b.sibling=m,m=b,b=o}Sy(c,!0,m,null,S);break;case"together":Sy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function xi(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),no|=c.lanes,(m&c.childLanes)===0)if(o!==null){if(Nu(o,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,m=di(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=di(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function ky(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&kf(o)))}function x5(o,c,m){switch(c.tag){case 3:ve(c,c.stateNode.containerInfo),Wi(c,dr,o.memoizedState.cache),vu();break;case 27:case 5:Se(c);break;case 4:ve(c,c.stateNode.containerInfo);break;case 10:Wi(c,c.type,c.memoizedProps.value);break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(Ji(c),c.flags|=128,null):(m&c.child.childLanes)!==0?t2(o,c,m):(Ji(c),o=xi(o,c,m),o!==null?o.sibling:null);Ji(c);break;case 19:var b=(o.flags&128)!==0;if(g=(m&c.childLanes)!==0,g||(Nu(o,c,m,!1),g=(m&c.childLanes)!==0),b){if(g)return r2(o,c,m);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),re(ur,ur.current),g)break;return null;case 22:case 23:return c.lanes=0,X_(o,c,m);case 24:Wi(c,dr,o.memoizedState.cache)}return xi(o,c,m)}function n2(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps)wr=!0;else{if(!ky(o,m)&&(c.flags&128)===0)return wr=!1,x5(o,c,m);wr=(o.flags&131072)!==0}else wr=!1,ls&&(c.flags&1048576)!==0&&D1(c,Sf,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var g=c.elementType,b=g._init;if(g=b(g._payload),c.type=g,typeof g=="function")Mx(g)?(o=wl(g,o),c.tag=1,c=Z_(null,c,g,o,m)):(c.tag=0,c=by(null,c,g,o,m));else{if(g!=null){if(b=g.$$typeof,b===U){c.tag=11,c=W_(null,c,g,o,m);break e}else if(b===I){c.tag=14,c=Y_(null,c,g,o,m);break e}}throw c=Y(g)||g,Error(r(306,c,""))}}return c;case 0:return by(o,c,c.type,c.pendingProps,m);case 1:return g=c.type,b=wl(g,c.pendingProps),Z_(o,c,g,b,m);case 3:e:{if(ve(c,c.stateNode.containerInfo),o===null)throw Error(r(387));g=c.pendingProps;var S=c.memoizedState;b=S.element,Kx(o,c),Cu(c,g,null,m);var F=c.memoizedState;if(g=F.cache,Wi(c,dr,g),g!==S.cache&&$x(c,[dr],m,!0),Tu(),g=F.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:F.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=e2(o,c,g,m);break e}else if(g!==b){b=Hn(Error(r(424)),c),wu(b),c=e2(o,c,g,m);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Vs=ca(o.firstChild),sn=c,ls=!0,gl=null,Ca=!0,m=O_(c,null,g,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(vu(),g===b){c=xi(o,c,m);break e}Pr(o,c,g,m)}c=c.child}return c;case 26:return Hf(o,c),o===null?(m=lS(c.type,null,c.pendingProps,null))?c.memoizedState=m:ls||(m=c.type,o=c.pendingProps,g=ig(me.current).createElement(m),g[ye]=c,g[Ee]=o,Dr(g,m,o),Is(g),c.stateNode=g):c.memoizedState=lS(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Se(c),o===null&&ls&&(g=c.stateNode=aS(c.type,c.pendingProps,me.current),sn=c,Ca=!0,b=Vs,lo(c.type)?(ib=b,Vs=ca(g.firstChild)):Vs=b),Pr(o,c,c.pendingProps.children,m),Hf(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&ls&&((b=g=Vs)&&(g=H5(g,c.type,c.pendingProps,Ca),g!==null?(c.stateNode=g,sn=c,Vs=ca(g.firstChild),Ca=!1,b=!0):b=!1),b||pl(c)),Se(c),b=c.type,S=c.pendingProps,F=o!==null?o.memoizedProps:null,g=S.children,sb(b,S)?g=null:F!==null&&sb(b,F)&&(c.flags|=32),c.memoizedState!==null&&(b=ty(o,c,c5,null,null,m),Qu._currentValue=b),Hf(o,c),Pr(o,c,g,m),c.child;case 6:return o===null&&ls&&((o=m=Vs)&&(m=G5(m,c.pendingProps,Ca),m!==null?(c.stateNode=m,sn=c,Vs=null,o=!0):o=!1),o||pl(c)),null;case 13:return t2(o,c,m);case 4:return ve(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=$c(c,null,g,m):Pr(o,c,g,m),c.child;case 11:return W_(o,c,c.type,c.pendingProps,m);case 7:return Pr(o,c,c.pendingProps,m),c.child;case 8:return Pr(o,c,c.pendingProps.children,m),c.child;case 12:return Pr(o,c,c.pendingProps.children,m),c.child;case 10:return g=c.pendingProps,Wi(c,c.type,g.value),Pr(o,c,g.children,m),c.child;case 9:return b=c.type._context,g=c.pendingProps.children,yl(c),b=$r(b),g=g(b),c.flags|=1,Pr(o,c,g,m),c.child;case 14:return Y_(o,c,c.type,c.pendingProps,m);case 15:return K_(o,c,c.type,c.pendingProps,m);case 19:return r2(o,c,m);case 31:return g=c.pendingProps,m=c.mode,g={mode:g.mode,children:g.children},o===null?(m=Gf(g,m),m.ref=c.ref,c.child=m,m.return=c,c=m):(m=di(o.child,g),m.ref=c.ref,c.child=m,m.return=c,c=m),c;case 22:return X_(o,c,m);case 24:return yl(c),g=$r(dr),o===null?(b=Gx(),b===null&&(b=Ss,S=qx(),b.pooledCache=S,S.refCount++,S!==null&&(b.pooledCacheLanes|=m),b=S),c.memoizedState={parent:g,cache:b},Yx(c),Wi(c,dr,b)):((o.lanes&m)!==0&&(Kx(o,c),Cu(c,null,null,m),Tu()),b=o.memoizedState,S=c.memoizedState,b.parent!==g?(b={parent:g,cache:g},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),Wi(c,dr,g)):(g=S.cache,Wi(c,dr,g),g!==b.cache&&$x(c,[dr],m,!0))),Pr(o,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function yi(o){o.flags|=4}function a2(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!mS(c)){if(c=Kn.current,c!==null&&((Jt&4194048)===Jt?Aa!==null:(Jt&62914560)!==Jt&&(Jt&536870912)===0||c!==Aa))throw ku=Wx,B1;o.flags|=8192}}function Wf(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?Rs():536870912,o.lanes|=c,Wc|=c)}function Ou(o,c){if(!ls)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Ds(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,g=0;if(c)for(var b=o.child;b!==null;)m|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)m|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=g,o.childLanes=m,c}function y5(o,c,m){var g=c.pendingProps;switch(Vx(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ds(c),null;case 1:return Ds(c),null;case 3:return m=c.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),fi(dr),Z(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(bu(c)?yi(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,L1())),Ds(c),null;case 26:return m=c.memoizedState,o===null?(yi(c),m!==null?(Ds(c),a2(c,m)):(Ds(c),c.flags&=-16777217)):m?m!==o.memoizedState?(yi(c),Ds(c),a2(c,m)):(Ds(c),c.flags&=-16777217):(o.memoizedProps!==g&&yi(c),Ds(c),c.flags&=-16777217),null;case 27:Te(c),m=me.current;var b=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==g&&yi(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Ds(c),null}o=xe.current,bu(c)?M1(c):(o=aS(b,g,m),c.stateNode=o,yi(c))}return Ds(c),null;case 5:if(Te(c),m=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&yi(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Ds(c),null}if(o=xe.current,bu(c))M1(c);else{switch(b=ig(me.current),o){case 1:o=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:o=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":o=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":o=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":o=b.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof g.is=="string"?b.createElement("select",{is:g.is}):b.createElement("select"),g.multiple?o.multiple=!0:g.size&&(o.size=g.size);break;default:o=typeof g.is=="string"?b.createElement(m,{is:g.is}):b.createElement(m)}}o[ye]=c,o[Ee]=g;e:for(b=c.child;b!==null;){if(b.tag===5||b.tag===6)o.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break e;for(;b.sibling===null;){if(b.return===null||b.return===c)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c.stateNode=o;e:switch(Dr(o,m,g),m){case"button":case"input":case"select":case"textarea":o=!!g.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&yi(c)}}return Ds(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==g&&yi(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(o=me.current,bu(c)){if(o=c.stateNode,m=c.memoizedProps,g=null,b=sn,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}o[ye]=c,o=!!(o.nodeValue===m||g!==null&&g.suppressHydrationWarning===!0||J2(o.nodeValue,m)),o||pl(c)}else o=ig(o).createTextNode(g),o[ye]=c,c.stateNode=o}return Ds(c),null;case 13:if(g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(b=bu(c),g!==null&&g.dehydrated!==null){if(o===null){if(!b)throw Error(r(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[ye]=c}else vu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ds(c),b=!1}else b=L1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(pi(c),c):(pi(c),null)}if(pi(c),(c.flags&128)!==0)return c.lanes=m,c;if(m=g!==null,o=o!==null&&o.memoizedState!==null,m){g=c.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool);var S=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==b&&(g.flags|=2048)}return m!==o&&m&&(c.child.flags|=8192),Wf(c,c.updateQueue),Ds(c),null;case 4:return Z(),o===null&&Qy(c.stateNode.containerInfo),Ds(c),null;case 10:return fi(c.type),Ds(c),null;case 19:if(X(ur),b=c.memoizedState,b===null)return Ds(c),null;if(g=(c.flags&128)!==0,S=b.rendering,S===null)if(g)Ou(b,!1);else{if(Fs!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(S=Bf(o),S!==null){for(c.flags|=128,Ou(b,!1),o=S.updateQueue,c.updateQueue=o,Wf(c,o),c.subtreeFlags=0,o=m,m=c.child;m!==null;)I1(m,o),m=m.sibling;return re(ur,ur.current&1|2),c.child}o=o.sibling}b.tail!==null&&Xe()>Xf&&(c.flags|=128,g=!0,Ou(b,!1),c.lanes=4194304)}else{if(!g)if(o=Bf(S),o!==null){if(c.flags|=128,g=!0,o=o.updateQueue,c.updateQueue=o,Wf(c,o),Ou(b,!0),b.tail===null&&b.tailMode==="hidden"&&!S.alternate&&!ls)return Ds(c),null}else 2*Xe()-b.renderingStartTime>Xf&&m!==536870912&&(c.flags|=128,g=!0,Ou(b,!1),c.lanes=4194304);b.isBackwards?(S.sibling=c.child,c.child=S):(o=b.last,o!==null?o.sibling=S:c.child=S,b.last=S)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=Xe(),c.sibling=null,o=ur.current,re(ur,g?o&1|2:o&1),c):(Ds(c),null);case 22:case 23:return pi(c),Zx(),g=c.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(m&536870912)!==0&&(c.flags&128)===0&&(Ds(c),c.subtreeFlags&6&&(c.flags|=8192)):Ds(c),m=c.updateQueue,m!==null&&Wf(c,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048),o!==null&&X(bl),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),fi(dr),Ds(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function b5(o,c){switch(Vx(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return fi(dr),Z(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Te(c),null;case 13:if(pi(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));vu()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return X(ur),null;case 4:return Z(),null;case 10:return fi(c.type),null;case 22:case 23:return pi(c),Zx(),o!==null&&X(bl),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return fi(dr),null;case 25:return null;default:return null}}function i2(o,c){switch(Vx(c),c.tag){case 3:fi(dr),Z();break;case 26:case 27:case 5:Te(c);break;case 4:Z();break;case 13:pi(c);break;case 19:X(ur);break;case 10:fi(c.type);break;case 22:case 23:pi(c),Zx(),o!==null&&X(bl);break;case 24:fi(dr)}}function Lu(o,c){try{var m=c.updateQueue,g=m!==null?m.lastEffect:null;if(g!==null){var b=g.next;m=b;do{if((m.tag&o)===o){g=void 0;var S=m.create,F=m.inst;g=S(),F.destroy=g}m=m.next}while(m!==b)}}catch($){js(c,c.return,$)}}function eo(o,c,m){try{var g=c.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var S=b.next;g=S;do{if((g.tag&o)===o){var F=g.inst,$=F.destroy;if($!==void 0){F.destroy=void 0,b=c;var K=m,ce=$;try{ce()}catch(ke){js(b,K,ke)}}}g=g.next}while(g!==S)}}catch(ke){js(c,c.return,ke)}}function o2(o){var c=o.updateQueue;if(c!==null){var m=o.stateNode;try{Y1(c,m)}catch(g){js(o,o.return,g)}}}function l2(o,c,m){m.props=wl(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(g){js(o,c,g)}}function Uu(o,c){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof m=="function"?o.refCleanup=m(g):m.current=g}}catch(b){js(o,c,b)}}function Ra(o,c){var m=o.ref,g=o.refCleanup;if(m!==null)if(typeof g=="function")try{g()}catch(b){js(o,c,b)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(b){js(o,c,b)}else m.current=null}function c2(o){var c=o.type,m=o.memoizedProps,g=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":m.autoFocus&&g.focus();break e;case"img":m.src?g.src=m.src:m.srcSet&&(g.srcset=m.srcSet)}}catch(b){js(o,o.return,b)}}function Ey(o,c,m){try{var g=o.stateNode;F5(g,o.type,m,c),g[Ee]=c}catch(b){js(o,o.return,b)}}function d2(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&lo(o.type)||o.tag===4}function Ty(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||d2(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&lo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Cy(o,c,m){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,c):(c=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,c.appendChild(o),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=ag));else if(g!==4&&(g===27&&lo(o.type)&&(m=o.stateNode,c=null),o=o.child,o!==null))for(Cy(o,c,m),o=o.sibling;o!==null;)Cy(o,c,m),o=o.sibling}function Yf(o,c,m){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?m.insertBefore(o,c):m.appendChild(o);else if(g!==4&&(g===27&&lo(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(Yf(o,c,m),o=o.sibling;o!==null;)Yf(o,c,m),o=o.sibling}function u2(o){var c=o.stateNode,m=o.memoizedProps;try{for(var g=o.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);Dr(c,g,m),c[ye]=o,c[Ee]=m}catch(S){js(o,o.return,S)}}var bi=!1,Ws=!1,Ay=!1,h2=typeof WeakSet=="function"?WeakSet:Set,Nr=null;function v5(o,c){if(o=o.containerInfo,eb=hg,o=j1(o),Tx(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var g=m.getSelection&&m.getSelection();if(g&&g.rangeCount!==0){m=g.anchorNode;var b=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{m.nodeType,S.nodeType}catch{m=null;break e}var F=0,$=-1,K=-1,ce=0,ke=0,De=o,he=null;t:for(;;){for(var fe;De!==m||b!==0&&De.nodeType!==3||($=F+b),De!==S||g!==0&&De.nodeType!==3||(K=F+g),De.nodeType===3&&(F+=De.nodeValue.length),(fe=De.firstChild)!==null;)he=De,De=fe;for(;;){if(De===o)break t;if(he===m&&++ce===b&&($=F),he===S&&++ke===g&&(K=F),(fe=De.nextSibling)!==null)break;De=he,he=De.parentNode}De=fe}m=$===-1||K===-1?null:{start:$,end:K}}else m=null}m=m||{start:0,end:0}}else m=null;for(tb={focusedElem:o,selectionRange:m},hg=!1,Nr=c;Nr!==null;)if(c=Nr,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,Nr=o;else for(;Nr!==null;){switch(c=Nr,S=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&S!==null){o=void 0,m=c,b=S.memoizedProps,S=S.memoizedState,g=m.stateNode;try{var Ct=wl(m.type,b,m.elementType===m.type);o=g.getSnapshotBeforeUpdate(Ct,S),g.__reactInternalSnapshotBeforeUpdate=o}catch(jt){js(m,m.return,jt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,m=o.nodeType,m===9)nb(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":nb(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=c.sibling,o!==null){o.return=c.return,Nr=o;break}Nr=c.return}}function m2(o,c,m){var g=m.flags;switch(m.tag){case 0:case 11:case 15:to(o,m),g&4&&Lu(5,m);break;case 1:if(to(o,m),g&4)if(o=m.stateNode,c===null)try{o.componentDidMount()}catch(F){js(m,m.return,F)}else{var b=wl(m.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(b,c,o.__reactInternalSnapshotBeforeUpdate)}catch(F){js(m,m.return,F)}}g&64&&o2(m),g&512&&Uu(m,m.return);break;case 3:if(to(o,m),g&64&&(o=m.updateQueue,o!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=m.child.stateNode;break;case 1:c=m.child.stateNode}try{Y1(o,c)}catch(F){js(m,m.return,F)}}break;case 27:c===null&&g&4&&u2(m);case 26:case 5:to(o,m),c===null&&g&4&&c2(m),g&512&&Uu(m,m.return);break;case 12:to(o,m);break;case 13:to(o,m),g&4&&p2(o,m),g&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=C5.bind(null,m),W5(o,m))));break;case 22:if(g=m.memoizedState!==null||bi,!g){c=c!==null&&c.memoizedState!==null||Ws,b=bi;var S=Ws;bi=g,(Ws=c)&&!S?so(o,m,(m.subtreeFlags&8772)!==0):to(o,m),bi=b,Ws=S}break;case 30:break;default:to(o,m)}}function f2(o){var c=o.alternate;c!==null&&(o.alternate=null,f2(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&en(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Cs=null,fn=!1;function vi(o,c,m){for(m=m.child;m!==null;)g2(o,c,m),m=m.sibling}function g2(o,c,m){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Je,m)}catch{}switch(m.tag){case 26:Ws||Ra(m,c),vi(o,c,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Ws||Ra(m,c);var g=Cs,b=fn;lo(m.type)&&(Cs=m.stateNode,fn=!1),vi(o,c,m),Wu(m.stateNode),Cs=g,fn=b;break;case 5:Ws||Ra(m,c);case 6:if(g=Cs,b=fn,Cs=null,vi(o,c,m),Cs=g,fn=b,Cs!==null)if(fn)try{(Cs.nodeType===9?Cs.body:Cs.nodeName==="HTML"?Cs.ownerDocument.body:Cs).removeChild(m.stateNode)}catch(S){js(m,c,S)}else try{Cs.removeChild(m.stateNode)}catch(S){js(m,c,S)}break;case 18:Cs!==null&&(fn?(o=Cs,rS(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),th(o)):rS(Cs,m.stateNode));break;case 4:g=Cs,b=fn,Cs=m.stateNode.containerInfo,fn=!0,vi(o,c,m),Cs=g,fn=b;break;case 0:case 11:case 14:case 15:Ws||eo(2,m,c),Ws||eo(4,m,c),vi(o,c,m);break;case 1:Ws||(Ra(m,c),g=m.stateNode,typeof g.componentWillUnmount=="function"&&l2(m,c,g)),vi(o,c,m);break;case 21:vi(o,c,m);break;case 22:Ws=(g=Ws)||m.memoizedState!==null,vi(o,c,m),Ws=g;break;default:vi(o,c,m)}}function p2(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{th(o)}catch(m){js(c,c.return,m)}}function w5(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new h2),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new h2),c;default:throw Error(r(435,o.tag))}}function Ry(o,c){var m=w5(o);c.forEach(function(g){var b=A5.bind(null,o,g);m.has(g)||(m.add(g),g.then(b,b))})}function An(o,c){var m=c.deletions;if(m!==null)for(var g=0;g<m.length;g++){var b=m[g],S=o,F=c,$=F;e:for(;$!==null;){switch($.tag){case 27:if(lo($.type)){Cs=$.stateNode,fn=!1;break e}break;case 5:Cs=$.stateNode,fn=!1;break e;case 3:case 4:Cs=$.stateNode.containerInfo,fn=!0;break e}$=$.return}if(Cs===null)throw Error(r(160));g2(S,F,b),Cs=null,fn=!1,S=b.alternate,S!==null&&(S.return=null),b.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)x2(c,o),c=c.sibling}var la=null;function x2(o,c){var m=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:An(c,o),Rn(o),g&4&&(eo(3,o,o.return),Lu(3,o),eo(5,o,o.return));break;case 1:An(c,o),Rn(o),g&512&&(Ws||m===null||Ra(m,m.return)),g&64&&bi&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?g:m.concat(g))));break;case 26:var b=la;if(An(c,o),Rn(o),g&512&&(Ws||m===null||Ra(m,m.return)),g&4){var S=m!==null?m.memoizedState:null;if(g=o.memoizedState,m===null)if(g===null)if(o.stateNode===null){e:{g=o.type,m=o.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":S=b.getElementsByTagName("title")[0],(!S||S[Sn]||S[ye]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=b.createElement(g),b.head.insertBefore(S,b.querySelector("head > title"))),Dr(S,g,m),S[ye]=o,Is(S),g=S;break e;case"link":var F=uS("link","href",b).get(g+(m.href||""));if(F){for(var $=0;$<F.length;$++)if(S=F[$],S.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&S.getAttribute("rel")===(m.rel==null?null:m.rel)&&S.getAttribute("title")===(m.title==null?null:m.title)&&S.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){F.splice($,1);break t}}S=b.createElement(g),Dr(S,g,m),b.head.appendChild(S);break;case"meta":if(F=uS("meta","content",b).get(g+(m.content||""))){for($=0;$<F.length;$++)if(S=F[$],S.getAttribute("content")===(m.content==null?null:""+m.content)&&S.getAttribute("name")===(m.name==null?null:m.name)&&S.getAttribute("property")===(m.property==null?null:m.property)&&S.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&S.getAttribute("charset")===(m.charSet==null?null:m.charSet)){F.splice($,1);break t}}S=b.createElement(g),Dr(S,g,m),b.head.appendChild(S);break;default:throw Error(r(468,g))}S[ye]=o,Is(S),g=S}o.stateNode=g}else hS(b,o.type,o.stateNode);else o.stateNode=dS(b,g,o.memoizedProps);else S!==g?(S===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):S.count--,g===null?hS(b,o.type,o.stateNode):dS(b,g,o.memoizedProps)):g===null&&o.stateNode!==null&&Ey(o,o.memoizedProps,m.memoizedProps)}break;case 27:An(c,o),Rn(o),g&512&&(Ws||m===null||Ra(m,m.return)),m!==null&&g&4&&Ey(o,o.memoizedProps,m.memoizedProps);break;case 5:if(An(c,o),Rn(o),g&512&&(Ws||m===null||Ra(m,m.return)),o.flags&32){b=o.stateNode;try{zn(b,"")}catch(fe){js(o,o.return,fe)}}g&4&&o.stateNode!=null&&(b=o.memoizedProps,Ey(o,b,m!==null?m.memoizedProps:b)),g&1024&&(Ay=!0);break;case 6:if(An(c,o),Rn(o),g&4){if(o.stateNode===null)throw Error(r(162));g=o.memoizedProps,m=o.stateNode;try{m.nodeValue=g}catch(fe){js(o,o.return,fe)}}break;case 3:if(cg=null,b=la,la=og(c.containerInfo),An(c,o),la=b,Rn(o),g&4&&m!==null&&m.memoizedState.isDehydrated)try{th(c.containerInfo)}catch(fe){js(o,o.return,fe)}Ay&&(Ay=!1,y2(o));break;case 4:g=la,la=og(o.stateNode.containerInfo),An(c,o),Rn(o),la=g;break;case 12:An(c,o),Rn(o);break;case 13:An(c,o),Rn(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Ly=Xe()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Ry(o,g)));break;case 22:b=o.memoizedState!==null;var K=m!==null&&m.memoizedState!==null,ce=bi,ke=Ws;if(bi=ce||b,Ws=ke||K,An(c,o),Ws=ke,bi=ce,Rn(o),g&8192)e:for(c=o.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(m===null||K||bi||Ws||Nl(o)),m=null,c=o;;){if(c.tag===5||c.tag===26){if(m===null){K=m=c;try{if(S=K.stateNode,b)F=S.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{$=K.stateNode;var De=K.memoizedProps.style,he=De!=null&&De.hasOwnProperty("display")?De.display:null;$.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(fe){js(K,K.return,fe)}}}else if(c.tag===6){if(m===null){K=c;try{K.stateNode.nodeValue=b?"":K.memoizedProps}catch(fe){js(K,K.return,fe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=o.updateQueue,g!==null&&(m=g.retryQueue,m!==null&&(g.retryQueue=null,Ry(o,m))));break;case 19:An(c,o),Rn(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Ry(o,g)));break;case 30:break;case 21:break;default:An(c,o),Rn(o)}}function Rn(o){var c=o.flags;if(c&2){try{for(var m,g=o.return;g!==null;){if(d2(g)){m=g;break}g=g.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var b=m.stateNode,S=Ty(o);Yf(o,S,b);break;case 5:var F=m.stateNode;m.flags&32&&(zn(F,""),m.flags&=-33);var $=Ty(o);Yf(o,$,F);break;case 3:case 4:var K=m.stateNode.containerInfo,ce=Ty(o);Cy(o,ce,K);break;default:throw Error(r(161))}}catch(ke){js(o,o.return,ke)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function y2(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;y2(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function to(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)m2(o,c.alternate,c),c=c.sibling}function Nl(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:eo(4,c,c.return),Nl(c);break;case 1:Ra(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&l2(c,c.return,m),Nl(c);break;case 27:Wu(c.stateNode);case 26:case 5:Ra(c,c.return),Nl(c);break;case 22:c.memoizedState===null&&Nl(c);break;case 30:Nl(c);break;default:Nl(c)}o=o.sibling}}function so(o,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,b=o,S=c,F=S.flags;switch(S.tag){case 0:case 11:case 15:so(b,S,m),Lu(4,S);break;case 1:if(so(b,S,m),g=S,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ce){js(g,g.return,ce)}if(g=S,b=g.updateQueue,b!==null){var $=g.stateNode;try{var K=b.shared.hiddenCallbacks;if(K!==null)for(b.shared.hiddenCallbacks=null,b=0;b<K.length;b++)W1(K[b],$)}catch(ce){js(g,g.return,ce)}}m&&F&64&&o2(S),Uu(S,S.return);break;case 27:u2(S);case 26:case 5:so(b,S,m),m&&g===null&&F&4&&c2(S),Uu(S,S.return);break;case 12:so(b,S,m);break;case 13:so(b,S,m),m&&F&4&&p2(b,S);break;case 22:S.memoizedState===null&&so(b,S,m),Uu(S,S.return);break;case 30:break;default:so(b,S,m)}c=c.sibling}}function Py(o,c){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&ju(m))}function Iy(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&ju(o))}function Pa(o,c,m,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)b2(o,c,m,g),c=c.sibling}function b2(o,c,m,g){var b=c.flags;switch(c.tag){case 0:case 11:case 15:Pa(o,c,m,g),b&2048&&Lu(9,c);break;case 1:Pa(o,c,m,g);break;case 3:Pa(o,c,m,g),b&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&ju(o)));break;case 12:if(b&2048){Pa(o,c,m,g),o=c.stateNode;try{var S=c.memoizedProps,F=S.id,$=S.onPostCommit;typeof $=="function"&&$(F,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(K){js(c,c.return,K)}}else Pa(o,c,m,g);break;case 13:Pa(o,c,m,g);break;case 23:break;case 22:S=c.stateNode,F=c.alternate,c.memoizedState!==null?S._visibility&2?Pa(o,c,m,g):Vu(o,c):S._visibility&2?Pa(o,c,m,g):(S._visibility|=2,qc(o,c,m,g,(c.subtreeFlags&10256)!==0)),b&2048&&Py(F,c);break;case 24:Pa(o,c,m,g),b&2048&&Iy(c.alternate,c);break;default:Pa(o,c,m,g)}}function qc(o,c,m,g,b){for(b=b&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var S=o,F=c,$=m,K=g,ce=F.flags;switch(F.tag){case 0:case 11:case 15:qc(S,F,$,K,b),Lu(8,F);break;case 23:break;case 22:var ke=F.stateNode;F.memoizedState!==null?ke._visibility&2?qc(S,F,$,K,b):Vu(S,F):(ke._visibility|=2,qc(S,F,$,K,b)),b&&ce&2048&&Py(F.alternate,F);break;case 24:qc(S,F,$,K,b),b&&ce&2048&&Iy(F.alternate,F);break;default:qc(S,F,$,K,b)}c=c.sibling}}function Vu(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=o,g=c,b=g.flags;switch(g.tag){case 22:Vu(m,g),b&2048&&Py(g.alternate,g);break;case 24:Vu(m,g),b&2048&&Iy(g.alternate,g);break;default:Vu(m,g)}c=c.sibling}}var Fu=8192;function Hc(o){if(o.subtreeFlags&Fu)for(o=o.child;o!==null;)v2(o),o=o.sibling}function v2(o){switch(o.tag){case 26:Hc(o),o.flags&Fu&&o.memoizedState!==null&&iM(la,o.memoizedState,o.memoizedProps);break;case 5:Hc(o);break;case 3:case 4:var c=la;la=og(o.stateNode.containerInfo),Hc(o),la=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Fu,Fu=16777216,Hc(o),Fu=c):Hc(o));break;default:Hc(o)}}function w2(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function zu(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var g=c[m];Nr=g,j2(g,o)}w2(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)N2(o),o=o.sibling}function N2(o){switch(o.tag){case 0:case 11:case 15:zu(o),o.flags&2048&&eo(9,o,o.return);break;case 3:zu(o);break;case 12:zu(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,Kf(o)):zu(o);break;default:zu(o)}}function Kf(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var g=c[m];Nr=g,j2(g,o)}w2(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:eo(8,c,c.return),Kf(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,Kf(c));break;default:Kf(c)}o=o.sibling}}function j2(o,c){for(;Nr!==null;){var m=Nr;switch(m.tag){case 0:case 11:case 15:eo(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var g=m.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:ju(m.memoizedState.cache)}if(g=m.child,g!==null)g.return=m,Nr=g;else e:for(m=o;Nr!==null;){g=Nr;var b=g.sibling,S=g.return;if(f2(g),g===m){Nr=null;break e}if(b!==null){b.return=S,Nr=b;break e}Nr=S}}}var N5={getCacheForType:function(o){var c=$r(dr),m=c.data.get(o);return m===void 0&&(m=o(),c.data.set(o,m)),m}},j5=typeof WeakMap=="function"?WeakMap:Map,fs=0,Ss=null,qt=null,Jt=0,gs=0,Pn=null,ro=!1,Gc=!1,Dy=!1,wi=0,Fs=0,no=0,jl=0,My=0,Xn=0,Wc=0,Bu=null,gn=null,Oy=!1,Ly=0,Xf=1/0,Qf=null,ao=null,Ir=0,io=null,Yc=null,Kc=0,Uy=0,Vy=null,_2=null,$u=0,Fy=null;function In(){if((fs&2)!==0&&Jt!==0)return Jt&-Jt;if(H.T!==null){var o=Oc;return o!==0?o:Wy()}return xr()}function S2(){Xn===0&&(Xn=(Jt&536870912)===0||ls?Er():536870912);var o=Kn.current;return o!==null&&(o.flags|=32),Xn}function Dn(o,c,m){(o===Ss&&(gs===2||gs===9)||o.cancelPendingCommit!==null)&&(Xc(o,0),oo(o,Jt,Xn,!1)),ns(o,m),((fs&2)===0||o!==Ss)&&(o===Ss&&((fs&2)===0&&(jl|=m),Fs===4&&oo(o,Jt,Xn,!1)),Ia(o))}function k2(o,c,m){if((fs&6)!==0)throw Error(r(327));var g=!m&&(c&124)===0&&(c&o.expiredLanes)===0||Kt(o,c),b=g?k5(o,c):$y(o,c,!0),S=g;do{if(b===0){Gc&&!g&&oo(o,c,0,!1);break}else{if(m=o.current.alternate,S&&!_5(m)){b=$y(o,c,!1),S=!1;continue}if(b===2){if(S=c,o.errorRecoveryDisabledLanes&S)var F=0;else F=o.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){c=F;e:{var $=o;b=Bu;var K=$.current.memoizedState.isDehydrated;if(K&&(Xc($,F).flags|=256),F=$y($,F,!1),F!==2){if(Dy&&!K){$.errorRecoveryDisabledLanes|=S,jl|=S,b=4;break e}S=gn,gn=b,S!==null&&(gn===null?gn=S:gn.push.apply(gn,S))}b=F}if(S=!1,b!==2)continue}}if(b===1){Xc(o,0),oo(o,c,0,!0);break}e:{switch(g=o,S=b,S){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:oo(g,c,Xn,!ro);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(b=Ly+300-Xe(),10<b)){if(oo(g,c,Xn,!ro),Nt(g,0,!0)!==0)break e;g.timeoutHandle=tS(E2.bind(null,g,m,gn,Qf,Oy,c,Xn,jl,Wc,ro,S,2,-0,0),b);break e}E2(g,m,gn,Qf,Oy,c,Xn,jl,Wc,ro,S,0,-0,0)}}break}while(!0);Ia(o)}function E2(o,c,m,g,b,S,F,$,K,ce,ke,De,he,fe){if(o.timeoutHandle=-1,De=c.subtreeFlags,(De&8192||(De&16785408)===16785408)&&(Xu={stylesheets:null,count:0,unsuspend:aM},v2(c),De=oM(),De!==null)){o.cancelPendingCommit=De(D2.bind(null,o,c,S,m,g,b,F,$,K,ke,1,he,fe)),oo(o,S,F,!ce);return}D2(o,c,S,m,g,b,F,$,K)}function _5(o){for(var c=o;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var g=0;g<m.length;g++){var b=m[g],S=b.getSnapshot;b=b.value;try{if(!Tn(S(),b))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function oo(o,c,m,g){c&=~My,c&=~jl,o.suspendedLanes|=c,o.pingedLanes&=~c,g&&(o.warmLanes|=c),g=o.expirationTimes;for(var b=c;0<b;){var S=31-ut(b),F=1<<S;g[S]=-1,b&=~F}m!==0&&as(o,m,c)}function Jf(){return(fs&6)===0?(qu(0),!1):!0}function zy(){if(qt!==null){if(gs===0)var o=qt.return;else o=qt,mi=xl=null,ny(o),Bc=null,Du=0,o=qt;for(;o!==null;)i2(o.alternate,o),o=o.return;qt=null}}function Xc(o,c){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,B5(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),zy(),Ss=o,qt=m=di(o.current,null),Jt=c,gs=0,Pn=null,ro=!1,Gc=Kt(o,c),Dy=!1,Wc=Xn=My=jl=no=Fs=0,gn=Bu=null,Oy=!1,(c&8)!==0&&(c|=c&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=c;0<g;){var b=31-ut(g),S=1<<b;c|=o[b],g&=~S}return wi=c,vf(),m}function T2(o,c){Vt=null,H.H=Vf,c===Su||c===Cf?(c=H1(),gs=3):c===B1?(c=H1(),gs=4):gs=c===G_?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Pn=c,qt===null&&(Fs=1,qf(o,Hn(c,o.current)))}function C2(){var o=H.H;return H.H=Vf,o===null?Vf:o}function A2(){var o=H.A;return H.A=N5,o}function By(){Fs=4,ro||(Jt&4194048)!==Jt&&Kn.current!==null||(Gc=!0),(no&134217727)===0&&(jl&134217727)===0||Ss===null||oo(Ss,Jt,Xn,!1)}function $y(o,c,m){var g=fs;fs|=2;var b=C2(),S=A2();(Ss!==o||Jt!==c)&&(Qf=null,Xc(o,c)),c=!1;var F=Fs;e:do try{if(gs!==0&&qt!==null){var $=qt,K=Pn;switch(gs){case 8:zy(),F=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(c=!0);var ce=gs;if(gs=0,Pn=null,Qc(o,$,K,ce),m&&Gc){F=0;break e}break;default:ce=gs,gs=0,Pn=null,Qc(o,$,K,ce)}}S5(),F=Fs;break}catch(ke){T2(o,ke)}while(!0);return c&&o.shellSuspendCounter++,mi=xl=null,fs=g,H.H=b,H.A=S,qt===null&&(Ss=null,Jt=0,vf()),F}function S5(){for(;qt!==null;)R2(qt)}function k5(o,c){var m=fs;fs|=2;var g=C2(),b=A2();Ss!==o||Jt!==c?(Qf=null,Xf=Xe()+500,Xc(o,c)):Gc=Kt(o,c);e:do try{if(gs!==0&&qt!==null){c=qt;var S=Pn;t:switch(gs){case 1:gs=0,Pn=null,Qc(o,c,S,1);break;case 2:case 9:if($1(S)){gs=0,Pn=null,P2(c);break}c=function(){gs!==2&&gs!==9||Ss!==o||(gs=7),Ia(o)},S.then(c,c);break e;case 3:gs=7;break e;case 4:gs=5;break e;case 7:$1(S)?(gs=0,Pn=null,P2(c)):(gs=0,Pn=null,Qc(o,c,S,7));break;case 5:var F=null;switch(qt.tag){case 26:F=qt.memoizedState;case 5:case 27:var $=qt;if(!F||mS(F)){gs=0,Pn=null;var K=$.sibling;if(K!==null)qt=K;else{var ce=$.return;ce!==null?(qt=ce,Zf(ce)):qt=null}break t}}gs=0,Pn=null,Qc(o,c,S,5);break;case 6:gs=0,Pn=null,Qc(o,c,S,6);break;case 8:zy(),Fs=6;break e;default:throw Error(r(462))}}E5();break}catch(ke){T2(o,ke)}while(!0);return mi=xl=null,H.H=g,H.A=b,fs=m,qt!==null?0:(Ss=null,Jt=0,vf(),Fs)}function E5(){for(;qt!==null&&!qe();)R2(qt)}function R2(o){var c=n2(o.alternate,o,wi);o.memoizedProps=o.pendingProps,c===null?Zf(o):qt=c}function P2(o){var c=o,m=c.alternate;switch(c.tag){case 15:case 0:c=J_(m,c,c.pendingProps,c.type,void 0,Jt);break;case 11:c=J_(m,c,c.pendingProps,c.type.render,c.ref,Jt);break;case 5:ny(c);default:i2(m,c),c=qt=I1(c,wi),c=n2(m,c,wi)}o.memoizedProps=o.pendingProps,c===null?Zf(o):qt=c}function Qc(o,c,m,g){mi=xl=null,ny(c),Bc=null,Du=0;var b=c.return;try{if(p5(o,b,c,m,Jt)){Fs=1,qf(o,Hn(m,o.current)),qt=null;return}}catch(S){if(b!==null)throw qt=b,S;Fs=1,qf(o,Hn(m,o.current)),qt=null;return}c.flags&32768?(ls||g===1?o=!0:Gc||(Jt&536870912)!==0?o=!1:(ro=o=!0,(g===2||g===9||g===3||g===6)&&(g=Kn.current,g!==null&&g.tag===13&&(g.flags|=16384))),I2(c,o)):Zf(c)}function Zf(o){var c=o;do{if((c.flags&32768)!==0){I2(c,ro);return}o=c.return;var m=y5(c.alternate,c,wi);if(m!==null){qt=m;return}if(c=c.sibling,c!==null){qt=c;return}qt=c=o}while(c!==null);Fs===0&&(Fs=5)}function I2(o,c){do{var m=b5(o.alternate,o);if(m!==null){m.flags&=32767,qt=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(o=o.sibling,o!==null)){qt=o;return}qt=o=m}while(o!==null);Fs=6,qt=null}function D2(o,c,m,g,b,S,F,$,K){o.cancelPendingCommit=null;do eg();while(Ir!==0);if((fs&6)!==0)throw Error(r(327));if(c!==null){if(c===o.current)throw Error(r(177));if(S=c.lanes|c.childLanes,S|=Ix,Zr(o,m,S,F,$,K),o===Ss&&(qt=Ss=null,Jt=0),Yc=c,io=o,Kc=m,Uy=S,Vy=b,_2=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,R5(It,function(){return V2(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,b=W.p,W.p=2,F=fs,fs|=4;try{v5(o,c,m)}finally{fs=F,W.p=b,H.T=g}}Ir=1,M2(),O2(),L2()}}function M2(){if(Ir===1){Ir=0;var o=io,c=Yc,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=H.T,H.T=null;var g=W.p;W.p=2;var b=fs;fs|=4;try{x2(c,o);var S=tb,F=j1(o.containerInfo),$=S.focusedElem,K=S.selectionRange;if(F!==$&&$&&$.ownerDocument&&N1($.ownerDocument.documentElement,$)){if(K!==null&&Tx($)){var ce=K.start,ke=K.end;if(ke===void 0&&(ke=ce),"selectionStart"in $)$.selectionStart=ce,$.selectionEnd=Math.min(ke,$.value.length);else{var De=$.ownerDocument||document,he=De&&De.defaultView||window;if(he.getSelection){var fe=he.getSelection(),Ct=$.textContent.length,jt=Math.min(K.start,Ct),vs=K.end===void 0?jt:Math.min(K.end,Ct);!fe.extend&&jt>vs&&(F=vs,vs=jt,jt=F);var ie=w1($,jt),se=w1($,vs);if(ie&&se&&(fe.rangeCount!==1||fe.anchorNode!==ie.node||fe.anchorOffset!==ie.offset||fe.focusNode!==se.node||fe.focusOffset!==se.offset)){var le=De.createRange();le.setStart(ie.node,ie.offset),fe.removeAllRanges(),jt>vs?(fe.addRange(le),fe.extend(se.node,se.offset)):(le.setEnd(se.node,se.offset),fe.addRange(le))}}}}for(De=[],fe=$;fe=fe.parentNode;)fe.nodeType===1&&De.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<De.length;$++){var Re=De[$];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}hg=!!eb,tb=eb=null}finally{fs=b,W.p=g,H.T=m}}o.current=c,Ir=2}}function O2(){if(Ir===2){Ir=0;var o=io,c=Yc,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=H.T,H.T=null;var g=W.p;W.p=2;var b=fs;fs|=4;try{m2(o,c.alternate,c)}finally{fs=b,W.p=g,H.T=m}}Ir=3}}function L2(){if(Ir===4||Ir===3){Ir=0,Ve();var o=io,c=Yc,m=Kc,g=_2;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Ir=5:(Ir=0,Yc=io=null,U2(o,o.pendingLanes));var b=o.pendingLanes;if(b===0&&(ao=null),zr(m),c=c.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Je,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=H.T,b=W.p,W.p=2,H.T=null;try{for(var S=o.onRecoverableError,F=0;F<g.length;F++){var $=g[F];S($.value,{componentStack:$.stack})}}finally{H.T=c,W.p=b}}(Kc&3)!==0&&eg(),Ia(o),b=o.pendingLanes,(m&4194090)!==0&&(b&42)!==0?o===Fy?$u++:($u=0,Fy=o):$u=0,qu(0)}}function U2(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,ju(c)))}function eg(o){return M2(),O2(),L2(),V2()}function V2(){if(Ir!==5)return!1;var o=io,c=Uy;Uy=0;var m=zr(Kc),g=H.T,b=W.p;try{W.p=32>m?32:m,H.T=null,m=Vy,Vy=null;var S=io,F=Kc;if(Ir=0,Yc=io=null,Kc=0,(fs&6)!==0)throw Error(r(331));var $=fs;if(fs|=4,N2(S.current),b2(S,S.current,F,m),fs=$,qu(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Je,S)}catch{}return!0}finally{W.p=b,H.T=g,U2(o,c)}}function F2(o,c,m){c=Hn(m,c),c=yy(o.stateNode,c,2),o=Xi(o,c,2),o!==null&&(ns(o,2),Ia(o))}function js(o,c,m){if(o.tag===3)F2(o,o,m);else for(;c!==null;){if(c.tag===3){F2(c,o,m);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ao===null||!ao.has(g))){o=Hn(m,o),m=q_(2),g=Xi(c,m,2),g!==null&&(H_(m,g,c,o),ns(g,2),Ia(g));break}}c=c.return}}function qy(o,c,m){var g=o.pingCache;if(g===null){g=o.pingCache=new j5;var b=new Set;g.set(c,b)}else b=g.get(c),b===void 0&&(b=new Set,g.set(c,b));b.has(m)||(Dy=!0,b.add(m),o=T5.bind(null,o,c,m),c.then(o,o))}function T5(o,c,m){var g=o.pingCache;g!==null&&g.delete(c),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,Ss===o&&(Jt&m)===m&&(Fs===4||Fs===3&&(Jt&62914560)===Jt&&300>Xe()-Ly?(fs&2)===0&&Xc(o,0):My|=m,Wc===Jt&&(Wc=0)),Ia(o)}function z2(o,c){c===0&&(c=Rs()),o=Pc(o,c),o!==null&&(ns(o,c),Ia(o))}function C5(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),z2(o,m)}function A5(o,c){var m=0;switch(o.tag){case 13:var g=o.stateNode,b=o.memoizedState;b!==null&&(m=b.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(c),z2(o,m)}function R5(o,c){return Oe(o,c)}var tg=null,Jc=null,Hy=!1,sg=!1,Gy=!1,_l=0;function Ia(o){o!==Jc&&o.next===null&&(Jc===null?tg=Jc=o:Jc=Jc.next=o),sg=!0,Hy||(Hy=!0,I5())}function qu(o,c){if(!Gy&&sg){Gy=!0;do for(var m=!1,g=tg;g!==null;){if(o!==0){var b=g.pendingLanes;if(b===0)var S=0;else{var F=g.suspendedLanes,$=g.pingedLanes;S=(1<<31-ut(42|o)+1)-1,S&=b&~(F&~$),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(m=!0,H2(g,S))}else S=Jt,S=Nt(g,g===Ss?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||Kt(g,S)||(m=!0,H2(g,S));g=g.next}while(m);Gy=!1}}function P5(){B2()}function B2(){sg=Hy=!1;var o=0;_l!==0&&(z5()&&(o=_l),_l=0);for(var c=Xe(),m=null,g=tg;g!==null;){var b=g.next,S=$2(g,c);S===0?(g.next=null,m===null?tg=b:m.next=b,b===null&&(Jc=m)):(m=g,(o!==0||(S&3)!==0)&&(sg=!0)),g=b}qu(o)}function $2(o,c){for(var m=o.suspendedLanes,g=o.pingedLanes,b=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var F=31-ut(S),$=1<<F,K=b[F];K===-1?(($&m)===0||($&g)!==0)&&(b[F]=Qs($,c)):K<=c&&(o.expiredLanes|=$),S&=~$}if(c=Ss,m=Jt,m=Nt(o,o===c?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,m===0||o===c&&(gs===2||gs===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&Ae(g),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||Kt(o,m)){if(c=m&-m,c===o.callbackPriority)return c;switch(g!==null&&Ae(g),zr(m)){case 2:case 8:m=nt;break;case 32:m=It;break;case 268435456:m=xt;break;default:m=It}return g=q2.bind(null,o),m=Oe(m,g),o.callbackPriority=c,o.callbackNode=m,c}return g!==null&&g!==null&&Ae(g),o.callbackPriority=2,o.callbackNode=null,2}function q2(o,c){if(Ir!==0&&Ir!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(eg()&&o.callbackNode!==m)return null;var g=Jt;return g=Nt(o,o===Ss?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(k2(o,g,c),$2(o,Xe()),o.callbackNode!=null&&o.callbackNode===m?q2.bind(null,o):null)}function H2(o,c){if(eg())return null;k2(o,c,!0)}function I5(){$5(function(){(fs&6)!==0?Oe(Qe,P5):B2()})}function Wy(){return _l===0&&(_l=Er()),_l}function G2(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:vc(""+o)}function W2(o,c){var m=c.ownerDocument.createElement("input");return m.name=c.name,m.value=c.value,o.id&&m.setAttribute("form",o.id),c.parentNode.insertBefore(m,c),o=new FormData(o),m.parentNode.removeChild(m),o}function D5(o,c,m,g,b){if(c==="submit"&&m&&m.stateNode===b){var S=G2((b[Ee]||null).action),F=g.submitter;F&&(c=(c=F[Ee]||null)?G2(c.formAction):F.getAttribute("formAction"),c!==null&&(S=c,F=null));var $=new wc("action","action",null,g,b);o.push({event:$,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(_l!==0){var K=F?W2(b,F):new FormData(b);my(m,{pending:!0,data:K,method:b.method,action:S},null,K)}}else typeof S=="function"&&($.preventDefault(),K=F?W2(b,F):new FormData(b),my(m,{pending:!0,data:K,method:b.method,action:S},S,K))},currentTarget:b}]})}}for(var Yy=0;Yy<Px.length;Yy++){var Ky=Px[Yy],M5=Ky.toLowerCase(),O5=Ky[0].toUpperCase()+Ky.slice(1);oa(M5,"on"+O5)}oa(k1,"onAnimationEnd"),oa(E1,"onAnimationIteration"),oa(T1,"onAnimationStart"),oa("dblclick","onDoubleClick"),oa("focusin","onFocus"),oa("focusout","onBlur"),oa(ZD,"onTransitionRun"),oa(e5,"onTransitionStart"),oa(t5,"onTransitionCancel"),oa(C1,"onTransitionEnd"),Fn("onMouseEnter",["mouseout","mouseover"]),Fn("onMouseLeave",["mouseout","mouseover"]),Fn("onPointerEnter",["pointerout","pointerover"]),Fn("onPointerLeave",["pointerout","pointerover"]),kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hu));function Y2(o,c){c=(c&4)!==0;for(var m=0;m<o.length;m++){var g=o[m],b=g.event;g=g.listeners;e:{var S=void 0;if(c)for(var F=g.length-1;0<=F;F--){var $=g[F],K=$.instance,ce=$.currentTarget;if($=$.listener,K!==S&&b.isPropagationStopped())break e;S=$,b.currentTarget=ce;try{S(b)}catch(ke){$f(ke)}b.currentTarget=null,S=K}else for(F=0;F<g.length;F++){if($=g[F],K=$.instance,ce=$.currentTarget,$=$.listener,K!==S&&b.isPropagationStopped())break e;S=$,b.currentTarget=ce;try{S(b)}catch(ke){$f(ke)}b.currentTarget=null,S=K}}}}function Ht(o,c){var m=c[tt];m===void 0&&(m=c[tt]=new Set);var g=o+"__bubble";m.has(g)||(K2(c,o,2,!1),m.add(g))}function Xy(o,c,m){var g=0;c&&(g|=4),K2(m,o,g,c)}var rg="_reactListening"+Math.random().toString(36).slice(2);function Qy(o){if(!o[rg]){o[rg]=!0,$i.forEach(function(m){m!=="selectionchange"&&(L5.has(m)||Xy(m,!1,o),Xy(m,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[rg]||(c[rg]=!0,Xy("selectionchange",!1,c))}}function K2(o,c,m,g){switch(bS(c)){case 2:var b=dM;break;case 8:b=uM;break;default:b=ub}m=b.bind(null,c,m,o),b=void 0,!$n||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),g?b!==void 0?o.addEventListener(c,m,{capture:!0,passive:b}):o.addEventListener(c,m,!0):b!==void 0?o.addEventListener(c,m,{passive:b}):o.addEventListener(c,m,!1)}function Jy(o,c,m,g,b){var S=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var F=g.tag;if(F===3||F===4){var $=g.stateNode.containerInfo;if($===b)break;if(F===4)for(F=g.return;F!==null;){var K=F.tag;if((K===3||K===4)&&F.stateNode.containerInfo===b)return;F=F.return}for(;$!==null;){if(F=Js($),F===null)return;if(K=F.tag,K===5||K===6||K===26||K===27){g=S=F;continue e}$=$.parentNode}}g=g.return}nf(function(){var ce=S,ke=Bn(m),De=[];e:{var he=A1.get(o);if(he!==void 0){var fe=wc,Ct=o;switch(o){case"keypress":if(_a(m)===0)break e;case"keydown":case"keyup":fe=Ec;break;case"focusin":Ct="focus",fe=_c;break;case"focusout":Ct="blur",fe=_c;break;case"beforeblur":case"afterblur":fe=_c;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=_x;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=mf;break;case k1:case E1:case T1:fe=Sc;break;case C1:fe=gf;break;case"scroll":case"scrollend":fe=af;break;case"wheel":fe=Tc;break;case"copy":case"cut":case"paste":fe=kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=gu;break;case"toggle":case"beforetoggle":fe=xf}var jt=(c&4)!==0,vs=!jt&&(o==="scroll"||o==="scrollend"),ie=jt?he!==null?he+"Capture":null:he;jt=[];for(var se=ce,le;se!==null;){var Re=se;if(le=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||le===null||ie===null||(Re=rl(se,ie),Re!=null&&jt.push(Gu(se,Re,le))),vs)break;se=se.return}0<jt.length&&(he=new fe(he,Ct,null,m,ke),De.push({event:he,listeners:jt}))}}if((c&7)===0){e:{if(he=o==="mouseover"||o==="pointerover",fe=o==="mouseout"||o==="pointerout",he&&m!==ni&&(Ct=m.relatedTarget||m.fromElement)&&(Js(Ct)||Ct[Ke]))break e;if((fe||he)&&(he=ke.window===ke?ke:(he=ke.ownerDocument)?he.defaultView||he.parentWindow:window,fe?(Ct=m.relatedTarget||m.toElement,fe=ce,Ct=Ct?Js(Ct):null,Ct!==null&&(vs=i(Ct),jt=Ct.tag,Ct!==vs||jt!==5&&jt!==27&&jt!==6)&&(Ct=null)):(fe=null,Ct=ce),fe!==Ct)){if(jt=qn,Re="onMouseLeave",ie="onMouseEnter",se="mouse",(o==="pointerout"||o==="pointerover")&&(jt=gu,Re="onPointerLeave",ie="onPointerEnter",se="pointer"),vs=fe==null?he:Tr(fe),le=Ct==null?he:Tr(Ct),he=new jt(Re,se+"leave",fe,m,ke),he.target=vs,he.relatedTarget=le,Re=null,Js(ke)===ce&&(jt=new jt(ie,se+"enter",Ct,m,ke),jt.target=le,jt.relatedTarget=vs,Re=jt),vs=Re,fe&&Ct)t:{for(jt=fe,ie=Ct,se=0,le=jt;le;le=Zc(le))se++;for(le=0,Re=ie;Re;Re=Zc(Re))le++;for(;0<se-le;)jt=Zc(jt),se--;for(;0<le-se;)ie=Zc(ie),le--;for(;se--;){if(jt===ie||ie!==null&&jt===ie.alternate)break t;jt=Zc(jt),ie=Zc(ie)}jt=null}else jt=null;fe!==null&&X2(De,he,fe,jt,!1),Ct!==null&&vs!==null&&X2(De,vs,Ct,jt,!0)}}e:{if(he=ce?Tr(ce):window,fe=he.nodeName&&he.nodeName.toLowerCase(),fe==="select"||fe==="input"&&he.type==="file")var at=g1;else if(cr(he))if(p1)at=XD;else{at=YD;var Bt=WD}else fe=he.nodeName,!fe||fe.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ce&&lu(ce.elementType)&&(at=g1):at=KD;if(at&&(at=at(o,ce))){ci(De,at,m,ke);break e}Bt&&Bt(o,he,ce),o==="focusout"&&ce&&he.type==="number"&&ce.memoizedProps.value!=null&&Hi(he,"number",he.value)}switch(Bt=ce?Tr(ce):window,o){case"focusin":(cr(Bt)||Bt.contentEditable==="true")&&(Cc=Bt,Cx=ce,yu=null);break;case"focusout":yu=Cx=Cc=null;break;case"mousedown":Ax=!0;break;case"contextmenu":case"mouseup":case"dragend":Ax=!1,_1(De,m,ke);break;case"selectionchange":if(JD)break;case"keydown":case"keyup":_1(De,m,ke)}var gt;if(Ea)e:{switch(o){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else Xt?pe(o,m)&&(_t="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(_t="onCompositionStart");_t&&(L&&m.locale!=="ko"&&(Xt||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Xt&&(gt=du()):(ja=ke,Gi="value"in ja?ja.value:ja.textContent,Xt=!0)),Bt=ng(ce,_t),0<Bt.length&&(_t=new mu(_t,o,null,m,ke),De.push({event:_t,listeners:Bt}),gt?_t.data=gt:(gt=$e(m),gt!==null&&(_t.data=gt)))),(gt=A?lr(o,m):Qt(o,m))&&(_t=ng(ce,"onBeforeInput"),0<_t.length&&(Bt=new mu("onBeforeInput","beforeinput",null,m,ke),De.push({event:Bt,listeners:_t}),Bt.data=gt)),D5(De,o,ce,m,ke)}Y2(De,c)})}function Gu(o,c,m){return{instance:o,listener:c,currentTarget:m}}function ng(o,c){for(var m=c+"Capture",g=[];o!==null;){var b=o,S=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||S===null||(b=rl(o,m),b!=null&&g.unshift(Gu(o,b,S)),b=rl(o,c),b!=null&&g.push(Gu(o,b,S))),o.tag===3)return g;o=o.return}return[]}function Zc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function X2(o,c,m,g,b){for(var S=c._reactName,F=[];m!==null&&m!==g;){var $=m,K=$.alternate,ce=$.stateNode;if($=$.tag,K!==null&&K===g)break;$!==5&&$!==26&&$!==27||ce===null||(K=ce,b?(ce=rl(m,S),ce!=null&&F.unshift(Gu(m,ce,K))):b||(ce=rl(m,S),ce!=null&&F.push(Gu(m,ce,K)))),m=m.return}F.length!==0&&o.push({event:c,listeners:F})}var U5=/\r\n?/g,V5=/\u0000|\uFFFD/g;function Q2(o){return(typeof o=="string"?o:""+o).replace(U5,`
`).replace(V5,"")}function J2(o,c){return c=Q2(c),Q2(o)===c}function ag(){}function bs(o,c,m,g,b,S){switch(m){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||zn(o,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&zn(o,""+g);break;case"className":Ie(o,"class",g);break;case"tabIndex":Ie(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Ie(o,m,g);break;case"style":ou(o,g,S);break;case"data":if(c!=="object"){Ie(o,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||m!=="href")){o.removeAttribute(m);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(m);break}g=vc(""+g),o.setAttribute(m,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(m==="formAction"?(c!=="input"&&bs(o,c,"name",b.name,b,null),bs(o,c,"formEncType",b.formEncType,b,null),bs(o,c,"formMethod",b.formMethod,b,null),bs(o,c,"formTarget",b.formTarget,b,null)):(bs(o,c,"encType",b.encType,b,null),bs(o,c,"method",b.method,b,null),bs(o,c,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(m);break}g=vc(""+g),o.setAttribute(m,g);break;case"onClick":g!=null&&(o.onclick=ag);break;case"onScroll":g!=null&&Ht("scroll",o);break;case"onScrollEnd":g!=null&&Ht("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=m}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}m=vc(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(m,""+g):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":g===!0?o.setAttribute(m,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(m,g):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(m,g):o.removeAttribute(m);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(m):o.setAttribute(m,g);break;case"popover":Ht("beforetoggle",o),Ht("toggle",o),ne(o,"popover",g);break;case"xlinkActuate":Le(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Le(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Le(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Le(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Le(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Le(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Le(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Le(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Le(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ne(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Nx.get(m)||m,ne(o,m,g))}}function Zy(o,c,m,g,b,S){switch(m){case"style":ou(o,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=m}}break;case"children":typeof g=="string"?zn(o,g):(typeof g=="number"||typeof g=="bigint")&&zn(o,""+g);break;case"onScroll":g!=null&&Ht("scroll",o);break;case"onScrollEnd":g!=null&&Ht("scrollend",o);break;case"onClick":g!=null&&(o.onclick=ag);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qi.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(b=m.endsWith("Capture"),c=m.slice(2,b?m.length-7:void 0),S=o[Ee]||null,S=S!=null?S[m]:null,typeof S=="function"&&o.removeEventListener(c,S,b),typeof g=="function")){typeof S!="function"&&S!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(c,g,b);break e}m in o?o[m]=g:g===!0?o.setAttribute(m,""):ne(o,m,g)}}}function Dr(o,c,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",o),Ht("load",o);var g=!1,b=!1,S;for(S in m)if(m.hasOwnProperty(S)){var F=m[S];if(F!=null)switch(S){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:bs(o,c,S,F,m,null)}}b&&bs(o,c,"srcSet",m.srcSet,m,null),g&&bs(o,c,"src",m.src,m,null);return;case"input":Ht("invalid",o);var $=S=F=b=null,K=null,ce=null;for(g in m)if(m.hasOwnProperty(g)){var ke=m[g];if(ke!=null)switch(g){case"name":b=ke;break;case"type":F=ke;break;case"checked":K=ke;break;case"defaultChecked":ce=ke;break;case"value":S=ke;break;case"defaultValue":$=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,c));break;default:bs(o,c,g,ke,m,null)}}el(o,S,$,K,ce,F,b,!1),bc(o);return;case"select":Ht("invalid",o),g=F=S=null;for(b in m)if(m.hasOwnProperty(b)&&($=m[b],$!=null))switch(b){case"value":S=$;break;case"defaultValue":F=$;break;case"multiple":g=$;default:bs(o,c,b,$,m,null)}c=S,m=F,o.multiple=!!g,c!=null?ri(o,!!g,c,!1):m!=null&&ri(o,!!g,m,!0);return;case"textarea":Ht("invalid",o),S=b=g=null;for(F in m)if(m.hasOwnProperty(F)&&($=m[F],$!=null))switch(F){case"value":g=$;break;case"defaultValue":b=$;break;case"children":S=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(r(91));break;default:bs(o,c,F,$,m,null)}tl(o,g,b,S),bc(o);return;case"option":for(K in m)if(m.hasOwnProperty(K)&&(g=m[K],g!=null))switch(K){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:bs(o,c,K,g,m,null)}return;case"dialog":Ht("beforetoggle",o),Ht("toggle",o),Ht("cancel",o),Ht("close",o);break;case"iframe":case"object":Ht("load",o);break;case"video":case"audio":for(g=0;g<Hu.length;g++)Ht(Hu[g],o);break;case"image":Ht("error",o),Ht("load",o);break;case"details":Ht("toggle",o);break;case"embed":case"source":case"link":Ht("error",o),Ht("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in m)if(m.hasOwnProperty(ce)&&(g=m[ce],g!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:bs(o,c,ce,g,m,null)}return;default:if(lu(c)){for(ke in m)m.hasOwnProperty(ke)&&(g=m[ke],g!==void 0&&Zy(o,c,ke,g,m,void 0));return}}for($ in m)m.hasOwnProperty($)&&(g=m[$],g!=null&&bs(o,c,$,g,m,null))}function F5(o,c,m,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,S=null,F=null,$=null,K=null,ce=null,ke=null;for(fe in m){var De=m[fe];if(m.hasOwnProperty(fe)&&De!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":K=De;default:g.hasOwnProperty(fe)||bs(o,c,fe,null,g,De)}}for(var he in g){var fe=g[he];if(De=m[he],g.hasOwnProperty(he)&&(fe!=null||De!=null))switch(he){case"type":S=fe;break;case"name":b=fe;break;case"checked":ce=fe;break;case"defaultChecked":ke=fe;break;case"value":F=fe;break;case"defaultValue":$=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,c));break;default:fe!==De&&bs(o,c,he,fe,g,De)}}En(o,F,$,K,ce,ke,S,b);return;case"select":fe=F=$=he=null;for(S in m)if(K=m[S],m.hasOwnProperty(S)&&K!=null)switch(S){case"value":break;case"multiple":fe=K;default:g.hasOwnProperty(S)||bs(o,c,S,null,g,K)}for(b in g)if(S=g[b],K=m[b],g.hasOwnProperty(b)&&(S!=null||K!=null))switch(b){case"value":he=S;break;case"defaultValue":$=S;break;case"multiple":F=S;default:S!==K&&bs(o,c,b,S,g,K)}c=$,m=F,g=fe,he!=null?ri(o,!!m,he,!1):!!g!=!!m&&(c!=null?ri(o,!!m,c,!0):ri(o,!!m,m?[]:"",!1));return;case"textarea":fe=he=null;for($ in m)if(b=m[$],m.hasOwnProperty($)&&b!=null&&!g.hasOwnProperty($))switch($){case"value":break;case"children":break;default:bs(o,c,$,null,g,b)}for(F in g)if(b=g[F],S=m[F],g.hasOwnProperty(F)&&(b!=null||S!=null))switch(F){case"value":he=b;break;case"defaultValue":fe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==S&&bs(o,c,F,b,g,S)}xs(o,he,fe);return;case"option":for(var Ct in m)if(he=m[Ct],m.hasOwnProperty(Ct)&&he!=null&&!g.hasOwnProperty(Ct))switch(Ct){case"selected":o.selected=!1;break;default:bs(o,c,Ct,null,g,he)}for(K in g)if(he=g[K],fe=m[K],g.hasOwnProperty(K)&&he!==fe&&(he!=null||fe!=null))switch(K){case"selected":o.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:bs(o,c,K,he,g,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in m)he=m[jt],m.hasOwnProperty(jt)&&he!=null&&!g.hasOwnProperty(jt)&&bs(o,c,jt,null,g,he);for(ce in g)if(he=g[ce],fe=m[ce],g.hasOwnProperty(ce)&&he!==fe&&(he!=null||fe!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,c));break;default:bs(o,c,ce,he,g,fe)}return;default:if(lu(c)){for(var vs in m)he=m[vs],m.hasOwnProperty(vs)&&he!==void 0&&!g.hasOwnProperty(vs)&&Zy(o,c,vs,void 0,g,he);for(ke in g)he=g[ke],fe=m[ke],!g.hasOwnProperty(ke)||he===fe||he===void 0&&fe===void 0||Zy(o,c,ke,he,g,fe);return}}for(var ie in m)he=m[ie],m.hasOwnProperty(ie)&&he!=null&&!g.hasOwnProperty(ie)&&bs(o,c,ie,null,g,he);for(De in g)he=g[De],fe=m[De],!g.hasOwnProperty(De)||he===fe||he==null&&fe==null||bs(o,c,De,he,g,fe)}var eb=null,tb=null;function ig(o){return o.nodeType===9?o:o.ownerDocument}function Z2(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eS(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function sb(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var rb=null;function z5(){var o=window.event;return o&&o.type==="popstate"?o===rb?!1:(rb=o,!0):(rb=null,!1)}var tS=typeof setTimeout=="function"?setTimeout:void 0,B5=typeof clearTimeout=="function"?clearTimeout:void 0,sS=typeof Promise=="function"?Promise:void 0,$5=typeof queueMicrotask=="function"?queueMicrotask:typeof sS<"u"?function(o){return sS.resolve(null).then(o).catch(q5)}:tS;function q5(o){setTimeout(function(){throw o})}function lo(o){return o==="head"}function rS(o,c){var m=c,g=0,b=0;do{var S=m.nextSibling;if(o.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"){if(0<g&&8>g){m=g;var F=o.ownerDocument;if(m&1&&Wu(F.documentElement),m&2&&Wu(F.body),m&4)for(m=F.head,Wu(m),F=m.firstChild;F;){var $=F.nextSibling,K=F.nodeName;F[Sn]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&F.rel.toLowerCase()==="stylesheet"||m.removeChild(F),F=$}}if(b===0){o.removeChild(S),th(c);return}b--}else m==="$"||m==="$?"||m==="$!"?b++:g=m.charCodeAt(0)-48;else g=0;m=S}while(m);th(c)}function nb(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var m=c;switch(c=c.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":nb(m),en(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function H5(o,c,m,g){for(;o.nodeType===1;){var b=m;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[Sn])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(S=o.getAttribute("rel"),S==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(S!==b.rel||o.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||o.getAttribute("title")!==(b.title==null?null:b.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(S=o.getAttribute("src"),(S!==(b.src==null?null:b.src)||o.getAttribute("type")!==(b.type==null?null:b.type)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&S&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var S=b.name==null?null:""+b.name;if(b.type==="hidden"&&o.getAttribute("name")===S)return o}else return o;if(o=ca(o.nextSibling),o===null)break}return null}function G5(o,c,m){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=ca(o.nextSibling),o===null))return null;return o}function ab(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function W5(o,c){var m=o.ownerDocument;if(o.data!=="$?"||m.readyState==="complete")c();else{var g=function(){c(),m.removeEventListener("DOMContentLoaded",g)};m.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function ca(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var ib=null;function nS(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return o;c--}else m==="/$"&&c++}o=o.previousSibling}return null}function aS(o,c,m){switch(c=ig(m),o){case"html":if(o=c.documentElement,!o)throw Error(r(452));return o;case"head":if(o=c.head,!o)throw Error(r(453));return o;case"body":if(o=c.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Wu(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);en(o)}var Qn=new Map,iS=new Set;function og(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ni=W.d;W.d={f:Y5,r:K5,D:X5,C:Q5,L:J5,m:Z5,X:tM,S:eM,M:sM};function Y5(){var o=Ni.f(),c=Jf();return o||c}function K5(o){var c=yr(o);c!==null&&c.tag===5&&c.type==="form"?k_(c):Ni.r(o)}var ed=typeof document>"u"?null:document;function oS(o,c,m){var g=ed;if(g&&typeof c=="string"&&c){var b=Zs(c);b='link[rel="'+o+'"][href="'+b+'"]',typeof m=="string"&&(b+='[crossorigin="'+m+'"]'),iS.has(b)||(iS.add(b),o={rel:o,crossOrigin:m,href:c},g.querySelector(b)===null&&(c=g.createElement("link"),Dr(c,"link",o),Is(c),g.head.appendChild(c)))}}function X5(o){Ni.D(o),oS("dns-prefetch",o,null)}function Q5(o,c){Ni.C(o,c),oS("preconnect",o,c)}function J5(o,c,m){Ni.L(o,c,m);var g=ed;if(g&&o&&c){var b='link[rel="preload"][as="'+Zs(c)+'"]';c==="image"&&m&&m.imageSrcSet?(b+='[imagesrcset="'+Zs(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(b+='[imagesizes="'+Zs(m.imageSizes)+'"]')):b+='[href="'+Zs(o)+'"]';var S=b;switch(c){case"style":S=td(o);break;case"script":S=sd(o)}Qn.has(S)||(o=f({rel:"preload",href:c==="image"&&m&&m.imageSrcSet?void 0:o,as:c},m),Qn.set(S,o),g.querySelector(b)!==null||c==="style"&&g.querySelector(Yu(S))||c==="script"&&g.querySelector(Ku(S))||(c=g.createElement("link"),Dr(c,"link",o),Is(c),g.head.appendChild(c)))}}function Z5(o,c){Ni.m(o,c);var m=ed;if(m&&o){var g=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+Zs(g)+'"][href="'+Zs(o)+'"]',S=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=sd(o)}if(!Qn.has(S)&&(o=f({rel:"modulepreload",href:o},c),Qn.set(S,o),m.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Ku(S)))return}g=m.createElement("link"),Dr(g,"link",o),Is(g),m.head.appendChild(g)}}}function eM(o,c,m){Ni.S(o,c,m);var g=ed;if(g&&o){var b=Cr(g).hoistableStyles,S=td(o);c=c||"default";var F=b.get(S);if(!F){var $={loading:0,preload:null};if(F=g.querySelector(Yu(S)))$.loading=5;else{o=f({rel:"stylesheet",href:o,"data-precedence":c},m),(m=Qn.get(S))&&ob(o,m);var K=F=g.createElement("link");Is(K),Dr(K,"link",o),K._p=new Promise(function(ce,ke){K.onload=ce,K.onerror=ke}),K.addEventListener("load",function(){$.loading|=1}),K.addEventListener("error",function(){$.loading|=2}),$.loading|=4,lg(F,c,g)}F={type:"stylesheet",instance:F,count:1,state:$},b.set(S,F)}}}function tM(o,c){Ni.X(o,c);var m=ed;if(m&&o){var g=Cr(m).hoistableScripts,b=sd(o),S=g.get(b);S||(S=m.querySelector(Ku(b)),S||(o=f({src:o,async:!0},c),(c=Qn.get(b))&&lb(o,c),S=m.createElement("script"),Is(S),Dr(S,"link",o),m.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(b,S))}}function sM(o,c){Ni.M(o,c);var m=ed;if(m&&o){var g=Cr(m).hoistableScripts,b=sd(o),S=g.get(b);S||(S=m.querySelector(Ku(b)),S||(o=f({src:o,async:!0,type:"module"},c),(c=Qn.get(b))&&lb(o,c),S=m.createElement("script"),Is(S),Dr(S,"link",o),m.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(b,S))}}function lS(o,c,m,g){var b=(b=me.current)?og(b):null;if(!b)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(c=td(m.href),m=Cr(b).hoistableStyles,g=m.get(c),g||(g={type:"style",instance:null,count:0,state:null},m.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=td(m.href);var S=Cr(b).hoistableStyles,F=S.get(o);if(F||(b=b.ownerDocument||b,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(o,F),(S=b.querySelector(Yu(o)))&&!S._p&&(F.instance=S,F.state.loading=5),Qn.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Qn.set(o,m),S||rM(b,o,m,F.state))),c&&g===null)throw Error(r(528,""));return F}if(c&&g!==null)throw Error(r(529,""));return null;case"script":return c=m.async,m=m.src,typeof m=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=sd(m),m=Cr(b).hoistableScripts,g=m.get(c),g||(g={type:"script",instance:null,count:0,state:null},m.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function td(o){return'href="'+Zs(o)+'"'}function Yu(o){return'link[rel="stylesheet"]['+o+"]"}function cS(o){return f({},o,{"data-precedence":o.precedence,precedence:null})}function rM(o,c,m,g){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=o.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),Dr(c,"link",m),Is(c),o.head.appendChild(c))}function sd(o){return'[src="'+Zs(o)+'"]'}function Ku(o){return"script[async]"+o}function dS(o,c,m){if(c.count++,c.instance===null)switch(c.type){case"style":var g=o.querySelector('style[data-href~="'+Zs(m.href)+'"]');if(g)return c.instance=g,Is(g),g;var b=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),Is(g),Dr(g,"style",b),lg(g,m.precedence,o),c.instance=g;case"stylesheet":b=td(m.href);var S=o.querySelector(Yu(b));if(S)return c.state.loading|=4,c.instance=S,Is(S),S;g=cS(m),(b=Qn.get(b))&&ob(g,b),S=(o.ownerDocument||o).createElement("link"),Is(S);var F=S;return F._p=new Promise(function($,K){F.onload=$,F.onerror=K}),Dr(S,"link",g),c.state.loading|=4,lg(S,m.precedence,o),c.instance=S;case"script":return S=sd(m.src),(b=o.querySelector(Ku(S)))?(c.instance=b,Is(b),b):(g=m,(b=Qn.get(S))&&(g=f({},m),lb(g,b)),o=o.ownerDocument||o,b=o.createElement("script"),Is(b),Dr(b,"link",g),o.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,lg(g,m.precedence,o));return c.instance}function lg(o,c,m){for(var g=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,S=b,F=0;F<g.length;F++){var $=g[F];if($.dataset.precedence===c)S=$;else if(S!==b)break}S?S.parentNode.insertBefore(o,S.nextSibling):(c=m.nodeType===9?m.head:m,c.insertBefore(o,c.firstChild))}function ob(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function lb(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var cg=null;function uS(o,c,m){if(cg===null){var g=new Map,b=cg=new Map;b.set(m,g)}else b=cg,g=b.get(m),g||(g=new Map,b.set(m,g));if(g.has(o))return g;for(g.set(o,null),m=m.getElementsByTagName(o),b=0;b<m.length;b++){var S=m[b];if(!(S[Sn]||S[ye]||o==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var F=S.getAttribute(c)||"";F=o+F;var $=g.get(F);$?$.push(S):g.set(F,[S])}}return g}function hS(o,c,m){o=o.ownerDocument||o,o.head.insertBefore(m,c==="title"?o.querySelector("head > title"):null)}function nM(o,c,m){if(m===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function mS(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Xu=null;function aM(){}function iM(o,c,m){if(Xu===null)throw Error(r(475));var g=Xu;if(c.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=td(m.href),S=o.querySelector(Yu(b));if(S){o=S._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(g.count++,g=dg.bind(g),o.then(g,g)),c.state.loading|=4,c.instance=S,Is(S);return}S=o.ownerDocument||o,m=cS(m),(b=Qn.get(b))&&ob(m,b),S=S.createElement("link"),Is(S);var F=S;F._p=new Promise(function($,K){F.onload=$,F.onerror=K}),Dr(S,"link",m),c.instance=S}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(g.count++,c=dg.bind(g),o.addEventListener("load",c),o.addEventListener("error",c))}}function oM(){if(Xu===null)throw Error(r(475));var o=Xu;return o.stylesheets&&o.count===0&&cb(o,o.stylesheets),0<o.count?function(c){var m=setTimeout(function(){if(o.stylesheets&&cb(o,o.stylesheets),o.unsuspend){var g=o.unsuspend;o.unsuspend=null,g()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(m)}}:null}function dg(){if(this.count--,this.count===0){if(this.stylesheets)cb(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var ug=null;function cb(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,ug=new Map,c.forEach(lM,o),ug=null,dg.call(o))}function lM(o,c){if(!(c.state.loading&4)){var m=ug.get(o);if(m)var g=m.get(null);else{m=new Map,ug.set(o,m);for(var b=o.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<b.length;S++){var F=b[S];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(m.set(F.dataset.precedence,F),g=F)}g&&m.set(null,g)}b=c.instance,F=b.getAttribute("data-precedence"),S=m.get(F)||g,S===g&&m.set(null,b),m.set(F,b),this.count++,g=dg.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),S?S.parentNode.insertBefore(b,S.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(b,o.firstChild)),c.state.loading|=4}}var Qu={$$typeof:P,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function cM(o,c,m,g,b,S,F,$){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ks(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ks(0),this.hiddenUpdates=ks(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=S,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function fS(o,c,m,g,b,S,F,$,K,ce,ke,De){return o=new cM(o,c,m,F,$,K,ce,De),c=1,S===!0&&(c|=24),S=Cn(3,null,null,c),o.current=S,S.stateNode=o,c=qx(),c.refCount++,o.pooledCache=c,c.refCount++,S.memoizedState={element:g,isDehydrated:m,cache:c},Yx(S),o}function gS(o){return o?(o=Ic,o):Ic}function pS(o,c,m,g,b,S){b=gS(b),g.context===null?g.context=b:g.pendingContext=b,g=Ki(c),g.payload={element:m},S=S===void 0?null:S,S!==null&&(g.callback=S),m=Xi(o,g,c),m!==null&&(Dn(m,o,c),Eu(m,o,c))}function xS(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function db(o,c){xS(o,c),(o=o.alternate)&&xS(o,c)}function yS(o){if(o.tag===13){var c=Pc(o,67108864);c!==null&&Dn(c,o,67108864),db(o,67108864)}}var hg=!0;function dM(o,c,m,g){var b=H.T;H.T=null;var S=W.p;try{W.p=2,ub(o,c,m,g)}finally{W.p=S,H.T=b}}function uM(o,c,m,g){var b=H.T;H.T=null;var S=W.p;try{W.p=8,ub(o,c,m,g)}finally{W.p=S,H.T=b}}function ub(o,c,m,g){if(hg){var b=hb(g);if(b===null)Jy(o,c,g,mg,m),vS(o,g);else if(mM(b,o,c,m,g))g.stopPropagation();else if(vS(o,g),c&4&&-1<hM.indexOf(o)){for(;b!==null;){var S=yr(b);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var F=dt(S.pendingLanes);if(F!==0){var $=S;for($.pendingLanes|=2,$.entangledLanes|=2;F;){var K=1<<31-ut(F);$.entanglements[1]|=K,F&=~K}Ia(S),(fs&6)===0&&(Xf=Xe()+500,qu(0))}}break;case 13:$=Pc(S,2),$!==null&&Dn($,S,2),Jf(),db(S,2)}if(S=hb(g),S===null&&Jy(o,c,g,mg,m),S===b)break;b=S}b!==null&&g.stopPropagation()}else Jy(o,c,g,null,m)}}function hb(o){return o=Bn(o),mb(o)}var mg=null;function mb(o){if(mg=null,o=Js(o),o!==null){var c=i(o);if(c===null)o=null;else{var m=c.tag;if(m===13){if(o=l(c),o!==null)return o;o=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return mg=o,null}function bS(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Et()){case Qe:return 2;case nt:return 8;case It:case lt:return 32;case xt:return 268435456;default:return 32}default:return 32}}var fb=!1,co=null,uo=null,ho=null,Ju=new Map,Zu=new Map,mo=[],hM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vS(o,c){switch(o){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":Ju.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zu.delete(c.pointerId)}}function eh(o,c,m,g,b,S){return o===null||o.nativeEvent!==S?(o={blockedOn:c,domEventName:m,eventSystemFlags:g,nativeEvent:S,targetContainers:[b]},c!==null&&(c=yr(c),c!==null&&yS(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),o)}function mM(o,c,m,g,b){switch(c){case"focusin":return co=eh(co,o,c,m,g,b),!0;case"dragenter":return uo=eh(uo,o,c,m,g,b),!0;case"mouseover":return ho=eh(ho,o,c,m,g,b),!0;case"pointerover":var S=b.pointerId;return Ju.set(S,eh(Ju.get(S)||null,o,c,m,g,b)),!0;case"gotpointercapture":return S=b.pointerId,Zu.set(S,eh(Zu.get(S)||null,o,c,m,g,b)),!0}return!1}function wS(o){var c=Js(o.target);if(c!==null){var m=i(c);if(m!==null){if(c=m.tag,c===13){if(c=l(m),c!==null){o.blockedOn=c,ae(o.priority,function(){if(m.tag===13){var g=In();g=Ps(g);var b=Pc(m,g);b!==null&&Dn(b,m,g),db(m,g)}});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function fg(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var m=hb(o.nativeEvent);if(m===null){m=o.nativeEvent;var g=new m.constructor(m.type,m);ni=g,m.target.dispatchEvent(g),ni=null}else return c=yr(m),c!==null&&yS(c),o.blockedOn=m,!1;c.shift()}return!0}function NS(o,c,m){fg(o)&&m.delete(c)}function fM(){fb=!1,co!==null&&fg(co)&&(co=null),uo!==null&&fg(uo)&&(uo=null),ho!==null&&fg(ho)&&(ho=null),Ju.forEach(NS),Zu.forEach(NS)}function gg(o,c){o.blockedOn===c&&(o.blockedOn=null,fb||(fb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fM)))}var pg=null;function jS(o){pg!==o&&(pg=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){pg===o&&(pg=null);for(var c=0;c<o.length;c+=3){var m=o[c],g=o[c+1],b=o[c+2];if(typeof g!="function"){if(mb(g||m)===null)continue;break}var S=yr(m);S!==null&&(o.splice(c,3),c-=3,my(S,{pending:!0,data:b,method:m.method,action:g},g,b))}}))}function th(o){function c(K){return gg(K,o)}co!==null&&gg(co,o),uo!==null&&gg(uo,o),ho!==null&&gg(ho,o),Ju.forEach(c),Zu.forEach(c);for(var m=0;m<mo.length;m++){var g=mo[m];g.blockedOn===o&&(g.blockedOn=null)}for(;0<mo.length&&(m=mo[0],m.blockedOn===null);)wS(m),m.blockedOn===null&&mo.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(g=0;g<m.length;g+=3){var b=m[g],S=m[g+1],F=b[Ee]||null;if(typeof S=="function")F||jS(m);else if(F){var $=null;if(S&&S.hasAttribute("formAction")){if(b=S,F=S[Ee]||null)$=F.formAction;else if(mb(b)!==null)continue}else $=F.action;typeof $=="function"?m[g+1]=$:(m.splice(g,3),g-=3),jS(m)}}}function gb(o){this._internalRoot=o}xg.prototype.render=gb.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));var m=c.current,g=In();pS(m,g,o,c,null,null)},xg.prototype.unmount=gb.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;pS(o.current,2,null,o,null,null),Jf(),c[Ke]=null}};function xg(o){this._internalRoot=o}xg.prototype.unstable_scheduleHydration=function(o){if(o){var c=xr();o={blockedOn:null,target:o,priority:c};for(var m=0;m<mo.length&&c!==0&&c<mo[m].priority;m++);mo.splice(m,0,o),m===0&&wS(o)}};var _S=e.version;if(_S!=="19.1.0")throw Error(r(527,_S,"19.1.0"));W.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=u(c),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var gM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yg.isDisabled&&yg.supportsFiber)try{Je=yg.inject(gM),Ye=yg}catch{}}return rh.createRoot=function(o,c){if(!a(o))throw Error(r(299));var m=!1,g="",b=F_,S=z_,F=B_,$=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(F=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&($=c.unstable_transitionCallbacks)),c=fS(o,1,!1,null,null,m,g,b,S,F,$,null),o[Ke]=c.current,Qy(o),new gb(c)},rh.hydrateRoot=function(o,c,m){if(!a(o))throw Error(r(299));var g=!1,b="",S=F_,F=z_,$=B_,K=null,ce=null;return m!=null&&(m.unstable_strictMode===!0&&(g=!0),m.identifierPrefix!==void 0&&(b=m.identifierPrefix),m.onUncaughtError!==void 0&&(S=m.onUncaughtError),m.onCaughtError!==void 0&&(F=m.onCaughtError),m.onRecoverableError!==void 0&&($=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(K=m.unstable_transitionCallbacks),m.formState!==void 0&&(ce=m.formState)),c=fS(o,1,!0,c,m??null,g,b,S,F,$,K,ce),c.context=gS(null),m=c.current,g=In(),g=Ps(g),b=Ki(g),b.callback=null,Xi(m,b,g),m=g,c.current.lanes=m,ns(c,m),Ia(c),o[Ke]=c.current,Qy(o),new xg(c)},rh.version="19.1.0",rh}var DS;function EM(){if(DS)return yb.exports;DS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yb.exports=kM(),yb.exports}var TM=EM(),nh={},MS;function CM(){if(MS)return nh;MS=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.parse=l,nh.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,i=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function l(x,w){const N=new i,v=x.length;if(v<2)return N;const j=(w==null?void 0:w.decode)||f;let k=0;do{const T=x.indexOf("=",k);if(T===-1)break;const P=x.indexOf(";",k),U=P===-1?v:P;if(T>U){k=x.lastIndexOf(";",T-1)+1;continue}const R=d(x,k,T),O=u(x,T,R),I=x.slice(R,O);if(N[I]===void 0){let C=d(x,T+1,U),E=u(x,U,C);const D=j(x.slice(C,E));N[I]=D}k=U+1}while(k<v);return N}function d(x,w,N){do{const v=x.charCodeAt(w);if(v!==32&&v!==9)return w}while(++w<N);return N}function u(x,w,N){for(;w>N;){const v=x.charCodeAt(--w);if(v!==32&&v!==9)return w+1}return N}function h(x,w,N){const v=(N==null?void 0:N.encode)||encodeURIComponent;if(!t.test(x))throw new TypeError(`argument name is invalid: ${x}`);const j=v(w);if(!e.test(j))throw new TypeError(`argument val is invalid: ${w}`);let k=x+"="+j;if(!N)return k;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);k+="; Max-Age="+N.maxAge}if(N.domain){if(!s.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);k+="; Domain="+N.domain}if(N.path){if(!r.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);k+="; Path="+N.path}if(N.expires){if(!p(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);k+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(k+="; HttpOnly"),N.secure&&(k+="; Secure"),N.partitioned&&(k+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return k}function f(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function p(x){return a.call(x)==="[object Date]"}return nh}CM();var OS="popstate";function AM(t={}){function e(r,a){let{pathname:i,search:l,hash:d}=r.location;return gv("",{pathname:i,search:l,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){return typeof a=="string"?a:rm(a)}return PM(e,s,null,t)}function As(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ga(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RM(){return Math.random().toString(36).substring(2,10)}function LS(t,e){return{usr:t.state,key:t.key,idx:e}}function gv(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?$d(e):e,state:s,key:e&&e.key||r||RM()}}function rm({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function $d(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function PM(t,e,s,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,l=a.history,d="POP",u=null,h=f();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function f(){return(l.state||{idx:null}).idx}function p(){d="POP";let j=f(),k=j==null?null:j-h;h=j,u&&u({action:d,location:v.location,delta:k})}function x(j,k){d="PUSH";let T=gv(v.location,j,k);h=f()+1;let P=LS(T,h),U=v.createHref(T);try{l.pushState(P,"",U)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(U)}i&&u&&u({action:d,location:v.location,delta:1})}function w(j,k){d="REPLACE";let T=gv(v.location,j,k);h=f();let P=LS(T,h),U=v.createHref(T);l.replaceState(P,"",U),i&&u&&u({action:d,location:v.location,delta:0})}function N(j){return IM(j)}let v={get action(){return d},get location(){return t(a,l)},listen(j){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(OS,p),u=j,()=>{a.removeEventListener(OS,p),u=null}},createHref(j){return e(a,j)},createURL:N,encodeLocation(j){let k=N(j);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:x,replace:w,go(j){return l.go(j)}};return v}function IM(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),As(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:rm(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function eR(t,e,s="/"){return DM(t,e,s,!1)}function DM(t,e,s,r){let a=typeof e=="string"?$d(e):e,i=Di(a.pathname||"/",s);if(i==null)return null;let l=tR(t);MM(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=GM(i);d=qM(l[u],h,r)}return d}function tR(t,e=[],s=[],r=""){let a=(i,l,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};u.relativePath.startsWith("/")&&(As(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let h=Pi([r,u.relativePath]),f=s.concat(u);i.children&&i.children.length>0&&(As(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),tR(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:BM(h,i.index),routesMeta:f})};return t.forEach((i,l)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))a(i,l);else for(let u of sR(i.path))a(i,l,u)}),e}function sR(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let l=sR(r.join("/")),d=[];return d.push(...l.map(u=>u===""?i:[i,u].join("/"))),a&&d.push(...l),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function MM(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:$M(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var OM=/^:[\w-]+$/,LM=3,UM=2,VM=1,FM=10,zM=-2,US=t=>t==="*";function BM(t,e){let s=t.split("/"),r=s.length;return s.some(US)&&(r+=zM),e&&(r+=UM),s.filter(a=>!US(a)).reduce((a,i)=>a+(OM.test(i)?LM:i===""?VM:FM),r)}function $M(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function qM(t,e,s=!1){let{routesMeta:r}=t,a={},i="/",l=[];for(let d=0;d<r.length;++d){let u=r[d],h=d===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Cp({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),x=u.route;if(!p&&h&&s&&!r[r.length-1].route.index&&(p=Cp({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(a,p.params),l.push({params:a,pathname:Pi([i,p.pathname]),pathnameBase:XM(Pi([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=Pi([i,p.pathnameBase]))}return l}function Cp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=HM(t.path,t.caseSensitive,t.end),a=e.match(s);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((h,{paramName:f,isOptional:p},x)=>{if(f==="*"){let N=d[x]||"";l=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const w=d[x];return p&&!w?h[f]=void 0:h[f]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:t}}function HM(t,e=!1,s=!0){ga(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(r.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function GM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ga(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Di(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function WM(t,e="/"){let{pathname:s,search:r="",hash:a=""}=typeof t=="string"?$d(t):t;return{pathname:s?s.startsWith("/")?s:YM(s,e):e,search:QM(r),hash:JM(a)}}function YM(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Nb(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KM(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Iw(t){let e=KM(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function Dw(t,e,s,r=!1){let a;typeof t=="string"?a=$d(t):(a={...t},As(!a.pathname||!a.pathname.includes("?"),Nb("?","pathname","search",a)),As(!a.pathname||!a.pathname.includes("#"),Nb("#","pathname","hash",a)),As(!a.search||!a.search.includes("#"),Nb("#","search","hash",a)));let i=t===""||a.pathname==="",l=i?"/":a.pathname,d;if(l==null)d=s;else{let p=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;a.pathname=x.join("/")}d=p>=0?e[p]:"/"}let u=WM(a,d),h=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}var Pi=t=>t.join("/").replace(/\/\/+/g,"/"),XM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var rR=["POST","PUT","PATCH","DELETE"];new Set(rR);var eO=["GET",...rR];new Set(eO);var qd=_.createContext(null);qd.displayName="DataRouter";var v0=_.createContext(null);v0.displayName="DataRouterState";var nR=_.createContext({isTransitioning:!1});nR.displayName="ViewTransition";var tO=_.createContext(new Map);tO.displayName="Fetchers";var sO=_.createContext(null);sO.displayName="Await";var ya=_.createContext(null);ya.displayName="Navigation";var Pm=_.createContext(null);Pm.displayName="Location";var ba=_.createContext({outlet:null,matches:[],isDataRoute:!1});ba.displayName="Route";var Mw=_.createContext(null);Mw.displayName="RouteError";function rO(t,{relative:e}={}){As(Hd(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=_.useContext(ya),{hash:a,pathname:i,search:l}=Im(t,{relative:e}),d=i;return s!=="/"&&(d=i==="/"?s:Pi([s,i])),r.createHref({pathname:d,search:l,hash:a})}function Hd(){return _.useContext(Pm)!=null}function gr(){return As(Hd(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(Pm).location}var aR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iR(t){_.useContext(ya).static||_.useLayoutEffect(t)}function Ns(){let{isDataRoute:t}=_.useContext(ba);return t?pO():nO()}function nO(){As(Hd(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(qd),{basename:e,navigator:s}=_.useContext(ya),{matches:r}=_.useContext(ba),{pathname:a}=gr(),i=JSON.stringify(Iw(r)),l=_.useRef(!1);return iR(()=>{l.current=!0}),_.useCallback((u,h={})=>{if(ga(l.current,aR),!l.current)return;if(typeof u=="number"){s.go(u);return}let f=Dw(u,JSON.parse(i),a,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Pi([e,f.pathname])),(h.replace?s.replace:s.push)(f,h.state,h)},[e,s,i,a,t])}_.createContext(null);function lc(){let{matches:t}=_.useContext(ba),e=t[t.length-1];return e?e.params:{}}function Im(t,{relative:e}={}){let{matches:s}=_.useContext(ba),{pathname:r}=gr(),a=JSON.stringify(Iw(s));return _.useMemo(()=>Dw(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function aO(t,e){return oR(t,e)}function oR(t,e,s,r){var T;As(Hd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:i}=_.useContext(ya),{matches:l}=_.useContext(ba),d=l[l.length-1],u=d?d.params:{},h=d?d.pathname:"/",f=d?d.pathnameBase:"/",p=d&&d.route;{let P=p&&p.path||"";lR(h,!p||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let x=gr(),w;if(e){let P=typeof e=="string"?$d(e):e;As(f==="/"||((T=P.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${P.pathname}" was given in the \`location\` prop.`),w=P}else w=x;let N=w.pathname||"/",v=N;if(f!=="/"){let P=f.replace(/^\//,"").split("/");v="/"+N.replace(/^\//,"").split("/").slice(P.length).join("/")}let j=!i&&s&&s.matches&&s.matches.length>0?s.matches:eR(t,{pathname:v});ga(p||j!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),ga(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=dO(j&&j.map(P=>Object.assign({},P,{params:Object.assign({},u,P.params),pathname:Pi([f,a.encodeLocation?a.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?f:Pi([f,a.encodeLocation?a.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),l,s,r);return e&&k?_.createElement(Pm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},k):k}function iO(){let t=gO(),e=ZM(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:i},"ErrorBoundary")," or"," ",_.createElement("code",{style:i},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),s?_.createElement("pre",{style:a},s):null,l)}var oO=_.createElement(iO,null),lO=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?_.createElement(ba.Provider,{value:this.props.routeContext},_.createElement(Mw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cO({routeContext:t,match:e,children:s}){let r=_.useContext(qd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(ba.Provider,{value:t},s)}function dO(t,e=[],s=null,r=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,i=s==null?void 0:s.errors;if(i!=null){let u=a.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);As(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,d=-1;if(s)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:p}=s,x=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||x){l=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((u,h,f)=>{let p,x=!1,w=null,N=null;s&&(p=i&&h.route.id?i[h.route.id]:void 0,w=h.route.errorElement||oO,l&&(d<0&&f===0?(lR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,N=null):d===f&&(x=!0,N=h.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,f+1)),j=()=>{let k;return p?k=w:x?k=N:h.route.Component?k=_.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=u,_.createElement(cO,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:s!=null},children:k})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(lO,{location:s.location,revalidation:s.revalidation,component:w,error:p,children:j(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):j()},null)}function Ow(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uO(t){let e=_.useContext(qd);return As(e,Ow(t)),e}function hO(t){let e=_.useContext(v0);return As(e,Ow(t)),e}function mO(t){let e=_.useContext(ba);return As(e,Ow(t)),e}function Lw(t){let e=mO(t),s=e.matches[e.matches.length-1];return As(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function fO(){return Lw("useRouteId")}function gO(){var r;let t=_.useContext(Mw),e=hO("useRouteError"),s=Lw("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[s]}function pO(){let{router:t}=uO("useNavigate"),e=Lw("useNavigate"),s=_.useRef(!1);return iR(()=>{s.current=!0}),_.useCallback(async(a,i={})=>{ga(s.current,aR),s.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var VS={};function lR(t,e,s){!e&&!VS[t]&&(VS[t]=!0,ga(!1,s))}_.memo(xO);function xO({routes:t,future:e,state:s}){return oR(t,void 0,s,e)}function FS({to:t,replace:e,state:s,relative:r}){As(Hd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=_.useContext(ya);ga(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=_.useContext(ba),{pathname:l}=gr(),d=Ns(),u=Dw(t,Iw(i),l,r==="path"),h=JSON.stringify(u);return _.useEffect(()=>{d(JSON.parse(h),{replace:e,state:s,relative:r})},[d,h,r,e,s]),null}function et(t){As(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yO({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:a,static:i=!1}){As(!Hd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=_.useMemo(()=>({basename:l,navigator:a,static:i,future:{}}),[l,a,i]);typeof s=="string"&&(s=$d(s));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:x="default"}=s,w=_.useMemo(()=>{let N=Di(u,l);return N==null?null:{location:{pathname:N,search:h,hash:f,state:p,key:x},navigationType:r}},[l,u,h,f,p,x,r]);return ga(w!=null,`<Router basename="${l}"> is not able to match the URL "${u}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:_.createElement(ya.Provider,{value:d},_.createElement(Pm.Provider,{children:e,value:w}))}function bO({children:t,location:e}){return aO(pv(t),e)}function pv(t,e=[]){let s=[];return _.Children.forEach(t,(r,a)=>{if(!_.isValidElement(r))return;let i=[...e,a];if(r.type===_.Fragment){s.push.apply(s,pv(r.props.children,i));return}As(r.type===et,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),As(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=pv(r.props.children,i)),s.push(l)}),s}var tp="get",sp="application/x-www-form-urlencoded";function w0(t){return t!=null&&typeof t.tagName=="string"}function vO(t){return w0(t)&&t.tagName.toLowerCase()==="button"}function wO(t){return w0(t)&&t.tagName.toLowerCase()==="form"}function NO(t){return w0(t)&&t.tagName.toLowerCase()==="input"}function jO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _O(t,e){return t.button===0&&(!e||e==="_self")&&!jO(t)}var vg=null;function SO(){if(vg===null)try{new FormData(document.createElement("form"),0),vg=!1}catch{vg=!0}return vg}var kO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jb(t){return t!=null&&!kO.has(t)?(ga(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sp}"`),null):t}function EO(t,e){let s,r,a,i,l;if(wO(t)){let d=t.getAttribute("action");r=d?Di(d,e):null,s=t.getAttribute("method")||tp,a=jb(t.getAttribute("enctype"))||sp,i=new FormData(t)}else if(vO(t)||NO(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||d.getAttribute("action");if(r=u?Di(u,e):null,s=t.getAttribute("formmethod")||d.getAttribute("method")||tp,a=jb(t.getAttribute("formenctype"))||jb(d.getAttribute("enctype"))||sp,i=new FormData(d,t),!SO()){let{name:h,type:f,value:p}=t;if(f==="image"){let x=h?`${h}.`:"";i.append(`${x}x`,"0"),i.append(`${x}y`,"0")}else h&&i.append(h,p)}}else{if(w0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=tp,r=null,a=sp,l=t}return i&&a==="text/plain"&&(l=i,i=void 0),{action:r,method:s.toLowerCase(),encType:a,formData:i,body:l}}function Uw(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function TO(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function AO(t,e,s){let r=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let l=await TO(i,s);return l.links?l.links():[]}return[]}));return DO(r.flat(1).filter(CO).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function zS(t,e,s,r,a,i){let l=(u,h)=>s[h]?u.route.id!==s[h].route.id:!0,d=(u,h)=>{var f;return s[h].pathname!==u.pathname||((f=s[h].route.path)==null?void 0:f.endsWith("*"))&&s[h].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,h)=>l(u,h)||d(u,h)):i==="data"?e.filter((u,h)=>{var p;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(l(u,h)||d(u,h))return!0;if(u.route.shouldRevalidate){let x=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=s[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function RO(t,e,{includeHydrateFallback:s}={}){return PO(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function PO(t){return[...new Set(t)]}function IO(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function DO(t,e){let s=new Set;return new Set(e),t.reduce((r,a)=>{let i=JSON.stringify(IO(a));return s.has(i)||(s.add(i),r.push({key:i,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var MO=new Set([100,101,204,205]);function OO(t,e){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname="_root.data":e&&Di(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function cR(){let t=_.useContext(qd);return Uw(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function LO(){let t=_.useContext(v0);return Uw(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Vw=_.createContext(void 0);Vw.displayName="FrameworkContext";function dR(){let t=_.useContext(Vw);return Uw(t,"You must render this element inside a <HydratedRouter> element"),t}function UO(t,e){let s=_.useContext(Vw),[r,a]=_.useState(!1),[i,l]=_.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:h,onMouseLeave:f,onTouchStart:p}=e,x=_.useRef(null);_.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let v=k=>{k.forEach(T=>{l(T.isIntersecting)})},j=new IntersectionObserver(v,{threshold:.5});return x.current&&j.observe(x.current),()=>{j.disconnect()}}},[t]),_.useEffect(()=>{if(r){let v=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(v)}}},[r]);let w=()=>{a(!0)},N=()=>{a(!1),l(!1)};return s?t!=="intent"?[i,x,{}]:[i,x,{onFocus:ah(d,w),onBlur:ah(u,N),onMouseEnter:ah(h,w),onMouseLeave:ah(f,N),onTouchStart:ah(p,w)}]:[!1,x,{}]}function ah(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function VO({page:t,...e}){let{router:s}=cR(),r=_.useMemo(()=>eR(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?_.createElement(zO,{page:t,matches:r,...e}):null}function FO(t){let{manifest:e,routeModules:s}=dR(),[r,a]=_.useState([]);return _.useEffect(()=>{let i=!1;return AO(t,e,s).then(l=>{i||a(l)}),()=>{i=!0}},[t,e,s]),r}function zO({page:t,matches:e,...s}){let r=gr(),{manifest:a,routeModules:i}=dR(),{basename:l}=cR(),{loaderData:d,matches:u}=LO(),h=_.useMemo(()=>zS(t,e,u,a,r,"data"),[t,e,u,a,r]),f=_.useMemo(()=>zS(t,e,u,a,r,"assets"),[t,e,u,a,r]),p=_.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let N=new Set,v=!1;if(e.forEach(k=>{var P;let T=a.routes[k.route.id];!T||!T.hasLoader||(!h.some(U=>U.route.id===k.route.id)&&k.route.id in d&&((P=i[k.route.id])!=null&&P.shouldRevalidate)||T.hasClientLoader?v=!0:N.add(k.route.id))}),N.size===0)return[];let j=OO(t,l);return v&&N.size>0&&j.searchParams.set("_routes",e.filter(k=>N.has(k.route.id)).map(k=>k.route.id).join(",")),[j.pathname+j.search]},[l,d,r,a,h,e,t,i]),x=_.useMemo(()=>RO(f,a),[f,a]),w=FO(f);return _.createElement(_.Fragment,null,p.map(N=>_.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...s})),x.map(N=>_.createElement("link",{key:N,rel:"modulepreload",href:N,...s})),w.map(({key:N,link:v})=>_.createElement("link",{key:N,...v})))}function BO(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var uR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uR&&(window.__reactRouterVersion="7.6.0")}catch{}function $O({basename:t,children:e,window:s}){let r=_.useRef();r.current==null&&(r.current=AM({window:s,v5Compat:!0}));let a=r.current,[i,l]=_.useState({action:a.action,location:a.location}),d=_.useCallback(u=>{_.startTransition(()=>l(u))},[l]);return _.useLayoutEffect(()=>a.listen(d),[a,d]),_.createElement(yO,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:a})}var hR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=_.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:a,reloadDocument:i,replace:l,state:d,target:u,to:h,preventScrollReset:f,viewTransition:p,...x},w){let{basename:N}=_.useContext(ya),v=typeof h=="string"&&hR.test(h),j,k=!1;if(typeof h=="string"&&v&&(j=h,uR))try{let E=new URL(window.location.href),D=h.startsWith("//")?new URL(E.protocol+h):new URL(h),V=Di(D.pathname,N);D.origin===E.origin&&V!=null?h=V+D.search+D.hash:k=!0}catch{ga(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=rO(h,{relative:a}),[P,U,R]=UO(r,x),O=WO(h,{replace:l,state:d,target:u,preventScrollReset:f,relative:a,viewTransition:p});function I(E){e&&e(E),E.defaultPrevented||O(E)}let C=_.createElement("a",{...x,...R,href:j||T,onClick:k||i?e:I,ref:BO(w,U),target:u,"data-discover":!v&&s==="render"?"true":void 0});return P&&!v?_.createElement(_.Fragment,null,C,_.createElement(VO,{page:T})):C});ue.displayName="Link";var qO=_.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:a=!1,style:i,to:l,viewTransition:d,children:u,...h},f){let p=Im(l,{relative:h.relative}),x=gr(),w=_.useContext(v0),{navigator:N,basename:v}=_.useContext(ya),j=w!=null&&JO(p)&&d===!0,k=N.encodeLocation?N.encodeLocation(p).pathname:p.pathname,T=x.pathname,P=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(T=T.toLowerCase(),P=P?P.toLowerCase():null,k=k.toLowerCase()),P&&v&&(P=Di(P,v)||P);const U=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let R=T===k||!a&&T.startsWith(k)&&T.charAt(U)==="/",O=P!=null&&(P===k||!a&&P.startsWith(k)&&P.charAt(k.length)==="/"),I={isActive:R,isPending:O,isTransitioning:j},C=R?e:void 0,E;typeof r=="function"?E=r(I):E=[r,R?"active":null,O?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(I):i;return _.createElement(ue,{...h,"aria-current":C,className:E,ref:f,style:D,to:l,viewTransition:d},typeof u=="function"?u(I):u)});qO.displayName="NavLink";var HO=_.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:a,state:i,method:l=tp,action:d,onSubmit:u,relative:h,preventScrollReset:f,viewTransition:p,...x},w)=>{let N=XO(),v=QO(d,{relative:h}),j=l.toLowerCase()==="get"?"get":"post",k=typeof d=="string"&&hR.test(d),T=P=>{if(u&&u(P),P.defaultPrevented)return;P.preventDefault();let U=P.nativeEvent.submitter,R=(U==null?void 0:U.getAttribute("formmethod"))||l;N(U||P.currentTarget,{fetcherKey:e,method:R,navigate:s,replace:a,state:i,relative:h,preventScrollReset:f,viewTransition:p})};return _.createElement("form",{ref:w,method:j,action:v,onSubmit:r?u:T,...x,"data-discover":!k&&t==="render"?"true":void 0})});HO.displayName="Form";function GO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mR(t){let e=_.useContext(qd);return As(e,GO(t)),e}function WO(t,{target:e,replace:s,state:r,preventScrollReset:a,relative:i,viewTransition:l}={}){let d=Ns(),u=gr(),h=Im(t,{relative:i});return _.useCallback(f=>{if(_O(f,e)){f.preventDefault();let p=s!==void 0?s:rm(u)===rm(h);d(t,{replace:p,state:r,preventScrollReset:a,relative:i,viewTransition:l})}},[u,d,h,s,r,e,t,a,i,l])}var YO=0,KO=()=>`__${String(++YO)}__`;function XO(){let{router:t}=mR("useSubmit"),{basename:e}=_.useContext(ya),s=fO();return _.useCallback(async(r,a={})=>{let{action:i,method:l,encType:d,formData:u,body:h}=EO(r,e);if(a.navigate===!1){let f=a.fetcherKey||KO();await t.fetch(f,s,a.action||i,{preventScrollReset:a.preventScrollReset,formData:u,body:h,formMethod:a.method||l,formEncType:a.encType||d,flushSync:a.flushSync})}else await t.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:u,body:h,formMethod:a.method||l,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,s])}function QO(t,{relative:e}={}){let{basename:s}=_.useContext(ya),r=_.useContext(ba);As(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...Im(t||".",{relative:e})},l=gr();if(t==null){i.search=l.search;let d=new URLSearchParams(i.search),u=d.getAll("index");if(u.some(f=>f==="")){d.delete("index"),u.filter(p=>p).forEach(p=>d.append("index",p));let f=d.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:Pi([s,i.pathname])),rm(i)}function JO(t,e={}){let s=_.useContext(nR);As(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mR("useViewTransitionState"),a=Im(t,{relative:e.relative});if(!s.isTransitioning)return!1;let i=Di(s.currentLocation.pathname,r)||s.currentLocation.pathname,l=Di(s.nextLocation.pathname,r)||s.nextLocation.pathname;return Cp(a.pathname,l)!=null||Cp(a.pathname,i)!=null}[...MO];const ZO=()=>{};var BS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[s++]=a:a<2048?(e[s++]=a>>6|192,e[s++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=a>>18|240,e[s++]=a>>12&63|128,e[s++]=a>>6&63|128,e[s++]=a&63|128):(e[s++]=a>>12|224,e[s++]=a>>6&63|128,e[s++]=a&63|128)}return e},eL=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const a=t[s++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[s++];e[r++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[s++],l=t[s++],d=t[s++],u=((a&7)<<18|(i&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[s++],l=t[s++];e[r++]=String.fromCharCode((a&15)<<12|(i&63)<<6|l&63)}}return e.join("")},gR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const i=t[a],l=a+1<t.length,d=l?t[a+1]:0,u=a+2<t.length,h=u?t[a+2]:0,f=i>>2,p=(i&3)<<4|d>>4;let x=(d&15)<<2|h>>6,w=h&63;u||(w=64,l||(x=64)),r.push(s[f],s[p],s[x],s[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const i=s[t.charAt(a++)],d=a<t.length?s[t.charAt(a)]:0;++a;const h=a<t.length?s[t.charAt(a)]:64;++a;const p=a<t.length?s[t.charAt(a)]:64;if(++a,i==null||d==null||h==null||p==null)throw new tL;const x=i<<2|d>>4;if(r.push(x),h!==64){const w=d<<4&240|h>>2;if(r.push(w),p!==64){const N=h<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sL=function(t){const e=fR(t);return gR.encodeByteArray(e,!0)},Ap=function(t){return sL(t).replace(/\./g,"")},pR=function(t){try{return gR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=()=>rL().__FIREBASE_DEFAULTS__,aL=()=>{if(typeof process>"u"||typeof BS>"u")return;const t=BS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pR(t[1]);return e&&JSON.parse(e)},N0=()=>{try{return ZO()||nL()||aL()||iL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xR=t=>{var e,s;return(s=(e=N0())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},yR=t=>{const e=xR(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},bR=()=>{var t;return(t=N0())===null||t===void 0?void 0:t.config},vR=t=>{var e;return(e=N0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){return t.endsWith(".cloudworkstations.dev")}async function Fw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ap(JSON.stringify(s)),Ap(JSON.stringify(l)),""].join(".")}const Mh={};function lL(){const t={prod:[],emulator:[]};for(const e of Object.keys(Mh))Mh[e]?t.emulator.push(e):t.prod.push(e);return t}function cL(t){let e=document.getElementById(t),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),s=!0),{created:s,element:e}}let $S=!1;function Gd(t,e){if(typeof window>"u"||typeof document>"u"||!cc(window.location.host)||Mh[t]===e||Mh[t]||$S)return;Mh[t]=e;function s(x){return`__firebase__banner__${x}`}const r="__firebase__banner",i=lL().prod.length>0;function l(){const x=document.getElementById(r);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function u(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function h(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{$S=!0,l()},x}function f(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function p(){const x=cL(r),w=s("text"),N=document.getElementById(w)||document.createElement("span"),v=s("learnmore"),j=document.getElementById(v)||document.createElement("a"),k=s("preprendIcon"),T=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const P=x.element;d(P),f(j,v);const U=h();u(T,k),P.append(T,N,j,U),document.body.appendChild(P)}i?(N.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jr())}function uL(){var t;const e=(t=N0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gL(){const t=Jr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pL(){return!uL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xL(){try{return typeof indexedDB=="object"}catch{return!1}}function yL(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="FirebaseError";class si extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=bL,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dm.prototype.create)}}class Dm{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},a=`${this.service}/${e}`,i=this.errors[e],l=i?vL(i,r):"Error",d=`${this.serviceName}: ${l} (${a}).`;return new si(a,d,r)}}function vL(t,e){return t.replace(wL,(s,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const wL=/\{\$([^}]+)}/g;function NL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mi(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const a of s){if(!r.includes(a))return!1;const i=t[a],l=e[a];if(qS(i)&&qS(l)){if(!Mi(i,l))return!1}else if(i!==l)return!1}for(const a of r)if(!s.includes(a))return!1;return!0}function qS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,i]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(i)}}),e}function jh(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}function jL(t,e){const s=new _L(t,e);return s.subscribe.bind(s)}class _L{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let a;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");SL(e,["next","error","complete"])?a=e:a={next:e,error:s,complete:r},a.next===void 0&&(a.next=_b),a.error===void 0&&(a.error=_b),a.complete===void 0&&(a.complete=_b);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SL(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function _b(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t){return t&&t._delegate?t._delegate:t}class Do{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new oL;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TL(e))try{this.getOrInitializeService({instanceIdentifier:Cl})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const i=this.getOrInitializeService({instanceIdentifier:a});r.resolve(i)}catch{}}}}clearInstance(e=Cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cl){return this.instances.has(e)}getOptions(e=Cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[i,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(i);r===d&&l.resolve(a)}return a}onInit(e,s){var r;const a=this.normalizeInstanceIdentifier(s),i=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(a,i);const l=this.instances.get(a);return l&&e(l,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const a of r)try{a(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EL(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cl){return this.component?this.component.multipleInstances?e:Cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EL(t){return t===Cl?void 0:t}function TL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new kL(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Wt||(Wt={}));const AL={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},RL=Wt.INFO,PL={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},IL=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=PL[e];if(a)console[a](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zw{constructor(e){this.name=e,this._logLevel=RL,this._logHandler=IL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...e),this._logHandler(this,Wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...e),this._logHandler(this,Wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...e),this._logHandler(this,Wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...e),this._logHandler(this,Wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...e),this._logHandler(this,Wt.ERROR,...e)}}const DL=(t,e)=>e.some(s=>t instanceof s);let HS,GS;function ML(){return HS||(HS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OL(){return GS||(GS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NR=new WeakMap,xv=new WeakMap,jR=new WeakMap,Sb=new WeakMap,Bw=new WeakMap;function LL(t){const e=new Promise((s,r)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",l)},i=()=>{s(To(t.result)),a()},l=()=>{r(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",l)});return e.then(s=>{s instanceof IDBCursor&&NR.set(s,t)}).catch(()=>{}),Bw.set(e,t),e}function UL(t){if(xv.has(t))return;const e=new Promise((s,r)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",l),t.removeEventListener("abort",l)},i=()=>{s(),a()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",l),t.addEventListener("abort",l)});xv.set(t,e)}let yv={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return xv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jR.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return To(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VL(t){yv=t(yv)}function FL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(kb(this),e,...s);return jR.set(r,e.sort?e.sort():[e]),To(r)}:OL().includes(t)?function(...e){return t.apply(kb(this),e),To(NR.get(this))}:function(...e){return To(t.apply(kb(this),e))}}function zL(t){return typeof t=="function"?FL(t):(t instanceof IDBTransaction&&UL(t),DL(t,ML())?new Proxy(t,yv):t)}function To(t){if(t instanceof IDBRequest)return LL(t);if(Sb.has(t))return Sb.get(t);const e=zL(t);return e!==t&&(Sb.set(t,e),Bw.set(e,t)),e}const kb=t=>Bw.get(t);function BL(t,e,{blocked:s,upgrade:r,blocking:a,terminated:i}={}){const l=indexedDB.open(t,e),d=To(l);return r&&l.addEventListener("upgradeneeded",u=>{r(To(l.result),u.oldVersion,u.newVersion,To(l.transaction),u)}),s&&l.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),d.then(u=>{i&&u.addEventListener("close",()=>i()),a&&u.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const $L=["get","getKey","getAll","getAllKeys","count"],qL=["put","add","delete","clear"],Eb=new Map;function WS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eb.get(e))return Eb.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,a=qL.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(a||$L.includes(s)))return;const i=async function(l,...d){const u=this.transaction(l,a?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[s](...d),a&&u.done]))[0]};return Eb.set(e,i),i}VL(t=>({...t,get:(e,s,r)=>WS(e,s)||t.get(e,s,r),has:(e,s)=>!!WS(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(GL(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function GL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bv="@firebase/app",YS="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new zw("@firebase/app"),WL="@firebase/app-compat",YL="@firebase/analytics-compat",KL="@firebase/analytics",XL="@firebase/app-check-compat",QL="@firebase/app-check",JL="@firebase/auth",ZL="@firebase/auth-compat",eU="@firebase/database",tU="@firebase/data-connect",sU="@firebase/database-compat",rU="@firebase/functions",nU="@firebase/functions-compat",aU="@firebase/installations",iU="@firebase/installations-compat",oU="@firebase/messaging",lU="@firebase/messaging-compat",cU="@firebase/performance",dU="@firebase/performance-compat",uU="@firebase/remote-config",hU="@firebase/remote-config-compat",mU="@firebase/storage",fU="@firebase/storage-compat",gU="@firebase/firestore",pU="@firebase/ai",xU="@firebase/firestore-compat",yU="firebase",bU="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="[DEFAULT]",vU={[bv]:"fire-core",[WL]:"fire-core-compat",[KL]:"fire-analytics",[YL]:"fire-analytics-compat",[QL]:"fire-app-check",[XL]:"fire-app-check-compat",[JL]:"fire-auth",[ZL]:"fire-auth-compat",[eU]:"fire-rtdb",[tU]:"fire-data-connect",[sU]:"fire-rtdb-compat",[rU]:"fire-fn",[nU]:"fire-fn-compat",[aU]:"fire-iid",[iU]:"fire-iid-compat",[oU]:"fire-fcm",[lU]:"fire-fcm-compat",[cU]:"fire-perf",[dU]:"fire-perf-compat",[uU]:"fire-rc",[hU]:"fire-rc-compat",[mU]:"fire-gcs",[fU]:"fire-gcs-compat",[gU]:"fire-fst",[xU]:"fire-fst-compat",[pU]:"fire-vertex","fire-js":"fire-js",[yU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=new Map,wU=new Map,wv=new Map;function KS(t,e){try{t.container.addComponent(e)}catch(s){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function Yl(t){const e=t.name;if(wv.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;wv.set(e,t);for(const s of Rp.values())KS(s,t);for(const s of wU.values())KS(s,t);return!0}function j0(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Co=new Dm("app","Firebase",NU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,s,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=bU;function $w(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vv,automaticDataCollectionEnabled:!0},e),a=r.name;if(typeof a!="string"||!a)throw Co.create("bad-app-name",{appName:String(a)});if(s||(s=bR()),!s)throw Co.create("no-options");const i=Rp.get(a);if(i){if(Mi(s,i.options)&&Mi(r,i.config))return i;throw Co.create("duplicate-app",{appName:a})}const l=new CL(a);for(const u of wv.values())l.addComponent(u);const d=new jU(s,r,l);return Rp.set(a,d),d}function qw(t=vv){const e=Rp.get(t);if(!e&&t===vv&&bR())return $w();if(!e)throw Co.create("no-app",{appName:t});return e}function $a(t,e,s){var r;let a=(r=vU[t])!==null&&r!==void 0?r:t;s&&(a+=`-${s}`);const i=a.match(/\s|\//),l=e.match(/\s|\//);if(i||l){const d=[`Unable to register library "${a}" with version "${e}":`];i&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(d.join(" "));return}Yl(new Do(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U="firebase-heartbeat-database",SU=1,nm="firebase-heartbeat-store";let Tb=null;function _R(){return Tb||(Tb=BL(_U,SU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nm)}catch(s){console.warn(s)}}}}).catch(t=>{throw Co.create("idb-open",{originalErrorMessage:t.message})})),Tb}async function kU(t){try{const s=(await _R()).transaction(nm),r=await s.objectStore(nm).get(SR(t));return await s.done,r}catch(e){if(e instanceof si)Oi.warn(e.message);else{const s=Co.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(s.message)}}}async function XS(t,e){try{const r=(await _R()).transaction(nm,"readwrite");await r.objectStore(nm).put(e,SR(t)),await r.done}catch(s){if(s instanceof si)Oi.warn(s.message);else{const r=Co.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Oi.warn(r.message)}}}function SR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU=1024,TU=30;class CU{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new RU(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=QS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>TU){const l=PU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Oi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=QS(),{heartbeatsToSend:r,unsentEntries:a}=AU(this._heartbeatsCache.heartbeats),i=Ap(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(s){return Oi.warn(s),""}}}function QS(){return new Date().toISOString().substring(0,10)}function AU(t,e=EU){const s=[];let r=t.slice();for(const a of t){const i=s.find(l=>l.agent===a.agent);if(i){if(i.dates.push(a.date),JS(s)>e){i.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),JS(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class RU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xL()?yL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await kU(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return XS(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return XS(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function JS(t){return Ap(JSON.stringify({version:2,heartbeats:t})).length}function PU(t){if(t.length===0)return-1;let e=0,s=t[0].date;for(let r=1;r<t.length;r++)t[r].date<s&&(s=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t){Yl(new Do("platform-logger",e=>new HL(e),"PRIVATE")),Yl(new Do("heartbeat",e=>new CU(e),"PRIVATE")),$a(bv,YS,t),$a(bv,YS,"esm2017"),$a("fire-js","")}IU("");var DU="firebase",MU="11.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$a(DU,MU,"app");function Hw(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s}function kR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OU=kR,ER=new Dm("auth","Firebase",kR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=new zw("@firebase/auth");function LU(t,...e){Pp.logLevel<=Wt.WARN&&Pp.warn(`Auth (${dc}): ${t}`,...e)}function rp(t,...e){Pp.logLevel<=Wt.ERROR&&Pp.error(`Auth (${dc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t,...e){throw Ww(t,...e)}function qa(t,...e){return Ww(t,...e)}function Gw(t,e,s){const r=Object.assign(Object.assign({},OU()),{[e]:s});return new Dm("auth","Firebase",r).create(e,{appName:t.name})}function fa(t){return Gw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UU(t,e,s){const r=s;if(!(e instanceof r))throw r.name!==e.constructor.name&&sa(t,"argument-error"),Gw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ww(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return ER.create(t,...e)}function pt(t,e,...s){if(!t)throw Ww(e,...s)}function Ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rp(e),new Error(e)}function Li(t,e){t||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VU(){return ZS()==="http:"||ZS()==="https:"}function ZS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VU()||mL()||"connection"in navigator)?navigator.onLine:!0}function zU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,s){this.shortDelay=e,this.longDelay=s,Li(s>e,"Short delay should be less than long delay!"),this.isMobile=dL()||fL()}get(){return FU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e){Li(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qU=new Om(3e4,6e4);function un(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _n(t,e,s,r,a={}){return CR(t,a,async()=>{let i={},l={};r&&(e==="GET"?l=r:i={body:JSON.stringify(r)});const d=Mm(Object.assign({key:t.config.apiKey},l)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return hL()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&cc(t.emulatorConfig.host)&&(h.credentials="include"),TR.fetch()(await AR(t,t.config.apiHost,s,d),h)})}async function CR(t,e,s){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},BU),e);try{const a=new GU(t),i=await Promise.race([s(),a.promise]);a.clearNetworkTimeout();const l=await i.json();if("needConfirmation"in l)throw _h(t,"account-exists-with-different-credential",l);if(i.ok&&!("errorMessage"in l))return l;{const d=i.ok?l.errorMessage:l.error.message,[u,h]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw _h(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw _h(t,"user-disabled",l);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Gw(t,f,h);sa(t,f)}}catch(a){if(a instanceof si)throw a;sa(t,"network-request-failed",{message:String(a)})}}async function qo(t,e,s,r,a={}){const i=await _n(t,e,s,r,a);return"mfaPendingCredential"in i&&sa(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function AR(t,e,s,r){const a=`${e}${s}?${r}`,i=t,l=i.config.emulator?Yw(t.config,a):`${t.config.apiScheme}://${a}`;return $U.includes(s)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(l).toString():l}function HU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(qa(this.auth,"network-request-failed")),qU.get())})}}function _h(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const a=qa(t,e,r);return a.customData._tokenResponse=s,a}function ek(t){return t!==void 0&&t.enterprise!==void 0}class RR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return HU(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PR(t,e){return _n(t,"GET","/v2/recaptchaConfig",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(t,e){return _n(t,"POST","/v1/accounts:delete",e)}async function Ip(t,e){return _n(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YU(t,e=!1){const s=hs(t),r=await s.getIdToken(e),a=Kw(r);pt(a&&a.exp&&a.auth_time&&a.iat,s.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,l=i==null?void 0:i.sign_in_provider;return{claims:a,token:r,authTime:Oh(Cb(a.auth_time)),issuedAtTime:Oh(Cb(a.iat)),expirationTime:Oh(Cb(a.exp)),signInProvider:l||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Cb(t){return Number(t)*1e3}function Kw(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return rp("JWT malformed, contained fewer than 3 sections"),null;try{const a=pR(s);return a?JSON.parse(a):(rp("Failed to decode base64 JWT payload"),null)}catch(a){return rp("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function tk(t){const e=Kw(t);return pt(e,"internal-error"),pt(typeof e.exp<"u","internal-error"),pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof si&&KU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function KU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oh(this.lastLoginAt),this.creationTime=Oh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t){var e;const s=t.auth,r=await t.getIdToken(),a=await Kl(t,Ip(s,{idToken:r}));pt(a==null?void 0:a.users.length,s,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const l=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?IR(i.providerUserInfo):[],d=JU(t.providerData,l),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(d!=null&&d.length),f=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:d,metadata:new jv(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function QU(t){const e=hs(t);await Dp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JU(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function IR(t){return t.map(e=>{var{providerId:s}=e,r=Hw(e,["providerId"]);return{providerId:s,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZU(t,e){const s=await CR(t,{},async()=>{const r=Mm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,l=await AR(t,a,"/v1/token",`key=${i}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",TR.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function e8(t,e){return _n(t,"POST","/v2/accounts:revokeToken",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt(typeof e.idToken<"u","internal-error"),pt(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){pt(e.length!==0,"internal-error");const s=tk(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:a,expiresIn:i}=await ZU(e,s);this.updateTokensAndExpiration(r,a,Number(i))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:a,expirationTime:i}=s,l=new xd;return r&&(pt(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),a&&(pt(typeof a=="string","internal-error",{appName:e}),l.accessToken=a),i&&(pt(typeof i=="number","internal-error",{appName:e}),l.expirationTime=i),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xd,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e){pt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ua{constructor(e){var{uid:s,auth:r,stsTokenManager:a}=e,i=Hw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new jv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const s=await Kl(this,this.stsTokenManager.getToken(this.auth,e));return pt(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return YU(this,e)}reload(){return QU(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new ua(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await Dp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(fa(this.auth));const e=await this.getIdToken();return await Kl(this,WU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var r,a,i,l,d,u,h,f;const p=(r=s.displayName)!==null&&r!==void 0?r:void 0,x=(a=s.email)!==null&&a!==void 0?a:void 0,w=(i=s.phoneNumber)!==null&&i!==void 0?i:void 0,N=(l=s.photoURL)!==null&&l!==void 0?l:void 0,v=(d=s.tenantId)!==null&&d!==void 0?d:void 0,j=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,k=(h=s.createdAt)!==null&&h!==void 0?h:void 0,T=(f=s.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:P,emailVerified:U,isAnonymous:R,providerData:O,stsTokenManager:I}=s;pt(P&&I,e,"internal-error");const C=xd.fromJSON(this.name,I);pt(typeof P=="string",e,"internal-error"),go(p,e.name),go(x,e.name),pt(typeof U=="boolean",e,"internal-error"),pt(typeof R=="boolean",e,"internal-error"),go(w,e.name),go(N,e.name),go(v,e.name),go(j,e.name),go(k,e.name),go(T,e.name);const E=new ua({uid:P,auth:e,email:x,emailVerified:U,displayName:p,isAnonymous:R,photoURL:N,phoneNumber:w,tenantId:v,stsTokenManager:C,createdAt:k,lastLoginAt:T});return O&&Array.isArray(O)&&(E.providerData=O.map(D=>Object.assign({},D))),j&&(E._redirectEventId=j),E}static async _fromIdTokenResponse(e,s,r=!1){const a=new xd;a.updateFromServerResponse(s);const i=new ua({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Dp(i),i}static async _fromGetAccountInfoResponse(e,s,r){const a=s.users[0];pt(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?IR(a.providerUserInfo):[],l=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),d=new xd;d.updateFromIdToken(r);const u=new ua({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:l}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new jv(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new Map;function Ti(t){Li(t instanceof Function,"Expected a class definition");let e=sk.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}DR.type="NONE";const rk=DR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t,e,s){return`firebase:${t}:${e}:${s}`}class yd{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:a,name:i}=this.auth;this.fullUserKey=np(this.userKey,a.apiKey,i),this.fullPersistenceKey=np("persistence",a.apiKey,i),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await Ip(this.auth,{idToken:e}).catch(()=>{});return s?ua._fromGetAccountInfoResponse(this.auth,s,e):null}return ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new yd(Ti(rk),e,r);const a=(await Promise.all(s.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Ti(rk);const l=np(r,e.config.apiKey,e.name);let d=null;for(const h of s)try{const f=await h._get(l);if(f){let p;if(typeof f=="string"){const x=await Ip(e,{idToken:f}).catch(()=>{});if(!x)break;p=await ua._fromGetAccountInfoResponse(e,x,f)}else p=ua._fromJSON(e,f);h!==i&&(d=p),i=h;break}}catch{}const u=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new yd(i,e,r):(i=u[0],d&&await i._set(l,d.toJSON()),await Promise.all(s.map(async h=>{if(h!==i)try{await h._remove(l)}catch{}})),new yd(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FR(e))return"Blackberry";if(zR(e))return"Webos";if(OR(e))return"Safari";if((e.includes("chrome/")||LR(e))&&!e.includes("edge/"))return"Chrome";if(VR(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function MR(t=Jr()){return/firefox\//i.test(t)}function OR(t=Jr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LR(t=Jr()){return/crios\//i.test(t)}function UR(t=Jr()){return/iemobile/i.test(t)}function VR(t=Jr()){return/android/i.test(t)}function FR(t=Jr()){return/blackberry/i.test(t)}function zR(t=Jr()){return/webos/i.test(t)}function Xw(t=Jr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function t8(t=Jr()){var e;return Xw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s8(){return gL()&&document.documentMode===10}function BR(t=Jr()){return Xw(t)||VR(t)||zR(t)||FR(t)||/windows phone/i.test(t)||UR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t,e=[]){let s;switch(t){case"Browser":s=nk(Jr());break;case"Worker":s=`${nk(Jr())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${dc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=i=>new Promise((l,d)=>{try{const u=e(i);l(u)}catch(u){d(u)}});r.onAbort=s,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const a of s)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(t,e={}){return _n(t,"GET","/v2/passwordPolicy",un(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=6;class i8{constructor(e){var s,r,a,i;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=l.minPasswordLength)!==null&&s!==void 0?s:a8,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,r,a,i,l,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.containsLowercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),a&&(s.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,s,r,a){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ak(this),this.idTokenSubscription=new ak(this),this.beforeStateQueue=new r8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ER,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Ti(s)),this._initializationPromise=this.queue(async()=>{var r,a,i;if(!this._deleted&&(this.persistenceManager=await yd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await Ip(this,{idToken:e}),r=await ua._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(an(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,d=a==null?void 0:a._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===d)&&(u!=null&&u.user)&&(a=u.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Dp(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(fa(this));const s=e?hs(e):null;return s&&pt(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n8(this),s=new i8(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dm("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await e8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Ti(e)||this._popupRedirectResolver;pt(s,this,"argument-error"),this.redirectPersistenceManager=await yd.create(this,[Ti(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,a){if(this._deleted)return()=>{};const i=typeof s=="function"?s:s.next.bind(s);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(d,this,"internal-error"),d.then(()=>{l||i(this.currentUser)}),typeof s=="function"){const u=e.addObserver(s,r,a);return()=>{l=!0,u()}}else{const u=e.addObserver(s);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$R(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(s["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(s["X-Firebase-AppCheck"]=a),s}async _getAppCheckToken(){var e;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&LU(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function na(t){return hs(t)}class ak{constructor(e){this.auth=e,this.observer=null,this.addObserver=jL(s=>this.observer=s)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l8(t){_0=t}function qR(t){return _0.loadJS(t)}function c8(){return _0.recaptchaEnterpriseScript}function d8(){return _0.gapiScript}function u8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class h8{constructor(){this.enterprise=new m8}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class m8{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const f8="recaptcha-enterprise",Lh="NO_RECAPTCHA";class HR{constructor(e){this.type=f8,this.auth=na(e)}async verify(e="verify",s=!1){async function r(i){if(!s){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(l,d)=>{PR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new RR(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,l(h.siteKey)}}).catch(u=>{d(u)})})}function a(i,l,d){const u=window.grecaptcha;ek(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{l(h)}).catch(()=>{l(Lh)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new h8().execute("siteKey",{action:"verify"}):new Promise((i,l)=>{r(this.auth).then(d=>{if(!s&&ek(window.grecaptcha))a(d,i,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let u=c8();u.length!==0&&(u+=d),qR(u).then(()=>{a(d,i,l)}).catch(h=>{l(h)})}}).catch(d=>{l(d)})})}}async function ih(t,e,s,r=!1,a=!1){const i=new HR(t);let l;if(a)l=Lh;else try{l=await i.verify(s)}catch{l=await i.verify(s,!0)}const d=Object.assign({},e);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const u=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const u=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function zl(t,e,s,r,a){var i,l;if(a==="EMAIL_PASSWORD_PROVIDER")if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await ih(t,e,s,s==="getOobCode");return r(t,d)}else return r(t,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ih(t,e,s,s==="getOobCode");return r(t,u)}else return Promise.reject(d)});else if(a==="PHONE_PROVIDER")if(!((l=t._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("PHONE_PROVIDER")){const d=await ih(t,e,s);return r(t,d).catch(async u=>{var h;if(((h=t._getRecaptchaConfig())===null||h===void 0?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${s} flow.`);const f=await ih(t,e,s,!1,!0);return r(t,f)}return Promise.reject(u)})}else{const d=await ih(t,e,s,!1,!0);return r(t,d)}else return Promise.reject(a+" provider is not supported.")}async function g8(t){const e=na(t),s=await PR(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new RR(s);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new HR(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t,e){const s=j0(t,"auth");if(s.isInitialized()){const a=s.getImmediate(),i=s.getOptions();if(Mi(i,e??{}))return a;sa(a,"already-initialized")}return s.initialize({options:e})}function x8(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(Ti);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function y8(t,e,s){const r=na(t);pt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,i=GR(e),{host:l,port:d}=b8(e),u=d===null?"":`:${d}`,h={url:`${i}//${l}${u}/`},f=Object.freeze({host:l,port:d,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){pt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pt(Mi(h,r.config.emulator)&&Mi(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,cc(l)?(Gd("Auth",!0),Fw(`${i}//${l}${u}`)):v8()}function GR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function b8(t){const e=GR(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const i=a[1];return{host:i,port:ik(r.substr(i.length+1))}}else{const[i,l]=r.split(":");return{host:i,port:ik(l)}}}function ik(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function v8(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,s){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function w8(t,e){return _n(t,"POST","/v1/accounts:update",e)}async function N8(t,e){return _n(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(t,e){return qo(t,"POST","/v1/accounts:signInWithPassword",un(t,e))}async function WR(t,e){return _n(t,"POST","/v1/accounts:sendOobCode",un(t,e))}async function _8(t,e){return WR(t,e)}async function S8(t,e){return WR(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k8(t,e){return qo(t,"POST","/v1/accounts:signInWithEmailLink",un(t,e))}async function E8(t,e){return qo(t,"POST","/v1/accounts:signInWithEmailLink",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am extends S0{constructor(e,s,r,a=null){super("password",r),this._email=e,this._password=s,this._tenantId=a}static _fromEmailAndPassword(e,s){return new am(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new am(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zl(e,s,"signInWithPassword",j8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return k8(e,{email:this._email,oobCode:this._password});default:sa(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zl(e,r,"signUpPassword",N8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return E8(e,{idToken:s,email:this._email,oobCode:this._password});default:sa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(t,e){return qo(t,"POST","/v1/accounts:signInWithIdp",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8="http://localhost";class Xl extends S0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Xl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):sa("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=s,i=Hw(s,["providerId","signInMethod"]);if(!r||!a)return null;const l=new Xl(r,a);return l.idToken=i.idToken||void 0,l.accessToken=i.accessToken||void 0,l.secret=i.secret,l.nonce=i.nonce,l.pendingToken=i.pendingToken||null,l}_getIdTokenResponse(e){const s=this.buildRequest();return bd(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,bd(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,bd(e,s)}buildRequest(){const e={requestUri:T8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Mm(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,e){return _n(t,"POST","/v1/accounts:sendVerificationCode",un(t,e))}async function C8(t,e){return qo(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,e))}async function A8(t,e){const s=await qo(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,e));if(s.temporaryProof)throw _h(t,"account-exists-with-different-credential",s);return s}const R8={USER_NOT_FOUND:"user-not-found"};async function P8(t,e){const s=Object.assign(Object.assign({},e),{operation:"REAUTH"});return qo(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,s),R8)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends S0{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,s){return new Uh({verificationId:e,verificationCode:s})}static _fromTokenResponse(e,s){return new Uh({phoneNumber:e,temporaryProof:s})}_getIdTokenResponse(e){return C8(e,this._makeVerificationRequest())}_linkToIdToken(e,s){return A8(e,Object.assign({idToken:s},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return P8(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:s,verificationId:r,verificationCode:a}=this.params;return e&&s?{temporaryProof:e,phoneNumber:s}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:s,verificationCode:r,phoneNumber:a,temporaryProof:i}=e;return!r&&!s&&!a&&!i?null:new Uh({verificationId:s,verificationCode:r,phoneNumber:a,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function D8(t){const e=Nh(jh(t)).link,s=e?Nh(jh(e)).deep_link_id:null,r=Nh(jh(t)).deep_link_id;return(r?Nh(jh(r)).link:null)||r||s||e||t}class Qw{constructor(e){var s,r,a,i,l,d;const u=Nh(jh(e)),h=(s=u.apiKey)!==null&&s!==void 0?s:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=I8((a=u.mode)!==null&&a!==void 0?a:null);pt(h&&f&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(l=u.lang)!==null&&l!==void 0?l:null,this.tenantId=(d=u.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const s=D8(e);try{return new Qw(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.providerId=uc.PROVIDER_ID}static credential(e,s){return am._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=Qw.parseLink(s);return pt(r,"argument-error"),am._fromEmailAndCode(e,r.code,r.tenantId)}}uc.PROVIDER_ID="password";uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends Jw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends Lm{constructor(){super("facebook.com")}static credential(e){return Xl._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return za.credential(e.oauthAccessToken)}catch{return null}}}za.FACEBOOK_SIGN_IN_METHOD="facebook.com";za.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends Lm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Xl._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Ba.credential(s,r)}catch{return null}}}Ba.GOOGLE_SIGN_IN_METHOD="google.com";Ba.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Lm{constructor(){super("github.com")}static credential(e){return Xl._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vo.credential(e.oauthAccessToken)}catch{return null}}}vo.GITHUB_SIGN_IN_METHOD="github.com";vo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Lm{constructor(){super("twitter.com")}static credential(e,s){return Xl._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return wo.credential(s,r)}catch{return null}}}wo.TWITTER_SIGN_IN_METHOD="twitter.com";wo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M8(t,e){return qo(t,"POST","/v1/accounts:signUp",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,a=!1){const i=await ua._fromIdTokenResponse(e,r,a),l=lk(r);return new Ql({user:i,providerId:l,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const a=lk(r);return new Ql({user:e,providerId:a,_tokenResponse:r,operationType:s})}}function lk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends si{constructor(e,s,r,a){var i;super(s.code,s.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Mp.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,a){return new Mp(e,s,r,a)}}function YR(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Mp._fromErrorAndOperation(t,i,e,r):i})}async function O8(t,e,s=!1){const r=await Kl(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return Ql._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e,s=!1){const{auth:r}=t;if(an(r.app))return Promise.reject(fa(r));const a="reauthenticate";try{const i=await Kl(t,YR(r,a,e,t),s);pt(i.idToken,r,"internal-error");const l=Kw(i.idToken);pt(l,r,"internal-error");const{sub:d}=l;return pt(t.uid===d,r,"user-mismatch"),Ql._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sa(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e,s=!1){if(an(t.app))return Promise.reject(fa(t));const r="signIn",a=await YR(t,r,e),i=await Ql._fromIdTokenResponse(t,r,a);return s||await t._updateCurrentUser(i.user),i}async function QR(t,e){return XR(na(t),e)}async function L8(t,e){return KR(hs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(t){const e=na(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZR(t,e,s){const r=na(t);await zl(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",S8,"EMAIL_PASSWORD_PROVIDER")}async function eP(t,e,s){if(an(t.app))return Promise.reject(fa(t));const r=na(t),l=await zl(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",M8,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&JR(t),u}),d=await Ql._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(d.user),d}function U8(t,e,s){return an(t.app)?Promise.reject(fa(t)):QR(hs(t),uc.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JR(t),r})}async function ck(t,e){const s=hs(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await _8(s.auth,a);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V8(t,e){return _n(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _v(t,{displayName:e,photoURL:s}){if(e===void 0&&s===void 0)return;const r=hs(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:s,returnSecureToken:!0},l=await Kl(r,V8(r.auth,i));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const d=r.providerData.find(({providerId:u})=>u==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function F8(t,e){return z8(hs(t),null,e)}async function z8(t,e,s){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};s&&(i.password=s);const l=await Kl(t,w8(r,i));await t._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t,e){return hs(t).setPersistence(e)}function B8(t,e,s,r){return hs(t).onIdTokenChanged(e,s,r)}function $8(t,e,s){return hs(t).beforeAuthStateChanged(e,s)}function Sd(t,e,s,r){return hs(t).onAuthStateChanged(e,s,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e){return _n(t,"POST","/v2/accounts/mfaEnrollment:start",un(t,e))}const Op="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Op,"1"),this.storage.removeItem(Op),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=1e3,H8=10;class sP extends tP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),a=this.localCache[s];r!==a&&e(s,a,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((l,d,u)=>{this.notifyListeners(l,u)});return}const r=e.key;s?this.detachListener():this.stopPolling();const a=()=>{const l=this.storage.getItem(r);!s&&this.localCache[r]===l||this.notifyListeners(r,l)},i=this.storage.getItem(r);s8()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,H8):a()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},q8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}sP.type="LOCAL";const Zw=sP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP extends tP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}rP.type="SESSION";const E0=rP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(a=>a.isListeningto(e));if(s)return s;const r=new T0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:a,data:i}=s.data,l=this.handlersMap[a];if(!(l!=null&&l.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(l).map(async h=>h(s.origin,i)),u=await G8(d);s.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:u})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}T0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,l;return new Promise((d,u)=>{const h=eN("",20);a.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);l={messageChannel:a,onMessage(p){const x=p;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),d(x.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(l),a.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:s},[a.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(){return window}function Y8(t){Ha().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(){return typeof Ha().WorkerGlobalScope<"u"&&typeof Ha().importScripts=="function"}async function K8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function X8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Q8(){return nP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP="firebaseLocalStorageDb",J8=1,Lp="firebaseLocalStorage",iP="fbase_key";class Um{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function C0(t,e){return t.transaction([Lp],e?"readwrite":"readonly").objectStore(Lp)}function Z8(){const t=indexedDB.deleteDatabase(aP);return new Um(t).toPromise()}function Sv(){const t=indexedDB.open(aP,J8);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lp,{keyPath:iP})}catch(a){s(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lp)?e(r):(r.close(),await Z8(),e(await Sv()))})})}async function uk(t,e,s){const r=C0(t,!0).put({[iP]:e,value:s});return new Um(r).toPromise()}async function eV(t,e){const s=C0(t,!1).get(e),r=await new Um(s).toPromise();return r===void 0?null:r.value}function hk(t,e){const s=C0(t,!0).delete(e);return new Um(s).toPromise()}const tV=800,sV=3;class oP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sv(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>sV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=T0._getInstance(Q8()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await K8(),!this.activeServiceWorker)return;this.sender=new W8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((s=r[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||X8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sv();return await uk(e,Op,"1"),await hk(e,Op),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>uk(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>eV(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>hk(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=C0(a,!1).getAll();return new Um(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),s.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),s.push(a));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oP.type="LOCAL";const rV=oP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t,e){return _n(t,"POST","/v2/accounts/mfaSignIn:start",un(t,e))}new Om(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="recaptcha";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,s){this.verificationId=e,this.onConfirmation=s}confirm(e){const s=Uh._fromVerification(this.verificationId,e);return this.onConfirmation(s)}}async function aV(t,e,s){if(an(t.app))return Promise.reject(fa(t));const r=na(t),a=await iV(r,e,hs(s));return new nV(a,i=>QR(r,i))}async function iV(t,e,s){var r;if(!t._getRecaptchaConfig())try{await g8(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const i=a.session;if("phoneNumber"in a){pt(i.type==="enroll",t,"internal-error");const l={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await zl(t,l,"mfaSmsEnrollment",async(f,p)=>{if(p.phoneEnrollmentInfo.captchaResponse===Lh){pt((s==null?void 0:s.type)===ap,f,"argument-error");const x=await Ab(f,p,s);return dk(f,x)}return dk(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{pt(i.type==="signin",t,"internal-error");const l=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;pt(l,t,"missing-multi-factor-info");const d={mfaPendingCredential:i.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await zl(t,d,"mfaSmsSignIn",async(p,x)=>{if(x.phoneSignInInfo.captchaResponse===Lh){pt((s==null?void 0:s.type)===ap,p,"argument-error");const w=await Ab(p,x,s);return mk(p,w)}return mk(p,x)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await zl(t,i,"sendVerificationCode",async(h,f)=>{if(f.captchaResponse===Lh){pt((s==null?void 0:s.type)===ap,h,"argument-error");const p=await Ab(h,f,s);return ok(h,p)}return ok(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{s==null||s._reset()}}async function Ab(t,e,s){pt(s.type===ap,t,"argument-error");const r=await s.verify();pt(typeof r=="string",t,"argument-error");const a=Object.assign({},e);if("phoneEnrollmentInfo"in a){const i=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.captchaResponse,d=a.phoneEnrollmentInfo.clientType,u=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:l,clientType:d,recaptchaVersion:u}}),a}else if("phoneSignInInfo"in a){const i=a.phoneSignInInfo.captchaResponse,l=a.phoneSignInInfo.clientType,d=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:l,recaptchaVersion:d}}),a}else return Object.assign(a,{recaptchaToken:r}),a}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e){return e?Ti(e):(pt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN extends S0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bd(e,this._buildIdpRequest())}_linkToIdToken(e,s){return bd(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return bd(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function oV(t){return XR(t.auth,new tN(t),t.bypassAuthState)}function lV(t){const{auth:e,user:s}=t;return pt(s,e,"internal-error"),KR(s,new tN(t),t.bypassAuthState)}async function cV(t){const{auth:e,user:s}=t;return pt(s,e,"internal-error"),O8(s,new tN(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,s,r,a,i=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:a,tenantId:i,error:l,type:d}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:s,sessionId:r,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oV;case"linkViaPopup":case"linkViaRedirect":return cV;case"reauthViaPopup":case"reauthViaRedirect":return lV;default:sa(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=new Om(2e3,1e4);class cd extends cP{constructor(e,s,r,a,i){super(e,s,a,i),this.provider=r,this.authWindow=null,this.pollId=null,cd.currentPopupAction&&cd.currentPopupAction.cancel(),cd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=eN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(qa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if(!((r=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dV.get())};e()}}cd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV="pendingRedirect",ip=new Map;class hV extends cP{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=ip.get(this.auth._key());if(!e){try{const r=await mV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}ip.set(this.auth._key(),e)}return this.bypassAuthState||ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mV(t,e){const s=uP(e),r=dP(t);if(!await r._isAvailable())return!1;const a=await r._get(s)==="true";return await r._remove(s),a}async function fV(t,e){return dP(t)._set(uP(e),"true")}function gV(t,e){ip.set(t._key(),e)}function dP(t){return Ti(t._redirectPersistence)}function uP(t){return np(uV,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t,e,s){return pV(t,e,s)}async function pV(t,e,s){if(an(t.app))return Promise.reject(fa(t));const r=na(t);UU(t,e,Jw),await r._initializationPromise;const a=lP(r,s);return await fV(a,r),a._openRedirect(r,e,"signInViaRedirect")}async function hP(t,e){return await na(t)._initializationPromise,mP(t,e,!1)}async function mP(t,e,s=!1){if(an(t.app))return Promise.reject(fa(t));const r=na(t),a=lP(r,e),l=await new hV(r,a,s).execute();return l&&!s&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=10*60*1e3;class yV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bV(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!fP(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";s.onError(qa(this.auth,a))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xV&&this.cachedEventUids.clear(),this.cachedEventUids.has(fk(e))}saveEventToCache(e){this.cachedEventUids.add(fk(e)),this.lastProcessedEventTime=Date.now()}}function fk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(t,e={}){return _n(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NV=/^https?/;async function jV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vV(t);for(const s of e)try{if(_V(s))return}catch{}sa(t,"unauthorized-domain")}function _V(t){const e=Nv(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&l.hostname===r}if(!NV.test(s))return!1;if(wV.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=new Om(3e4,6e4);function gk(){const t=Ha().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function kV(t){return new Promise((e,s)=>{var r,a,i;function l(){gk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gk(),s(qa(t,"network-request-failed"))},timeout:SV.get()})}if(!((a=(r=Ha().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=Ha().gapi)===null||i===void 0)&&i.load)l();else{const d=u8("iframefcb");return Ha()[d]=()=>{gapi.load?l():s(qa(t,"network-request-failed"))},qR(`${d8()}?onload=${d}`).catch(u=>s(u))}}).catch(e=>{throw op=null,e})}let op=null;function EV(t){return op=op||kV(t),op}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new Om(5e3,15e3),CV="__/auth/iframe",AV="emulator/auth/iframe",RV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IV(t){const e=t.config;pt(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?Yw(e,AV):`https://${t.config.authDomain}/${CV}`,r={apiKey:e.apiKey,appName:t.name,v:dc},a=PV.get(t.config.apiHost);a&&(r.eid=a);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${s}?${Mm(r).slice(1)}`}async function DV(t){const e=await EV(t),s=Ha().gapi;return pt(s,t,"internal-error"),e.open({where:document.body,url:IV(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RV,dontclear:!0},r=>new Promise(async(a,i)=>{await r.restyle({setHideOnLeave:!1});const l=qa(t,"network-request-failed"),d=Ha().setTimeout(()=>{i(l)},TV.get());function u(){Ha().clearTimeout(d),a(r)}r.ping(u).then(u,()=>{i(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OV=500,LV=600,UV="_blank",VV="http://localhost";class pk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FV(t,e,s,r=OV,a=LV){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const u=Object.assign(Object.assign({},MV),{width:r.toString(),height:a.toString(),top:i,left:l}),h=Jr().toLowerCase();s&&(d=LR(h)?UV:s),MR(h)&&(e=e||VV,u.scrollbars="yes");const f=Object.entries(u).reduce((x,[w,N])=>`${x}${w}=${N},`,"");if(t8(h)&&d!=="_self")return zV(e||"",d),new pk(null);const p=window.open(e||"",d,f);pt(p,t,"popup-blocked");try{p.focus()}catch{}return new pk(p)}function zV(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="__/auth/handler",$V="emulator/auth/handler",qV=encodeURIComponent("fac");async function xk(t,e,s,r,a,i){pt(t.config.authDomain,t,"auth-domain-config-required"),pt(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:dc,eventId:a};if(e instanceof Jw){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",NL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))l[f]=p}if(e instanceof Lm){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(l.scopes=f.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const f of Object.keys(d))d[f]===void 0&&delete d[f];const u=await t._getAppCheckToken(),h=u?`#${qV}=${encodeURIComponent(u)}`:"";return`${HV(t)}?${Mm(d).slice(1)}${h}`}function HV({config:t}){return t.emulator?Yw(t,$V):`https://${t.authDomain}/${BV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="webStorageSupport";class GV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E0,this._completeRedirectFn=mP,this._overrideRedirectResult=gV}async _openPopup(e,s,r,a){var i;Li((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const l=await xk(e,s,r,Nv(),a);return FV(e,l,eN())}async _openRedirect(e,s,r,a){await this._originValidation(e);const i=await xk(e,s,r,Nv(),a);return Y8(i),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:a,promise:i}=this.eventManagers[s];return a?Promise.resolve(a):(Li(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await DV(e),r=new yV(e);return s.register("authEvent",a=>(pt(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Rb,{type:Rb},a=>{var i;const l=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[Rb];l!==void 0&&s(!!l),sa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=jV(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return BR()||OR()||Xw()}}const WV=GV;var yk="@firebase/auth",bk="1.10.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XV(t){Yl(new Do("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;pt(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$R(t)},h=new o8(r,a,i,u);return x8(h,s),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),Yl(new Do("auth-internal",e=>{const s=na(e.getProvider("auth").getImmediate());return(r=>new YV(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),$a(yk,bk,KV(t)),$a(yk,bk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=5*60,JV=vR("authIdTokenMaxAge")||QV;let vk=null;const ZV=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>JV)return;const a=s==null?void 0:s.token;vk!==a&&(vk=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function sN(t=qw()){const e=j0(t,"auth");if(e.isInitialized())return e.getImmediate();const s=p8(t,{popupRedirectResolver:WV,persistence:[rV,Zw,E0]}),r=vR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const l=ZV(i.toString());$8(s,l,()=>l(s.currentUser)),B8(s,d=>l(d))}}const a=xR("auth");return a?y8(s,`http://${a}`):Gd("Auth",!1),s}function e7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}l8({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const i=qa("internal-error");i.customData=a,s(i)},r.type="text/javascript",r.charset="UTF-8",e7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XV("Browser");var wk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ao,gP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,C){function E(){}E.prototype=C.prototype,I.D=C.prototype,I.prototype=new E,I.prototype.constructor=I,I.C=function(D,V,B){for(var M=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)M[Y-2]=arguments[Y];return C.prototype[V].apply(D,M)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,s),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,C,E){E||(E=0);var D=Array(16);if(typeof C=="string")for(var V=0;16>V;++V)D[V]=C.charCodeAt(E++)|C.charCodeAt(E++)<<8|C.charCodeAt(E++)<<16|C.charCodeAt(E++)<<24;else for(V=0;16>V;++V)D[V]=C[E++]|C[E++]<<8|C[E++]<<16|C[E++]<<24;C=I.g[0],E=I.g[1],V=I.g[2];var B=I.g[3],M=C+(B^E&(V^B))+D[0]+3614090360&4294967295;C=E+(M<<7&4294967295|M>>>25),M=B+(V^C&(E^V))+D[1]+3905402710&4294967295,B=C+(M<<12&4294967295|M>>>20),M=V+(E^B&(C^E))+D[2]+606105819&4294967295,V=B+(M<<17&4294967295|M>>>15),M=E+(C^V&(B^C))+D[3]+3250441966&4294967295,E=V+(M<<22&4294967295|M>>>10),M=C+(B^E&(V^B))+D[4]+4118548399&4294967295,C=E+(M<<7&4294967295|M>>>25),M=B+(V^C&(E^V))+D[5]+1200080426&4294967295,B=C+(M<<12&4294967295|M>>>20),M=V+(E^B&(C^E))+D[6]+2821735955&4294967295,V=B+(M<<17&4294967295|M>>>15),M=E+(C^V&(B^C))+D[7]+4249261313&4294967295,E=V+(M<<22&4294967295|M>>>10),M=C+(B^E&(V^B))+D[8]+1770035416&4294967295,C=E+(M<<7&4294967295|M>>>25),M=B+(V^C&(E^V))+D[9]+2336552879&4294967295,B=C+(M<<12&4294967295|M>>>20),M=V+(E^B&(C^E))+D[10]+4294925233&4294967295,V=B+(M<<17&4294967295|M>>>15),M=E+(C^V&(B^C))+D[11]+2304563134&4294967295,E=V+(M<<22&4294967295|M>>>10),M=C+(B^E&(V^B))+D[12]+1804603682&4294967295,C=E+(M<<7&4294967295|M>>>25),M=B+(V^C&(E^V))+D[13]+4254626195&4294967295,B=C+(M<<12&4294967295|M>>>20),M=V+(E^B&(C^E))+D[14]+2792965006&4294967295,V=B+(M<<17&4294967295|M>>>15),M=E+(C^V&(B^C))+D[15]+1236535329&4294967295,E=V+(M<<22&4294967295|M>>>10),M=C+(V^B&(E^V))+D[1]+4129170786&4294967295,C=E+(M<<5&4294967295|M>>>27),M=B+(E^V&(C^E))+D[6]+3225465664&4294967295,B=C+(M<<9&4294967295|M>>>23),M=V+(C^E&(B^C))+D[11]+643717713&4294967295,V=B+(M<<14&4294967295|M>>>18),M=E+(B^C&(V^B))+D[0]+3921069994&4294967295,E=V+(M<<20&4294967295|M>>>12),M=C+(V^B&(E^V))+D[5]+3593408605&4294967295,C=E+(M<<5&4294967295|M>>>27),M=B+(E^V&(C^E))+D[10]+38016083&4294967295,B=C+(M<<9&4294967295|M>>>23),M=V+(C^E&(B^C))+D[15]+3634488961&4294967295,V=B+(M<<14&4294967295|M>>>18),M=E+(B^C&(V^B))+D[4]+3889429448&4294967295,E=V+(M<<20&4294967295|M>>>12),M=C+(V^B&(E^V))+D[9]+568446438&4294967295,C=E+(M<<5&4294967295|M>>>27),M=B+(E^V&(C^E))+D[14]+3275163606&4294967295,B=C+(M<<9&4294967295|M>>>23),M=V+(C^E&(B^C))+D[3]+4107603335&4294967295,V=B+(M<<14&4294967295|M>>>18),M=E+(B^C&(V^B))+D[8]+1163531501&4294967295,E=V+(M<<20&4294967295|M>>>12),M=C+(V^B&(E^V))+D[13]+2850285829&4294967295,C=E+(M<<5&4294967295|M>>>27),M=B+(E^V&(C^E))+D[2]+4243563512&4294967295,B=C+(M<<9&4294967295|M>>>23),M=V+(C^E&(B^C))+D[7]+1735328473&4294967295,V=B+(M<<14&4294967295|M>>>18),M=E+(B^C&(V^B))+D[12]+2368359562&4294967295,E=V+(M<<20&4294967295|M>>>12),M=C+(E^V^B)+D[5]+4294588738&4294967295,C=E+(M<<4&4294967295|M>>>28),M=B+(C^E^V)+D[8]+2272392833&4294967295,B=C+(M<<11&4294967295|M>>>21),M=V+(B^C^E)+D[11]+1839030562&4294967295,V=B+(M<<16&4294967295|M>>>16),M=E+(V^B^C)+D[14]+4259657740&4294967295,E=V+(M<<23&4294967295|M>>>9),M=C+(E^V^B)+D[1]+2763975236&4294967295,C=E+(M<<4&4294967295|M>>>28),M=B+(C^E^V)+D[4]+1272893353&4294967295,B=C+(M<<11&4294967295|M>>>21),M=V+(B^C^E)+D[7]+4139469664&4294967295,V=B+(M<<16&4294967295|M>>>16),M=E+(V^B^C)+D[10]+3200236656&4294967295,E=V+(M<<23&4294967295|M>>>9),M=C+(E^V^B)+D[13]+681279174&4294967295,C=E+(M<<4&4294967295|M>>>28),M=B+(C^E^V)+D[0]+3936430074&4294967295,B=C+(M<<11&4294967295|M>>>21),M=V+(B^C^E)+D[3]+3572445317&4294967295,V=B+(M<<16&4294967295|M>>>16),M=E+(V^B^C)+D[6]+76029189&4294967295,E=V+(M<<23&4294967295|M>>>9),M=C+(E^V^B)+D[9]+3654602809&4294967295,C=E+(M<<4&4294967295|M>>>28),M=B+(C^E^V)+D[12]+3873151461&4294967295,B=C+(M<<11&4294967295|M>>>21),M=V+(B^C^E)+D[15]+530742520&4294967295,V=B+(M<<16&4294967295|M>>>16),M=E+(V^B^C)+D[2]+3299628645&4294967295,E=V+(M<<23&4294967295|M>>>9),M=C+(V^(E|~B))+D[0]+4096336452&4294967295,C=E+(M<<6&4294967295|M>>>26),M=B+(E^(C|~V))+D[7]+1126891415&4294967295,B=C+(M<<10&4294967295|M>>>22),M=V+(C^(B|~E))+D[14]+2878612391&4294967295,V=B+(M<<15&4294967295|M>>>17),M=E+(B^(V|~C))+D[5]+4237533241&4294967295,E=V+(M<<21&4294967295|M>>>11),M=C+(V^(E|~B))+D[12]+1700485571&4294967295,C=E+(M<<6&4294967295|M>>>26),M=B+(E^(C|~V))+D[3]+2399980690&4294967295,B=C+(M<<10&4294967295|M>>>22),M=V+(C^(B|~E))+D[10]+4293915773&4294967295,V=B+(M<<15&4294967295|M>>>17),M=E+(B^(V|~C))+D[1]+2240044497&4294967295,E=V+(M<<21&4294967295|M>>>11),M=C+(V^(E|~B))+D[8]+1873313359&4294967295,C=E+(M<<6&4294967295|M>>>26),M=B+(E^(C|~V))+D[15]+4264355552&4294967295,B=C+(M<<10&4294967295|M>>>22),M=V+(C^(B|~E))+D[6]+2734768916&4294967295,V=B+(M<<15&4294967295|M>>>17),M=E+(B^(V|~C))+D[13]+1309151649&4294967295,E=V+(M<<21&4294967295|M>>>11),M=C+(V^(E|~B))+D[4]+4149444226&4294967295,C=E+(M<<6&4294967295|M>>>26),M=B+(E^(C|~V))+D[11]+3174756917&4294967295,B=C+(M<<10&4294967295|M>>>22),M=V+(C^(B|~E))+D[2]+718787259&4294967295,V=B+(M<<15&4294967295|M>>>17),M=E+(B^(V|~C))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,I.g[2]=I.g[2]+V&4294967295,I.g[3]=I.g[3]+B&4294967295}r.prototype.u=function(I,C){C===void 0&&(C=I.length);for(var E=C-this.blockSize,D=this.B,V=this.h,B=0;B<C;){if(V==0)for(;B<=E;)a(this,I,B),B+=this.blockSize;if(typeof I=="string"){for(;B<C;)if(D[V++]=I.charCodeAt(B++),V==this.blockSize){a(this,D),V=0;break}}else for(;B<C;)if(D[V++]=I[B++],V==this.blockSize){a(this,D),V=0;break}}this.h=V,this.o+=C},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;var E=8*this.o;for(C=I.length-8;C<I.length;++C)I[C]=E&255,E/=256;for(this.u(I),I=Array(16),C=E=0;4>C;++C)for(var D=0;32>D;D+=8)I[E++]=this.g[C]>>>D&255;return I};function i(I,C){var E=d;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=C(I)}function l(I,C){this.h=C;for(var E=[],D=!0,V=I.length-1;0<=V;V--){var B=I[V]|0;D&&B==C||(E[V]=B,D=!1)}this.g=E}var d={};function u(I){return-128<=I&&128>I?i(I,function(C){return new l([C|0],0>C?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return j(h(-I));for(var C=[],E=1,D=0;I>=E;D++)C[D]=I/E|0,E*=4294967296;return new l(C,0)}function f(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return j(f(I.substring(1),C));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(C,8)),D=p,V=0;V<I.length;V+=8){var B=Math.min(8,I.length-V),M=parseInt(I.substring(V,V+B),C);8>B?(B=h(Math.pow(C,B)),D=D.j(B).add(h(M))):(D=D.j(E),D=D.add(h(M)))}return D}var p=u(0),x=u(1),w=u(16777216);t=l.prototype,t.m=function(){if(v(this))return-j(this).m();for(var I=0,C=1,E=0;E<this.g.length;E++){var D=this.i(E);I+=(0<=D?D:4294967296+D)*C,C*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(v(this))return"-"+j(this).toString(I);for(var C=h(Math.pow(I,6)),E=this,D="";;){var V=U(E,C).g;E=k(E,V.j(C));var B=((0<E.g.length?E.g[0]:E.h)>>>0).toString(I);if(E=V,N(E))return B+D;for(;6>B.length;)B="0"+B;D=B+D}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(var C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=k(this,I),v(I)?-1:N(I)?0:1};function j(I){for(var C=I.g.length,E=[],D=0;D<C;D++)E[D]=~I.g[D];return new l(E,~I.h).add(x)}t.abs=function(){return v(this)?j(this):this},t.add=function(I){for(var C=Math.max(this.g.length,I.g.length),E=[],D=0,V=0;V<=C;V++){var B=D+(this.i(V)&65535)+(I.i(V)&65535),M=(B>>>16)+(this.i(V)>>>16)+(I.i(V)>>>16);D=M>>>16,B&=65535,M&=65535,E[V]=M<<16|B}return new l(E,E[E.length-1]&-2147483648?-1:0)};function k(I,C){return I.add(j(C))}t.j=function(I){if(N(this)||N(I))return p;if(v(this))return v(I)?j(this).j(j(I)):j(j(this).j(I));if(v(I))return j(this.j(j(I)));if(0>this.l(w)&&0>I.l(w))return h(this.m()*I.m());for(var C=this.g.length+I.g.length,E=[],D=0;D<2*C;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(var V=0;V<I.g.length;V++){var B=this.i(D)>>>16,M=this.i(D)&65535,Y=I.i(V)>>>16,Q=I.i(V)&65535;E[2*D+2*V]+=M*Q,T(E,2*D+2*V),E[2*D+2*V+1]+=B*Q,T(E,2*D+2*V+1),E[2*D+2*V+1]+=M*Y,T(E,2*D+2*V+1),E[2*D+2*V+2]+=B*Y,T(E,2*D+2*V+2)}for(D=0;D<C;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=C;D<2*C;D++)E[D]=0;return new l(E,0)};function T(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function P(I,C){this.g=I,this.h=C}function U(I,C){if(N(C))throw Error("division by zero");if(N(I))return new P(p,p);if(v(I))return C=U(j(I),C),new P(j(C.g),j(C.h));if(v(C))return C=U(I,j(C)),new P(j(C.g),C.h);if(30<I.g.length){if(v(I)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var E=x,D=C;0>=D.l(I);)E=R(E),D=R(D);var V=O(E,1),B=O(D,1);for(D=O(D,2),E=O(E,2);!N(D);){var M=B.add(D);0>=M.l(I)&&(V=V.add(E),B=M),D=O(D,1),E=O(E,1)}return C=k(I,V.j(C)),new P(V,C)}for(V=p;0<=I.l(C);){for(E=Math.max(1,Math.floor(I.m()/C.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),B=h(E),M=B.j(C);v(M)||0<M.l(I);)E-=D,B=h(E),M=B.j(C);N(B)&&(B=x),V=V.add(B),I=k(I,M)}return new P(V,I)}t.A=function(I){return U(this,I).h},t.and=function(I){for(var C=Math.max(this.g.length,I.g.length),E=[],D=0;D<C;D++)E[D]=this.i(D)&I.i(D);return new l(E,this.h&I.h)},t.or=function(I){for(var C=Math.max(this.g.length,I.g.length),E=[],D=0;D<C;D++)E[D]=this.i(D)|I.i(D);return new l(E,this.h|I.h)},t.xor=function(I){for(var C=Math.max(this.g.length,I.g.length),E=[],D=0;D<C;D++)E[D]=this.i(D)^I.i(D);return new l(E,this.h^I.h)};function R(I){for(var C=I.g.length+1,E=[],D=0;D<C;D++)E[D]=I.i(D)<<1|I.i(D-1)>>>31;return new l(E,I.h)}function O(I,C){var E=C>>5;C%=32;for(var D=I.g.length-E,V=[],B=0;B<D;B++)V[B]=0<C?I.i(B+E)>>>C|I.i(B+E+1)<<32-C:I.i(B+E);return new l(V,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gP=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=f,Ao=l}).apply(typeof wk<"u"?wk:typeof self<"u"?self:typeof window<"u"?window:{});var wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pP,Sh,xP,lp,kv,yP,bP,vP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,A,L){return y==Array.prototype||y==Object.prototype||(y[A]=L.value),y};function s(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof wg=="object"&&wg];for(var A=0;A<y.length;++A){var L=y[A];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=s(this);function a(y,A){if(A)e:{var L=r;y=y.split(".");for(var q=0;q<y.length-1;q++){var oe=y[q];if(!(oe in L))break e;L=L[oe]}y=y[y.length-1],q=L[y],A=A(q),A!=q&&A!=null&&e(L,y,{configurable:!0,writable:!0,value:A})}}function i(y,A){y instanceof String&&(y+="");var L=0,q=!1,oe={next:function(){if(!q&&L<y.length){var pe=L++;return{value:A(pe,y[pe]),done:!1}}return q=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}a("Array.prototype.values",function(y){return y||function(){return i(this,function(A,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function u(y){var A=typeof y;return A=A!="object"?A:y?Array.isArray(y)?"array":A:"null",A=="array"||A=="object"&&typeof y.length=="number"}function h(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function f(y,A,L){return y.call.apply(y.bind,arguments)}function p(y,A,L){if(!y)throw Error();if(2<arguments.length){var q=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,q),y.apply(A,oe)}}return function(){return y.apply(A,arguments)}}function x(y,A,L){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,x.apply(null,arguments)}function w(y,A){var L=Array.prototype.slice.call(arguments,1);return function(){var q=L.slice();return q.push.apply(q,arguments),y.apply(this,q)}}function N(y,A){function L(){}L.prototype=A.prototype,y.aa=A.prototype,y.prototype=new L,y.prototype.constructor=y,y.Qb=function(q,oe,pe){for(var $e=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)$e[Xt-2]=arguments[Xt];return A.prototype[oe].apply(q,$e)}}function v(y){const A=y.length;if(0<A){const L=Array(A);for(let q=0;q<A;q++)L[q]=y[q];return L}return[]}function j(y,A){for(let L=1;L<arguments.length;L++){const q=arguments[L];if(u(q)){const oe=y.length||0,pe=q.length||0;y.length=oe+pe;for(let $e=0;$e<pe;$e++)y[oe+$e]=q[$e]}else y.push(q)}}class k{constructor(A,L){this.i=A,this.j=L,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function T(y){return/^[\s\xa0]*$/.test(y)}function P(){var y=d.navigator;return y&&(y=y.userAgent)?y:""}function U(y){return U[" "](y),y}U[" "]=function(){};var R=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function O(y,A,L){for(const q in y)A.call(L,y[q],q,y)}function I(y,A){for(const L in y)A.call(void 0,y[L],L,y)}function C(y){const A={};for(const L in y)A[L]=y[L];return A}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(y,A){let L,q;for(let oe=1;oe<arguments.length;oe++){q=arguments[oe];for(L in q)y[L]=q[L];for(let pe=0;pe<E.length;pe++)L=E[pe],Object.prototype.hasOwnProperty.call(q,L)&&(y[L]=q[L])}}function V(y){var A=1;y=y.split(":");const L=[];for(;0<A&&y.length;)L.push(y.shift()),A--;return y.length&&L.push(y.join(":")),L}function B(y){d.setTimeout(()=>{throw y},0)}function M(){var y=ge;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class Y{constructor(){this.h=this.g=null}add(A,L){const q=Q.get();q.set(A,L),this.h?this.h.next=q:this.g=q,this.h=q}}var Q=new k(()=>new H,y=>y.reset());class H{constructor(){this.next=this.g=this.h=null}set(A,L){this.h=A,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let W,de=!1,ge=new Y,z=()=>{const y=d.Promise.resolve(void 0);W=()=>{y.then(G)}};var G=()=>{for(var y;y=M();){try{y.h.call(y.g)}catch(L){B(L)}var A=Q;A.j(y),100>A.h&&(A.h++,y.next=A.g,A.g=y)}de=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const L=()=>{};d.addEventListener("test",L,A),d.removeEventListener("test",L,A)}catch{}return y}();function ze(y,A){if(re.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var L=this.type=y.type,q=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget){if(R){e:{try{U(A.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(A=null)}}else L=="mouseover"?A=y.fromElement:L=="mouseout"&&(A=y.toElement);this.relatedTarget=A,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:me[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&ze.aa.h.call(this)}}N(ze,re);var me={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),ve=0;function Z(y,A,L,q,oe){this.listener=y,this.proxy=null,this.src=A,this.type=L,this.capture=!!q,this.ha=oe,this.key=++ve,this.da=this.fa=!1}function Se(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Te(y){this.src=y,this.g={},this.h=0}Te.prototype.add=function(y,A,L,q,oe){var pe=y.toString();y=this.g[pe],y||(y=this.g[pe]=[],this.h++);var $e=Oe(y,A,q,oe);return-1<$e?(A=y[$e],L||(A.fa=!1)):(A=new Z(A,this.src,pe,!!q,oe),A.fa=L,y.push(A)),A};function te(y,A){var L=A.type;if(L in y.g){var q=y.g[L],oe=Array.prototype.indexOf.call(q,A,void 0),pe;(pe=0<=oe)&&Array.prototype.splice.call(q,oe,1),pe&&(Se(A),y.g[L].length==0&&(delete y.g[L],y.h--))}}function Oe(y,A,L,q){for(var oe=0;oe<y.length;++oe){var pe=y[oe];if(!pe.da&&pe.listener==A&&pe.capture==!!L&&pe.ha==q)return oe}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),qe={};function Ve(y,A,L,q,oe){if(Array.isArray(A)){for(var pe=0;pe<A.length;pe++)Ve(y,A[pe],L,q,oe);return null}return L=it(L),y&&y[Ce]?y.K(A,L,h(q)?!!q.capture:!1,oe):Xe(y,A,L,!1,q,oe)}function Xe(y,A,L,q,oe,pe){if(!A)throw Error("Invalid event type");var $e=h(oe)?!!oe.capture:!!oe,Xt=xt(y);if(Xt||(y[Ae]=Xt=new Te(y)),L=Xt.add(A,L,q,$e,pe),L.proxy)return L;if(q=Et(),L.proxy=q,q.src=y,q.listener=L,y.addEventListener)xe||(oe=$e),oe===void 0&&(oe=!1),y.addEventListener(A.toString(),q,oe);else if(y.attachEvent)y.attachEvent(It(A.toString()),q);else if(y.addListener&&y.removeListener)y.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Et(){function y(L){return A.call(y.src,y.listener,L)}const A=lt;return y}function Qe(y,A,L,q,oe){if(Array.isArray(A))for(var pe=0;pe<A.length;pe++)Qe(y,A[pe],L,q,oe);else q=h(q)?!!q.capture:!!q,L=it(L),y&&y[Ce]?(y=y.i,A=String(A).toString(),A in y.g&&(pe=y.g[A],L=Oe(pe,L,q,oe),-1<L&&(Se(pe[L]),Array.prototype.splice.call(pe,L,1),pe.length==0&&(delete y.g[A],y.h--)))):y&&(y=xt(y))&&(A=y.g[A.toString()],y=-1,A&&(y=Oe(A,L,q,oe)),(L=-1<y?A[y]:null)&&nt(L))}function nt(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[Ce])te(A.i,y);else{var L=y.type,q=y.proxy;A.removeEventListener?A.removeEventListener(L,q,y.capture):A.detachEvent?A.detachEvent(It(L),q):A.addListener&&A.removeListener&&A.removeListener(q),(L=xt(A))?(te(L,y),L.h==0&&(L.src=null,A[Ae]=null)):Se(y)}}}function It(y){return y in qe?qe[y]:qe[y]="on"+y}function lt(y,A){if(y.da)y=!0;else{A=new ze(A,this);var L=y.listener,q=y.ha||y.src;y.fa&&nt(y),y=L.call(q,A)}return y}function xt(y){return y=y[Ae],y instanceof Te?y:null}var ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(y){return typeof y=="function"?y:(y[ct]||(y[ct]=function(A){return y.handleEvent(A)}),y[ct])}function Je(){X.call(this),this.i=new Te(this),this.M=this,this.F=null}N(Je,X),Je.prototype[Ce]=!0,Je.prototype.removeEventListener=function(y,A,L,q){Qe(this,y,A,L,q)};function Ye(y,A){var L,q=y.F;if(q)for(L=[];q;q=q.F)L.push(q);if(y=y.M,q=A.type||A,typeof A=="string")A=new re(A,y);else if(A instanceof re)A.target=A.target||y;else{var oe=A;A=new re(q,y),D(A,oe)}if(oe=!0,L)for(var pe=L.length-1;0<=pe;pe--){var $e=A.g=L[pe];oe=Ze($e,q,!0,A)&&oe}if($e=A.g=y,oe=Ze($e,q,!0,A)&&oe,oe=Ze($e,q,!1,A)&&oe,L)for(pe=0;pe<L.length;pe++)$e=A.g=L[pe],oe=Ze($e,q,!1,A)&&oe}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var y=this.i,A;for(A in y.g){for(var L=y.g[A],q=0;q<L.length;q++)Se(L[q]);delete y.g[A],y.h--}}this.F=null},Je.prototype.K=function(y,A,L,q){return this.i.add(String(y),A,!1,L,q)},Je.prototype.L=function(y,A,L,q){return this.i.add(String(y),A,!0,L,q)};function Ze(y,A,L,q){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();for(var oe=!0,pe=0;pe<A.length;++pe){var $e=A[pe];if($e&&!$e.da&&$e.capture==L){var Xt=$e.listener,lr=$e.ha||$e.src;$e.fa&&te(y.i,$e),oe=Xt.call(lr,q)!==!1&&oe}}return oe&&!q.defaultPrevented}function ut(y,A,L){if(typeof y=="function")L&&(y=x(y,L));else if(y&&typeof y.handleEvent=="function")y=x(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:d.setTimeout(y,A||0)}function je(y){y.g=ut(()=>{y.g=null,y.i&&(y.i=!1,je(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class He extends X{constructor(A,L){super(),this.m=A,this.l=L,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(y){X.call(this),this.h=y,this.g={}}N(mt,X);var Dt=[];function Fe(y){O(y.g,function(A,L){this.g.hasOwnProperty(L)&&nt(A)},y),y.g={}}mt.prototype.N=function(){mt.aa.N.call(this),Fe(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dt=d.JSON.stringify,Nt=d.JSON.parse,Kt=class{stringify(y){return d.JSON.stringify(y,void 0)}parse(y){return d.JSON.parse(y,void 0)}};function Qs(){}Qs.prototype.h=null;function Er(y){return y.h||(y.h=y.i())}function Rs(){}var ks={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ns(){re.call(this,"d")}N(ns,re);function Zr(){re.call(this,"c")}N(Zr,re);var as={},pr=null;function Ps(){return pr=pr||new Je}as.La="serverreachability";function zr(y){re.call(this,as.La,y)}N(zr,re);function xr(y){const A=Ps();Ye(A,new zr(A))}as.STAT_EVENT="statevent";function ae(y,A){re.call(this,as.STAT_EVENT,y),this.stat=A}N(ae,re);function ee(y){const A=Ps();Ye(A,new ae(A,y))}as.Ma="timingevent";function ye(y,A){re.call(this,as.Ma,y),this.size=A}N(ye,re);function Ee(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){y()},A)}function Ke(){this.g=!0}Ke.prototype.xa=function(){this.g=!1};function tt(y,A,L,q,oe,pe){y.info(function(){if(y.g)if(pe)for(var $e="",Xt=pe.split("&"),lr=0;lr<Xt.length;lr++){var Qt=Xt[lr].split("=");if(1<Qt.length){var vr=Qt[0];Qt=Qt[1];var cr=vr.split("_");$e=2<=cr.length&&cr[1]=="type"?$e+(vr+"="+Qt+"&"):$e+(vr+"=redacted&")}}else $e=null;else $e=pe;return"XMLHTTP REQ ("+q+") [attempt "+oe+"]: "+A+`
`+L+`
`+$e})}function Mt(y,A,L,q,oe,pe,$e){y.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+oe+"]: "+A+`
`+L+`
`+pe+" "+$e})}function is(y,A,L,q){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+Sn(y,L)+(q?" "+q:"")})}function Hs(y,A){y.info(function(){return"TIMEOUT: "+A})}Ke.prototype.info=function(){};function Sn(y,A){if(!y.g)return A;if(!A)return null;try{var L=JSON.parse(A);if(L){for(y=0;y<L.length;y++)if(Array.isArray(L[y])){var q=L[y];if(!(2>q.length)){var oe=q[1];if(Array.isArray(oe)&&!(1>oe.length)){var pe=oe[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(var $e=1;$e<oe.length;$e++)oe[$e]=""}}}}return dt(L)}catch{return A}}var en={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Js={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yr;function Tr(){}N(Tr,Qs),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},yr=new Tr;function Cr(y,A,L,q){this.j=y,this.i=A,this.l=L,this.R=q||1,this.U=new mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Is}function Is(){this.i=null,this.g="",this.h=!1}var $i={},qi={};function kn(y,A,L){y.L=1,y.v=tl(En(A)),y.m=L,y.P=!0,Fn(y,null)}function Fn(y,A){y.F=Date.now(),wa(y),y.A=En(y.v);var L=y.A,q=y.R;Array.isArray(q)||(q=[String(q)]),cu(L.i,"t",q),y.C=0,L=y.j.J,y.h=new Is,y.g=gf(y.j,L?A:null,!y.m),0<y.O&&(y.M=new He(x(y.Y,y,y.g),y.O)),A=y.U,L=y.g,q=y.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(Dt[0]=oe.toString()),oe=Dt);for(var pe=0;pe<oe.length;pe++){var $e=Ve(L,oe[pe],q||A.handleEvent,!1,A.h||A);if(!$e)break;A.g[$e.key]=$e}A=y.H?C(y.H):{},y.m?(y.u||(y.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,A)):(y.u="GET",y.g.ea(y.A,y.u,null,A)),xr(),tt(y.i,y.u,y.A,y.l,y.R,y.m)}Cr.prototype.ca=function(y){y=y.target;const A=this.M;A&&qn(y)==3?A.j():this.Y(y)},Cr.prototype.Y=function(y){try{if(y==this.g)e:{const cr=qn(this.g);var A=this.g.Ba();const ci=this.g.Z();if(!(3>cr)&&(cr!=3||this.g&&(this.h.h||this.g.oa()||of(this.g)))){this.J||cr!=4||A==7||(A==8||0>=ci?xr(3):xr(2)),ne(this);var L=this.g.Z();this.X=L;t:if(Ko(this)){var q=of(this.g);y="";var oe=q.length,pe=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Le(this),Ie(this);var $e="";break t}this.h.i=new d.TextDecoder}for(A=0;A<oe;A++)this.h.h=!0,y+=this.h.i.decode(q[A],{stream:!(pe&&A==oe-1)});q.length=0,this.h.g+=y,this.C=0,$e=this.h.g}else $e=this.g.oa();if(this.o=L==200,Mt(this.i,this.u,this.A,this.l,this.R,cr,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Xt,lr=this.g;if((Xt=lr.g?lr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Xt)){var Qt=Xt;break t}}Qt=null}if(L=Qt)is(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rt(this,L);else{this.o=!1,this.s=3,ee(12),Le(this),Ie(this);break e}}if(this.P){L=!0;let Rr;for(;!this.J&&this.C<$e.length;)if(Rr=Xo(this,$e),Rr==qi){cr==4&&(this.s=4,ee(14),L=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==$i){this.s=4,ee(15),is(this.i,this.l,$e,"[Invalid Chunk]"),L=!1;break}else is(this.i,this.l,Rr,null),rt(this,Rr);if(Ko(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cr!=4||$e.length!=0||this.h.h||(this.s=1,ee(16),L=!1),this.o=this.o&&L,!L)is(this.i,this.l,$e,"[Invalid Chunked Response]"),Le(this),Ie(this);else if(0<$e.length&&!this.W){this.W=!0;var vr=this.j;vr.g==this&&vr.ba&&!vr.M&&(vr.j.info("Great, no buffering proxy detected. Bytes received: "+$e.length),cl(vr),vr.M=!0,ee(11))}}else is(this.i,this.l,$e,null),rt(this,$e);cr==4&&Le(this),this.o&&!this.J&&(cr==4?hf(this.j,this):(this.o=!1,wa(this)))}else _x(this.g),L==400&&0<$e.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),Le(this),Ie(this)}}}catch{}finally{}};function Ko(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Xo(y,A){var L=y.C,q=A.indexOf(`
`,L);return q==-1?qi:(L=Number(A.substring(L,q)),isNaN(L)?$i:(q+=1,q+L>A.length?qi:(A=A.slice(q,q+L),y.C=q+L,A)))}Cr.prototype.cancel=function(){this.J=!0,Le(this)};function wa(y){y.S=Date.now()+y.I,Qo(y,y.I)}function Qo(y,A){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Ee(x(y.ba,y),A)}function ne(y){y.B&&(d.clearTimeout(y.B),y.B=null)}Cr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Hs(this.i,this.A),this.L!=2&&(xr(),ee(17)),Le(this),this.s=2,Ie(this)):Qo(this,this.S-y)};function Ie(y){y.j.G==0||y.J||hf(y.j,y)}function Le(y){ne(y);var A=y.M;A&&typeof A.ma=="function"&&A.ma(),y.M=null,Fe(y.U),y.g&&(A=y.g,y.g=null,A.abort(),A.ma())}function rt(y,A){try{var L=y.j;if(L.G!=0&&(L.g==y||Br(L.h,y))){if(!y.K&&Br(L.h,y)&&L.G==3){try{var q=L.Da.g.parse(A)}catch{q=null}if(Array.isArray(q)&&q.length==3){var oe=q;if(oe[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<y.F)Ec(L),Sc(L);else break e;fu(L),ee(18)}}else L.za=oe[1],0<L.za-L.T&&37500>oe[2]&&L.F&&L.v==0&&!L.C&&(L.C=Ee(x(L.Za,L),6e3));if(1>=$t(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else li(L,11)}else if((y.K||L.g==y)&&Ec(L),!T(A))for(oe=L.Da.g.parse(A),A=0;A<oe.length;A++){let Qt=oe[A];if(L.T=Qt[0],Qt=Qt[1],L.G==2)if(Qt[0]=="c"){L.K=Qt[1],L.ia=Qt[2];const vr=Qt[3];vr!=null&&(L.la=vr,L.j.info("VER="+L.la));const cr=Qt[4];cr!=null&&(L.Aa=cr,L.j.info("SVER="+L.Aa));const ci=Qt[5];ci!=null&&typeof ci=="number"&&0<ci&&(q=1.5*ci,L.L=q,L.j.info("backChannelRequestTimeoutMs_="+q)),q=L;const Rr=y.g;if(Rr){const Ta=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var pe=q.h;pe.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(aa(pe,pe.h),pe.h=null))}if(q.D){const pu=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;pu&&(q.ya=pu,xs(q.I,q.D,pu))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-y.F,L.j.info("Handshake RTT: "+L.R+"ms")),q=L;var $e=y;if(q.qa=ff(q,q.J?q.ia:null,q.W),$e.K){Ar(q.h,$e);var Xt=$e,lr=q.L;lr&&(Xt.I=lr),Xt.B&&(ne(Xt),wa(Xt)),q.g=$e}else df(q);0<L.i.length&&kc(L)}else Qt[0]!="stop"&&Qt[0]!="close"||li(L,7);else L.G==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?li(L,7):hu(L):Qt[0]!="noop"&&L.l&&L.l.ta(Qt),L.v=0)}}xr(4)}catch{}}var Tt=class{constructor(y,A){this.g=y,this.map=A}};function ft(y){this.l=y||10,d.PerformanceNavigationTiming?(y=d.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ot(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function $t(y){return y.h?1:y.g?y.g.size:0}function Br(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function aa(y,A){y.g?y.g.add(A):y.h=A}function Ar(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}ft.prototype.cancel=function(){if(this.i=Jo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Jo(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const L of y.g.values())A=A.concat(L.D);return A}return v(y.i)}function yc(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(u(y)){for(var A=[],L=y.length,q=0;q<L;q++)A.push(y[q]);return A}A=[],L=0;for(q in y)A[L++]=y[q];return A}function bc(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(u(y)||typeof y=="string"){var A=[];y=y.length;for(var L=0;L<y;L++)A.push(L);return A}A=[],L=0;for(const q in y)A[L++]=q;return A}}}function iu(y,A){if(y.forEach&&typeof y.forEach=="function")y.forEach(A,void 0);else if(u(y)||typeof y=="string")Array.prototype.forEach.call(y,A,void 0);else for(var L=bc(y),q=yc(y),oe=q.length,pe=0;pe<oe;pe++)A.call(void 0,q[pe],L&&L[pe],y)}var Zo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wx(y,A){if(y){y=y.split("&");for(var L=0;L<y.length;L++){var q=y[L].indexOf("="),oe=null;if(0<=q){var pe=y[L].substring(0,q);oe=y[L].substring(q+1)}else pe=y[L];A(pe,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function Zs(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Zs){this.h=y.h,el(this,y.j),this.o=y.o,this.g=y.g,Hi(this,y.s),this.l=y.l;var A=y.i,L=new ni;L.i=A.i,A.g&&(L.g=new Map(A.g),L.h=A.h),ri(this,L),this.m=y.m}else y&&(A=String(y).match(Zo))?(this.h=!1,el(this,A[1]||"",!0),this.o=zn(A[2]||""),this.g=zn(A[3]||"",!0),Hi(this,A[4]),this.l=zn(A[5]||"",!0),ri(this,A[6]||"",!0),this.m=zn(A[7]||"")):(this.h=!1,this.i=new ni(null,this.h))}Zs.prototype.toString=function(){var y=[],A=this.j;A&&y.push(sl(A,ou,!0),":");var L=this.g;return(L||A=="file")&&(y.push("//"),(A=this.o)&&y.push(sl(A,ou,!0),"@"),y.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&y.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&y.push("/"),y.push(sl(L,L.charAt(0)=="/"?Nx:lu,!0))),(L=this.i.toString())&&y.push("?",L),(L=this.m)&&y.push("#",sl(L,vc)),y.join("")};function En(y){return new Zs(y)}function el(y,A,L){y.j=L?zn(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function Hi(y,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);y.s=A}else y.s=null}function ri(y,A,L){A instanceof ni?(y.i=A,nf(y.i,y.h)):(L||(A=sl(A,jx)),y.i=new ni(A,y.h))}function xs(y,A,L){y.i.set(A,L)}function tl(y){return xs(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function zn(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function sl(y,A,L){return typeof y=="string"?(y=encodeURI(y).replace(A,rf),L&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function rf(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var ou=/[#\/\?@]/g,lu=/[#\?:]/g,Nx=/[#\?]/g,jx=/[#\?@]/g,vc=/#/g;function ni(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function Bn(y){y.g||(y.g=new Map,y.h=0,y.i&&wx(y.i,function(A,L){y.add(decodeURIComponent(A.replace(/\+/g," ")),L)}))}t=ni.prototype,t.add=function(y,A){Bn(this),this.i=null,y=Na(this,y);var L=this.g.get(y);return L||this.g.set(y,L=[]),L.push(A),this.h+=1,this};function ai(y,A){Bn(y),A=Na(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function ii(y,A){return Bn(y),A=Na(y,A),y.g.has(A)}t.forEach=function(y,A){Bn(this),this.g.forEach(function(L,q){L.forEach(function(oe){y.call(A,oe,q,this)},this)},this)},t.na=function(){Bn(this);const y=Array.from(this.g.values()),A=Array.from(this.g.keys()),L=[];for(let q=0;q<A.length;q++){const oe=y[q];for(let pe=0;pe<oe.length;pe++)L.push(A[q])}return L},t.V=function(y){Bn(this);let A=[];if(typeof y=="string")ii(this,y)&&(A=A.concat(this.g.get(Na(this,y))));else{y=Array.from(this.g.values());for(let L=0;L<y.length;L++)A=A.concat(y[L])}return A},t.set=function(y,A){return Bn(this),this.i=null,y=Na(this,y),ii(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},t.get=function(y,A){return y?(y=this.V(y),0<y.length?String(y[0]):A):A};function cu(y,A,L){ai(y,A),0<L.length&&(y.i=null,y.g.set(Na(y,A),v(L)),y.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(var L=0;L<A.length;L++){var q=A[L];const pe=encodeURIComponent(String(q)),$e=this.V(q);for(q=0;q<$e.length;q++){var oe=pe;$e[q]!==""&&(oe+="="+encodeURIComponent(String($e[q]))),y.push(oe)}}return this.i=y.join("&")};function Na(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function nf(y,A){A&&!y.j&&(Bn(y),y.i=null,y.g.forEach(function(L,q){var oe=q.toLowerCase();q!=oe&&(ai(this,q),cu(this,oe,L))},y)),y.j=A}function rl(y,A){const L=new Ke;if(d.Image){const q=new Image;q.onload=w($n,L,"TestLoadImage: loaded",!0,A,q),q.onerror=w($n,L,"TestLoadImage: error",!1,A,q),q.onabort=w($n,L,"TestLoadImage: abort",!1,A,q),q.ontimeout=w($n,L,"TestLoadImage: timeout",!1,A,q),d.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=y}else A(!1)}function ia(y,A){const L=new Ke,q=new AbortController,oe=setTimeout(()=>{q.abort(),$n(L,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:q.signal}).then(pe=>{clearTimeout(oe),pe.ok?$n(L,"TestPingServer: ok",!0,A):$n(L,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(oe),$n(L,"TestPingServer: error",!1,A)})}function $n(y,A,L,q,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),q(L)}catch{}}function nl(){this.g=new Kt}function ja(y,A,L){const q=L||"";try{iu(y,function(oe,pe){let $e=oe;h(oe)&&($e=dt(oe)),A.push(q+pe+"="+encodeURIComponent($e))})}catch(oe){throw A.push(q+"type="+encodeURIComponent("_badmap")),oe}}function Gi(y){this.l=y.Ub||null,this.j=y.eb||!1}N(Gi,Qs),Gi.prototype.g=function(){return new oi(this.l,this.j)},Gi.prototype.i=function(y){return function(){return y}}({});function oi(y,A){Je.call(this),this.D=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(oi,Je),t=oi.prototype,t.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=A,this.readyState=1,Sa(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(A.body=y),(this.D||d).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_a(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Sa(this)),this.g&&(this.readyState=3,Sa(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;du(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function du(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?_a(this):Sa(this),this.readyState==3&&du(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,_a(this))},t.Qa=function(y){this.g&&(this.response=y,_a(this))},t.ga=function(){this.g&&_a(this)};function _a(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Sa(y)}t.setRequestHeader=function(y,A){this.u.append(y,A)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var L=A.next();!L.done;)L=L.value,y.push(L[0]+": "+L[1]),L=A.next();return y.join(`\r
`)};function Sa(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function uu(y){let A="";return O(y,function(L,q){A+=q,A+=":",A+=L,A+=`\r
`}),A}function br(y,A,L){e:{for(q in L){var q=!1;break e}q=!0}q||(L=uu(L),typeof y=="string"?L!=null&&encodeURIComponent(String(L)):xs(y,A,L))}function cs(y){Je.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(cs,Je);var wc=/^https?$/i,al=["POST","PUT"];t=cs.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,A,L,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yr.g(),this.v=this.o?Er(this.o):Er(yr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(pe){af(this,pe);return}if(y=L||"",L=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var oe in q)L.set(oe,q[oe]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const pe of q.keys())L.set(pe,q.get(pe));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(L.keys()).find(pe=>pe.toLowerCase()=="content-type"),oe=d.FormData&&y instanceof d.FormData,!(0<=Array.prototype.indexOf.call(al,A,void 0))||q||oe||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,$e]of L)this.g.setRequestHeader(pe,$e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{il(this),this.u=!0,this.g.send(y),this.u=!1}catch(pe){af(this,pe)}};function af(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.m=5,Nc(y),ka(y)}function Nc(y){y.A||(y.A=!0,Ye(y,"complete"),Ye(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Ye(this,"complete"),Ye(this,"abort"),ka(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ka(this,!0)),cs.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jc(this):this.bb())},t.bb=function(){jc(this)};function jc(y){if(y.h&&typeof l<"u"&&(!y.v[1]||qn(y)!=4||y.Z()!=2)){if(y.u&&qn(y)==4)ut(y.Ea,0,y);else if(Ye(y,"readystatechange"),qn(y)==4){y.h=!1;try{const $e=y.Z();e:switch($e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var L;if(!(L=A)){var q;if(q=$e===0){var oe=String(y.D).match(Zo)[1]||null;!oe&&d.self&&d.self.location&&(oe=d.self.location.protocol.slice(0,-1)),q=!wc.test(oe?oe.toLowerCase():"")}L=q}if(L)Ye(y,"complete"),Ye(y,"success");else{y.m=6;try{var pe=2<qn(y)?y.g.statusText:""}catch{pe=""}y.l=pe+" ["+y.Z()+"]",Nc(y)}}finally{ka(y)}}}}function ka(y,A){if(y.g){il(y);const L=y.g,q=y.v[0]?()=>{}:null;y.g=null,y.v=null,A||Ye(y,"ready");try{L.onreadystatechange=q}catch{}}}function il(y){y.I&&(d.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function qn(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),Nt(A)}};function of(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function _x(y){const A={};y=(y.g&&2<=qn(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<y.length;q++){if(T(y[q]))continue;var L=V(y[q]);const oe=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const pe=A[oe]||[];A[oe]=pe,pe.push(L)}I(A,function(q){return q.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ol(y,A,L){return L&&L.internalChannelParams&&L.internalChannelParams[y]||A}function _c(y){this.Aa=0,this.i=[],this.j=new Ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,y),this.cb=ol("retryDelaySeedMs",1e4,y),this.Wa=ol("forwardChannelMaxRetries",2,y),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new ft(y&&y.concurrentRequestLimit),this.Da=new nl,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_c.prototype,t.la=8,t.G=1,t.connect=function(y,A,L,q){ee(0),this.W=y,this.H=A||{},L&&q!==void 0&&(this.H.OSID=L,this.H.OAID=q),this.F=this.X,this.I=ff(this,null,this.W),kc(this)};function hu(y){if(lf(y),y.G==3){var A=y.U++,L=En(y.I);if(xs(L,"SID",y.K),xs(L,"RID",A),xs(L,"TYPE","terminate"),ll(y,L),A=new Cr(y,y.j,A),A.L=2,A.v=tl(En(L)),L=!1,d.navigator&&d.navigator.sendBeacon)try{L=d.navigator.sendBeacon(A.v.toString(),"")}catch{}!L&&d.Image&&(new Image().src=A.v,L=!0),L||(A.g=gf(A.j,null),A.g.ea(A.v)),A.F=Date.now(),wa(A)}mf(y)}function Sc(y){y.g&&(cl(y),y.g.cancel(),y.g=null)}function lf(y){Sc(y),y.u&&(d.clearTimeout(y.u),y.u=null),Ec(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&d.clearTimeout(y.s),y.s=null)}function kc(y){if(!ot(y.h)&&!y.s){y.s=!0;var A=y.Ga;W||z(),de||(W(),de=!0),ge.add(A,y),y.B=0}}function Sx(y,A){return $t(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=A.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Ee(x(y.Ga,y,A),gu(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const oe=new Cr(this,this.j,y);let pe=this.o;if(this.S&&(pe?(pe=C(pe),D(pe,this.S)):pe=this.S),this.m!==null||this.O||(oe.H=pe,pe=null),this.P)e:{for(var A=0,L=0;L<this.i.length;L++){t:{var q=this.i[L];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(A+=q,4096<A){A=L;break e}if(A===4096||L===this.i.length-1){A=L+1;break e}}A=1e3}else A=1e3;A=cf(this,oe,A),L=En(this.I),xs(L,"RID",y),xs(L,"CVER",22),this.D&&xs(L,"X-HTTP-Session-Id",this.D),ll(this,L),pe&&(this.O?A="headers="+encodeURIComponent(String(uu(pe)))+"&"+A:this.m&&br(L,this.m,pe)),aa(this.h,oe),this.Ua&&xs(L,"TYPE","init"),this.P?(xs(L,"$req",A),xs(L,"SID","null"),oe.T=!0,kn(oe,L,null)):kn(oe,L,A),this.G=2}}else this.G==3&&(y?mu(this,y):this.i.length==0||ot(this.h)||mu(this))};function mu(y,A){var L;A?L=A.l:L=y.U++;const q=En(y.I);xs(q,"SID",y.K),xs(q,"RID",L),xs(q,"AID",y.T),ll(y,q),y.m&&y.o&&br(q,y.m,y.o),L=new Cr(y,y.j,L,y.B+1),y.m===null&&(L.H=y.o),A&&(y.i=A.D.concat(y.i)),A=cf(y,L,1e3),L.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),aa(y.h,L),kn(L,q,A)}function ll(y,A){y.H&&O(y.H,function(L,q){xs(A,q,L)}),y.l&&iu({},function(L,q){xs(A,q,L)})}function cf(y,A,L){L=Math.min(y.i.length,L);var q=y.l?x(y.l.Na,y.l,y):null;e:{var oe=y.i;let pe=-1;for(;;){const $e=["count="+L];pe==-1?0<L?(pe=oe[0].g,$e.push("ofs="+pe)):pe=0:$e.push("ofs="+pe);let Xt=!0;for(let lr=0;lr<L;lr++){let Qt=oe[lr].g;const vr=oe[lr].map;if(Qt-=pe,0>Qt)pe=Math.max(0,oe[lr].g-100),Xt=!1;else try{ja(vr,$e,"req"+Qt+"_")}catch{q&&q(vr)}}if(Xt){q=$e.join("&");break e}}}return y=y.i.splice(0,L),A.D=y,q}function df(y){if(!y.g&&!y.u){y.Y=1;var A=y.Fa;W||z(),de||(W(),de=!0),ge.add(A,y),y.v=0}}function fu(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Ee(x(y.Fa,y),gu(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,uf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Ee(x(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),Sc(this),uf(this))};function cl(y){y.A!=null&&(d.clearTimeout(y.A),y.A=null)}function uf(y){y.g=new Cr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var A=En(y.qa);xs(A,"RID","rpc"),xs(A,"SID",y.K),xs(A,"AID",y.T),xs(A,"CI",y.F?"0":"1"),!y.F&&y.ja&&xs(A,"TO",y.ja),xs(A,"TYPE","xmlhttp"),ll(y,A),y.m&&y.o&&br(A,y.m,y.o),y.L&&(y.g.I=y.L);var L=y.g;y=y.ia,L.L=1,L.v=tl(En(A)),L.m=null,L.P=!0,Fn(L,y)}t.Za=function(){this.C!=null&&(this.C=null,Sc(this),fu(this),ee(19))};function Ec(y){y.C!=null&&(d.clearTimeout(y.C),y.C=null)}function hf(y,A){var L=null;if(y.g==A){Ec(y),cl(y),y.g=null;var q=2}else if(Br(y.h,A))L=A.D,Ar(y.h,A),q=1;else return;if(y.G!=0){if(A.o)if(q==1){L=A.m?A.m.length:0,A=Date.now()-A.F;var oe=y.B;q=Ps(),Ye(q,new ye(q,L)),kc(y)}else df(y);else if(oe=A.s,oe==3||oe==0&&0<A.X||!(q==1&&Sx(y,A)||q==2&&fu(y)))switch(L&&0<L.length&&(A=y.h,A.i=A.i.concat(L)),oe){case 1:li(y,5);break;case 4:li(y,10);break;case 3:li(y,6);break;default:li(y,2)}}}function gu(y,A){let L=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(L*=2),L*A}function li(y,A){if(y.j.info("Error code "+A),A==2){var L=x(y.fb,y),q=y.Xa;const oe=!q;q=new Zs(q||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||el(q,"https"),tl(q),oe?rl(q.toString(),L):ia(q.toString(),L)}else ee(2);y.G=0,y.l&&y.l.sa(A),mf(y),lf(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function mf(y){if(y.G=0,y.ka=[],y.l){const A=Jo(y.h);(A.length!=0||y.i.length!=0)&&(j(y.ka,A),j(y.ka,y.i),y.h.i.length=0,v(y.i),y.i.length=0),y.l.ra()}}function ff(y,A,L){var q=L instanceof Zs?En(L):new Zs(L);if(q.g!="")A&&(q.g=A+"."+q.g),Hi(q,q.s);else{var oe=d.location;q=oe.protocol,A=A?A+"."+oe.hostname:oe.hostname,oe=+oe.port;var pe=new Zs(null);q&&el(pe,q),A&&(pe.g=A),oe&&Hi(pe,oe),L&&(pe.l=L),q=pe}return L=y.D,A=y.ya,L&&A&&xs(q,L,A),xs(q,"VER",y.la),ll(y,q),q}function gf(y,A,L){if(A&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Ca&&!y.pa?new cs(new Gi({eb:L})):new cs(y.pa),A.Ha(y.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pf(){}t=pf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tc(){}Tc.prototype.g=function(y,A){return new tn(y,A)};function tn(y,A){Je.call(this),this.g=new _c(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(y?y["X-WebChannel-Client-Profile"]=A.va:y={"X-WebChannel-Client-Profile":A.va}),this.g.S=y,(y=A&&A.Sb)&&!T(y)&&(this.g.m=y),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!T(A)&&(this.g.D=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new Ea(this)}N(tn,Je),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){hu(this.g)},tn.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var L={};L.__data__=y,y=L}else this.u&&(L={},L.__data__=dt(y),y=L);A.i.push(new Tt(A.Ya++,y)),A.G==3&&kc(A)},tn.prototype.N=function(){this.g.l=null,delete this.j,hu(this.g),delete this.g,tn.aa.N.call(this)};function xf(y){ns.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){e:{for(const L in A){y=L;break e}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}N(xf,ns);function yf(){Zr.call(this),this.status=1}N(yf,Zr);function Ea(y){this.g=y}N(Ea,pf),Ea.prototype.ua=function(){Ye(this.g,"a")},Ea.prototype.ta=function(y){Ye(this.g,new xf(y))},Ea.prototype.sa=function(y){Ye(this.g,new yf)},Ea.prototype.ra=function(){Ye(this.g,"b")},Tc.prototype.createWebChannel=Tc.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,vP=function(){return new Tc},bP=function(){return Ps()},yP=as,kv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},en.NO_ERROR=0,en.TIMEOUT=8,en.HTTP_ERROR=6,lp=en,Js.COMPLETE="complete",xP=Js,Rs.EventType=ks,ks.OPEN="a",ks.CLOSE="b",ks.ERROR="c",ks.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Sh=Rs,cs.prototype.listenOnce=cs.prototype.L,cs.prototype.getLastError=cs.prototype.Ka,cs.prototype.getLastErrorCode=cs.prototype.Ba,cs.prototype.getStatus=cs.prototype.Z,cs.prototype.getResponseJson=cs.prototype.Oa,cs.prototype.getResponseText=cs.prototype.oa,cs.prototype.send=cs.prototype.ea,cs.prototype.setWithCredentials=cs.prototype.Ha,pP=cs}).apply(typeof wg<"u"?wg:typeof self<"u"?self:typeof window<"u"?window:{});const Nk="@firebase/firestore",jk="4.7.15";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd="11.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new zw("@firebase/firestore");function ad(){return Jl.logLevel}function st(t,...e){if(Jl.logLevel<=Wt.DEBUG){const s=e.map(rN);Jl.debug(`Firestore (${Wd}): ${t}`,...s)}}function Ui(t,...e){if(Jl.logLevel<=Wt.ERROR){const s=e.map(rN);Jl.error(`Firestore (${Wd}): ${t}`,...s)}}function kd(t,...e){if(Jl.logLevel<=Wt.WARN){const s=e.map(rN);Jl.warn(`Firestore (${Wd}): ${t}`,...s)}}function rN(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,wP(t,r,s)}function wP(t,e,s){let r=`FIRESTORE (${Wd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw Ui(r),new Error(r)}function es(t,e,s,r){let a="Unexpected state";typeof s=="string"?a=s:r=s,t||wP(e,a,r)}function Pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends si{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(Wr.UNAUTHENTICATED))}shutdown(){}}class s7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class r7{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){es(this.o===void 0,42304);let r=this.i;const a=u=>this.i!==r?(r=this.i,s(u)):Promise.resolve();let i=new Ga;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ga,e.enqueueRetryable(()=>a(this.currentUser))};const l=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await a(this.currentUser)})},d=u=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(u=>d(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ga)}},0),l()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(r=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(es(typeof r.accessToken=="string",31837,{l:r}),new NP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return es(e===null||typeof e=="string",2055,{h:e}),new Wr(e)}}class n7{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class a7{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new n7(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable(()=>s(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _k{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i7{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){es(this.o===void 0,3512);const r=i=>{i.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const l=i.token!==this.m;return this.m=i.token,st("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?s(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const a=i=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _k(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(es(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new _k(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=o7(40);for(let i=0;i<a.length;++i)r.length<20&&a[i]<s&&(r+=e.charAt(a[i]%62))}return r}}function zt(t,e){return t<e?-1:t>e?1:0}function Ev(t,e){let s=0;for(;s<t.length&&s<e.length;){const r=t.codePointAt(s),a=e.codePointAt(s);if(r!==a){if(r<128&&a<128)return zt(r,a);{const i=jP(),l=l7(i.encode(Sk(t,s)),i.encode(Sk(e,s)));return l!==0?l:zt(r,a)}}s+=r>65535?2:1}return zt(t.length,e.length)}function Sk(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function l7(t,e){for(let s=0;s<t.length&&s<e.length;++s)if(t[s]!==e[s])return zt(t[s],e[s]);return zt(t.length,e.length)}function Ed(t,e,s){return t.length===e.length&&t.every((r,a)=>s(r,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=-62135596800,Ek=1e6;class mr{static now(){return mr.fromMillis(Date.now())}static fromDate(e){return mr.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*Ek);return new mr(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new We(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new We(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<kk)throw new We(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ek}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-kk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static fromTimestamp(e){return new kt(e)}static min(){return new kt(new mr(0,0))}static max(){return new kt(new mr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="__name__";class Fa{constructor(e,s,r){s===void 0?s=0:s>e.length&&wt(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&wt(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Fa.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Fa?e.forEach(r=>{s.push(r)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let a=0;a<r;a++){const i=Fa.compareSegments(e.get(a),s.get(a));if(i!==0)return i}return zt(e.length,s.length)}static compareSegments(e,s){const r=Fa.isNumericId(e),a=Fa.isNumericId(s);return r&&!a?-1:!r&&a?1:r&&a?Fa.extractNumericId(e).compare(Fa.extractNumericId(s)):Ev(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class _s extends Fa{construct(e,s,r){return new _s(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new We(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter(a=>a.length>0))}return new _s(s)}static emptyPath(){return new _s([])}}const c7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends Fa{construct(e,s,r){return new Lr(e,s,r)}static isValidIdentifier(e){return c7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tk}static keyField(){return new Lr([Tk])}static fromServerFormat(e){const s=[];let r="",a=0;const i=()=>{if(r.length===0)throw new We(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let l=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new We(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[a+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new We(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,a+=2}else d==="`"?(l=!l,a++):d!=="."||l?(r+=d,a++):(i(),a++)}if(i(),l)throw new We(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lr(s)}static emptyPath(){return new Lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.path=e}static fromPath(e){return new bt(_s.fromString(e))}static fromName(e){return new bt(_s.fromString(e).popFirst(5))}static empty(){return new bt(_s.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_s.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return _s.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new _s(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=-1;function d7(t,e){const s=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=kt.fromTimestamp(r===1e9?new mr(s+1,0):new mr(s,r));return new Mo(a,bt.empty(),e)}function u7(t){return new Mo(t.readTime,t.key,im)}class Mo{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new Mo(kt.min(),bt.empty(),im)}static max(){return new Mo(kt.max(),bt.empty(),im)}}function h7(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=bt.comparator(t.documentKey,e.documentKey),s!==0?s:zt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yd(t){if(t.code!==Pe.FAILED_PRECONDITION||t.message!==m7)throw t;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&wt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new Me((r,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,a)},this.catchCallback=i=>{this.wrapFailure(s,i).next(r,a)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof Me?s:Me.resolve(s)}catch(s){return Me.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):Me.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):Me.reject(s)}static resolve(e){return new Me((s,r)=>{s(e)})}static reject(e){return new Me((s,r)=>{r(e)})}static waitFor(e){return new Me((s,r)=>{let a=0,i=0,l=!1;e.forEach(d=>{++a,d.next(()=>{++i,l&&i===a&&s()},u=>r(u))}),l=!0,i===a&&s()})}static or(e){let s=Me.resolve(!1);for(const r of e)s=s.next(a=>a?Me.resolve(a):r());return s}static forEach(e,s){const r=[];return e.forEach((a,i)=>{r.push(s.call(this,a,i))}),this.waitFor(r)}static mapArray(e,s){return new Me((r,a)=>{const i=e.length,l=new Array(i);let d=0;for(let u=0;u<i;u++){const h=u;s(e[h]).next(f=>{l[h]=f,++d,d===i&&r(l)},f=>a(f))}})}static doWhile(e,s){return new Me((r,a)=>{const i=()=>{e()===!0?s().next(()=>{i()},a):r()};i()})}}function g7(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Kd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>s.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}A0.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=-1;function Vm(t){return t==null}function Vp(t){return t===0&&1/t==-1/0}function p7(t){return typeof t=="number"&&Number.isInteger(t)&&!Vp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="";function x7(t){let e="";for(let s=0;s<t.length;s++)e.length>0&&(e=Ck(e)),e=y7(t.get(s),e);return Ck(e)}function y7(t,e){let s=e;const r=t.length;for(let a=0;a<r;a++){const i=t.charAt(a);switch(i){case"\0":s+="";break;case SP:s+="";break;default:s+=i}}return s}function Ck(t){return t+SP+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Ho(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function kP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,s){this.comparator=e,this.root=s||Or.EMPTY}insert(e,s){return new Us(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new Us(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return s+r.left.size;a<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,r)=>(e(s,r),!1))}toString(){const e=[];return this.inorderTraversal((s,r)=>(e.push(`${s}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ng(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ng(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ng(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ng(this.root,e,this.comparator,!0)}}class Ng{constructor(e,s,r,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=s?r(e.key,s):1,s&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,s,r,a,i){this.key=e,this.value=s,this.color=r??Or.RED,this.left=a??Or.EMPTY,this.right=i??Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,a,i){return new Or(e??this.key,s??this.value,r??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let a=this;const i=r(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,s,r),null):i===0?a.copy(null,s,null,null,null):a.copy(null,null,null,null,a.right.insert(e,s,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,a=this;if(s(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,s),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),s(e,a.key)===0){if(a.right.isEmpty())return Or.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,s))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw wt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw wt(27949);return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1;Or.EMPTY=new class{constructor(){this.size=0}get key(){throw wt(57766)}get value(){throw wt(16141)}get color(){throw wt(16727)}get left(){throw wt(29726)}get right(){throw wt(36894)}copy(e,s,r,a,i){return this}insert(e,s,r){return new Or(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.comparator=e,this.data=new Us(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,r)=>(e(s),!1))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;s(a.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Rk(this.data.getIterator())}getIteratorFrom(e){return new Rk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(r=>{s=s.add(r)}),s}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const a=s.getNext().key,i=r.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new fr(this.comparator);return s.data=e,s}}class Rk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(Lr.comparator)}static empty(){return new Ln([])}unionWith(e){let s=new fr(Lr.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Ln(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Ed(this.fields,e.fields,(s,r)=>s.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new EP("Invalid base64 string: "+i):i}}(e);return new Fr(s)}static fromUint8Array(e){const s=function(a){let i="";for(let l=0;l<a.length;++l)i+=String.fromCharCode(a[l]);return i}(e);return new Fr(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const r=new Uint8Array(s.length);for(let a=0;a<s.length;a++)r[a]=s.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const b7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(t){if(es(!!t,39018),typeof t=="string"){let e=0;const s=b7.exec(t);if(es(!!s,46558,{timestamp:t}),s[1]){let a=s[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ks(t.seconds),nanos:Ks(t.nanos)}}function Ks(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lo(t){return typeof t=="string"?Fr.fromBase64String(t):Fr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="server_timestamp",CP="__type__",AP="__previous_value__",RP="__local_write_time__";function aN(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[CP])===null||s===void 0?void 0:s.stringValue)===TP}function R0(t){const e=t.mapValue.fields[AP];return aN(e)?R0(e):e}function om(t){const e=Oo(t.mapValue.fields[RP].timestampValue);return new mr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(e,s,r,a,i,l,d,u,h,f){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const Fp="(default)";class lm{constructor(e,s){this.projectId=e,this.database=s||Fp}static empty(){return new lm("","")}get isDefaultDatabase(){return this.database===Fp}isEqual(e){return e instanceof lm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="__type__",w7="__max__",jg={mapValue:{}},IP="__vector__",zp="value";function Uo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?aN(t)?4:j7(t)?9007199254740991:N7(t)?10:11:wt(28295,{value:t})}function ei(t,e){if(t===e)return!0;const s=Uo(t);if(s!==Uo(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return om(t).isEqual(om(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const l=Oo(a.timestampValue),d=Oo(i.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,i){return Lo(a.bytesValue).isEqual(Lo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,i){return Ks(a.geoPointValue.latitude)===Ks(i.geoPointValue.latitude)&&Ks(a.geoPointValue.longitude)===Ks(i.geoPointValue.longitude)}(t,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return Ks(a.integerValue)===Ks(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const l=Ks(a.doubleValue),d=Ks(i.doubleValue);return l===d?Vp(l)===Vp(d):isNaN(l)&&isNaN(d)}return!1}(t,e);case 9:return Ed(t.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return function(a,i){const l=a.mapValue.fields||{},d=i.mapValue.fields||{};if(Ak(l)!==Ak(d))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(d[u]===void 0||!ei(l[u],d[u])))return!1;return!0}(t,e);default:return wt(52216,{left:t})}}function cm(t,e){return(t.values||[]).find(s=>ei(s,e))!==void 0}function Td(t,e){if(t===e)return 0;const s=Uo(t),r=Uo(e);if(s!==r)return zt(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return zt(t.booleanValue,e.booleanValue);case 2:return function(i,l){const d=Ks(i.integerValue||i.doubleValue),u=Ks(l.integerValue||l.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1}(t,e);case 3:return Pk(t.timestampValue,e.timestampValue);case 4:return Pk(om(t),om(e));case 5:return Ev(t.stringValue,e.stringValue);case 6:return function(i,l){const d=Lo(i),u=Lo(l);return d.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,l){const d=i.split("/"),u=l.split("/");for(let h=0;h<d.length&&h<u.length;h++){const f=zt(d[h],u[h]);if(f!==0)return f}return zt(d.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,l){const d=zt(Ks(i.latitude),Ks(l.latitude));return d!==0?d:zt(Ks(i.longitude),Ks(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ik(t.arrayValue,e.arrayValue);case 10:return function(i,l){var d,u,h,f;const p=i.fields||{},x=l.fields||{},w=(d=p[zp])===null||d===void 0?void 0:d.arrayValue,N=(u=x[zp])===null||u===void 0?void 0:u.arrayValue,v=zt(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return v!==0?v:Ik(w,N)}(t.mapValue,e.mapValue);case 11:return function(i,l){if(i===jg.mapValue&&l===jg.mapValue)return 0;if(i===jg.mapValue)return 1;if(l===jg.mapValue)return-1;const d=i.fields||{},u=Object.keys(d),h=l.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const x=Ev(u[p],f[p]);if(x!==0)return x;const w=Td(d[u[p]],h[f[p]]);if(w!==0)return w}return zt(u.length,f.length)}(t.mapValue,e.mapValue);default:throw wt(23264,{Pe:s})}}function Pk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return zt(t,e);const s=Oo(t),r=Oo(e),a=zt(s.seconds,r.seconds);return a!==0?a:zt(s.nanos,r.nanos)}function Ik(t,e){const s=t.values||[],r=e.values||[];for(let a=0;a<s.length&&a<r.length;++a){const i=Td(s[a],r[a]);if(i)return i}return zt(s.length,r.length)}function Cd(t){return Tv(t)}function Tv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=Oo(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return Lo(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return bt.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let r="[",a=!0;for(const i of s.values||[])a?a=!1:r+=",",r+=Tv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let a="{",i=!0;for(const l of r)i?i=!1:a+=",",a+=`${l}:${Tv(s.fields[l])}`;return a+"}"}(t.mapValue):wt(61005,{value:t})}function cp(t){switch(Uo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=R0(t);return e?16+cp(e):16;case 5:return 2*t.stringValue.length;case 6:return Lo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,i)=>a+cp(i),0)}(t.arrayValue);case 10:case 11:return function(r){let a=0;return Ho(r.fields,(i,l)=>{a+=i.length+cp(l)}),a}(t.mapValue);default:throw wt(13486,{value:t})}}function Dk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cv(t){return!!t&&"integerValue"in t}function iN(t){return!!t&&"arrayValue"in t}function Mk(t){return!!t&&"nullValue"in t}function Ok(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dp(t){return!!t&&"mapValue"in t}function N7(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[PP])===null||s===void 0?void 0:s.stringValue)===IP}function Vh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ho(t.mapValue.fields,(s,r)=>e.mapValue.fields[s]=Vh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Vh(t.arrayValue.values[s]);return e}return Object.assign({},t)}function j7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===w7}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!dp(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vh(s)}setAll(e){let s=Lr.emptyPath(),r={},a=[];e.forEach((l,d)=>{if(!s.isImmediateParentOf(d)){const u=this.getFieldsMap(s);this.applyChanges(u,r,a),r={},a=[],s=d.popLast()}l?r[d.lastSegment()]=Vh(l):a.push(d.lastSegment())});const i=this.getFieldsMap(s);this.applyChanges(i,r,a)}delete(e){const s=this.field(e.popLast());dp(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=s.mapValue.fields[e.get(r)];dp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=a),s=a}return s.mapValue.fields}applyChanges(e,s,r){Ho(s,(a,i)=>e[a]=i);for(const a of r)delete e[a]}clone(){return new on(Vh(this.value))}}function DP(t){const e=[];return Ho(t.fields,(s,r)=>{const a=new Lr([s]);if(dp(r)){const i=DP(r.mapValue).fields;if(i.length===0)e.push(a);else for(const l of i)e.push(a.child(l))}else e.push(a)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,s,r,a,i,l,d){this.key=e,this.documentType=s,this.version=r,this.readTime=a,this.createTime=i,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Sr(e,0,kt.min(),kt.min(),kt.min(),on.empty(),0)}static newFoundDocument(e,s,r,a){return new Sr(e,1,s,kt.min(),r,a,0)}static newNoDocument(e,s){return new Sr(e,2,s,kt.min(),kt.min(),on.empty(),0)}static newUnknownDocument(e,s){return new Sr(e,3,s,kt.min(),kt.min(),on.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,s){this.position=e,this.inclusive=s}}function Lk(t,e,s){let r=0;for(let a=0;a<t.position.length;a++){const i=e[a],l=t.position[a];if(i.field.isKeyField()?r=bt.comparator(bt.fromName(l.referenceValue),s.key):r=Td(l,s.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!ei(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,s="asc"){this.field=e,this.dir=s}}function _7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{}class rr extends MP{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new k7(e,s,r):s==="array-contains"?new C7(e,r):s==="in"?new A7(e,r):s==="not-in"?new R7(e,r):s==="array-contains-any"?new P7(e,r):new rr(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new E7(e,r):new T7(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Td(s,this.value)):s!==null&&Uo(this.value)===Uo(s)&&this.matchesComparison(Td(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pa extends MP{constructor(e,s){super(),this.filters=e,this.op=s,this.Te=null}static create(e,s){return new pa(e,s)}matches(e){return OP(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function OP(t){return t.op==="and"}function LP(t){return S7(t)&&OP(t)}function S7(t){for(const e of t.filters)if(e instanceof pa)return!1;return!0}function Av(t){if(t instanceof rr)return t.field.canonicalString()+t.op.toString()+Cd(t.value);if(LP(t))return t.filters.map(e=>Av(e)).join(",");{const e=t.filters.map(s=>Av(s)).join(",");return`${t.op}(${e})`}}function UP(t,e){return t instanceof rr?function(r,a){return a instanceof rr&&r.op===a.op&&r.field.isEqual(a.field)&&ei(r.value,a.value)}(t,e):t instanceof pa?function(r,a){return a instanceof pa&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((i,l,d)=>i&&UP(l,a.filters[d]),!0):!1}(t,e):void wt(19439)}function VP(t){return t instanceof rr?function(s){return`${s.field.canonicalString()} ${s.op} ${Cd(s.value)}`}(t):t instanceof pa?function(s){return s.op.toString()+" {"+s.getFilters().map(VP).join(" ,")+"}"}(t):"Filter"}class k7 extends rr{constructor(e,s,r){super(e,s,r),this.key=bt.fromName(r.referenceValue)}matches(e){const s=bt.comparator(e.key,this.key);return this.matchesComparison(s)}}class E7 extends rr{constructor(e,s){super(e,"in",s),this.keys=FP("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class T7 extends rr{constructor(e,s){super(e,"not-in",s),this.keys=FP("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function FP(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(r=>bt.fromName(r.referenceValue))}class C7 extends rr{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return iN(s)&&cm(s.arrayValue,this.value)}}class A7 extends rr{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&cm(this.value.arrayValue,s)}}class R7 extends rr{constructor(e,s){super(e,"not-in",s)}matches(e){if(cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!cm(this.value.arrayValue,s)}}class P7 extends rr{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!iN(s)||!s.arrayValue.values)&&s.arrayValue.values.some(r=>cm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,s=null,r=[],a=[],i=null,l=null,d=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=l,this.endAt=d,this.Ie=null}}function Vk(t,e=null,s=[],r=[],a=null,i=null,l=null){return new I7(t,e,s,r,a,i,l)}function oN(t){const e=Pt(t);if(e.Ie===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(r=>Av(r)).join(","),s+="|ob:",s+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vm(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>Cd(r)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>Cd(r)).join(",")),e.Ie=s}return e.Ie}function lN(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!_7(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!UP(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uk(t.startAt,e.startAt)&&Uk(t.endAt,e.endAt)}function Rv(t){return bt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,s=null,r=[],a=[],i=null,l="F",d=null,u=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=l,this.startAt=d,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function D7(t,e,s,r,a,i,l,d){return new Xd(t,e,s,r,a,i,l,d)}function P0(t){return new Xd(t)}function Fk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zP(t){return t.collectionGroup!==null}function Fh(t){const e=Pt(t);if(e.Ee===null){e.Ee=[];const s=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),s.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new fr(Lr.comparator);return l.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(d=d.add(h.field))})}),d})(e).forEach(i=>{s.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new dm(i,r))}),s.has(Lr.keyField().canonicalString())||e.Ee.push(new dm(Lr.keyField(),r))}return e.Ee}function Wa(t){const e=Pt(t);return e.de||(e.de=M7(e,Fh(t))),e.de}function M7(t,e){if(t.limitType==="F")return Vk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new dm(a.field,i)});const s=t.endAt?new Bp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bp(t.startAt.position,t.startAt.inclusive):null;return Vk(t.path,t.collectionGroup,e,t.filters,t.limit,s,r)}}function Pv(t,e){const s=t.filters.concat([e]);return new Xd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function $p(t,e,s){return new Xd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function I0(t,e){return lN(Wa(t),Wa(e))&&t.limitType===e.limitType}function BP(t){return`${oN(Wa(t))}|lt:${t.limitType}`}function id(t){return`Query(target=${function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map(a=>VP(a)).join(", ")}]`),Vm(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map(a=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(a)).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map(a=>Cd(a)).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map(a=>Cd(a)).join(",")),`Target(${r})`}(Wa(t))}; limitType=${t.limitType})`}function D0(t,e){return e.isFoundDocument()&&function(r,a){const i=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):bt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,a){for(const i of Fh(r))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,a){for(const i of r.filters)if(!i.matches(a))return!1;return!0}(t,e)&&function(r,a){return!(r.startAt&&!function(l,d,u){const h=Lk(l,d,u);return l.inclusive?h<=0:h<0}(r.startAt,Fh(r),a)||r.endAt&&!function(l,d,u){const h=Lk(l,d,u);return l.inclusive?h>=0:h>0}(r.endAt,Fh(r),a))}(t,e)}function O7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $P(t){return(e,s)=>{let r=!1;for(const a of Fh(t)){const i=L7(a,e,s);if(i!==0)return i;r=r||a.field.isKeyField()}return 0}}function L7(t,e,s){const r=t.field.isKeyField()?bt.comparator(e.key,s.key):function(i,l,d){const u=l.data.field(i),h=d.data.field(i);return u!==null&&h!==null?Td(u,h):wt(42886)}(t.field,e,s);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return wt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[a,i]of r)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,s]);a.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[s]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,(s,r)=>{for(const[a,i]of r)e(a,i)})}isEmpty(){return kP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7=new Us(bt.comparator);function Vi(){return U7}const qP=new Us(bt.comparator);function kh(...t){let e=qP;for(const s of t)e=e.insert(s.key,s);return e}function HP(t){let e=qP;return t.forEach((s,r)=>e=e.insert(s,r.overlayedDocument)),e}function Dl(){return zh()}function GP(){return zh()}function zh(){return new hc(t=>t.toString(),(t,e)=>t.isEqual(e))}const V7=new Us(bt.comparator),F7=new fr(bt.comparator);function Yt(...t){let e=F7;for(const s of t)e=e.add(s);return e}const z7=new fr(zt);function B7(){return z7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vp(e)?"-0":e}}function WP(t){return{integerValue:""+t}}function YP(t,e){return p7(e)?WP(e):cN(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this._=void 0}}function $7(t,e,s){return t instanceof um?function(a,i){const l={fields:{[CP]:{stringValue:TP},[RP]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&aN(i)&&(i=R0(i)),i&&(l.fields[AP]=i),{mapValue:l}}(s,e):t instanceof Ad?XP(t,e):t instanceof Rd?QP(t,e):function(a,i){const l=KP(a,i),d=zk(l)+zk(a.Re);return Cv(l)&&Cv(a.Re)?WP(d):cN(a.serializer,d)}(t,e)}function q7(t,e,s){return t instanceof Ad?XP(t,e):t instanceof Rd?QP(t,e):s}function KP(t,e){return t instanceof hm?function(r){return Cv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class um extends M0{}class Ad extends M0{constructor(e){super(),this.elements=e}}function XP(t,e){const s=JP(e);for(const r of t.elements)s.some(a=>ei(a,r))||s.push(r);return{arrayValue:{values:s}}}class Rd extends M0{constructor(e){super(),this.elements=e}}function QP(t,e){let s=JP(e);for(const r of t.elements)s=s.filter(a=>!ei(a,r));return{arrayValue:{values:s}}}class hm extends M0{constructor(e,s){super(),this.serializer=e,this.Re=s}}function zk(t){return Ks(t.integerValue||t.doubleValue)}function JP(t){return iN(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,s){this.field=e,this.transform=s}}function H7(t,e){return t.field.isEqual(e.field)&&function(r,a){return r instanceof Ad&&a instanceof Ad||r instanceof Rd&&a instanceof Rd?Ed(r.elements,a.elements,ei):r instanceof hm&&a instanceof hm?ei(r.Re,a.Re):r instanceof um&&a instanceof um}(t.transform,e.transform)}class G7{constructor(e,s){this.version=e,this.transformResults=s}}class Ur{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function up(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class L0{}function ZP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new U0(t.key,Ur.none()):new Fm(t.key,t.data,Ur.none());{const s=t.data,r=on.empty();let a=new fr(Lr.comparator);for(let i of e.fields)if(!a.has(i)){let l=s.field(i);l===null&&i.length>1&&(i=i.popLast(),l=s.field(i)),l===null?r.delete(i):r.set(i,l),a=a.add(i)}return new Go(t.key,r,new Ln(a.toArray()),Ur.none())}}function W7(t,e,s){t instanceof Fm?function(a,i,l){const d=a.value.clone(),u=$k(a.fieldTransforms,i,l.transformResults);d.setAll(u),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,s):t instanceof Go?function(a,i,l){if(!up(a.precondition,i))return void i.convertToUnknownDocument(l.version);const d=$k(a.fieldTransforms,i,l.transformResults),u=i.data;u.setAll(e4(a)),u.setAll(d),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,s):function(a,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,s)}function Bh(t,e,s,r){return t instanceof Fm?function(i,l,d,u){if(!up(i.precondition,l))return d;const h=i.value.clone(),f=qk(i.fieldTransforms,u,l);return h.setAll(f),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(t,e,s,r):t instanceof Go?function(i,l,d,u){if(!up(i.precondition,l))return d;const h=qk(i.fieldTransforms,u,l),f=l.data;return f.setAll(e4(i)),f.setAll(h),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),d===null?null:d.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,s,r):function(i,l,d){return up(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d}(t,e,s)}function Y7(t,e){let s=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),i=KP(r.transform,a||null);i!=null&&(s===null&&(s=on.empty()),s.set(r.field,i))}return s||null}function Bk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Ed(r,a,(i,l)=>H7(i,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fm extends L0{constructor(e,s,r,a=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Go extends L0{constructor(e,s,r,a,i=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function e4(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const r=t.data.field(s);e.set(s,r)}}),e}function $k(t,e,s){const r=new Map;es(t.length===s.length,32656,{Ve:s.length,me:t.length});for(let a=0;a<s.length;a++){const i=t[a],l=i.transform,d=e.data.field(i.field);r.set(i.field,q7(l,d,s[a]))}return r}function qk(t,e,s){const r=new Map;for(const a of t){const i=a.transform,l=s.data.field(a.field);r.set(a.field,$7(i,l,e))}return r}class U0 extends L0{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t4 extends L0{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e,s,r,a){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&W7(i,e,r[a])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=Bh(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=Bh(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=GP();return this.mutations.forEach(a=>{const i=e.get(a.key),l=i.overlayedDocument;let d=this.applyToLocalView(l,i.mutatedFields);d=s.has(a.key)?null:d;const u=ZP(l,d);u!==null&&r.set(a.key,u),l.isValidDocument()||l.convertToNoDocument(kt.min())}),r}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Ed(this.mutations,e.mutations,(s,r)=>Bk(s,r))&&Ed(this.baseMutations,e.baseMutations,(s,r)=>Bk(s,r))}}class dN{constructor(e,s,r,a){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=a}static from(e,s,r){es(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let a=function(){return V7}();const i=e.mutations;for(let l=0;l<i.length;l++)a=a.insert(i[l].key,r[l].version);return new dN(e,s,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr,Zt;function s4(t){switch(t){case Pe.OK:return wt(64938);case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0;default:return wt(15467,{code:t})}}function r4(t){if(t===void 0)return Ui("GRPC error has no .code"),Pe.UNKNOWN;switch(t){case sr.OK:return Pe.OK;case sr.CANCELLED:return Pe.CANCELLED;case sr.UNKNOWN:return Pe.UNKNOWN;case sr.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case sr.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case sr.INTERNAL:return Pe.INTERNAL;case sr.UNAVAILABLE:return Pe.UNAVAILABLE;case sr.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case sr.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case sr.NOT_FOUND:return Pe.NOT_FOUND;case sr.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case sr.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case sr.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case sr.ABORTED:return Pe.ABORTED;case sr.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case sr.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case sr.DATA_LOSS:return Pe.DATA_LOSS;default:return wt(39323,{code:t})}}(Zt=sr||(sr={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7=new Ao([4294967295,4294967295],0);function Hk(t){const e=jP().encode(t),s=new gP;return s.update(e),new Uint8Array(s.digest())}function Gk(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ao([s,r],0),new Ao([a,i],0)]}class uN{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Eh(`Invalid padding: ${s}`);if(r<0)throw new Eh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Eh(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Eh(`Invalid padding when bitmap length is 0: ${s}`);this.pe=8*e.length-s,this.ye=Ao.fromNumber(this.pe)}we(e,s,r){let a=e.add(s.multiply(Ao.fromNumber(r)));return a.compare(J7)===1&&(a=new Ao([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const s=Hk(e),[r,a]=Gk(s);for(let i=0;i<this.hashCount;i++){const l=this.we(r,a,i);if(!this.Se(l))return!1}return!0}static create(e,s,r){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),l=new uN(i,a,s);return r.forEach(d=>l.insert(d)),l}insert(e){if(this.pe===0)return;const s=Hk(e),[r,a]=Gk(s);for(let i=0;i<this.hashCount;i++){const l=this.we(r,a,i);this.be(l)}}be(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Eh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,s,r,a,i){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const a=new Map;return a.set(e,zm.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new V0(kt.min(),a,new Us(zt),Vi(),Yt())}}class zm{constructor(e,s,r,a,i){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new zm(r,s,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,s,r,a){this.De=e,this.removedTargetIds=s,this.key=r,this.ve=a}}class n4{constructor(e,s){this.targetId=e,this.Ce=s}}class a4{constructor(e,s,r=Fr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=a}}class Wk{constructor(){this.Fe=0,this.Me=Yk(),this.xe=Fr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Yt(),s=Yt(),r=Yt();return this.Me.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:s=s.add(a);break;case 1:r=r.add(a);break;default:wt(38017,{changeType:i})}}),new zm(this.xe,this.Oe,e,s,r)}Qe(){this.Ne=!1,this.Me=Yk()}$e(e,s){this.Ne=!0,this.Me=this.Me.insert(e,s)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,es(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Z7{constructor(e){this.ze=e,this.je=new Map,this.He=Vi(),this.Je=_g(),this.Ye=_g(),this.Ze=new Us(zt)}Xe(e){for(const s of e.De)e.ve&&e.ve.isFoundDocument()?this.et(s,e.ve):this.tt(s,e.key,e.ve);for(const s of e.removedTargetIds)this.tt(s,e.key,e.ve)}nt(e){this.forEachTarget(e,s=>{const r=this.rt(s);switch(e.state){case 0:this.it(s)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(s);break;case 3:this.it(s)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(s)&&(this.st(s),r.ke(e.resumeToken));break;default:wt(56790,{state:e.state})}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.je.forEach((r,a)=>{this.it(a)&&s(a)})}ot(e){const s=e.targetId,r=e.Ce.count,a=this._t(s);if(a){const i=a.target;if(Rv(i))if(r===0){const l=new bt(i.path);this.tt(s,l,Sr.newNoDocument(l,kt.min()))}else es(r===1,20013,{expectedCount:r});else{const l=this.ut(s);if(l!==r){const d=this.ct(e),u=d?this.lt(d,e,l):1;if(u!==0){this.st(s);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,h)}}}}}ct(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:i=0}=s;let l,d;try{l=Lo(r).toUint8Array()}catch(u){if(u instanceof EP)return kd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new uN(l,a,i)}catch(u){return kd(u instanceof Eh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.pe===0?null:d}lt(e,s,r){return s.Ce.count===r-this.Tt(e,s.targetId)?0:2}Tt(e,s){const r=this.ze.getRemoteKeysForTarget(s);let a=0;return r.forEach(i=>{const l=this.ze.Pt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${i.path.canonicalString()}`;e.mightContain(d)||(this.tt(s,i,null),a++)}),a}It(e){const s=new Map;this.je.forEach((i,l)=>{const d=this._t(l);if(d){if(i.current&&Rv(d.target)){const u=new bt(d.target.path);this.Et(u).has(l)||this.dt(l,u)||this.tt(l,u,Sr.newNoDocument(u,e))}i.Le&&(s.set(l,i.qe()),i.Qe())}});let r=Yt();this.Ye.forEach((i,l)=>{let d=!0;l.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(i))}),this.He.forEach((i,l)=>l.setReadTime(e));const a=new V0(e,s,this.Ze,this.He,r);return this.He=Vi(),this.Je=_g(),this.Ye=_g(),this.Ze=new Us(zt),a}et(e,s){if(!this.it(e))return;const r=this.dt(e,s.key)?2:0;this.rt(e).$e(s.key,r),this.He=this.He.insert(s.key,s),this.Je=this.Je.insert(s.key,this.Et(s.key).add(e)),this.Ye=this.Ye.insert(s.key,this.At(s.key).add(e))}tt(e,s,r){if(!this.it(e))return;const a=this.rt(e);this.dt(e,s)?a.$e(s,1):a.Ue(s),this.Ye=this.Ye.insert(s,this.At(s).delete(e)),this.Ye=this.Ye.insert(s,this.At(s).add(e)),r&&(this.He=this.He.insert(s,r))}removeTarget(e){this.je.delete(e)}ut(e){const s=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let s=this.je.get(e);return s||(s=new Wk,this.je.set(e,s)),s}At(e){let s=this.Ye.get(e);return s||(s=new fr(zt),this.Ye=this.Ye.insert(e,s)),s}Et(e){let s=this.Je.get(e);return s||(s=new fr(zt),this.Je=this.Je.insert(e,s)),s}it(e){const s=this._t(e)!==null;return s||st("WatchChangeAggregator","Detected inactive target",e),s}_t(e){const s=this.je.get(e);return s&&s.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Wk),this.ze.getRemoteKeysForTarget(e).forEach(s=>{this.tt(e,s,null)})}dt(e,s){return this.ze.getRemoteKeysForTarget(e).has(s)}}function _g(){return new Us(bt.comparator)}function Yk(){return new Us(bt.comparator)}const eF={asc:"ASCENDING",desc:"DESCENDING"},tF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sF={and:"AND",or:"OR"};class rF{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Iv(t,e){return t.useProto3Json||Vm(e)?e:{value:e}}function qp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nF(t,e){return qp(t,e.toTimestamp())}function Vn(t){return es(!!t,49232),kt.fromTimestamp(function(s){const r=Oo(s);return new mr(r.seconds,r.nanos)}(t))}function hN(t,e){return Dv(t,e).canonicalString()}function Dv(t,e){const s=function(a){return new _s(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?s:s.child(e)}function o4(t){const e=_s.fromString(t);return es(m4(e),10190,{key:e.toString()}),e}function Hp(t,e){return hN(t.databaseId,e.path)}function $h(t,e){const s=o4(e);if(s.get(1)!==t.databaseId.projectId)throw new We(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new We(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new bt(c4(s))}function l4(t,e){return hN(t.databaseId,e)}function aF(t){const e=o4(t);return e.length===4?_s.emptyPath():c4(e)}function Mv(t){return new _s(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function c4(t){return es(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Kk(t,e,s){return{name:Hp(t,e),fields:s.value.mapValue.fields}}function iF(t,e){return"found"in e?function(r,a){es(!!a.found,43571),a.found.name,a.found.updateTime;const i=$h(r,a.found.name),l=Vn(a.found.updateTime),d=a.found.createTime?Vn(a.found.createTime):kt.min(),u=new on({mapValue:{fields:a.found.fields}});return Sr.newFoundDocument(i,l,d,u)}(t,e):"missing"in e?function(r,a){es(!!a.missing,3894),es(!!a.readTime,22933);const i=$h(r,a.missing),l=Vn(a.readTime);return Sr.newNoDocument(i,l)}(t,e):wt(7234,{result:e})}function oF(t,e){let s;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:wt(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(es(f===void 0||typeof f=="string",58123),Fr.fromBase64String(f||"")):(es(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Fr.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(h){const f=h.code===void 0?Pe.UNKNOWN:r4(h.code);return new We(f,h.message||"")}(l);s=new a4(r,a,i,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=$h(t,r.document.name),i=Vn(r.document.updateTime),l=r.document.createTime?Vn(r.document.createTime):kt.min(),d=new on({mapValue:{fields:r.document.fields}}),u=Sr.newFoundDocument(a,i,l,d),h=r.targetIds||[],f=r.removedTargetIds||[];s=new hp(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=$h(t,r.document),i=r.readTime?Vn(r.readTime):kt.min(),l=Sr.newNoDocument(a,i),d=r.removedTargetIds||[];s=new hp([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=$h(t,r.document),i=r.removedTargetIds||[];s=new hp([],i,a,null)}else{if(!("filter"in e))return wt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:i}=r,l=new Q7(a,i),d=r.targetId;s=new n4(d,l)}}return s}function d4(t,e){let s;if(e instanceof Fm)s={update:Kk(t,e.key,e.value)};else if(e instanceof U0)s={delete:Hp(t,e.key)};else if(e instanceof Go)s={update:Kk(t,e.key,e.data),updateMask:pF(e.fieldMask)};else{if(!(e instanceof t4))return wt(16599,{ft:e.type});s={verify:Hp(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const d=l.transform;if(d instanceof um)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ad)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Rd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof hm)return{fieldPath:l.field.canonicalString(),increment:d.Re};throw wt(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(s.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:nF(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:wt(27497)}(t,e.precondition)),s}function lF(t,e){return t&&t.length>0?(es(e!==void 0,14353),t.map(s=>function(a,i){let l=a.updateTime?Vn(a.updateTime):Vn(i);return l.isEqual(kt.min())&&(l=Vn(i)),new G7(l,a.transformResults||[])}(s,e))):[]}function cF(t,e){return{documents:[l4(t,e.path)]}}function dF(t,e){const s={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=l4(t,a);const i=function(h){if(h.length!==0)return h4(pa.create(h,"and"))}(e.filters);i&&(s.structuredQuery.where=i);const l=function(h){if(h.length!==0)return h.map(f=>function(x){return{field:od(x.field),direction:mF(x.dir)}}(f))}(e.orderBy);l&&(s.structuredQuery.orderBy=l);const d=Iv(t,e.limit);return d!==null&&(s.structuredQuery.limit=d),e.startAt&&(s.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:s,parent:a}}function uF(t){let e=aF(t.parent);const s=t.structuredQuery,r=s.from?s.from.length:0;let a=null;if(r>0){es(r===1,65062);const f=s.from[0];f.allDescendants?a=f.collectionId:e=e.child(f.collectionId)}let i=[];s.where&&(i=function(p){const x=u4(p);return x instanceof pa&&LP(x)?x.getFilters():[x]}(s.where));let l=[];s.orderBy&&(l=function(p){return p.map(x=>function(N){return new dm(ld(N.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(x))}(s.orderBy));let d=null;s.limit&&(d=function(p){let x;return x=typeof p=="object"?p.value:p,Vm(x)?null:x}(s.limit));let u=null;s.startAt&&(u=function(p){const x=!!p.before,w=p.values||[];return new Bp(w,x)}(s.startAt));let h=null;return s.endAt&&(h=function(p){const x=!p.before,w=p.values||[];return new Bp(w,x)}(s.endAt)),D7(e,a,l,i,d,"F",u,h)}function hF(t,e){const s=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt(28987,{purpose:a})}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function u4(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=ld(s.unaryFilter.field);return rr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=ld(s.unaryFilter.field);return rr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ld(s.unaryFilter.field);return rr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ld(s.unaryFilter.field);return rr.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return wt(61313);default:return wt(60726)}}(t):t.fieldFilter!==void 0?function(s){return rr.create(ld(s.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return wt(58110);default:return wt(50506)}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return pa.create(s.compositeFilter.filters.map(r=>u4(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return wt(1026)}}(s.compositeFilter.op))}(t):wt(30097,{filter:t})}function mF(t){return eF[t]}function fF(t){return tF[t]}function gF(t){return sF[t]}function od(t){return{fieldPath:t.canonicalString()}}function ld(t){return Lr.fromServerFormat(t.fieldPath)}function h4(t){return t instanceof rr?function(s){if(s.op==="=="){if(Ok(s.value))return{unaryFilter:{field:od(s.field),op:"IS_NAN"}};if(Mk(s.value))return{unaryFilter:{field:od(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Ok(s.value))return{unaryFilter:{field:od(s.field),op:"IS_NOT_NAN"}};if(Mk(s.value))return{unaryFilter:{field:od(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:od(s.field),op:fF(s.op),value:s.value}}}(t):t instanceof pa?function(s){const r=s.getFilters().map(a=>h4(a));return r.length===1?r[0]:{compositeFilter:{op:gF(s.op),filters:r}}}(t):wt(54877,{filter:t})}function pF(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function m4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,s,r,a,i=kt.min(),l=kt.min(),d=Fr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(e){return new jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.wt=e}}function yF(t){const e=uF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(){this.Cn=new vF}addToCollectionParentIndex(e,s){return this.Cn.add(s),Me.resolve()}getCollectionParents(e,s){return Me.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return Me.resolve()}deleteFieldIndex(e,s){return Me.resolve()}deleteAllFieldIndexes(e){return Me.resolve()}createTargetIndexes(e,s){return Me.resolve()}getDocumentsMatchingTarget(e,s){return Me.resolve(null)}getIndexType(e,s){return Me.resolve(0)}getFieldIndexes(e,s){return Me.resolve([])}getNextCollectionGroupToUpdate(e){return Me.resolve(null)}getMinOffset(e,s){return Me.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,s){return Me.resolve(Mo.min())}updateCollectionGroup(e,s,r){return Me.resolve()}updateIndexEntries(e,s){return Me.resolve()}}class vF{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),a=this.index[s]||new fr(_s.comparator),i=!a.has(r);return this.index[s]=a.add(r),i}has(e){const s=e.lastSegment(),r=e.popLast(),a=this.index[s];return a&&a.has(r)}getEntries(e){return(this.index[e]||new fr(_s.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f4=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(f4,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Pd(0)}static lr(){return new Pd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="LruGarbageCollector",wF=1048576;function Jk([t,e],[s,r]){const a=zt(t,s);return a===0?zt(e,r):a}class NF{constructor(e){this.Er=e,this.buffer=new fr(Jk),this.dr=0}Ar(){return++this.dr}Rr(e){const s=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();Jk(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class jF{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){st(Qk,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Kd(s)?st(Qk,"Ignoring IndexedDB error during garbage collection: ",s):await Yd(s)}await this.mr(3e5)})}}class _F{constructor(e,s){this.gr=e,this.params=s}calculateTargetCount(e,s){return this.gr.pr(e).next(r=>Math.floor(s/100*r))}nthSequenceNumber(e,s){if(s===0)return Me.resolve(A0.le);const r=new NF(s);return this.gr.forEachTarget(e,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(e,s,r){return this.gr.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.gr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(Xk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xk):this.wr(e,s))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,s){let r,a,i,l,d,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),a=this.params.maximumSequenceNumbersToCollect):a=p,l=Date.now(),this.nthSequenceNumber(e,a))).next(p=>(r=p,d=Date.now(),this.removeTargets(e,r,s))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),ad()<=Wt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-f}ms
	Determined least recently used ${a} in `+(d-l)+`ms
	Removed ${i} targets in `+(u-d)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:p})))}}function SF(t,e){return new _F(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(){this.changes=new hc(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Sr.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?Me.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,s,r,a){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,s))).next(a=>(r!==null&&Bh(r.mutation,a,Ln.empty(),mr.now()),a))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,s,r=Yt()){const a=Dl();return this.populateOverlays(e,a,s).next(()=>this.computeViews(e,s,a,r).next(i=>{let l=kh();return i.forEach((d,u)=>{l=l.insert(d,u.overlayedDocument)}),l}))}getOverlayedDocuments(e,s){const r=Dl();return this.populateOverlays(e,r,s).next(()=>this.computeViews(e,s,r,Yt()))}populateOverlays(e,s,r){const a=[];return r.forEach(i=>{s.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((l,d)=>{s.set(l,d)})})}computeViews(e,s,r,a){let i=Vi();const l=zh(),d=function(){return zh()}();return s.forEach((u,h)=>{const f=r.get(h.key);a.has(h.key)&&(f===void 0||f.mutation instanceof Go)?i=i.insert(h.key,h):f!==void 0?(l.set(h.key,f.mutation.getFieldMask()),Bh(f.mutation,h,f.mutation.getFieldMask(),mr.now())):l.set(h.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>l.set(h,f)),s.forEach((h,f)=>{var p;return d.set(h,new EF(f,(p=l.get(h))!==null&&p!==void 0?p:null))}),d))}recalculateAndSaveOverlays(e,s){const r=zh();let a=new Us((l,d)=>l-d),i=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(l=>{for(const d of l)d.keys().forEach(u=>{const h=s.get(u);if(h===null)return;let f=r.get(u)||Ln.empty();f=d.applyToLocalView(h,f),r.set(u,f);const p=(a.get(d.batchId)||Yt()).add(u);a=a.insert(d.batchId,p)})}).next(()=>{const l=[],d=a.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),h=u.key,f=u.value,p=GP();f.forEach(x=>{if(!i.has(x)){const w=ZP(s.get(x),r.get(x));w!==null&&p.set(x,w),i=i.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,p))}return Me.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,s,r,a){return function(l){return bt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):zP(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,a):this.getDocumentsMatchingCollectionQuery(e,s,r,a)}getNextDocuments(e,s,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,a).next(i=>{const l=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,a-i.size):Me.resolve(Dl());let d=im,u=i;return l.next(h=>Me.forEach(h,(f,p)=>(d<p.largestBatchId&&(d=p.largestBatchId),i.get(f)?Me.resolve():this.remoteDocumentCache.getEntry(e,f).next(x=>{u=u.insert(f,x)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,Yt())).next(f=>({batchId:d,changes:HP(f)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new bt(s)).next(r=>{let a=kh();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,s,r,a){const i=s.collectionGroup;let l=kh();return this.indexManager.getCollectionParents(e,i).next(d=>Me.forEach(d,u=>{const h=function(p,x){return new Xd(x,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(s,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,a).next(f=>{f.forEach((p,x)=>{l=l.insert(p,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,s,r,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next(l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,i,a))).next(l=>{i.forEach((u,h)=>{const f=h.getKey();l.get(f)===null&&(l=l.insert(f,Sr.newInvalidDocument(f)))});let d=kh();return l.forEach((u,h)=>{const f=i.get(u);f!==void 0&&Bh(f.mutation,h,Ln.empty(),mr.now()),D0(s,h)&&(d=d.insert(u,h))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,s){return Me.resolve(this.kr.get(s))}saveBundleMetadata(e,s){return this.kr.set(s.id,function(a){return{id:a.id,version:a.version,createTime:Vn(a.createTime)}}(s)),Me.resolve()}getNamedQuery(e,s){return Me.resolve(this.qr.get(s))}saveNamedQuery(e,s){return this.qr.set(s.name,function(a){return{name:a.name,query:yF(a.bundledQuery),readTime:Vn(a.readTime)}}(s)),Me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.overlays=new Us(bt.comparator),this.Qr=new Map}getOverlay(e,s){return Me.resolve(this.overlays.get(s))}getOverlays(e,s){const r=Dl();return Me.forEach(s,a=>this.getOverlay(e,a).next(i=>{i!==null&&r.set(a,i)})).next(()=>r)}saveOverlays(e,s,r){return r.forEach((a,i)=>{this.bt(e,s,i)}),Me.resolve()}removeOverlaysForBatchId(e,s,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),Me.resolve()}getOverlaysForCollection(e,s,r){const a=Dl(),i=s.length+1,l=new bt(s.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const u=d.getNext().value,h=u.getKey();if(!s.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&a.set(u.getKey(),u)}return Me.resolve(a)}getOverlaysForCollectionGroup(e,s,r,a){let i=new Us((h,f)=>h-f);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===s&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=Dl(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const d=Dl(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>d.set(h,f)),!(d.size()>=a)););return Me.resolve(d)}bt(e,s,r){const a=this.overlays.get(r.key);if(a!==null){const l=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new X7(s,r));let i=this.Qr.get(s);i===void 0&&(i=Yt(),this.Qr.set(s,i)),this.Qr.set(s,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(e){return Me.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,Me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.$r=new fr(_r.Ur),this.Kr=new fr(_r.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,s){const r=new _r(e,s);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,s){e.forEach(r=>this.addReference(r,s))}removeReference(e,s){this.zr(new _r(e,s))}jr(e,s){e.forEach(r=>this.removeReference(r,s))}Hr(e){const s=new bt(new _s([])),r=new _r(s,e),a=new _r(s,e+1),i=[];return this.Kr.forEachInRange([r,a],l=>{this.zr(l),i.push(l.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const s=new bt(new _s([])),r=new _r(s,e),a=new _r(s,e+1);let i=Yt();return this.Kr.forEachInRange([r,a],l=>{i=i.add(l.key)}),i}containsKey(e){const s=new _r(e,0),r=this.$r.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class _r{constructor(e,s){this.key=e,this.Zr=s}static Ur(e,s){return bt.comparator(e.key,s.key)||zt(e.Zr,s.Zr)}static Wr(e,s){return zt(e.Zr,s.Zr)||bt.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.nr=1,this.Xr=new fr(_r.Ur)}checkEmpty(e){return Me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,a){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new K7(i,s,r,a);this.mutationQueue.push(l);for(const d of a)this.Xr=this.Xr.add(new _r(d.key,i)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Me.resolve(l)}lookupMutationBatch(e,s){return Me.resolve(this.ei(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,a=this.ti(r),i=a<0?0:a;return Me.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(this.mutationQueue.length===0?nN:this.nr-1)}getAllMutationBatches(e){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new _r(s,0),a=new _r(s,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,a],l=>{const d=this.ei(l.Zr);i.push(d)}),Me.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new fr(zt);return s.forEach(a=>{const i=new _r(a,0),l=new _r(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,l],d=>{r=r.add(d.Zr)})}),Me.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,a=r.length+1;let i=r;bt.isDocumentKey(i)||(i=i.child(""));const l=new _r(new bt(i),0);let d=new fr(zt);return this.Xr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===a&&(d=d.add(u.Zr)),!0)},l),Me.resolve(this.ni(d))}ni(e){const s=[];return e.forEach(r=>{const a=this.ei(r);a!==null&&s.push(a)}),s}removeMutationBatch(e,s){es(this.ri(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return Me.forEach(s.mutations,a=>{const i=new _r(a.key,s.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,s){const r=new _r(s,0),a=this.Xr.firstAfterOrEqual(r);return Me.resolve(s.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Me.resolve()}ri(e,s){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const s=this.ti(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e){this.ii=e,this.docs=function(){return new Us(bt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,a=this.docs.get(r),i=a?a.size:0,l=this.ii(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:l}),this.size+=l-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return Me.resolve(r?r.document.mutableCopy():Sr.newInvalidDocument(s))}getEntries(e,s){let r=Vi();return s.forEach(a=>{const i=this.docs.get(a);r=r.insert(a,i?i.document.mutableCopy():Sr.newInvalidDocument(a))}),Me.resolve(r)}getDocumentsMatchingQuery(e,s,r,a){let i=Vi();const l=s.path,d=new bt(l.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||h7(u7(f),r)<=0||(a.has(f.key)||D0(s,f))&&(i=i.insert(f.key,f.mutableCopy()))}return Me.resolve(i)}getAllFromCollectionGroup(e,s,r,a){wt(9500)}si(e,s){return Me.forEach(this.docs,r=>s(r))}newChangeBuffer(e){return new DF(this)}getSize(e){return Me.resolve(this.size)}}class DF extends kF{constructor(e){super(),this.Br=e}applyChanges(e){const s=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?s.push(this.Br.addEntry(e,a)):this.Br.removeEntry(r)}),Me.waitFor(s)}getFromCache(e,s){return this.Br.getEntry(e,s)}getAllFromCache(e,s){return this.Br.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.persistence=e,this.oi=new hc(s=>oN(s),lN),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this._i=0,this.ai=new mN,this.targetCount=0,this.ui=Pd.cr()}forEachTarget(e,s){return this.oi.forEach((r,a)=>s(a)),Me.resolve()}getLastRemoteSnapshotVersion(e){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Me.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this._i&&(this._i=s),Me.resolve()}Tr(e){this.oi.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ui=new Pd(s),this.highestTargetId=s),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,s){return this.Tr(s),this.targetCount+=1,Me.resolve()}updateTargetData(e,s){return this.Tr(s),Me.resolve()}removeTargetData(e,s){return this.oi.delete(s.target),this.ai.Hr(s.targetId),this.targetCount-=1,Me.resolve()}removeTargets(e,s,r){let a=0;const i=[];return this.oi.forEach((l,d)=>{d.sequenceNumber<=s&&r.get(d.targetId)===null&&(this.oi.delete(l),i.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),Me.waitFor(i).next(()=>a)}getTargetCount(e){return Me.resolve(this.targetCount)}getTargetData(e,s){const r=this.oi.get(s)||null;return Me.resolve(r)}addMatchingKeys(e,s,r){return this.ai.Gr(s,r),Me.resolve()}removeMatchingKeys(e,s,r){this.ai.jr(s,r);const a=this.persistence.referenceDelegate,i=[];return a&&s.forEach(l=>{i.push(a.markPotentiallyOrphaned(e,l))}),Me.waitFor(i)}removeMatchingKeysForTargetId(e,s){return this.ai.Hr(s),Me.resolve()}getMatchingKeysForTargetId(e,s){const r=this.ai.Yr(s);return Me.resolve(r)}containsKey(e,s){return Me.resolve(this.ai.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,s){this.ci={},this.overlays={},this.li=new A0(0),this.hi=!1,this.hi=!0,this.Pi=new RF,this.referenceDelegate=e(this),this.Ti=new MF(this),this.indexManager=new bF,this.remoteDocumentCache=function(a){return new IF(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new xF(s),this.Ei=new CF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new AF,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ci[e.toKey()];return r||(r=new PF(s,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,s,r){st("MemoryPersistence","Starting transaction:",e);const a=new OF(this.li.next());return this.referenceDelegate.di(),r(a).next(i=>this.referenceDelegate.Ai(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ri(e,s){return Me.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,s)))}}class OF extends f7{constructor(e){super(),this.currentSequenceNumber=e}}class fN{constructor(e){this.persistence=e,this.Vi=new mN,this.mi=null}static fi(e){return new fN(e)}get gi(){if(this.mi)return this.mi;throw wt(60996)}addReference(e,s,r){return this.Vi.addReference(r,s),this.gi.delete(r.toString()),Me.resolve()}removeReference(e,s,r){return this.Vi.removeReference(r,s),this.gi.add(r.toString()),Me.resolve()}markPotentiallyOrphaned(e,s){return this.gi.add(s.toString()),Me.resolve()}removeTarget(e,s){this.Vi.Hr(s.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next(a=>{a.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,s))}di(){this.mi=new Set}Ai(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.gi,r=>{const a=bt.fromPath(r);return this.pi(e,a).next(i=>{i||s.removeEntry(a,kt.min())})}).next(()=>(this.mi=null,s.apply(e)))}updateLimboDocument(e,s){return this.pi(e,s).next(r=>{r?this.gi.delete(s.toString()):this.gi.add(s.toString())})}Ii(e){return 0}pi(e,s){return Me.or([()=>Me.resolve(this.Vi.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ri(e,s)])}}class Gp{constructor(e,s){this.persistence=e,this.yi=new hc(r=>x7(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=SF(this,s)}static fi(e,s){return new Gp(e,s)}di(){}Ai(e){return Me.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}pr(e){const s=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>s.next(a=>r+a))}Sr(e){let s=0;return this.yr(e,r=>{s++}).next(()=>s)}yr(e,s){return Me.forEach(this.yi,(r,a)=>this.Dr(e,r,a).next(i=>i?Me.resolve():s(a)))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.si(e,l=>this.Dr(e,l,s).next(d=>{d||(r++,i.removeEntry(l,kt.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,s){return this.yi.set(s,e.currentSequenceNumber),Me.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.yi.set(r,e.currentSequenceNumber),Me.resolve()}removeReference(e,s,r){return this.yi.set(r,e.currentSequenceNumber),Me.resolve()}updateLimboDocument(e,s){return this.yi.set(s,e.currentSequenceNumber),Me.resolve()}Ii(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=cp(e.data.value)),s}Dr(e,s,r){return Me.or([()=>this.persistence.Ri(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const a=this.yi.get(s);return Me.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,s,r,a){this.targetId=e,this.fromCache=s,this.ds=r,this.As=a}static Rs(e,s){let r=Yt(),a=Yt();for(const i of s.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new gN(e,s.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return pL()?8:g7(Jr())>0?6:4}()}initialize(e,s){this.ys=e,this.indexManager=s,this.Vs=!0}getDocumentsMatchingQuery(e,s,r,a){const i={result:null};return this.ws(e,s).next(l=>{i.result=l}).next(()=>{if(!i.result)return this.Ss(e,s,a,r).next(l=>{i.result=l})}).next(()=>{if(i.result)return;const l=new LF;return this.bs(e,s,l).next(d=>{if(i.result=d,this.fs)return this.Ds(e,s,l,d.size)})}).next(()=>i.result)}Ds(e,s,r,a){return r.documentReadCount<this.gs?(ad()<=Wt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",id(s),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Me.resolve()):(ad()<=Wt.DEBUG&&st("QueryEngine","Query:",id(s),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(ad()<=Wt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",id(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wa(s))):Me.resolve())}ws(e,s){if(Fk(s))return Me.resolve(null);let r=Wa(s);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(s.limit!==null&&a===1&&(s=$p(s,null,"F"),r=Wa(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const l=Yt(...i);return this.ys.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.vs(s,d);return this.Cs(s,h,l,u.readTime)?this.ws(e,$p(s,null,"F")):this.Fs(e,h,s,u)}))})))}Ss(e,s,r,a){return Fk(s)||a.isEqual(kt.min())?Me.resolve(null):this.ys.getDocuments(e,r).next(i=>{const l=this.vs(s,i);return this.Cs(s,l,r,a)?Me.resolve(null):(ad()<=Wt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),id(s)),this.Fs(e,l,s,d7(a,im)).next(d=>d))})}vs(e,s){let r=new fr($P(e));return s.forEach((a,i)=>{D0(e,i)&&(r=r.add(i))}),r}Cs(e,s,r,a){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const i=e.limitType==="F"?s.last():s.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}bs(e,s,r){return ad()<=Wt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",id(s)),this.ys.getDocumentsMatchingQuery(e,s,Mo.min(),r)}Fs(e,s,r,a){return this.ys.getDocumentsMatchingQuery(e,r,a).next(i=>(s.forEach(l=>{i=i.insert(l.key,l)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="LocalStore",VF=3e8;class FF{constructor(e,s,r,a){this.persistence=e,this.Ms=s,this.serializer=a,this.xs=new Us(zt),this.Os=new hc(i=>oN(i),lN),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TF(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.xs))}}function zF(t,e,s,r){return new FF(t,e,s,r)}async function p4(t,e){const s=Pt(t);return await s.persistence.runTransaction("Handle user change","readonly",r=>{let a;return s.mutationQueue.getAllMutationBatches(r).next(i=>(a=i,s.Ls(e),s.mutationQueue.getAllMutationBatches(r))).next(i=>{const l=[],d=[];let u=Yt();for(const h of a){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){d.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return s.localDocuments.getDocuments(r,u).next(h=>({ks:h,removedBatchIds:l,addedBatchIds:d}))})})}function BF(t,e){const s=Pt(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),i=s.Bs.newChangeBuffer({trackRemovals:!0});return function(d,u,h,f){const p=h.batch,x=p.keys();let w=Me.resolve();return x.forEach(N=>{w=w.next(()=>f.getEntry(u,N)).next(v=>{const j=h.docVersions.get(N);es(j!==null,48541),v.version.compareTo(j)<0&&(p.applyToRemoteDocument(v,h),v.isValidDocument()&&(v.setReadTime(h.commitVersion),f.addEntry(v)))})}),w.next(()=>d.mutationQueue.removeMutationBatch(u,p))}(s,r,e,i).next(()=>i.apply(r)).next(()=>s.mutationQueue.performConsistencyCheck(r)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let u=Yt();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(u=u.add(d.batch.mutations[h].key));return u}(e))).next(()=>s.localDocuments.getDocuments(r,a))})}function x4(t){const e=Pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Ti.getLastRemoteSnapshotVersion(s))}function $F(t,e){const s=Pt(t),r=e.snapshotVersion;let a=s.xs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const l=s.Bs.newChangeBuffer({trackRemovals:!0});a=s.xs;const d=[];e.targetChanges.forEach((f,p)=>{const x=a.get(p);if(!x)return;d.push(s.Ti.removeMatchingKeys(i,f.removedDocuments,p).next(()=>s.Ti.addMatchingKeys(i,f.addedDocuments,p)));let w=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(Fr.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),a=a.insert(p,w),function(v,j,k){return v.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=VF?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(x,w,f)&&d.push(s.Ti.updateTargetData(i,w))});let u=Vi(),h=Yt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&d.push(s.persistence.referenceDelegate.updateLimboDocument(i,f))}),d.push(qF(i,l,e.documentUpdates).next(f=>{u=f.qs,h=f.Qs})),!r.isEqual(kt.min())){const f=s.Ti.getLastRemoteSnapshotVersion(i).next(p=>s.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));d.push(f)}return Me.waitFor(d).next(()=>l.apply(i)).next(()=>s.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(s.xs=a,i))}function qF(t,e,s){let r=Yt(),a=Yt();return s.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let l=Vi();return s.forEach((d,u)=>{const h=i.get(d);u.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(d)),u.isNoDocument()&&u.version.isEqual(kt.min())?(e.removeEntry(d,u.readTime),l=l.insert(d,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),l=l.insert(d,u)):st(pN,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",u.version)}),{qs:l,Qs:a}})}function HF(t,e){const s=Pt(t);return s.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nN),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GF(t,e){const s=Pt(t);return s.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return s.Ti.getTargetData(r,e).next(i=>i?(a=i,Me.resolve(a)):s.Ti.allocateTargetId(r).next(l=>(a=new jo(e,l,"TargetPurposeListen",r.currentSequenceNumber),s.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=s.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(s.xs=s.xs.insert(r.targetId,r),s.Os.set(e,r.targetId)),r})}async function Ov(t,e,s){const r=Pt(t),a=r.xs.get(e),i=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",i,l=>r.persistence.referenceDelegate.removeTarget(l,a))}catch(l){if(!Kd(l))throw l;st(pN,`Failed to update sequence numbers for target ${e}: ${l}`)}r.xs=r.xs.remove(e),r.Os.delete(a.target)}function Zk(t,e,s){const r=Pt(t);let a=kt.min(),i=Yt();return r.persistence.runTransaction("Execute query","readwrite",l=>function(u,h,f){const p=Pt(u),x=p.Os.get(f);return x!==void 0?Me.resolve(p.xs.get(x)):p.Ti.getTargetData(h,f)}(r,l,Wa(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(l,d.targetId).next(u=>{i=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(l,e,s?a:kt.min(),s?i:Yt())).next(d=>(WF(r,O7(e),d),{documents:d,$s:i})))}function WF(t,e,s){let r=t.Ns.get(e)||kt.min();s.forEach((a,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class eE{constructor(){this.activeTargetIds=B7()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YF{constructor(){this.xo=new eE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,s,r){this.Oo[e]=s}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new eE,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="ConnectivityMonitor";class sE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){st(tE,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){st(tE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg=null;function Lv(){return Sg===null?Sg=function(){return 268435456+Math.round(2147483648*Math.random())}():Sg++,"0x"+Sg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="RestConnection",XF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QF{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=s+"://"+e.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===Fp?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(e,s,r,a,i){const l=Lv(),d=this.jo(e,s.toUriEncodedString());st(Pb,`Sending RPC '${e}' ${l}:`,d,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,a,i);const{host:h}=new URL(d),f=cc(h);return this.Jo(e,d,u,r,f).then(p=>(st(Pb,`Received RPC '${e}' ${l}: `,p),p),p=>{throw kd(Pb,`RPC '${e}' ${l} failed with error: `,p,"url: ",d,"request:",r),p})}Yo(e,s,r,a,i,l){return this.zo(e,s,r,a,i)}Ho(e,s,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((a,i)=>e[i]=a),r&&r.headers.forEach((a,i)=>e[i]=a)}jo(e,s){const r=XF[e];return`${this.Ko}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="WebChannelConnection";class ZF extends QF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,r,a,i){const l=Lv();return new Promise((d,u)=>{const h=new pP;h.setWithCredentials(!0),h.listenOnce(xP.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case lp.NO_ERROR:const p=h.getResponseJson();st(Hr,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(p)),d(p);break;case lp.TIMEOUT:st(Hr,`RPC '${e}' ${l} timed out`),u(new We(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case lp.HTTP_ERROR:const x=h.getStatus();if(st(Hr,`RPC '${e}' ${l} failed with status:`,x,"response text:",h.getResponseText()),x>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const v=function(k){const T=k.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(T)>=0?T:Pe.UNKNOWN}(N.status);u(new We(v,N.message))}else u(new We(Pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new We(Pe.UNAVAILABLE,"Connection failed."));break;default:wt(9055,{l_:e,streamId:l,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{st(Hr,`RPC '${e}' ${l} completed.`)}});const f=JSON.stringify(a);st(Hr,`RPC '${e}' ${l} sending request:`,a),h.send(s,"POST",f,r,15)})}T_(e,s,r){const a=Lv(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=vP(),d=bP(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,s,r),u.encodeInitMessageHeaders=!0;const f=i.join("");st(Hr,`Creating RPC '${e}' stream ${a}: ${f}`,u);const p=l.createWebChannel(f,u);let x=!1,w=!1;const N=new JF({Zo:j=>{w?st(Hr,`Not sending because RPC '${e}' stream ${a} is closed:`,j):(x||(st(Hr,`Opening RPC '${e}' stream ${a} transport.`),p.open(),x=!0),st(Hr,`RPC '${e}' stream ${a} sending:`,j),p.send(j))},Xo:()=>p.close()}),v=(j,k,T)=>{j.listen(k,P=>{try{T(P)}catch(U){setTimeout(()=>{throw U},0)}})};return v(p,Sh.EventType.OPEN,()=>{w||(st(Hr,`RPC '${e}' stream ${a} transport opened.`),N.__())}),v(p,Sh.EventType.CLOSE,()=>{w||(w=!0,st(Hr,`RPC '${e}' stream ${a} transport closed`),N.u_())}),v(p,Sh.EventType.ERROR,j=>{w||(w=!0,kd(Hr,`RPC '${e}' stream ${a} transport errored. Name:`,j.name,"Message:",j.message),N.u_(new We(Pe.UNAVAILABLE,"The operation could not be completed")))}),v(p,Sh.EventType.MESSAGE,j=>{var k;if(!w){const T=j.data[0];es(!!T,16349);const P=T,U=(P==null?void 0:P.error)||((k=P[0])===null||k===void 0?void 0:k.error);if(U){st(Hr,`RPC '${e}' stream ${a} received error:`,U);const R=U.status;let O=function(E){const D=sr[E];if(D!==void 0)return r4(D)}(R),I=U.message;O===void 0&&(O=Pe.INTERNAL,I="Unknown error status: "+R+" with message "+U.message),w=!0,N.u_(new We(O,I)),p.close()}else st(Hr,`RPC '${e}' stream ${a} received:`,T),N.c_(T)}}),v(d,yP.STAT_EVENT,j=>{j.stat===kv.PROXY?st(Hr,`RPC '${e}' stream ${a} detected buffering proxy`):j.stat===kv.NOPROXY&&st(Hr,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{N.a_()},0),N}}function Ib(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){return new rF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,s,r=1e3,a=1.5,i=6e4){this.xi=e,this.timerId=s,this.I_=r,this.E_=a,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const s=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),a=Math.max(0,s-r);a>0&&st("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.A_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="PersistentStream";class y4{constructor(e,s,r,a,i,l,d,u){this.xi=e,this.y_=r,this.w_=a,this.connection=i,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new xN(e,s)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,s){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():s&&s.code===Pe.RESOURCE_EXHAUSTED?(Ui(s.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):s&&s.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(s)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),s=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.S_===s&&this.K_(r,a)},r=>{e(()=>{const a=new We(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(a)})})}K_(e,s){const r=this.U_(this.S_);this.stream=this.G_(e,s),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.W_(a))}),this.stream.onMessage(a=>{r(()=>++this.v_==1?this.z_(a):this.onNext(a))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return st(rE,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return s=>{this.xi.enqueueAndForget(()=>this.S_===e?s():(st(rE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e9 extends y4{constructor(e,s,r,a,i,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,a,l),this.serializer=i}G_(e,s){return this.connection.T_("Listen",e,s)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const s=oF(this.serializer,e),r=function(i){if(!("targetChange"in i))return kt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?kt.min():l.readTime?Vn(l.readTime):kt.min()}(e);return this.listener.j_(s,r)}H_(e){const s={};s.database=Mv(this.serializer),s.addTarget=function(i,l){let d;const u=l.target;if(d=Rv(u)?{documents:cF(i,u)}:{query:dF(i,u).gt},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=i4(i,l.resumeToken);const h=Iv(i,l.expectedCount);h!==null&&(d.expectedCount=h)}else if(l.snapshotVersion.compareTo(kt.min())>0){d.readTime=qp(i,l.snapshotVersion.toTimestamp());const h=Iv(i,l.expectedCount);h!==null&&(d.expectedCount=h)}return d}(this.serializer,e);const r=hF(this.serializer,e);r&&(s.labels=r),this.L_(s)}J_(e){const s={};s.database=Mv(this.serializer),s.removeTarget=e,this.L_(s)}}class t9 extends y4{constructor(e,s,r,a,i,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,a,l),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,s){return this.connection.T_("Write",e,s)}z_(e){return es(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,es(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){es(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const s=lF(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.ea(r,s)}ta(){const e={};e.database=Mv(this.serializer),this.L_(e)}Z_(e){const s={streamToken:this.lastStreamToken,writes:e.map(r=>d4(this.serializer,r))};this.L_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{}class r9 extends s9{constructor(e,s,r,a){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=a,this.na=!1}ra(){if(this.na)throw new We(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,s,r,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.zo(e,Dv(s,r),a,i,l)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new We(Pe.UNKNOWN,i.toString())})}Yo(e,s,r,a,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Yo(e,Dv(s,r),a,l,d,i)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new We(Pe.UNKNOWN,l.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class n9{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ui(s),this.oa=!1):st("OnlineStateTracker",s)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl="RemoteStore";class a9{constructor(e,s,r,a,i){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(l=>{r.enqueueAndForget(async()=>{mc(this)&&(st(Zl,"Restarting streams for network reachability change."),await async function(u){const h=Pt(u);h.Ta.add(4),await Bm(h),h.da.set("Unknown"),h.Ta.delete(4),await z0(h)}(this))})}),this.da=new n9(r,a)}}async function z0(t){if(mc(t))for(const e of t.Ia)await e(!0)}async function Bm(t){for(const e of t.Ia)await e(!1)}function b4(t,e){const s=Pt(t);s.Pa.has(e.targetId)||(s.Pa.set(e.targetId,e),wN(s)?vN(s):Qd(s).M_()&&bN(s,e))}function yN(t,e){const s=Pt(t),r=Qd(s);s.Pa.delete(e),r.M_()&&v4(s,e),s.Pa.size===0&&(r.M_()?r.N_():mc(s)&&s.da.set("Unknown"))}function bN(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Qd(t).H_(e)}function v4(t,e){t.Aa.Ke(e),Qd(t).J_(e)}function vN(t){t.Aa=new Z7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Qd(t).start(),t.da._a()}function wN(t){return mc(t)&&!Qd(t).F_()&&t.Pa.size>0}function mc(t){return Pt(t).Ta.size===0}function w4(t){t.Aa=void 0}async function i9(t){t.da.set("Online")}async function o9(t){t.Pa.forEach((e,s)=>{bN(t,e)})}async function l9(t,e){w4(t),wN(t)?(t.da.ca(e),vN(t)):t.da.set("Unknown")}async function c9(t,e,s){if(t.da.set("Online"),e instanceof a4&&e.state===2&&e.cause)try{await async function(a,i){const l=i.cause;for(const d of i.targetIds)a.Pa.has(d)&&(await a.remoteSyncer.rejectListen(d,l),a.Pa.delete(d),a.Aa.removeTarget(d))}(t,e)}catch(r){st(Zl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wp(t,r)}else if(e instanceof hp?t.Aa.Xe(e):e instanceof n4?t.Aa.ot(e):t.Aa.nt(e),!s.isEqual(kt.min()))try{const r=await x4(t.localStore);s.compareTo(r)>=0&&await function(i,l){const d=i.Aa.It(l);return d.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Pa.get(h);f&&i.Pa.set(h,f.withResumeToken(u.resumeToken,l))}}),d.targetMismatches.forEach((u,h)=>{const f=i.Pa.get(u);if(!f)return;i.Pa.set(u,f.withResumeToken(Fr.EMPTY_BYTE_STRING,f.snapshotVersion)),v4(i,u);const p=new jo(f.target,u,h,f.sequenceNumber);bN(i,p)}),i.remoteSyncer.applyRemoteEvent(d)}(t,s)}catch(r){st(Zl,"Failed to raise snapshot:",r),await Wp(t,r)}}async function Wp(t,e,s){if(!Kd(e))throw e;t.Ta.add(1),await Bm(t),t.da.set("Offline"),s||(s=()=>x4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{st(Zl,"Retrying IndexedDB access"),await s(),t.Ta.delete(1),await z0(t)})}function N4(t,e){return e().catch(s=>Wp(t,s,e))}async function B0(t){const e=Pt(t),s=Vo(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:nN;for(;d9(e);)try{const a=await HF(e.localStore,r);if(a===null){e.ha.length===0&&s.N_();break}r=a.batchId,u9(e,a)}catch(a){await Wp(e,a)}j4(e)&&_4(e)}function d9(t){return mc(t)&&t.ha.length<10}function u9(t,e){t.ha.push(e);const s=Vo(t);s.M_()&&s.Y_&&s.Z_(e.mutations)}function j4(t){return mc(t)&&!Vo(t).F_()&&t.ha.length>0}function _4(t){Vo(t).start()}async function h9(t){Vo(t).ta()}async function m9(t){const e=Vo(t);for(const s of t.ha)e.Z_(s.mutations)}async function f9(t,e,s){const r=t.ha.shift(),a=dN.from(r,e,s);await N4(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await B0(t)}async function g9(t,e){e&&Vo(t).Y_&&await async function(r,a){if(function(l){return s4(l)&&l!==Pe.ABORTED}(a.code)){const i=r.ha.shift();Vo(r).O_(),await N4(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,a)),await B0(r)}}(t,e),j4(t)&&_4(t)}async function nE(t,e){const s=Pt(t);s.asyncQueue.verifyOperationInProgress(),st(Zl,"RemoteStore received new credentials");const r=mc(s);s.Ta.add(3),await Bm(s),r&&s.da.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ta.delete(3),await z0(s)}async function p9(t,e){const s=Pt(t);e?(s.Ta.delete(2),await z0(s)):e||(s.Ta.add(2),await Bm(s),s.da.set("Unknown"))}function Qd(t){return t.Ra||(t.Ra=function(s,r,a){const i=Pt(s);return i.ra(),new e9(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{e_:i9.bind(null,t),n_:o9.bind(null,t),i_:l9.bind(null,t),j_:c9.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),wN(t)?vN(t):t.da.set("Unknown")):(await t.Ra.stop(),w4(t))})),t.Ra}function Vo(t){return t.Va||(t.Va=function(s,r,a){const i=Pt(s);return i.ra(),new t9(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:h9.bind(null,t),i_:g9.bind(null,t),X_:m9.bind(null,t),ea:f9.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await B0(t)):(await t.Va.stop(),t.ha.length>0&&(st(Zl,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,s,r,a,i){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new Ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,a,i){const l=Date.now()+r,d=new NN(e,s,l,a,i);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jN(t,e){if(Ui("AsyncQueue",`${e}: ${t}`),Kd(t))return new We(Pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{static emptySet(e){return new vd(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||bt.comparator(s.key,r.key):(s,r)=>bt.comparator(s.key,r.key),this.keyedMap=kh(),this.sortedSet=new Us(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,r)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof vd)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const a=s.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new vd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.ma=new Us(bt.comparator)}track(e){const s=e.doc.key,r=this.ma.get(s);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(s,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(s):e.type===1&&r.type===2?this.ma=this.ma.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(s,{type:2,doc:e.doc}):wt(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(s,e)}ga(){const e=[];return this.ma.inorderTraversal((s,r)=>{e.push(r)}),e}}class Id{constructor(e,s,r,a,i,l,d,u,h){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,s,r,a,i){const l=[];return s.forEach(d=>{l.push({type:0,doc:d})}),new Id(e,s,vd.emptySet(s),l,r,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&I0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let a=0;a<s.length;a++)if(s[a].type!==r[a].type||!s[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class y9{constructor(){this.queries=iE(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(s,r){const a=Pt(s),i=a.queries;a.queries=iE(),i.forEach((l,d)=>{for(const u of d.ya)u.onError(r)})})(this,new We(Pe.ABORTED,"Firestore shutting down"))}}function iE(){return new hc(t=>BP(t),I0)}async function _N(t,e){const s=Pt(t);let r=3;const a=e.query;let i=s.queries.get(a);i?!i.wa()&&e.Sa()&&(r=2):(i=new x9,r=e.Sa()?0:1);try{switch(r){case 0:i.pa=await s.onListen(a,!0);break;case 1:i.pa=await s.onListen(a,!1);break;case 2:await s.onFirstRemoteStoreListen(a)}}catch(l){const d=jN(l,`Initialization of query '${id(e.query)}' failed`);return void e.onError(d)}s.queries.set(a,i),i.ya.push(e),e.Da(s.onlineState),i.pa&&e.va(i.pa)&&kN(s)}async function SN(t,e){const s=Pt(t),r=e.query;let a=3;const i=s.queries.get(r);if(i){const l=i.ya.indexOf(e);l>=0&&(i.ya.splice(l,1),i.ya.length===0?a=e.Sa()?0:1:!i.wa()&&e.Sa()&&(a=2))}switch(a){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function b9(t,e){const s=Pt(t);let r=!1;for(const a of e){const i=a.query,l=s.queries.get(i);if(l){for(const d of l.ya)d.va(a)&&(r=!0);l.pa=a}}r&&kN(s)}function v9(t,e,s){const r=Pt(t),a=r.queries.get(e);if(a)for(const i of a.ya)i.onError(s);r.queries.delete(e)}function kN(t){t.ba.forEach(e=>{e.next()})}var Uv,oE;(oE=Uv||(Uv={})).Ca="default",oE.Cache="cache";class EN{constructor(e,s,r){this.query=e,this.Fa=s,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Id(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),s=!0):this.Na(e,this.onlineState)&&(this.Ba(e),s=!0),this.xa=e,s}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let s=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),s=!0),s}Na(e,s){if(!e.fromCache||!this.Sa())return!0;const r=s!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const s=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}Ba(e){e=Id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Uv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.key=e}}class k4{constructor(e){this.key=e}}class w9{constructor(e,s){this.query=e,this.Ga=s,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Yt(),this.mutatedKeys=Yt(),this.Ha=$P(e),this.Ja=new vd(this.Ha)}get Ya(){return this.Ga}Za(e,s){const r=s?s.Xa:new aE,a=s?s.Ja:this.Ja;let i=s?s.mutatedKeys:this.mutatedKeys,l=a,d=!1;const u=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((f,p)=>{const x=a.get(f),w=D0(this.query,p)?p:null,N=!!x&&this.mutatedKeys.has(x.key),v=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let j=!1;x&&w?x.data.isEqual(w.data)?N!==v&&(r.track({type:3,doc:w}),j=!0):this.eu(x,w)||(r.track({type:2,doc:w}),j=!0,(u&&this.Ha(w,u)>0||h&&this.Ha(w,h)<0)&&(d=!0)):!x&&w?(r.track({type:0,doc:w}),j=!0):x&&!w&&(r.track({type:1,doc:x}),j=!0,(u||h)&&(d=!0)),j&&(w?(l=l.add(w),i=v?i.add(f):i.delete(f)):(l=l.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const f=this.query.limitType==="F"?l.last():l.first();l=l.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ja:l,Xa:r,Cs:d,mutatedKeys:i}}eu(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,a){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const l=e.Xa.ga();l.sort((f,p)=>function(w,N){const v=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt(20277,{Vt:j})}};return v(w)-v(N)}(f.type,p.type)||this.Ha(f.doc,p.doc)),this.tu(r),a=a!=null&&a;const d=s&&!a?this.nu():[],u=this.ja.size===0&&this.current&&!a?1:0,h=u!==this.za;return this.za=u,l.length!==0||h?{snapshot:new Id(this.query,e.Ja,i,l,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:d}:{ru:d}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new aE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(s=>this.Ga=this.Ga.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.Ga=this.Ga.delete(s)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Yt(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const s=[];return e.forEach(r=>{this.ja.has(r)||s.push(new k4(r))}),this.ja.forEach(r=>{e.has(r)||s.push(new S4(r))}),s}su(e){this.Ga=e.$s,this.ja=Yt();const s=this.Za(e.documents);return this.applyChanges(s,!0)}ou(){return Id.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const TN="SyncEngine";class N9{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class j9{constructor(e){this.key=e,this._u=!1}}class _9{constructor(e,s,r,a,i,l){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=l,this.au={},this.uu=new hc(d=>BP(d),I0),this.cu=new Map,this.lu=new Set,this.hu=new Us(bt.comparator),this.Pu=new Map,this.Tu=new mN,this.Iu={},this.Eu=new Map,this.du=Pd.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function S9(t,e,s=!0){const r=P4(t);let a;const i=r.uu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.ou()):a=await E4(r,e,s,!0),a}async function k9(t,e){const s=P4(t);await E4(s,e,!0,!1)}async function E4(t,e,s,r){const a=await GF(t.localStore,Wa(e)),i=a.targetId,l=t.sharedClientState.addLocalQueryTarget(i,s);let d;return r&&(d=await E9(t,e,i,l==="current",a.resumeToken)),t.isPrimaryClient&&s&&b4(t.remoteStore,a),d}async function E9(t,e,s,r,a){t.Ru=(p,x,w)=>async function(v,j,k,T){let P=j.view.Za(k);P.Cs&&(P=await Zk(v.localStore,j.query,!1).then(({documents:I})=>j.view.Za(I,P)));const U=T&&T.targetChanges.get(j.targetId),R=T&&T.targetMismatches.get(j.targetId)!=null,O=j.view.applyChanges(P,v.isPrimaryClient,U,R);return cE(v,j.targetId,O.ru),O.snapshot}(t,p,x,w);const i=await Zk(t.localStore,e,!0),l=new w9(e,i.$s),d=l.Za(i.documents),u=zm.createSynthesizedTargetChangeForCurrentChange(s,r&&t.onlineState!=="Offline",a),h=l.applyChanges(d,t.isPrimaryClient,u);cE(t,s,h.ru);const f=new N9(e,s,l);return t.uu.set(e,f),t.cu.has(s)?t.cu.get(s).push(e):t.cu.set(s,[e]),h.snapshot}async function T9(t,e,s){const r=Pt(t),a=r.uu.get(e),i=r.cu.get(a.targetId);if(i.length>1)return r.cu.set(a.targetId,i.filter(l=>!I0(l,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ov(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),s&&yN(r.remoteStore,a.targetId),Vv(r,a.targetId)}).catch(Yd)):(Vv(r,a.targetId),await Ov(r.localStore,a.targetId,!0))}async function C9(t,e){const s=Pt(t),r=s.uu.get(e),a=s.cu.get(r.targetId);s.isPrimaryClient&&a.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),yN(s.remoteStore,r.targetId))}async function A9(t,e,s){const r=L9(t);try{const a=await function(l,d){const u=Pt(l),h=mr.now(),f=d.reduce((w,N)=>w.add(N.key),Yt());let p,x;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=Vi(),v=Yt();return u.Bs.getEntries(w,f).next(j=>{N=j,N.forEach((k,T)=>{T.isValidDocument()||(v=v.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,N)).next(j=>{p=j;const k=[];for(const T of d){const P=Y7(T,p.get(T.key).overlayedDocument);P!=null&&k.push(new Go(T.key,P,DP(P.value.mapValue),Ur.exists(!0)))}return u.mutationQueue.addMutationBatch(w,h,k,d)}).next(j=>{x=j;const k=j.applyToLocalDocumentSet(p,v);return u.documentOverlayCache.saveOverlays(w,j.batchId,k)})}).then(()=>({batchId:x.batchId,changes:HP(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(l,d,u){let h=l.Iu[l.currentUser.toKey()];h||(h=new Us(zt)),h=h.insert(d,u),l.Iu[l.currentUser.toKey()]=h}(r,a.batchId,s),await $m(r,a.changes),await B0(r.remoteStore)}catch(a){const i=jN(a,"Failed to persist write");s.reject(i)}}async function T4(t,e){const s=Pt(t);try{const r=await $F(s.localStore,e);e.targetChanges.forEach((a,i)=>{const l=s.Pu.get(i);l&&(es(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?l._u=!0:a.modifiedDocuments.size>0?es(l._u,14607):a.removedDocuments.size>0&&(es(l._u,42227),l._u=!1))}),await $m(s,r,e)}catch(r){await Yd(r)}}function lE(t,e,s){const r=Pt(t);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const a=[];r.uu.forEach((i,l)=>{const d=l.view.Da(e);d.snapshot&&a.push(d.snapshot)}),function(l,d){const u=Pt(l);u.onlineState=d;let h=!1;u.queries.forEach((f,p)=>{for(const x of p.ya)x.Da(d)&&(h=!0)}),h&&kN(u)}(r.eventManager,e),a.length&&r.au.j_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function R9(t,e,s){const r=Pt(t);r.sharedClientState.updateQueryState(e,"rejected",s);const a=r.Pu.get(e),i=a&&a.key;if(i){let l=new Us(bt.comparator);l=l.insert(i,Sr.newNoDocument(i,kt.min()));const d=Yt().add(i),u=new V0(kt.min(),new Map,new Us(zt),l,d);await T4(r,u),r.hu=r.hu.remove(i),r.Pu.delete(e),CN(r)}else await Ov(r.localStore,e,!1).then(()=>Vv(r,e,s)).catch(Yd)}async function P9(t,e){const s=Pt(t),r=e.batch.batchId;try{const a=await BF(s.localStore,e);A4(s,r,null),C4(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await $m(s,a)}catch(a){await Yd(a)}}async function I9(t,e,s){const r=Pt(t);try{const a=await function(l,d){const u=Pt(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,d).next(p=>(es(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,d)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);A4(r,e,s),C4(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await $m(r,a)}catch(a){await Yd(a)}}function C4(t,e){(t.Eu.get(e)||[]).forEach(s=>{s.resolve()}),t.Eu.delete(e)}function A4(t,e,s){const r=Pt(t);let a=r.Iu[r.currentUser.toKey()];if(a){const i=a.get(e);i&&(s?i.reject(s):i.resolve(),a=a.remove(e)),r.Iu[r.currentUser.toKey()]=a}}function Vv(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.cu.get(e))t.uu.delete(r),s&&t.au.Vu(r,s);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||R4(t,r)})}function R4(t,e){t.lu.delete(e.path.canonicalString());const s=t.hu.get(e);s!==null&&(yN(t.remoteStore,s),t.hu=t.hu.remove(e),t.Pu.delete(s),CN(t))}function cE(t,e,s){for(const r of s)r instanceof S4?(t.Tu.addReference(r.key,e),D9(t,r)):r instanceof k4?(st(TN,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||R4(t,r.key)):wt(19791,{mu:r})}function D9(t,e){const s=e.key,r=s.path.canonicalString();t.hu.get(s)||t.lu.has(r)||(st(TN,"New document in limbo: "+s),t.lu.add(r),CN(t))}function CN(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const s=new bt(_s.fromString(e)),r=t.du.next();t.Pu.set(r,new j9(s)),t.hu=t.hu.insert(s,r),b4(t.remoteStore,new jo(Wa(P0(s.path)),r,"TargetPurposeLimboResolution",A0.le))}}async function $m(t,e,s){const r=Pt(t),a=[],i=[],l=[];r.uu.isEmpty()||(r.uu.forEach((d,u)=>{l.push(r.Ru(u,e,s).then(h=>{var f;if((h||s)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=s==null?void 0:s.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){a.push(h);const p=gN.Rs(u.targetId,h);i.push(p)}}))}),await Promise.all(l),r.au.j_(a),await async function(u,h){const f=Pt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Me.forEach(h,x=>Me.forEach(x.ds,w=>f.persistence.referenceDelegate.addReference(p,x.targetId,w)).next(()=>Me.forEach(x.As,w=>f.persistence.referenceDelegate.removeReference(p,x.targetId,w)))))}catch(p){if(!Kd(p))throw p;st(pN,"Failed to update sequence numbers: "+p)}for(const p of h){const x=p.targetId;if(!p.fromCache){const w=f.xs.get(x),N=w.snapshotVersion,v=w.withLastLimboFreeSnapshotVersion(N);f.xs=f.xs.insert(x,v)}}}(r.localStore,i))}async function M9(t,e){const s=Pt(t);if(!s.currentUser.isEqual(e)){st(TN,"User change. New user:",e.toKey());const r=await p4(s.localStore,e);s.currentUser=e,function(i,l){i.Eu.forEach(d=>{d.forEach(u=>{u.reject(new We(Pe.CANCELLED,l))})}),i.Eu.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $m(s,r.ks)}}function O9(t,e){const s=Pt(t),r=s.Pu.get(e);if(r&&r._u)return Yt().add(r.key);{let a=Yt();const i=s.cu.get(e);if(!i)return a;for(const l of i){const d=s.uu.get(l);a=a.unionWith(d.view.Ya)}return a}}function P4(t){const e=Pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=T4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R9.bind(null,e),e.au.j_=b9.bind(null,e.eventManager),e.au.Vu=v9.bind(null,e.eventManager),e}function L9(t){const e=Pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I9.bind(null,e),e}class Yp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=F0(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,s){return null}bu(e,s){return null}wu(e){return zF(this.persistence,new UF,e.initialUser,this.serializer)}yu(e){return new g4(fN.fi,this.serializer)}pu(e){return new YF}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yp.provider={build:()=>new Yp};class U9 extends Yp{constructor(e){super(),this.cacheSizeBytes=e}Su(e,s){es(this.persistence.referenceDelegate instanceof Gp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jF(r,e.asyncQueue,s)}yu(e){const s=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new g4(r=>Gp.fi(r,s),this.serializer)}}class Fv{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=M9.bind(null,this.syncEngine),await p9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y9}()}createDatastore(e){const s=F0(e.databaseInfo.databaseId),r=function(i){return new ZF(i)}(e.databaseInfo);return function(i,l,d,u){return new r9(i,l,d,u)}(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return function(r,a,i,l,d){return new a9(r,a,i,l,d)}(this.localStore,this.datastore,e.asyncQueue,s=>lE(this.syncEngine,s,0),function(){return sE.C()?new sE:new KF}())}createSyncEngine(e,s){return function(a,i,l,d,u,h,f){const p=new _9(a,i,l,d,u,h);return f&&(p.Au=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(a){const i=Pt(a);st(Zl,"RemoteStore shutting down."),i.Ta.add(5),await Bm(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}Fv.provider={build:()=>new Fv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new We(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const s=await async function(a,i){const l=Pt(a),d={documents:i.map(p=>Hp(l.serializer,p))},u=await l.Yo("BatchGetDocuments",l.serializer.databaseId,_s.emptyPath(),d,i.length),h=new Map;u.forEach(p=>{const x=iF(l.serializer,p);h.set(x.key.toString(),x)});const f=[];return i.forEach(p=>{const x=h.get(p.toString());es(!!x,55234,{key:p}),f.push(x)}),f}(this.datastore,e);return s.forEach(r=>this.recordVersion(r)),s}set(e,s){this.write(s.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,s){try{this.write(s.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new U0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(s=>{e.delete(s.key.toString())}),e.forEach((s,r)=>{const a=bt.fromPath(r);this.mutations.push(new t4(a,this.precondition(a)))}),await async function(r,a){const i=Pt(r),l={writes:a.map(d=>d4(i.serializer,d))};await i.zo("Commit",i.serializer.databaseId,_s.emptyPath(),l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let s;if(e.isFoundDocument())s=e.version;else{if(!e.isNoDocument())throw wt(50498,{qu:e.constructor.name});s=kt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!s.isEqual(r))throw new We(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),s)}precondition(e){const s=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&s?s.isEqual(kt.min())?Ur.exists(!1):Ur.updateTime(s):Ur.none()}preconditionForUpdate(e){const s=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&s){if(s.isEqual(kt.min()))throw new We(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(s)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,s,r,a,i){this.asyncQueue=e,this.datastore=s,this.options=r,this.updateFunction=a,this.deferred=i,this.Qu=r.maxAttempts,this.C_=new xN(this.asyncQueue,"transaction_retry")}$u(){this.Qu-=1,this.Uu()}Uu(){this.C_.f_(async()=>{const e=new V9(this.datastore),s=this.Ku(e);s&&s.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(a=>{this.Wu(a)}))}).catch(r=>{this.Wu(r)})})}Ku(e){try{const s=this.updateFunction(e);return!Vm(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(s){return this.deferred.reject(s),null}}Wu(e){this.Qu>0&&this.Gu(e)?(this.Qu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Uu(),Promise.resolve()))):this.deferred.reject(e)}Gu(e){if(e.name==="FirebaseError"){const s=e.code;return s==="aborted"||s==="failed-precondition"||s==="already-exists"||!s4(s)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="FirestoreClient";class z9{constructor(e,s,r,a,i){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=a,this.user=Wr.UNAUTHENTICATED,this.clientId=_P.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async l=>{st(Fo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(st(Fo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=jN(s,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Db(t,e){t.asyncQueue.verifyOperationInProgress(),st(Fo,"Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let r=s.initialUser;t.setCredentialChangeListener(async a=>{r.isEqual(a)||(await p4(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dE(t,e){t.asyncQueue.verifyOperationInProgress();const s=await B9(t);st(Fo,"Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(r=>nE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,a)=>nE(e.remoteStore,a)),t._onlineComponents=e}async function B9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){st(Fo,"Using user provided OfflineComponentProvider");try{await Db(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(a){return a.name==="FirebaseError"?a.code===Pe.FAILED_PRECONDITION||a.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(s))throw s;kd("Error using user provided cache. Falling back to memory cache: "+s),await Db(t,new Yp)}}else st(Fo,"Using default OfflineComponentProvider"),await Db(t,new U9(void 0));return t._offlineComponents}async function RN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(st(Fo,"Using user provided OnlineComponentProvider"),await dE(t,t._uninitializedComponentsProvider._online)):(st(Fo,"Using default OnlineComponentProvider"),await dE(t,new Fv))),t._onlineComponents}function $9(t){return RN(t).then(e=>e.syncEngine)}function q9(t){return RN(t).then(e=>e.datastore)}async function Kp(t){const e=await RN(t),s=e.eventManager;return s.onListen=S9.bind(null,e.syncEngine),s.onUnlisten=T9.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=k9.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=C9.bind(null,e.syncEngine),s}function H9(t,e,s={}){const r=new Ga;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,d,u,h){const f=new AN({next:x=>{f.Cu(),l.enqueueAndForget(()=>SN(i,p));const w=x.docs.has(d);!w&&x.fromCache?h.reject(new We(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&x.fromCache&&u&&u.source==="server"?h.reject(new We(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new EN(P0(d.path),f,{includeMetadataChanges:!0,La:!0});return _N(i,p)}(await Kp(t),t.asyncQueue,e,s,r)),r.promise}function G9(t,e,s={}){const r=new Ga;return t.asyncQueue.enqueueAndForget(async()=>function(i,l,d,u,h){const f=new AN({next:x=>{f.Cu(),l.enqueueAndForget(()=>SN(i,p)),x.fromCache&&u.source==="server"?h.reject(new We(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new EN(d,f,{includeMetadataChanges:!0,La:!0});return _N(i,p)}(await Kp(t),t.asyncQueue,e,s,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t,e,s){if(!s)throw new We(Pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W9(t,e,s,r){if(e===!0&&r===!0)throw new We(Pe.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function hE(t){if(!bt.isDocumentKey(t))throw new We(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mE(t){if(bt.isDocumentKey(t))throw new We(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wt(12329,{type:typeof t})}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=$0(t);throw new We(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="firestore.googleapis.com",fE=!0;class gE{constructor(e){var s,r;if(e.host===void 0){if(e.ssl!==void 0)throw new We(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M4,this.ssl=fE}else this.host=e.host,this.ssl=(s=e.ssl)!==null&&s!==void 0?s:fE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wF)throw new We(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new We(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new We(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new We(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class q0{constructor(e,s,r,a){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new t7;switch(r.type){case"firstParty":return new a7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Gd("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const r=uE.get(s);r&&(st("ComponentProvider","Removing Datastore"),uE.delete(s),r.terminate())}(this),Promise.resolve()}}function Y9(t,e,s,r={}){var a;t=dn(t,q0);const i=cc(e),l=t._getSettings(),d=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${s}`;l.host!==M4&&l.host!==u&&kd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:u,ssl:i,emulatorOptions:r});if(!Mi(h,d)&&(t._setSettings(h),i&&(Fw(`https://${u}`),Gd("Firestore",!0)),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Wr.MOCK_USER;else{f=wR(r.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new We(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Wr(x)}t._authCredentials=new s7(new NP(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class Vr{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vr(this.firestore,e,this._key)}}class Ro extends Bi{constructor(e,s,r){super(e,s,P0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vr(this.firestore,null,new bt(e))}withConverter(e){return new Ro(this.firestore,e,this._path)}}function Ue(t,e,...s){if(t=hs(t),D4("collection","path",e),t instanceof q0){const r=_s.fromString(e,...s);return mE(r),new Ro(t,null,r)}{if(!(t instanceof Vr||t instanceof Ro))throw new We(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_s.fromString(e,...s));return mE(r),new Ro(t.firestore,null,r)}}function _e(t,e,...s){if(t=hs(t),arguments.length===1&&(e=_P.newId()),D4("doc","path",e),t instanceof q0){const r=_s.fromString(e,...s);return hE(r),new Vr(t,null,new bt(r))}{if(!(t instanceof Vr||t instanceof Ro))throw new We(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_s.fromString(e,...s));return hE(r),new Vr(t.firestore,t instanceof Ro?t.converter:null,new bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="AsyncQueue";class xE{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new xN(this,"async_queue_retry"),this.ec=()=>{const r=Ib();r&&st(pE,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const s=Ib();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const s=Ib();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const s=new Ga;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Kd(e))throw e;st(pE,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const s=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Ui("INTERNAL UNHANDLED ERROR: ",yE(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=s,s}enqueueAfterDelay(e,s,r){this.nc(),this.Xu.indexOf(e)>-1&&(s=0);const a=NN.createAndSchedule(this,e,s,r,i=>this.oc(i));return this.Hu.push(a),a}nc(){this.Ju&&wt(47125,{_c:yE(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const s of this.Hu)if(s.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((s,r)=>s.targetTimeMs-r.targetTimeMs);for(const s of this.Hu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const s=this.Hu.indexOf(e);this.Hu.splice(s,1)}}function yE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){return function(s,r){if(typeof s!="object"||s===null)return!1;const a=s;for(const i of r)if(i in a&&typeof a[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ti extends q0{constructor(e,s,r,a){super(e,s,r,a),this.type="firestore",this._queue=new xE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xE(e),this._firestoreClient=void 0,await e}}}function O4(t,e){const s=typeof t=="object"?t:qw(),r=typeof t=="string"?t:Fp,a=j0(s,"firestore").getImmediate({identifier:r});if(!a._initialized){const i=yR("firestore");i&&Y9(a,...i)}return a}function qm(t){if(t._terminated)throw new We(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K9(t),t._firestoreClient}function K9(t){var e,s,r;const a=t._freezeSettings(),i=function(d,u,h,f){return new v7(d,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,I4(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((s=a.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new z9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(d){const u=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ec(Fr.fromBase64String(e))}catch(s){throw new We(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new ec(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new We(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new We(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new We(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==a[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9=/^__.*__$/;class Q9{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Go(e,this.data,this.fieldMask,s,this.fieldTransforms):new Fm(e,this.data,s,this.fieldTransforms)}}class L4{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Go(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function U4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt(40011,{hc:t})}}class H0{constructor(e,s,r,a,i,l){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=a,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=l||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new H0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Tc({path:r,Ec:!1});return a.dc(e),a}Ac(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Tc({path:r,Ec:!1});return a.Pc(),a}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Xp(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(U4(this.hc)&&X9.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class J9{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||F0(e)}gc(e,s,r,a=!1){return new H0({hc:e,methodName:s,fc:r,path:Lr.emptyPath(),Ec:!1,mc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gm(t){const e=t._freezeSettings(),s=F0(t._databaseId);return new J9(t._databaseId,!!e.ignoreUndefinedProperties,s)}function DN(t,e,s,r,a,i={}){const l=t.gc(i.merge||i.mergeFields?2:0,e,s,a);VN("Data must be an object, but it was:",l,r);const d=B4(r,l);let u,h;if(i.merge)u=new Ln(l.fieldMask),h=l.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const x=zv(e,p,s);if(!l.contains(x))throw new We(Pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);q4(f,x)||f.push(x)}u=new Ln(f),h=l.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=l.fieldTransforms;return new Q9(new on(d),u,h)}class G0 extends fc{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof G0}}function V4(t,e,s){return new H0({hc:3,fc:e.settings.fc,methodName:t._methodName,Ec:s},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class MN extends fc{_toFieldTransform(e){return new O0(e.path,new um)}isEqual(e){return e instanceof MN}}class ON extends fc{constructor(e,s){super(e),this.yc=s}_toFieldTransform(e){const s=V4(this,e,!0),r=this.yc.map(i=>gc(i,s)),a=new Ad(r);return new O0(e.path,a)}isEqual(e){return e instanceof ON&&Mi(this.yc,e.yc)}}class LN extends fc{constructor(e,s){super(e),this.yc=s}_toFieldTransform(e){const s=V4(this,e,!0),r=this.yc.map(i=>gc(i,s)),a=new Rd(r);return new O0(e.path,a)}isEqual(e){return e instanceof LN&&Mi(this.yc,e.yc)}}class UN extends fc{constructor(e,s){super(e),this.wc=s}_toFieldTransform(e){const s=new hm(e.serializer,YP(e.serializer,this.wc));return new O0(e.path,s)}isEqual(e){return e instanceof UN&&this.wc===e.wc}}function F4(t,e,s,r){const a=t.gc(1,e,s);VN("Data must be an object, but it was:",a,r);const i=[],l=on.empty();Ho(r,(u,h)=>{const f=FN(e,u,s);h=hs(h);const p=a.Ac(f);if(h instanceof G0)i.push(f);else{const x=gc(h,p);x!=null&&(i.push(f),l.set(f,x))}});const d=new Ln(i);return new L4(l,d,a.fieldTransforms)}function z4(t,e,s,r,a,i){const l=t.gc(1,e,s),d=[zv(e,r,s)],u=[a];if(i.length%2!=0)throw new We(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)d.push(zv(e,i[x])),u.push(i[x+1]);const h=[],f=on.empty();for(let x=d.length-1;x>=0;--x)if(!q4(h,d[x])){const w=d[x];let N=u[x];N=hs(N);const v=l.Ac(w);if(N instanceof G0)h.push(w);else{const j=gc(N,v);j!=null&&(h.push(w),f.set(w,j))}}const p=new Ln(h);return new L4(f,p,l.fieldTransforms)}function Z9(t,e,s,r=!1){return gc(s,t.gc(r?4:3,e))}function gc(t,e){if($4(t=hs(t)))return VN("Unsupported field value:",e,t),B4(t,e);if(t instanceof fc)return function(r,a){if(!U4(a.hc))throw a.Vc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Vc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,a){const i=[];let l=0;for(const d of r){let u=gc(d,a.Rc(l));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),l++}return{arrayValue:{values:i}}}(t,e)}return function(r,a){if((r=hs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YP(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=mr.fromDate(r);return{timestampValue:qp(a.serializer,i)}}if(r instanceof mr){const i=new mr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qp(a.serializer,i)}}if(r instanceof PN)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ec)return{bytesValue:i4(a.serializer,r._byteString)};if(r instanceof Vr){const i=a.databaseId,l=r.firestore._databaseId;if(!l.isEqual(i))throw a.Vc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hN(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof IN)return function(l,d){return{mapValue:{fields:{[PP]:{stringValue:IP},[zp]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw d.Vc("VectorValues must only contain numeric values.");return cN(d.serializer,h)})}}}}}}(r,a);throw a.Vc(`Unsupported field value: ${$0(r)}`)}(t,e)}function B4(t,e){const s={};return kP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(t,(r,a)=>{const i=gc(a,e.Ic(r));i!=null&&(s[r]=i)}),{mapValue:{fields:s}}}function $4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mr||t instanceof PN||t instanceof ec||t instanceof Vr||t instanceof fc||t instanceof IN)}function VN(t,e,s){if(!$4(s)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(s)){const r=$0(s);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}function zv(t,e,s){if((e=hs(e))instanceof Hm)return e._internalPath;if(typeof e=="string")return FN(t,e);throw Xp("Field path arguments must be of type string or ",t,!1,void 0,s)}const ez=new RegExp("[~\\*/\\[\\]]");function FN(t,e,s){if(e.search(ez)>=0)throw Xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new Hm(...e.split("."))._internalPath}catch{throw Xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Xp(t,e,s,r,a){const i=r&&!r.isEmpty(),l=a!==void 0;let d=`Function ${e}() called with invalid data`;s&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(i||l)&&(u+=" (found",i&&(u+=` in field ${r}`),l&&(u+=` in document ${a}`),u+=")"),new We(Pe.INVALID_ARGUMENT,d+t+u)}function q4(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,s,r,a,i){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(W0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class tz extends Qp{data(){return super.data()}}function W0(t,e){return typeof e=="string"?FN(t,e):e instanceof Hm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new We(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zN{}class BN extends zN{}function Rt(t,e,...s){let r=[];e instanceof zN&&r.push(e),r=r.concat(s),function(i){const l=i.filter(u=>u instanceof $N).length,d=i.filter(u=>u instanceof Y0).length;if(l>1||l>0&&d>0)throw new We(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)t=a._apply(t);return t}class Y0 extends BN{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new Y0(e,s,r)}_apply(e){const s=this._parse(e);return G4(e._query,s),new Bi(e.firestore,e.converter,Pv(e._query,s))}_parse(e){const s=Gm(e.firestore);return function(i,l,d,u,h,f,p){let x;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new We(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){wE(p,f);const N=[];for(const v of p)N.push(vE(u,i,v));x={arrayValue:{values:N}}}else x=vE(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||wE(p,f),x=Z9(d,l,p,f==="in"||f==="not-in");return rr.create(h,f,x)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function ht(t,e,s){const r=e,a=W0("where",t);return Y0._create(a,r,s)}class $N extends zN{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new $N(e,s)}_parse(e){const s=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return s.length===1?s[0]:pa.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(a,i){let l=a;const d=i.getFlattenedFilters();for(const u of d)G4(l,u),l=Pv(l,u)}(e._query,s),new Bi(e.firestore,e.converter,Pv(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qN extends BN{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new qN(e,s)}_apply(e){const s=function(a,i,l){if(a.startAt!==null)throw new We(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new We(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dm(i,l)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(a,i){const l=a.explicitOrderBy.concat([i]);return new Xd(a.path,a.collectionGroup,l,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}function Wm(t,e="asc"){const s=e,r=W0("orderBy",t);return qN._create(r,s)}class HN extends BN{constructor(e,s,r){super(),this.type=e,this._limit=s,this._limitType=r}static _create(e,s,r){return new HN(e,s,r)}_apply(e){return new Bi(e.firestore,e.converter,$p(e._query,this._limit,this._limitType))}}function sz(t){return HN._create("limit",t,"F")}function vE(t,e,s){if(typeof(s=hs(s))=="string"){if(s==="")throw new We(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zP(e)&&s.indexOf("/")!==-1)throw new We(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(_s.fromString(s));if(!bt.isDocumentKey(r))throw new We(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dk(t,new bt(r))}if(s instanceof Vr)return Dk(t,s._key);throw new We(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$0(s)}.`)}function wE(t,e){if(!Array.isArray(t)||t.length===0)throw new We(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G4(t,e){const s=function(a,i){for(const l of a)for(const d of l.getFlattenedFilters())if(i.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new We(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class W4{convertValue(e,s="none"){switch(Uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ks(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw wt(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return Ho(e,(a,i)=>{r[a]=this.convertValue(i,s)}),r}convertVectorValue(e){var s,r,a;const i=(a=(r=(s=e.fields)===null||s===void 0?void 0:s[zp].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(l=>Ks(l.doubleValue));return new IN(i)}convertGeoPoint(e){return new PN(Ks(e.latitude),Ks(e.longitude))}convertArray(e,s){return(e.values||[]).map(r=>this.convertValue(r,s))}convertServerTimestamp(e,s){switch(s){case"previous":const r=R0(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(om(e));default:return null}}convertTimestamp(e){const s=Oo(e);return new mr(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=_s.fromString(e);es(m4(r),9688,{name:e});const a=new lm(r.get(1),r.get(3)),i=new bt(r.popFirst(5));return a.isEqual(s)||Ui(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e,s){let r;return r=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,r}class rz extends W4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Vr(this.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class WN extends Qp{constructor(e,s,r,a,i,l){super(e,s,r,a,l),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new mp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(W0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}}class mp extends WN{data(e={}){return super.data(e)}}class Y4{constructor(e,s,r,a){this._firestore=e,this._userDataWriter=s,this._snapshot=a,this.metadata=new dd(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(r=>{e.call(s,new mp(this._firestore,this._userDataWriter,r.key,r,new dd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new We(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let l=0;return a._snapshot.docChanges.map(d=>{const u=new mp(a._firestore,a._userDataWriter,d.doc.key,d.doc,new dd(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}})}{let l=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>i||d.type!==3).map(d=>{const u=new mp(a._firestore,a._userDataWriter,d.doc.key,d.doc,new dd(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,f=-1;return d.type!==0&&(h=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),f=l.indexOf(d.doc.key)),{type:nz(d.type),doc:u,oldIndex:h,newIndex:f}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function nz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){t=dn(t,Vr);const e=dn(t.firestore,ti);return H9(qm(e),t._key).then(s=>K4(e,t,s))}class K0 extends W4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Vr(this.firestore,null,s)}}function yt(t){t=dn(t,Bi);const e=dn(t.firestore,ti),s=qm(e),r=new K0(e);return H4(t._query),G9(s,t._query).then(a=>new Y4(e,r,t,a))}function ts(t,e,s){t=dn(t,Vr);const r=dn(t.firestore,ti),a=GN(t.converter,e,s);return X0(r,[DN(Gm(r),"setDoc",t._key,a,t.converter!==null,s).toMutation(t._key,Ur.none())])}function Qr(t,e,s,...r){t=dn(t,Vr);const a=dn(t.firestore,ti),i=Gm(a);let l;return l=typeof(e=hs(e))=="string"||e instanceof Hm?z4(i,"updateDoc",t._key,e,s,r):F4(i,"updateDoc",t._key,e),X0(a,[l.toMutation(t._key,Ur.exists(!0))])}function nn(t){return X0(dn(t.firestore,ti),[new U0(t._key,Ur.none())])}function wn(t,e){const s=dn(t.firestore,ti),r=_e(t),a=GN(t.converter,e);return X0(s,[DN(Gm(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}function ws(t,...e){var s,r,a;t=hs(t);let i={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||bE(e[l])||(i=e[l],l++);const d={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(bE(e[l])){const p=e[l];e[l]=(s=p.next)===null||s===void 0?void 0:s.bind(p),e[l+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[l+2]=(a=p.complete)===null||a===void 0?void 0:a.bind(p)}let u,h,f;if(t instanceof Vr)h=dn(t.firestore,ti),f=P0(t._key.path),u={next:p=>{e[l]&&e[l](K4(h,t,p))},error:e[l+1],complete:e[l+2]};else{const p=dn(t,Bi);h=dn(p.firestore,ti),f=p._query;const x=new K0(h);u={next:w=>{e[l]&&e[l](new Y4(h,x,p,w))},error:e[l+1],complete:e[l+2]},H4(t._query)}return function(x,w,N,v){const j=new AN(v),k=new EN(w,j,N);return x.asyncQueue.enqueueAndForget(async()=>_N(await Kp(x),k)),()=>{j.Cu(),x.asyncQueue.enqueueAndForget(async()=>SN(await Kp(x),k))}}(qm(h),f,d,u)}function X0(t,e){return function(r,a){const i=new Ga;return r.asyncQueue.enqueueAndForget(async()=>A9(await $9(r),a,i)),i.promise}(qm(t),e)}function K4(t,e,s){const r=s.docs.get(e._key),a=new K0(t);return new WN(t,a,e._key,r,new dd(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az={maxAttempts:5};function Th(t,e){if((t=hs(t)).firestore!==e)throw new We(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,s){this._firestore=e,this._transaction=s,this._dataReader=Gm(e)}get(e){const s=Th(e,this._firestore),r=new rz(this._firestore);return this._transaction.lookup([s._key]).then(a=>{if(!a||a.length!==1)return wt(24041);const i=a[0];if(i.isFoundDocument())return new Qp(this._firestore,r,i.key,i,s.converter);if(i.isNoDocument())return new Qp(this._firestore,r,s._key,null,s.converter);throw wt(18433,{doc:i})})}set(e,s,r){const a=Th(e,this._firestore),i=GN(a.converter,s,r),l=DN(this._dataReader,"Transaction.set",a._key,i,a.converter!==null,r);return this._transaction.set(a._key,l),this}update(e,s,r,...a){const i=Th(e,this._firestore);let l;return l=typeof(s=hs(s))=="string"||s instanceof Hm?z4(this._dataReader,"Transaction.update",i._key,s,r,a):F4(this._dataReader,"Transaction.update",i._key,s),this._transaction.update(i._key,l),this}delete(e){const s=Th(e,this._firestore);return this._transaction.delete(s._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz extends iz{constructor(e,s){super(e,s),this._firestore=e}get(e){const s=Th(e,this._firestore),r=new K0(this._firestore);return super.get(e).then(a=>new WN(this._firestore,r,s._key,a._document,new dd(!1,!1),s.converter))}}function lz(t,e,s){t=dn(t,ti);const r=Object.assign(Object.assign({},az),s);return function(i){if(i.maxAttempts<1)throw new We(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,l,d){const u=new Ga;return i.asyncQueue.enqueueAndForget(async()=>{const h=await q9(i);new F9(i.asyncQueue,h,d,l,u).$u()}),u.promise}(qm(t),a=>e(new oz(t,a)),r)}function ha(){return new MN("serverTimestamp")}function cz(...t){return new ON("arrayUnion",t)}function dz(...t){return new LN("arrayRemove",t)}function uz(t){return new UN("increment",t)}(function(e,s=!0){(function(a){Wd=a})(dc),Yl(new Do("firestore",(r,{instanceIdentifier:a,options:i})=>{const l=r.getProvider("app").getImmediate(),d=new ti(new r7(r.getProvider("auth-internal")),new i7(l,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new We(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lm(h.options.projectId,f)}(l,a),l);return i=Object.assign({useFetchStreams:s},i),d._setSettings(i),d},"PUBLIC").setMultipleInstances(!0)),$a(Nk,jk,e),$a(Nk,jk,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="firebasestorage.googleapis.com",Q4="storageBucket",hz=2*60*1e3,mz=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends si{constructor(e,s,r=0){super(Mb(e),`Firebase Storage: ${s} (${Mb(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $s;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($s||($s={}));function Mb(t){return"storage/"+t}function YN(){const t="An unknown error occurred, please check the error payload for server response.";return new qs($s.UNKNOWN,t)}function fz(t){return new qs($s.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function gz(t){return new qs($s.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pz(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qs($s.UNAUTHENTICATED,t)}function xz(){return new qs($s.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yz(t){return new qs($s.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function bz(){return new qs($s.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vz(){return new qs($s.CANCELED,"User canceled the upload/download.")}function wz(t){return new qs($s.INVALID_URL,"Invalid URL '"+t+"'.")}function Nz(t){return new qs($s.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jz(){return new qs($s.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Q4+"' property when initializing the app?")}function _z(){return new qs($s.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Sz(){return new qs($s.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kz(t){return new qs($s.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bv(t){return new qs($s.INVALID_ARGUMENT,t)}function J4(){return new qs($s.APP_DELETED,"The Firebase app was deleted.")}function Ez(t){return new qs($s.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qh(t,e){return new qs($s.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function oh(t){throw new qs($s.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let r;try{r=Un.makeFromUrl(e,s)}catch{return new Un(e,"")}if(r.path==="")return r;throw Nz(e)}static makeFromUrl(e,s){let r=null;const a="([A-Za-z0-9.\\-_]+)";function i(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+a+l,"i"),u={bucket:1,path:3};function h(U){U.path_=decodeURIComponent(U.path)}const f="v[A-Za-z0-9_]+",p=s.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${f}/b/${a}/o${x}`,"i"),N={bucket:1,path:3},v=s===X4?"(?:storage.googleapis.com|storage.cloud.google.com)":s,j="([^?#]*)",k=new RegExp(`^https?://${v}/${a}/${j}`,"i"),P=[{regex:d,indices:u,postModify:i},{regex:w,indices:N,postModify:h},{regex:k,indices:{bucket:1,path:2},postModify:h}];for(let U=0;U<P.length;U++){const R=P[U],O=R.regex.exec(e);if(O){const I=O[R.indices.bucket];let C=O[R.indices.path];C||(C=""),r=new Un(I,C),R.postModify(r);break}}if(r==null)throw wz(e);return r}}class Tz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(t,e,s){let r=1,a=null,i=null,l=!1,d=0;function u(){return d===2}let h=!1;function f(...j){h||(h=!0,e.apply(null,j))}function p(j){a=setTimeout(()=>{a=null,t(w,u())},j)}function x(){i&&clearTimeout(i)}function w(j,...k){if(h){x();return}if(j){x(),f.call(null,j,...k);return}if(u()||l){x(),f.call(null,j,...k);return}r<64&&(r*=2);let P;d===1?(d=2,P=0):P=(r+Math.random())*1e3,p(P)}let N=!1;function v(j){N||(N=!0,x(),!h&&(a!==null?(j||(d=2),clearTimeout(a),p(0)):j||(d=1)))}return p(0),i=setTimeout(()=>{l=!0,v(!0)},s),v}function Az(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(t){return t!==void 0}function Pz(t){return typeof t=="object"&&!Array.isArray(t)}function KN(t){return typeof t=="string"||t instanceof String}function NE(t){return XN()&&t instanceof Blob}function XN(){return typeof Blob<"u"}function jE(t,e,s,r){if(r<e)throw Bv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>s)throw Bv(`Invalid value for '${t}'. Expected ${s} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t,e,s){let r=e;return s==null&&(r=`https://${e}`),`${s}://${r}/v0${t}`}function Z4(t){const e=encodeURIComponent;let s="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);s=s+a+"&"}return s=s.slice(0,-1),s}var Bl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Bl||(Bl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(t,e){const s=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return s||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e,s,r,a,i,l,d,u,h,f,p,x=!0,w=!1){this.url_=e,this.method_=s,this.headers_=r,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=p,this.retry=x,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,v)=>{this.resolve_=N,this.reject_=v,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new kg(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const l=d=>{const u=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&i.addUploadProgressListener(l),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(l),this.pendingConnection_=null;const d=i.getErrorCode()===Bl.NO_ERROR,u=i.getStatus();if(!d||Iz(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Bl.ABORT;r(!1,new kg(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new kg(h,i))})},s=(r,a)=>{const i=this.resolve_,l=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const u=this.callback_(d,d.getResponse());Rz(u)?i(u):i()}catch(u){l(u)}else if(d!==null){const u=YN();u.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,u)):l(u)}else if(a.canceled){const u=this.appDelete_?J4():vz();l(u)}else{const u=bz();l(u)}};this.canceled_?s(!1,new kg(!1,null,!0)):this.backoffId_=Cz(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Az(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kg{constructor(e,s,r){this.wasSuccessCode=e,this.connection=s,this.canceled=!!r}}function Mz(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Oz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Lz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Uz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Vz(t,e,s,r,a,i,l=!0,d=!1){const u=Z4(t.urlParams),h=t.url+u,f=Object.assign({},t.headers);return Lz(f,e),Mz(f,s),Oz(f,i),Uz(f,r),new Dz(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,l,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zz(...t){const e=Fz();if(e!==void 0){const s=new e;for(let r=0;r<t.length;r++)s.append(t[r]);return s.getBlob()}else{if(XN())return new Blob(t);throw new qs($s.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Bz(t,e,s){return t.webkitSlice?t.webkitSlice(e,s):t.mozSlice?t.mozSlice(e,s):t.slice?t.slice(e,s):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(t){if(typeof atob>"u")throw kz("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ob{constructor(e,s){this.data=e,this.contentType=s||null}}function eI(t,e){switch(t){case ma.RAW:return new Ob(tI(e));case ma.BASE64:case ma.BASE64URL:return new Ob(sI(t,e));case ma.DATA_URL:return new Ob(Hz(e),Gz(e))}throw YN()}function tI(t){const e=[];for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(s<t.length-1&&(t.charCodeAt(s+1)&64512)===56320))e.push(239,191,189);else{const i=r,l=t.charCodeAt(++s);r=65536|(i&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qz(t){let e;try{e=decodeURIComponent(t)}catch{throw qh(ma.DATA_URL,"Malformed data URL.")}return tI(e)}function sI(t,e){switch(t){case ma.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw qh(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case ma.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw qh(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=$z(e)}catch(a){throw a.message.includes("polyfill")?a:qh(t,"Invalid character found")}const r=new Uint8Array(s.length);for(let a=0;a<s.length;a++)r[a]=s.charCodeAt(a);return r}class rI{constructor(e){this.base64=!1,this.contentType=null;const s=e.match(/^data:([^,]+)?,/);if(s===null)throw qh(ma.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=s[1]||null;r!=null&&(this.base64=Wz(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Hz(t){const e=new rI(t);return e.base64?sI(ma.BASE64,e.rest):qz(e.rest)}function Gz(t){return new rI(t).contentType}function Wz(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,s){let r=0,a="";NE(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(s?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(s?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,s){if(NE(this.data_)){const r=this.data_,a=Bz(r,e,s);return a===null?null:new No(a)}else{const r=new Uint8Array(this.data_.buffer,e,s-e);return new No(r,!0)}}static getBlob(...e){if(XN()){const s=e.map(r=>r instanceof No?r.data_:r);return new No(zz.apply(null,s))}else{const s=e.map(l=>KN(l)?eI(ma.RAW,l).data:l.data_);let r=0;s.forEach(l=>{r+=l.byteLength});const a=new Uint8Array(r);let i=0;return s.forEach(l=>{for(let d=0;d<l.length;d++)a[i++]=l[d]}),new No(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t){let e;try{e=JSON.parse(t)}catch{return null}return Pz(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Kz(t,e){const s=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?s:t+"/"+s}function aI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(t,e){return e}class rn{constructor(e,s,r,a){this.server=e,this.local=s||e,this.writable=!!r,this.xform=a||Xz}}let Eg=null;function Qz(t){return!KN(t)||t.length<2?t:aI(t)}function iI(){if(Eg)return Eg;const t=[];t.push(new rn("bucket")),t.push(new rn("generation")),t.push(new rn("metageneration")),t.push(new rn("name","fullPath",!0));function e(i,l){return Qz(l)}const s=new rn("name");s.xform=e,t.push(s);function r(i,l){return l!==void 0?Number(l):l}const a=new rn("size");return a.xform=r,t.push(a),t.push(new rn("timeCreated")),t.push(new rn("updated")),t.push(new rn("md5Hash",null,!0)),t.push(new rn("cacheControl",null,!0)),t.push(new rn("contentDisposition",null,!0)),t.push(new rn("contentEncoding",null,!0)),t.push(new rn("contentLanguage",null,!0)),t.push(new rn("contentType",null,!0)),t.push(new rn("metadata","customMetadata",!0)),Eg=t,Eg}function Jz(t,e){function s(){const r=t.bucket,a=t.fullPath,i=new Un(r,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:s})}function Zz(t,e,s){const r={};r.type="file";const a=s.length;for(let i=0;i<a;i++){const l=s[i];r[l.local]=l.xform(r,e[l.server])}return Jz(r,t),r}function oI(t,e,s){const r=nI(e);return r===null?null:Zz(t,r,s)}function eB(t,e,s,r){const a=nI(e);if(a===null||!KN(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const l=encodeURIComponent;return i.split(",").map(h=>{const f=t.bucket,p=t.fullPath,x="/b/"+l(f)+"/o/"+l(p),w=QN(x,s,r),N=Z4({alt:"media",token:h});return w+N})[0]}function tB(t,e){const s={},r=e.length;for(let a=0;a<r;a++){const i=e[a];i.writable&&(s[i.server]=t[i.local])}return JSON.stringify(s)}class lI{constructor(e,s,r,a){this.url=e,this.method=s,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){if(!t)throw YN()}function sB(t,e){function s(r,a){const i=oI(t,a,e);return cI(i!==null),i}return s}function rB(t,e){function s(r,a){const i=oI(t,a,e);return cI(i!==null),eB(i,a,t.host,t._protocol)}return s}function dI(t){function e(s,r){let a;return s.getStatus()===401?s.getErrorText().includes("Firebase App Check token is invalid")?a=xz():a=pz():s.getStatus()===402?a=gz(t.bucket):s.getStatus()===403?a=yz(t.path):a=r,a.status=s.getStatus(),a.serverResponse=r.serverResponse,a}return e}function nB(t){const e=dI(t);function s(r,a){let i=e(r,a);return r.getStatus()===404&&(i=fz(t.path)),i.serverResponse=a.serverResponse,i}return s}function aB(t,e,s){const r=e.fullServerUrl(),a=QN(r,t.host,t._protocol),i="GET",l=t.maxOperationRetryTime,d=new lI(a,i,rB(t,s),l);return d.errorHandler=nB(e),d}function iB(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function oB(t,e,s){const r=Object.assign({},s);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=iB(null,e)),r}function lB(t,e,s,r,a){const i=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function d(){let P="";for(let U=0;U<2;U++)P=P+Math.random().toString().slice(2);return P}const u=d();l["Content-Type"]="multipart/related; boundary="+u;const h=oB(e,r,a),f=tB(h,s),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+u+"--",w=No.getBlob(p,r,x);if(w===null)throw _z();const N={name:h.fullPath},v=QN(i,t.host,t._protocol),j="POST",k=t.maxUploadRetryTime,T=new lI(v,j,sB(t,s),k);return T.urlParams=N,T.headers=l,T.body=w.uploadData(),T.errorHandler=dI(e),T}class cB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,s,r,a,i){if(this.sent_)throw oh("cannot .send() more than once");if(cc(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(s,e,!0),i!==void 0)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw oh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw oh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw oh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw oh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dB extends cB{initXhr(){this.xhr_.responseType="text"}}function uI(){return new dB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,s){this._service=e,s instanceof Un?this._location=s:this._location=Un.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new tc(e,s)}get root(){const e=new Un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aI(this._location.path)}get storage(){return this._service}get parent(){const e=Yz(this._location.path);if(e===null)return null;const s=new Un(this._location.bucket,e);return new tc(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw Ez(e)}}function uB(t,e,s){t._throwIfRoot("uploadBytes");const r=lB(t.storage,t._location,iI(),new No(e,!0),s);return t.storage.makeRequestWithTokens(r,uI).then(a=>({metadata:a,ref:t}))}function hB(t,e,s=ma.RAW,r){t._throwIfRoot("uploadString");const a=eI(s,e),i=Object.assign({},r);return i.contentType==null&&a.contentType!=null&&(i.contentType=a.contentType),uB(t,a.data,i)}function mB(t){t._throwIfRoot("getDownloadURL");const e=aB(t.storage,t._location,iI());return t.storage.makeRequestWithTokens(e,uI).then(s=>{if(s===null)throw Sz();return s})}function fB(t,e){const s=Kz(t._location.path,e),r=new Un(t._location.bucket,s);return new tc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(t){return/^[A-Za-z]+:\/\//.test(t)}function pB(t,e){return new tc(t,e)}function hI(t,e){if(t instanceof JN){const s=t;if(s._bucket==null)throw jz();const r=new tc(s,s._bucket);return e!=null?hI(r,e):r}else return e!==void 0?fB(t,e):t}function xB(t,e){if(e&&gB(e)){if(t instanceof JN)return pB(t,e);throw Bv("To use ref(service, url), the first argument must be a Storage instance.")}else return hI(t,e)}function _E(t,e){const s=e==null?void 0:e[Q4];return s==null?null:Un.makeFromBucketSpec(s,t)}function yB(t,e,s,r={}){t.host=`${e}:${s}`;const a=cc(e);a&&(Fw(`https://${t.host}`),Gd("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:wR(i,t.app.options.projectId))}class JN{constructor(e,s,r,a,i,l=!1){this.app=e,this._authProvider=s,this._appCheckProvider=r,this._url=a,this._firebaseVersion=i,this._isUsingEmulator=l,this._bucket=null,this._host=X4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hz,this._maxUploadRetryTime=mz,this._requests=new Set,a!=null?this._bucket=Un.makeFromBucketSpec(a,this._host):this._bucket=_E(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Un.makeFromBucketSpec(this._url,e):this._bucket=_E(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tc(this,e)}_makeRequest(e,s,r,a,i=!0){if(this._deleted)return new Tz(J4());{const l=Vz(e,this._appId,r,a,s,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,s){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,r,a).getPromise()}}const SE="@firebase/storage",kE="0.13.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="storage";function EE(t,e,s,r){return t=hs(t),hB(t,e,s,r)}function TE(t){return t=hs(t),mB(t)}function CE(t,e){return t=hs(t),xB(t,e)}function fI(t=qw(),e){t=hs(t),Gd("Storage",!1);const r=j0(t,mI).getImmediate({identifier:e}),a=yR("storage");return a&&bB(r,...a),r}function bB(t,e,s,r={}){yB(t,e,s,r)}function vB(t,{instanceIdentifier:e}){const s=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new JN(s,r,a,e,dc)}function wB(){Yl(new Do(mI,vB,"PUBLIC").setMultipleInstances(!0)),$a(SE,kE,""),$a(SE,kE,"esm2017")}wB();let we,J,$v;try{const t=$w({apiKey:"AIzaSyCRWR2Z2xlmcGBSVHEbbkIm9nL_qpTGSno",authDomain:"foremade-backend.firebaseapp.com",projectId:"foremade-backend",storageBucket:"foremade-backend.firebasestorage.app",messagingSenderId:"957543574407",appId:"1:957543574407:web:315572254cc0ba6b80c122"});we=sN(t),J=O4(t),$v=fI(t),k0(we,Zw).then(()=>console.log("User auth persistence set to local")).catch(e=>console.error("Error setting user auth persistence:",e)),console.log("Firebase initialized successfully for users")}catch(t){throw console.error("Firebase initialization error for users:",t),new Error("Failed to initialize Firebase for users. Check your configuration.")}let AE,NB,jB;try{const t=$w({apiKey:"AIzaSyBCJ66zthIZWbotDrugJCd63KbokscgV7g",authDomain:"foremade-database.firebaseapp.com",projectId:"foremade-database",storageBucket:"foremade-database.firebasestorage.app",messagingSenderId:"519808269327",appId:"1:519808269327:web:accc580a777f6a1fdcf77a",measurementId:"G-93V0N3FJSN"},"vendorApp");AE=sN(t),NB=O4(t),jB=fI(t),k0(AE,Zw).then(()=>console.log("Vendor auth persistence set to local")).catch(e=>console.error("Error setting vendor auth persistence:",e)),console.log("Firebase initialized successfully for vendors")}catch(t){throw console.error("Firebase initialization error for vendors:",t),new Error("Failed to initialize Firebase for vendors. Check your configuration.")}const gI=_.createContext(),_B=()=>{const t=_.useContext(gI);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},SB=({children:t})=>{const[e,s]=_.useState(null),[r,a]=_.useState(!0);_.useEffect(()=>{console.log("Setting up auth provider");const l=Sd(we,d=>{console.log("Auth state changed in context:",d==null?void 0:d.uid),s(d),a(!1)});return()=>{console.log("Cleaning up auth provider"),l()}},[]);const i={user:e,loading:r,isAuthenticated:!!e};return n.jsx(gI.Provider,{value:i,children:!r&&t})};function pI(t,e){return function(){return t.apply(e,arguments)}}const{toString:kB}=Object.prototype,{getPrototypeOf:ZN}=Object,{iterator:Q0,toStringTag:xI}=Symbol,J0=(t=>e=>{const s=kB.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),va=t=>(t=t.toLowerCase(),e=>J0(e)===t),Z0=t=>e=>typeof e===t,{isArray:Jd}=Array,mm=Z0("undefined");function EB(t){return t!==null&&!mm(t)&&t.constructor!==null&&!mm(t.constructor)&&Nn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const yI=va("ArrayBuffer");function TB(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&yI(t.buffer),e}const CB=Z0("string"),Nn=Z0("function"),bI=Z0("number"),ex=t=>t!==null&&typeof t=="object",AB=t=>t===!0||t===!1,fp=t=>{if(J0(t)!=="object")return!1;const e=ZN(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(xI in t)&&!(Q0 in t)},RB=va("Date"),PB=va("File"),IB=va("Blob"),DB=va("FileList"),MB=t=>ex(t)&&Nn(t.pipe),OB=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Nn(t.append)&&((e=J0(t))==="formdata"||e==="object"&&Nn(t.toString)&&t.toString()==="[object FormData]"))},LB=va("URLSearchParams"),[UB,VB,FB,zB]=["ReadableStream","Request","Response","Headers"].map(va),BB=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ym(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,a;if(typeof t!="object"&&(t=[t]),Jd(t))for(r=0,a=t.length;r<a;r++)e.call(null,t[r],r,t);else{const i=s?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let d;for(r=0;r<l;r++)d=i[r],e.call(null,t[d],d,t)}}function vI(t,e){e=e.toLowerCase();const s=Object.keys(t);let r=s.length,a;for(;r-- >0;)if(a=s[r],e===a.toLowerCase())return a;return null}const Ml=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wI=t=>!mm(t)&&t!==Ml;function qv(){const{caseless:t}=wI(this)&&this||{},e={},s=(r,a)=>{const i=t&&vI(e,a)||a;fp(e[i])&&fp(r)?e[i]=qv(e[i],r):fp(r)?e[i]=qv({},r):Jd(r)?e[i]=r.slice():e[i]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Ym(arguments[r],s);return e}const $B=(t,e,s,{allOwnKeys:r}={})=>(Ym(e,(a,i)=>{s&&Nn(a)?t[i]=pI(a,s):t[i]=a},{allOwnKeys:r}),t),qB=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),HB=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},GB=(t,e,s,r)=>{let a,i,l;const d={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),i=a.length;i-- >0;)l=a[i],(!r||r(l,t,e))&&!d[l]&&(e[l]=t[l],d[l]=!0);t=s!==!1&&ZN(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},WB=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},YB=t=>{if(!t)return null;if(Jd(t))return t;let e=t.length;if(!bI(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},KB=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ZN(Uint8Array)),XB=(t,e)=>{const r=(t&&t[Q0]).call(t);let a;for(;(a=r.next())&&!a.done;){const i=a.value;e.call(t,i[0],i[1])}},QB=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},JB=va("HTMLFormElement"),ZB=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,a){return r.toUpperCase()+a}),RE=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),e$=va("RegExp"),NI=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};Ym(s,(a,i)=>{let l;(l=e(a,i,t))!==!1&&(r[i]=l||a)}),Object.defineProperties(t,r)},t$=t=>{NI(t,(e,s)=>{if(Nn(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(Nn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},s$=(t,e)=>{const s={},r=a=>{a.forEach(i=>{s[i]=!0})};return Jd(t)?r(t):r(String(t).split(e)),s},r$=()=>{},n$=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function a$(t){return!!(t&&Nn(t.append)&&t[xI]==="FormData"&&t[Q0])}const i$=t=>{const e=new Array(10),s=(r,a)=>{if(ex(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[a]=r;const i=Jd(r)?[]:{};return Ym(r,(l,d)=>{const u=s(l,a+1);!mm(u)&&(i[d]=u)}),e[a]=void 0,i}}return r};return s(t,0)},o$=va("AsyncFunction"),l$=t=>t&&(ex(t)||Nn(t))&&Nn(t.then)&&Nn(t.catch),jI=((t,e)=>t?setImmediate:e?((s,r)=>(Ml.addEventListener("message",({source:a,data:i})=>{a===Ml&&i===s&&r.length&&r.shift()()},!1),a=>{r.push(a),Ml.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Nn(Ml.postMessage)),c$=typeof queueMicrotask<"u"?queueMicrotask.bind(Ml):typeof process<"u"&&process.nextTick||jI,d$=t=>t!=null&&Nn(t[Q0]),be={isArray:Jd,isArrayBuffer:yI,isBuffer:EB,isFormData:OB,isArrayBufferView:TB,isString:CB,isNumber:bI,isBoolean:AB,isObject:ex,isPlainObject:fp,isReadableStream:UB,isRequest:VB,isResponse:FB,isHeaders:zB,isUndefined:mm,isDate:RB,isFile:PB,isBlob:IB,isRegExp:e$,isFunction:Nn,isStream:MB,isURLSearchParams:LB,isTypedArray:KB,isFileList:DB,forEach:Ym,merge:qv,extend:$B,trim:BB,stripBOM:qB,inherits:HB,toFlatObject:GB,kindOf:J0,kindOfTest:va,endsWith:WB,toArray:YB,forEachEntry:XB,matchAll:QB,isHTMLForm:JB,hasOwnProperty:RE,hasOwnProp:RE,reduceDescriptors:NI,freezeMethods:t$,toObjectSet:s$,toCamelCase:ZB,noop:r$,toFiniteNumber:n$,findKey:vI,global:Ml,isContextDefined:wI,isSpecCompliantForm:a$,toJSONObject:i$,isAsyncFn:o$,isThenable:l$,setImmediate:jI,asap:c$,isIterable:d$};function Ot(t,e,s,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}be.inherits(Ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:be.toJSONObject(this.config),code:this.code,status:this.status}}});const _I=Ot.prototype,SI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{SI[t]={value:t}});Object.defineProperties(Ot,SI);Object.defineProperty(_I,"isAxiosError",{value:!0});Ot.from=(t,e,s,r,a,i)=>{const l=Object.create(_I);return be.toFlatObject(t,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError"),Ot.call(l,t.message,e,s,r,a),l.cause=t,l.name=t.name,i&&Object.assign(l,i),l};const u$=null;function Hv(t){return be.isPlainObject(t)||be.isArray(t)}function kI(t){return be.endsWith(t,"[]")?t.slice(0,-2):t}function PE(t,e,s){return t?t.concat(e).map(function(a,i){return a=kI(a),!s&&i?"["+a+"]":a}).join(s?".":""):e}function h$(t){return be.isArray(t)&&!t.some(Hv)}const m$=be.toFlatObject(be,{},null,function(e){return/^is[A-Z]/.test(e)});function tx(t,e,s){if(!be.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=be.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,j){return!be.isUndefined(j[v])});const r=s.metaTokens,a=s.visitor||f,i=s.dots,l=s.indexes,u=(s.Blob||typeof Blob<"u"&&Blob)&&be.isSpecCompliantForm(e);if(!be.isFunction(a))throw new TypeError("visitor must be a function");function h(N){if(N===null)return"";if(be.isDate(N))return N.toISOString();if(!u&&be.isBlob(N))throw new Ot("Blob is not supported. Use a Buffer instead.");return be.isArrayBuffer(N)||be.isTypedArray(N)?u&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function f(N,v,j){let k=N;if(N&&!j&&typeof N=="object"){if(be.endsWith(v,"{}"))v=r?v:v.slice(0,-2),N=JSON.stringify(N);else if(be.isArray(N)&&h$(N)||(be.isFileList(N)||be.endsWith(v,"[]"))&&(k=be.toArray(N)))return v=kI(v),k.forEach(function(P,U){!(be.isUndefined(P)||P===null)&&e.append(l===!0?PE([v],U,i):l===null?v:v+"[]",h(P))}),!1}return Hv(N)?!0:(e.append(PE(j,v,i),h(N)),!1)}const p=[],x=Object.assign(m$,{defaultVisitor:f,convertValue:h,isVisitable:Hv});function w(N,v){if(!be.isUndefined(N)){if(p.indexOf(N)!==-1)throw Error("Circular reference detected in "+v.join("."));p.push(N),be.forEach(N,function(k,T){(!(be.isUndefined(k)||k===null)&&a.call(e,k,be.isString(T)?T.trim():T,v,x))===!0&&w(k,v?v.concat(T):[T])}),p.pop()}}if(!be.isObject(t))throw new TypeError("data must be an object");return w(t),e}function IE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ej(t,e){this._pairs=[],t&&tx(t,this,e)}const EI=ej.prototype;EI.append=function(e,s){this._pairs.push([e,s])};EI.toString=function(e){const s=e?function(r){return e.call(this,r,IE)}:IE;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function f$(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function TI(t,e,s){if(!e)return t;const r=s&&s.encode||f$;be.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let i;if(a?i=a(e,s):i=be.isURLSearchParams(e)?e.toString():new ej(e,s).toString(r),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class DE{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){be.forEach(this.handlers,function(r){r!==null&&e(r)})}}const CI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},g$=typeof URLSearchParams<"u"?URLSearchParams:ej,p$=typeof FormData<"u"?FormData:null,x$=typeof Blob<"u"?Blob:null,y$={isBrowser:!0,classes:{URLSearchParams:g$,FormData:p$,Blob:x$},protocols:["http","https","file","blob","url","data"]},tj=typeof window<"u"&&typeof document<"u",Gv=typeof navigator=="object"&&navigator||void 0,b$=tj&&(!Gv||["ReactNative","NativeScript","NS"].indexOf(Gv.product)<0),v$=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",w$=tj&&window.location.href||"http://localhost",N$=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:tj,hasStandardBrowserEnv:b$,hasStandardBrowserWebWorkerEnv:v$,navigator:Gv,origin:w$},Symbol.toStringTag,{value:"Module"})),Yr={...N$,...y$};function j$(t,e){return tx(t,new Yr.classes.URLSearchParams,Object.assign({visitor:function(s,r,a,i){return Yr.isNode&&be.isBuffer(s)?(this.append(r,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function _$(t){return be.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function S$(t){const e={},s=Object.keys(t);let r;const a=s.length;let i;for(r=0;r<a;r++)i=s[r],e[i]=t[i];return e}function AI(t){function e(s,r,a,i){let l=s[i++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),u=i>=s.length;return l=!l&&be.isArray(a)?a.length:l,u?(be.hasOwnProp(a,l)?a[l]=[a[l],r]:a[l]=r,!d):((!a[l]||!be.isObject(a[l]))&&(a[l]=[]),e(s,r,a[l],i)&&be.isArray(a[l])&&(a[l]=S$(a[l])),!d)}if(be.isFormData(t)&&be.isFunction(t.entries)){const s={};return be.forEachEntry(t,(r,a)=>{e(_$(r),a,s,0)}),s}return null}function k$(t,e,s){if(be.isString(t))try{return(e||JSON.parse)(t),be.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const Km={transitional:CI,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",a=r.indexOf("application/json")>-1,i=be.isObject(e);if(i&&be.isHTMLForm(e)&&(e=new FormData(e)),be.isFormData(e))return a?JSON.stringify(AI(e)):e;if(be.isArrayBuffer(e)||be.isBuffer(e)||be.isStream(e)||be.isFile(e)||be.isBlob(e)||be.isReadableStream(e))return e;if(be.isArrayBufferView(e))return e.buffer;if(be.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return j$(e,this.formSerializer).toString();if((d=be.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return tx(d?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||a?(s.setContentType("application/json",!1),k$(e)):e}],transformResponse:[function(e){const s=this.transitional||Km.transitional,r=s&&s.forcedJSONParsing,a=this.responseType==="json";if(be.isResponse(e)||be.isReadableStream(e))return e;if(e&&be.isString(e)&&(r&&!this.responseType||a)){const l=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(d){if(l)throw d.name==="SyntaxError"?Ot.from(d,Ot.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yr.classes.FormData,Blob:Yr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};be.forEach(["delete","get","head","post","put","patch"],t=>{Km.headers[t]={}});const E$=be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),T$=t=>{const e={};let s,r,a;return t&&t.split(`
`).forEach(function(l){a=l.indexOf(":"),s=l.substring(0,a).trim().toLowerCase(),r=l.substring(a+1).trim(),!(!s||e[s]&&E$[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},ME=Symbol("internals");function lh(t){return t&&String(t).trim().toLowerCase()}function gp(t){return t===!1||t==null?t:be.isArray(t)?t.map(gp):String(t)}function C$(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const A$=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Lb(t,e,s,r,a){if(be.isFunction(r))return r.call(this,e,s);if(a&&(e=s),!!be.isString(e)){if(be.isString(r))return e.indexOf(r)!==-1;if(be.isRegExp(r))return r.test(e)}}function R$(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function P$(t,e){const s=be.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(a,i,l){return this[r].call(this,e,a,i,l)},configurable:!0})})}let jn=class{constructor(e){e&&this.set(e)}set(e,s,r){const a=this;function i(d,u,h){const f=lh(u);if(!f)throw new Error("header name must be a non-empty string");const p=be.findKey(a,f);(!p||a[p]===void 0||h===!0||h===void 0&&a[p]!==!1)&&(a[p||u]=gp(d))}const l=(d,u)=>be.forEach(d,(h,f)=>i(h,f,u));if(be.isPlainObject(e)||e instanceof this.constructor)l(e,s);else if(be.isString(e)&&(e=e.trim())&&!A$(e))l(T$(e),s);else if(be.isObject(e)&&be.isIterable(e)){let d={},u,h;for(const f of e){if(!be.isArray(f))throw TypeError("Object iterator must return a key-value pair");d[h=f[0]]=(u=d[h])?be.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}l(d,s)}else e!=null&&i(s,e,r);return this}get(e,s){if(e=lh(e),e){const r=be.findKey(this,e);if(r){const a=this[r];if(!s)return a;if(s===!0)return C$(a);if(be.isFunction(s))return s.call(this,a,r);if(be.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=lh(e),e){const r=be.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||Lb(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let a=!1;function i(l){if(l=lh(l),l){const d=be.findKey(r,l);d&&(!s||Lb(r,r[d],d,s))&&(delete r[d],a=!0)}}return be.isArray(e)?e.forEach(i):i(e),a}clear(e){const s=Object.keys(this);let r=s.length,a=!1;for(;r--;){const i=s[r];(!e||Lb(this,this[i],i,e,!0))&&(delete this[i],a=!0)}return a}normalize(e){const s=this,r={};return be.forEach(this,(a,i)=>{const l=be.findKey(r,i);if(l){s[l]=gp(a),delete s[i];return}const d=e?R$(i):String(i).trim();d!==i&&delete s[i],s[d]=gp(a),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return be.forEach(this,(r,a)=>{r!=null&&r!==!1&&(s[a]=e&&be.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(a=>r.set(a)),r}static accessor(e){const r=(this[ME]=this[ME]={accessors:{}}).accessors,a=this.prototype;function i(l){const d=lh(l);r[d]||(P$(a,l),r[d]=!0)}return be.isArray(e)?e.forEach(i):i(e),this}};jn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);be.reduceDescriptors(jn.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});be.freezeMethods(jn);function Ub(t,e){const s=this||Km,r=e||s,a=jn.from(r.headers);let i=r.data;return be.forEach(t,function(d){i=d.call(s,i,a.normalize(),e?e.status:void 0)}),a.normalize(),i}function RI(t){return!!(t&&t.__CANCEL__)}function Zd(t,e,s){Ot.call(this,t??"canceled",Ot.ERR_CANCELED,e,s),this.name="CanceledError"}be.inherits(Zd,Ot,{__CANCEL__:!0});function PI(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new Ot("Request failed with status code "+s.status,[Ot.ERR_BAD_REQUEST,Ot.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function I$(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function D$(t,e){t=t||10;const s=new Array(t),r=new Array(t);let a=0,i=0,l;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),f=r[i];l||(l=h),s[a]=u,r[a]=h;let p=i,x=0;for(;p!==a;)x+=s[p++],p=p%t;if(a=(a+1)%t,a===i&&(i=(i+1)%t),h-l<e)return;const w=f&&h-f;return w?Math.round(x*1e3/w):void 0}}function M$(t,e){let s=0,r=1e3/e,a,i;const l=(h,f=Date.now())=>{s=f,a=null,i&&(clearTimeout(i),i=null),t.apply(null,h)};return[(...h)=>{const f=Date.now(),p=f-s;p>=r?l(h,f):(a=h,i||(i=setTimeout(()=>{i=null,l(a)},r-p)))},()=>a&&l(a)]}const Jp=(t,e,s=3)=>{let r=0;const a=D$(50,250);return M$(i=>{const l=i.loaded,d=i.lengthComputable?i.total:void 0,u=l-r,h=a(u),f=l<=d;r=l;const p={loaded:l,total:d,progress:d?l/d:void 0,bytes:u,rate:h||void 0,estimated:h&&d&&f?(d-l)/h:void 0,event:i,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(p)},s)},OE=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},LE=t=>(...e)=>be.asap(()=>t(...e)),O$=Yr.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Yr.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Yr.origin),Yr.navigator&&/(msie|trident)/i.test(Yr.navigator.userAgent)):()=>!0,L$=Yr.hasStandardBrowserEnv?{write(t,e,s,r,a,i){const l=[t+"="+encodeURIComponent(e)];be.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),be.isString(r)&&l.push("path="+r),be.isString(a)&&l.push("domain="+a),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function U$(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function V$(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function II(t,e,s){let r=!U$(e);return t&&(r||s==!1)?V$(t,e):e}const UE=t=>t instanceof jn?{...t}:t;function sc(t,e){e=e||{};const s={};function r(h,f,p,x){return be.isPlainObject(h)&&be.isPlainObject(f)?be.merge.call({caseless:x},h,f):be.isPlainObject(f)?be.merge({},f):be.isArray(f)?f.slice():f}function a(h,f,p,x){if(be.isUndefined(f)){if(!be.isUndefined(h))return r(void 0,h,p,x)}else return r(h,f,p,x)}function i(h,f){if(!be.isUndefined(f))return r(void 0,f)}function l(h,f){if(be.isUndefined(f)){if(!be.isUndefined(h))return r(void 0,h)}else return r(void 0,f)}function d(h,f,p){if(p in e)return r(h,f);if(p in t)return r(void 0,h)}const u={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(h,f,p)=>a(UE(h),UE(f),p,!0)};return be.forEach(Object.keys(Object.assign({},t,e)),function(f){const p=u[f]||a,x=p(t[f],e[f],f);be.isUndefined(x)&&p!==d||(s[f]=x)}),s}const DI=t=>{const e=sc({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:i,headers:l,auth:d}=e;e.headers=l=jn.from(l),e.url=TI(II(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let u;if(be.isFormData(s)){if(Yr.hasStandardBrowserEnv||Yr.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((u=l.getContentType())!==!1){const[h,...f]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];l.setContentType([h||"multipart/form-data",...f].join("; "))}}if(Yr.hasStandardBrowserEnv&&(r&&be.isFunction(r)&&(r=r(e)),r||r!==!1&&O$(e.url))){const h=a&&i&&L$.read(i);h&&l.set(a,h)}return e},F$=typeof XMLHttpRequest<"u",z$=F$&&function(t){return new Promise(function(s,r){const a=DI(t);let i=a.data;const l=jn.from(a.headers).normalize();let{responseType:d,onUploadProgress:u,onDownloadProgress:h}=a,f,p,x,w,N;function v(){w&&w(),N&&N(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function k(){if(!j)return;const P=jn.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),R={data:!d||d==="text"||d==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:P,config:t,request:j};PI(function(I){s(I),v()},function(I){r(I),v()},R),j=null}"onloadend"in j?j.onloadend=k:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(k)},j.onabort=function(){j&&(r(new Ot("Request aborted",Ot.ECONNABORTED,t,j)),j=null)},j.onerror=function(){r(new Ot("Network Error",Ot.ERR_NETWORK,t,j)),j=null},j.ontimeout=function(){let U=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const R=a.transitional||CI;a.timeoutErrorMessage&&(U=a.timeoutErrorMessage),r(new Ot(U,R.clarifyTimeoutError?Ot.ETIMEDOUT:Ot.ECONNABORTED,t,j)),j=null},i===void 0&&l.setContentType(null),"setRequestHeader"in j&&be.forEach(l.toJSON(),function(U,R){j.setRequestHeader(R,U)}),be.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),d&&d!=="json"&&(j.responseType=a.responseType),h&&([x,N]=Jp(h,!0),j.addEventListener("progress",x)),u&&j.upload&&([p,w]=Jp(u),j.upload.addEventListener("progress",p),j.upload.addEventListener("loadend",w)),(a.cancelToken||a.signal)&&(f=P=>{j&&(r(!P||P.type?new Zd(null,t,j):P),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const T=I$(a.url);if(T&&Yr.protocols.indexOf(T)===-1){r(new Ot("Unsupported protocol "+T+":",Ot.ERR_BAD_REQUEST,t));return}j.send(i||null)})},B$=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,a;const i=function(h){if(!a){a=!0,d();const f=h instanceof Error?h:this.reason;r.abort(f instanceof Ot?f:new Zd(f instanceof Error?f.message:f))}};let l=e&&setTimeout(()=>{l=null,i(new Ot(`timeout ${e} of ms exceeded`,Ot.ETIMEDOUT))},e);const d=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),t=null)};t.forEach(h=>h.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>be.asap(d),u}},$$=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,a;for(;r<s;)a=r+e,yield t.slice(r,a),r=a},q$=async function*(t,e){for await(const s of H$(t))yield*$$(s,e)},H$=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},VE=(t,e,s,r)=>{const a=q$(t,e);let i=0,l,d=u=>{l||(l=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await a.next();if(h){d(),u.close();return}let p=f.byteLength;if(s){let x=i+=p;s(x)}u.enqueue(new Uint8Array(f))}catch(h){throw d(h),h}},cancel(u){return d(u),a.return()}},{highWaterMark:2})},sx=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",MI=sx&&typeof ReadableStream=="function",G$=sx&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),OI=(t,...e)=>{try{return!!t(...e)}catch{return!1}},W$=MI&&OI(()=>{let t=!1;const e=new Request(Yr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),FE=64*1024,Wv=MI&&OI(()=>be.isReadableStream(new Response("").body)),Zp={stream:Wv&&(t=>t.body)};sx&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Zp[e]&&(Zp[e]=be.isFunction(t[e])?s=>s[e]():(s,r)=>{throw new Ot(`Response type '${e}' is not supported`,Ot.ERR_NOT_SUPPORT,r)})})})(new Response);const Y$=async t=>{if(t==null)return 0;if(be.isBlob(t))return t.size;if(be.isSpecCompliantForm(t))return(await new Request(Yr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(be.isArrayBufferView(t)||be.isArrayBuffer(t))return t.byteLength;if(be.isURLSearchParams(t)&&(t=t+""),be.isString(t))return(await G$(t)).byteLength},K$=async(t,e)=>{const s=be.toFiniteNumber(t.getContentLength());return s??Y$(e)},X$=sx&&(async t=>{let{url:e,method:s,data:r,signal:a,cancelToken:i,timeout:l,onDownloadProgress:d,onUploadProgress:u,responseType:h,headers:f,withCredentials:p="same-origin",fetchOptions:x}=DI(t);h=h?(h+"").toLowerCase():"text";let w=B$([a,i&&i.toAbortSignal()],l),N;const v=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let j;try{if(u&&W$&&s!=="get"&&s!=="head"&&(j=await K$(f,r))!==0){let R=new Request(e,{method:"POST",body:r,duplex:"half"}),O;if(be.isFormData(r)&&(O=R.headers.get("content-type"))&&f.setContentType(O),R.body){const[I,C]=OE(j,Jp(LE(u)));r=VE(R.body,FE,I,C)}}be.isString(p)||(p=p?"include":"omit");const k="credentials"in Request.prototype;N=new Request(e,{...x,signal:w,method:s.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:k?p:void 0});let T=await fetch(N);const P=Wv&&(h==="stream"||h==="response");if(Wv&&(d||P&&v)){const R={};["status","statusText","headers"].forEach(E=>{R[E]=T[E]});const O=be.toFiniteNumber(T.headers.get("content-length")),[I,C]=d&&OE(O,Jp(LE(d),!0))||[];T=new Response(VE(T.body,FE,I,()=>{C&&C(),v&&v()}),R)}h=h||"text";let U=await Zp[be.findKey(Zp,h)||"text"](T,t);return!P&&v&&v(),await new Promise((R,O)=>{PI(R,O,{data:U,headers:jn.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:N})})}catch(k){throw v&&v(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Ot("Network Error",Ot.ERR_NETWORK,t,N),{cause:k.cause||k}):Ot.from(k,k&&k.code,t,N)}}),Yv={http:u$,xhr:z$,fetch:X$};be.forEach(Yv,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const zE=t=>`- ${t}`,Q$=t=>be.isFunction(t)||t===null||t===!1,LI={getAdapter:t=>{t=be.isArray(t)?t:[t];const{length:e}=t;let s,r;const a={};for(let i=0;i<e;i++){s=t[i];let l;if(r=s,!Q$(s)&&(r=Yv[(l=String(s)).toLowerCase()],r===void 0))throw new Ot(`Unknown adapter '${l}'`);if(r)break;a[l||"#"+i]=r}if(!r){const i=Object.entries(a).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=e?i.length>1?`since :
`+i.map(zE).join(`
`):" "+zE(i[0]):"as no adapter specified";throw new Ot("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:Yv};function Vb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zd(null,t)}function BE(t){return Vb(t),t.headers=jn.from(t.headers),t.data=Ub.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),LI.getAdapter(t.adapter||Km.adapter)(t).then(function(r){return Vb(t),r.data=Ub.call(t,t.transformResponse,r),r.headers=jn.from(r.headers),r},function(r){return RI(r)||(Vb(t),r&&r.response&&(r.response.data=Ub.call(t,t.transformResponse,r.response),r.response.headers=jn.from(r.response.headers))),Promise.reject(r)})}const UI="1.9.0",rx={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{rx[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const $E={};rx.transitional=function(e,s,r){function a(i,l){return"[Axios v"+UI+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,d)=>{if(e===!1)throw new Ot(a(l," has been removed"+(s?" in "+s:"")),Ot.ERR_DEPRECATED);return s&&!$E[l]&&($E[l]=!0,console.warn(a(l," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,l,d):!0}};rx.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function J$(t,e,s){if(typeof t!="object")throw new Ot("options must be an object",Ot.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const i=r[a],l=e[i];if(l){const d=t[i],u=d===void 0||l(d,i,t);if(u!==!0)throw new Ot("option "+i+" must be "+u,Ot.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Ot("Unknown option "+i,Ot.ERR_BAD_OPTION)}}const pp={assertOptions:J$,validators:rx},Da=pp.validators;let $l=class{constructor(e){this.defaults=e||{},this.interceptors={request:new DE,response:new DE}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=sc(this.defaults,s);const{transitional:r,paramsSerializer:a,headers:i}=s;r!==void 0&&pp.assertOptions(r,{silentJSONParsing:Da.transitional(Da.boolean),forcedJSONParsing:Da.transitional(Da.boolean),clarifyTimeoutError:Da.transitional(Da.boolean)},!1),a!=null&&(be.isFunction(a)?s.paramsSerializer={serialize:a}:pp.assertOptions(a,{encode:Da.function,serialize:Da.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),pp.assertOptions(s,{baseUrl:Da.spelling("baseURL"),withXsrfToken:Da.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let l=i&&be.merge(i.common,i[s.method]);i&&be.forEach(["delete","get","head","post","put","patch","common"],N=>{delete i[N]}),s.headers=jn.concat(l,i);const d=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(s)===!1||(u=u&&v.synchronous,d.unshift(v.fulfilled,v.rejected))});const h=[];this.interceptors.response.forEach(function(v){h.push(v.fulfilled,v.rejected)});let f,p=0,x;if(!u){const N=[BE.bind(this),void 0];for(N.unshift.apply(N,d),N.push.apply(N,h),x=N.length,f=Promise.resolve(s);p<x;)f=f.then(N[p++],N[p++]);return f}x=d.length;let w=s;for(p=0;p<x;){const N=d[p++],v=d[p++];try{w=N(w)}catch(j){v.call(this,j);break}}try{f=BE.call(this,w)}catch(N){return Promise.reject(N)}for(p=0,x=h.length;p<x;)f=f.then(h[p++],h[p++]);return f}getUri(e){e=sc(this.defaults,e);const s=II(e.baseURL,e.url,e.allowAbsoluteUrls);return TI(s,e.params,e.paramsSerializer)}};be.forEach(["delete","get","head","options"],function(e){$l.prototype[e]=function(s,r){return this.request(sc(r||{},{method:e,url:s,data:(r||{}).data}))}});be.forEach(["post","put","patch"],function(e){function s(r){return function(i,l,d){return this.request(sc(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}$l.prototype[e]=s(),$l.prototype[e+"Form"]=s(!0)});let Z$=class VI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const r=this;this.promise.then(a=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](a);r._listeners=null}),this.promise.then=a=>{let i;const l=new Promise(d=>{r.subscribe(d),i=d}).then(a);return l.cancel=function(){r.unsubscribe(i)},l},e(function(i,l,d){r.reason||(r.reason=new Zd(i,l,d),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new VI(function(a){e=a}),cancel:e}}};function eq(t){return function(s){return t.apply(null,s)}}function tq(t){return be.isObject(t)&&t.isAxiosError===!0}const Kv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kv).forEach(([t,e])=>{Kv[e]=t});function FI(t){const e=new $l(t),s=pI($l.prototype.request,e);return be.extend(s,$l.prototype,e,{allOwnKeys:!0}),be.extend(s,e,null,{allOwnKeys:!0}),s.create=function(a){return FI(sc(t,a))},s}const Ut=FI(Km);Ut.Axios=$l;Ut.CanceledError=Zd;Ut.CancelToken=Z$;Ut.isCancel=RI;Ut.VERSION=UI;Ut.toFormData=tx;Ut.AxiosError=Ot;Ut.Cancel=Ut.CanceledError;Ut.all=function(e){return Promise.all(e)};Ut.spread=eq;Ut.isAxiosError=tq;Ut.mergeConfig=sc;Ut.AxiosHeaders=jn;Ut.formToJSON=t=>AI(be.isHTMLForm(t)?new FormData(t):t);Ut.getAdapter=LI.getAdapter;Ut.HttpStatusCode=Kv;Ut.default=Ut;const{Axios:mae,AxiosError:fae,CanceledError:gae,isCancel:pae,CancelToken:xae,VERSION:yae,all:bae,Cancel:vae,isAxiosError:wae,spread:Nae,toFormData:jae,AxiosHeaders:_ae,HttpStatusCode:Sae,formToJSON:kae,getAdapter:Eae,mergeConfig:Tae}=Ut,zI=_.createContext(),BI=()=>_.useContext(zI),sq=({children:t})=>{const[e,s]=_.useState("USD"),[r,a]=_.useState({NGN:1,USD:62e-5,GBP:48e-5,JPY:.099,GHS:.0096,EUR:58e-5}),[i,l]=_.useState([{code:"USD",label:"$ USD"},{code:"NGN",label:" NGN"},{code:"GBP",label:" GBP"},{code:"JPY",label:" JPY"},{code:"GHS",label:" GHS"},{code:"EUR",label:" EUR"},{code:"CAD",label:"$ CAD"},{code:"AUD",label:"$ AUD"},{code:"CNY",label:" CNY"},{code:"INR",label:" INR"}]),[d,u]=_.useState(!0);_.useEffect(()=>{(async()=>{var v,j;let x="US",w="USD";if(console.log("Starting currency detection..."),we.currentUser)try{console.log("Checking Firestore for user:",we.currentUser.uid);const k=_e(J,"users",we.currentUser.uid),T=await Ge(k);if(T.exists()&&T.data().country)x=T.data().country.toUpperCase(),console.log("User country from Firestore:",x);else{const P=_e(J,"sellers",we.currentUser.uid),U=await Ge(P);U.exists()&&U.data().country&&(x=U.data().country.toUpperCase(),console.log("Seller country from Firestore:",x))}}catch(k){console.error("Firestore error:",k.message)}else{console.log("No user logged in, using ipapi.co for geolocation");for(let k=1;k<=2;k++)try{x=((v=(await Ut.get("https://ipapi.co/json/",{timeout:5e3})).data.country_code)==null?void 0:v.toUpperCase())||"US",console.log(`Geolocation attempt ${k} country:`,x);break}catch(T){console.error(`Geolocation attempt ${k} error:`,T.message),k===1&&await new Promise(P=>setTimeout(P,1e3))}}w={NG:"NGN",GB:"GBP",US:"USD",JP:"JPY",GH:"GHS",DE:"EUR",FR:"EUR",IT:"EUR",ES:"EUR",CA:"CAD",AU:"AUD",CN:"CNY",IN:"INR",BR:"BRL",ZA:"ZAR",KE:"KES",MX:"MXN",RU:"RUB",SG:"SGD",AE:"AED",SA:"SAR",KR:"KRW",NZ:"NZD",CH:"CHF",SE:"SEK",NO:"NOK",DK:"DKK",EG:"EGP",TR:"TRY"}[x]||"USD",console.log("Selected currency:",w),s(w);try{console.log("Fetching exchange rates...");const k=_e(J,"currencyRates","latest"),T=await Ge(k);if(T.exists()&&((j=T.data().updatedAt)==null?void 0:j.toDate())>new Date(Date.now()-864e5))a(T.data().rates),l(T.data().availableCurrencies||i),console.log("Loaded rates from Firestore:",T.data().rates);else{const U=(await Ut.get("https://v6.exchangerate-api.com/v6/YOUR_API_KEY/latest/NGN",{timeout:5e3})).data.conversion_rates,R=Object.keys(U).sort().map(O=>({code:O,label:new Intl.NumberFormat("en-US",{style:"currency",currency:O}).format(0).replace(/[0-9.,]/g,"")+` ${O}`}));await ts(k,{base:"NGN",rates:U,availableCurrencies:R,updatedAt:ha()}),a(U),l(R),console.log("Fetched rates from API:",U),console.log("Available currencies:",R.length)}}catch(k){console.error("Exchange rate fetch error:",k.message),a({NGN:1,USD:62e-5,GBP:48e-5,JPY:.099,GHS:.0096,EUR:58e-5})}finally{u(!1),console.log("Currency detection complete, loading:",!1)}})()},[]);const h=p=>{if(!r[e])return console.warn(`Rate not found for currency: ${e}, using NGN`),new Intl.NumberFormat("en-US",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(p);const x=p*r[e];return new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:2}).format(x)},f=p=>{r[p]?(console.log("Changing currency to:",p),s(p)):console.warn(`No rate available for currency: ${p}`)};return n.jsx(zI.Provider,{value:{currency:e,rates:r,convertPrice:h,changeCurrency:f,loading:d,availableCurrencies:i},children:t})};function rq(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.firstChild?e.insertBefore(s,e.firstChild):e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}rq(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var sj=t=>typeof t=="number"&&!isNaN(t),fm=t=>typeof t=="string",$I=t=>typeof t=="function",nq=t=>fm(t)||sj(t),aq=t=>_.isValidElement(t)||fm(t)||$I(t)||sj(t),iq=1,qI=()=>`${iq++}`,Ya=new Map,Xv=[],qE=new Set,HI=()=>Ya.size>0,oq=(t,{containerId:e})=>{var s;return(s=Ya.get(e||1))==null?void 0:s.toasts.get(t)};function lq(t,e){var s;if(e)return!!((s=Ya.get(e))!=null&&s.isToastActive(t));let r=!1;return Ya.forEach(a=>{a.isToastActive(t)&&(r=!0)}),r}function cq(t){if(!HI()){Xv=Xv.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||nq(t))Ya.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Ya.get(t.containerId);e?e.removeToast(t.id):Ya.forEach(s=>{s.removeToast(t.id)})}}var dq=(t={})=>{Ya.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function uq(t,e){aq(t)&&(HI()||Xv.push({content:t,options:e}),Ya.forEach(s=>{s.buildToast(t,e)}))}function GI(t,e){Ya.forEach(s=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===s.id)&&s.toggle(t,e==null?void 0:e.id)})}function hq(t){return qE.add(t),()=>{qE.delete(t)}}function mq(t){return t&&(fm(t.toastId)||sj(t.toastId))?t.toastId:qI()}function Xm(t,e){return uq(t,e),e.toastId}function nx(t,e){return{...e,type:e&&e.type||t,toastId:mq(e)}}function ax(t){return(e,s)=>Xm(e,nx(t,s))}function Ne(t,e){return Xm(t,nx("default",e))}Ne.loading=(t,e)=>Xm(t,nx("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function fq(t,{pending:e,error:s,success:r},a){let i;e&&(i=fm(e)?Ne.loading(e,a):Ne.loading(e.render,{...a,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(h,f,p)=>{if(f==null){Ne.dismiss(i);return}let x={type:h,...l,...a,data:p},w=fm(f)?{render:f}:f;return i?Ne.update(i,{...x,...w}):Ne(w.render,{...x,...w}),p},u=$I(t)?t():t;return u.then(h=>d("success",r,h)).catch(h=>d("error",s,h)),u}Ne.promise=fq;Ne.success=ax("success");Ne.info=ax("info");Ne.error=ax("error");Ne.warning=ax("warning");Ne.warn=Ne.warning;Ne.dark=(t,e)=>Xm(t,nx("default",{theme:"dark",...e}));function gq(t){cq(t)}Ne.dismiss=gq;Ne.clearWaitingQueue=dq;Ne.isActive=lq;Ne.update=(t,e={})=>{let s=oq(t,e);if(s){let{props:r,content:a}=s,i={delay:100,...r,...e,toastId:e.toastId||t,updateId:qI()};i.toastId!==t&&(i.staleId=t);let l=i.render||a;delete i.render,Xm(l,i)}};Ne.done=t=>{Ne.update(t,{progress:1})};Ne.onChange=hq;Ne.play=t=>GI(!0,t);Ne.pause=t=>GI(!1,t);const WI=async(t,e,s=null)=>{if(!t||e<=0)throw new Error("Invalid cart item data");try{const r=_e(J,"products",t),a=await Ge(r);if(!a.exists())throw new Error("Product not found");const i=a.data();if(i.stock<e)throw new Error(`Only ${i.stock} units available`);const l=await Ka(s),d=l.find(h=>h.productId===t);let u;if(d){const h=d.quantity+e;if(h>i.stock)throw new Error(`Cannot add more than ${i.stock} units`);u=l.map(f=>f.productId===t?{...f,quantity:h}:f)}else u=[...l,{productId:t,quantity:e,product:{name:i.name,price:i.price,image:i.imageUrl,stock:i.stock,sellerId:i.sellerId||"default-seller-id"}}];await rc(u,s),Ne.success("Added to cart")}catch(r){throw console.error("Error adding to cart:",r),Ne.error(r.message),r}},Ka=async(t=null)=>{const e=t?`userCart_${t}`:"guestCart";let s=[];try{const r=localStorage.getItem(e);r&&(s=JSON.parse(r),Array.isArray(s)||(console.warn("Invalid cart format, resetting:",s),s=[]));const a=[];for(const i of s){if(!i.productId||i.quantity<=0){console.warn("Invalid cart item:",i);continue}try{const l=_e(J,"products",i.productId),d=await Ge(l);if(d.exists()){const u=d.data();a.push({...i,product:{name:u.name,price:u.price,image:u.imageUrl,stock:u.stock,sellerId:u.sellerId||"default-seller-id"}})}else console.warn(`Product not found for ID: ${i.productId}`),Ne.error(`Removed unavailable product (ID: ${i.productId}) from cart`)}catch(l){console.error(`Error validating product ${i.productId}:`,l),Ne.error(`Error validating product (ID: ${i.productId})`)}}return a.length<s.length&&await rc(a,t),a}catch(r){return console.error("Error fetching cart:",r),Ne.error("Failed to fetch cart"),[]}},HE=async(t=null)=>{try{return(await Ka(t)).reduce((s,r)=>s+r.quantity,0)}catch(e){return console.error("Error getting cart item count:",e),0}},rc=async(t,e=null)=>{const s=e?`userCart_${e}`:"guestCart";try{localStorage.setItem(s,JSON.stringify(t)),window.dispatchEvent(new Event("cartUpdated"))}catch(r){throw console.error("Error updating cart:",r),Ne.error("Failed to update cart"),r}},ix=async(t=null)=>{try{await rc([],t),Ne.success("Cart cleared")}catch(e){throw console.error("Error clearing cart:",e),Ne.error("Failed to clear cart"),e}},pq=async t=>{if(!t)throw new Error("Please log in to checkout");const e=await Ka(t);if(e.length===0)throw new Error("Cart is empty");try{for(const r of e){const a=_e(J,"products",r.productId),i=await Ge(a);if(!i.exists())throw new Error(`Product ${r.productId} no longer available`);const l=i.data();if(l.stock<r.quantity)throw new Error(`Insufficient stock for ${l.name}`)}const s=Ue(J,"orders");await wn(s,{userId:t,items:e,total:e.reduce((r,a)=>r+a.product.price*a.quantity,0),createdAt:new Date().toISOString(),status:"pending"}),await ix(t),Ne.success("Order placed successfully")}catch(s){throw console.error("Checkout error:",s),Ne.error(s.message),s}},xq=async t=>{try{const e=await Ka(null);if(e.length===0)return;const r=[...await Ka(t)];for(const a of e){const i=r.find(l=>l.productId===a.productId);if(i){i.quantity+=a.quantity;try{const l=_e(J,"products",i.productId),d=await Ge(l);if(d.exists()){const u=d.data();i.quantity>u.stock&&(i.quantity=u.stock,Ne.warn(`Adjusted quantity for ${u.name} to available stock`))}}catch(l){console.error(`Error validating product ${i.productId}:`,l),Ne.error(`Error validating product (ID: ${i.productId})`)}}else r.push(a)}await rc(r,t),await ix(null),Ne.success("Guest cart merged with your account")}catch(e){console.error("Error merging guest cart:",e),Ne.error("Failed to merge guest cart")}},nc="/assets/logi-DGW4y32z.png";function GE(){const[t,e]=_.useState(!0);_.useEffect(()=>{localStorage.getItem("freeShippingDismissed")==="true"&&e(!0)},[]);const s=()=>{e(!1),localStorage.setItem("freeShippingDismissed","true")};return t?n.jsx("div",{className:"relative p-[1px] bg-[#eb9325]",children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("p",{className:"text-white text-md max-md:text-sm m-1 max-md:m-0 text-center py-2",children:"Up to 30% off when you buy multiple items | Free shipping Nationwide!"}),n.jsx("button",{onClick:s,className:"absolute right-2 top-1/2 -translate-y-1/2 text-white hover:text-gray-200",title:"Dismiss","aria-label":"Dismiss free shipping banner",children:n.jsx("i",{className:"bx bx-x text-xl"})})]})}):null}const yq=()=>{const t=gr(),e=Ns(),[s,r]=_.useState(""),[a,i]=_.useState([]),[l,d]=_.useState(!1),[u,h]=_.useState(!1),[f,p]=_.useState(null),[x,w]=_.useState(0),[N,v]=_.useState([]),[j,k]=_.useState(null),[T,P]=_.useState(null),[U,R]=_.useState(0),[O,I]=_.useState(!1),[C,E]=_.useState(!1),[D,V]=_.useState(!1),[B,M]=_.useState(!1),Y=["Camera & Photography","Television & Accessories","Drinks & Beverages","Game & Console","Home & Living","Perfumes & Fragrances","Vehicles & Transport","Clothing","Coffee & Tea","Computers & Laptops","Footwear","Grills & Outdoor Cooking","Hair, Nails & Accessories","Jewellery & Accessories","Sneakers & Joggers","Sound & Audio","Sports & Outdoors"," Pregnancy & Mother Care"," Health & Wellness"],Q=ve=>ve.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),H=Y.slice(0,8),W=Y.slice(8),de={Footwear:"footwear",Clothing:"clothing","Computers & Laptops":"computers-laptops","Game & Console":"game-console"},ge=ve=>`/category/${de[ve]||Q(ve)}`,z=t.pathname!=="/";_.useEffect(()=>{const ve=we.onAuthStateChanged(async Z=>{k(Z);try{const Se=await HE(Z==null?void 0:Z.uid);if(w(Se),Z)try{const Te=localStorage.getItem("userData");Te&&P(JSON.parse(Te))}catch(Te){console.error("Error parsing userData:",Te),Ne.error("Failed to load user profile")}else P(null),R(0),v([]),localStorage.removeItem("userData")}catch(Se){console.error("Error in auth state:",Se),Ne.error("Failed to initialize session")}});return()=>ve()},[]),_.useEffect(()=>{j&&(async()=>{try{const Z=Rt(Ue(J,"notifications"),ht("userId","==",j.uid),ht("read","==",!1)),Se=await yt(Z);R(Se.size)}catch(Z){console.error("Error fetching notifications:",Z),Ne.error("Failed to load notifications")}})()},[j]),_.useEffect(()=>{const ve=()=>{try{const Te=localStorage.getItem("favorites");v(Te?JSON.parse(Te):[])}catch(Te){console.error("Error loading favorites:",Te),Ne.error("Failed to sync favorites")}};ve();const Z=async()=>{try{const Te=await HE(j==null?void 0:j.uid);w(Te)}catch(Te){console.error("Error updating cart:",Te),Ne.error("Failed to update cart")}},Se=Te=>{Te.key==="favorites"&&ve()};return window.addEventListener("cartUpdated",Z),window.addEventListener("storage",Se),()=>{window.removeEventListener("cartUpdated",Z),window.removeEventListener("storage",Se)}},[j]);const G=()=>{var ve;return T&&T.name?T.name.split(" ")[0]||"User":j?((ve=j.displayName)==null?void 0:ve.split(" ")[0])||"User":"Guest"},X=async ve=>{const Z=ve.target.value;if(r(Z),Z.trim()===""){i([]),d(!1);return}h(!0);try{const Se=Rt(Ue(J,"products"),ht("status","==","approved")),te=(await yt(Se)).docs.map(Oe=>({id:Oe.id,...Oe.data()})).filter(Oe=>Oe.name.toLowerCase().includes(Z.toLowerCase()));i(te),d(!0)}catch(Se){console.error("Error searching:",Se),p("Failed to search."),Ne.error("Search failed")}finally{h(!1)}},re=()=>{s.trim()!==""&&a.length>0&&d(!0)},xe=()=>{setTimeout(()=>d(!1),200)},ze=()=>{V(!D)},me=()=>{M(!B)},Ce=()=>{setTimeout(()=>V(!1),200)};return f?n.jsxs("div",{className:"p-4 text-red-600",children:["Error: ",f]}):n.jsxs("header",{className:"w-full",children:[n.jsx("div",{className:"bg-[#112D4E] hidden sm:flex text-white py-2 w-full",children:n.jsxs("div",{className:"flex items-center w-full max-w-7xl mx-auto",children:[n.jsx("div",{className:"flex items-center flex-shrink-0",children:n.jsx(ue,{to:"/",children:n.jsx("img",{src:nc,className:"h-10 sm:h-[52px] sm:w-auto md:w-auto lg:w-auto xl:w-auto",alt:"Foremade"})})}),n.jsx("div",{className:"flex-1 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(ue,{to:"/products",className:"hover:text-gray-100 hover:underline transition-all",children:"Shop"}),n.jsx(ue,{to:"/products-upload",className:"m-2 hover:text-gray-100 hover:underline transition-all",children:"Sell"}),n.jsx(ue,{to:"/smile",className:"m-2 hover:text-gray-100 hover:underline transition-all",children:"Smile"})]})}),n.jsxs("div",{className:"flex items-center gap-4 ml-4",children:[j?n.jsxs(ue,{to:"/profile",className:"hover:text-gray-300 text-sm whitespace-nowrap",children:["Hi, ",G()]}):n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ue,{to:"/login",className:"hover:text-gray-300 text-sm whitespace-nowrap",children:"Login"}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx(ue,{to:"/register",className:"hover:text-gray-300 text-sm whitespace-nowrap",children:"Sign Up"})]}),n.jsxs(ue,{to:"/notifications",className:"relative flex items-center justify-center",children:[n.jsx("i",{className:"bx bx-bell text-xl"}),U>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:U})]}),n.jsxs(ue,{to:"/cart",className:"relative flex items-center justify-center",children:[n.jsx("i",{className:"bx bx-cart-alt text-xl text-white"}),x>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:x})]}),n.jsx(ue,{to:"/search",className:"lg:hidden",children:n.jsx("i",{className:"bx bx-search text-xl"})})]})]})}),n.jsxs("div",{className:"sm:hidden bg-[#112D4E] text-white py-3 w-full flex items-center fixed top-0 left-0 right-0 z-40 overflow-x-hidden",style:{paddingTop:"env(safe-area-inset-top)"},children:[n.jsx("div",{className:"flex items-center min-w-0",children:n.jsx(ue,{to:"/",children:n.jsx("img",{src:nc,className:"h-10",alt:"Foremade"})})}),n.jsx("div",{className:"flex-1 min-w-0"}),n.jsxs("div",{className:"flex items-center justify-end flex-1 min-w-0",children:[n.jsxs(ue,{to:"/cart",className:"relative flex items-center justify-center",children:[n.jsx("i",{className:"bx bx-cart-alt text-xl text-white"}),x>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:x})]}),n.jsx("button",{onClick:()=>I(!0),className:"ml-4 mr-4 flex items-center justify-center focus:outline-none",children:n.jsx("i",{className:"bx bx-menu text-2xl"})})]})]}),n.jsx("div",{className:"block sm:hidden pt-7",children:n.jsx(GE,{})}),n.jsxs("div",{className:"block sm:hidden px-2 mt-2",children:[n.jsxs("div",{className:"relative w-full",children:[n.jsx("input",{type:"text",placeholder:"Search for electronics, accessories...",className:"w-full p-2 pl-8 border border-gray-400 rounded-md text-black placeholder-gray-600 focus:outline-none text-xs",value:s,onChange:X,onFocus:re,onBlur:xe}),n.jsx("i",{className:"bx bx-search absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-600 text-sm"}),l&&n.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:u?n.jsx("div",{className:"p-2 text-xs text-gray-600",children:"Loading..."}):a.length>0?a.map(ve=>{var Z;return n.jsxs(ue,{to:`/product/${ve.id}`,className:"flex items-center p-2 hover:bg-gray-100",onClick:()=>{d(!1),r("")},children:[n.jsx("img",{src:ve.imageUrls&&((Z=ve.imageUrls[0])!=null&&Z.startsWith("https://"))?ve.imageUrls[0]:"https://via.placeholder.com/40?text=Image+Not+Found",alt:ve.name,className:"w-8 h-8 object-cover rounded mr-2 flex-shrink-0",onError:Se=>{Se.target.src="https://via.placeholder.com/40?text=Image+Not+Found"}}),n.jsx("span",{className:"text-xs text-gray-800",children:ve.name})]},ve.id)}):n.jsx("div",{className:"p-2 text-xs text-gray-600",children:"No results found"})})]}),n.jsx("div",{className:"flex overflow-x-auto gap-2 text-xs text-gray-700 py-2 scrollbar-hide",children:Y.map(ve=>n.jsx(ue,{to:ge(ve),className:"hover:text-blue-600 bg-gray-100 rounded-full px-3 py-1 whitespace-nowrap flex-shrink-0",children:ve},ve))})]}),n.jsx("div",{className:"hidden sm:block",children:n.jsx(GE,{})}),n.jsx("div",{className:"hidden sm:block",children:n.jsx("div",{className:"container mx-auto px-2 sm:px-4 py-1 sm:py-4",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsxs("div",{className:"relative w-full",children:[n.jsx("input",{type:"text",placeholder:"Search Foremade",className:"placeholder-slate-400 w-full p-2 pl-8 border border-gray-400 rounded-md text-black focus:outline-none text-xs sm:text-base",value:s,onChange:X,onFocus:re,onBlur:xe}),n.jsx("i",{className:"bx bx-search absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-600 text-sm sm:text-base"}),l&&n.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-80 overflow-y-auto",children:u?n.jsx("div",{className:"p-2 text-xs sm:text-base text-gray-600",children:"Loading..."}):a.length>0?a.map(ve=>{var Z;return n.jsxs(ue,{to:`/product/${ve.id}`,className:"flex items-center p-2 hover:bg-gray-100",onClick:()=>{d(!1),r("")},children:[n.jsx("img",{src:ve.imageUrls&&((Z=ve.imageUrls[0])!=null&&Z.startsWith("https://"))?ve.imageUrls[0]:"https://via.placeholder.com/40?text=Image+Not+Found",alt:ve.name,className:"w-8 sm:w-10 h-8 sm:h-10 object-cover rounded mr-2",onError:Se=>{Se.target.src="https://via.placeholder.com/40?text=Image+Not+Found"}}),n.jsx("span",{className:"text-xs sm:text-base text-gray-800",children:ve.name})]},ve.id)}):n.jsx("div",{className:"p-2 text-xs sm:text-base text-gray-600",children:"No results found"})})]}),n.jsx("div",{className:"w-full mt-2 sm:mt-4",children:n.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-700 flex-wrap",children:[H.map(ve=>n.jsx(ue,{to:`/category/${Q(ve)}`,className:"hover:text-blue-600 whitespace-nowrap",children:ve},ve)),Y.length>8&&n.jsxs("div",{className:"relative",onMouseLeave:Ce,children:[n.jsxs("button",{onClick:ze,className:"hover:text-blue-600 focus:outline-none whitespace-nowrap",children:["More ",n.jsx("i",{className:"bx bx-chevron-down"})]}),D&&n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-[60%] mt-1 w-72 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-80 overflow-y-auto",children:W.map(ve=>n.jsx(ue,{to:`/category/${Q(ve)}`,className:"block px-4 py-2 text-gray-800 hover:bg-gray-100 text-sm",onClick:()=>V(!1),children:ve},ve))})]})]})})]})})}),z&&n.jsx("div",{className:"w-full flex justify-start mt-2 px-2 sm:px-4",children:n.jsxs("button",{onClick:()=>{window.history.length>2?e(-1):e("/")},className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-200 text-blue-700 text-sm font-medium focus:outline-none","aria-label":"Go back",children:[n.jsx("i",{className:"bx bx-arrow-back text-xl"}),n.jsx("span",{className:"sm:inline",children:"Return"})]})}),n.jsxs("nav",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center py-2 z-40",children:[n.jsxs(ue,{to:"/",className:`flex flex-col items-center ${t.pathname==="/"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-home-alt text-2xl"}),n.jsx("span",{className:"text-xs",children:"Home"})]}),n.jsxs(ue,{to:"/search",className:`flex flex-col items-center ${t.pathname==="/search"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-search text-2xl"}),n.jsx("span",{className:"text-xs",children:"Search"})]}),n.jsxs(ue,{to:"/products-upload",className:`flex flex-col items-center ${t.pathname==="/products-upload"?"text-blue-600":"text-orange-500"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bxs-plus-circle text-2xl"}),n.jsx("span",{className:"text-xs",children:"Sell"})]}),n.jsxs(ue,{to:"/notifications",className:`flex flex-col items-center relative ${t.pathname==="/notifications"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-bell text-2xl"}),U>0&&n.jsx("span",{className:"absolute top-0 right-2 bg-red-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:U}),n.jsx("span",{className:"text-xs",children:"Inbox"})]}),n.jsxs(ue,{to:"/profile",className:`flex flex-col items-center ${t.pathname==="/profile"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-user text-2xl"}),n.jsx("span",{className:"text-xs",children:"You"})]})]}),n.jsxs("div",{className:"sm:hidden",children:[n.jsx("div",{className:"fixed top-0 left-0 h-full bg-[#f8d7b0] w-full transform transition-transform duration-300 ease-in-out z-50 overflow-y-auto max-h-screen",style:{transform:O?"translateX(0)":"translateX(-100%)"},children:n.jsxs("div",{className:"p-4",children:[n.jsx("button",{onClick:()=>I(!1),className:"mb-4",children:n.jsx("i",{className:"bx bx-x text-2xl text-[#112040]"})}),n.jsxs("div",{className:"flex flex-col space-y-3",children:[n.jsxs("div",{className:"flex justify-center gap-2 w-full mb-4",children:[n.jsx(ue,{to:"/products",className:"bg-white/80 text-[#112040] hover:text-amber-500 text-base py-3 px-4 rounded-lg border border-[#112040]/20 font-semibold shadow-sm hover:bg-white transition-all",onClick:()=>I(!1),children:"Shop"}),n.jsx(ue,{to:"/products-upload",className:"bg-white/80 text-[#112040] hover:text-amber-500 text-base py-3 px-4 rounded-lg border border-[#112040]/20 font-semibold shadow-sm hover:bg-white transition-all",onClick:()=>I(!1),children:"Sell"}),n.jsx(ue,{to:"/smile",className:"bg-white/80 text-[#112040] hover:text-amber-500 text-base py-3 px-4 rounded-lg border border-[#112040]/20 font-semibold shadow-sm hover:bg-white transition-all",onClick:()=>I(!1),children:"Smile"})]}),!j&&n.jsxs("div",{className:"flex items-center justify-center mt-6 bg-[#112040] text-white px-4 py-3 rounded-lg text-sm hover:bg-[#112040]/80",children:[n.jsx(ue,{to:"/login",className:"mx-2",onClick:()=>I(!1),children:"Log in"}),n.jsx("span",{className:"mx-1",children:"|"}),n.jsx(ue,{to:"/register",className:"mx-2",onClick:()=>I(!1),children:"Sign up"})]}),j&&n.jsx(ue,{to:"/profile",className:"mt-6 bg-[#112040] text-white px-4 py-3 rounded-lg text-sm hover:bg-[#112040]/80 text-center",onClick:()=>I(!1),children:"My Profile"}),n.jsxs("div",{className:"space-y-1",children:[Y.slice(0,8).map(ve=>n.jsx(ue,{to:`/category/${Q(ve)}`,className:"text-[#112040] hover:text-amber-500 text-sm py-2 border-b border-[#112040]/10 block",onClick:()=>I(!1),children:ve},ve)),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:me,className:"text-[#112040] hover:text-amber-500 text-sm py-2 border-b border-[#112040]/10 w-full text-left flex items-center justify-between",children:["More ",n.jsx("i",{className:"bx bx-chevron-down"})]}),B&&n.jsxs("div",{className:"mt-2 space-y-1 z-100",children:[console.log("Mobile More Dropdown Open:",B,"Categories:",Y.slice(8)),Y.slice(8).map(ve=>n.jsx(ue,{to:`/category/${Q(ve)}`,className:"text-[#112040] hover:text-amber-500 text-sm py-2 pl-4 border-b border-[#112040]/10 block",onClick:()=>{I(!1),M(!1)},children:ve},ve))]})]})]})]})]})}),O&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>I(!1)})]})]})},rj=_.createContext({});function nj(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const aj=typeof window<"u",YI=aj?_.useLayoutEffect:_.useEffect,ox=_.createContext(null);function ij(t,e){t.indexOf(e)===-1&&t.push(e)}function oj(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Fi=(t,e,s)=>s>e?e:s<t?t:s;let lj=()=>{};const zi={},KI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function XI(t){return typeof t=="object"&&t!==null}const QI=t=>/^0[^.\s]+$/u.test(t);function cj(t){let e;return()=>(e===void 0&&(e=t()),e)}const ta=t=>t,bq=(t,e)=>s=>e(t(s)),Qm=(...t)=>t.reduce(bq),gm=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r};class dj{constructor(){this.subscriptions=[]}add(e){return ij(this.subscriptions,e),()=>oj(this.subscriptions,e)}notify(e,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,r);else for(let i=0;i<a;i++){const l=this.subscriptions[i];l&&l(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xa=t=>t*1e3,Qa=t=>t/1e3;function JI(t,e){return e?t*(1e3/e):0}const ZI=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,vq=1e-7,wq=12;function Nq(t,e,s,r,a){let i,l,d=0;do l=e+(s-e)/2,i=ZI(l,r,a)-t,i>0?s=l:e=l;while(Math.abs(i)>vq&&++d<wq);return l}function Jm(t,e,s,r){if(t===e&&s===r)return ta;const a=i=>Nq(i,0,1,t,s);return i=>i===0||i===1?i:ZI(a(i),e,r)}const e3=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,t3=t=>e=>1-t(1-e),s3=Jm(.33,1.53,.69,.99),uj=t3(s3),r3=e3(uj),n3=t=>(t*=2)<1?.5*uj(t):.5*(2-Math.pow(2,-10*(t-1))),hj=t=>1-Math.sin(Math.acos(t)),a3=t3(hj),i3=e3(hj),jq=Jm(.42,0,1,1),_q=Jm(0,0,.58,1),o3=Jm(.42,0,.58,1),Sq=t=>Array.isArray(t)&&typeof t[0]!="number",l3=t=>Array.isArray(t)&&typeof t[0]=="number",kq={linear:ta,easeIn:jq,easeInOut:o3,easeOut:_q,circIn:hj,circInOut:i3,circOut:a3,backIn:uj,backInOut:r3,backOut:s3,anticipate:n3},Eq=t=>typeof t=="string",WE=t=>{if(l3(t)){lj(t.length===4);const[e,s,r,a]=t;return Jm(e,s,r,a)}else if(Eq(t))return kq[t];return t},Tg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],YE={value:null};function Tq(t,e){let s=new Set,r=new Set,a=!1,i=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1},u=0;function h(p){l.has(p)&&(f.schedule(p),t()),u++,p(d)}const f={schedule:(p,x=!1,w=!1)=>{const v=w&&a?s:r;return x&&l.add(p),v.has(p)||v.add(p),p},cancel:p=>{r.delete(p),l.delete(p)},process:p=>{if(d=p,a){i=!0;return}a=!0,[s,r]=[r,s],s.forEach(h),e&&YE.value&&YE.value.frameloop[e].push(u),u=0,s.clear(),a=!1,i&&(i=!1,f.process(p))}};return f}const Cq=40;function c3(t,e){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,l=Tg.reduce((P,U)=>(P[U]=Tq(i,e?U:void 0),P),{}),{setup:d,read:u,resolveKeyframes:h,preUpdate:f,update:p,preRender:x,render:w,postRender:N}=l,v=()=>{const P=zi.useManualTiming?a.timestamp:performance.now();s=!1,zi.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(P-a.timestamp,Cq),1)),a.timestamp=P,a.isProcessing=!0,d.process(a),u.process(a),h.process(a),f.process(a),p.process(a),x.process(a),w.process(a),N.process(a),a.isProcessing=!1,s&&e&&(r=!1,t(v))},j=()=>{s=!0,r=!0,a.isProcessing||t(v)};return{schedule:Tg.reduce((P,U)=>{const R=l[U];return P[U]=(O,I=!1,C=!1)=>(s||j(),R.schedule(O,I,C)),P},{}),cancel:P=>{for(let U=0;U<Tg.length;U++)l[Tg[U]].cancel(P)},state:a,steps:l}}const{schedule:Os,cancel:zo,state:Mr,steps:Fb}=c3(typeof requestAnimationFrame<"u"?requestAnimationFrame:ta,!0);let xp;function Aq(){xp=void 0}const bn={now:()=>(xp===void 0&&bn.set(Mr.isProcessing||zi.useManualTiming?Mr.timestamp:performance.now()),xp),set:t=>{xp=t,queueMicrotask(Aq)}},d3=t=>e=>typeof e=="string"&&e.startsWith(t),mj=d3("--"),Rq=d3("var(--"),fj=t=>Rq(t)?Pq.test(t.split("/*")[0].trim()):!1,Pq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,eu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},pm={...eu,transform:t=>Fi(0,1,t)},Cg={...eu,default:1},Hh=t=>Math.round(t*1e5)/1e5,gj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Iq(t){return t==null}const Dq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pj=(t,e)=>s=>!!(typeof s=="string"&&Dq.test(s)&&s.startsWith(t)||e&&!Iq(s)&&Object.prototype.hasOwnProperty.call(s,e)),u3=(t,e,s)=>r=>{if(typeof r!="string")return r;const[a,i,l,d]=r.match(gj);return{[t]:parseFloat(a),[e]:parseFloat(i),[s]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},Mq=t=>Fi(0,255,t),zb={...eu,transform:t=>Math.round(Mq(t))},Ol={test:pj("rgb","red"),parse:u3("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+zb.transform(t)+", "+zb.transform(e)+", "+zb.transform(s)+", "+Hh(pm.transform(r))+")"};function Oq(t){let e="",s="",r="",a="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),e+=e,s+=s,r+=r,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Qv={test:pj("#"),parse:Oq,transform:Ol.transform},Zm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),yo=Zm("deg"),Ja=Zm("%"),At=Zm("px"),Lq=Zm("vh"),Uq=Zm("vw"),KE={...Ja,parse:t=>Ja.parse(t)/100,transform:t=>Ja.transform(t*100)},ud={test:pj("hsl","hue"),parse:u3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ja.transform(Hh(e))+", "+Ja.transform(Hh(s))+", "+Hh(pm.transform(r))+")"},Gr={test:t=>Ol.test(t)||Qv.test(t)||ud.test(t),parse:t=>Ol.test(t)?Ol.parse(t):ud.test(t)?ud.parse(t):Qv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ol.transform(t):ud.transform(t)},Vq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Fq(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(gj))==null?void 0:e.length)||0)+(((s=t.match(Vq))==null?void 0:s.length)||0)>0}const h3="number",m3="color",zq="var",Bq="var(",XE="${}",$q=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xm(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},a=[];let i=0;const d=e.replace($q,u=>(Gr.test(u)?(r.color.push(i),a.push(m3),s.push(Gr.parse(u))):u.startsWith(Bq)?(r.var.push(i),a.push(zq),s.push(u)):(r.number.push(i),a.push(h3),s.push(parseFloat(u))),++i,XE)).split(XE);return{values:s,split:d,indexes:r,types:a}}function f3(t){return xm(t).values}function g3(t){const{split:e,types:s}=xm(t),r=e.length;return a=>{let i="";for(let l=0;l<r;l++)if(i+=e[l],a[l]!==void 0){const d=s[l];d===h3?i+=Hh(a[l]):d===m3?i+=Gr.transform(a[l]):i+=a[l]}return i}}const qq=t=>typeof t=="number"?0:t;function Hq(t){const e=f3(t);return g3(t)(e.map(qq))}const Bo={test:Fq,parse:f3,createTransformer:g3,getAnimatableNone:Hq};function Bb(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function Gq({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let a=0,i=0,l=0;if(!e)a=i=l=s;else{const d=s<.5?s*(1+e):s+e-s*e,u=2*s-d;a=Bb(u,d,t+1/3),i=Bb(u,d,t),l=Bb(u,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:r}}function e0(t,e){return s=>s>0?e:t}const Ms=(t,e,s)=>t+(e-t)*s,$b=(t,e,s)=>{const r=t*t,a=s*(e*e-r)+r;return a<0?0:Math.sqrt(a)},Wq=[Qv,Ol,ud],Yq=t=>Wq.find(e=>e.test(t));function QE(t){const e=Yq(t);if(!e)return!1;let s=e.parse(t);return e===ud&&(s=Gq(s)),s}const JE=(t,e)=>{const s=QE(t),r=QE(e);if(!s||!r)return e0(t,e);const a={...s};return i=>(a.red=$b(s.red,r.red,i),a.green=$b(s.green,r.green,i),a.blue=$b(s.blue,r.blue,i),a.alpha=Ms(s.alpha,r.alpha,i),Ol.transform(a))},Jv=new Set(["none","hidden"]);function Kq(t,e){return Jv.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function Xq(t,e){return s=>Ms(t,e,s)}function xj(t){return typeof t=="number"?Xq:typeof t=="string"?fj(t)?e0:Gr.test(t)?JE:Zq:Array.isArray(t)?p3:typeof t=="object"?Gr.test(t)?JE:Qq:e0}function p3(t,e){const s=[...t],r=s.length,a=t.map((i,l)=>xj(i)(i,e[l]));return i=>{for(let l=0;l<r;l++)s[l]=a[l](i);return s}}function Qq(t,e){const s={...t,...e},r={};for(const a in s)t[a]!==void 0&&e[a]!==void 0&&(r[a]=xj(t[a])(t[a],e[a]));return a=>{for(const i in r)s[i]=r[i](a);return s}}function Jq(t,e){const s=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const i=e.types[a],l=t.indexes[i][r[i]],d=t.values[l]??0;s[a]=d,r[i]++}return s}const Zq=(t,e)=>{const s=Bo.createTransformer(e),r=xm(t),a=xm(e);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Jv.has(t)&&!a.values.length||Jv.has(e)&&!r.values.length?Kq(t,e):Qm(p3(Jq(r,a),a.values),s):e0(t,e)};function x3(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?Ms(t,e,s):xj(t)(t,e)}const eH=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Os.update(e,s),stop:()=>zo(e),now:()=>Mr.isProcessing?Mr.timestamp:bn.now()}},y3=(t,e,s=10)=>{let r="";const a=Math.max(Math.round(e/s),2);for(let i=0;i<a;i++)r+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},t0=2e4;function yj(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<t0;)e+=s,r=t.next(e);return e>=t0?1/0:e}function tH(t,e=100,s){const r=s({...t,keyframes:[0,e]}),a=Math.min(yj(r),t0);return{type:"keyframes",ease:i=>r.next(a*i).value/e,duration:Qa(a)}}const sH=5;function b3(t,e,s){const r=Math.max(e-sH,0);return JI(s-t(r),e-r)}const zs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ZE=.001;function rH({duration:t=zs.duration,bounce:e=zs.bounce,velocity:s=zs.velocity,mass:r=zs.mass}){let a,i,l=1-e;l=Fi(zs.minDamping,zs.maxDamping,l),t=Fi(zs.minDuration,zs.maxDuration,Qa(t)),l<1?(a=h=>{const f=h*l,p=f*t,x=f-s,w=Zv(h,l),N=Math.exp(-p);return ZE-x/w*N},i=h=>{const p=h*l*t,x=p*s+s,w=Math.pow(l,2)*Math.pow(h,2)*t,N=Math.exp(-p),v=Zv(Math.pow(h,2),l);return(-a(h)+ZE>0?-1:1)*((x-w)*N)/v}):(a=h=>{const f=Math.exp(-h*t),p=(h-s)*t+1;return-.001+f*p},i=h=>{const f=Math.exp(-h*t),p=(s-h)*(t*t);return f*p});const d=5/t,u=aH(a,i,d);if(t=Xa(t),isNaN(u))return{stiffness:zs.stiffness,damping:zs.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const nH=12;function aH(t,e,s){let r=s;for(let a=1;a<nH;a++)r=r-t(r)/e(r);return r}function Zv(t,e){return t*Math.sqrt(1-e*e)}const iH=["duration","bounce"],oH=["stiffness","damping","mass"];function eT(t,e){return e.some(s=>t[s]!==void 0)}function lH(t){let e={velocity:zs.velocity,stiffness:zs.stiffness,damping:zs.damping,mass:zs.mass,isResolvedFromDuration:!1,...t};if(!eT(t,oH)&&eT(t,iH))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),a=r*r,i=2*Fi(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:zs.mass,stiffness:a,damping:i}}else{const s=rH(t);e={...e,...s,mass:zs.mass},e.isResolvedFromDuration=!0}return e}function s0(t=zs.visualDuration,e=zs.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:a}=s;const i=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],d={done:!1,value:i},{stiffness:u,damping:h,mass:f,duration:p,velocity:x,isResolvedFromDuration:w}=lH({...s,velocity:-Qa(s.velocity||0)}),N=x||0,v=h/(2*Math.sqrt(u*f)),j=l-i,k=Qa(Math.sqrt(u/f)),T=Math.abs(j)<5;r||(r=T?zs.restSpeed.granular:zs.restSpeed.default),a||(a=T?zs.restDelta.granular:zs.restDelta.default);let P;if(v<1){const R=Zv(k,v);P=O=>{const I=Math.exp(-v*k*O);return l-I*((N+v*k*j)/R*Math.sin(R*O)+j*Math.cos(R*O))}}else if(v===1)P=R=>l-Math.exp(-k*R)*(j+(N+k*j)*R);else{const R=k*Math.sqrt(v*v-1);P=O=>{const I=Math.exp(-v*k*O),C=Math.min(R*O,300);return l-I*((N+v*k*j)*Math.sinh(C)+R*j*Math.cosh(C))/R}}const U={calculatedDuration:w&&p||null,next:R=>{const O=P(R);if(w)d.done=R>=p;else{let I=R===0?N:0;v<1&&(I=R===0?Xa(N):b3(P,R,O));const C=Math.abs(I)<=r,E=Math.abs(l-O)<=a;d.done=C&&E}return d.value=d.done?l:O,d},toString:()=>{const R=Math.min(yj(U),t0),O=y3(I=>U.next(R*I).value,R,30);return R+"ms "+O},toTransition:()=>{}};return U}s0.applyToOptions=t=>{const e=tH(t,100,s0);return t.ease=e.ease,t.duration=Xa(e.duration),t.type="keyframes",t};function ew({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:l,min:d,max:u,restDelta:h=.5,restSpeed:f}){const p=t[0],x={done:!1,value:p},w=C=>d!==void 0&&C<d||u!==void 0&&C>u,N=C=>d===void 0?u:u===void 0||Math.abs(d-C)<Math.abs(u-C)?d:u;let v=s*e;const j=p+v,k=l===void 0?j:l(j);k!==j&&(v=k-p);const T=C=>-v*Math.exp(-C/r),P=C=>k+T(C),U=C=>{const E=T(C),D=P(C);x.done=Math.abs(E)<=h,x.value=x.done?k:D};let R,O;const I=C=>{w(x.value)&&(R=C,O=s0({keyframes:[x.value,N(x.value)],velocity:b3(P,C,x.value),damping:a,stiffness:i,restDelta:h,restSpeed:f}))};return I(0),{calculatedDuration:null,next:C=>{let E=!1;return!O&&R===void 0&&(E=!0,U(C),I(C)),R!==void 0&&C>=R?O.next(C-R):(!E&&U(C),x)}}}function cH(t,e,s){const r=[],a=s||zi.mix||x3,i=t.length-1;for(let l=0;l<i;l++){let d=a(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||ta:e;d=Qm(u,d)}r.push(d)}return r}function dH(t,e,{clamp:s=!0,ease:r,mixer:a}={}){const i=t.length;if(lj(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=cH(e,r,a),u=d.length,h=f=>{if(l&&f<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const x=gm(t[p],t[p+1],f);return d[p](x)};return s?f=>h(Fi(t[0],t[i-1],f)):h}function uH(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const a=gm(0,e,r);t.push(Ms(s,1,a))}}function hH(t){const e=[0];return uH(e,t.length-1),e}function mH(t,e){return t.map(s=>s*e)}function fH(t,e){return t.map(()=>e||o3).splice(0,t.length-1)}function Gh({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const a=Sq(r)?r.map(WE):WE(r),i={done:!1,value:e[0]},l=mH(s&&s.length===e.length?s:hH(e),t),d=dH(l,e,{ease:Array.isArray(a)?a:fH(e,a)});return{calculatedDuration:t,next:u=>(i.value=d(u),i.done=u>=t,i)}}const gH=t=>t!==null;function bj(t,{repeat:e,repeatType:s="loop"},r,a=1){const i=t.filter(gH),d=a<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!d||r===void 0?i[d]:r}const pH={decay:ew,inertia:ew,tween:Gh,keyframes:Gh,spring:s0};function v3(t){typeof t.type=="string"&&(t.type=pH[t.type])}class vj{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const xH=t=>t/100;class wj extends vj{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:s}=this.options;s&&s.updatedAt!==bn.now()&&this.tick(bn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;v3(e);const{type:s=Gh,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:l=0}=e;let{keyframes:d}=e;const u=s||Gh;u!==Gh&&typeof d[0]!="number"&&(this.mixKeyframes=Qm(xH,x3(d[0],d[1])),d=[0,100]);const h=u({...e,keyframes:d});i==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...d].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=yj(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=h}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:l,resolvedDuration:d,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:f,repeat:p,repeatType:x,repeatDelay:w,type:N,onUpdate:v,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const k=this.currentTime-h*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?k<0:k>a;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let P=this.currentTime,U=r;if(p){const C=Math.min(this.currentTime,a)/d;let E=Math.floor(C),D=C%1;!D&&C>=1&&(D=1),D===1&&E--,E=Math.min(E,p+1),!!(E%2)&&(x==="reverse"?(D=1-D,w&&(D-=w/d)):x==="mirror"&&(U=l)),P=Fi(0,1,D)*d}const R=T?{done:!1,value:f[0]}:U.next(P);i&&(R.value=i(R.value));let{done:O}=R;!T&&u!==null&&(O=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&N!==ew&&(R.value=bj(f,this.options,j,this.speed)),v&&v(R.value),I&&this.finish(),R}then(e,s){return this.finished.then(e,s)}get duration(){return Qa(this.calculatedDuration)}get time(){return Qa(this.currentTime)}set time(e){var s;e=Xa(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(bn.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Qa(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:e=eH,startTime:s}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function yH(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ll=t=>t*180/Math.PI,tw=t=>{const e=Ll(Math.atan2(t[1],t[0]));return sw(e)},bH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:tw,rotateZ:tw,skewX:t=>Ll(Math.atan(t[1])),skewY:t=>Ll(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},sw=t=>(t=t%360,t<0&&(t+=360),t),tT=tw,sT=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),rT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),vH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sT,scaleY:rT,scale:t=>(sT(t)+rT(t))/2,rotateX:t=>sw(Ll(Math.atan2(t[6],t[5]))),rotateY:t=>sw(Ll(Math.atan2(-t[2],t[0]))),rotateZ:tT,rotate:tT,skewX:t=>Ll(Math.atan(t[4])),skewY:t=>Ll(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function rw(t){return t.includes("scale")?1:0}function nw(t,e){if(!t||t==="none")return rw(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(s)r=vH,a=s;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=bH,a=d}if(!a)return rw(e);const i=r[e],l=a[1].split(",").map(NH);return typeof i=="function"?i(l):l[i]}const wH=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return nw(s,e)};function NH(t){return parseFloat(t.trim())}const tu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],su=new Set(tu),nT=t=>t===eu||t===At,jH=new Set(["x","y","z"]),_H=tu.filter(t=>!jH.has(t));function SH(t){const e=[];return _H.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const ql={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>nw(e,"x"),y:(t,{transform:e})=>nw(e,"y")};ql.translateX=ql.x;ql.translateY=ql.y;const Hl=new Set;let aw=!1,iw=!1,ow=!1;function w3(){if(iw){const t=Array.from(Hl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const a=SH(r);a.length&&(s.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const a=s.get(r);a&&a.forEach(([i,l])=>{var d;(d=r.getValue(i))==null||d.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}iw=!1,aw=!1,Hl.forEach(t=>t.complete(ow)),Hl.clear()}function N3(){Hl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(iw=!0)})}function kH(){ow=!0,N3(),w3(),ow=!1}class Nj{constructor(e,s,r,a,i,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=a,this.element=i,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Hl.add(this),aw||(aw=!0,Os.read(N3),Os.resolveKeyframes(w3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:a}=this;if(e[0]===null){const i=a==null?void 0:a.get(),l=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&s){const d=r.readValue(s,l);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=l),a&&i===void 0&&a.set(e[0])}yH(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Hl.delete(this)}cancel(){this.state==="scheduled"&&(Hl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const EH=t=>t.startsWith("--");function TH(t,e,s){EH(e)?t.style.setProperty(e,s):t.style[e]=s}const CH=cj(()=>window.ScrollTimeline!==void 0),AH={};function RH(t,e){const s=cj(t);return()=>AH[e]??s()}const j3=RH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ch=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,aT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ch([0,.65,.55,1]),circOut:Ch([.55,0,1,.45]),backIn:Ch([.31,.01,.66,-.59]),backOut:Ch([.33,1.53,.69,.99])};function _3(t,e){if(t)return typeof t=="function"?j3()?y3(t,e):"ease-out":l3(t)?Ch(t):Array.isArray(t)?t.map(s=>_3(s,e)||aT.easeOut):aT[t]}function PH(t,e,s,{delay:r=0,duration:a=300,repeat:i=0,repeatType:l="loop",ease:d="easeOut",times:u}={},h=void 0){const f={[e]:s};u&&(f.offset=u);const p=_3(d,a);Array.isArray(p)&&(f.easing=p);const x={delay:r,duration:a,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),t.animate(f,x)}function S3(t){return typeof t=="function"&&"applyToOptions"in t}function IH({type:t,...e}){return S3(t)&&j3()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class DH extends vj{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:r,keyframes:a,pseudoElement:i,allowFlatten:l=!1,finalKeyframe:d,onComplete:u}=e;this.isPseudoElement=!!i,this.allowFlatten=l,this.options=e,lj(typeof e.type!="string");const h=IH(e);this.animation=PH(s,r,a,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const f=bj(a,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(f):TH(s,r,f),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,r;const e=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return Qa(Number(e))}get time(){return Qa(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Xa(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&CH()?(this.animation.timeline=e,ta):s(this)}}const k3={anticipate:n3,backInOut:r3,circInOut:i3};function MH(t){return t in k3}function OH(t){typeof t.ease=="string"&&MH(t.ease)&&(t.ease=k3[t.ease])}const iT=10;class LH extends DH{constructor(e){OH(e),v3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:r,onComplete:a,element:i,...l}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const d=new wj({...l,autoplay:!1}),u=Xa(this.finishedTime??this.time);s.setWithVelocity(d.sample(u-iT).value,d.sample(u).value,iT),d.stop()}}const oT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Bo.test(t)||t==="0")&&!t.startsWith("url("));function UH(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function VH(t,e,s,r){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],l=oT(a,e),d=oT(i,e);return!l||!d?!1:UH(t)||(s==="spring"||S3(s))&&r}function jj(t){return XI(t)&&"offsetHeight"in t}const FH=new Set(["opacity","clipPath","filter","transform"]),zH=cj(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function BH(t){var h;const{motionValue:e,name:s,repeatDelay:r,repeatType:a,damping:i,type:l}=t;if(!jj((h=e==null?void 0:e.owner)==null?void 0:h.current))return!1;const{onUpdate:d,transformTemplate:u}=e.owner.getProps();return zH()&&s&&FH.has(s)&&(s!=="transform"||!u)&&!d&&!r&&a!=="mirror"&&i!==0&&l!=="inertia"}const $H=40;class qH extends vj{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:l="loop",keyframes:d,name:u,motionValue:h,element:f,...p}){var N;super(),this.stop=()=>{var v,j;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=bn.now();const x={autoplay:e,delay:s,type:r,repeat:a,repeatDelay:i,repeatType:l,name:u,motionValue:h,element:f,...p},w=(f==null?void 0:f.KeyframeResolver)||Nj;this.keyframeResolver=new w(d,(v,j,k)=>this.onKeyframesResolved(v,j,x,!k),u,h,f),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(e,s,r,a){this.keyframeResolver=void 0;const{name:i,type:l,velocity:d,delay:u,isHandoff:h,onUpdate:f}=r;this.resolvedAt=bn.now(),VH(e,i,l,d)||((zi.instantAnimations||!u)&&(f==null||f(bj(e,r,s))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const x={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>$H?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:e},w=!h&&BH(x)?new LH({...x,element:x.motionValue.owner.current}):new wj(x);w.finished.then(()=>this.notifyFinished()).catch(ta),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),kH()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const HH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function GH(t){const e=HH.exec(t);if(!e)return[,];const[,s,r,a]=e;return[`--${s??r}`,a]}function E3(t,e,s=1){const[r,a]=GH(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const l=i.trim();return KI(l)?parseFloat(l):l}return fj(a)?E3(a,e,s+1):a}function _j(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const T3=new Set(["width","height","top","left","right","bottom",...tu]),WH={test:t=>t==="auto",parse:t=>t},C3=t=>e=>e.test(t),A3=[eu,At,Ja,yo,Uq,Lq,WH],lT=t=>A3.find(C3(t));function YH(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||QI(t):!0}const KH=new Set(["brightness","contrast","saturate","opacity"]);function XH(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(gj)||[];if(!r)return t;const a=s.replace(r,"");let i=KH.has(e)?1:0;return r!==s&&(i*=100),e+"("+i+a+")"}const QH=/\b([a-z-]*)\(.*?\)/gu,lw={...Bo,getAnimatableNone:t=>{const e=t.match(QH);return e?e.map(XH).join(" "):t}},cT={...eu,transform:Math.round},JH={rotate:yo,rotateX:yo,rotateY:yo,rotateZ:yo,scale:Cg,scaleX:Cg,scaleY:Cg,scaleZ:Cg,skew:yo,skewX:yo,skewY:yo,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:pm,originX:KE,originY:KE,originZ:At},Sj={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,radius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,backgroundPositionX:At,backgroundPositionY:At,...JH,zIndex:cT,fillOpacity:pm,strokeOpacity:pm,numOctaves:cT},ZH={...Sj,color:Gr,backgroundColor:Gr,outlineColor:Gr,fill:Gr,stroke:Gr,borderColor:Gr,borderTopColor:Gr,borderRightColor:Gr,borderBottomColor:Gr,borderLeftColor:Gr,filter:lw,WebkitFilter:lw},R3=t=>ZH[t];function P3(t,e){let s=R3(t);return s!==lw&&(s=Bo),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const eG=new Set(["auto","none","0"]);function tG(t,e,s){let r=0,a;for(;r<t.length&&!a;){const i=t[r];typeof i=="string"&&!eG.has(i)&&xm(i).values.length&&(a=t[r]),r++}if(a&&s)for(const i of e)t[i]=P3(s,a)}class sG extends Nj{constructor(e,s,r,a,i){super(e,s,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),fj(h))){const f=E3(h,s.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!T3.has(r)||e.length!==2)return;const[a,i]=e,l=lT(a),d=lT(i);if(l!==d)if(nT(l)&&nT(d))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else ql[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let a=0;a<e.length;a++)(e[a]===null||YH(e[a]))&&r.push(a);r.length&&tG(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ql[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(r,a).jump(a,!1)}measureEndState(){var d;const{element:e,name:s,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,l=r[i];r[i]=ql[s](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function rG(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const a=(s==null?void 0:s[t])??r.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const I3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,dT=30,nG=t=>!isNaN(parseFloat(t));class aG{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{var l,d;const i=bn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();a&&((d=this.events.renderRequest)==null||d.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=bn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=nG(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new dj);const r=this.events[e].add(s);return e==="change"?()=>{r(),Os.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dT)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,dT);return JI(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Dd(t,e){return new aG(t,e)}const{schedule:kj}=c3(queueMicrotask,!1),da={x:!1,y:!1};function D3(){return da.x||da.y}function iG(t){return t==="x"||t==="y"?da[t]?null:(da[t]=!0,()=>{da[t]=!1}):da.x||da.y?null:(da.x=da.y=!0,()=>{da.x=da.y=!1})}function M3(t,e){const s=rG(t),r=new AbortController,a={passive:!0,...e,signal:r.signal};return[s,a,()=>r.abort()]}function uT(t){return!(t.pointerType==="touch"||D3())}function oG(t,e,s={}){const[r,a,i]=M3(t,s),l=d=>{if(!uT(d))return;const{target:u}=d,h=e(u,d);if(typeof h!="function"||!u)return;const f=p=>{uT(p)&&(h(p),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,a)};return r.forEach(d=>{d.addEventListener("pointerenter",l,a)}),i}const O3=(t,e)=>e?t===e?!0:O3(t,e.parentElement):!1,Ej=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,lG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cG(t){return lG.has(t.tagName)||t.tabIndex!==-1}const yp=new WeakSet;function hT(t){return e=>{e.key==="Enter"&&t(e)}}function qb(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const dG=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=hT(()=>{if(yp.has(s))return;qb(s,"down");const a=hT(()=>{qb(s,"up")}),i=()=>qb(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function mT(t){return Ej(t)&&!D3()}function uG(t,e,s={}){const[r,a,i]=M3(t,s),l=d=>{const u=d.currentTarget;if(!mT(d))return;yp.add(u);const h=e(u,d),f=(w,N)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",x),yp.has(u)&&yp.delete(u),mT(w)&&typeof h=="function"&&h(w,{success:N})},p=w=>{f(w,u===window||u===document||s.useGlobalTarget||O3(u,w.target))},x=w=>{f(w,!1)};window.addEventListener("pointerup",p,a),window.addEventListener("pointercancel",x,a)};return r.forEach(d=>{(s.useGlobalTarget?window:d).addEventListener("pointerdown",l,a),jj(d)&&(d.addEventListener("focus",h=>dG(h,a)),!cG(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),i}function L3(t){return XI(t)&&"ownerSVGElement"in t}function hG(t){return L3(t)&&t.tagName==="svg"}const Kr=t=>!!(t&&t.getVelocity),mG=[...A3,Gr,Bo],fG=t=>mG.find(C3(t)),Tj=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class gG extends _.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const r=s.offsetParent,a=jj(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pG({children:t,isPresent:e,anchorX:s}){const r=_.useId(),a=_.useRef(null),i=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=_.useContext(Tj);return _.useInsertionEffect(()=>{const{width:d,height:u,top:h,left:f,right:p}=i.current;if(e||!a.current||!d||!u)return;const x=s==="left"?`left: ${f}`:`right: ${p}`;a.current.dataset.motionPopId=r;const w=document.createElement("style");return l&&(w.nonce=l),document.head.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${u}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(w)&&document.head.removeChild(w)}},[e]),n.jsx(gG,{isPresent:e,childRef:a,sizeRef:i,children:_.cloneElement(t,{ref:a})})}const xG=({children:t,initial:e,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:l,anchorX:d})=>{const u=nj(yG),h=_.useId();let f=!0,p=_.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:s,custom:a,onExitComplete:x=>{u.set(x,!0);for(const w of u.values())if(!w)return;r&&r()},register:x=>(u.set(x,!1),()=>u.delete(x))}),[s,u,r]);return i&&f&&(p={...p}),_.useMemo(()=>{u.forEach((x,w)=>u.set(w,!1))},[s]),_.useEffect(()=>{!s&&!u.size&&r&&r()},[s]),l==="popLayout"&&(t=n.jsx(pG,{isPresent:s,anchorX:d,children:t})),n.jsx(ox.Provider,{value:p,children:t})};function yG(){return new Map}function U3(t=!0){const e=_.useContext(ox);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=e,i=_.useId();_.useEffect(()=>{if(t)return a(i)},[t]);const l=_.useCallback(()=>t&&r&&r(i),[i,r,t]);return!s&&r?[!1,l]:[!0]}const Ag=t=>t.key||"";function fT(t){const e=[];return _.Children.forEach(t,s=>{_.isValidElement(s)&&e.push(s)}),e}const Md=({children:t,custom:e,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:l=!1,anchorX:d="left"})=>{const[u,h]=U3(l),f=_.useMemo(()=>fT(t),[t]),p=l&&!u?[]:f.map(Ag),x=_.useRef(!0),w=_.useRef(f),N=nj(()=>new Map),[v,j]=_.useState(f),[k,T]=_.useState(f);YI(()=>{x.current=!1,w.current=f;for(let R=0;R<k.length;R++){const O=Ag(k[R]);p.includes(O)?N.delete(O):N.get(O)!==!0&&N.set(O,!1)}},[k,p.length,p.join("-")]);const P=[];if(f!==v){let R=[...f];for(let O=0;O<k.length;O++){const I=k[O],C=Ag(I);p.includes(C)||(R.splice(O,0,I),P.push(I))}return i==="wait"&&P.length&&(R=P),T(fT(R)),j(f),null}const{forceRender:U}=_.useContext(rj);return n.jsx(n.Fragment,{children:k.map(R=>{const O=Ag(R),I=l&&!u?!1:f===k||p.includes(O),C=()=>{if(N.has(O))N.set(O,!0);else return;let E=!0;N.forEach(D=>{D||(E=!1)}),E&&(U==null||U(),T(w.current),l&&(h==null||h()),r&&r())};return n.jsx(xG,{isPresent:I,initial:!x.current||s?void 0:!1,custom:e,presenceAffectsLayout:a,mode:i,onExitComplete:I?void 0:C,anchorX:d,children:R},O)})})},V3=_.createContext({strict:!1}),gT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Od={};for(const t in gT)Od[t]={isEnabled:e=>gT[t].some(s=>!!e[s])};function bG(t){for(const e in t)Od[e]={...Od[e],...t[e]}}const vG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function r0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||vG.has(t)}let F3=t=>!r0(t);function wG(t){t&&(F3=e=>e.startsWith("on")?!r0(e):t(e))}try{wG(require("@emotion/is-prop-valid").default)}catch{}function NG(t,e,s){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(F3(a)||s===!0&&r0(a)||!e&&!r0(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}function jG(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...r)=>t(...r);return new Proxy(s,{get:(r,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const lx=_.createContext({});function cx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ym(t){return typeof t=="string"||Array.isArray(t)}const Cj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Aj=["initial",...Cj];function dx(t){return cx(t.animate)||Aj.some(e=>ym(t[e]))}function z3(t){return!!(dx(t)||t.variants)}function _G(t,e){if(dx(t)){const{initial:s,animate:r}=t;return{initial:s===!1||ym(s)?s:void 0,animate:ym(r)?r:void 0}}return t.inherit!==!1?e:{}}function SG(t){const{initial:e,animate:s}=_G(t,_.useContext(lx));return _.useMemo(()=>({initial:e,animate:s}),[pT(e),pT(s)])}function pT(t){return Array.isArray(t)?t.join(" "):t}const kG=Symbol.for("motionComponentSymbol");function hd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function EG(t,e,s){return _.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):hd(s)&&(s.current=r))},[e])}const Rj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),TG="framerAppearId",B3="data-"+Rj(TG),$3=_.createContext({});function CG(t,e,s,r,a){var v,j;const{visualElement:i}=_.useContext(lx),l=_.useContext(V3),d=_.useContext(ox),u=_.useContext(Tj).reducedMotion,h=_.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:i,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=_.useContext($3);f&&!f.projection&&a&&(f.type==="html"||f.type==="svg")&&AG(h.current,s,a,p);const x=_.useRef(!1);_.useInsertionEffect(()=>{f&&x.current&&f.update(s,d)});const w=s[B3],N=_.useRef(!!w&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,w))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,w)));return YI(()=>{f&&(x.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),kj.render(f.render),N.current&&f.animationState&&f.animationState.animateChanges())}),_.useEffect(()=>{f&&(!N.current&&f.animationState&&f.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)==null||k.call(window,w)}),N.current=!1))}),f}function AG(t,e,s,r){const{layoutId:a,layout:i,drag:l,dragConstraints:d,layoutScroll:u,layoutRoot:h,layoutCrossfade:f}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:q3(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!l||d&&hd(d),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:u,layoutRoot:h})}function q3(t){if(t)return t.options.allowProjection!==!1?t.projection:q3(t.parent)}function RG({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:r,Component:a}){t&&bG(t);function i(d,u){let h;const f={..._.useContext(Tj),...d,layoutId:PG(d)},{isStatic:p}=f,x=SG(d),w=r(d,p);if(!p&&aj){IG();const N=DG(f);h=N.MeasureLayout,x.visualElement=CG(a,w,f,e,N.ProjectionNode)}return n.jsxs(lx.Provider,{value:x,children:[h&&x.visualElement?n.jsx(h,{visualElement:x.visualElement,...f}):null,s(a,d,EG(w,x.visualElement,u),w,p,x.visualElement)]})}i.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const l=_.forwardRef(i);return l[kG]=a,l}function PG({layoutId:t}){const e=_.useContext(rj).id;return e&&t!==void 0?e+"-"+t:t}function IG(t,e){_.useContext(V3).strict}function DG(t){const{drag:e,layout:s}=Od;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const bm={};function MG(t){for(const e in t)bm[e]=t[e],mj(e)&&(bm[e].isCSSVariable=!0)}function H3(t,{layout:e,layoutId:s}){return su.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!bm[t]||t==="opacity")}const OG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LG=tu.length;function UG(t,e,s){let r="",a=!0;for(let i=0;i<LG;i++){const l=tu[i],d=t[l];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(l.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||s){const h=I3(d,Sj[l]);if(!u){a=!1;const f=OG[l]||l;r+=`${f}(${h}) `}s&&(e[l]=h)}}return r=r.trim(),s?r=s(e,a?"":r):a&&(r="none"),r}function Pj(t,e,s){const{style:r,vars:a,transformOrigin:i}=t;let l=!1,d=!1;for(const u in e){const h=e[u];if(su.has(u)){l=!0;continue}else if(mj(u)){a[u]=h;continue}else{const f=I3(h,Sj[u]);u.startsWith("origin")?(d=!0,i[u]=f):r[u]=f}}if(e.transform||(l||s?r.transform=UG(e,t.transform,s):r.transform&&(r.transform="none")),d){const{originX:u="50%",originY:h="50%",originZ:f=0}=i;r.transformOrigin=`${u} ${h} ${f}`}}const Ij=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function G3(t,e,s){for(const r in e)!Kr(e[r])&&!H3(r,s)&&(t[r]=e[r])}function VG({transformTemplate:t},e){return _.useMemo(()=>{const s=Ij();return Pj(s,e,t),Object.assign({},s.vars,s.style)},[e])}function FG(t,e){const s=t.style||{},r={};return G3(r,s,t),Object.assign(r,VG(t,e)),r}function zG(t,e){const s={},r=FG(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const BG={offset:"stroke-dashoffset",array:"stroke-dasharray"},$G={offset:"strokeDashoffset",array:"strokeDasharray"};function qG(t,e,s=1,r=0,a=!0){t.pathLength=1;const i=a?BG:$G;t[i.offset]=At.transform(-r);const l=At.transform(e),d=At.transform(s);t[i.array]=`${l} ${d}`}function W3(t,{attrX:e,attrY:s,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:l=0,...d},u,h,f){if(Pj(t,d,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:x}=t;p.transform&&(x.transform=p.transform,delete p.transform),(x.transform||p.transformOrigin)&&(x.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),x.transform&&(x.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),s!==void 0&&(p.y=s),r!==void 0&&(p.scale=r),a!==void 0&&qG(p,a,i,l,!1)}const Y3=()=>({...Ij(),attrs:{}}),K3=t=>typeof t=="string"&&t.toLowerCase()==="svg";function HG(t,e,s,r){const a=_.useMemo(()=>{const i=Y3();return W3(i,e,K3(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};G3(i,t.style,t),a.style={...i,...a.style}}return a}const GG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dj(t){return typeof t!="string"||t.includes("-")?!1:!!(GG.indexOf(t)>-1||/[A-Z]/u.test(t))}function WG(t=!1){return(s,r,a,{latestValues:i},l)=>{const u=(Dj(s)?HG:zG)(r,i,l,s),h=NG(r,typeof s=="string",t),f=s!==_.Fragment?{...h,...u,ref:a}:{},{children:p}=r,x=_.useMemo(()=>Kr(p)?p.get():p,[p]);return _.createElement(s,{...f,children:x})}}function xT(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function Mj(t,e,s,r){if(typeof e=="function"){const[a,i]=xT(r);e=e(s!==void 0?s:t.custom,a,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,i]=xT(r);e=e(s!==void 0?s:t.custom,a,i)}return e}function bp(t){return Kr(t)?t.get():t}function YG({scrapeMotionValuesFromProps:t,createRenderState:e},s,r,a){return{latestValues:KG(s,r,a,t),renderState:e()}}const X3=t=>(e,s)=>{const r=_.useContext(lx),a=_.useContext(ox),i=()=>YG(t,e,r,a);return s?i():nj(i)};function KG(t,e,s,r){const a={},i=r(t,{});for(const x in i)a[x]=bp(i[x]);let{initial:l,animate:d}=t;const u=dx(t),h=z3(t);e&&h&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let f=s?s.initial===!1:!1;f=f||l===!1;const p=f?d:l;if(p&&typeof p!="boolean"&&!cx(p)){const x=Array.isArray(p)?p:[p];for(let w=0;w<x.length;w++){const N=Mj(t,x[w]);if(N){const{transitionEnd:v,transition:j,...k}=N;for(const T in k){let P=k[T];if(Array.isArray(P)){const U=f?P.length-1:0;P=P[U]}P!==null&&(a[T]=P)}for(const T in v)a[T]=v[T]}}}return a}function Oj(t,e,s){var i;const{style:r}=t,a={};for(const l in r)(Kr(r[l])||e.style&&Kr(e.style[l])||H3(l,t)||((i=s==null?void 0:s.getValue(l))==null?void 0:i.liveStyle)!==void 0)&&(a[l]=r[l]);return a}const XG={useVisualState:X3({scrapeMotionValuesFromProps:Oj,createRenderState:Ij})};function Q3(t,e,s){const r=Oj(t,e,s);for(const a in t)if(Kr(t[a])||Kr(e[a])){const i=tu.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=t[a]}return r}const QG={useVisualState:X3({scrapeMotionValuesFromProps:Q3,createRenderState:Y3})};function JG(t,e){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...Dj(r)?QG:XG,preloadedFeatures:t,useRender:WG(a),createVisualElement:e,Component:r};return RG(l)}}function vm(t,e,s){const r=t.getProps();return Mj(r,e,s!==void 0?s:r.custom,t)}const cw=t=>Array.isArray(t);function ZG(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,Dd(s))}function eW(t){return cw(t)?t[t.length-1]||0:t}function tW(t,e){const s=vm(t,e);let{transitionEnd:r={},transition:a={},...i}=s||{};i={...i,...r};for(const l in i){const d=eW(i[l]);ZG(t,l,d)}}function sW(t){return!!(Kr(t)&&t.add)}function dw(t,e){const s=t.getValue("willChange");if(sW(s))return s.add(e);if(!s&&zi.WillChange){const r=new zi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function J3(t){return t.props[B3]}const rW=t=>t!==null;function nW(t,{repeat:e,repeatType:s="loop"},r){const a=t.filter(rW),i=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[i]}const aW={type:"spring",stiffness:500,damping:25,restSpeed:10},iW=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),oW={type:"keyframes",duration:.8},lW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cW=(t,{keyframes:e})=>e.length>2?oW:su.has(t)?t.startsWith("scale")?iW(e[1]):aW:lW;function dW({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:l,repeatDelay:d,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const Lj=(t,e,s,r={},a,i)=>l=>{const d=_j(r,t)||{},u=d.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Xa(u);const f={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-h,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:i?void 0:a};dW(d)||Object.assign(f,cW(t,f)),f.duration&&(f.duration=Xa(f.duration)),f.repeatDelay&&(f.repeatDelay=Xa(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(p=!0)),(zi.instantAnimations||zi.skipAnimations)&&(p=!0,f.duration=0,f.delay=0),f.allowFlatten=!d.type&&!d.ease,p&&!i&&e.get()!==void 0){const x=nW(f.keyframes,d);if(x!==void 0){Os.update(()=>{f.onUpdate(x),f.onComplete()});return}}return d.isSync?new wj(f):new qH(f)};function uW({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function Z3(t,e,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:l,...d}=e;r&&(i=r);const u=[],h=a&&t.animationState&&t.animationState.getState()[a];for(const f in d){const p=t.getValue(f,t.latestValues[f]??null),x=d[f];if(x===void 0||h&&uW(h,f))continue;const w={delay:s,..._j(i||{},f)},N=p.get();if(N!==void 0&&!p.isAnimating&&!Array.isArray(x)&&x===N&&!w.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const k=J3(t);if(k){const T=window.MotionHandoffAnimation(k,f,Os);T!==null&&(w.startTime=T,v=!0)}}dw(t,f),p.start(Lj(f,p,x,t.shouldReduceMotion&&T3.has(f)?{type:!1}:w,t,v));const j=p.animation;j&&u.push(j)}return l&&Promise.all(u).then(()=>{Os.update(()=>{l&&tW(t,l)})}),u}function uw(t,e,s={}){var u;const r=vm(t,e,s.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const i=r?()=>Promise.all(Z3(t,r,s)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:x}=a;return hW(t,e,f+h,p,x,s)}:()=>Promise.resolve(),{when:d}=a;if(d){const[h,f]=d==="beforeChildren"?[i,l]:[l,i];return h().then(()=>f())}else return Promise.all([i(),l(s.delay)])}function hW(t,e,s=0,r=0,a=1,i){const l=[],d=(t.variantChildren.size-1)*r,u=a===1?(h=0)=>h*r:(h=0)=>d-h*r;return Array.from(t.variantChildren).sort(mW).forEach((h,f)=>{h.notify("AnimationStart",e),l.push(uw(h,e,{...i,delay:s+u(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function mW(t,e){return t.sortNodePosition(e)}function fW(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const a=e.map(i=>uw(t,i,s));r=Promise.all(a)}else if(typeof e=="string")r=uw(t,e,s);else{const a=typeof e=="function"?vm(t,e,s.custom):e;r=Promise.all(Z3(t,a,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}function e6(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}const gW=Aj.length;function t6(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?t6(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<gW;s++){const r=Aj[s],a=t.props[r];(ym(a)||a===!1)&&(e[r]=a)}return e}const pW=[...Cj].reverse(),xW=Cj.length;function yW(t){return e=>Promise.all(e.map(({animation:s,options:r})=>fW(t,s,r)))}function bW(t){let e=yW(t),s=yT(),r=!0;const a=u=>(h,f)=>{var x;const p=vm(t,f,u==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(p){const{transition:w,transitionEnd:N,...v}=p;h={...h,...v,...N}}return h};function i(u){e=u(t)}function l(u){const{props:h}=t,f=t6(t.parent)||{},p=[],x=new Set;let w={},N=1/0;for(let j=0;j<xW;j++){const k=pW[j],T=s[k],P=h[k]!==void 0?h[k]:f[k],U=ym(P),R=k===u?T.isActive:null;R===!1&&(N=j);let O=P===f[k]&&P!==h[k]&&U;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),T.protectedKeys={...w},!T.isActive&&R===null||!P&&!T.prevProp||cx(P)||typeof P=="boolean")continue;const I=vW(T.prevProp,P);let C=I||k===u&&T.isActive&&!O&&U||j>N&&U,E=!1;const D=Array.isArray(P)?P:[P];let V=D.reduce(a(k),{});R===!1&&(V={});const{prevResolvedValues:B={}}=T,M={...B,...V},Y=W=>{C=!0,x.has(W)&&(E=!0,x.delete(W)),T.needsAnimating[W]=!0;const de=t.getValue(W);de&&(de.liveStyle=!1)};for(const W in M){const de=V[W],ge=B[W];if(w.hasOwnProperty(W))continue;let z=!1;cw(de)&&cw(ge)?z=!e6(de,ge):z=de!==ge,z?de!=null?Y(W):x.add(W):de!==void 0&&x.has(W)?Y(W):T.protectedKeys[W]=!0}T.prevProp=P,T.prevResolvedValues=V,T.isActive&&(w={...w,...V}),r&&t.blockInitialAnimation&&(C=!1),C&&(!(O&&I)||E)&&p.push(...D.map(W=>({animation:W,options:{type:k}})))}if(x.size){const j={};if(typeof h.initial!="boolean"){const k=vm(t,Array.isArray(h.initial)?h.initial[0]:h.initial);k&&k.transition&&(j.transition=k.transition)}x.forEach(k=>{const T=t.getBaseTarget(k),P=t.getValue(k);P&&(P.liveStyle=!0),j[k]=T??null}),p.push({animation:j})}let v=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(p):Promise.resolve()}function d(u,h){var p;if(s[u].isActive===h)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(x=>{var w;return(w=x.animationState)==null?void 0:w.setActive(u,h)}),s[u].isActive=h;const f=l(u);for(const x in s)s[x].protectedKeys={};return f}return{animateChanges:l,setActive:d,setAnimateFunction:i,getState:()=>s,reset:()=>{s=yT(),r=!0}}}function vW(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!e6(e,t):!1}function Sl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yT(){return{animate:Sl(!0),whileInView:Sl(),whileHover:Sl(),whileTap:Sl(),whileDrag:Sl(),whileFocus:Sl(),exit:Sl()}}class Wo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wW extends Wo{constructor(e){super(e),e.animationState||(e.animationState=bW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let NW=0;class jW extends Wo{constructor(){super(...arguments),this.id=NW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const _W={animation:{Feature:wW},exit:{Feature:jW}};function wm(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function ef(t){return{point:{x:t.pageX,y:t.pageY}}}const SW=t=>e=>Ej(e)&&t(e,ef(e));function Wh(t,e,s,r){return wm(t,e,SW(s),r)}function s6({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function kW({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function EW(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}const r6=1e-4,TW=1-r6,CW=1+r6,n6=.01,AW=0-n6,RW=0+n6;function ln(t){return t.max-t.min}function PW(t,e,s){return Math.abs(t-e)<=s}function bT(t,e,s,r=.5){t.origin=r,t.originPoint=Ms(e.min,e.max,t.origin),t.scale=ln(s)/ln(e),t.translate=Ms(s.min,s.max,t.origin)-t.originPoint,(t.scale>=TW&&t.scale<=CW||isNaN(t.scale))&&(t.scale=1),(t.translate>=AW&&t.translate<=RW||isNaN(t.translate))&&(t.translate=0)}function Yh(t,e,s,r){bT(t.x,e.x,s.x,r?r.originX:void 0),bT(t.y,e.y,s.y,r?r.originY:void 0)}function vT(t,e,s){t.min=s.min+e.min,t.max=t.min+ln(e)}function IW(t,e,s){vT(t.x,e.x,s.x),vT(t.y,e.y,s.y)}function wT(t,e,s){t.min=e.min-s.min,t.max=t.min+ln(e)}function Kh(t,e,s){wT(t.x,e.x,s.x),wT(t.y,e.y,s.y)}const NT=()=>({translate:0,scale:1,origin:0,originPoint:0}),md=()=>({x:NT(),y:NT()}),jT=()=>({min:0,max:0}),Ys=()=>({x:jT(),y:jT()});function ea(t){return[t("x"),t("y")]}function Hb(t){return t===void 0||t===1}function hw({scale:t,scaleX:e,scaleY:s}){return!Hb(t)||!Hb(e)||!Hb(s)}function Al(t){return hw(t)||a6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function a6(t){return _T(t.x)||_T(t.y)}function _T(t){return t&&t!=="0%"}function n0(t,e,s){const r=t-s,a=e*r;return s+a}function ST(t,e,s,r,a){return a!==void 0&&(t=n0(t,a,r)),n0(t,s,r)+e}function mw(t,e=0,s=1,r,a){t.min=ST(t.min,e,s,r,a),t.max=ST(t.max,e,s,r,a)}function i6(t,{x:e,y:s}){mw(t.x,e.translate,e.scale,e.originPoint),mw(t.y,s.translate,s.scale,s.originPoint)}const kT=.999999999999,ET=1.0000000000001;function DW(t,e,s,r=!1){const a=s.length;if(!a)return;e.x=e.y=1;let i,l;for(let d=0;d<a;d++){i=s[d],l=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&gd(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,i6(t,l)),r&&Al(i.latestValues)&&gd(t,i.latestValues))}e.x<ET&&e.x>kT&&(e.x=1),e.y<ET&&e.y>kT&&(e.y=1)}function fd(t,e){t.min=t.min+e,t.max=t.max+e}function TT(t,e,s,r,a=.5){const i=Ms(t.min,t.max,a);mw(t,e,s,i,r)}function gd(t,e){TT(t.x,e.x,e.scaleX,e.scale,e.originX),TT(t.y,e.y,e.scaleY,e.scale,e.originY)}function o6(t,e){return s6(EW(t.getBoundingClientRect(),e))}function MW(t,e,s){const r=o6(t,s),{scroll:a}=e;return a&&(fd(r.x,a.offset.x),fd(r.y,a.offset.y)),r}const l6=({current:t})=>t?t.ownerDocument.defaultView:null,CT=(t,e)=>Math.abs(t-e);function OW(t,e){const s=CT(t.x,e.x),r=CT(t.y,e.y);return Math.sqrt(s**2+r**2)}class c6{constructor(e,s,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Wb(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,w=OW(p.offset,{x:0,y:0})>=3;if(!x&&!w)return;const{point:N}=p,{timestamp:v}=Mr;this.history.push({...N,timestamp:v});const{onStart:j,onMove:k}=this.handlers;x||(j&&j(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,p)},this.handlePointerMove=(p,x)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Gb(x,this.transformPagePoint),Os.update(this.updatePoint,!0)},this.handlePointerUp=(p,x)=>{this.end();const{onEnd:w,onSessionEnd:N,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Wb(p.type==="pointercancel"?this.lastMoveEventInfo:Gb(x,this.transformPagePoint),this.history);this.startEvent&&w&&w(p,j),N&&N(p,j)},!Ej(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=r,this.contextWindow=a||window;const l=ef(e),d=Gb(l,this.transformPagePoint),{point:u}=d,{timestamp:h}=Mr;this.history=[{...u,timestamp:h}];const{onSessionStart:f}=s;f&&f(e,Wb(d,this.history)),this.removeListeners=Qm(Wh(this.contextWindow,"pointermove",this.handlePointerMove),Wh(this.contextWindow,"pointerup",this.handlePointerUp),Wh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zo(this.updatePoint)}}function Gb(t,e){return e?{point:e(t.point)}:t}function AT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wb({point:t},e){return{point:t,delta:AT(t,d6(e)),offset:AT(t,LW(e)),velocity:UW(e,.1)}}function LW(t){return t[0]}function d6(t){return t[t.length-1]}function UW(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const a=d6(t);for(;s>=0&&(r=t[s],!(a.timestamp-r.timestamp>Xa(e)));)s--;if(!r)return{x:0,y:0};const i=Qa(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const l={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function VW(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?Ms(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?Ms(s,t,r.max):Math.min(t,s)),t}function RT(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function FW(t,{top:e,left:s,bottom:r,right:a}){return{x:RT(t.x,s,a),y:RT(t.y,e,r)}}function PT(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function zW(t,e){return{x:PT(t.x,e.x),y:PT(t.y,e.y)}}function BW(t,e){let s=.5;const r=ln(t),a=ln(e);return a>r?s=gm(e.min,e.max-r,t.min):r>a&&(s=gm(t.min,t.max-a,e.min)),Fi(0,1,s)}function $W(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const fw=.35;function qW(t=fw){return t===!1?t=0:t===!0&&(t=fw),{x:IT(t,"left","right"),y:IT(t,"top","bottom")}}function IT(t,e,s){return{min:DT(t,e),max:DT(t,s)}}function DT(t,e){return typeof t=="number"?t:t[e]||0}const HW=new WeakMap;class GW{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ys(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(ef(f).point)},i=(f,p)=>{const{drag:x,dragPropagation:w,onDragStart:N}=this.getProps();if(x&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=iG(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ea(j=>{let k=this.getAxisMotionValue(j).get()||0;if(Ja.test(k)){const{projection:T}=this.visualElement;if(T&&T.layout){const P=T.layout.layoutBox[j];P&&(k=ln(P)*(parseFloat(k)/100))}}this.originPoint[j]=k}),N&&Os.postRender(()=>N(f,p)),dw(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(f,p)=>{const{dragPropagation:x,dragDirectionLock:w,onDirectionLock:N,onDrag:v}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:j}=p;if(w&&this.currentDirection===null){this.currentDirection=WW(j),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",p.point,j),this.updateAxis("y",p.point,j),this.visualElement.render(),v&&v(f,p)},d=(f,p)=>this.stop(f,p),u=()=>ea(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new c6(e,{onSessionStart:a,onStart:i,onMove:l,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:l6(this.visualElement)})}stop(e,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Os.postRender(()=>i(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:a}=this.getProps();if(!r||!Rg(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=VW(l,this.constraints[e],this.elastic[e])),i.set(l)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;e&&hd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=FW(r.layoutBox,e):this.constraints=!1,this.elastic=qW(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ea(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=$W(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!hd(e))return!1;const r=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=MW(r,a.root,this.visualElement.getTransformPagePoint());let l=zW(a.layout.layoutBox,i);if(s){const d=s(kW(l));this.hasMutatedConstraints=!!d,d&&(l=s6(d))}return l}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},h=ea(f=>{if(!Rg(f,s,this.currentDirection))return;let p=u&&u[f]||{};l&&(p={min:0,max:0});const x=a?200:1e6,w=a?40:1e7,N={type:"inertia",velocity:r?e[f]:0,bounceStiffness:x,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(f,N)});return Promise.all(h).then(d)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return dw(this.visualElement,e),r.start(Lj(e,r,0,s,this.visualElement,!1))}stopAnimation(){ea(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ea(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ea(s=>{const{drag:r}=this.getProps();if(!Rg(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:l,max:d}=a.layout.layoutBox[s];i.set(e[s]-Ms(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!hd(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ea(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const u=d.get();a[l]=BW({min:u,max:u},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ea(l=>{if(!Rg(l,e,null))return;const d=this.getAxisMotionValue(l),{min:u,max:h}=this.constraints[l];d.set(Ms(u,h,a[l]))})}addListeners(){if(!this.visualElement.current)return;HW.set(this.visualElement,this);const e=this.visualElement.current,s=Wh(e,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();hd(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Os.read(r);const l=wm(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ea(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())});return()=>{l(),s(),i(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:l=fw,dragMomentum:d=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:l,dragMomentum:d}}}function Rg(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function WW(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class YW extends Wo{constructor(e){super(e),this.removeGroupControls=ta,this.removeListeners=ta,this.controls=new GW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ta}unmount(){this.removeGroupControls(),this.removeListeners()}}const MT=t=>(e,s)=>{t&&Os.postRender(()=>t(e,s))};class KW extends Wo{constructor(){super(...arguments),this.removePointerDownListener=ta}onPointerDown(e){this.session=new c6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:l6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:MT(e),onStart:MT(s),onMove:r,onEnd:(i,l)=>{delete this.session,a&&Os.postRender(()=>a(i,l))}}}mount(){this.removePointerDownListener=Wh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const vp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ch={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(At.test(t))t=parseFloat(t);else return t;const s=OT(t,e.target.x),r=OT(t,e.target.y);return`${s}% ${r}%`}},XW={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,a=Bo.parse(t);if(a.length>5)return r;const i=Bo.createTransformer(t),l=typeof a[0]!="number"?1:0,d=s.x.scale*e.x,u=s.y.scale*e.y;a[0+l]/=d,a[1+l]/=u;const h=Ms(d,u,.5);return typeof a[2+l]=="number"&&(a[2+l]/=h),typeof a[3+l]=="number"&&(a[3+l]/=h),i(a)}};class QW extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=e;MG(JW),i&&(s.group&&s.group.add(i),r&&r.register&&a&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),vp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:a,isPresent:i}=this.props,{projection:l}=r;return l&&(l.isPresent=i,a||e.layoutDependency!==s||s===void 0||e.isPresent!==i?l.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?l.promote():l.relegate()||Os.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),kj.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function u6(t){const[e,s]=U3(),r=_.useContext(rj);return n.jsx(QW,{...t,layoutGroup:r,switchLayoutGroup:_.useContext($3),isPresent:e,safeToRemove:s})}const JW={borderRadius:{...ch,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ch,borderTopRightRadius:ch,borderBottomLeftRadius:ch,borderBottomRightRadius:ch,boxShadow:XW};function ZW(t,e,s){const r=Kr(t)?t:Dd(t);return r.start(Lj("",r,e,s)),r.animation}const eY=(t,e)=>t.depth-e.depth;class tY{constructor(){this.children=[],this.isDirty=!1}add(e){ij(this.children,e),this.isDirty=!0}remove(e){oj(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eY),this.isDirty=!1,this.children.forEach(e)}}function sY(t,e){const s=bn.now(),r=({timestamp:a})=>{const i=a-s;i>=e&&(zo(r),t(i-e))};return Os.setup(r,!0),()=>zo(r)}const h6=["TopLeft","TopRight","BottomLeft","BottomRight"],rY=h6.length,LT=t=>typeof t=="string"?parseFloat(t):t,UT=t=>typeof t=="number"||At.test(t);function nY(t,e,s,r,a,i){a?(t.opacity=Ms(0,s.opacity??1,aY(r)),t.opacityExit=Ms(e.opacity??1,0,iY(r))):i&&(t.opacity=Ms(e.opacity??1,s.opacity??1,r));for(let l=0;l<rY;l++){const d=`border${h6[l]}Radius`;let u=VT(e,d),h=VT(s,d);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||UT(u)===UT(h)?(t[d]=Math.max(Ms(LT(u),LT(h),r),0),(Ja.test(h)||Ja.test(u))&&(t[d]+="%")):t[d]=h}(e.rotate||s.rotate)&&(t.rotate=Ms(e.rotate||0,s.rotate||0,r))}function VT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aY=m6(0,.5,a3),iY=m6(.5,.95,ta);function m6(t,e,s){return r=>r<t?0:r>e?1:s(gm(t,e,r))}function FT(t,e){t.min=e.min,t.max=e.max}function Jn(t,e){FT(t.x,e.x),FT(t.y,e.y)}function zT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function BT(t,e,s,r,a){return t-=e,t=n0(t,1/s,r),a!==void 0&&(t=n0(t,1/a,r)),t}function oY(t,e=0,s=1,r=.5,a,i=t,l=t){if(Ja.test(e)&&(e=parseFloat(e),e=Ms(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=Ms(i.min,i.max,r);t===i&&(d-=e),t.min=BT(t.min,e,s,d,a),t.max=BT(t.max,e,s,d,a)}function $T(t,e,[s,r,a],i,l){oY(t,e[s],e[r],e[a],e.scale,i,l)}const lY=["x","scaleX","originX"],cY=["y","scaleY","originY"];function qT(t,e,s,r){$T(t.x,e,lY,s?s.x:void 0,r?r.x:void 0),$T(t.y,e,cY,s?s.y:void 0,r?r.y:void 0)}function HT(t){return t.translate===0&&t.scale===1}function f6(t){return HT(t.x)&&HT(t.y)}function GT(t,e){return t.min===e.min&&t.max===e.max}function dY(t,e){return GT(t.x,e.x)&&GT(t.y,e.y)}function WT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function g6(t,e){return WT(t.x,e.x)&&WT(t.y,e.y)}function YT(t){return ln(t.x)/ln(t.y)}function KT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uY{constructor(){this.members=[]}add(e){ij(this.members,e),e.scheduleRender()}remove(e){if(oj(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hY(t,e,s){let r="";const a=t.x.translate/e.x,i=t.y.translate/e.y,l=(s==null?void 0:s.z)||0;if((a||i||l)&&(r=`translate3d(${a}px, ${i}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:x,skewX:w,skewY:N}=s;h&&(r=`perspective(${h}px) ${r}`),f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),x&&(r+=`rotateY(${x}deg) `),w&&(r+=`skewX(${w}deg) `),N&&(r+=`skewY(${N}deg) `)}const d=t.x.scale*e.x,u=t.y.scale*e.y;return(d!==1||u!==1)&&(r+=`scale(${d}, ${u})`),r||"none"}const Yb=["","X","Y","Z"],mY={visibility:"hidden"},fY=1e3;let gY=0;function Kb(t,e,s,r){const{latestValues:a}=e;a[t]&&(s[t]=a[t],e.setStaticValue(t,0),r&&(r[t]=0))}function p6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=J3(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Os,!(a||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&p6(r)}function x6({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(l={},d=e==null?void 0:e()){this.id=gY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(yY),this.nodes.forEach(jY),this.nodes.forEach(_Y),this.nodes.forEach(bY)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new tY)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new dj),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const u=this.eventHandlers.get(l);u&&u.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=L3(l)&&!hG(l),this.instance=l;const{layoutId:d,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||d)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=sY(p,250),vp.hasAnimatedSinceResize&&(vp.hasAnimatedSinceResize=!1,this.nodes.forEach(QT))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&h&&(d||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:x,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||h.getDefaultTransition()||CY,{onLayoutAnimationStart:v,onLayoutAnimationComplete:j}=h.getProps(),k=!this.targetLayout||!g6(this.targetLayout,w),T=!p&&x;if(this.options.layoutRoot||this.resumeFrom||T||p&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={..._j(N,"layout"),onPlay:v,onComplete:j};(h.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(f,T)}else p||QT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SY),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&p6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(XT);return}this.isUpdating||this.nodes.forEach(wY),this.isUpdating=!1,this.nodes.forEach(NY),this.nodes.forEach(pY),this.nodes.forEach(xY),this.clearAllSnapshots();const d=bn.now();Mr.delta=Fi(0,1e3/60,d-Mr.timestamp),Mr.timestamp=d,Mr.isProcessing=!0,Fb.update.process(Mr),Fb.preRender.process(Mr),Fb.render.process(Mr),Mr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(vY),this.sharedNodes.forEach(kY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Os.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Os.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ln(this.snapshot.measuredBox.x)&&!ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ys(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!f6(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;l&&this.instance&&(d||Al(this.latestValues)||f)&&(a(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return l&&(u=this.removeTransform(u)),AY(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:l}=this.options;if(!l)return Ys();const d=l.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(RY))){const{scroll:f}=this.root;f&&(fd(d.x,f.offset.x),fd(d.y,f.offset.y))}return d}removeElementScroll(l){var u;const d=Ys();if(Jn(d,l),(u=this.scroll)!=null&&u.wasRoot)return d;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:x}=f;f!==this.root&&p&&x.layoutScroll&&(p.wasRoot&&Jn(d,l),fd(d.x,p.offset.x),fd(d.y,p.offset.y))}return d}applyTransform(l,d=!1){const u=Ys();Jn(u,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];!d&&f.options.layoutScroll&&f.scroll&&f!==f.root&&gd(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Al(f.latestValues)&&gd(u,f.latestValues)}return Al(this.latestValues)&&gd(u,this.latestValues),u}removeTransform(l){const d=Ys();Jn(d,l);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Al(h.latestValues))continue;hw(h.latestValues)&&h.updateSnapshot();const f=Ys(),p=h.measurePageBox();Jn(f,p),qT(d,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Al(this.latestValues)&&qT(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Mr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var x;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(l||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Mr.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ys(),this.relativeTargetOrigin=Ys(),Kh(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ys(),this.targetWithTransforms=Ys()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),IW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jn(this.target,this.layout.layoutBox),i6(this.target,this.targetDelta)):Jn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ys(),this.relativeTargetOrigin=Ys(),Kh(this.relativeTargetOrigin,this.target,w.target),Jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hw(this.parent.latestValues)||a6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var N;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Mr.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Jn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,x=this.treeScale.y;DW(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ys());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(zT(this.prevProjectionDelta.x,this.projectionDelta.x),zT(this.prevProjectionDelta.y,this.projectionDelta.y)),Yh(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==x||!KT(this.projectionDelta.x,this.prevProjectionDelta.x)||!KT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=md(),this.projectionDelta=md(),this.projectionDeltaWithTransform=md()}setAnimationOrigin(l,d=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},p=md();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=Ys(),w=u?u.source:void 0,N=this.layout?this.layout.source:void 0,v=w!==N,j=this.getStack(),k=!j||j.members.length<=1,T=!!(v&&!k&&this.options.crossfade===!0&&!this.path.some(TY));this.animationProgress=0;let P;this.mixTargetDelta=U=>{const R=U/1e3;JT(p.x,l.x,R),JT(p.y,l.y,R),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kh(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),EY(this.relativeTarget,this.relativeTargetOrigin,x,R),P&&dY(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=Ys()),Jn(P,this.relativeTarget)),v&&(this.animationValues=f,nY(f,h,this.latestValues,R,T,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var d,u,h;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(h=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||h.stop(),this.pendingAnimation&&(zo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Os.update(()=>{vp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Dd(0)),this.currentAnimation=ZW(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),l.onUpdate&&l.onUpdate(f)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fY),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:u,layout:h,latestValues:f}=l;if(!(!d||!u||!h)){if(this!==l&&this.layout&&h&&y6(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Ys();const p=ln(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+p;const x=ln(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+x}Jn(d,u),gd(d,f),Yh(this.projectionDeltaWithTransform,this.layoutCorrected,d,f)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new uY),this.sharedNodes.get(l).add(d);const h=d.options.initialPromotionConfig;d.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var d;const{layoutId:l}=this.options;return l?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:l}=this.options;return l?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const h={};u.z&&Kb("z",l,h,this.animationValues);for(let f=0;f<Yb.length;f++)Kb(`rotate${Yb[f]}`,l,h,this.animationValues),Kb(`skew${Yb[f]}`,l,h,this.animationValues);l.render();for(const f in h)l.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return mY;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=bp(l==null?void 0:l.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=bp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Al(this.latestValues)&&(w.transform=u?u({},""):"none",this.hasProjected=!1),w}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=hY(this.projectionDeltaWithTransform,this.treeScale,f),u&&(d.transform=u(f,d.transform));const{x:p,y:x}=this.projectionDelta;d.transformOrigin=`${p.origin*100}% ${x.origin*100}% 0`,h.animationValues?d.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in bm){if(f[w]===void 0)continue;const{correct:N,applyTo:v,isCSSVariable:j}=bm[w],k=d.transform==="none"?f[w]:N(f[w],h);if(v){const T=v.length;for(let P=0;P<T;P++)d[v[P]]=k}else j?this.options.visualElement.renderState.vars[w]=k:d[w]=k}return this.options.layoutId&&(d.pointerEvents=h===this?bp(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(XT),this.root.sharedNodes.clear()}}}function pY(t){t.updateLayout()}function xY(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:i}=t.options,l=e.source!==t.layout.source;i==="size"?ea(p=>{const x=l?e.measuredBox[p]:e.layoutBox[p],w=ln(x);x.min=r[p].min,x.max=x.min+w}):y6(i,e.layoutBox,r)&&ea(p=>{const x=l?e.measuredBox[p]:e.layoutBox[p],w=ln(r[p]);x.max=x.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+w)});const d=md();Yh(d,r,e.layoutBox);const u=md();l?Yh(u,t.applyTransform(a,!0),e.measuredBox):Yh(u,r,e.layoutBox);const h=!f6(d);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:x,layout:w}=p;if(x&&w){const N=Ys();Kh(N,e.layoutBox,x.layoutBox);const v=Ys();Kh(v,r,w.layoutBox),g6(N,v)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=N,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function yY(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function vY(t){t.clearSnapshot()}function XT(t){t.clearMeasurements()}function wY(t){t.isLayoutDirty=!1}function NY(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function QT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function jY(t){t.resolveTargetDelta()}function _Y(t){t.calcProjection()}function SY(t){t.resetSkewAndRotation()}function kY(t){t.removeLeadSnapshot()}function JT(t,e,s){t.translate=Ms(e.translate,0,s),t.scale=Ms(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function ZT(t,e,s,r){t.min=Ms(e.min,s.min,r),t.max=Ms(e.max,s.max,r)}function EY(t,e,s,r){ZT(t.x,e.x,s.x,r),ZT(t.y,e.y,s.y,r)}function TY(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const CY={duration:.45,ease:[.4,0,.1,1]},eC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),tC=eC("applewebkit/")&&!eC("chrome/")?Math.round:ta;function sC(t){t.min=tC(t.min),t.max=tC(t.max)}function AY(t){sC(t.x),sC(t.y)}function y6(t,e,s){return t==="position"||t==="preserve-aspect"&&!PW(YT(e),YT(s),.2)}function RY(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const PY=x6({attachResizeListener:(t,e)=>wm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xb={current:void 0},b6=x6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Xb.current){const t=new PY({});t.mount(window),t.setOptions({layoutScroll:!0}),Xb.current=t}return Xb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),IY={pan:{Feature:KW},drag:{Feature:YW,ProjectionNode:b6,MeasureLayout:u6}};function rC(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,i=r[a];i&&Os.postRender(()=>i(e,ef(e)))}class DY extends Wo{mount(){const{current:e}=this.node;e&&(this.unmount=oG(e,(s,r)=>(rC(this.node,r,"Start"),a=>rC(this.node,a,"End"))))}unmount(){}}class MY extends Wo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qm(wm(this.node.current,"focus",()=>this.onFocus()),wm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nC(t,e,s){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),i=r[a];i&&Os.postRender(()=>i(e,ef(e)))}class OY extends Wo{mount(){const{current:e}=this.node;e&&(this.unmount=uG(e,(s,r)=>(nC(this.node,r,"Start"),(a,{success:i})=>nC(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gw=new WeakMap,Qb=new WeakMap,LY=t=>{const e=gw.get(t.target);e&&e(t)},UY=t=>{t.forEach(LY)};function VY({root:t,...e}){const s=t||document;Qb.has(s)||Qb.set(s,{});const r=Qb.get(s),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver(UY,{root:t,...e})),r[a]}function FY(t,e,s){const r=VY(e);return gw.set(t,s),r.observe(t),()=>{gw.delete(t),r.unobserve(t)}}const zY={some:0,all:1};class BY extends Wo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:i}=e,l={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:zY[a]},d=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),x=h?f:p;x&&x(u)};return FY(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some($Y(e,s))&&this.startObserver()}unmount(){}}function $Y({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const qY={inView:{Feature:BY},tap:{Feature:OY},focus:{Feature:MY},hover:{Feature:DY}},HY={layout:{ProjectionNode:b6,MeasureLayout:u6}},pw={current:null},v6={current:!1};function GY(){if(v6.current=!0,!!aj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>pw.current=t.matches;t.addListener(e),e()}else pw.current=!1}const WY=new WeakMap;function YY(t,e,s){for(const r in e){const a=e[r],i=s[r];if(Kr(a))t.addValue(r,a);else if(Kr(i))t.addValue(r,Dd(a,{owner:t}));else if(i!==a)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(r);t.addValue(r,Dd(l!==void 0?l:a,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const aC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class KY{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Nj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=bn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Os.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.blockInitialAnimation=!!i,this.isControllingVariants=dx(s),this.isVariantNode=z3(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(s,{},this);for(const x in p){const w=p[x];u[x]!==void 0&&Kr(w)&&w.set(u[x],!1)}}mount(e){this.current=e,WY.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),v6.current||GY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zo(this.notifyUpdate),zo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=su.has(e);r&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&Os.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),i(),l&&l(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Od){const s=Od[e];if(!s)continue;const{isEnabled:r,Feature:a}=s;if(!this.features[e]&&a&&r(this.props)&&(this.features[e]=new a(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ys()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<aC.length;r++){const a=aC[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,l=e[i];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=YY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=Dd(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(KI(r)||QI(r))?r=parseFloat(r):!fG(r)&&Bo.test(s)&&(r=P3(e,s)),this.setBaseTarget(e,Kr(r)?r.get():r)),Kr(r)?r.get():r}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var i;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const l=Mj(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);l&&(r=l[e])}if(s&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Kr(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new dj),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class w6 extends KY{constructor(){super(...arguments),this.KeyframeResolver=sG}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Kr(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function N6(t,{style:e,vars:s},r,a){Object.assign(t.style,e,a&&a.getProjectionStyles(r));for(const i in s)t.style.setProperty(i,s[i])}function XY(t){return window.getComputedStyle(t)}class QY extends w6{constructor(){super(...arguments),this.type="html",this.renderInstance=N6}readValueFromInstance(e,s){var r;if(su.has(s))return(r=this.projection)!=null&&r.isProjecting?rw(s):wH(e,s);{const a=XY(e),i=(mj(s)?a.getPropertyValue(s):a[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return o6(e,s)}build(e,s,r){Pj(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return Oj(e,s,r)}}const j6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JY(t,e,s,r){N6(t,e,void 0,r);for(const a in e.attrs)t.setAttribute(j6.has(a)?a:Rj(a),e.attrs[a])}class ZY extends w6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ys}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(su.has(s)){const r=R3(s);return r&&r.default||0}return s=j6.has(s)?s:Rj(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return Q3(e,s,r)}build(e,s,r){W3(e,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,s,r,a){JY(e,s,r,a)}mount(e){this.isSVGTag=K3(e.tagName),super.mount(e)}}const eK=(t,e)=>Dj(t)?new ZY(e):new QY(e,{allowProjection:t!==_.Fragment}),tK=JG({..._W,...qY,...IY,...HY},eK),St=jG(tK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rK=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),iC=t=>{const e=rK(t);return e.charAt(0).toUpperCase()+e.slice(1)},_6=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),nK=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:l,...d},u)=>_.createElement("svg",{ref:u,...aK,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:_6("lucide",a),...!i&&!nK(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,f])=>_.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(t,e)=>{const s=_.forwardRef(({className:r,...a},i)=>_.createElement(iK,{ref:i,iconNode:e,className:_6(`lucide-${sK(iC(t))}`,`lucide-${t}`,r),...a}));return s.displayName=iC(t),s};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],xw=vt("arrow-right",oK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],cK=vt("award",lK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],uK=vt("bell",dK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],mK=vt("building",hK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fK=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],gK=vt("calculator",fK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],oC=vt("camera",pK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],yK=vt("chart-no-axes-column",xK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bK=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],vK=vt("chart-pie",bK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],NK=vt("check",wK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_K=vt("chevron-down",jK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lC=vt("chevron-left",SK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xh=vt("chevron-right",kK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],TK=vt("circle-arrow-down",EK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ua=vt("circle-check-big",CK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ux=vt("circle-check",AK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],a0=vt("circle-plus",RK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],wd=vt("circle-x",PK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DK=vt("dollar-sign",IK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],cC=vt("eye-off",MK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dC=vt("eye",OK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["path",{d:"M2 3v18",key:"pzttux"}],["rect",{width:"12",height:"18",x:"6",y:"3",rx:"2",key:"btr8bg"}],["path",{d:"M22 3v18",key:"6jf3v"}]],UK=vt("gallery-horizontal",LK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],FK=vt("globe",VK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],BK=vt("heart",zK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],i0=vt("house",$K);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ul=vt("image",qK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dh=vt("info",HK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],WK=vt("lightbulb",GK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],S6=vt("list",YK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Pg=vt("loader",KK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],QK=vt("lock",XK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ZK=vt("log-out",JK);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],k6=vt("menu",eX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],sX=vt("message-square",tX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],nX=vt("moon",rX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],hx=vt("package",aX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ld=vt("pen",iX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Uj=vt("plus",oX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],E6=vt("refresh-cw",lX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dX=vt("save",cX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],T6=vt("settings",uX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],wp=vt("shopping-bag",hX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],fX=vt("shopping-cart",mX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pX=vt("square-check-big",gX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],yX=vt("store",xX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],vX=vt("sun",bX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],NX=vt("tag",wX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_X=vt("target",jX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],kX=vt("trash-2",SX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],C6=vt("upload",EX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Po=vt("user",TX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],A6=vt("users",CX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],RX=vt("video",AX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],o0=vt("wallet",PX);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vl=vt("x",IX);function DX(){const{currency:t,changeCurrency:e,loading:s,availableCurrencies:r=[]}=BI(),a=[{code:"USD",label:"$ USD"},{code:"NGN",label:" NGN"},{code:"GBP",label:" GBP"},{code:"JPY",label:" JPY"},{code:"GHS",label:" GHS"},{code:"EUR",label:" EUR"},{code:"CAD",label:"$ CAD"},{code:"AUD",label:"$ AUD"},{code:"CNY",label:" CNY"},{code:"INR",label:" INR"}];return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(FK,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"}),s?n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Loading..."}):n.jsx("select",{value:t,onChange:i=>e(i.target.value),className:"p-1 rounded-md bg-gray-100 dark:bg-gray-700 text-xs text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-1 focus:ring-blue-500","aria-label":"Select currency",children:(r.length>0?r:a).map(i=>n.jsx("option",{value:i.code,children:i.label},i.code))})]})}const MX=()=>{const[t,e]=_.useState(null),s=[{name:"Help & Support",path:"/support"},{name:"FAQ",path:"/support?tab=faq"}];return n.jsx("div",{className:"bg-gray-100 py-2 border-b border-gray-200 mt-16 sm:mt-8 md:mt-4 lg:mt-0 -mb-8 lg:mb-0",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex justify-end items-center text-[10px] sm:text-xs md:text-sm",children:[s.map((r,a)=>n.jsx("div",{className:"ml-4 first:ml-0 relative",children:n.jsx(ue,{to:r.path,className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",onMouseEnter:()=>e(a),onMouseLeave:()=>e(null),children:r.name})},a)),n.jsx("div",{className:"ml-6 flex items-center text-gray-600",children:n.jsxs(ue,{to:"/sell",className:"flex items-center hover:text-blue-600 transition-colors duration-200",children:[n.jsx(yX,{className:"w-4 h-4 mr-1"}),n.jsx("span",{children:"Sell on Foremade"})]})}),n.jsx("div",{className:"ml-4 flex items-center",children:n.jsx(DX,{})})]})})})},OX="/assets/nglogo-qvrtZOMI.png",LX="/assets/uklogo-CgNCKquW.png",UX=()=>{const[t,e]=_.useState(null),[s,r]=_.useState(null),[a,i]=_.useState(""),l=["Television & Accessories","Drinks & Beverages","Game & Console","Home & Living","Perfumes & Fragrances","Vehicles & Transport","Computers & Laptops"],d=x=>x.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),u=[{name:"twitter",icon:"bx bxl-twitter",color:"text-blue-400",url:"https://twitter.com"},{name:"instagram",icon:"bx bxl-instagram",color:"text-pink-400",url:"https://instagram.com"},{name:"facebook",icon:"bx bxl-facebook",color:"text-blue-600",url:"https://facebook.com"}],h=[{icon:"bxs-truck",title:"Fast Shipping",description:"Fast shipping all across the country"},{icon:"bx-check-shield",title:"Authentic Products",description:"100% Authentic products"},{icon:"bx-lock-alt",title:"100% Secure Payment",description:"We Ensure Secure Transactions"},{icon:"bx-headphone",title:"24/7 Support Center",description:"We Ensure Quality Support"}],f={account:[{name:"My Profile",url:"/profile"},{name:"My Orders",url:"/orders"},{name:"My Wishlist",url:"/favorites"}],about:[{name:"About Us",url:"/about"},{name:"Support",url:"/support"}]},p=x=>{x.preventDefault(),alert(`Thanks for subscribing with ${a}!`),i("")};return n.jsxs("footer",{className:"bg-white mt-16",children:[n.jsx("div",{className:"bg-gray-50 py-3 border-t border-b border-gray-200",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center text-xs text-gray-600",children:h.map((x,w)=>n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("i",{className:`bx ${x.icon} text-base mb-1 text-blue-500`}),n.jsx("p",{className:"font-semibold text-xs",children:x.title}),n.jsx("p",{className:"text-xs",children:x.description})]},w))})})}),n.jsx("div",{className:"bg-white text-gray-800 py-6",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex flex-wrap flex-row justify-between",children:[n.jsxs("div",{className:"w-full md:w-auto mb-6 md:mb-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[n.jsx("span",{className:"text-lg font-bold",children:"Foremade"}),n.jsx("i",{className:"bx bx-chevron-up text-blue-500 rotate-45"})]}),n.jsxs("div",{className:"flex space-x-4 items-center mb-4",children:[u.map((x,w)=>n.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:`text-lg ${t===x.name?x.color:"text-gray-600"}`,onMouseEnter:()=>e(x.name),onMouseLeave:()=>e(null),children:n.jsx("i",{className:x.icon})},w)),n.jsxs("div",{className:"relative group ml-2",children:[n.jsxs("button",{className:"hover:text-blue-600 flex items-center",children:[n.jsx("img",{src:LX,alt:"UK flag",className:"h-4"}),n.jsx("i",{className:"bx bx-chevron-down ml-1"})]}),n.jsx("div",{className:"absolute hidden group-hover:block bg-white z-10 w-36 rounded-md shadow-xl border border-gray-200",children:n.jsx("span",{className:"block px-3 py-1 text-xs hover:bg-gray-100 cursor-pointer",children:n.jsx("img",{src:OX,alt:"NG flag",className:"h-4"})})})]})]}),n.jsxs("div",{className:"mb-4 md:max-w-xs",children:[n.jsx("h3",{className:"text-xs font-semibold mb-2",children:"Subscribe to our newsletter"}),n.jsxs("form",{onSubmit:p,className:"flex",children:[n.jsx("input",{type:"email",value:a,onChange:x=>i(x.target.value),placeholder:"Your email",className:"flex-1 p-1 border border-gray-300 rounded-l-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-xs",required:!0}),n.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-2 py-1 rounded-r-md hover:bg-blue-600 text-xs",children:n.jsx("i",{className:"bx bx-envelope"})})]})]})]}),n.jsxs("div",{className:"flex flex-wrap w-full md:w-auto justify-between",children:[n.jsxs("div",{className:"w-1/3 pr-2",children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Categories"}),n.jsxs("ul",{className:"space-y-1 text-xs",children:[l.slice(0,8).map((x,w)=>n.jsx("li",{children:n.jsx(ue,{to:`/category/${d(x)}`,className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>r(`category-${w}`),onMouseLeave:()=>r(null),children:x})},w)),l.length>8&&n.jsx("li",{children:n.jsx(ue,{to:"/products",className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>r("more-categories"),onMouseLeave:()=>r(null),children:"More Categories..."})})]})]}),n.jsxs("div",{className:"w-1/3 px-2",children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Account"}),n.jsx("ul",{className:"space-y-1 text-xs",children:f.account.map((x,w)=>n.jsx("li",{children:n.jsx(ue,{to:x.url,className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>r(`account-${w}`),onMouseLeave:()=>r(null),children:x.name})},w))})]}),n.jsxs("div",{className:"w-1/3 pl-2",children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"About"}),n.jsxs("ul",{className:"space-y-1 text-xs",children:[f.about.map((x,w)=>n.jsx("li",{children:n.jsx(ue,{to:x.url,className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>r(`about-${w}`),onMouseLeave:()=>r(null),children:x.name})},w)),n.jsx("li",{children:n.jsx(ue,{to:"/buyer-protection-policy",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Buyer Protection Policy"})}),n.jsx("li",{children:n.jsx(ue,{to:"/refund-policy",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Refund Policy"})}),n.jsx("li",{children:n.jsx(ue,{to:"/terms-conditions",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Terms & Conditions"})}),n.jsx("li",{children:n.jsx(ue,{to:"/seller-agreement",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Seller Agreement"})}),n.jsx("li",{children:n.jsx(ue,{to:"/shipping-policy",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Shipping Policy"})})]})]})]})]}),n.jsx("div",{className:"mt-6 text-center text-xs text-gray-400",children:n.jsxs("p",{children:[" ",new Date().getFullYear()," Foremade, Inc. All rights reserved."]})})]})})]})},VX=()=>{const[t,e]=_.useState(!1),s=()=>{window.pageYOffset>300?e(!0):e(!1)};_.useEffect(()=>(window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}),[]);const r=()=>{"scrollBehavior"in document.documentElement.style?window.scrollTo({top:0,left:0,behavior:"smooth"}):window.scrollTo(0,0)};return n.jsx(n.Fragment,{children:t&&n.jsx("button",{onClick:r,className:"fixed right-4 z-50 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg transition-all duration-300 ease-in-out transform hover:scale-110",style:{bottom:"10rem"},"aria-label":"Scroll to top",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})})},Ud={seller:{orderConfirmation:"Your order has been confirmed and will ship soon!",shippingUpdate:"Your order has been shipped. Tracking ID: [TRACKING_ID].",issueResponse:"Were sorry for the inconvenience. Please share more details so we can assist you.",refundProcessed:"Your refund has been processed and will reflect in 3-5 business days.",productInquiry:"Thank you for your inquiry! Can you specify which product details you need?",deliveryDelay:"We apologize for the delay. Your order is expected to arrive by [DATE].",outOfStock:"The item is currently out of stock. Well notify you when its available.",orderReceived:"Weve received your order and are processing it now.",paymentIssue:"There was an issue with your payment. Please verify your payment details.",productDamaged:"Please send us images of the damaged product so we can process a replacement.",thankYou:"Thank you for shopping with us! Let us know if you need further assistance.",customRequest:"Weve noted your custom request. Well get back to you shortly."},buyer:{orderStatus:"Can you provide an update on my order status?",shippingQuery:"When will my order be shipped?",productQuestion:"Can you share more details about the product?",returnRequest:"Id like to request a return for my order.",paymentIssue:"Im having trouble with the payment. Can you assist?",deliveryIssue:"My order hasnt arrived yet. Can you check on it?",productDamage:"The product I received is damaged. How can I proceed?",refundStatus:"Can you confirm the status of my refund?",cancelOrder:"Id like to cancel my order. Is that possible?",sizeIssue:"The product doesnt fit. Can I exchange it?",qualityConcern:"Im not satisfied with the product quality. Can we discuss this?",customRequest:"I have a special request regarding my order. Can you help?"}},R6=({role:t,onSelect:e,selectedTemplate:s})=>n.jsx("div",{className:"relative",children:n.jsxs("select",{value:s,onChange:r=>e(r.target.value),className:"w-full p-2 rounded-lg bg-gray-100 text-gray-800 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition","aria-label":"Select a message template",children:[n.jsx("option",{value:"",children:"Select a message template"}),Object.keys(Ud[t]||{}).map(r=>n.jsx("option",{value:r,children:Ud[t][r]},r))]})}),Ii=()=>n.jsx("div",{className:"flex justify-center items-center h-48",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})});function ru(){const[t,e]=_.useState({name:"Emmanuel Chinecherem",username:"emmaChi",email:"",profileImage:localStorage.getItem("profileImage")||null});_.useEffect(()=>{const r=we.onAuthStateChanged(async l=>{if(!l){e({name:"Guest",username:"guest",email:"",profileImage:null});return}try{const d=_e(J,"users",l.uid),u=ws(d,h=>{if(h.exists()){const f=h.data();e(p=>({...p,name:f.name||l.displayName||"Emmanuel Chinecherem",username:f.username||"emmaChi",email:l.email||""}))}});return()=>u()}catch(d){console.error("Error fetching sidebar data:",d)}}),a=()=>{e(l=>({...l,profileImage:localStorage.getItem("profileImage")||null}))},i=()=>{const l=JSON.parse(localStorage.getItem("userData"));l&&e(d=>({...d,name:l.name||d.name,username:l.username||d.username,email:l.email||d.email}))};return window.addEventListener("profileImageUpdated",a),window.addEventListener("userDataUpdated",i),()=>{r(),window.removeEventListener("profileImageUpdated",a),window.removeEventListener("userDataUpdated",i)}},[]);const s=()=>t.profileImage?n.jsx("img",{src:t.profileImage,alt:"Profile",className:"w-full h-full object-cover",onError:()=>{e(r=>({...r,profileImage:null}))}}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-white text-lg font-bold uppercase rounded-full",children:t.email?t.email[0]:"U"});return n.jsxs("div",{className:"md:w-1/4 bg-gray-50 dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[n.jsxs("div",{className:"flex flex-col items-center mb-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto flex items-center justify-center overflow-hidden",children:s()}),n.jsx("h3",{className:"mt-2 text-lg font-semibold text-gray-800 dark:text-gray-200",children:t.name}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:t.username})]}),n.jsxs("nav",{className:"flex flex-col space-y-2",children:[n.jsxs(ue,{to:"/profile",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 p-2 rounded-lg",children:[n.jsx("i",{className:"bx bx-user text-lg text-blue-500 dark:text-blue-400"}),n.jsx("span",{children:"Profile"})]}),n.jsxs(ue,{to:"/orders",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-green-600 dark:hover:text-green-400 p-2 rounded-lg",children:[n.jsx("i",{className:"bx bx-package text-lg text-green-500 dark:text-green-400"}),n.jsx("span",{children:"Orders"})]}),n.jsxs(ue,{to:"/favorites",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 p-2 rounded-lg",children:[n.jsx("i",{className:"bx bx-heart text-lg text-red-500 dark:text-red-400"}),n.jsx("span",{children:"Wishlist"})]}),n.jsxs(ue,{to:"/address",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 p-2 rounded-lg",children:[n.jsx("i",{className:"bx bx-map text-lg text-purple-500 dark:text-purple-400"}),n.jsx("span",{children:"Addresses"})]}),n.jsxs(ue,{to:"/setting",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-orange-600 dark:hover:text-orange-400 p-2 rounded-lg",children:[n.jsx("i",{className:"bx bx-cog text-lg text-orange-500 dark:text-orange-400"}),n.jsx("span",{children:"Settings"})]})]})]})}function FX(t){if(t.length===0)return!1;const e=t[t.length-1];return/photo|image|picture|show|damage|send us|share/i.test(e.text)}const zX=()=>{const{orderId:t}=lc(),{state:e}=gr(),s=Ns(),[r,a]=_.useState([]),[i,l]=_.useState(""),[d,u]=_.useState(null),[h,f]=_.useState(null),[p,x]=_.useState(!1),[w,N]=_.useState(!1),[v,j]=_.useState({name:"Seller",avatar:null}),[k,T]=_.useState(!1),[P,U]=_.useState(!0),R=_.useRef(null),O=_.useRef(null);_.useEffect(()=>{(async()=>{var Y;if(!we.currentUser){Ne.error("Please sign in to access chat."),s("/login"),U(!1);return}if(!t||!(e!=null&&e.sellerId)||!(e!=null&&e.productName)||(e==null?void 0:e.role)!=="buyer"){Ne.error("Invalid chat request."),s("/orders"),U(!1);return}try{const Q=_e(J,"orders",t),H=await Ge(Q);if(!H.exists()||H.data().userId!==we.currentUser.uid){Ne.error("Invalid order or unauthorized access."),s("/orders"),U(!1);return}const W=_e(J,"users",e.sellerId),de=await Ge(W),ge=de.exists()?de.data():{};j({name:ge.displayName||"Seller",avatar:ge.avatar||"https://ui-avatars.com/api/?name=S&background=3b82f6&color=fff&size=40"}),T(!0);const z=Rt(Ue(J,"chats"),ht("orderId","==",t),ht("userId","==",we.currentUser.uid),ht("sellerId","==",e.sellerId)),G=await yt(z);let X;if(G.empty){const Ce=Math.random().toString(36).substr(2,9);X=`${t}-${Ce}`,await wn(Ue(J,"chats"),{chatId:X,orderId:t,userId:we.currentUser.uid,sellerId:e.sellerId,productId:((Y=H.data().items[0])==null?void 0:Y.productId)||"",createdAt:new Date,lastMessage:"",lastMessageTime:new Date,typing:{}})}else X=G.docs[0].id;const re=Rt(Ue(J,"chats",X,"messages"),Wm("timestamp","asc")),xe=ws(re,Ce=>{const ve=Ce.docs.map(Z=>({id:Z.id,...Z.data()}));a(ve),U(!1)},Ce=>{console.error("Error fetching messages:",Ce.message),Ne.error("Failed to load messages."),U(!1)}),ze=_e(J,"chats",X),me=ws(ze,Ce=>{var Z;const ve=Ce.data();N(((Z=ve==null?void 0:ve.typing)==null?void 0:Z[e.sellerId])||!1)},Ce=>{console.error("Error fetching typing status:",Ce.message)});return()=>{xe(),me()}}catch(Q){console.error("Error validating chat:",Q.message),Ne.error("Failed to load chat."),s("/orders"),U(!1)}})()},[t,e,s]);const I=()=>{var M;(M=O.current)==null||M.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{I()},[r]);const C=M=>{const Y=M.target.files[0];if(Y){if(!Y.type.startsWith("image/")){Ne.error("Please select an image file");return}if(Y.size>5*1024*1024){Ne.error("Image size should be less than 5MB");return}u(Y);const Q=new FileReader;Q.onload=H=>f(H.target.result),Q.readAsDataURL(Y)}},E=async()=>{if(!i){Ne.error("Please select a message template.");return}try{x(!0);const M=Rt(Ue(J,"chats"),ht("orderId","==",t),ht("userId","==",we.currentUser.uid),ht("sellerId","==",e.sellerId)),Y=await yt(M);if(Y.empty){Ne.error("Chat not found.");return}const Q=Y.docs[0].id;await wn(Ue(J,"chats",Q,"messages"),{senderId:we.currentUser.uid,text:Ud.buyer[i],image:null,timestamp:new Date,status:"delivered"}),await Qr(_e(J,"chats",Q),{lastMessage:Ud.buyer[i],lastMessageTime:new Date,[`typing.${we.currentUser.uid}`]:!1}),l("")}catch(M){console.error("Error sending message:",M.message),Ne.error("Failed to send message.")}finally{x(!1)}},D=async()=>{if(!(!d||!h))try{x(!0);const M=Rt(Ue(J,"chats"),ht("orderId","==",t),ht("userId","==",we.currentUser.uid),ht("sellerId","==",e.sellerId)),Y=await yt(M);if(Y.empty){Ne.error("Chat not found.");return}const Q=Y.docs[0].id;await wn(Ue(J,"chats",Q,"messages"),{senderId:we.currentUser.uid,text:"",image:h,timestamp:new Date,status:"delivered"}),await Qr(_e(J,"chats",Q),{lastMessage:"Image sent",lastMessageTime:new Date,[`typing.${we.currentUser.uid}`]:!1}),u(null),f(null),R.current&&(R.current.value="")}catch(M){console.error("Error sending image:",M.message),Ne.error("Failed to send image.")}finally{x(!1)}},V=async()=>{if(k)try{const M=Rt(Ue(J,"chats"),ht("orderId","==",t),ht("userId","==",we.currentUser.uid),ht("sellerId","==",e.sellerId)),Y=await yt(M);if(!Y.empty){const Q=Y.docs[0].id;await Qr(_e(J,"chats",Q),{[`typing.${we.currentUser.uid}`]:!0})}}catch(M){console.error("Error updating typing status:",M.message)}},B=M=>{if(!M)return"";try{return(M.toDate?M.toDate():new Date(M)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}};return P?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(Ii,{}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading chat..."})]}):k?n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-700",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx(ru,{}),n.jsxs(St.div,{className:"md:w-3/4 flex flex-col bg-white rounded-lg shadow-md overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-green-600 text-white border-b border-gray-200",children:[n.jsx("img",{src:v.avatar,alt:"Seller",className:"w-10 h-10 rounded-full border-2 border-white"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-lg",children:v.name}),n.jsxs("div",{className:"text-xs text-green-100",children:["Product: ",(e==null?void 0:e.productName)||"Unknown"]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-100",children:[n.jsxs(Md,{children:[r.map(M=>n.jsx(St.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2},className:`flex ${M.senderId===we.currentUser.uid?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 shadow-sm relative ${M.senderId===we.currentUser.uid?"bg-green-500 text-white rounded-br-none":"bg-white text-gray-800 rounded-bl-none"}`,children:[M.text&&n.jsx("div",{className:"text-sm",children:M.text}),M.image&&n.jsx("img",{src:M.image,alt:"chat-img",className:"max-w-[150px] sm:max-w-[200px] rounded-md border border-gray-200 mb-1"}),n.jsx("div",{className:"flex items-center justify-end gap-1 text-xs mt-1",children:n.jsx("span",{className:M.senderId===we.currentUser.uid?"text-green-100":"text-gray-500",children:B(M.timestamp)})}),n.jsx("div",{className:`absolute bottom-0 ${M.senderId===we.currentUser.uid?"right-[-6px]":"left-[-6px]"} w-0 h-0 border-t-[6px] border-t-transparent ${M.senderId===we.currentUser.uid?"border-l-[6px] border-l-green-500":"border-r-[6px] border-r-white"} border-b-[6px] border-b-transparent`})]})},M.id)),(p||w)&&n.jsx(St.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-start",children:n.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),n.jsx("div",{ref:O})]}),n.jsxs("div",{className:"bg-white px-4 py-3 border-t border-gray-200",children:[n.jsx("div",{className:"mb-3",children:n.jsx(R6,{role:"buyer",onSelect:l,selectedTemplate:i,className:"w-full p-2 rounded-full bg-gray-100 text-gray-800 border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition"})}),d&&h&&n.jsx(St.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-3 p-2 bg-gray-100 rounded-lg border border-gray-200",children:n.jsx("img",{src:h,alt:"preview",className:"max-w-[80px] max-h-[80px] rounded-md"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-gray-100 rounded-full p-2",children:[FX(r)&&n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:C,className:"hidden",id:"image-upload"}),n.jsx(St.label,{htmlFor:"image-upload",whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-gray-600 p-1 cursor-pointer hover:text-green-600",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.586-6.586M12 3v6m0 0v6m0-6h6m-6 0H6"})})})]}),i?n.jsx(St.button,{onClick:E,disabled:p,whileHover:{scale:1.05},whileTap:{scale:.95},className:`ml-auto p-2 rounded-full ${p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,onMouseDown:V,children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}):n.jsx(St.button,{onClick:()=>s("/support"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"ml-auto p-2 rounded-full bg-orange-500 text-white hover:bg-orange-600",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636A9 9 0 1121 12h-3m-6 6v3m-6-3h-3m6-6H3m6-6V3"})})})]}),d&&h&&n.jsx(St.button,{onClick:D,disabled:p,whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-full ${p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})]})]})}):null};var Jb,uC;function BX(){if(uC)return Jb;uC=1;var t="Expected a function",e=NaN,s="[object Symbol]",r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt,u=typeof bg=="object"&&bg&&bg.Object===Object&&bg,h=typeof self=="object"&&self&&self.Object===Object&&self,f=u||h||Function("return this")(),p=Object.prototype,x=p.toString,w=Math.max,N=Math.min,v=function(){return f.Date.now()};function j(R,O,I){var C,E,D,V,B,M,Y=0,Q=!1,H=!1,W=!0;if(typeof R!="function")throw new TypeError(t);O=U(O)||0,k(I)&&(Q=!!I.leading,H="maxWait"in I,D=H?w(U(I.maxWait)||0,O):D,W="trailing"in I?!!I.trailing:W);function de(Ce){var ve=C,Z=E;return C=E=void 0,Y=Ce,V=R.apply(Z,ve),V}function ge(Ce){return Y=Ce,B=setTimeout(X,O),Q?de(Ce):V}function z(Ce){var ve=Ce-M,Z=Ce-Y,Se=O-ve;return H?N(Se,D-Z):Se}function G(Ce){var ve=Ce-M,Z=Ce-Y;return M===void 0||ve>=O||ve<0||H&&Z>=D}function X(){var Ce=v();if(G(Ce))return re(Ce);B=setTimeout(X,z(Ce))}function re(Ce){return B=void 0,W&&C?de(Ce):(C=E=void 0,V)}function xe(){B!==void 0&&clearTimeout(B),Y=0,C=M=E=B=void 0}function ze(){return B===void 0?V:re(v())}function me(){var Ce=v(),ve=G(Ce);if(C=arguments,E=this,M=Ce,ve){if(B===void 0)return ge(M);if(H)return B=setTimeout(X,O),de(M)}return B===void 0&&(B=setTimeout(X,O)),V}return me.cancel=xe,me.flush=ze,me}function k(R){var O=typeof R;return!!R&&(O=="object"||O=="function")}function T(R){return!!R&&typeof R=="object"}function P(R){return typeof R=="symbol"||T(R)&&x.call(R)==s}function U(R){if(typeof R=="number")return R;if(P(R))return e;if(k(R)){var O=typeof R.valueOf=="function"?R.valueOf():R;R=k(O)?O+"":O}if(typeof R!="string")return R===0?R:+R;R=R.replace(r,"");var I=i.test(R);return I||l.test(R)?d(R.slice(2),I?2:8):a.test(R)?e:+R}return Jb=j,Jb}var $X=BX();const Vj=Rw($X);function Ls(){const[t,e]=_.useState(!1),[s,r]=_.useState(""),a=()=>{e(!t)},i=_.useCallback(Vj(h=>{r(h)},300),[]),l=h=>{i(h.target.value)},u=[{to:"/dashboard",label:"Dashboard",icon:i0,category:"Dashboard"},{to:"/sellers/orders",label:"Orders",icon:fX,category:"Order Management"},{to:"/sellers/products",label:"Products List",icon:S6,category:"Product Management"},{to:"/products-gallery",label:"Products Gallery",icon:Ul,category:"Product Management"},{to:"/products-upload",label:"Upload Products",icon:C6,category:"Product Management"},{to:"/pro-seller-guide",label:"Pro Seller",icon:cK,category:"Registering with us"},{to:"/seller-onboarding",label:"Standard Seller",icon:pX,category:"Registering with us"},{to:"/smile",label:"Wallet",icon:o0,category:"Your wallet"},{to:"/transactions",label:"Transactions",icon:o0,category:"Your wallet"},{to:"/seller-chat",label:"Chats",icon:sX,category:"Chat"}].filter(h=>h.label.toLowerCase().includes(s.toLowerCase()));return n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 text-black bg-blue-700 rounded-lg hover:bg-blue-900 transition",onClick:a,"aria-label":"Open sidebar",children:n.jsx(k6,{className:"w-6 h-6"})}),n.jsxs("div",{className:`fixed inset-y-0 left-0 w-64 bg-gradient-to-b from-gray-900 to-gray-800 text-white flex flex-col z-50 md:w-64 md:flex md:flex-col transition-transform duration-300 transform ${t?"translate-x-0":"-translate-x-full"} md:translate-x-0 max-h-[calc(100vh)] overflow-y-auto`,children:[n.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[n.jsx(ue,{to:"/",onClick:()=>e(!1),"aria-label":"Foremade homepage",children:n.jsx("img",{src:nc,alt:"Foremade logo",className:"w-32"})}),n.jsx("button",{className:"md:hidden p-2 text-gray-300 hover:text-white",onClick:a,"aria-label":"Close sidebar",children:n.jsx(Vl,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"p-4 sticky top-0 bg-gray-800 z-10",children:n.jsx("input",{type:"text",placeholder:"Search menu...",onChange:l,className:"w-full p-2 rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm","aria-label":"Search menu items"})}),n.jsx("nav",{className:"flex-1 p-2 space-y-3",children:s&&u.length===0?n.jsx("p",{className:"text-gray-400 text-sm px-2",children:"No menu items found"}):n.jsxs(n.Fragment,{children:[u.some(h=>h.category==="Dashboard")&&n.jsxs(ue,{to:"/dashboard",onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg bg-gray-700 text-white font-semibold hover:bg-blue-600 transition","aria-label":"Dashboard",children:[n.jsx(i0,{className:"w-5 h-5 mr-2"}),"Dashboard"]}),u.some(h=>h.category==="Order Management")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Order Management"}),u.filter(h=>h.category==="Order Management").map(h=>n.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[n.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]}),u.some(h=>h.category==="Product Management")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Product Management"}),u.filter(h=>h.category==="Product Management").map(h=>n.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[n.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]}),u.some(h=>h.category==="Registering with us")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Registering with us"}),u.filter(h=>h.category==="Registering with us").map(h=>n.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[n.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]}),u.some(h=>h.category==="Your wallet")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Your wallet"}),u.filter(h=>h.category==="Your wallet").map(h=>n.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[n.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]}),u.some(h=>h.category==="Chat")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Chat"}),u.filter(h=>h.category==="Chat").map(h=>n.jsxs(ue,{to:h.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":h.label,children:[n.jsx(h.icon,{className:"w-5 h-5 mr-2"}),h.label]},h.to))]})]})})]}),t&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:a,"aria-hidden":"true"})]})}function qX(t){if(t.length===0)return!1;const e=t[t.length-1];return/photo|image|picture|show|damage|send us|share/i.test(e.text)}const hC=()=>{const{chatId:t}=lc(),e=Ns(),[s,r]=_.useState([]),[a,i]=_.useState(null),[l,d]=_.useState([]),[u,h]=_.useState(""),[f,p]=_.useState(null),[x,w]=_.useState(null),[N,v]=_.useState(!1),[j,k]=_.useState(!1),[T,P]=_.useState(!0),U=_.useRef(null),R=_.useRef(null);_.useEffect(()=>{(async()=>{try{if(!we.currentUser){Ne.error("Please sign in to view chats."),e("/login"),P(!1);return}const Y=Rt(Ue(J,"chats"),ht("sellerId","==",we.currentUser.uid)),Q=ws(Y,async H=>{try{const W=await Promise.all(H.docs.map(async de=>{var Z,Se;const ge=de.data(),z=_e(J,"orders",ge.orderId),G=await Ge(z),X=G.exists()?G.data():{},re=_e(J,"users",ge.userId),xe=await Ge(re),ze=xe.exists()?xe.data():{},me=_e(J,"products",ge.productId),Ce=await Ge(me),ve=Ce.exists()?Ce.data():{};return{chatId:de.id,orderId:ge.orderId,buyerName:ze.displayName||"Unknown Buyer",buyerAvatar:ze.avatar||"https://ui-avatars.com/api/?name=B&background=3b82f6&color=fff&size=40",productName:((Se=(Z=X.items)==null?void 0:Z[0])==null?void 0:Se.name)||ve.name||"Product",lastMessage:ge.lastMessage||"",lastMessageTime:ge.lastMessageTime||ge.createdAt||new Date}}));if(r(W),t){const de=W.find(ge=>ge.chatId===t);if(de){i(de);const ge=Rt(Ue(J,"chats",t,"messages"),Wm("timestamp","asc")),z=ws(ge,re=>{const xe=re.docs.map(ze=>({id:ze.id,...ze.data()}));d(xe),P(!1)},re=>{console.error("Error fetching messages:",re.message),Ne.error("Failed to load messages."),P(!1)}),G=_e(J,"chats",t),X=ws(G,re=>{var ze;const xe=re.data();k(((ze=xe==null?void 0:xe.typing)==null?void 0:ze[xe.userId])||!1),P(!1)},re=>{console.error("Error fetching typing status:",re.message),P(!1)});return()=>{z(),X()}}else Ne.error("Invalid chat selected."),e("/seller-chat"),P(!1)}else P(!1)}catch(W){console.error("Error fetching chats:",W.message),Ne.error("Failed to load chats."),P(!1)}},H=>{console.error("Error in chats snapshot:",H.message),Ne.error("Failed to load chats."),P(!1)});return()=>Q()}catch(Y){console.error("Error setting up chats:",Y.message),Ne.error("Failed to load chats."),P(!1)}})()},[t,e]);const O=()=>{var M;(M=R.current)==null||M.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{O()},[l]);const I=M=>{const Y=M.target.files[0];if(Y){if(!Y.type.startsWith("image/")){Ne.error("Please select an image file");return}if(Y.size>5*1024*1024){Ne.error("Image size should be less than 5MB");return}p(Y);const Q=new FileReader;Q.onload=H=>w(H.target.result),Q.readAsDataURL(Y)}},C=async()=>{if(!u||!a){Ne.error("Please select a message template.");return}try{v(!0),await wn(Ue(J,"chats",a.chatId,"messages"),{senderId:we.currentUser.uid,text:Ud.seller[u],image:null,timestamp:new Date,status:"delivered"}),await Qr(_e(J,"chats",a.chatId),{lastMessage:Ud.seller[u],lastMessageTime:new Date,[`typing.${we.currentUser.uid}`]:!1}),h("")}catch(M){console.error("Error sending message:",M.message),Ne.error("Failed to send message.")}finally{v(!1)}},E=async()=>{if(!(!f||!x||!a))try{v(!0),await wn(Ue(J,"chats",a.chatId,"messages"),{senderId:we.currentUser.uid,text:"",image:x,timestamp:new Date,status:"delivered"}),await Qr(_e(J,"chats",a.chatId),{lastMessage:"Image sent",lastMessageTime:new Date,[`typing.${we.currentUser.uid}`]:!1}),p(null),w(null),U.current&&(U.current.value="")}catch(M){console.error("Error sending image:",M.message),Ne.error("Failed to send image.")}finally{v(!1)}},D=async()=>{if(a)try{await Qr(_e(J,"chats",a.chatId),{[`typing.${we.currentUser.uid}`]:!0})}catch(M){console.error("Error updating typing status:",M.message)}},V=M=>{if(!M)return"";try{return(M.toDate?M.toDate():new Date(M)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}},B=M=>{if(!M)return"";try{const Y=M.toDate?M.toDate():new Date(M),Q=new Date;return Y.toDateString()===Q.toDateString()?Y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Y.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return""}};return T?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 flex items-center",children:[n.jsx("i",{className:"bx bx-chat text-blue-500 mr-2"}),"Seller Chats"]}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Manage your conversations with buyers."})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs(St.div,{className:"md:w-1/3 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-600",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5},children:[n.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900 border-b border-gray-200 dark:border-gray-600",children:n.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:"Chats"})}),s.length===0?n.jsx("p",{className:"p-4 text-gray-600 dark:text-gray-400 text-sm",children:"No chats found."}):n.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:n.jsx(Md,{children:s.map(M=>n.jsxs(St.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},onClick:()=>e(`/seller-chat/${M.chatId}`),className:`p-4 flex items-center gap-3 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-800 transition ${(a==null?void 0:a.chatId)===M.chatId?"bg-blue-100 dark:bg-blue-900":""}`,children:[n.jsx("img",{src:M.buyerAvatar,alt:"Buyer",className:"w-10 h-10 rounded-full border border-gray-200 dark:border-gray-600"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100 text-sm truncate",children:M.buyerName}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:M.lastMessage||"No messages yet"})]}),n.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:B(M.lastMessageTime)})]},M.chatId))})})]}),n.jsx(St.div,{className:"md:w-2/3 flex flex-col bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-600",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5},children:a?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-blue-600 dark:bg-blue-700 text-white border-b border-gray-200 dark:border-gray-600",children:[n.jsx("img",{src:a.buyerAvatar,alt:"Buyer",className:"w-10 h-10 rounded-full border-2 border-white"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-lg",children:a.buyerName}),n.jsxs("div",{className:"text-xs text-blue-100 dark:text-blue-200",children:["Product: ",a.productName]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-100 dark:bg-gray-900",children:[n.jsxs(Md,{children:[l.map(M=>n.jsx(St.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2},className:`flex ${M.senderId===we.currentUser.uid?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 shadow-sm relative ${M.senderId===we.currentUser.uid?"bg-blue-500 text-white rounded-br-none":"bg-white dark:bg-gray-600 text-gray-800 dark:text-gray-100 rounded-bl-none"}`,children:[M.text&&n.jsx("div",{className:"text-sm",children:M.text}),M.image&&n.jsx("img",{src:M.image,alt:"chat-img",className:"max-w-[150px] sm:max-w-[200px] rounded-md border border-gray-200 dark:border-gray-600 mb-1"}),n.jsx("div",{className:"flex items-center justify-end gap-1 text-xs mt-1",children:n.jsx("span",{className:M.senderId===we.currentUser.uid?"text-blue-100":"text-gray-500 dark:text-gray-400",children:V(M.timestamp)})}),n.jsx("div",{className:`absolute bottom-0 ${M.senderId===we.currentUser.uid?"right-[-6px]":"left-[-6px]"} w-0 h-0 border-t-[6px] border-t-transparent ${M.senderId===we.currentUser.uid?"border-l-[6px] border-l-blue-500":"border-r-[6px] border-r-white dark:border-r-gray-600"} border-b-[6px] border-b-transparent`})]})},M.id)),(N||j)&&n.jsx(St.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-start",children:n.jsx("div",{className:"bg-white dark:bg-gray-600 rounded-lg p-3 shadow-sm",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),n.jsx("div",{ref:R})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-600",children:[n.jsx("div",{className:"mb-3",children:n.jsx(R6,{role:"seller",onSelect:h,selectedTemplate:u,className:"w-full p-3 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"})}),f&&x&&n.jsx(St.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-3 p-2 bg-gray-100 dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-600",children:n.jsx("img",{src:x,alt:"preview",className:"max-w-[80px] max-h-[80px] rounded-md"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-gray-100 dark:bg-gray-600 rounded-lg p-2",children:[qX(l)&&n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:U,type:"file",accept:"image/*",onChange:I,className:"hidden",id:"image-upload"}),n.jsx(St.label,{htmlFor:"image-upload",whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-gray-600 dark:text-gray-300 p-1 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.586-6.586M12 3v6m0 0v6m0-6h6m-6 0H6"})})})]}),u?n.jsxs(St.button,{onClick:C,disabled:N,whileHover:{scale:1.05},whileTap:{scale:.95},className:`ml-auto py-2 px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition ${N?"opacity-50 cursor-not-allowed":""}`,onMouseDown:D,children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send"]}):n.jsxs(St.button,{onClick:()=>e("/support"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"ml-auto py-2 px-4 bg-orange-500 text-white rounded-lg shadow-md hover:bg-orange-600 flex items-center justify-center gap-2 transition",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636A9 9 0 1121 12h-3m-6 6v3m-6-3h-3m6-6H3m6-6V3"})}),"Support"]})]}),f&&x&&n.jsxs(St.button,{onClick:E,disabled:N,whileHover:{scale:1.05},whileTap:{scale:.95},className:`py-2 px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition ${N?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send Image"]})]})]})]}):n.jsx(St.div,{className:"flex-1 flex items-center justify-center text-gray-600 dark:text-gray-400 text-sm",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:"Select a chat to view messages."})})]})]})})]})},Ig={quote:"I always find what I need on Foremade, and the delivery is super fast. Highly recommended!",name:"Michael S., New York",avatar:"https://randomuser.me/api/portraits/men/32.jpg"};function HX(){const t=[{image:"https://pngimg.com/uploads/vacuum_cleaner/vacuum_cleaner_PNG3.png",text:"Smart Shopping, Better Living",tagline:"Premium Products",description:"Discover curated collections from verified sellers worldwide",features:[{icon:"bx bx-certification",text:"Quality Assured",desc:"Verified products"},{icon:"bx bx-package",text:"Fast Delivery",desc:"Global shipping"}],button:"Explore Now",secondaryButton:"View Deals",link:"/products"},{image:"https://pngimg.com/uploads/tv/tv_PNG39223.png",text:"Premium Electronics",tagline:"Tech Essentials",description:"Find the latest tech from trusted sellers",features:[{icon:"bx bx-check-shield",text:"Warranty Assured",desc:"Extended coverage"},{icon:"bx bx-credit-card",text:"Easy Payment",desc:"Multiple options"}],button:"Browse Electronics",secondaryButton:"View Brands",link:"/category/electronics"}],[e,s]=_.useState(0),[r,a]=_.useState(!0);_.useEffect(()=>{if(!r)return;const l=setInterval(()=>{s(d=>(d+1)%t.length)},6e3);return()=>clearInterval(l)},[e,t.length,r]);const i=l=>{s(l),a(!1),setTimeout(()=>a(!0),1e4)};return n.jsxs("div",{className:"relative overflow-hidden my-4 mx-2 sm:mx-4 lg:mx-6 rounded-2xl border border-blue-800/30 h-[240px] xs:h-[260px] sm:h-[320px] lg:h-[440px] shadow-xl",children:[n.jsxs("div",{className:"absolute inset-0 z-0",children:[n.jsx(St.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-700 via-blue-400/60 to-amber-200 animate-gradient-x",initial:{opacity:0},animate:{opacity:.7},transition:{duration:1}}),n.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 sm:opacity-30 transition-all duration-700 scale-110",style:{backgroundImage:`url(${t[e].image})`}}),n.jsx("div",{className:"absolute inset-0 backdrop-blur-md"})]}),n.jsx(St.div,{className:"relative z-10 h-full flex items-center w-full",children:n.jsxs("div",{className:"w-full mx-auto px-3 xs:px-4 sm:px-8 lg:px-16 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-8 sm:gap-10 py-6 sm:py-10 flex-wrap",children:[n.jsxs("div",{className:"max-w-2xl w-full space-y-4 sm:space-y-6",children:[n.jsx(St.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"inline-flex items-center h-7 px-4 rounded-full bg-gradient-to-r from-blue-600/30 to-blue-400/20 border border-blue-500/30 mb-1",children:n.jsx("span",{className:"text-xs font-medium text-blue-100 tracking-wide",children:t[e].tagline})}),n.jsx(St.h2,{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold leading-tight text-white drop-shadow-lg",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:t[e].text}),n.jsx(St.p,{className:"hidden sm:block text-base sm:text-lg text-white/90 max-w-lg mt-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:t[e].description}),n.jsx("div",{className:"flex gap-3 mt-4",children:n.jsx(ue,{to:t[e].link,className:"px-6 py-2 rounded-lg font-bold bg-gradient-to-r from-blue-600 to-blue-400 text-white shadow-lg hover:from-blue-400 hover:to-blue-600 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-400 animate-pulse",children:t[e].button})})]}),n.jsxs(St.div,{className:"hidden sm:flex flex-col items-center justify-center bg-white/30 backdrop-blur-lg rounded-2xl p-6 shadow-lg max-w-xs ml-0 sm:ml-8 mt-8 sm:mt-0 border border-blue-100/30",initial:{opacity:0,x:30},animate:{opacity:1,x:0},children:[n.jsx("img",{src:Ig.avatar,alt:Ig.name,className:"w-16 h-16 rounded-full border-4 border-blue-300 shadow mb-3"}),n.jsx("p",{className:"text-base text-gray-900 font-medium italic mb-2 text-center",children:Ig.quote}),n.jsx("span",{className:"text-xs text-gray-700 font-semibold",children:Ig.name})]})]})}),n.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-2 z-20",children:t.map((l,d)=>n.jsx("button",{onClick:()=>i(d),className:"group","aria-label":`Go to slide ${d+1}`,children:n.jsx("span",{className:`block w-3 h-3 rounded-full transition-all duration-200 ${e===d?"bg-blue-400 scale-125 shadow-lg shadow-blue-400/50":"bg-white/40 group-hover:bg-white/60 group-hover:scale-105"}`})},d))})]})}const GX=()=>{const[t,e]=_.useState({width:window.innerWidth,height:window.innerHeight});return _.useEffect(()=>{const s=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),t},WX=()=>{const[t,e]=_.useState([]),[s,r]=_.useState(0),[a,i]=_.useState(null),{width:l}=GX();_.useEffect(()=>{(async()=>{try{const p=(await yt(Ue(J,"carouselSlides"))).docs.map(x=>({id:x.id,...x.data()}));e(p)}catch(f){console.error("Error fetching slides:",f)}})()},[]),_.useEffect(()=>{if(t.length===0)return;const h=setInterval(()=>{i(s),r(f=>(f+1)%t.length)},5e3);return()=>clearInterval(h)},[s,t.length]);const d=h=>l<640?h.mobile:l<1024?h.tablet:h.desktop,u=h=>{if(h.mediaType==="video")return!0;const f=d(h);return f&&(f.endsWith(".mp4")||f.endsWith(".webm"))};return t.length===0?n.jsx("div",{className:"relative h-[200px] sm:h-[250px] md:h-[300px] lg:h-[400px] w-full overflow-hidden",children:n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"w-full h-full bg-gray-200 animate-pulse"})})}):n.jsxs("div",{className:"relative h-[200px] sm:h-[250px] md:h-[300px] lg:h-[400px] w-full overflow-hidden",children:[t.map((h,f)=>n.jsx("div",{className:`absolute inset-0 transition-all duration-1000 ease-in-out ${f===s?"opacity-100 transform translate-x-0":f===a?"opacity-0 transform -translate-x-10":"opacity-0 transform translate-x-10"}`,children:u(h)?n.jsx("video",{src:d(h),alt:h.alt||`Slide ${h.id}`,className:"w-full h-full object-cover object-center sm:object-[50%_50%]",style:{objectPosition:"center 35%"},autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:p=>{console.warn("Video load error:",{slideId:h.id,url:d(h)}),console.log(p)}}):n.jsx("img",{src:d(h),alt:h.alt||`Slide ${h.id}`,className:"w-full h-full object-cover object-center sm:object-[50%_50%]",style:{objectPosition:"center 35%"},loading:"lazy",onError:p=>{console.warn("Image load error:",{slideId:h.id,url:d(h)}),console.log(p)}})},h.id)),n.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:t.map((h,f)=>n.jsx("button",{onClick:()=>r(f),className:`w-2 h-2 rounded-full transition-colors ${f===s?"bg-white":"bg-white bg-opacity-50"}`},f))})]})},P6=({type:t="default",count:e=1})=>{const s=()=>{switch(t){case"featuredProduct":case"recommended":return n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 animate-pulse",children:[...Array(e)].map((r,a)=>n.jsxs("div",{className:"w-full h-64 bg-gray-200 rounded-lg",children:[n.jsx("div",{className:"w-full h-48 bg-gray-300 rounded-t-lg"}),n.jsxs("div",{className:"p-2",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},a))});case"productDetail":return n.jsxs("div",{className:"animate-pulse",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"w-full md:w-3/4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx("div",{className:"w-full h-96 bg-gray-200 rounded-lg"})}),n.jsxs("div",{className:"md:w-1/2",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),n.jsx("div",{className:"h-16 bg-gray-200 rounded w-full"})]})]}),n.jsxs("div",{className:"mt-8",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),n.jsxs("div",{className:"mt-8",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]}),n.jsxs("div",{className:"w-full md:w-1/4 max-md:hidden",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),n.jsx("div",{className:"flex flex-col gap-4 md:border-l md:pl-4",children:[...Array(4)].map((r,a)=>n.jsxs("div",{className:"w-full h-64 bg-gray-200 rounded-lg",children:[n.jsx("div",{className:"w-full h-48 bg-gray-300 rounded-t-lg"}),n.jsxs("div",{className:"p-2",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},a))})]})]}),n.jsxs("div",{className:"md:hidden mt-6",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:[...Array(4)].map((r,a)=>n.jsxs("div",{className:"w-full h-64 bg-gray-200 rounded-lg",children:[n.jsx("div",{className:"w-full h-48 bg-gray-300 rounded-t-lg"}),n.jsxs("div",{className:"p-2",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},a))})]})]});case"categories":return n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 animate-pulse",children:[n.jsx("div",{className:"sm:col-span-2 h-40 bg-gray-200 rounded-lg"}),n.jsx("div",{className:"h-40 bg-gray-200 rounded-lg"}),n.jsx("div",{className:"h-40 bg-gray-200 rounded-lg"}),n.jsx("div",{className:"h-40 bg-gray-200 rounded-lg max-md:hidden"}),n.jsx("div",{className:"h-40 bg-gray-200 rounded-lg max-md:hidden"})]});default:return n.jsx("div",{className:"w-80 sm:w-full h-40 bg-gray-200 rounded-lg animate-pulse",children:n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/4 mb-4"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-md"}),n.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-md"})]})]})})}};return n.jsx("div",{className:t==="default"?"flex gap-4 overflow-x-auto":"",children:[...Array(t==="featuredProduct"||t==="recommended"||t==="productDetail"||t==="categories"?1:e)].map((r,a)=>n.jsx("div",{className:t==="default"?"flex-shrink-0":"",children:s()},a))})},YX=()=>{const[t,e]=_.useState(!0);return _.useEffect(()=>{const s=setTimeout(()=>{e(!1)},1500);return()=>clearTimeout(s)},[]),t?n.jsxs("section",{className:"container mx-auto px-4 py-8",children:[n.jsx("h2",{className:"text-lg sm:text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Top Categories"}),n.jsx(P6,{type:"categories"})]}):n.jsxs("section",{className:"container mx-auto px-4 py-8",children:[n.jsx("h2",{className:"text-lg sm:text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Top Categories"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"sm:col-span-2 bg-[#E0F4FF] text-black rounded-lg p-4 sm:p-6 flex flex-co sm:flex-row  max-md:items-center tems-left justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-2",children:"Cut the Price, Not the Features"}),n.jsx("p",{className:"text-sm sm:text-xs mb-4",children:"Get the latest phones at 20% off"}),n.jsx("a",{href:"/electronics",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Buy Now"})]}),n.jsx("div",{className:"mt-4 sm:mt-0 sm:self-start",children:n.jsx("img",{src:"https://pngimg.com/uploads/iphone16/small/iphone16_PNG6.png",alt:"Phone",className:"w-20 h-40"})})]}),n.jsxs("div",{className:"max-md:hidden bg-[#D1FAE5] rounded-lg p-4 sm:p-6 flex flex-col justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-teal-800 mb-2",children:"Happy Club"}),n.jsx("p",{className:"text-sm sm:text-xs text-teal-800 mb-4",children:"Collect coupons from stores and apply to get special discounts"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4",children:[n.jsx("p",{className:"text-sm sm:text-xs font-semibold text-teal-800",children:"10% OFF"}),n.jsx("p",{className:"text-xs sm:text-[0.65rem] text-gray-600",children:"For HYNOLYN"}),n.jsx("p",{className:"text-xs sm:text-[0.65rem] text-gray-600",children:"CODE: 0va6ghmixg"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4",children:[n.jsx("p",{className:"text-sm sm:text-xs font-semibold text-teal-800",children:"30% OFF"}),n.jsx("p",{className:"text-xs sm:text-[0.65rem] text-gray-600",children:"For FOREMADE & Appfur"}),n.jsx("p",{className:"text-xs sm:text-[0.65rem] text-gray-600",children:"CODE: h7ay6gi9T7"})]})]})]}),n.jsxs("div",{className:"bg-[#EDE9FE] text-black rounded-lg p-4 sm:p-6 flex sm:flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-2",children:"Style Meets Function"}),n.jsx("a",{href:"/electronics",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Shop Now"})]}),n.jsx("div",{className:"mt-4 sm:mt-0",children:n.jsx("img",{src:"https://pngimg.com/uploads/laptop/small/laptop_PNG101763.png",alt:"Laptop",className:"w-24 sm:w-28 h-auto"})})]}),n.jsxs("div",{className:"bg-[#FFE5E5] text-black rounded-lg p-4 sm:p-6 flex sm:flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-2",children:"Capture the Magic Around"}),n.jsx("a",{href:"/electronics",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Shop Now"})]}),n.jsx("div",{className:"mt-4 sm:mt-0",children:n.jsx("img",{src:"https://pngimg.com/uploads/camera_lens/small/camera_lens_PNG4.png",alt:"Camera",className:"w-20 sm:w-24 h-auto"})})]}),n.jsxs("div",{className:"max-md:hidden bg-[#E0F4FF] text-black rounded-lg p-4 sm:p-6 flex flex-col sm:flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-2",children:"Health & Wellness"}),n.jsx("a",{href:"/health-beauty",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Shop Now"})]}),n.jsx("div",{className:"mt-4 sm:mt-0",children:n.jsx("img",{src:"https://pngimg.com/uploads/pills/small/pills_PNG16492.png",alt:"Bottle",className:"w-20 sm:w-24 h-auto"})})]})]})]})},Dg={quote:"Foremade helped me turn my side hustle into a real business. The dashboard and support are world-class!",name:"Sarah M., London",avatar:"https://randomuser.me/api/portraits/women/44.jpg"};function KX(){const t=[{image:"https://pngimg.com/uploads/fan/fan_PNG14457.png",text:"Start Your Business Journey",tagline:"Empowering Entrepreneurs",description:"Join our marketplace and transform your passion into profit",features:[{icon:"bx bx-chart",text:"Analytics Dashboard",desc:"Track your growth"},{icon:"bx bx-shield-plus",text:"Secure Payments",desc:"Protected transactions"}],button:"Start Selling",secondaryButton:"Learn More",link:"/sell"},{image:"https://pngimg.com/uploads/laptop/laptop_PNG101773.png",text:"Grow Your Business",tagline:"Scale Globally",description:"Reach millions of potential customers worldwide",features:[{icon:"bx bx-globe",text:"Global Reach",desc:"Worldwide audience"},{icon:"bx bx-trending-up",text:"Growth Tools",desc:"Marketing suite"}],button:"Learn More",secondaryButton:"View Features",link:"/pro-seller-guide"}],[e,s]=_.useState(0),[r,a]=_.useState(!0);_.useEffect(()=>{if(!r)return;const l=setInterval(()=>{s(d=>(d+1)%t.length)},6e3);return()=>clearInterval(l)},[e,t.length,r]);const i=l=>{s(l),a(!1),setTimeout(()=>a(!0),1e4)};return n.jsxs("div",{className:"relative overflow-hidden my-4 mx-2 sm:mx-4 lg:mx-6 rounded-2xl border border-neutral-800/30 h-[240px] xs:h-[260px] sm:h-[320px] lg:h-[440px] shadow-xl",children:[n.jsxs("div",{className:"absolute inset-0 z-0",children:[n.jsx(St.div,{className:"absolute inset-0 bg-gradient-to-br from-amber-600 via-orange-400/60 to-blue-900 animate-gradient-x",initial:{opacity:0},animate:{opacity:.7},transition:{duration:1}}),n.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 sm:opacity-30 transition-all duration-700 scale-110",style:{backgroundImage:`url(${t[e].image})`}}),n.jsx("div",{className:"absolute inset-0 backdrop-blur-md"})]}),n.jsx(St.div,{className:"relative z-10 h-full flex items-center w-full",children:n.jsxs("div",{className:"w-full mx-auto px-3 xs:px-4 sm:px-8 lg:px-16 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-8 sm:gap-10 py-6 sm:py-10 flex-wrap",children:[n.jsxs("div",{className:"max-w-2xl w-full space-y-4 sm:space-y-6",children:[n.jsx(St.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"inline-flex items-center h-7 px-4 rounded-full bg-gradient-to-r from-amber-600/30 to-orange-400/20 border border-amber-500/30 mb-1",children:n.jsx("span",{className:"text-xs font-medium text-amber-100 tracking-wide",children:t[e].tagline})}),n.jsx(St.h2,{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold leading-tight text-white drop-shadow-lg",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:t[e].text}),n.jsx(St.p,{className:"hidden sm:block text-base sm:text-lg text-white/90 max-w-lg mt-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:t[e].description}),n.jsx("div",{className:"flex gap-3 mt-4",children:n.jsx(ue,{to:t[e].link,className:"px-6 py-2 rounded-lg font-bold bg-gradient-to-r from-amber-500 to-orange-400 text-white shadow-lg hover:from-orange-400 hover:to-amber-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-amber-400 animate-pulse",children:t[e].button})})]}),n.jsxs(St.div,{className:"hidden sm:flex flex-col items-center justify-center bg-white/30 backdrop-blur-lg rounded-2xl p-6 shadow-lg max-w-xs ml-0 sm:ml-8 mt-8 sm:mt-0 border border-amber-100/30",initial:{opacity:0,x:30},animate:{opacity:1,x:0},children:[n.jsx("img",{src:Dg.avatar,alt:Dg.name,className:"w-16 h-16 rounded-full border-4 border-amber-300 shadow mb-3"}),n.jsx("p",{className:"text-base text-gray-900 font-medium italic mb-2 text-center",children:Dg.quote}),n.jsx("span",{className:"text-xs text-gray-700 font-semibold",children:Dg.name})]})]})}),n.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-2 z-20",children:t.map((l,d)=>n.jsx("button",{onClick:()=>i(d),className:"group","aria-label":`Go to slide ${d+1}`,children:n.jsx("span",{className:`block w-3 h-3 rounded-full transition-all duration-200 ${e===d?"bg-amber-400 scale-125 shadow-lg shadow-amber-400/50":"bg-white/40 group-hover:bg-white/60 group-hover:scale-105"}`})},d))})]})}const Nd=({alerts:t,removeAlert:e})=>n.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`flex items-center p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-0 opacity-100 ${s.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"} animate-slide-in`,onClick:()=>e(s.id),role:"alert",children:[n.jsx("i",{className:`bx ${s.type==="success"?"bx-check-circle":"bx-error-circle"} text-xl mr-2`}),n.jsx("span",{children:s.message}),n.jsx("button",{className:"ml-auto text-white hover:text-gray-200","aria-label":"Close alert",children:n.jsx("i",{className:"bx bx-x text-xl"})})]},s.id))}),Nm=()=>{const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="success",l=3e3)=>{const d=Date.now().toString();e(u=>[...u,{id:d,message:a,type:i}]),l&&setTimeout(()=>{e(u=>u.filter(h=>h.id!==d))},l)},removeAlert:a=>{e(i=>i.filter(l=>l.id!==a))}}},I6=({productId:t,isIconOnly:e=!1,customClass:s=""})=>{const[r,a]=_.useState(!1),{alerts:i,addAlert:l}=Nm(),{setAlerts:d}=Nm(),u=async()=>{var f;if(!t){l("Invalid product ID","error",3e3);return}a(!0);try{await WI(t,1,(f=we.currentUser)==null?void 0:f.uid),l("Added to cart!","success",3e3)}catch(p){console.error("Error adding to cart:",p),l(p.message||"Failed to add to cart","error",3e3)}finally{a(!1)}};let h=e?`${s} focus:outline-none`:`rounded-full px-2 py-1 text-white focus:outline-none ml-2 transition-all duration-200 ${r?"bg-gray-300 cursor-not-allowed":"bg-[#000] hover:bg-blue-950"}`;return n.jsxs("div",{className:"",children:[n.jsx("button",{onClick:u,disabled:r,className:h,"aria-label":"Add to cart",children:n.jsx("i",{className:`bx bx-cart-add text-2xl ${r?"opacity-50":""}`})}),n.jsx(Nd,{alerts:i,removeAlert:f=>d(i.filter(p=>p.id!==f))})]})};function Rl({price:t}){const{convertPrice:e,loading:s}=BI();return n.jsx("span",{className:"text-blue-600 font-bold dark:text-gray-200",children:s?"...":e(t)})}const Mg="https://via.placeholder.com/200?text=No+Image",hn=({product:t,isDailyDeal:e=!1})=>{const[s,r]=_.useState(!1),[a,i]=_.useState(0),[l,d]=_.useState(Mg),[u,h]=_.useState(!1),[f,p]=_.useState("Unknown Seller"),[x,w]=_.useState(e),[N,v]=_.useState(0),[j,k]=_.useState({taxRate:.075,buyerProtectionRate:.02,handlingRate:.05}),T=(I,C=1,E=0)=>{const D=E>0?I*E/100:0;return(I-D)*(1+j.taxRate+j.buyerProtectionRate+j.handlingRate)*C};_.useEffect(()=>{const I=async()=>{try{const V=_e(J,"feeConfigurations","categoryFees"),B=await Ge(V);if(B.exists()){const M=B.data(),Y=(t==null?void 0:t.category)||"default";k(M[Y]||{taxRate:.075,buyerProtectionRate:.02,handlingRate:.05})}}catch(V){console.error("Error fetching fee config:",V),Ne.error("Failed to load fee settings.")}},C=async()=>{var V;if(!t||typeof t!="object"||!t.id){console.log("Invalid or missing product ID:",t),r(!1),i(0),w(e),v(0);return}try{const B=_e(J,"products",t.id),M=await Ge(B);if(M.exists()){const Y=M.data();console.log("Firestore data:",{id:t.id,favoritedBy:Y.favoritedBy,favoriteCount:Y.favoriteCount,isDailyDeal:Y.isDailyDeal,discountPercentage:Y.discountPercentage});const Q=(V=we.currentUser)==null?void 0:V.uid;r(Q&&Array.isArray(Y.favoritedBy)&&Y.favoritedBy.includes(Q)||!1),i(Y.favoriteCount||0),w(Y.isDailyDeal||e),v(Y.discountPercentage||0)}else console.warn("Product not found in Firestore:",t.id),r(!1),i(0),w(e),v(0)}catch(B){console.error("Error fetching product data:",B),Ne.error("Failed to load product data.")}},E=async()=>{if(x||!t.sellerId){p("");return}try{const V=_e(J,"users",t.sellerId),B=await Ge(V);B.exists()&&p(B.data().username||"Unknown Seller")}catch(V){console.error("Error fetching seller username:",V),p("Unknown Seller")}};I(),C(),E();let D=Mg;typeof t.imageUrl=="string"&&t.imageUrl.startsWith("https://")?D=t.imageUrl:Array.isArray(t.imageUrls)&&t.imageUrls.length>0&&typeof t.imageUrls[0]=="string"&&t.imageUrls[0].startsWith("https://")&&(D=t.imageUrls[0]),console.log("Setting imageUrl to:",D),d(D),h(!1)},[t.id,t.imageUrl,t.imageUrls,t.sellerId,t.category,e]);const P=(I,C=15)=>!I||typeof I!="string"?"No text available":I.length>C?I.slice(0,C-3)+"...":I,U=async I=>{var E;I.preventDefault(),I.stopPropagation();const C=(E=we.currentUser)==null?void 0:E.uid;if(!C||!(t!=null&&t.id)){Ne.error("Please sign in to favorite a product.");return}try{const D=_e(J,"products",t.id),V=await Ge(D);if(!V.exists()){Ne.error("Product not found.");return}const B=V.data(),M=B.favoriteCount||0,Y=B.favoritedBy||[];if(s)await Qr(D,{favoritedBy:dz(C),favoriteCount:Math.max(0,M-1)}),r(!1),i(Math.max(0,M-1)),Ne.success("Removed from favorites!");else{if(Y.includes(C)){Ne.info("You have already favorited this product.");return}await Qr(D,{favoritedBy:cz(C),favoriteCount:M+1}),r(!0),i(M+1),Ne.success("Added to favorites!")}}catch(D){console.error("Error updating favorite:",D),Ne.error("Failed to update favorite. Try again!")}},R=()=>{const I=JSON.parse(localStorage.getItem("recentlyViewed")||"[]");if(t.id&&!I.includes(t.id)){const C=[t.id,...I].slice(0,10);localStorage.setItem("recentlyViewed",JSON.stringify(C))}},O=T(t.price||0,1,x?N:0);return n.jsxs(ue,{to:`/product/${t.id}`,className:"bg-white rounded-lg shadow-sm hover:shadow-md transition duration-300 flex flex-col min-w-0 overflow-hidden",onClick:R,tabIndex:0,"aria-label":t.name,children:[x&&n.jsxs("span",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["Deal! -",N,"%"]}),n.jsxs("div",{className:"relative h-[200px] overflow-hidden rounded-t-lg min-w-0",children:[n.jsx("img",{src:u?Mg:l,alt:t.name,className:"w-full h-full object-cover max-w-full max-h-full",onError:()=>{u||(console.warn("Image load error:",{productId:t.id,imageUrl:l,name:t.name}),h(!0),d(Mg))},loading:"lazy",fetchpriority:"low"}),n.jsxs("button",{onClick:U,className:"absolute top-2 right-2 p-1.5 flex items-center justify-evenly bg-white/70 backdrop-blur-sm rounded-full hover:bg-white transition-colors","aria-label":s?"Remove from favorites":"Add to favorites",children:[n.jsx(BK,{className:`w-5 h-5 ${s?"text-gray-600 fill-gray-600":"text-gray-600"}`}),n.jsx("p",{className:"mx-1 text-sm",children:a})]})]}),n.jsxs("div",{className:"flex flex-col justify-between flex-grow p-3 min-w-0 overflow-hidden",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-sm text-gray-800 line-clamp-2 mb-1 break-words truncate",title:t.name,children:P(t.name)}),!x&&f&&n.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[n.jsx(Po,{className:"w-4 h-4 text-blue-600 mr-1"}),n.jsx("span",{className:"line-clamp-1",title:f,children:P(f,20)})]})]}),n.jsx("div",{className:"mt-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Rl,{price:O}),n.jsx(I6,{productId:t.id,isIconOnly:!0})]})})]})]})};function D6(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l=["foremade fashion","smart watches","drinks & categories","health & beauty","game & fun","computers & accessories"];return _.useEffect(()=>{(async()=>{try{r(!0),i(null);const u=Rt(Ue(J,"products"),ht("status","==","approved"),ht("category","in",l)),f=(await yt(u)).docs.map(x=>({id:x.id,...x.data()}));console.log("All fetched products (Featured):",f);const p=f.filter(x=>(x.stock||0)<10?(console.warn("Filtered out product with low stock:",{id:x.id,name:x.name,stock:x.stock}),!1):!0).sort(()=>Math.random()-.5);if(console.log("Fetched products (Featured - After Filter):",p),p.length===0){console.warn("No products passed the filters (Featured). Relaxing stock filter...");const x=f.sort(()=>Math.random()-.5);console.log("Products with relaxed stock filter (Featured):",x),e(x.slice(0,8))}else e(p.slice(0,8))}catch(u){console.error("Error loading featured products:",{message:u.message,code:u.code}),i("Failed to load featured products.")}finally{r(!1)}})()},[]),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1",children:a?n.jsx("p",{className:"text-red-600 col-span-full text-center",children:a}):s?n.jsx(n.Fragment,{children:[...Array(5)].map((d,u)=>n.jsx("div",{className:"min-w-[200px] h-[300px] bg-gray-200 animate-pulse rounded-lg"},u))}):t.length===0?n.jsx("p",{className:"text-gray-600 col-span-full text-center",children:"No Product Found"}):t.map(d=>n.jsx("div",{className:"",children:n.jsx(hn,{product:d},d.id)}))})}function M6(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null);return _.useEffect(()=>{(async()=>{try{r(!0),i(null);const d=Rt(Ue(J,"products"),ht("status","==","approved")),h=(await yt(d)).docs.map(p=>({id:p.id,...p.data()}));console.log("All fetched products (Best Selling - Raw Firestore Data):",h);const f=h.filter(p=>(p.stock||0)<10?(console.warn("Filtered out product with low stock:",{id:p.id,name:p.name,stock:p.stock}),!1):!0).sort((p,x)=>(x.rating||0)-(p.rating||0));if(console.log("Fetched products (Best Selling - After Filter):",f),f.length===0){console.warn("No products passed the filters (Best Selling). Relaxing stock filter...");const p=h.sort((x,w)=>(w.rating||0)-(x.rating||0));console.log("Products with relaxed stock filter (Best Selling):",p),e(p.slice(0,8))}else e(f.slice(0,8))}catch(d){console.error("Error loading best-selling products:",{message:d.message,code:d.code}),i("Failed to load best-selling products.")}finally{r(!1)}})()},[]),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1",children:a?n.jsx("p",{className:"text-red-600 col-span-full text-center",children:a}):s?n.jsx(n.Fragment,{children:[...Array(5)].map((l,d)=>n.jsx("div",{className:"min-w-[200px] h-[300px] bg-gray-200 animate-pulse rounded-lg"},d))}):t.length===0?n.jsx("p",{className:"text-gray-600 col-span-full text-center",children:"No best-selling products found. Check your database for products."}):t.map(l=>n.jsx(hn,{product:l},l.id))})}function XX(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null);return _.useEffect(()=>{(async()=>{try{r(!0),i(null);const d=Rt(Ue(J,"products"),Wm("createdAt","desc")),h=(await yt(d)).docs.map(p=>({id:p.id,...p.data()}));console.log("All fetched products (Latest):",h);const f=h.filter(p=>(p.stock||0)<10?(console.warn("Filtered out product with low stock:",{id:p.id,name:p.name,stock:p.stock}),!1):!0);if(console.log("Fetched products (Latest - After Filter):",f),f.length===0){console.warn("No products passed the filters (Latest). Relaxing stock filter...");const p=h;console.log("Products with relaxed stock filter (Latest):",p),e(p.slice(0,8))}else e(f.slice(0,8))}catch(d){console.error("Error loading latest products:",{message:d.message,code:d.code}),i("Failed to load latest products.")}finally{r(!1)}})()},[]),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1",children:a?n.jsx("p",{className:"text-red-600 col-span-full text-center",children:a}):s?n.jsx(n.Fragment,{children:[...Array(5)].map((l,d)=>n.jsx("div",{className:"min-w-[200px] h-[300px] bg-gray-200 animate-pulse rounded-lg"},d))}):t.length===0?n.jsx("p",{className:"text-gray-600 col-span-full text-center",children:"No Latest Products Found"}):t.map(l=>n.jsx("div",{className:"",children:n.jsx(hn,{product:l},l.id)}))})}const QX=()=>{const[t,e]=_.useState("featured");return n.jsxs("section",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex flex-col items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg text-center sm:text-xl md:text-2xl font-bold text-gray-800 mb-4",children:"Recommended For You"}),n.jsxs("div",{className:"hidden sm:flex items-center justify-center gap-4 sm:gap-6 mb-10",children:[n.jsx("button",{className:`text-sm ${t==="featured"?"text-blue-600 font-semibold":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("featured"),children:"Featured Products"}),n.jsx("button",{className:`text-sm ${t==="bestSelling"?"text-blue-600 font-semibold":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("bestSelling"),children:"Best Selling"}),n.jsx("button",{className:`text-sm ${t==="latest"?"text-blue-600 font-semibold":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("latest"),children:"Latest Products"}),n.jsx(ue,{to:"/products",className:"text-blue-600 text-sm hover:underline",children:"View All"})]}),n.jsxs("div",{className:"flex sm:hidden items-center justify-center gap-4 mb-10",children:[n.jsx("button",{className:`text-xl ${t==="featured"?"text-blue-600":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("featured"),children:n.jsx("i",{className:"bx bx-star"})}),n.jsx("button",{className:`text-xl ${t==="bestSelling"?"text-blue-600":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("bestSelling"),children:n.jsx("i",{className:"bx bxs-hot"})}),n.jsx("button",{className:`text-xl ${t==="latest"?"text-blue-600":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("latest"),children:n.jsx("i",{className:"bx bx-time"})}),n.jsx(ue,{to:"/products",className:"text-blue-600 text-xl hover:text-blue-600",children:n.jsx("i",{className:"bx bx-right-arrow-alt"})})]})]}),t==="featured"&&n.jsx(D6,{}),t==="bestSelling"&&n.jsx(M6,{}),t==="latest"&&n.jsx(XX,{})]})};function JX(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l=_.useRef(null),d="Fashion",u=2,h=["foremade fashion","clothing","accessories","footwear","jewelry","bags & wallets"],f=async()=>{try{r(!0),i(null);const w=Rt(Ue(J,"trendingItems"),ht("category","==",d)),v=(await yt(w)).docs.map(U=>U.data());if(v.length>0){const U=v.map(async O=>{const I=await Ge(_e(J,"products",O.productId));return I.exists()?{id:I.id,...I.data()}:null}),R=(await Promise.all(U)).filter(O=>O&&O.status==="approved").slice(0,10);return console.log("Admin-selected trending Fashion products:",R),R}console.warn("No admin-selected trending items for Fashion. Using fallback...");const j=Rt(Ue(J,"products"),ht("status","==","approved"),ht("category","in",h)),T=(await yt(j)).docs.map(U=>({id:U.id,...U.data()}));console.log("All fetched products (Trending Fashion):",T);const P=T.filter(U=>(U.stock||0)>=10).sort((U,R)=>(R.rating||0)-(U.rating||0)).slice(0,10);if(console.log(`Fetched ${d} products:`,P),P.length===0){console.warn("No products passed the filters (Trending Fashion). Relaxing stock filter...");const U=T.sort((R,O)=>(O.rating||0)-(R.rating||0)).slice(0,10);return console.log("Products with relaxed stock filter (Trending Fashion):",U),U}return P}catch(w){return console.error("Error loading products:",{message:w.message,code:w.code}),i("Failed to load products."),Ne.error("Failed to load trending products."),[]}finally{r(!1)}};_.useEffect(()=>{f().then(e)},[]);const p=()=>{l.current&&l.current.scrollBy({left:-240,behavior:"smooth"})},x=()=>{l.current&&l.current.scrollBy({left:240,behavior:"smooth"})};return s?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",d]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"})]})]}),n.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[...Array(7)].map((w,N)=>n.jsx("div",{className:"flex-shrink-0 w-60 mr-4",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},N))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",d]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ue,{to:`/products?category=${u}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"}),n.jsx("button",{onClick:p,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:n.jsx("i",{className:"bx bx-chevron-left text-xl text-gray-600"})}),n.jsx("button",{onClick:x,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:n.jsx("i",{className:"bx bx-chevron-right text-xl text-gray-600"})})]})]}),n.jsx("div",{ref:l,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory",children:t.length===0?n.jsxs("p",{className:"text-gray-600 p-4",children:["No ",d," products found."]}):t.map(w=>n.jsx("div",{className:"flex-shrink-0 w-60 mr-4 snap-start",children:n.jsx(hn,{product:w})},w.id))})]})})}function ZX(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l=_.useRef(null),d="Gadgets",u=3,h=["tablet & phones","computers & accessories","electronics","smart watches","game & fun"],f=async()=>{try{r(!0),i(null);const w=Rt(Ue(J,"trendingItems"),ht("category","==",d)),v=(await yt(w)).docs.map(U=>U.data());if(v.length>0){const U=v.map(async O=>{const I=await Ge(_e(J,"products",O.productId));return I.exists()?{id:I.id,...I.data()}:null}),R=(await Promise.all(U)).filter(O=>O&&O.status==="approved").slice(0,10);return console.log("Admin-selected trending Gadgets products:",R),R}console.warn("No admin-selected trending items for Gadgets. Using fallback...");const j=Rt(Ue(J,"products"),ht("status","==","approved"),ht("category","in",h)),T=(await yt(j)).docs.map(U=>({id:U.id,...U.data()}));console.log("All fetched products (Gadgets):",T);const P=T.filter(U=>(U.stock||0)>=10).sort((U,R)=>(R.rating||0)-(U.rating||0)).slice(0,10);if(console.log(`Fetched ${d} products:`,P),P.length===0){console.warn("No products passed the filters (Gadgets). Relaxing stock filter...");const U=T.sort((R,O)=>(O.rating||0)-(R.rating||0)).slice(0,10);return console.log("Products with relaxed stock filter (Gadgets):",U),U}return P}catch(w){return console.error(`Error loading ${d} products:`,{message:w.message,code:w.code}),i(`Failed to load ${d} products.`),Ne.error("Failed to load trending products."),[]}finally{r(!1)}};_.useEffect(()=>{f().then(e)},[]);const p=()=>{l.current&&l.current.scrollBy({left:-240,behavior:"smooth"})},x=()=>{l.current&&l.current.scrollBy({left:240,behavior:"smooth"})};return s?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",d]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"})]})]}),n.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[...Array(7)].map((w,N)=>n.jsx("div",{className:"flex-shrink-0 w-60 mr-4",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},N))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",d]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ue,{to:`/products?category=${u}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"}),n.jsx("button",{onClick:p,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:n.jsx("i",{className:"bx bx-chevron-left text-xl text-gray-600"})}),n.jsx("button",{onClick:x,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:n.jsx("i",{className:"bx bx-chevron-right text-xl text-gray-600"})})]})]}),n.jsx("div",{ref:l,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory",children:t.length===0?n.jsxs("p",{className:"text-gray-600 p-4",children:["No trending ",d," products found."]}):t.map(w=>n.jsx("div",{className:"flex-shrink-0 w-60 mr-4 snap-start",children:n.jsx(hn,{product:w})},w.id))})]})})}const eQ=()=>{const t=Ns(),e=gr();return window.scrollTo(0,0),_.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e.pathname]),n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-purple-600 via-indigo-600 to-purple-700 py-6 px-4 sm:py-8 sm:px-6 lg:px-8 my-4 sm:my-6 rounded-xl sm:rounded-2xl mx-2 sm:mx-4 shadow-lg",children:[n.jsxs("div",{className:"absolute inset-0 opacity-10",children:[n.jsx("div",{className:"absolute top-0 left-0 w-48 sm:w-72 h-48 sm:h-72 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),n.jsx("div",{className:"absolute top-0 right-0 w-48 sm:w-72 h-48 sm:h-72 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),n.jsx("div",{className:"absolute -bottom-8 left-20 w-48 sm:w-72 h-48 sm:h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"})]}),n.jsx("div",{className:"absolute top-8 left-8 w-1.5 h-1.5 bg-purple-200 rounded-full animate-ping opacity-50"}),n.jsx("div",{className:"absolute top-16 right-12 w-1 h-1 bg-indigo-200 rounded-full animate-ping opacity-50 animation-delay-1000"}),n.jsx("div",{className:"absolute bottom-12 left-16 w-1 h-1 bg-purple-200 rounded-full animate-ping opacity-50 animation-delay-3000"}),n.jsx("div",{className:"relative max-w-6xl mx-auto",children:n.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6 sm:gap-8",children:[n.jsxs("div",{className:"flex-1 text-center lg:text-left",children:[n.jsx("div",{className:"mb-3 sm:mb-4",children:n.jsxs("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-2 text-white leading-tight flex flex-wrap items-center justify-center lg:justify-start",children:[n.jsx("i",{className:"bx bx-rocket text-xl sm:text-2xl text-purple-200 mr-2 sm:mr-3"}),n.jsx("span",{className:"whitespace-nowrap",children:"Foremade Youth"}),n.jsx("span",{className:"ml-2 bg-gradient-to-r from-purple-200 to-indigo-200 bg-clip-text text-transparent whitespace-nowrap",children:"Empowerment Hub"})]})}),n.jsxs("p",{className:"text-sm sm:text-base md:text-lg mb-4 sm:mb-6 text-purple-100 leading-relaxed px-2 sm:px-0",children:["Join our community of young creators and entrepreneurs. Get funding, mentorship, and a ",n.jsx("span",{className:"font-medium text-purple-200",children:"free platform"})," to showcase your talents."]}),n.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start gap-2 sm:gap-4 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 bg-white bg-opacity-5 px-3 py-1 rounded-full backdrop-blur-sm text-xs sm:text-sm",children:[n.jsx("i",{className:"bx bx-dollar-circle text-purple-200"}),n.jsx("span",{className:"text-white font-medium",children:"Funding"})]}),n.jsxs("div",{className:"flex items-center space-x-2 bg-white bg-opacity-5 px-3 py-1 rounded-full backdrop-blur-sm text-xs sm:text-sm",children:[n.jsx("i",{className:"bx bx-user-voice text-purple-200"}),n.jsx("span",{className:"text-white font-medium",children:"Mentorship"})]}),n.jsxs("div",{className:"flex items-center space-x-2 bg-white bg-opacity-5 px-3 py-1 rounded-full backdrop-blur-sm text-xs sm:text-sm",children:[n.jsx("i",{className:"bx bx-devices text-purple-200"}),n.jsx("span",{className:"text-white font-medium",children:"Free Platform"})]})]})]}),n.jsxs("div",{className:"flex flex-col w-full sm:w-auto sm:flex-row lg:flex-col gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>t("/empowerment-hub"),className:"w-full sm:w-auto group inline-flex items-center justify-center px-4 sm:px-6 py-2 sm:py-3 text-sm sm:text-base font-medium rounded-full text-white border border-purple-200 hover:bg-white hover:text-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-200 focus:ring-opacity-50 transition-all duration-200 transform hover:scale-105 backdrop-blur-sm whitespace-nowrap",children:[n.jsx("i",{className:"bx bx-info-circle mr-2"}),n.jsx("span",{children:"Learn More"}),n.jsx("i",{className:"bx bx-chevron-right ml-1 group-hover:translate-x-1 transition-transform duration-200"})]}),n.jsxs("div",{className:"flex items-center justify-center lg:justify-start mt-2 text-xs text-purple-200",children:[n.jsx("i",{className:"bx bx-group mr-1"}),n.jsx("span",{children:"1000+ members"}),n.jsx("div",{className:"flex ml-2",children:[...Array(5)].map((s,r)=>n.jsx("i",{className:"bx bxs-star text-purple-200 text-xs"},r))}),n.jsx("span",{className:"ml-1",children:"4.9"})]})]})]})})]})},mC=async(t,e=3,s=1e3)=>{for(let r=1;r<=e;r++)try{return await t()}catch(a){if(r===e)throw a;const i=s*Math.pow(2,r-1);console.warn(`Retry ${r}/${e} after ${i}ms due to: ${a.message}`),await new Promise(l=>setTimeout(l,i))}},tQ="https://via.placeholder.com/200?text=No+Image",sQ=()=>{const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l=_.useRef(null),[d,u]=_.useState({hours:0,minutes:0,seconds:0});_.useEffect(()=>{const p=()=>{const w=new Date,N=new Date;N.setHours(23,59,59,999);const v=N-w,j=Math.floor(v/(1e3*60*60)),k=Math.floor(v%(1e3*60*60)/(1e3*60)),T=Math.floor(v%(1e3*60)/1e3);u({hours:j,minutes:k,seconds:T})};p();const x=setInterval(p,1e3);return()=>clearInterval(x)},[]),_.useEffect(()=>{(async()=>{try{r(!0),i(null);const w=(await mC(()=>yt(Ue(J,"dailyDeals")))).docs.map(j=>({id:j.id,...j.data()}));console.log("Raw deals:",w);const N=w.filter(j=>new Date(j.endDate)>new Date);console.log("Valid deals:",N);const v=await Promise.all(N.map(async j=>{const k=await mC(()=>Ge(_e(J,"products",j.productId))),T=k.exists()?k.data():{};console.log(`Product for deal ${j.id}:`,T);const P=Array.isArray(T.imageUrls)&&T.imageUrls.length>0?T.imageUrls[0]:tQ;return console.log(`Image for deal ${j.id}:`,P),{id:j.id,productId:j.productId,productName:T.name||"Unnamed Product",originalPrice:T.price||0,discountPercent:(j.discount*100).toFixed(2),imageUrl:P,description:T.description||"No description available",startDate:j.startDate,endDate:j.endDate}}));console.log("Final deal products:",v),e(v)}catch(x){console.error("Error loading daily deals:",{message:x.message,stack:x.stack}),i("Failed to load daily deals. Please try again later.")}finally{r(!1)}})()},[]);const h=()=>{l.current&&l.current.scrollBy({left:-240,behavior:"smooth"})},f=()=>{l.current&&l.current.scrollBy({left:240,behavior:"smooth"})};return s?n.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[n.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),n.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"}),n.jsxs("div",{className:"flex ml-2 xs:ml-3 space-x-1 xs:space-x-2",children:[n.jsx("div",{className:"h-5 xs:h-6 bg-gray-200 rounded w-8 xs:w-10 animate-pulse"}),n.jsx("span",{children:":"}),n.jsx("div",{className:"h-5 xs:h-6 bg-gray-200 rounded w-8 xs:w-10 animate-pulse"}),n.jsx("span",{children:":"}),n.jsx("div",{className:"h-5 xs:h-6 bg-gray-200 rounded w-8 xs:w-10 animate-pulse"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[n.jsx("div",{className:"h-4 xs:h-5 bg-gray-200 rounded w-12 xs:w-16 animate-pulse"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-6 w-6 xs:h-8 xs:w-8 animate-pulse"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-6 w-6 xs:h-8 xs:w-8 animate-pulse"})]})]}),n.jsx("div",{className:"flex overflow-x-auto scrollbar-hide gap-3 xs:gap-4",children:[...Array(7)].map((p,x)=>n.jsx("div",{className:"flex-shrink-0 w-[140px] xs:w-[180px] sm:w-[200px] md:w-[220px]",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-[200px] xs:h-[240px] sm:h-[260px] w-full animate-pulse"})},x))})]})}):a?n.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsx("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:n.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[n.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),n.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"})]})}),n.jsxs("p",{className:"text-red-600 text-sm xs:text-base p-3 xs:p-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-error-circle"}),a]})]})}):n.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[n.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),n.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"}),n.jsxs("div",{className:"ml-2 xs:ml-3 flex items-center space-x-1",children:[n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-1.5 xs:px-2 py-0.5 xs:py-1 rounded text-xs xs:text-sm font-mono",children:String(d.hours).padStart(2,"0")}),n.jsx("span",{className:"text-yellow-800",children:":"}),n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-1.5 xs:px-2 py-0.5 xs:py-1 rounded text-xs xs:text-sm font-mono",children:String(d.minutes).padStart(2,"0")}),n.jsx("span",{className:"text-yellow-800",children:":"}),n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-1.5 xs:px-2 py-0.5 xs:py-1 rounded text-xs xs:text-sm font-mono",children:String(d.seconds).padStart(2,"0")})]})]}),n.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[n.jsx(ue,{to:"/products?deals=true",className:"text-blue-600 text-xs xs:text-sm hover:text-blue-800",children:"See All"}),n.jsx("button",{onClick:h,className:"bg-yellow-200 rounded-full p-1 hover:bg-yellow-300","aria-label":"Scroll left",children:n.jsx("i",{className:"bx bx-chevron-left text-lg xs:text-xl text-yellow-700"})}),n.jsx("button",{onClick:f,className:"bg-yellow-200 rounded-full p-1 hover:bg-yellow-300","aria-label":"Scroll right",children:n.jsx("i",{className:"bx bx-chevron-right text-lg xs:text-xl text-yellow-700"})})]})]}),n.jsx("div",{ref:l,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory gap-3 xs:gap-4",children:t.length===0?n.jsxs("p",{className:"text-gray-600 text-sm xs:text-base p-3 xs:p-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-info-circle"}),"No deals available right now. Check back later for hot offers! "]}):t.map(p=>n.jsx("div",{className:"flex-shrink-0 w-[200px] xs:w-[200px] sm:w-[200px] md:w-[220px] snap-start",children:n.jsxs("div",{className:"relative",children:[n.jsx(hn,{product:{id:p.productId,name:p.productName,price:p.originalPrice*(1-p.discountPercent/100),imageUrl:p.imageUrl}}),n.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-1.5 xs:px-2 py-0.5 xs:py-1 rounded-full text-[10px] xs:text-xs font-bold",children:[p.discountPercent,"% OFF"]}),n.jsx("div",{className:"mt-1",children:n.jsxs("span",{className:"text-gray-500 line-through text-[10px] xs:text-xs",children:["",p.originalPrice.toLocaleString("en-NG")]})})]})},p.id))})]})})};function rQ(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l=_.useRef(null);_.useEffect(()=>{(async()=>{var p;try{r(!0),i(null);const x=(p=we.currentUser)==null?void 0:p.uid,w=JSON.parse(localStorage.getItem("recentlyViewed")||"[]");let N=[];if(x)try{const v=_e(J,"users",x),j=await Ge(v);if(j.exists()&&j.data().recentlyViewed){const T=j.data().recentlyViewed.slice(0,10).map(async U=>{const R=_e(J,"products",U),O=await Ge(R);return O.exists()&&O.data().status==="approved"?{id:O.id,...O.data()}:null});N=(await Promise.all(T)).filter(U=>U!==null)}}catch(v){console.error("Error fetching user recently viewed:",v),N=[]}if(N.length===0&&w.length>0){const v=w.map(async k=>{const T=_e(J,"products",k),P=await Ge(T);return P.exists()&&P.data().status==="approved"?{id:P.id,...P.data()}:null});N=(await Promise.all(v)).filter(k=>k!==null)}if(N.length===0){const v=Rt(Ue(J,"products"),ht("status","==","approved"),ht("rating",">=",4));N=(await yt(v)).docs.map(k=>({id:k.id,...k.data()})).slice(0,10),console.log("No recently viewed products, showing recommendations instead")}e(N)}catch(x){console.error("Error loading recently viewed products:",{message:x.message,code:x.code}),i("Failed to load recently viewed products.")}finally{r(!1)}})()},[]);const d=()=>{l.current&&l.current.scrollBy({left:-240,behavior:"smooth"})},u=()=>{l.current&&l.current.scrollBy({left:240,behavior:"smooth"})},h=t.length>0?"Recently Viewed":"Recommended For You";return s?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:h}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16 animate-pulse"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 animate-pulse"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 animate-pulse"})]})]}),n.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[...Array(7)].map((f,p)=>n.jsxs("div",{className:"flex-shrink-0 w-48 mr-4",children:[n.jsx("div",{className:"bg-gray-200 rounded-lg h-48 w-full animate-pulse"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mt-2 animate-pulse"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mt-1 animate-pulse"})]},p))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:`bx ${h==="Recently Viewed"?"bx-history":"bx-bulb"} text-blue-600 text-xl mr-2`}),n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:h})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ue,{to:"/products",className:"text-blue-600 text-sm hover:text-blue-800",children:"See All"}),n.jsx("button",{onClick:d,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300","aria-label":"Scroll left",children:n.jsx("i",{className:"bx bx-chevron-left text-xl text-gray-600"})}),n.jsx("button",{onClick:u,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300","aria-label":"Scroll right",children:n.jsx("i",{className:"bx bx-chevron-right text-xl text-gray-600"})})]})]}),n.jsx("div",{ref:l,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory pb-4",children:t.length===0?n.jsx("p",{className:"text-gray-600 p-4",children:"No products to display."}):t.map(f=>n.jsx("div",{className:"flex-shrink-0 w-48 mr-4 snap-start",children:n.jsx(hn,{product:f})},f.id))})]})})}const nQ=()=>{const[t,e]=_.useState(""),[s,r]=_.useState(!1),a=async l=>{if(l.preventDefault(),!t||!t.includes("@")){Ne.error("Please enter a valid email address");return}try{r(!0),await wn(Ue(J,"newsletter_subscribers"),{email:t,subscribedAt:new Date,active:!0}),Ne.success("Thanks for subscribing!"),e(""),localStorage.setItem("newsletter_subscribed","true")}catch(d){console.error("Newsletter subscription error:",d),Ne.error("Failed to subscribe. Please try again.")}finally{r(!1)}},i=localStorage.getItem("newsletter_subscribed")==="true";return n.jsx("div",{className:"bg-gray-100 py-6 sm:py-8 w-full overflow-hidden mb-8 sm:mb-12 lg:mb-16",children:n.jsx("div",{className:"container mx-auto px-4 max-w-7xl",children:n.jsxs("div",{className:"max-w-xl mx-auto text-center",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2",children:"Stay Connected"}),n.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 px-2",children:i?"Thanks for subscribing! You'll receive our best deals and updates.":"Subscribe to our newsletter for exclusive deals and updates"}),!i&&n.jsxs("form",{onSubmit:a,className:"flex flex-col sm:flex-row gap-2 sm:gap-0 max-w-md mx-auto mb-8 sm:mb-12 px-4",children:[n.jsx("input",{type:"email",value:t,onChange:l=>e(l.target.value),placeholder:"Your email address",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md sm:rounded-l-md sm:rounded-r-none focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",disabled:s,required:!0}),n.jsx("button",{type:"submit",className:`${s?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded-md sm:rounded-l-none sm:rounded-r-md transition-colors whitespace-nowrap w-full sm:w-auto`,disabled:s,children:s?n.jsxs("span",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-loader-alt animate-spin mr-2"}),"Subscribing..."]}):"Subscribe"})]}),i&&n.jsx("button",{onClick:()=>{localStorage.removeItem("newsletter_subscribed"),window.location.reload()},className:"text-blue-600 hover:text-blue-800 underline text-sm mt-2",children:"Change your email preferences"})]})})})},aQ=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),iQ={Shoes:"footwear",Fashion:"clothing",Phones:"computers-laptops",Laptops:"computers-laptops",Gaming:"game-console",Kitchen:"home-living"},oQ=t=>`/category/${iQ[t]||aQ(t)}`,lQ=["Shoes","Fashion","Phones","Laptops","Watches","Gaming","Kitchen","Electronics"],cQ={Shoes:"https://banner2.cleanpng.com/20180406/wow/kisspng-shoe-jumpman-sneakers-air-jordan-teal-jordan-5ac6ff9c2fcfe2.7959868915229910041959.jpg",Fashion:"https://pngimg.com/uploads/dress_shirt/dress_shirt_PNG8088.png",Phones:"https://banner2.cleanpng.com/20240415/cv/transparent-apple-logo-person-holding-iphone-11-pro-max661df755177ea1.73458741.webp",Laptops:"https://banner2.cleanpng.com/lnd/20240424/uxz/transparent-rainbow-open-laptop-with-rainbow-gradient-background-image662945f170dc49.58708681.webp",Watches:"https://banner2.cleanpng.com/20180202/lie/av2ldq3r4.webp",Gaming:"https://banner2.cleanpng.com/lnd/20240424/jfa/aav33rgh3.webp",Kitchen:"https://banner2.cleanpng.com/20180809/atv/kisspng-ferm-living-asymmetric-cutting-board-ferm-living-b-5b6c3d78edff15.1714747115338202809749.jpg",Electronics:"https://banner2.cleanpng.com/20180131/jgw/av1z4nree.webp"},fC=["from-red-500/10 to-red-500/5","from-blue-500/10 to-blue-500/5","from-green-500/10 to-green-500/5","from-yellow-500/10 to-yellow-500/5","from-purple-500/10 to-purple-500/5","from-pink-500/10 to-pink-500/5","from-indigo-500/10 to-indigo-500/5","from-orange-500/10 to-orange-500/5"],gC=["hover:bg-red-500/10","hover:bg-blue-500/10","hover:bg-green-500/10","hover:bg-yellow-500/10","hover:bg-purple-500/10","hover:bg-pink-500/10","hover:bg-indigo-500/10","hover:bg-orange-500/10"],dQ=()=>{const[t,e]=_.useState(null);return n.jsxs("div",{className:"container mx-auto px-4 py-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Shop by Category"}),n.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4",children:lQ.map((s,r)=>n.jsxs(ue,{to:oQ(s),className:"text-center group",onMouseEnter:()=>e(r),onMouseLeave:()=>e(null),children:[n.jsxs(St.div,{className:`rounded-lg overflow-hidden relative bg-gradient-to-b ${fC[r%fC.length]} ${gC[r%gC.length]} transition-all duration-300 h-20 w-full flex items-center justify-center group-hover:shadow-md`,initial:{y:0},animate:{y:t===r?-5:0,scale:t===r?1.05:1},transition:{type:"spring",stiffness:300,damping:15},children:[n.jsx(St.img,{src:cQ[s]||"https://via.placeholder.com/48",alt:s,className:"w-12 h-12 object-contain",animate:{scale:t===r?1.1:1,rotate:t===r?5:0},transition:{type:"spring",stiffness:200,damping:10}}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"})]}),n.jsx(St.p,{className:"text-xs md:text-sm text-gray-800 mt-2 font-medium",animate:{fontWeight:t===r?600:500,color:t===r?"#3B82F6":"#1F2937"},children:s})]},s))})]})},uQ=()=>{const[t,e]=_.useState(!1),[s,r]=_.useState([]),[a,i]=_.useState({}),[l,d]=_.useState({}),[u,h]=_.useState("");return _.useEffect(()=>{localStorage.getItem("hasVisitedBefore")||(e(!0),localStorage.setItem("hasVisitedBefore","true"))},[]),_.useEffect(()=>{const f=ws(Ue(J,"categories"),w=>{console.log(" CATEGORIES SNAPSHOT:"),console.log("Categories docs count:",w.docs.length),w.docs.forEach((v,j)=>{console.log(`Category ${j+1}:`,{id:v.id,data:v.data()})});const N=w.docs.map(v=>v.data().name);console.log("Extracted category names:",N),r(N)}),p=ws(Ue(J,"customSubcategories"),w=>{console.log(" CUSTOM SUBCATEGORIES SNAPSHOT:"),console.log("CustomSubcategories docs count:",w.docs.length);const N={};w.forEach((v,j)=>{console.log(`CustomSubcategory ${j+1}:`,{id:v.id,data:v.data(),subcategories:v.data().subcategories||[]}),N[v.id]=v.data().subcategories||[]}),console.log("Final customSubcategories structure:",N),i(N)}),x=ws(Ue(J,"customSubSubcategories"),w=>{console.log(" CUSTOM SUB-SUBCATEGORIES SNAPSHOT:"),console.log("CustomSubSubcategories docs count:",w.docs.length);const N={};w.forEach((v,j)=>{console.log(`CustomSubSubcategory ${j+1}:`,{id:v.id,data:v.data()});const k=v.id;N[k]={},Object.entries(v.data()).forEach(([T,P])=>{console.log(`   ${T}:`,P),N[k][T]=P})}),console.log("Final customSubSubcategories structure:",N),d(N)});return()=>{f(),p(),x()}},[]),_.useEffect(()=>{console.log(" STATE UPDATE - Categories:",s)},[s]),_.useEffect(()=>{console.log(" STATE UPDATE - CustomSubcategories:",a)},[a]),_.useEffect(()=>{console.log(" STATE UPDATE - CustomSubSubcategories:",l)},[l]),n.jsxs("div",{children:[t&&n.jsx("div",{className:"bg-blue-50 p-4 mb-4",children:n.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-blue-800",children:"Welcome to Foremade!"}),n.jsx("p",{className:"text-sm text-blue-600",children:"Discover amazing deals from trusted sellers"})]}),n.jsx("button",{onClick:()=>e(!1),className:"text-blue-600 hover:text-blue-800",children:n.jsx("i",{className:"bx bx-x text-xl"})})]})}),n.jsx(WX,{}),n.jsx(dQ,{}),n.jsx(QX,{}),n.jsx(sQ,{}),n.jsx(ZX,{}),n.jsx(JX,{}),n.jsx(YX,{}),n.jsx(rQ,{}),n.jsx(eQ,{}),n.jsx(HX,{}),n.jsx("div",{className:"my-8 px-2 sm:px-4 lg:px-8",children:n.jsx(D6,{})}),n.jsx(KX,{}),n.jsx(nQ,{}),n.jsx("div",{className:"bg-gray-50 py-6 border-t border-gray-200",children:n.jsx("div",{className:"container mx-auto px-4 max-w-7xl",children:n.jsxs("div",{className:"flex flex-row justify-center items-center gap-4 text-sm text-gray-600",children:[n.jsx(ue,{to:"/privacy-policy",className:"hover:text-blue-600 transition-colors duration-200 underline",children:"Privacy Policy"}),n.jsx("span",{className:"text-gray-400",children:"|"}),n.jsx(ue,{to:"/terms-conditions",className:"hover:text-blue-600 transition-colors duration-200 underline",children:"Terms & Conditions"})]})})})]})},hQ=({products:t=[]})=>{const[e,s]=_.useState(!0);_.useEffect(()=>{if(t.length>0)s(!1);else{const a=setTimeout(()=>s(!1),500);return()=>clearTimeout(a)}},[t]);const r=({count:a})=>n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:Array.from({length:a}).map((i,l)=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 h-[300px] flex flex-col animate-pulse",children:[n.jsx("div",{className:"h-[200px] bg-gray-200 rounded-t-lg"}),n.jsxs("div",{className:"p-3 flex flex-col flex-grow",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded mt-auto"})]})]},l))});return n.jsx("div",{className:"container mx-auto px-4 py-8",children:e?n.jsx(r,{count:8}):t.length===0?n.jsxs("div",{className:"text-center col-span-full py-12",role:"alert","aria-label":"No products found",children:[n.jsx("p",{className:"text-gray-600 text-lg",children:"No products match your filters."}),n.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Try adjusting your search or filters."})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-4",role:"grid","aria-label":"Product list",children:t.map(a=>n.jsx(hn,{product:a},a.id))})})},mQ=({onFilterChange:t})=>{const[e,s]=_.useState([0,1e5]),[r,a]=_.useState([]),[i,l]=_.useState("default"),[d,u]=_.useState(""),[h,f]=_.useState([]),[p,x]=_.useState(!0),[w,N]=_.useState(!1);_.useEffect(()=>{(async()=>{try{x(!0);const I=(await yt(Ue(J,"categories"))).docs.map(C=>({id:C.id,name:C.data().name||"Unnamed Category"}));f(I)}catch(O){console.error("Error fetching categories:",O)}finally{x(!1)}})()},[]);const v=_.useCallback(Vj(R=>{t({priceRange:e,selectedCategories:r,sortOption:i,searchTerm:R})},300),[e,r,i]),j=R=>{const O=R.target.value;u(O),v(O)},k=R=>{const[O,I]=R;O>I||(s(R),t({priceRange:R,selectedCategories:r,sortOption:i,searchTerm:d}))},T=R=>{const O=r.includes(R)?r.filter(I=>I!==R):[...r,R];a(O),t({priceRange:e,selectedCategories:O,sortOption:i,searchTerm:d})},P=R=>{const O=R.target.value;l(O),t({priceRange:e,selectedCategories:r,sortOption:O,searchTerm:d})},U=()=>{s([0,1e5]),a([]),l("default"),u(""),t({priceRange:[0,1e5],selectedCategories:[],sortOption:"default",searchTerm:""})};return n.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm md:sticky md:top-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filters"}),n.jsx("button",{onClick:U,className:"text-sm text-blue-600 hover:text-blue-800 transition","aria-label":"Clear all filters",children:"Clear All"})]}),n.jsx("div",{className:"mb-6",children:n.jsx("input",{type:"text",placeholder:"Search products...",value:d,onChange:j,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm","aria-label":"Search products"})}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price Range: ",e[0].toLocaleString()," - ",e[1].toLocaleString()]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("input",{type:"range",min:"0",max:"100000",value:e[0],onChange:R=>k([parseInt(R.target.value),e[1]]),className:"w-full accent-blue-500","aria-label":"Minimum price"}),n.jsx("input",{type:"range",min:"0",max:"100000",value:e[1],onChange:R=>k([e[0],parseInt(R.target.value)]),className:"w-full accent-blue-500","aria-label":"Maximum price"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Categories"}),n.jsx("button",{className:"md:hidden text-blue-600 text-sm",onClick:()=>N(!w),"aria-label":w?"Collapse categories":"Expand categories",children:w?"Hide":"Show"})]}),n.jsx("div",{className:`text-sm ${w?"block":"hidden md:block"}`,children:p?n.jsxs("div",{className:"animate-pulse space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}):h.length===0?n.jsx("p",{className:"text-gray-500",children:"No categories available"}):h.map(R=>n.jsxs("label",{className:"flex items-center space-x-2 py-1 hover:bg-gray-100 rounded px-2 transition",children:[n.jsx("input",{type:"checkbox",value:R.id,checked:r.includes(R.id),onChange:()=>T(R.id),className:"accent-blue-500","aria-label":`Select ${R.name} category`}),n.jsx("span",{className:"text-gray-700",children:R.name})]},R.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),n.jsxs("select",{value:i,onChange:P,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm","aria-label":"Sort products",children:[n.jsx("option",{value:"default",children:"Default"}),n.jsx("option",{value:"price-low-high",children:"Price: Low to High"}),n.jsx("option",{value:"price-high-low",children:"Price: High to Low"}),n.jsx("option",{value:"alpha-asc",children:"Alphabetical: A-Z"}),n.jsx("option",{value:"alpha-desc",children:"Alphabetical: Z-A"})]})]})]})},fQ=()=>{const[t,e]=_.useState([]),[s,r]=_.useState([]),[a,i]=_.useState(!0),[l,d]=_.useState(null),u=_.useMemo(()=>({"tablet & phones":1,"health & beauty":2,"foremade fashion":3,electronics:4,"baby products":5,"computers & accessories":6,"game & fun":7,"drinks & categories":8,"home & kitchen":9,"smart watches":10,uncategorized:11}),[]);_.useEffect(()=>{(async()=>{try{i(!0);const p=await yt(Ue(J,"products"));console.log("Total products fetched from Firestore:",p.docs.length);const x=p.docs.map(w=>{var k;const N=w.data(),v=N.status||"pending";if(v!=="approved")return console.log(`Product ${w.id} not approved, skipping (status: ${v})`,N),null;let j;return N.imageUrl&&typeof N.imageUrl=="string"&&N.imageUrl.startsWith("https://")?j=N.imageUrl:Array.isArray(N.imageUrls)&&N.imageUrls.length>0&&typeof N.imageUrls[0]=="string"&&N.imageUrls[0].startsWith("https://")?j=N.imageUrls[0]:(j=null,console.warn(`Product ${w.id} has no valid imageUrl or imageUrls`,{id:w.id,name:N.name,imageUrl:N.imageUrl,imageUrls:N.imageUrls})),{id:w.id,name:N.name||"Unknown Product",description:N.description||"",price:N.price||0,stock:N.stock||0,category:N.category||"uncategorized",categoryId:u[(k=N.category)==null?void 0:k.toLowerCase()]||11,colors:N.colors||[],sizes:N.sizes||[],condition:N.condition||"New",imageUrl:j,sellerId:N.sellerId||"",seller:N.seller||{name:N.sellerName||"Unknown Seller",id:N.sellerId||""},rating:N.rating||0,reviews:N.reviews||[],status:v}}).filter(w=>w?w.id?!0:(console.error("Filtered out product with invalid id:",w),!1):!1);console.log("Fetched approved products from Firestore:",x),x.length===0&&(console.warn('No approved products found in Firestore. Check if products have status: "approved".'),d("No approved products available at the moment.")),e(x),r(x)}catch(p){console.error("Error fetching products:",p),d("Failed to load products. Please try again.")}finally{i(!1)}})()},[u]),_.useEffect(()=>{console.log("Filtered products passed to ProductList:",s)},[s]);const h=_.useCallback(({priceRange:f,selectedCategories:p,sortOption:x,searchTerm:w})=>{let N=[...t].filter(v=>v!==null);N=N.filter(v=>{const j=v.price>=f[0]&&v.price<=f[1],k=p.length===0||p.includes(v.categoryId),T=v.name.toLowerCase().includes(w.toLowerCase());return j&&k&&T}),x==="price-low-high"?N.sort((v,j)=>v.price-j.price):x==="price-high-low"?N.sort((v,j)=>j.price-v.price):x==="alpha-asc"?N.sort((v,j)=>v.name.localeCompare(j.name)):x==="alpha-desc"&&N.sort((v,j)=>j.name.localeCompare(v.name)),console.log("Updated filtered products:",N),r(N)},[t]);return l?n.jsx("div",{className:"container mx-auto p-4",children:n.jsx("p",{className:"text-red-600 text-center",children:l})}):n.jsxs("div",{className:"mb-10 rounded-lg mx-auto p-3",children:[n.jsx("div",{className:"flex-col",children:n.jsx("h2",{className:"text-2xl font-bold mb-4 m-4",children:"Shop All Products"})}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"w-full rounded-lg border md:w-1/4",children:n.jsx(mQ,{onFilterChange:h})}),n.jsx("div",{className:"w-full rounded-lg border",children:n.jsx(hQ,{products:s,loading:a})})]})]})},uh=t=>{switch(t.code){case"auth/invalid-credential":return"Invalid email or password.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/user-not-found":return"No account found with this email. Contact your admin.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/user-disabled":return"This account has been disabled. Contact your admin.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";default:return"An unexpected error occurred. Please try again."}};function gQ(){const[t,e]=_.useState(""),[s,r]=_.useState(""),[a,i]=_.useState(!1),[l,d]=_.useState(""),[u,h]=_.useState(""),[f,p]=_.useState(""),[x,w]=_.useState(!1),[N,v]=_.useState(!1),[j,k]=_.useState(!1),T=Ns(),{state:P}=gr(),U=E=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E);_.useEffect(()=>{const E=localStorage.getItem("socialEmail")||(P==null?void 0:P.email)||"";E&&(e(E),h("Use Google Sign-In for this account."))},[P]),_.useEffect(()=>{hP(we).then(E=>{if(E){const D=E.user;R(D)}}).catch(E=>{d(uh(E)),v(!1),k(!1)})},[]);const R=async E=>{try{const D=_e(J,"users",E.uid),V=await Ge(D);if(V.exists()){const B=V.data();localStorage.setItem("userData",JSON.stringify(B)),localStorage.removeItem("socialEmail");const M=B.name.split(" ")[0];p(`Welcome back, ${M}!`),setTimeout(()=>{v(!1),k(!1),T("/profile")},2e3)}else d("No account found. Please sign up.")}catch(D){d(uh(D)),v(!1),k(!1)}},O=async E=>{E.preventDefault(),d(""),h(""),p(""),w(!0);let D=!1;const V=t.trim(),B=s.trim();if(V?U(V)||(d("Please enter a valid email address."),D=!0):(d("Email is required."),D=!0),!B&&!u.includes("Google Sign-In")&&(h("Password is required."),D=!0),D){w(!1);return}try{await k0(we,E0);const Y=(await U8(we,V,B)).user,Q=_e(J,"users",Y.uid),H=await Ge(Q);if(H.exists()){const W=H.data();localStorage.setItem("userData",JSON.stringify(W)),localStorage.removeItem("socialEmail");const de=W.name.split(" ")[0];p(`Welcome, ${de}!`),setTimeout(()=>{w(!1),T("/profile")},2e3)}else d("No account found. Contact your admin."),w(!1)}catch(M){w(!1);const Y=uh(M);Y.includes("email")||Y.includes("account")||Y.includes("valid")?d(Y):h(Y)}},I=async()=>{d(""),h(""),p(""),v(!0);const E=new Ba;E.setCustomParameters({prompt:"select_account"});try{await Up(we,E)}catch(D){v(!1),d(uh(D))}},C=async()=>{d(""),h(""),p(""),k(!0);const E=new za;E.setCustomParameters({display:"popup"});try{await Up(we,E)}catch(D){k(!1),d(uh(D))}};return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"w-full h-screen flex",children:[n.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://images.pexels.com/photos/7621356/pexels-photo-7621356.jpeg?auto=compress&cs=tinysrgb&w=600')"},children:n.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 flex flex-col justify-center items-center text-white p-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-4 flex items-center",children:["Welcome to ",n.jsx("img",{src:nc,alt:"Logo",className:"h-20 ml-2"})]}),n.jsx("p",{className:"text-lg text-center",children:"Where quality meets NEEDS!"})]})}),n.jsxs("div",{className:"w-full md:w-1/2 h-full p-9 flex flex-col justify-center bg-white",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Sign In"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Dont have an account?"," ",n.jsx(ue,{to:"/register",className:"text-blue-600 hover:underline",children:"Sign Up"})]}),n.jsxs("form",{onSubmit:O,className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"email",id:"email",value:t,onChange:E=>e(E.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${l?"border-red-500":f?"border-green-500":"border-gray-300"}`,autoComplete:"email",required:!0}),n.jsx("label",{htmlFor:"email",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${t?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Email"}),l&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:l})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:a?"text":"password",id:"password",value:s,onChange:E=>r(E.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${u?"border-red-500":f?"border-green-500":"border-gray-300"}`,autoComplete:"current-password",required:!0,disabled:u.includes("Google Sign-In")}),n.jsx("label",{htmlFor:"password",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${s||u.includes("Google Sign-In")?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Password"}),n.jsx("span",{className:"absolute right-3 top-3 text-gray-500 cursor-pointer",onClick:()=>i(!a),style:{display:u.includes("Google Sign-In")?"none":"block"},children:n.jsx("i",{className:`bx ${a?"bx-hide":"bx-show"} text-xl`})}),u&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:u})]}),f&&n.jsx("p",{className:"text-green-600 text-xs mt-1",children:f}),n.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",disabled:x||u.includes("Google Sign-In"),children:x?"Logging in...":"Sign In"})]}),n.jsx("p",{className:"text-gray-600 mt-2",children:n.jsx(ue,{to:"/recover-password",className:"hover:underline hover:text-blue-700",children:"Forgot Password?"})}),n.jsxs("div",{className:"mt-6 text-center",children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"Or continue with"}),n.jsxs("div",{className:"flex justify-center space-x-4",children:[n.jsxs("button",{onClick:I,className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:N,children:[n.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5 mr-2"}),N?"Processing...":"Google"]}),n.jsxs("button",{onClick:C,className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:j,children:[n.jsx("img",{src:"https://www.facebook.com/favicon.ico",alt:"Facebook",className:"w-5 h-5 mr-2"}),j?"Processing...":"Facebook"]})]})]})]})]})})}const hh=t=>{switch(t.code){case"auth/network-request-failed":return"Check your network.";case"auth/email-already-in-use":return"Email already in use. Log in instead.";case"auth/weak-password":return"Password too weak.";case"auth/invalid-email":return"Invalid email.";case"auth/popup-closed-by-user":return"Sign-in cancelled.";case"auth/cancelled-popup-request":return"Sign-in popup closed.";case"auth/account-exists-with-different-credential":return"Account exists. Try logging in.";default:return"Unexpected error."}},pC=(t,e)=>{var d,u;const s=[t,e].filter(h=>h==null?void 0:h.trim()),r=((d=s[0])==null?void 0:d.slice(0,4).toLowerCase())||"user",a=((u=s[1])==null?void 0:u.slice(0,3).toLowerCase())||"",i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return(r+a).replace(/[^a-z0-9]/g,"")+i};function pQ(){const[t,e]=_.useState(""),[s,r]=_.useState(""),[a,i]=_.useState(""),[l,d]=_.useState(""),[u,h]=_.useState(""),[f,p]=_.useState(!1),[x,w]=_.useState(""),[N,v]=_.useState(""),[j,k]=_.useState(""),[T,P]=_.useState(""),[U,R]=_.useState(""),[O,I]=_.useState(""),[C,E]=_.useState(!1),[D,V]=_.useState(!1),[B,M]=_.useState(!1),[Y,Q]=_.useState(0),[H,W]=_.useState(null),de=Ns();_.useEffect(()=>{const me=async(Ce=1)=>{const ve="recaptcha-script";if(document.getElementById(ve))return;const Z=document.createElement("script");return Z.id=ve,Z.src="https://www.google.com/recaptcha/api.js?render=6LeLP2ArAAAAAJ3ZSF_LlJM_iEgHi2JExg2pupPi",Z.async=!0,Z.onerror=()=>{console.error("reCAPTCHA script failed"),Ce<3?setTimeout(()=>me(Ce+1),1e3):k("Failed to load reCAPTCHA. Check network.")},document.body.appendChild(Z),Z.onload=()=>{console.log("reCAPTCHA script loaded"),window.grecaptcha.ready(()=>{console.log("reCAPTCHA ready"),window.grecaptcha.execute("6LeLP2ArAAAAAJ3ZSF_LlJM_iEgHi2JExg2pupPi",{action:"signup"}).then(Se=>{console.log("reCAPTCHA token:",Se),W(Se)}).catch(Se=>{console.error("reCAPTCHA execute error:",Se),Ce<3?setTimeout(()=>me(Ce+1),1e3):k("reCAPTCHA token failed. Try again.")})})},()=>{const Se=document.getElementById(ve);Se&&document.body.removeChild(Se)}};me()},[]),_.useEffect(()=>{hP(we).then(me=>{me&&X(me.user)}).catch(me=>{k(hh(me)),V(!1),M(!1)})},[]);const ge=me=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me),z=me=>{const Ce=me.length>=6,ve=/[a-zA-Z]/.test(me),Z=/[0-9]/.test(me),Se=/[_@!+=#$%^&*()[\]{}|;:,.<>?~`/-]/.test(me);return{isValid:Ce&&ve&&Z&&Se,errors:[!Ce&&"Password needs 6+ chars.",!ve&&"Password needs a letter.",!Z&&"Password needs a number.",!Se&&"Password needs a special char (e.g., _, @, !)."].filter(Boolean)}},G=me=>me.trim()?/^\+\d{7,15}$/.test(me):!0,X=async me=>{try{const Ce=me.displayName||me.email.split("@")[0],[ve,...Z]=Ce.split(" "),Se=Z.join(" "),Te=pC(ve,Se),te=_e(J,"users",me.uid),Oe=await Ge(te);let Ae;Oe.exists()?Ae=Oe.data():(Ae={email:me.email,name:`${ve} ${Se}`,username:Te,address:"",phoneNumber:"",createdAt:new Date().toISOString(),uid:me.uid,profileImage:me.photoURL||null},await ts(te,Ae),await wn(Ue(J,"notifications"),{type:"user_signup",message:`New user signed up: ${me.email}`,createdAt:new Date,details:{user_id:me.uid,email:me.email}}),await _v(me,{displayName:Te}),me.emailVerified||(await ck(me),console.log("Verification email sent:",me.email))),localStorage.setItem("userData",JSON.stringify(Ae)),localStorage.setItem("socialEmail",me.email);const qe=ve||Ae.name.split(" ")[0];I(`Welcome, ${qe}! Please log in with Google.`),setTimeout(()=>{V(!1),M(!1),de("/login",{state:{email:me.email}})},3e3)}catch(Ce){console.error("Social sign-in error:",Ce),k(hh(Ce)),V(!1),M(!1)}},re=async me=>{var ve,Z;if(me.preventDefault(),w(""),v(""),k(""),P(""),R(""),I(""),E(!0),Y>=9){k("Too many attempts. Try later."),E(!1);return}let Ce=!1;if(t.trim()||(w("First name required."),Ce=!0),s.trim()||(v("Last name required."),Ce=!0),ge(a)||(k("Invalid email."),Ce=!0),!l)P("Password required."),Ce=!0;else{const Se=z(l);Se.isValid||(P(Se.errors[0]),Ce=!0)}if(u&&!G(u)&&(R("Invalid phone (e.g., +1234567890)."),Ce=!0),H||(k("reCAPTCHA failed. Try again."),Ce=!0),Ce){E(!1),Q(Se=>Se+1);return}try{console.log("Sending reCAPTCHA token:",H);const Se=await Ut.post("https://foremade-backend.onrender.com/verify-recaptcha",{token:H},{headers:{"Content-Type":"application/json"}});if(console.log("reCAPTCHA response:",Se.data),!Se.data.success||Se.data.score<.5){k("reCAPTCHA failed. Are you a bot?"),E(!1),Q(qe=>qe+1);return}await k0(we,E0);const te=(await eP(we,a,l)).user,Oe=pC(t,s);await _v(te,{displayName:Oe}),await ck(te),console.log("Verification email sent:",te.email);const Ae={email:te.email,name:`${t} ${s}`,username:Oe,address:"",phoneNumber:u.trim()||"",createdAt:new Date().toISOString(),uid:te.uid,profileImage:null};await ts(_e(J,"users",te.uid),Ae),await wn(Ue(J,"notifications"),{type:"user_signup",message:`New user signed up: ${te.email}`,createdAt:new Date,details:{user_id:te.uid,email:te.email}}),localStorage.setItem("userData",JSON.stringify(Ae)),I(`Welcome, ${t}! Verify your email at ${a}.`),Q(0),setTimeout(()=>{E(!1),de("/login")},7e3)}catch(Se){console.error("Registration error:",Se),E(!1);const Te=((Z=(ve=Se.response)==null?void 0:ve.data)==null?void 0:Z.error)||hh(Se);Te.includes("email")?k(Te):Te.includes("password")?P(Te):(w(Te),v(Te)),Q(te=>te+1)}},xe=async()=>{w(""),v(""),k(""),P(""),R(""),I(""),V(!0);const me=new Ba;me.setCustomParameters({prompt:"select_account"});try{await Up(we,me)}catch(Ce){V(!1),k(hh(Ce))}},ze=async()=>{w(""),v(""),k(""),P(""),R(""),I(""),M(!0);const me=new za;me.setCustomParameters({display:"popup"});try{await Up(we,me)}catch(Ce){M(!1),k(hh(Ce))}};return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"w-full h-screen flex",children:[n.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://i.pinimg.com/736x/f2/8c/a4/f28ca4118a46e68b6871946e65ab5665.jpg')"},children:n.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 flex flex-col justify-center items-center text-white p-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-4 flex items-center",children:["Join ",n.jsx("img",{src:nc,alt:"Formade logo",className:"h-20 ml-2"})]}),n.jsx("p",{className:"text-lg text-center",children:"Where quality meets NEEDS!"})]})}),n.jsxs("div",{className:"w-full md:w-1/2 h-full p-9 flex flex-col justify-center bg-white",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Sign Up"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Already have an account? ",n.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"Sign In"})]}),n.jsxs("form",{onSubmit:re,className:"space-y-4",children:[n.jsxs("div",{className:"flex space-x-4 mb-4",children:[n.jsxs("div",{className:"relative w-1/2",children:[n.jsx("input",{type:"text",id:"firstName",value:t,onChange:me=>e(me.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${x?"border-red-500":O?"border-green-500":"border-gray-300"}`,autoComplete:"given-name",required:!0}),n.jsx("label",{htmlFor:"firstName",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${t?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"First Name"}),x&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:x})]}),n.jsxs("div",{className:"relative w-1/2",children:[n.jsx("input",{type:"text",id:"lastName",value:s,onChange:me=>r(me.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${N?"border-red-500":O?"border-green-500":"border-gray-300"}`,autoComplete:"family-name",required:!0}),n.jsx("label",{htmlFor:"lastName",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${s?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Last Name"}),N&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:N})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"email",id:"email",value:a,onChange:me=>i(me.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${j?"border-red-500":O?"border-green-500":"border-gray-300"}`,autoComplete:"email",required:!0}),n.jsx("label",{htmlFor:"email",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${a?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Email"}),j&&n.jsxs("p",{className:"text-red-600 text-xs mt-1",children:[j," ",j.includes("already in use")&&n.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"Click here to login"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"tel",id:"phoneNumber",value:u,onChange:me=>h(me.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${U?"border-red-500":O?"border-green-500":"border-gray-300"}`,autoComplete:"tel"}),n.jsx("label",{htmlFor:"phoneNumber",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${u?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Phone Number"}),U&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:U})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:f?"text":"password",id:"password",value:l,onChange:me=>d(me.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${T?"border-red-500":O?"border-green-500":"border-gray-300"}`,autoComplete:"new-password",required:!0}),n.jsx("label",{htmlFor:"password",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${l?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Password"}),n.jsx("span",{className:"absolute right-3 top-3 text-gray-500 cursor-pointer",onClick:()=>p(!f),children:n.jsx("i",{className:`bx ${f?"bx-hide":"bx-show"} text-xl`})}),T&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:T})]}),O&&n.jsx("p",{className:"text-green-600 text-xs mb-4",children:O}),n.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",disabled:C,children:C?"Registering...":"Sign Up"})]}),n.jsxs("div",{className:"mt-6 text-center",children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"Or continue with"}),n.jsxs("div",{className:"flex justify-center space-x-4",children:[n.jsxs("button",{onClick:xe,className:"bg-white border border-gray-300 p-3 rounded-lg flex items-center justify-center hover:bg-gray-100 transition duration-200",disabled:D,children:[n.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5 mr-2"}),D?"Processing...":"Google"]}),n.jsxs("button",{onClick:ze,className:"bg-white border border-gray-300 p-3 rounded-lg flex items-center justify-center hover:bg-gray-100 transition duration-200",disabled:B,children:[n.jsx("img",{src:"https://www.facebook.com/favicon.ico",alt:"Facebook",className:"w-5 h-5 mr-2"}),B?"Processing...":"Facebook"]})]}),n.jsxs("p",{className:"text-gray-500 text-xs mt-4",children:["This site is protected by reCAPTCHA and the Google"," ",n.jsx("a",{href:"https://policies.google.com/privacy",className:"underline",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})," ","and"," ",n.jsx("a",{href:"https://policies.google.com/terms",className:"underline",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})," ","apply."]})]})]})]})})}const xQ=()=>{const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l=["tablet & phones","health & beauty","foremade fashion","electronics","baby products","computers & accessories","game & fun","drinks & categories","home & kitchen","smart watches"];return _.useEffect(()=>{(async()=>{r(!0),i(null);try{const h=l.sort(()=>.5-Math.random()).slice(0,Math.floor(Math.random()*3)+3).map(async w=>{const N=Rt(Ue(J,"products"),ht("category","==",w),sz(4));return(await yt(N)).docs.map(j=>{var P;const k=j.data();let T=k.imageUrl&&typeof k.imageUrl=="string"&&k.imageUrl.startsWith("https://")?k.imageUrl:Array.isArray(k.imageUrls)&&k.imageUrls[0]&&typeof k.imageUrls[0]=="string"&&k.imageUrls[0].startsWith("https://")?k.imageUrls[0]:"/images/placeholder.jpg";return{id:j.id,name:k.name||"Unnamed Product",price:k.price||0,stock:k.stock||0,category:k.category||"uncategorized",imageUrl:T,rating:k.rating||Math.random()*2+3,colors:k.colors||[],sizes:((P=k.category)==null?void 0:P.trim().toLowerCase())==="foremade fashion"?k.sizes||[]:[],condition:k.condition||"New",sellerId:k.sellerId||""}})}),x=(await Promise.all(h)).flat().filter(w=>w.imageUrl&&typeof w.imageUrl=="string"&&(w.imageUrl.startsWith("https://")||w.imageUrl==="/images/placeholder.jpg")?!0:(console.warn("Filtered out product with invalid imageUrl:",{id:w.id,name:w.name,imageUrl:w.imageUrl}),!1)).sort(()=>.5-Math.random()).slice(0,12);console.log("Fetched and normalized products:",x),e(x),x.length===0&&i("No products available at the moment.")}catch(u){console.error("Error fetching products:",{message:u.message,code:u.code}),i("Failed to load products. Please try again."),Ne.error("Failed to load products")}finally{r(!1)}})()},[]),s?n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})}):a?n.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[n.jsx("i",{className:"bx bx-error-circle text-8xl text-red-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-6 text-center",children:a}),n.jsxs(ue,{to:"/",className:"mt-8 inline-flex items-center text-blue-600 hover:underline text-lg",children:[n.jsx("i",{className:"bx bx-home-alt mr-2"}),"Back to Home"]})]}):n.jsxs("div",{className:"container mx-auto px-4 py-12",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Discover More Products"}),n.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Shop sell, smile, check out these great products!"}),t.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh]",children:[n.jsx("i",{className:"bx bx-cart text-8xl text-gray-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-6 text-center",children:"No Products Available"}),n.jsx("p",{className:"text-gray-600 mt-2 text-center",children:"Our catalog is empty. Come back soon!"}),n.jsxs(ue,{to:"/",className:"mt-8 inline-flex items-center text-blue-600 hover:underline text-lg",children:[n.jsx("i",{className:"bx bx-home-alt mr-2"}),"Back to Home"]})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(d=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm transition-shadow duration-300",children:[n.jsx(ue,{to:`/product/${d.id}`,children:n.jsx("img",{src:d.imageUrl||"/images/placeholder.jpg",alt:d.name||"Product",className:"w-full h-48 object-cover rounded-t-lg",onError:u=>{u.target.src!=="/images/placeholder.jpg"&&(console.warn("Image load error, falling back to placeholder:",{productId:d.id,imageUrl:d.imageUrl,name:d.name}),u.target.src="/images/placeholder.jpg")},onLoad:()=>{console.log("Product image loaded:",{productId:d.id,imageUrl:d.imageUrl,name:d.name})}})}),n.jsxs("div",{className:"p-4",children:[n.jsx(ue,{to:`/product/${d.id}`,children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate hover:text-blue-600",children:d.name})}),n.jsxs("p",{className:"text-gray-600 mt-2 text-xl font-bold",children:["",d.price.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsx("div",{className:"mt-4",children:n.jsx(I6,{productId:d.id,stock:d.stock,className:"w-full bg-slate-600 text-black py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center"})})]})]},d.id))})]})},yQ=()=>{var Ze,ut;const{id:t}=lc(),e=Ns();gr();const[s,r]=_.useState(null),[a,i]=_.useState(""),[l,d]=_.useState([]),[u,h]=_.useState([]),[f,p]=_.useState(!0),[x,w]=_.useState(1),[N,v]=_.useState([]),[j,k]=_.useState(!1),[T,P]=_.useState(0),[U,R]=_.useState(""),[O,I]=_.useState(!1),[C,E]=_.useState(!1),[D,V]=_.useState(""),[B,M]=_.useState(0),[Y,Q]=_.useState("right"),[H,W]=_.useState(!1),[de,ge]=_.useState(!1),[z,G]=_.useState(0),[X,re]=_.useState(""),[xe,ze]=_.useState(""),{alerts:me,addAlert:Ce,removeAlert:ve}=Nm(),Z={red:"#ff0000",blue:"#0000ff",brown:"#8b4513",green:"#008000",black:"#000000",gold:"#ff9a1d",white:"#ffffff",yellow:"#ffff00",gray:"#808080",purple:"#800080",pink:"#ffc1cc",orange:"#ffa500",silver:"#e2f2ec"},Se={new:"bg-blue-100 text-blue-700 border-blue-200",sale:"bg-red-100 text-red-700 border-red-200",trending:"bg-yellow-100 text-yellow-700 border-yellow-200",default:"bg-gray-100 text-gray-700 border-gray-200"},Te=["foremade fashion","clothing","shoes","accessories"],te=(je,He,mt=0)=>{const Dt=mt>0?je*mt/100:0;return(je-Dt)*(1+.075+.02+.05)*He},Oe=je=>{if(!je||typeof je!="string")return"";const mt=je.replace(/<[^>]+>/g,"").split(`
`);let Dt=!1,Fe=mt.map(dt=>{if(dt=dt.trim(),!dt)return null;if(dt=dt.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),dt=dt.replace(/__(.*?)__/g,"<strong>$1</strong>"),dt.startsWith("- ")||dt.startsWith("* ")){const Nt=dt.substring(2).trim();return Dt?`<li class="ml-4 list-disc">${Nt}</li>`:(Dt=!0,`<li class="ml-4 list-disc">${Nt}</li>`)}return Dt?(Dt=!1,`</ul><p class="mb-2">${dt}</p>`):`<p class="mb-2">${dt}</p>`}).filter(Boolean).join("");return Dt&&(Fe+="</ul>"),Fe},Ae=_.useCallback(async()=>{if(!we.currentUser){v([]);return}try{const je=Rt(Ue(J,"favorites"),ht("userId","==",we.currentUser.uid)),mt=(await yt(je)).docs.map(Dt=>Dt.data().productId);v(mt)}catch(je){console.error("Error fetching favorites:",je),Ce("Failed to load favorites.","error",3e3)}},[Ce]);_.useEffect(()=>{const je=we.onAuthStateChanged(He=>{He?Ae():v([])});return()=>je()},[Ae]),_.useEffect(()=>{if(window.scrollTo(0,0),p(!0),!t||typeof t!="string"||t.trim()===""){p(!1),Ce("Invalid product ID","error",3e3),e("/products");return}return(async()=>{var He;try{if(console.log("Fetching product ID:",t),!t||typeof t!="string"||t.trim()===""||t.includes("/"))throw new Error("Invalid product ID");const mt=_e(J,"products",t),Dt=await Ge(mt);if(!Dt.exists())throw new Error("Product not found");const Fe=Dt.data();if(Fe.status!=="approved")throw new Error("Product not approved");let dt="";if(Fe.sellerId){const ae=_e(J,"users",Fe.sellerId),ee=await Ge(ae);if(ee.exists()){const ye=ee.data();dt=ye.location?`${ye.location.city||""}, ${ye.location.state||""}, ${ye.location.country||""}`.trim().replace(/, ,/g,","):""}}i(dt);let Nt=Array.isArray(Fe.imageUrls)?Fe.imageUrls.filter(ae=>typeof ae=="string"&&ae.startsWith("https://res.cloudinary.com/")):Fe.imageUrl&&typeof Fe.imageUrl=="string"&&Fe.imageUrl.startsWith("https://res.cloudinary.com/")?[Fe.imageUrl]:["https://via.placeholder.com/600"],Kt=Array.isArray(Fe.videoUrls)?Fe.videoUrls.filter(ae=>typeof ae=="string"&&ae.startsWith("https://res.cloudinary.com/")):[];Nt.length===0&&(Nt=["https://via.placeholder.com/600"]);const Qs=((He=Fe.category)==null?void 0:He.trim().toLowerCase())||"uncategorized",Er=Te.includes(Qs),ks=(await yt(Ue(J,`products/${t}/reviews`))).docs.map(ae=>{const ee=ae.data();let ye=ee.userName||"Anonymous";return typeof ye=="object"&&ye.name&&(ye=ye.name),{id:ae.id,...ee,userName:ye}}),ns={id:Dt.id,name:Fe.name||"Unnamed Product",description:Fe.description||"",price:Fe.price||0,stock:Fe.stock||0,category:Qs,colors:Fe.colors||[],sizes:Er?Fe.sizes||[]:[],condition:Fe.condition||"New",imageUrls:Nt,videoUrls:Kt,imageUrl:Nt[0],tags:Fe.tags||[],seller:Fe.seller||{name:"Unknown Seller",id:Fe.sellerId||""},sellerId:Fe.sellerId||"",rating:Fe.rating||Math.random()*2+3,reviews:ks,status:Fe.status||"pending"},as=(await yt(Ue(J,"dailyDeals"))).docs.map(ae=>({id:ae.id,...ae.data()})).find(ae=>ae.productId===t&&new Date(ae.endDate)>new Date&&new Date(ae.startDate)<=new Date);as?(ge(!0),G((as.discount*100).toFixed(2))):(ge(!1),G(0)),console.log("Fetched product:",ns),r(ns),V(ns.imageUrls[0]),M(0),ns.colors.length>0&&re(ns.colors[0]),ns.sizes.length>0&&ze(ns.sizes[0]),(()=>{const ae=JSON.parse(localStorage.getItem("recentSearches")||"[]"),ye=[{id:ns.id,name:ns.name,imageUrl:ns.imageUrl,price:ns.price||0,category:ns.category,status:ns.status},...ae.filter(Ee=>Ee.id!==t)].slice(0,5);localStorage.setItem("recentSearches",JSON.stringify(ye))})();const Ps=Rt(Ue(J,"products"),ht("category","==",ns.category)),xr=(await yt(Ps)).docs.map(ae=>{var tt;const ee=ae.data();if(ee.status!=="approved")return null;let ye=ee.imageUrl&&typeof ee.imageUrl=="string"&&ee.imageUrl.startsWith("https://res.cloudinary.com/")?ee.imageUrl:Array.isArray(ee.imageUrls)&&ee.imageUrls[0]&&typeof ee.imageUrls[0]=="string"&&ee.imageUrls[0].startsWith("https://res.cloudinary.com/")?ee.imageUrls[0]:"https://via.placeholder.com/600";if(ae.id===t)return null;const Ee=((tt=ee.category)==null?void 0:tt.trim().toLowerCase())||"uncategorized",Ke=Te.includes(Ee);return{id:ae.id,name:ee.name||"Unnamed Product",price:ee.price||0,stock:ee.stock||0,category:Ee,colors:ee.colors||[],sizes:Ke?ee.sizes||[]:[],condition:ee.condition||"New",imageUrl:ye,tags:ee.tags||[],seller:ee.seller||{name:"Unknown Seller",id:ee.sellerId||""},rating:ee.rating||Math.random()*2+3,status:ee.status||"pending"}}).filter(ae=>ae&&ae.imageUrl);d(xr.slice(0,4))}catch(mt){console.error("Error loading product:",mt),r(null),d([]),Ce(mt.message||"Failed to load product.","error",3e3),(mt.message.includes("Product not found")||mt.message.includes("Invalid product ID")||mt.message.includes("Product not approved"))&&setTimeout(()=>{e("/products")},2e3)}finally{p(!1)}})(),()=>{p(!1)}},[t,e]),_.useEffect(()=>{try{const He=JSON.parse(localStorage.getItem("recentSearches")||"[]").filter(mt=>mt&&mt.id&&mt.name).map(mt=>({...mt,price:typeof mt.price=="number"&&!isNaN(mt.price)?mt.price:0}));h(He)}catch(je){console.error("Error loading recent searches:",je),h([])}},[]),_.useEffect(()=>{if(!s||s.imageUrls.length<=1||H)return;const je=setInterval(()=>{M(He=>{const mt=(He+1)%s.imageUrls.length;return Q("right"),V(s.imageUrls[mt]),W(!1),mt})},5e3);return()=>clearInterval(je)},[s,H]);const qe=async()=>{var je;if(s)try{if(x>s.stock){Ce(`Cannot add more than ${s.stock} units of ${s.name}`,"error",3e3),w(s.stock>0?s.stock:1);return}await WI(s.id,x,(je=we.currentUser)==null?void 0:je.uid),Ce(`${s.name} added to cart!`,"success",3e3),w(1)}catch(He){console.error("Error adding to cart:",He),Ce("Failed to add to cart","error",3e3)}},Ve=async()=>{if(!s){Ce("No product selected","error",3e3);return}if(!we.currentUser){Ce("Please log in to manage favorites","error",3e3);return}try{const je=Ue(J,"favorites"),He=Rt(je,ht("userId","==",we.currentUser.uid),ht("productId","==",s.id)),mt=await yt(He);if(mt.empty)await wn(je,{userId:we.currentUser.uid,productId:s.id,createdAt:ha()}),v(Dt=>[...Dt,s.id]),Ce("Added to favorites!","success",3e3);else{for(const Dt of mt.docs)Dt.data().userId===we.currentUser.uid&&await nn(Dt.ref);v(Dt=>Dt.filter(Fe=>Fe!==s.id)),Ce("Removed from favorites","success",3e3)}}catch(je){console.error("Error toggling favorite:",je),Ce("Failed to update favorites.","error",3e3)}},Xe=async je=>{if(je.preventDefault(),!we.currentUser){Ce("Please log in to submit a review","error",3e3);return}if(T<1||T>5){Ce("Please select a valid rating (1-5)","error",3e3);return}if(!U.trim()){Ce("Please enter a review comment","error",3e3);return}try{let He;try{const Fe=localStorage.getItem("userData");He=Fe?JSON.parse(Fe).name||"Anonymous":we.currentUser.displayName||"Anonymous"}catch{He=we.currentUser.displayName||"Anonymous"}await wn(Ue(J,`products/${t}/reviews`),{userId:we.currentUser.uid,userName:He,rating:T,comment:U,date:ha()}),Ce("Review submitted successfully!","success",3e3),P(0),R(""),E(!1);const Dt=(await yt(Ue(J,`products/${t}/reviews`))).docs.map(Fe=>{const dt=Fe.data();let Nt=dt.userName||"Anonymous";return typeof Nt=="object"&&Nt.name&&(Nt=Nt.name),{id:Fe.id,...dt,userName:Nt}});r(Fe=>({...Fe,reviews:Dt}))}catch(He){console.error("Error submitting review:",He),Ce("Failed to submit review","error",3e3)}},Et=(je,He)=>{typeof je=="string"&&(je.startsWith("https://res.cloudinary.com/")||je.includes(".mp4"))&&(Q(He>B?"right":"left"),V(je),M(He),W(je.includes(".mp4")))};if(f)return n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx(P6,{type:"productDetail",count:1}),n.jsx(Nd,{alerts:me,removeAlert:ve})]});if(!s)return n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600",children:"Product not found or not approved."}),n.jsx(ue,{to:"/products",className:"text-blue-600 hover:underline",children:"Back to Products"}),n.jsx(Nd,{alerts:me,removeAlert:ve})]});const Qe=150,nt=5,It=s.description.length>Qe?`${s.description.substring(0,Qe)}...`:s.description,lt=s.description.length>Qe,xt=O?s.reviews:(Ze=s.reviews)==null?void 0:Ze.slice(0,nt),ct=s.imageUrls,it=te(s.price,x,de?z:0),Je=te(s.price,x,0),Ye=s.reviews&&s.reviews.length>0?(s.reviews.reduce((je,He)=>je+He.rating,0)/s.reviews.length).toFixed(1):s.rating.toFixed(1);return n.jsxs("div",{className:"mb-[140px] container mx-auto px-4 py-6 md:py-8 relative",children:[n.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
          @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          .slide-in-right { animation: slideInRight 0.3s ease-out; }
          .slide-in-left { animation: slideInLeft 0.3s ease-out; }
          .main-media-container {
            position: relative;
            width: 100%;
            padding-top: 100%;
            overflow: hidden;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          }
          .main-media-container img, .main-media-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
          }
          .main-media-container:hover img, .main-media-container:hover video {
            transform: scale(1.05);
          }
          .thumbnail {
            transition: all 0.2s ease;
          }
          .thumbnail:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
          }
          .sticky-cart {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 1rem;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
            z-index: 50;
          }
          .formatted-description strong {
            font-weight: 600;
          }
          .formatted-description ul {
            list-style: disc;
            margin-left: 1.5rem;
            margin-bottom: 0.5rem;
          }
          .formatted-description li {
            margin-bottom: 0.25rem;
          }
          .product-info-card {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
          }
          .product-info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
          }
          .price-section {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 1px solid #93c5fd;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
          }
          .selection-option {
            transition: all 0.2s ease;
            cursor: pointer;
          }
          .selection-option:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
          }
          .selection-option.selected {
            border-color: #3b82f6;
            background-color: #dbeafe;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
          }
          .info-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            padding: 0.375rem 0.75rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
          }
          .info-badge:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          }
          .quantity-controls {
            display: flex;
            align-items: center;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            overflow: hidden;
            background: white;
            max-width: 120px;
          }
          .quantity-controls button {
            background: #f9fafb;
            border: none;
            padding: 0.5rem 0.75rem;
            transition: all 0.2s ease;
            cursor: pointer;
          }
          .quantity-controls button:hover {
            background: #e5e7eb;
          }
          .quantity-controls input {
            border: none;
            text-align: center;
            width: 3rem;
            padding: 0.5rem;
            background: white;
          }
          .quantity-controls input:focus {
            outline: none;
            box-shadow: inset 0 0 0 2px #3b82f6;
          }
        `}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"lg:col-span-3",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fadeIn",children:[n.jsxs("div",{children:[n.jsx("div",{className:"relative main-media-container",children:D.includes(".mp4")?n.jsx("video",{src:D,controls:!0,autoPlay:H,className:Y==="right"?"slide-in-right":"slide-in-left",style:{maxWidth:"100%",height:"auto",objectFit:"contain",borderRadius:"0.75rem"},onError:je=>{je.target.style.display="none",je.target.parentElement.innerHTML+='<div class="absolute w-full h-full bg-gray-200 rounded-lg flex items-center justify-center"><span class="text-gray-500 text-sm">Video N/A</span></div>'}}):n.jsx("img",{src:D,alt:s.name,className:Y==="right"?"slide-in-right":"slide-in-left",style:{maxWidth:"100%",height:"auto",objectFit:"contain",borderRadius:"0.75rem"},onError:je=>{je.target.src="https://via.placeholder.com/600"}})}),(ct.length>1||s.videoUrls.length>0)&&n.jsxs("div",{className:"flex gap-2 mt-4 overflow-x-auto scrollbar-hide",children:[ct.map((je,He)=>n.jsx("img",{src:je,alt:`${s.name} ${He+1}`,className:`thumbnail w-16 h-16 object-cover rounded-lg cursor-pointer border-2 ${B===He?"border-blue-500":"border-gray-200"}`,style:{minWidth:"4rem",minHeight:"4rem",maxWidth:"100%",objectFit:"cover"},onClick:()=>Et(je,He),onError:mt=>{mt.target.src="https://via.placeholder.com/600"}},He)),s.videoUrls.map((je,He)=>n.jsx("video",{src:je,className:`thumbnail w-16 h-16 object-cover rounded-lg cursor-pointer border-2 ${B===ct.length+He?"border-blue-500":"border-gray-200"}`,style:{minWidth:"4rem",minHeight:"4rem",maxWidth:"100%",objectFit:"cover"},onClick:()=>Et(je,ct.length+He),onError:mt=>{mt.target.style.display="none"}},`video-${He}`))]})]}),n.jsxs("div",{className:"space-y-4 min-w-0",children:[n.jsxs("div",{className:"product-info-card min-w-0",children:[n.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-2 break-words",children:s.name}),s.tags&&s.tags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-3 overflow-x-auto scrollbar-hide",children:s.tags.map((je,He)=>n.jsx("span",{className:`px-2 py-1 text-xs rounded-full border ${Se[je.toLowerCase()]||Se.default} break-words`,children:je},He))}),n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(je=>n.jsx("svg",{className:`w-5 h-5 ${je<=Math.floor(Ye)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},je))}),n.jsxs("span",{className:"text-sm text-gray-600",children:[Ye," (",((ut=s.reviews)==null?void 0:ut.length)||0," reviews)"]})]}),n.jsxs("div",{className:"price-section",children:[de?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 min-w-0 overflow-x-auto",children:[n.jsx("span",{className:"text-2xl font-bold text-green-600 whitespace-nowrap",children:n.jsx(Rl,{price:it})}),n.jsx("span",{className:"text-lg text-gray-500 line-through whitespace-nowrap",children:n.jsx(Rl,{price:Je})}),n.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium whitespace-nowrap",children:[z,"% OFF"]})]}),n.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Daily Deal Active!"})]}):n.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n.jsx(Rl,{price:it})}),n.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Includes taxes and fees"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 min-w-0 overflow-x-auto scrollbar-hide",children:[n.jsxs("div",{className:"info-badge bg-blue-100 text-blue-700 border border-blue-200",children:[n.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"})}),n.jsx("span",{children:s.condition})]}),n.jsxs("div",{className:"info-badge bg-green-100 text-green-700 border border-green-200",children:[n.jsxs("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21c-4.418 0-8-4.03-8-9a8 8 0 1 1 16 0c0 4.97-3.582 9-8 9z"}),n.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),n.jsx("span",{children:a||"Location not specified"})]}),n.jsxs("div",{className:"info-badge bg-purple-100 text-purple-700 border border-purple-200",children:[n.jsxs("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v1"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7h16v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7z"})]}),n.jsx("span",{children:s.seller.name})]}),we.currentUser&&we.currentUser.uid!==s.sellerId&&n.jsxs("button",{onClick:()=>e("/chat-templates"),className:"info-badge bg-green-100 text-green-700 border border-green-200 flex items-center gap-1 hover:bg-green-200 transition-colors",type:"button",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.77 9.77 0 0 1-4-.8l-4 1 1-4A8.96 8.96 0 0 1 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Chat with Seller"]}),n.jsxs("div",{className:"info-badge bg-orange-100 text-orange-700 border border-orange-200",children:[n.jsxs("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 17v-2a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),n.jsxs("span",{children:[s.stock," in stock"]})]})]}),s.colors&&s.colors.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Color:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:s.colors.map((je,He)=>n.jsx("div",{className:`selection-option w-8 h-8 rounded-full border-2 ${X===je?"selected":"border-gray-300"}`,style:{backgroundColor:Z[je.toLowerCase()]||je},onClick:()=>re(je),title:je},He))}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Selected: ",X]})]}),s.sizes&&s.sizes.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Size:"}),n.jsx("div",{className:"flex flex-wrap gap-2 min-w-0",children:s.sizes.map((je,He)=>n.jsx("button",{className:`selection-option px-3 py-1 border rounded-md text-sm ${xe===je?"selected border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"} break-words`,onClick:()=>ze(je),children:je},He))}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Selected: ",xe]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quantity:"}),n.jsxs("div",{className:"quantity-controls",children:[n.jsx("button",{onClick:()=>w(Math.max(1,x-1)),className:"px-3 py-2 hover:bg-gray-100",children:"-"}),n.jsx("input",{type:"number",value:x,onChange:je=>{const He=parseInt(je.target.value)||1;w(Math.max(1,Math.min(He,s.stock)))},min:"1",max:s.stock,className:"flex-1 text-center"}),n.jsx("button",{onClick:()=>w(Math.min(s.stock,x+1)),className:"px-3 py-2 hover:bg-gray-100",children:"+"})]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.stock," available"]})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("button",{onClick:qe,disabled:s.stock===0,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium",children:s.stock===0?"Out of Stock":"Add to Cart"}),n.jsx("button",{onClick:Ve,className:`w-full py-3 px-4 rounded-lg border transition-colors font-medium ${N.includes(s.id)?"bg-red-50 border-red-300 text-red-700 hover:bg-red-100":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:N.includes(s.id)?"Remove from Favorites":"Add to Favorites"})]})]}),n.jsxs("div",{className:"product-info-card",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"Description"}),n.jsx("div",{className:"formatted-description",dangerouslySetInnerHTML:{__html:Oe(j?s.description:It)}}),lt&&n.jsx("button",{onClick:()=>k(!j),className:"text-blue-600 hover:text-blue-800 text-sm font-medium mt-2",children:j?"Show Less":"Show More"})]}),n.jsxs("div",{className:"product-info-card",style:{marginBottom:"2rem"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Reviews"}),we.currentUser&&n.jsx("button",{onClick:()=>E(!C),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:C?"Cancel":"Write a Review"})]}),C&&n.jsxs("form",{onSubmit:Xe,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(je=>n.jsx("button",{type:"button",onClick:()=>P(je),className:`w-8 h-8 ${je<=T?"text-yellow-400":"text-gray-300"}`,children:n.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},je))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comment"}),n.jsx("textarea",{value:U,onChange:je=>R(je.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Share your experience with this product..."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Submit Review"}),n.jsx("button",{type:"button",onClick:()=>E(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),xt&&xt.length>0?n.jsxs("div",{className:"space-y-4",children:[xt.map(je=>n.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"flex",children:[1,2,3,4,5].map(He=>n.jsx("svg",{className:`w-4 h-4 ${He<=je.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},He))}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:je.userName}),n.jsx("span",{className:"text-xs text-gray-500",children:je.date?new Date(je.date.seconds*1e3).toLocaleDateString():"Recent"})]}),n.jsx("p",{className:"text-gray-700",children:je.comment})]},je.id)),s.reviews&&s.reviews.length>nt&&n.jsx("button",{onClick:()=>I(!O),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:O?"Show Less":`Show All ${s.reviews.length} Reviews`})]}):n.jsx("p",{className:"text-gray-500",children:"No reviews yet. Be the first to review this product!"})]})]})]}),n.jsx("div",{className:"lg:col-span-1 min-w-0",children:n.jsxs("div",{className:"sticky top-4 space-y-6 min-w-0",children:[l.length>0&&n.jsxs("div",{className:"product-info-card min-w-0",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Similar Products"}),n.jsx("div",{className:"space-y-4",children:l.map(je=>n.jsx(ue,{to:`/product/${je.id}`,className:"block hover:bg-gray-50 p-2 rounded-lg transition-colors",target:"_blank",rel:"noopener noreferrer",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("img",{src:je.imageUrl,alt:je.name,className:"w-16 h-16 object-cover rounded-lg",onError:He=>{He.target.src="https://via.placeholder.com/600"}}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-800 truncate",children:je.name}),n.jsx("p",{className:"text-sm text-gray-600",children:n.jsx(Rl,{price:je.price})}),n.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[n.jsx("svg",{className:"w-3 h-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),n.jsx("span",{className:"text-xs text-gray-500",children:je.rating.toFixed(1)})]})]})]})},je.id))})]}),u.length>0&&n.jsxs("div",{className:"product-info-card min-w-0",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Recently Viewed"}),n.jsx("div",{className:"space-y-4",children:u.slice(0,3).map(je=>n.jsx(ue,{to:`/product/${je.id}`,className:"block hover:bg-gray-50 p-2 rounded-lg transition-colors",target:"_blank",rel:"noopener noreferrer",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("img",{src:je.imageUrl,alt:je.name,className:"w-12 h-12 object-cover rounded-lg",onError:He=>{He.target.src="https://via.placeholder.com/600"}}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-800 truncate",children:je.name}),n.jsx("p",{className:"text-xs text-gray-600",children:n.jsx(Rl,{price:je.price||0})})]})]})},je.id))})]})]})})]}),n.jsx("div",{className:"sticky-cart md:hidden min-w-0",children:n.jsxs("div",{className:"flex items-center justify-between min-w-0 flex-wrap",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold text-gray-800",children:n.jsx(Rl,{price:it})}),de&&n.jsxs("div",{className:"text-sm text-green-600",children:[z,"% off today!"]})]}),n.jsx("button",{onClick:qe,disabled:s.stock===0,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium",children:s.stock===0?"Out of Stock":"Add to Cart"})]})}),n.jsx(Nd,{alerts:me,removeAlert:ve})]})]})};function bQ(){const[t,e]=_.useState(""),[s,r]=_.useState(""),[a,i]=_.useState(""),[l,d]=_.useState(""),[u,h]=_.useState(""),[f,p]=_.useState(!1),[x,w]=_.useState(null),N=Ns(),v=P=>/^\+?[1-9]\d{1,14}$/.test(P),j=async P=>{if(P.preventDefault(),r(""),i(""),h(""),!t.trim()){r("Phone number is required.");return}if(!v(t)){r("Please enter a valid phone number (e.g., +1234567890).");return}const U=sN();if(!U){r("Firebase Authentication not initialized.");return}try{const R=t.startsWith("+")?t:`+${t}`,O=await aV(U,R);w(O),p(!0),i("OTP sent to your phone number.")}catch(R){console.error("Error sending OTP:",R),r(T(R))}},k=async P=>{if(P.preventDefault(),h(""),!l){h("Please enter the OTP.");return}try{const R=(await x.confirm(l)).user;console.log("Phone number verified for user:",R.uid),localStorage.setItem("userPhone",t),i("Phone number verified successfully! Redirecting to login..."),setTimeout(()=>N("/login"),2e3)}catch(U){console.error("Error verifying OTP:",U),h(T(U))}},T=P=>{switch(P.code){case"auth/invalid-verification-code":return"Invalid OTP. Please try again.";case"auth/code-expired":return"OTP has expired. Please request a new one.";case"auth/invalid-phone-number":return"Invalid phone number format.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";default:return"An error occurred. Please try again."}};return n.jsx("div",{className:"container mx-auto px-4 py-8 bg-gray-100 text-gray-800",children:n.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Add Your Phone Number"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Please provide your phone number to proceed. Already have an account?"," ",n.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"Skip to Login"})]}),n.jsxs("form",{onSubmit:j,children:[n.jsxs("div",{className:"mb-4 relative",children:[n.jsx("input",{type:"tel",id:"phone",value:t,onChange:P=>e(P.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 peer ${s?"border-red-500":a?"border-green-500":"border-gray-300"}`,autoComplete:"tel"}),n.jsx("label",{htmlFor:"phone",className:"absolute left-3 -top-2 text-gray-500 text-xs bg-white px-1 transition-all duration-300 transform origin-left",children:"Phone Number"}),s&&n.jsx("p",{className:"text-red-600 text-[10px] mt-1",children:s})]}),f&&n.jsxs("div",{className:"mb-4 relative",children:[n.jsx("input",{type:"text",id:"otp",value:l,onChange:P=>d(P.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 peer ${u?"border-red-500":"border-gray-300"}`,autoComplete:"one-time-code"}),n.jsx("label",{htmlFor:"otp",className:"absolute left-3 -top-2 text-gray-500 text-xs bg-white px-1 transition-all duration-300 transform origin-left",children:"OTP"}),u&&n.jsx("p",{className:"text-red-600 text-[10px] mt-1",children:u}),n.jsx("button",{type:"button",onClick:k,className:"mt-2 bg-blue-900 text-white p-2 rounded-lg hover:bg-blue-800 transition duration-200",children:"Verify OTP"})]}),!f&&n.jsx("button",{type:"submit",className:"w-full bg-blue-900 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",children:"Submit"}),a&&n.jsx("p",{className:"text-green-600 text-[10px] mb-4",children:a})]})]})})}const vQ="/assets/empty-cart-zEVFI3ed.svg",wQ=({item:t,updateCartQuantity:e,removeFromCart:s})=>{const[r,a]=_.useState("https://via.placeholder.com/200?text=No+Image"),[i,l]=_.useState(null),[d,u]=_.useState({taxRate:.075,buyerProtectionRate:.02,handlingRate:.05}),[h,f]=_.useState(!1),[p,x]=_.useState(0),w=(j,k=1,T=0)=>{const P=T>0?j*T/100:0;return(j-P)*(1+d.taxRate+d.buyerProtectionRate+d.handlingRate)*k};if(_.useEffect(()=>{const j=async()=>{try{const T=_e(J,"feeConfigurations","categoryFees"),P=await Ge(T);if(P.exists()){const U=P.data(),R=(i==null?void 0:i.category)||"default";u(U[R]||{taxRate:.075,buyerProtectionRate:.02,handlingRate:.05})}}catch(T){console.error("Error fetching fee config:",T)}},k=async()=>{var T;if(t&&t.productId)try{const P=_e(J,"products",t.productId),U=await Ge(P);if(U.exists()){const R=U.data();l({id:U.id,name:R.name||"Unnamed Product",price:R.price||0,stock:R.stock||0,category:((T=R.category)==null?void 0:T.trim().toLowerCase())||"uncategorized"});const O=Array.isArray(R.imageUrls)?R.imageUrls.filter(E=>typeof E=="string"&&E.startsWith("https://res.cloudinary.com/")):R.imageUrl&&typeof R.imageUrl=="string"&&R.imageUrl.startsWith("https://res.cloudinary.com/")?[R.imageUrl]:[];a(O.length>0?O[0]:"https://via.placeholder.com/200?text=No+Image");const C=(await yt(Ue(J,"dailyDeals"))).docs.map(E=>({id:E.id,...E.data()})).find(E=>E.productId===t.productId&&new Date(E.endDate)>new Date&&new Date(E.startDate)<=new Date);C?(f(!0),x((C.discount*100).toFixed(2))):(f(!1),x(0))}else console.warn(`Product ${t.productId} not found in Firestore.`),l(null),a("https://via.placeholder.com/200?text=No+Image")}catch(P){console.error("Product fetch error for cart item:",t.productId,":",P),l(null),a("https://via.placeholder.com/200?text=No+Image")}};j(),k()},[t]),!t||!t.productId||!i)return console.error("Invalid cart item data:",t),n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 rounded-lg",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:n.jsx("span",{className:"text-gray-500 text-xs",children:"Image N/A"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Product Not Found"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Item ID: ",(t==null?void 0:t.productId)||"Unknown"]}),n.jsx("p",{className:"text-xs text-red-600",children:"This product is no longer available."})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{onClick:()=>s(t==null?void 0:t.productId),className:"text-red-500 hover:text-red-700","aria-label":"Remove unavailable product from cart",children:n.jsx("i",{className:"bx bx-trash text-xl"})})})]});const N=i.stock===0,v=w(i.price,t.quantity,h?p:0);return n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 rounded-lg",children:[n.jsx(ue,{to:`/product/${i.id}`,children:n.jsx("img",{src:r,alt:i.name,className:"w-16 h-16 object-cover rounded",onError:j=>{console.error("CartItem image load error:",{productId:t.productId,failedUrl:j.target.src,name:i.name}),j.target.src="https://via.placeholder.com/200?text=No+Image"},onLoad:()=>{console.log("CartItem image loaded successfully:",{productId:t.productId,imageUrl:r,name:i.name})}})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(ue,{to:`/product/${i.id}`,children:n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:i.name})}),h&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["",v.toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("p",{className:"text-xs text-gray-500 line-through",children:["",w(i.price,t.quantity,0).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),!h&&n.jsxs("p",{className:"text-xs text-gray-600",children:["",v.toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Stock:"," ",n.jsx("span",{className:N?"text-red-600":"text-green-600",children:N?"Out of stock":`${i.stock} units available`})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"1",max:i.stock,value:t.quantity,onChange:j=>{const k=parseInt(j.target.value)||1;console.log("Updating quantity:",{productId:t.productId,newQuantity:k}),e(t.productId,k)},className:"w-16 p-1 border border-gray-300 rounded",disabled:N,"aria-label":`Quantity of ${i.name}`}),n.jsx("button",{onClick:()=>{console.log("Removing item:",{productId:t.productId,name:i.name}),s(t.productId)},className:"text-red-500 hover:text-red-700","aria-label":`Remove ${i.name} from cart`,children:n.jsx("i",{className:"bx bx-trash text-xl"})})]})]})},NQ=({totalPrice:t,cartItems:e,clearCart:s})=>{const r=Ns(),[a,i]=_.useState({taxRate:.075,buyerProtectionRate:.02,handlingRate:.05}),[l,d]=_.useState(25e3);_.useEffect(()=>{const k=async()=>{var U,R;try{const O=_e(J,"feeConfigurations","categoryFees"),I=await Ge(O);if(I.exists()){const D=I.data(),V=((R=(U=e[0])==null?void 0:U.product)==null?void 0:R.category)||"default";i(D[V]||{taxRate:.075,buyerProtectionRate:.02,handlingRate:.05})}const C=_e(J,"settings","minimumPurchase"),E=await Ge(C);E.exists()&&d(E.data().amount||25e3)}catch(O){console.error("Error fetching configs:",O)}},T=async()=>{try{return(await yt(Ue(J,"dailyDeals"))).docs.map(O=>({id:O.id,...O.data()})).filter(O=>new Date(O.endDate)>new Date&&new Date(O.startDate)<=new Date)}catch(U){return console.error("Error fetching daily deals:",U),[]}},P=async()=>{const U=await T();e.forEach(R=>{const O=U.find(I=>I.productId===R.product.id);O?(R.isDailyDeal=!0,R.discountPercentage=(O.discount*100).toFixed(2)):(R.isDailyDeal=!1,R.discountPercentage=0)})};e.length>0&&P(),k()},[e]),console.log(t);const u=(k,T=1,P=0)=>{const U=P>0?k*P/100:0;return(k-U)*(1+a.taxRate+a.buyerProtectionRate+a.handlingRate)*T},h=e.reduce((k,T)=>k+u(T.product.price||0,T.quantity||1,T.discountPercentage||0),0),f=e.some(k=>{var T;return k.quantity>(((T=k.product)==null?void 0:T.stock)||0)}),p=e.length===0,x=e.reduce((k,T)=>k+(T.quantity||0),0),w=h<l,v=h+0,j=()=>{if(w){alert(`Minimum purchase amount is ${l.toLocaleString("en-NG")} to checkout.`);return}if(x>20){alert("Maximum basket size is 20 items.");return}r("/checkout")};return n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg shadow-sm",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Summary"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.map((k,T)=>k.isDailyDeal&&n.jsxs("div",{className:"flex justify-between text-xs text-green-600",children:[n.jsxs("span",{children:["Discount on ",k.product.name]}),n.jsxs("span",{children:["-",(k.product.price*k.discountPercentage/100*k.quantity).toLocaleString("en-NG",{minimumFractionDigits:2})]})]},T)),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{children:["",h.toLocaleString("en-NG",{minimumFractionDigits:2})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Shipping"}),n.jsx("span",{className:"text-green-600 font-semibold",children:"FREE"})]}),n.jsxs("div",{className:"flex justify-between font-bold text-gray-800 border-t pt-2",children:[n.jsx("span",{children:"Grand Total"}),n.jsxs("span",{children:["",v.toLocaleString("en-NG",{minimumFractionDigits:2})]})]})]}),w&&n.jsxs("p",{className:"text-red-600 text-xs mt-2 bg-red-50 p-2 rounded",children:[" Minimum purchase amount is ",l.toLocaleString("en-NG")," to checkout."]}),x>20&&n.jsx("p",{className:"text-red-600 text-xs mt-2 bg-red-50 p-2 rounded",children:" Maximum basket size is 20 items."}),n.jsxs("div",{className:"mt-4 flex gap-3",children:[n.jsx("button",{onClick:j,className:`flex-1 px-6 py-2 rounded-lg text-white transition ${p||f||w||x>20?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:p||f||w||x>20,children:"Checkout"}),n.jsx("button",{onClick:s,className:`px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition ${p?"opacity-50 cursor-not-allowed":""}`,disabled:p,children:"Clear Cart"})]})]})},jQ=()=>{const t=Ns(),[e,s]=_.useState([]),[r,a]=_.useState(null),[i,l]=_.useState(!0),[d,u]=_.useState(null),[h,f]=_.useState(0);_.useEffect(()=>{const j=()=>{f(window.scrollY)};return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]),_.useEffect(()=>{const j=we.onAuthStateChanged(async T=>{a(T);try{l(!0),u(null);let P=[];T?(await xq(T.uid),P=await Ka(T.uid)):P=await Ka(),console.log("Raw cart items from getCart:",P);const U=P.map(R=>{if(!R.product)return console.warn("Cart item missing product data:",{productId:R.productId,quantity:R.quantity}),null;const{product:O}=R;let I=O.imageUrl&&typeof O.imageUrl=="string"&&O.imageUrl.startsWith("https://")?O.imageUrl:Array.isArray(O.imageUrls)&&O.imageUrls[0]&&typeof O.imageUrls[0]=="string"&&O.imageUrls[0].startsWith("https://")?O.imageUrls[0]:"/images/placeholder.jpg";return{...R,product:{id:O.id||R.productId,name:O.name||"Unnamed Product",price:O.price||0,stock:O.stock||0,category:O.category||"uncategorized",imageUrl:I,rating:O.rating||Math.random()*2+3,colors:O.colors||[],sizes:O.sizes||[],condition:O.condition||"New",sellerId:O.sellerId||""}}}).filter(R=>R?R.product.imageUrl&&typeof R.product.imageUrl=="string"&&(R.product.imageUrl.startsWith("https://")||R.product.imageUrl==="/images/placeholder.jpg")?!0:(console.warn("Filtered out cart item with invalid imageUrl:",{productId:R.productId,name:R.product.name,imageUrl:R.product.imageUrl}),!1):(console.warn("Filtered out invalid cart item"),!1));console.log("Normalized cart items:",U),s(U),U.length===0&&u("Your cart is empty.")}catch(P){console.error("Error loading cart:",{message:P.message,code:P.code}),u("Failed to load cart. Please try again."),s([]),Ne.error("Failed to load cart")}finally{l(!1)}}),k=async()=>{try{const T=await Ka(r==null?void 0:r.uid);console.log("Raw cart items from handleCartUpdate:",T);const P=T.map(U=>{if(!U.product)return console.warn("Cart item missing product data:",{productId:U.productId,quantity:U.quantity}),null;const{product:R}=U;let O=R.imageUrl&&typeof R.imageUrl=="string"&&R.imageUrl.startsWith("https://")?R.imageUrl:Array.isArray(R.imageUrls)&&R.imageUrls[0]&&typeof R.imageUrls[0]=="string"&&R.imageUrls[0].startsWith("https://")?R.imageUrls[0]:"/images/placeholder.jpg";return{...U,product:{id:R.id||U.productId,name:R.name||"Unnamed Product",price:R.price||0,stock:R.stock||0,category:R.category||"uncategorized",imageUrl:O,rating:R.rating||Math.random()*2+3,colors:R.colors||[],sizes:R.sizes||[],condition:R.condition||"New",sellerId:R.sellerId||""}}}).filter(U=>U?U.product.imageUrl&&typeof U.product.imageUrl=="string"&&(U.product.imageUrl.startsWith("https://")||U.product.imageUrl==="/images/placeholder.jpg")?!0:(console.warn("Filtered out cart item with invalid imageUrl:",{productId:U.productId,name:U.product.name,imageUrl:U.product.imageUrl}),!1):!1);s(P),P.length===0?u("Your cart is empty."):u(null)}catch(T){console.error("Error updating cart:",{message:T.message,code:T.code}),u("Failed to update cart."),Ne.error("Failed to update cart")}};return window.addEventListener("cartUpdated",k),()=>{j(),window.removeEventListener("cartUpdated",k)}},[r]);const p=async(j,k)=>{if(!(k<1))try{const T=e.find(U=>U.productId===j);if(T&&T.product&&k>T.product.stock){Ne.error(`Cannot add more than ${T.product.stock} units of ${T.product.name}`);return}const P=e.map(U=>U.productId===j?{...U,quantity:k}:U);await rc(P,r==null?void 0:r.uid),s(P),Ne.success("Quantity updated")}catch(T){console.error("Error updating quantity:",{message:T.message,code:T.code}),Ne.error("Failed to update quantity")}},x=async j=>{try{const k=e.filter(T=>T.productId!==j);await rc(k,r==null?void 0:r.uid),s(k),Ne.success("Item removed from cart"),k.length===0&&u("Your cart is empty.")}catch(k){console.error("Error removing item:",{message:k.message,code:k.code}),Ne.error("Failed to remove item")}},w=async()=>{try{await ix(r==null?void 0:r.uid),s([]),u("Your cart is empty."),Ne.success("Cart cleared successfully")}catch(j){console.error("Error clearing cart:",{message:j.message,code:j.code}),Ne.error("Failed to clear cart")}},N=async()=>{if(!r){Ne.error("Please log in to checkout"),t("/login");return}try{await pq(r.uid),Ne.success("Order placed successfully!"),t("/orders")}catch(j){console.error("Error during checkout:",{message:j.message,code:j.code}),Ne.error(j.message||"Checkout failed")}},v=e.reduce((j,k)=>{var T;return j+(((T=k.product)==null?void 0:T.price)||0)*k.quantity},0);return i?n.jsxs("div",{className:"p-4 text-gray-600 text-center",children:[n.jsx(Ii,{}),"Loading..."]}):n.jsxs("div",{className:"mb-10 container mx-auto px-4 py-8 min-h-screen",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Your Cart"}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[n.jsx("div",{className:"lg:w-2/3",children:d&&e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("img",{src:vQ,alt:"Empty Cart",className:"h-[420px] m-3",onError:j=>{console.warn("Failed to load empty cart image:",j.target.src),j.target.src="/images/placeholder.jpg"}}),n.jsxs("p",{className:"text-gray-600 m-3 text-md",children:[d,n.jsx(ue,{to:"/products",className:"underline text-blue-500 ml-1",children:"Shop Now"})]})]}):n.jsx("div",{className:"space-y-4",children:e.map(j=>n.jsx(wQ,{item:j,updateCartQuantity:p,removeFromCart:x},j.productId))})}),n.jsx("div",{className:"lg:w-1/3",children:n.jsx(NQ,{totalPrice:v,handleCheckout:N,cartItems:e,clearCart:w,isFixed:h>200})})]})]})};function _Q(){const[t,e]=_.useState(!0),[s,r]=_.useState(""),[a,i]=_.useState(!1),[l,d]=_.useState(null),[u,h]=_.useState([]),[f,p]=_.useState([]),x=5;_.useEffect(()=>{const N=we.onAuthStateChanged(async v=>{if(e(!0),!v){console.log("No authenticated user"),r("Please sign in to view your wishlist."),i(!0),h([]),p([]),e(!1);return}try{console.log("Fetching data for user:",v.uid);const j=localStorage.getItem("userData");let k={};j&&(k=JSON.parse(j)),d({email:v.email||"test@example.com",name:v.displayName||"User",profileImage:k.profileImage||null,createdAt:k.createdAt||null,address:k.address||"Not provided",uid:v.uid}),console.log("Querying favorites for user:",v.uid);const T=Rt(Ue(J,"favorites"),ht("userId","==",v.uid)),U=(await yt(T)).docs.map(I=>(console.log("Favorite doc:",I.id,I.data()),{id:I.id,...I.data()}));h(U);const R=U.map(async I=>{var E,D;const C=await Ge(_e(J,"products",I.productId));if(C.exists()){const V=C.data();return{id:C.id,name:V.name,description:V.description||"",price:V.price,stock:V.stock||0,category:((E=V.category)==null?void 0:E.trim().toLowerCase())||"",colors:V.colors||[],sizes:((D=V.category)==null?void 0:D.trim().toLowerCase())==="foremade fashion"?V.sizes||[]:[],condition:V.condition||"",imageUrls:V.imageUrls||[],seller:V.seller||{name:"Unknown Seller"},rating:V.rating||Math.random()*2+3}}return console.warn("Product not found for favorite:",I.productId),null}),O=(await Promise.all(R)).filter(I=>I!==null);p(O)}catch(j){console.error("Error fetching favorites:",j.code,j.message,j.stack),r("Failed to load wishlist: "+(j.message||"Unknown error"))}finally{e(!1)}});return()=>N()},[]);const w=async(N,v)=>{if(!we.currentUser){r("Please sign in to manage your wishlist."),i(!0);return}try{console.log("Removing favorite:",N,"for user:",we.currentUser.uid);const j=await Ge(_e(J,"favorites",N));if(!j.exists()){console.warn("Favorite not found:",N);return}if(j.data().userId!==we.currentUser.uid){console.error("Cannot delete favorite with mismatched userId:",j.data()),r("Permission denied: Cannot remove this favorite.");return}await nn(_e(J,"favorites",N)),h(k=>k.filter(T=>T.id!==N)),p(k=>k.filter(T=>T.id!==v)),console.log("Removed favorite:",N)}catch(j){console.error("Error removing favorite:",j.code,j.message,j.stack),r("Failed to remove item from wishlist: "+(j.message||"Unknown error"))}};return t?n.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:n.jsx("p",{className:"text-gray-600",children:"Loading..."})}):s?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600",children:s}),a?n.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"Go to Login"}):n.jsx("button",{onClick:()=>{r(""),e(!0)},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]}):n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsx(ru,{userData:l,orderCount:x,wishlistCount:u.length}),n.jsx("div",{className:"md:w-3/4",children:n.jsxs("div",{className:"rounded-lg p-6  bg-gray-100",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsx("h3",{className:"text-lg font-semibold",children:"Wish List"})}),f.length===0?n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-block p-4 rounded-full mb-2 bg-gray-100",children:n.jsx("span",{className:"text-2xl",children:""})}),n.jsx("p",{className:"text-gray-400",children:"No items in your wish list!"})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-4",children:f.map(N=>n.jsxs("div",{className:"relative",children:[n.jsx(hn,{product:{...N,imageUrl:N.imageUrls[0]||""}}),n.jsx("button",{onClick:()=>{const v=u.find(j=>j.productId===N.id);v&&w(v.id,N.id)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",title:"Remove from Wishlist",children:n.jsx("i",{className:"bx bx-x"})})]},N.id))})]})})]})})}function SQ(){const[t,e]=_.useState(!0),[s,r]=_.useState(""),[a,i]=_.useState(!1),[l,d]=_.useState(null),[u,h]=_.useState(localStorage.getItem("profileImage")||"https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"),f=3,p=0,[x,w]=_.useState(null);_.useEffect(()=>{const v=we.onAuthStateChanged(async k=>{if(e(!0),!k){r("Please sign in to view your profile."),i(!0),e(!1);return}try{const T=_e(J,"users",k.uid),P=ws(T,U=>{var R;if(U.exists()){const O=U.data(),I=O.addresses||[];d({email:k.email||"test@example.com",username:O.username||k.displayName||"emmachi789",name:O.name||k.displayName||"Emmanuel Chinecherem",createdAt:O.createdAt||"2025-05-04T23:28:48.857Z",address:(R=I[0])!=null&&R.street?`${I[0].street}, ${I[0].city}, ${I[0].state}, ${I[0].postalCode}, ${I[0].country}`:"Not provided",country:O.country||"Nigeria",phone:O.phone||"+234-8052975966",uid:k.uid})}else r("User profile not found.")});return e(!1),()=>P()}catch(T){T.code==="permission-denied"?(r("You do not have permission to view this profile."),i(!0)):r("Failed to load profile. Please try again."),e(!1)}}),j=()=>{h(localStorage.getItem("profileImage")||"https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg")};return window.addEventListener("profileImageUpdated",j),()=>{v(),window.removeEventListener("profileImageUpdated",j)}},[]);const N=v=>{if(!v)return"Not available";try{return new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(j){return console.error("Error formatting date:",j),"Invalid date"}};return t?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(Ii,{}),n.jsx("p",{className:"text-gray-600 mt-4",children:"Loading your profile..."})]}):s?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:s}),a?n.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline inline-block",children:"Go to Login"}):n.jsx("button",{onClick:()=>{r(""),e(!0)},className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 shadow-md",children:"Retry"})]}):l?n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsx(ru,{}),n.jsxs("div",{className:"md:w-3/4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[n.jsx("div",{className:"rounded-lg p-4 text-center bg-gradient-to-br from-blue-50 to-white border border-blue-100 cursor-pointer",children:n.jsxs(ue,{to:"/orders",className:"block",children:[n.jsx("i",{className:"bx bx-package text-2xl text-blue-500 mb-2"}),n.jsx("p",{className:"text-gray-400",children:"Orders"}),n.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"9"})]})}),n.jsx("div",{className:"rounded-lg p-4 text-center bg-gradient-to-br from-purple-50 to-white border border-purple-100 cursor-pointer",children:n.jsxs(ue,{to:"/favorites",className:"block",children:[n.jsx("i",{className:"bx bx-heart text-2xl text-purple-500 mb-2"}),n.jsx("p",{className:"text-gray-400",children:"Wish List"}),n.jsx("p",{className:"text-lg font-semibold text-gray-800",children:f})]})}),n.jsxs("div",{className:"rounded-lg p-4 text-center bg-gradient-to-br from-yellow-50 to-white border border-yellow-100 cursor-pointer",children:[n.jsx("i",{className:"bx bx-star text-2xl text-yellow-500 mb-2"}),n.jsx("p",{className:"text-gray-400",children:"Loyalty Points"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[p," ",n.jsx("i",{className:"bx bx-star text-yellow-500"})]})]})]}),n.jsxs("div",{className:"rounded-lg p-6 mb-6 bg-white border border-gray-100 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Personal Details"}),n.jsxs(ue,{to:"/setting",className:"flex items-center px-4 py-2 rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition duration-200",children:[n.jsx("i",{className:"bx bx-edit mr-1"})," Edit Profile"]})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden border-2 border-white shadow-lg",children:n.jsx("img",{src:u,alt:"Profile",className:"w-full h-full object-cover",onError:v=>{v.target.src="https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"}})}),n.jsxs("div",{className:"ml-2",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l.name}),n.jsxs("p",{className:"text-gray-500",children:["Member since ",N(l.createdAt)]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{label:"Username",value:l.username},{label:"First Name",value:l.name.split(" ")[0]},{label:"Last Name",value:l.name.split(" ").slice(1).join(" ")||"-"},{label:"Email",value:l.email,icon:"bx-check-circle",iconColor:"text-green-500"},{label:"Country",value:l.country},{label:"Phone",value:l.phone},{label:"Date Joined",value:N(l.createdAt)},{label:"Address",value:l.address}].map((v,j)=>n.jsx("div",{className:"group",children:n.jsxs("div",{className:"p-3 rounded-lg bg-gray-50",children:[n.jsx("p",{className:"text-slate-400 text-sm",children:v.label}),n.jsxs("p",{className:"font-semibold text-gray-800 flex items-center",children:[v.value,v.icon&&n.jsx("i",{className:`bx ${v.icon} ml-2 ${v.iconColor}`})]})]})},j))})]}),n.jsxs("div",{className:"rounded-lg p-6 mb-6 bg-white border border-gray-100 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"User Address"}),n.jsxs(ue,{to:"/setting",className:"flex items-center px-4 py-2 rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition duration-200",children:[n.jsx("i",{className:"bx bx-map mr-1"})," Update Address"]})]}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("i",{className:"bx bx-map-pin text-blue-500 mr-2 text-xl mt-1"}),n.jsx("p",{className:"font-semibold text-gray-800",children:l.address})]})})]})]})]})}):n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:"User data not available."}),n.jsx("button",{onClick:()=>e(!0),className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 shadow-md",children:"Retry"})]})}var O6="basil",kQ=function(e){return e===3?"v3":e},L6="https://js.stripe.com",EQ="".concat(L6,"/").concat(O6,"/stripe.js"),TQ=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,CQ=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var AQ=function(e){return TQ.test(e)||CQ.test(e)},RQ=function(){for(var e=document.querySelectorAll('script[src^="'.concat(L6,'"]')),s=0;s<e.length;s++){var r=e[s];if(AQ(r.src))return r}return null},xC=function(e){var s="",r=document.createElement("script");r.src="".concat(EQ).concat(s);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(r),r},PQ=function(e,s){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.0",startTime:s})},mh=null,Og=null,Lg=null,IQ=function(e){return function(s){e(new Error("Failed to load Stripe.js",{cause:s}))}},DQ=function(e,s){return function(){window.Stripe?e(window.Stripe):s(new Error("Stripe.js not available"))}},MQ=function(e){return mh!==null?mh:(mh=new Promise(function(s,r){if(typeof window>"u"||typeof document>"u"){s(null);return}if(window.Stripe){s(window.Stripe);return}try{var a=RQ();if(!(a&&e)){if(!a)a=xC(e);else if(a&&Lg!==null&&Og!==null){var i;a.removeEventListener("load",Lg),a.removeEventListener("error",Og),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=xC(e)}}Lg=DQ(s,r),Og=IQ(r),a.addEventListener("load",Lg),a.addEventListener("error",Og)}catch(l){r(l);return}}),mh.catch(function(s){return mh=null,Promise.reject(s)}))},OQ=function(e,s,r){if(e===null)return null;var a=s[0],i=a.match(/^pk_test/),l=kQ(e.version),d=O6;i&&l!==d&&console.warn("Stripe.js@".concat(l," was loaded on the page, but @stripe/stripe-js@").concat("7.3.0"," expected Stripe.js@").concat(d,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var u=e.apply(void 0,s);return PQ(u,r),u},fh,U6=!1,V6=function(){return fh||(fh=MQ(null).catch(function(e){return fh=null,Promise.reject(e)}),fh)};Promise.resolve().then(function(){return V6()}).catch(function(t){U6||console.warn(t)});var LQ=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];U6=!0;var a=Date.now();return V6().then(function(i){return OQ(i,s,a)})},Zb={exports:{}},ev,yC;function UQ(){if(yC)return ev;yC=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ev=t,ev}var tv,bC;function VQ(){if(bC)return tv;bC=1;var t=UQ();function e(){}function s(){}return s.resetWarningCache=e,tv=function(){function r(l,d,u,h,f,p){if(p!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:s,resetWarningCache:e};return i.PropTypes=i,i},tv}var vC;function FQ(){return vC||(vC=1,Zb.exports=VQ()()),Zb.exports}var zQ=FQ();const Ft=Rw(zQ);function wC(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,r)}return s}function NC(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?wC(Object(s),!0).forEach(function(r){F6(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):wC(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function Np(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Np=function(e){return typeof e}:Np=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}function F6(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function BQ(t,e){if(t==null)return{};var s={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(s[a]=t[a]);return s}function $Q(t,e){if(t==null)return{};var s=BQ(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function z6(t,e){return qQ(t)||HQ(t,e)||GQ(t,e)||WQ()}function qQ(t){if(Array.isArray(t))return t}function HQ(t,e){var s=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(s!=null){var r=[],a=!0,i=!1,l,d;try{for(s=s.call(t);!(a=(l=s.next()).done)&&(r.push(l.value),!(e&&r.length===e));a=!0);}catch(u){i=!0,d=u}finally{try{!a&&s.return!=null&&s.return()}finally{if(i)throw d}}return r}}function GQ(t,e){if(t){if(typeof t=="string")return jC(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return jC(t,e)}}function jC(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,r=new Array(e);s<e;s++)r[s]=t[s];return r}function WQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Mn=function(e,s,r){var a=!!r,i=ss.useRef(r);ss.useEffect(function(){i.current=r},[r]),ss.useEffect(function(){if(!a||!e)return function(){};var l=function(){i.current&&i.current.apply(i,arguments)};return e.on(s,l),function(){e.off(s,l)}},[a,s,e,i])},yw=function(e){var s=ss.useRef(e);return ss.useEffect(function(){s.current=e},[e]),s.current},Vd=function(e){return e!==null&&Np(e)==="object"},YQ=function(e){return Vd(e)&&typeof e.then=="function"},KQ=function(e){return Vd(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},_C="[object Object]",XQ=function t(e,s){if(!Vd(e)||!Vd(s))return e===s;var r=Array.isArray(e),a=Array.isArray(s);if(r!==a)return!1;var i=Object.prototype.toString.call(e)===_C,l=Object.prototype.toString.call(s)===_C;if(i!==l)return!1;if(!i&&!r)return e===s;var d=Object.keys(e),u=Object.keys(s);if(d.length!==u.length)return!1;for(var h={},f=0;f<d.length;f+=1)h[d[f]]=!0;for(var p=0;p<u.length;p+=1)h[u[p]]=!0;var x=Object.keys(h);if(x.length!==d.length)return!1;var w=e,N=s,v=function(k){return t(w[k],N[k])};return x.every(v)},B6=function(e,s,r){return Vd(e)?Object.keys(e).reduce(function(a,i){var l=!Vd(s)||!XQ(e[i],s[i]);return r.includes(i)?(l&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),a):l?NC(NC({},a||{}),{},F6({},i,e[i])):a},null):null},$6="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",SC=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$6;if(e===null||KQ(e))return e;throw new Error(s)},QQ=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$6;if(YQ(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(a){return SC(a,s)})};var r=SC(e,s);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},JQ=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},mx=ss.createContext(null);mx.displayName="ElementsContext";var q6=function(e,s){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(s," in an <Elements> provider."));return e},H6=function(e){var s=e.stripe,r=e.options,a=e.children,i=ss.useMemo(function(){return QQ(s)},[s]),l=ss.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(r):null}}),d=z6(l,2),u=d[0],h=d[1];ss.useEffect(function(){var x=!0,w=function(v){h(function(j){return j.stripe?j:{stripe:v,elements:v.elements(r)}})};return i.tag==="async"&&!u.stripe?i.stripePromise.then(function(N){N&&x&&w(N)}):i.tag==="sync"&&!u.stripe&&w(i.stripe),function(){x=!1}},[i,u,r]);var f=yw(s);ss.useEffect(function(){f!==null&&f!==s&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,s]);var p=yw(r);return ss.useEffect(function(){if(u.elements){var x=B6(r,p,["clientSecret","fonts"]);x&&u.elements.update(x)}},[r,p,u.elements]),ss.useEffect(function(){JQ(u.stripe)},[u.stripe]),ss.createElement(mx.Provider,{value:u},a)};H6.propTypes={stripe:Ft.any,options:Ft.object};var ZQ=function(e){var s=ss.useContext(mx);return q6(s,e)},eJ=function(){var e=ZQ("calls useElements()"),s=e.elements;return s};Ft.func.isRequired;var G6=ss.createContext(null);G6.displayName="CheckoutSdkContext";var tJ=function(e,s){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(s," in an <CheckoutProvider> provider."));return e},sJ=ss.createContext(null);sJ.displayName="CheckoutContext";Ft.any,Ft.shape({fetchClientSecret:Ft.func.isRequired,elementsOptions:Ft.object}).isRequired;var bw=function(e){var s=ss.useContext(G6),r=ss.useContext(mx);if(s&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return s?tJ(s,e):q6(r,e)},rJ=["mode"],nJ=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},ir=function(e,s){var r="".concat(nJ(e),"Element"),a=function(u){var h=u.id,f=u.className,p=u.options,x=p===void 0?{}:p,w=u.onBlur,N=u.onFocus,v=u.onReady,j=u.onChange,k=u.onEscape,T=u.onClick,P=u.onLoadError,U=u.onLoaderStart,R=u.onNetworksChange,O=u.onConfirm,I=u.onCancel,C=u.onShippingAddressChange,E=u.onShippingRateChange,D=bw("mounts <".concat(r,">")),V="elements"in D?D.elements:null,B="checkoutSdk"in D?D.checkoutSdk:null,M=ss.useState(null),Y=z6(M,2),Q=Y[0],H=Y[1],W=ss.useRef(null),de=ss.useRef(null);Mn(Q,"blur",w),Mn(Q,"focus",N),Mn(Q,"escape",k),Mn(Q,"click",T),Mn(Q,"loaderror",P),Mn(Q,"loaderstart",U),Mn(Q,"networkschange",R),Mn(Q,"confirm",O),Mn(Q,"cancel",I),Mn(Q,"shippingaddresschange",C),Mn(Q,"shippingratechange",E),Mn(Q,"change",j);var ge;v&&(e==="expressCheckout"?ge=v:ge=function(){v(Q)}),Mn(Q,"ready",ge),ss.useLayoutEffect(function(){if(W.current===null&&de.current!==null&&(V||B)){var G=null;if(B)switch(e){case"payment":G=B.createPaymentElement(x);break;case"address":if("mode"in x){var X=x.mode,re=$Q(x,rJ);if(X==="shipping")G=B.createShippingAddressElement(re);else if(X==="billing")G=B.createBillingAddressElement(re);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":G=B.createExpressCheckoutElement(x);break;case"currencySelector":G=B.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else V&&(G=V.create(e,x));W.current=G,H(G),G&&G.mount(de.current)}},[V,B,x]);var z=yw(x);return ss.useEffect(function(){if(W.current){var G=B6(x,z,["paymentRequest"]);G&&"update"in W.current&&W.current.update(G)}},[x,z]),ss.useLayoutEffect(function(){return function(){if(W.current&&typeof W.current.destroy=="function")try{W.current.destroy(),W.current=null}catch{}}},[]),ss.createElement("div",{id:h,className:f,ref:de})},i=function(u){bw("mounts <".concat(r,">"));var h=u.id,f=u.className;return ss.createElement("div",{id:h,className:f})},l=s?i:a;return l.propTypes={id:Ft.string,className:Ft.string,onChange:Ft.func,onBlur:Ft.func,onFocus:Ft.func,onReady:Ft.func,onEscape:Ft.func,onClick:Ft.func,onLoadError:Ft.func,onLoaderStart:Ft.func,onNetworksChange:Ft.func,onConfirm:Ft.func,onCancel:Ft.func,onShippingAddressChange:Ft.func,onShippingRateChange:Ft.func,options:Ft.object},l.displayName=r,l.__elementType=e,l},or=typeof window>"u",aJ=ss.createContext(null);aJ.displayName="EmbeddedCheckoutProviderContext";var iJ=function(){var e=bw("calls useStripe()"),s=e.stripe;return s};ir("auBankAccount",or);var kC=ir("card",or);ir("cardNumber",or);ir("cardExpiry",or);ir("cardCvc",or);ir("fpxBank",or);ir("iban",or);ir("idealBank",or);ir("p24Bank",or);ir("epsBank",or);ir("payment",or);ir("expressCheckout",or);ir("currencySelector",or);ir("paymentRequestButton",or);ir("linkAuthentication",or);ir("address",or);ir("shippingAddress",or);ir("paymentMethodMessaging",or);ir("affirmMessage",or);ir("afterpayClearpayMessage",or);const oJ=({email:t,amount:e,onSuccess:s,onClose:r,disabled:a,buttonText:i,className:l,iconClass:d,sellerId:u,handlingFee:h,buyerProtectionFee:f})=>{const[p,x]=_.useState(!1),[w,N]=_.useState(!1);_.useEffect(()=>{const j=document.createElement("script");return j.src="https://js.paystack.co/v1/inline.js",j.async=!0,j.onload=()=>N(!0),j.onerror=()=>{Ne.error("Failed to load Paystack script."),N(!1)},document.body.appendChild(j),()=>{document.body.removeChild(j)}},[]);const v=async()=>{var j,k,T,P,U,R;if(!w||!window.PaystackPop){Ne.error("Paystack not loaded.");return}if(!t||!e||e<=0||!u){Ne.error("Valid email, amount, and seller ID required.");return}x(!0);try{const O="https://foremade-backend.onrender.com",I=Math.round(e),C={amount:I,email:t,currency:"NGN",metadata:{userId:((j=we.currentUser)==null?void 0:j.uid)||"anonymous",orderId:`order-${Date.now()}`,sellerId:u,handlingFee:h||0,buyerProtectionFee:f||0}};console.log("Sending payload to backend:",C);const{data:E}=await Ut.post(`${O}/initiate-paystack-payment`,C);console.log("Backend response:",E),window.PaystackPop.setup({key:"pk_live_80ce5e6562afd9418a07b2fd2f1a261dbb62a9bd",email:t,amount:I,currency:"NGN",ref:E.reference,callback:V=>{console.log("Paystack callback:",V),s(V),x(!1)},onClose:()=>{console.log("Paystack iframe closed"),r(),x(!1)}}).openIframe()}catch(O){console.error("Paystack payment error:",{message:O.message,code:O.code,response:(k=O.response)==null?void 0:k.data});const I=O.code==="ERR_NETWORK"?"Cannot connect to server. Ensure backend is running.":((P=(T=O.response)==null?void 0:T.data)==null?void 0:P.error)||((R=(U=O.response)==null?void 0:U.data)==null?void 0:R.message)||"Payment failed. Please try again.";Ne.error(I),x(!1)}};return n.jsxs("button",{onClick:v,disabled:a||p||!w,className:`paystack-button ${l}`,children:[d&&n.jsx("i",{className:d}),p?"Processing...":i]})},lJ="/assets/card-B58Cq-kn.png",po="/assets/placeholder-ZIgPw8SE.png",cJ={background:"#22c55e",color:"#fff",fontWeight:"bold",borderRadius:"8px",padding:"16px"},dJ=LQ("pk_test_51RJwNCPGKISqnQ1eXrTZH37wa2iPeGUasDwW90TOXdW5TU6LBvoGYdPxBdDTPDoVagtZZwu6VVAPRPMMD8Jp92bW001oXpiLHO"),EC=(t,e=5e3)=>new Promise(s=>{const r=new Image;r.src=t,r.onload=()=>s(!0),r.onerror=()=>s(!1),setTimeout(()=>s(!1),e)}),uJ=()=>n.jsx("div",{className:"flex justify-between mb-8",children:["Cart","Shipping","Payment","Confirmation"].map((t,e)=>n.jsxs("div",{className:"flex-1 text-center",children:[n.jsx("div",{className:`w-8 h-8 mx-auto rounded-full flex items-center justify-center ${e<2?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:e+1}),n.jsx("p",{className:"text-sm mt-2 text-gray-600",children:t})]},t))}),hJ=({isOpen:t,onConfirm:e,onCancel:s})=>t&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Order"}),n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to place this order and clear your cart?"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:e,className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Confirm"}),n.jsx("button",{onClick:s,className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-100 transition",children:"Cancel"})]})]})}),mJ=({totalPrice:t,formData:e,onSuccess:s,onCancel:r,currency:a,setIsProcessing:i})=>{const l=iJ(),d=eJ(),[u,h]=_.useState(!1),f=async p=>{var x,w;if(p.preventDefault(),!l||!d){Ne.error("Stripe not loaded. Please try again.",{position:"top-right",autoClose:3e3});return}h(!0),i(!0);try{const N=Math.round(t*100),v="https://foremade-backend.onrender.com";let j=3,k=null;for(;j>0;)try{const{data:T}=await Ut.post(`${v}/create-payment-intent`,{amount:N,currency:a.toLowerCase(),metadata:{userId:((x=we.currentUser)==null?void 0:x.uid)||"anonymous",orderId:`order-${Date.now()}`}},{timeout:15e3}),{error:P,paymentIntent:U}=await l.confirmCardPayment(T.clientSecret,{payment_method:{card:d.getElement(kC),billing_details:{name:e.name,email:e.email,phone:e.phone,address:{line1:e.address,city:e.city,postal_code:e.postalCode,country:a==="GBP"?"GB":"NG"}}}});if(P){Ne.error(P.message,{position:"top-right",autoClose:3e3});return}if(U.status==="succeeded"){await s(U),h(!1),i(!1);return}}catch(T){if(k=T,j--,T.code!=="ECONNABORTED"||j===0)throw T;Ne.warn(`Retrying payment (${j} attempts left)...`,{position:"top-right",autoClose:2e3}),await new Promise(P=>setTimeout(P,2e3))}throw k||new Error("Payment failed after retries.")}catch(N){console.error("Stripe payment error:",{message:N.message,code:N.code,response:(w=N.response)==null?void 0:w.data}),console.log("Logging to Sentry:",N),Ne.error(N.code==="ECONNABORTED"?"Payment timed out. Please try again or check your connection.":N.message||"Payment failed. Try again.",{position:"top-right",autoClose:3e3}),h(!1),i(!1)}};return n.jsxs("form",{onSubmit:f,className:"mt-6 space-y-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Details"}),n.jsx(kC,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",disabled:u||!l||!d,className:`flex-1 py-3 px-4 rounded-lg text-white text-sm font-medium transition duration-200 shadow transform hover:scale-105 ${u||!l||!d?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,"aria-label":"Pay Now",children:u?"Processing...":`Pay ${a} ${t.toLocaleString("en-US",{minimumFractionDigits:2})}`}),n.jsx("button",{type:"button",onClick:r,disabled:u,className:"px-4 py-3 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition text-sm disabled:opacity-50 transform hover:scale-105","aria-label":"Cancel Payment",children:"Cancel"})]})]})},fJ=()=>{var Se,Te;const t=Ns(),[e,s]=_.useState([]),[r,a]=_.useState(!0),[i,l]=_.useState(!1),[d,u]=_.useState(()=>{const te=localStorage.getItem("checkoutFormData");return te?JSON.parse(te):{name:"",email:"",address:"",city:"",postalCode:"",country:"Nigeria",phone:"",saveInfo:!1}}),[h,f]=_.useState({}),[p,x]=_.useState({}),[w,N]=_.useState({}),[v,j]=_.useState({}),[k,T]=_.useState(!1),[P,U]=_.useState(!1),[R,O]=_.useState(!1),[I,C]=_.useState(null),[E,D]=_.useState(25e3),V=_.useRef(null),B=!1;_.useEffect(()=>{localStorage.setItem("checkoutFormData",JSON.stringify(d))},[d]),_.useEffect(()=>{const te=async()=>{try{a(!0);const Ve=we.currentUser,Xe=_e(J,"settings","minimumPurchase"),Et=await Ge(Xe);Et.exists()&&D(Et.data().amount||25e3);const Qe=_e(J,"feeConfigurations","categoryFees"),nt=await Ge(Qe);N(nt.exists()?nt.data():{});const It=await Ka(Ve==null?void 0:Ve.uid);console.log("Loaded cart items:",JSON.stringify(It,null,2));const xt=(await Promise.all(It.map(async ct=>{if(!ct.productId||!ct.product)return console.warn("Invalid cart item:",ct),null;const it=ct.product||{};let Je=[];Array.isArray(it.imageUrls)?Je=it.imageUrls.filter(Kt=>typeof Kt=="string"&&Kt.match(/^https?:\/\/.+/i)):it.imageUrl&&typeof it.imageUrl=="string"&&it.imageUrl.match(/^https?:\/\/.+/i)&&(Je=[it.imageUrl]);const Ye=await Promise.all(Je.map(Kt=>EC(Kt)));let Ze=Je.filter((Kt,Qs)=>Ye[Qs]);Ze.length===0&&(Ze=[po],x(Kt=>({...Kt,[ct.productId]:!0})),console.warn("No valid imageUrls for product:",it.name||"Unknown","Using placeholder"));const ut=_e(J,"products",ct.productId),je=await Ge(ut),He=je.exists()&&je.data().category||"default",mt=je.exists()?je.data().sellerId:"default-seller-id",Dt=je.exists()&&je.data().stock||10,Fe=nt.exists()&&nt.data()[He]||{taxRate:.075,buyerProtectionRate:.02,handlingRate:.05},Nt=(it.price||0)*(1+Fe.taxRate+Fe.buyerProtectionRate+Fe.handlingRate);return{...ct,product:{...it,imageUrls:Ze,category:He,sellerId:mt,totalPrice:Nt,stock:Dt},currentImage:Ze[0],slideDirection:"right"}}))).filter(ct=>ct!==null);if(s(xt),f(xt.reduce((ct,it)=>({...ct,[it.productId]:!0}),{})),Ve){const ct=_e(J,"users",Ve.uid),it=await Ge(ct);if(it.exists()){const Je=it.data();u(Ye=>({...Ye,name:Je.name||Ve.displayName||Ye.name,email:Je.email||Ve.email||Ye.email,address:Je.address||Ye.address,city:Je.city||Ye.city,postalCode:Je.postalCode||Ye.postalCode,country:Je.country||Ye.country,phone:Je.phone||Ye.phone}))}}}catch(Ve){console.error("Error loading cart or user data:",Ve),console.log("Logging to Sentry:",Ve),s([]),Ne.error("Failed to load data.",{position:"top-right",autoClose:3e3})}finally{a(!1)}},Oe=async()=>{try{const Ve=we.currentUser,Xe=await Ka(Ve==null?void 0:Ve.uid),Et=_e(J,"feeConfigurations","categoryFees"),Qe=await Ge(Et),nt=Qe.exists()?Qe.data():{},lt=(await Promise.all(Xe.map(async xt=>{if(!xt.productId||!xt.product)return console.warn("Invalid cart item:",xt),null;const ct=xt.product||{};let it=[];Array.isArray(ct.imageUrls)?it=ct.imageUrls.filter(Nt=>typeof Nt=="string"&&Nt.match(/^https?:\/\/.+/i)):ct.imageUrl&&typeof ct.imageUrl=="string"&&ct.imageUrl.match(/^https?:\/\/.+/i)&&(it=[ct.imageUrl]);const Je=await Promise.all(it.map(Nt=>EC(Nt)));let Ye=it.filter((Nt,Kt)=>Je[Kt]);Ye.length===0&&(Ye=[po],x(Nt=>({...Nt,[xt.productId]:!0})),console.warn("No valid imageUrls for product:",ct.name||"Unknown","Using placeholder"));const Ze=_e(J,"products",xt.productId),ut=await Ge(Ze),je=ut.exists()&&ut.data().category||"default",He=ut.exists()?ut.data().sellerId:"default-seller-id",mt=ut.exists()&&ut.data().stock||10,Dt=nt[je]||{taxRate:.075,buyerProtectionRate:.02,handlingRate:.05},dt=(ct.price||0)*(1+Dt.taxRate+Dt.buyerProtectionRate+Dt.handlingRate);return{...xt,product:{...ct,imageUrls:Ye,category:je,sellerId:He,totalPrice:dt,stock:mt},currentImage:Ye[0],slideDirection:"right"}}))).filter(xt=>xt!==null);s(lt),f(lt.reduce((xt,ct)=>({...xt,[ct.productId]:!0}),{}))}catch(Ve){console.error("Error updating cart:",Ve),console.log("Logging to Sentry:",Ve),Ne.error("Failed to update cart.",{position:"top-right",autoClose:3e3})}},Ae=()=>{clearTimeout(I);const Ve=setTimeout(()=>{Ne.warn("Session inactive. Please refresh or log in again.",{position:"top-right",autoClose:5e3}),t("/login")},30*60*1e3);C(Ve)};window.addEventListener("cartUpdated",Oe),window.addEventListener("mousemove",Ae),window.addEventListener("keydown",Ae);const qe=we.onAuthStateChanged(Ve=>{l(!!Ve),te(),Ae()});return()=>{qe(),window.removeEventListener("cartUpdated",Oe),window.removeEventListener("mousemove",Ae),window.removeEventListener("keydown",Ae),clearTimeout(I)}},[]);const M=async(te,Oe)=>{try{const Ae=we.currentUser,qe=e.map(Ve=>Ve.productId===te?{...Ve,quantity:Math.max(1,Math.min(Oe,Ve.product.stock||10))}:Ve);await rc(Ae==null?void 0:Ae.uid,qe),s(qe),Ne.info("Quantity updated.",{position:"top-right",autoClose:2e3})}catch(Ae){console.error("Error updating quantity:",Ae),console.log("Logging to Sentry:",Ae),Ne.error("Failed to update quantity.",{position:"top-right",autoClose:3e3})}},Y=e.reduce((te,Oe)=>te+(Oe.quantity||0),0),Q=e.reduce((te,Oe)=>{var Ae;return te+(((Ae=Oe.product)==null?void 0:Ae.totalPrice)||0)*(Oe.quantity||0)},0),H=Q<E,W=d.country==="United Kingdom"?"GBP":"NGN",de=48e-5,ge=W==="GBP"?Q*de:Q;_.useEffect(()=>{console.log("Subtotal NGN:",Q.toLocaleString("en-NG",{minimumFractionDigits:2})),console.log("Total Amount:",ge.toLocaleString("en-NG",{minimumFractionDigits:2}),"(",W,")")},[Q,ge,W]);const z=te=>{const{name:Oe,value:Ae,type:qe,checked:Ve}=te.target;u(Xe=>({...Xe,[Oe]:qe==="checkbox"?Ve:Ae})),j(Xe=>({...Xe,[Oe]:""})),Oe==="country"&&Ae!==d.country&&Ne.info(`Currency will change to ${Ae==="United Kingdom"?"GBP":"NGN"}.`,{position:"top-right",autoClose:3e3})},G=()=>{const te={},{name:Oe,email:Ae,address:qe,city:Ve,postalCode:Xe,country:Et,phone:Qe}=d;return Oe||(te.name="Full name is required."),Ae?/\S+@\S+\.\S+/.test(Ae)||(te.email="Invalid email address."):te.email="Email is required.",Qe||(te.phone="Phone number is required."),qe||(te.address="Address is required."),Ve||(te.city="City is required."),Xe||(te.postalCode="Postal code is required."),["Nigeria","United Kingdom"].includes(Et)||(te.country="Select Nigeria or United Kingdom."),{isValid:Object.keys(te).length===0,errors:te}},X=_.useMemo(()=>G(),[d]),re=async te=>{var Oe,Ae,qe,Ve,Xe,Et,Qe,nt,It,lt,xt;try{U(!0);const ct="https://foremade-backend.onrender.com";console.log("Backend URL:",ct),console.log("Sending order confirmation email with payload:",{orderId:te.paymentId||"unknown",email:((Oe=te.shippingDetails)==null?void 0:Oe.email)||"unknown",items:te.items,total:te.totalAmount||0,currency:te.currency||"unknown",shippingDetails:te.shippingDetails||{}});const it={orderId:te.paymentId||`fallback-${Date.now()}`,email:((Ae=te.shippingDetails)==null?void 0:Ae.email)||d.email,items:(te.items||[]).map(Ze=>({productId:Ze.productId||"unknown",quantity:Ze.quantity||1,price:Ze.price||0,name:Ze.name||"Unknown Product",sellerId:Ze.sellerId||"unknown",imageUrls:Array.isArray(Ze.imageUrls)?Ze.imageUrls:[po]})),total:te.totalAmount||0,currency:te.currency||W,shippingDetails:{name:((qe=te.shippingDetails)==null?void 0:qe.name)||d.name||"Unknown",address:((Ve=te.shippingDetails)==null?void 0:Ve.address)||d.address||"Unknown",city:((Xe=te.shippingDetails)==null?void 0:Xe.city)||d.city||"",postalCode:((Et=te.shippingDetails)==null?void 0:Et.postalCode)||d.postalCode||"",country:((Qe=te.shippingDetails)==null?void 0:Qe.country)||d.country||"",phone:((nt=te.shippingDetails)==null?void 0:nt.phone)||d.phone||""}};if(!it.email||!/\S+@\S+\.\S+/.test(it.email))throw new Error("Invalid or missing email address");if(!it.items.length)throw new Error("No items provided");let Je=2,Ye=null;for(;Je>0;)try{const Ze=await Ut.post(`${ct}/send-order-confirmation`,it,{timeout:1e4});console.log("Order confirmation email sent successfully:",Ze.data);return}catch(Ze){if(Ye=Ze,Je--,Je===0||((It=Ze.response)==null?void 0:It.status)!==400)throw Ze;console.warn(`Retrying email send (${Je} attempts left)...`),await new Promise(ut=>setTimeout(ut,2e3))}throw Ye||new Error("Failed to send email after retries")}catch(ct){console.error("Error sending order confirmation email:",{message:ct.message,status:(lt=ct.response)==null?void 0:lt.status,responseData:(xt=ct.response)==null?void 0:xt.data,stack:ct.stack}),console.log("Logging to Sentry:",ct),Ne.warn("Order placed successfully, but failed to send confirmation email. Please check your email later.",{position:"top-right",autoClose:5e3})}finally{U(!1)}},xe=async(te,Oe,Ae,qe)=>{var Ve,Xe,Et;try{U(!0);const Qe="https://foremade-backend.onrender.com";for(const[nt,It]of Object.entries(te)){const lt=Oe.find(Ze=>Ze.includes(nt))||`order-${Date.now()}-${nt}`,xt=It.reduce((Ze,ut)=>{var je;return Ze+(((je=ut.product)==null?void 0:je.totalPrice)||0)*(ut.quantity||0)},0),ct=Ae==="GBP"?xt*de:xt,it={orderId:lt,sellerId:nt,items:It.map(Ze=>{var ut,je,He;return{productId:Ze.productId||"unknown",quantity:Ze.quantity||1,price:((ut=Ze.product)==null?void 0:ut.totalPrice)||0,name:((je=Ze.product)==null?void 0:je.name)||"Unknown Product",imageUrls:Array.isArray((He=Ze.product)==null?void 0:He.imageUrls)?Ze.product.imageUrls:[po]}}),total:ct,currency:Ae,shippingDetails:{name:qe.name||"Unknown",address:qe.address||"Unknown",city:qe.city||"",postalCode:qe.postalCode||"",country:qe.country||"",phone:qe.phone||""}};console.log("Sending seller notification email with payload:",{orderId:lt,sellerId:nt,items:it.items,total:ct,currency:Ae,shippingDetails:it.shippingDetails});let Je=2,Ye=null;for(;Je>0;)try{const Ze=await Ut.post(`${Qe}/send-seller-order-notification`,it,{timeout:1e4});console.log(`Seller notification email sent successfully for seller ${nt}:`,Ze.data);break}catch(Ze){if(Ye=Ze,Je--,Je===0||((Ve=Ze.response)==null?void 0:Ve.status)!==400)throw Ze;console.warn(`Retrying seller email send for ${nt} (${Je} attempts left)...`),await new Promise(ut=>setTimeout(ut,2e3))}if(Je===0)throw Ye||new Error(`Failed to send seller email for ${nt} after retries`)}}catch(Qe){console.error("Error sending seller notification emails:",{message:Qe.message,status:(Xe=Qe.response)==null?void 0:Xe.status,responseData:(Et=Qe.response)==null?void 0:Et.data,stack:Qe.stack}),console.log("Logging to Sentry:",Qe),Ne.warn("Order placed successfully, but failed to notify some sellers. They may receive notifications later.",{position:"top-right",autoClose:5e3})}finally{U(!1)}},ze=_.useCallback(async te=>{var Oe,Ae;try{if(e.length===0){Ne.error("Cart is empty.",{position:"top-right",autoClose:3e3});return}const qe=G();if(!qe.isValid){j(qe.errors),Ne.error("Please fix form errors.",{position:"top-right",autoClose:3e3}),V.current.scrollIntoView({behavior:"smooth"});return}if(H){Ne.error(`Total amount must be at least ${E.toLocaleString("en-NG")} to proceed.`,{position:"top-right",autoClose:3e3});return}console.log("Payment data:",te),(!te||!te.id&&!te.reference)&&(console.warn("Invalid payment data:",te),console.log("Logging to Sentry:",new Error("Invalid payment data received")));const Ve=((Oe=we.currentUser)==null?void 0:Oe.uid)||"anonymous",Xe=`order-${Date.now()}`,Et=d.country==="United Kingdom"?"Stripe":"Paystack",Qe=(te==null?void 0:te.id)||(te==null?void 0:te.reference)||`fallback-${Xe}`,nt={};e.forEach(it=>{var Ye;const Je=((Ye=it.product)==null?void 0:Ye.sellerId)||"default-seller-id";nt[Je]||(nt[Je]=[]),nt[Je].push(it)});let It=null;const lt=[],xt=[];await lz(J,async it=>{const Je=e.map(Fe=>_e(J,"products",Fe.productId)),Ye=await Promise.all(Je.map(Fe=>it.get(Fe))),Ze=[];Ye.forEach((Fe,dt)=>{var Er;if(!Fe.exists()){console.warn(`Product ${e[dt].productId} does not exist. Skipping stock update.`);return}const Nt=Fe.data().stock||0,Kt=e[dt].quantity||0,Qs=Nt-Kt;if(Qs<0)throw new Error(`Insufficient stock for product ${e[dt].productId} (${((Er=e[dt].product)==null?void 0:Er.name)||"Unknown"})`);Ze.push({ref:Je[dt],newStock:Qs})});const ut=Object.keys(nt).map(Fe=>_e(J,"wallets",Fe)),He=(await Promise.all(ut.map(Fe=>it.get(Fe)))).map((Fe,dt)=>({ref:ut[dt],exists:Fe.exists(),data:Fe.exists()?Fe.data():null,sellerId:Object.keys(nt)[dt]}));console.log("Seller wallets before update:",He.map(Fe=>{var dt,Nt;return{sellerId:Fe.sellerId,exists:Fe.exists,pendingBalance:((dt=Fe.data)==null?void 0:dt.pendingBalance)||0,availableBalance:((Nt=Fe.data)==null?void 0:Nt.availableBalance)||0}}));const mt=[];He.forEach(({ref:Fe,exists:dt,data:Nt,sellerId:Kt})=>{const Qs=nt[Kt],Er=Qs.reduce((as,pr)=>{var Ps;return as+(((Ps=pr.product)==null?void 0:Ps.totalPrice)||0)*(pr.quantity||0)},0),Rs=W==="GBP"?Er*de:Er,ks={id:Xe,userId:Ve,sellerId:Kt,items:Qs.map(as=>{var pr,Ps,zr,xr;return{productId:as.productId||"unknown",quantity:as.quantity||0,price:((pr=as.product)==null?void 0:pr.totalPrice)||0,name:((Ps=as.product)==null?void 0:Ps.name)||"Unknown",sellerId:((zr=as.product)==null?void 0:zr.sellerId)||Kt,imageUrls:((xr=as.product)==null?void 0:xr.imageUrls)||[po]}}),totalAmount:Rs,date:new Date().toISOString(),createdAt:ha(),shippingDetails:d,status:"pending-approval",paymentGateway:Et,paymentId:Qe,currency:W},ns=`${Xe}-${Kt}`;mt.push({order:ks,orderId:ns}),xt.push(ns);const Zr=(dt&&(Nt==null?void 0:Nt.pendingBalance)||0)+Rs;lt.push({sellerId:Kt,amount:Rs}),it.set(Fe,{availableBalance:dt&&(Nt==null?void 0:Nt.availableBalance)||0,pendingBalance:Zr,updatedAt:ha(),...dt?{}:{createdAt:ha()}},{merge:!0}),console.log(`Updated wallet for seller ${Kt}:`,{pendingBalance:Zr,availableBalance:dt&&(Nt==null?void 0:Nt.availableBalance)||0})}),mt.forEach(({order:Fe,orderId:dt})=>{const Nt=_e(J,"orders",dt);try{it.set(Nt,Fe)}catch(Kt){throw console.error(`Error saving order ${dt}:`,Kt),Kt}It=Fe}),Ze.forEach(({ref:Fe,newStock:dt})=>{it.update(Fe,{stock:dt})});const Dt=mt.map(({order:Fe})=>wn(Ue(J,"transactions"),{userId:Fe.sellerId,type:"Sale",description:`Sale from order ${Fe.id}`,amount:Fe.totalAmount,date:new Date().toISOString().split("T")[0],status:"Pending",createdAt:ha(),reference:Fe.paymentId}));await Promise.all(Dt)});const ct=await Promise.all(lt.map(async({sellerId:it})=>{const Je=_e(J,"wallets",it),Ye=await Ge(Je);return{sellerId:it,exists:Ye.exists(),data:Ye.exists()?Ye.data():null}}));if(console.log("Seller wallets after update:",ct),we.currentUser&&d.saveInfo){const it=_e(J,"users",we.currentUser.uid);await ts(it,d,{merge:!0})}It&&xt.length>0&&await re({...It,paymentId:xt[0],items:e.map(it=>{var Je,Ye,Ze,ut;return{productId:it.productId||"unknown",quantity:it.quantity||0,price:((Je=it.product)==null?void 0:Je.totalPrice)||0,name:((Ye=it.product)==null?void 0:Ye.name)||"Unknown",sellerId:((Ze=it.product)==null?void 0:Ze.sellerId)||"unknown",imageUrls:((ut=it.product)==null?void 0:ut.imageUrls)||[po]}})}),await xe(nt,xt,W,d),await ix((Ae=we.currentUser)==null?void 0:Ae.uid),s([]),Ne.success(n.jsxs("div",{children:[n.jsx("strong",{children:"Payment Successful!"}),n.jsx("p",{children:"Your order has been placed. Check your email for confirmation."})]}),{position:"top-right",autoClose:5e3,style:cJ,icon:n.jsx("i",{className:"bx bx-check-circle text-blue-500 text-xl"})}),t("/order-confirmation",{state:{order:{...It,items:e}}})}catch(qe){console.error("Checkout error:",qe),console.log("Logging to Sentry:",qe),Ne.error(qe.message||"Failed to place order. Please try again.",{position:"top-right",autoClose:3e3})}finally{O(!1)}},[e,Q,H,d,ge,t,Y,W,B,E]),me=()=>{Ne.info("Payment cancelled.",{position:"top-right",autoClose:3e3}),O(!1)},Ce=(te,Oe,Ae,qe)=>{s(Ve=>Ve.map(Xe=>Xe.productId===te?{...Xe,currentImage:Oe,slideDirection:Ae>qe?"right":"left"}:Xe)),console.log("Cart item image updated:",{itemId:te,url:Oe,direction:Ae>qe?"right":"left"})},ve=(te,Oe)=>{f(Ae=>({...Ae,[te]:Oe?Ae[te]:!1})),x(Ae=>({...Ae,[te]:!1})),console.log(`Image ${Oe?"thumbnail":"main"} loaded for productId: ${te}`)},Z=(te,Oe)=>{console.error(`Image load error for productId: ${Oe}`,{imageUrl:te.target.src,productId:Oe}),f(Ae=>({...Ae,[Oe]:!1})),x(Ae=>({...Ae,[Oe]:!0})),te.target.src=po};return r?n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ii,{}),n.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Loading..."})]})}):n.jsxs("div",{className:"container mx-auto px-4 py-8 relative mb-20",children:[(k||P)&&n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-40",children:[n.jsx(Ii,{}),n.jsx("p",{className:"text-white ml-4",children:P?"Sending confirmation email...":"Processing payment..."})]}),n.jsx("style",{children:`
          @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          .slide-in-right { animation: slideInRight 0.3s ease-in-out forwards; }
          .slide-in-left { animation: slideInLeft 0.3s ease-in-out forwards; }
          .image-zoom:hover { transform: scale(1.05); transition: transform 0.3s ease; }
        `}),n.jsx(uJ,{}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-cart text-blue-600"}),"Checkout"]}),n.jsxs(ue,{to:"/cart",className:"text-blue-600 hover:underline text-sm flex items-center gap-1","aria-label":"Back to Cart",children:[n.jsx("i",{className:"bx bx-arrow-back"}),"Back to Cart"]})]}),e.length===0?n.jsx("div",{className:"text-center",children:n.jsxs("p",{className:"text-gray-600 mb-4",children:["Your cart is empty."," ",n.jsx(ue,{to:"/products",className:"text-blue-600 hover:underline",children:"Continue shopping"})]})}):n.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[n.jsxs("div",{className:"flex-1 bg-white p-6 rounded-lg shadow-md",ref:V,children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-home text-blue-600"}),"Shipping Details"]}),n.jsxs("form",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:["Full Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-user absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"name",name:"name",value:d.name,onChange:z,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${v.name?"border-red-500":"border-gray-300"}`,required:!0,disabled:r,"aria-invalid":!!v.name,"aria-describedby":v.name?"name-error":void 0})]}),v.name&&n.jsx("p",{id:"name-error",className:"text-red-600 text-xs mt-1",children:v.name})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-envelope absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",id:"email",name:"email",value:d.email,onChange:z,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${v.email?"border-red-500":"border-gray-300"}`,required:!0,disabled:r,"aria-invalid":!!v.email,"aria-describedby":v.email?"email-error":void 0})]}),v.email&&n.jsx("p",{id:"email-error",className:"text-red-600 text-xs mt-1",children:v.email})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:["Phone ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-phone absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"phone",name:"phone",value:d.phone,onChange:z,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${v.phone?"border-red-500":"border-gray-300"}`,required:!0,disabled:r,"aria-invalid":!!v.phone,"aria-describedby":v.phone?"phone-error":void 0})]}),v.phone&&n.jsx("p",{id:"phone-error",className:"text-red-600 text-xs mt-1",children:v.phone})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:["Address ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-map absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"address",name:"address",value:d.address,onChange:z,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${v.address?"border-red-500":"border-gray-300"}`,required:!0,disabled:r,"aria-invalid":!!v.address,"aria-describedby":v.address?"address-error":void 0})]}),v.address&&n.jsx("p",{id:"address-error",className:"text-red-600 text-xs mt-1",children:v.address})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:["City ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-city absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"city",name:"city",value:d.city,onChange:z,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${v.city?"border-red-500":"border-gray-300"}`,required:!0,disabled:r,"aria-invalid":!!v.city,"aria-describedby":v.city?"city-error":void 0})]}),v.city&&n.jsx("p",{id:"city-error",className:"text-red-600 text-xs mt-1",children:v.city})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:["Postal Code ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-mail-send absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:d.postalCode,onChange:z,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${v.postalCode?"border-red-500":"border-gray-300"}`,required:!0,disabled:r,"aria-invalid":!!v.postalCode,"aria-describedby":v.postalCode?"postalcode-error":void 0})]}),v.postalCode&&n.jsx("p",{id:"postalcode-error",className:"text-red-600 text-xs mt-1",children:v.postalCode})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:["Country ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-world absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsxs("select",{id:"country",name:"country",value:d.country,onChange:z,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${v.country?"border-red-500":"border-gray-300"}`,required:!0,disabled:r,"aria-invalid":!!v.country,"aria-describedby":v.country?"country-error":void 0,children:[n.jsx("option",{value:"",children:"Select a country"}),n.jsx("option",{value:"Nigeria",children:"Nigeria"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"})]})]}),v.country&&n.jsx("p",{id:"country-error",className:"text-red-600 text-xs mt-1",children:v.country})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"saveInfo",name:"saveInfo",checked:d.saveInfo,onChange:z,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:r}),n.jsx("label",{htmlFor:"saveInfo",className:"ml-2 text-sm text-gray-600",children:"Save shipping information for future purchases"})]})]}),n.jsxs("div",{className:"mt-8",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-package text-blue-600"}),"Cart Items",n.jsxs("span",{className:"ml-2 text-xs text-gray-500 cursor-help relative group","aria-label":"Prices include tax, buyer protection, and handling fees.",children:[n.jsx("i",{className:"bx bx-info-circle"}),n.jsx("span",{className:"absolute hidden group-hover:block bg-gray-800 text-white text-xs rounded-lg p-2 -top-10 left-0 w-48 z-10",children:"Prices include tax, buyer protection, and handling fees."})]})]}),e.map(te=>{var Oe,Ae,qe,Ve,Xe,Et,Qe,nt;return n.jsxs("div",{className:"flex items-start gap-4 mb-4 border-b pb-4",children:[n.jsxs("div",{className:"w-24 h-24 relative overflow-hidden rounded-lg image-zoom",children:[h[te.productId]&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200",children:n.jsx(Ii,{size:"small"})}),n.jsx("img",{src:te.currentImage||po,alt:((Oe=te.product)==null?void 0:Oe.name)||"Product Image",className:`absolute w-full h-full object-cover ${te.slideDirection==="right"?"slide-in-right":"slide-in-left"} ${h[te.productId]||p[te.productId]?"opacity-50":"opacity-100"}`,onLoad:()=>ve(te.productId,!1),onError:It=>Z(It,te.productId),loading:"lazy","aria-label":`Image for ${((Ae=te.product)==null?void 0:Ae.name)||"Unknown Product"}`}),p[te.productId]&&n.jsx("div",{className:"absolute bottom-0 left-0 bg-red-600 text-white text-xs px-1 rounded",children:"Image Failed"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-800",children:((qe=te.product)==null?void 0:qe.name)||"Unknown"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[W," ",((((Ve=te.product)==null?void 0:Ve.totalPrice)||0)*(te.quantity||0)).toLocaleString("en-US",{minimumFractionDigits:2})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("label",{htmlFor:`quantity-${te.productId}`,className:"text-sm text-gray-600",children:"Qty:"}),n.jsx("input",{type:"number",id:`quantity-${te.productId}`,value:te.quantity||1,onChange:It=>M(te.productId,parseInt(It.target.value)),min:"1",max:((Xe=te.product)==null?void 0:Xe.stock)||10,className:"w-16 p-1 border rounded-lg focus:ring-2 focus:ring-blue-500","aria-label":`Quantity for ${((Et=te.product)==null?void 0:Et.name)||"Unknown"}`})]}),((nt=(Qe=te.product)==null?void 0:Qe.imageUrls)==null?void 0:nt.length)>1&&n.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto",children:te.product.imageUrls.map((It,lt)=>{var xt;return n.jsx("img",{src:It,alt:`${((xt=te.product)==null?void 0:xt.name)||"Unknown"} ${lt+1}`,className:`w-10 h-10 object-cover rounded border cursor-pointer ${te.currentImage===It?"border-blue-500 border-2":"border-gray-300"} ${h[te.productId]||p[te.productId]?"opacity-50":"opacity-100"}`,onClick:()=>Ce(te.productId,It,lt,te.product.imageUrls.indexOf(te.currentImage)),onLoad:()=>ve(te.productId,!0),onError:ct=>Z(ct,te.productId),loading:"lazy"},`${te.productId}-${lt}`)})})]})]},te.productId)})]})]}),n.jsx("div",{className:"w-full lg:w-1/3",children:n.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md sticky top-4",children:[n.jsx("img",{src:lJ,alt:"Accepted payment cards",className:"mb-6 w-auto h-8"}),n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-receipt text-blue-600"}),"Order Summary"]}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Total Items"}),n.jsx("span",{children:Y})]}),e.map(te=>{var Oe,Ae;return n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"truncate w-2/3",children:[((Oe=te.product)==null?void 0:Oe.name)||"Unknown"," (x",te.quantity||0,")"]}),n.jsxs("span",{children:[W," ",((((Ae=te.product)==null?void 0:Ae.totalPrice)||0)*(te.quantity||0)).toLocaleString("en-US",{minimumFractionDigits:2})]})]},te.productId)}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{children:[W," ",Q.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Shipping"}),n.jsx("span",{className:"text-green-600 font-semibold bg-green-100 px-2 py-1 rounded-full",children:"Free"})]}),n.jsxs("div",{className:"flex justify-between font-bold text-gray-800 border-t pt-2",children:[n.jsx("span",{children:"Grand Total"}),n.jsxs("span",{children:[W," ",Q.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),H&&n.jsxs("p",{className:"text-red-600 text-xs mt-2 bg-red-50 p-2 rounded",children:[" Minimum purchase amount is ",E.toLocaleString("en-NG")," to checkout."]}),n.jsxs("div",{className:"mt-6 border-t pt-4",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-home text-blue-600"}),"Shipping Information"]}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",d.name||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",d.email||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",d.phone||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Address:"})," ",d.address||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"City:"})," ",d.city||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Postal Code:"})," ",d.postalCode||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Country:"})," ",d.country||"Not provided"]})]})]}),i&&X.isValid&&e.length>0&&!H&&n.jsxs("div",{className:"mt-6",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-credit-card text-blue-600"}),"Payment Details"]}),d.country==="United Kingdom"?n.jsx(H6,{stripe:dJ,children:n.jsx(mJ,{totalPrice:Q*de,formData:d,onSuccess:te=>O(!0),onCancel:me,currency:W,setIsProcessing:T})}):d.country==="Nigeria"?n.jsx(oJ,{email:d.email,amount:Q*100,onSuccess:te=>O(!0),onClose:me,disabled:!X.isValid||e.length===0||r||H,buttonText:"Pay Now",className:`w-full py-3 px-4 rounded-lg text-white text-sm font-medium transition duration-200 shadow transform hover:scale-105 ${!X.isValid||e.length===0||r||H?"bg-gray-400 cursor-not-allowed":"bg-blue-900 hover:bg-blue-800"}`,iconClass:"bx bx-cart mr-2",sellerId:((Te=(Se=e[0])==null?void 0:Se.product)==null?void 0:Te.sellerId)||"default-seller-id"}):n.jsx("p",{className:"text-red-600 text-sm",children:"Please select a valid country."})]}),!i&&n.jsxs("div",{className:"mt-4 text-sm text-red-600",children:["Please"," ",n.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"log in"})," ","to proceed with payment."]})]})})]}),n.jsx(hJ,{isOpen:R,onConfirm:ze,onCancel:me}),B]})},gJ=()=>{const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l=Ns();_.useEffect(()=>{const f=async()=>{try{if(!we.currentUser){i("Please sign in to view your orders."),r(!1);return}const x=Rt(Ue(J,"orders"),ht("userId","==",we.currentUser.uid)),w=await yt(x),N=await Promise.all(w.docs.map(async v=>{const j=v.data(),k=Array.isArray(j.items)?j.items:[],T=j.total||0,P=j.paymentId||`TRK-${v.id.slice(0,8)}`;let U={sellerId:null,displayName:"Unknown Seller",avatar:null};if(k.length>0&&k[0].productId)try{const R=_e(J,"products",k[0].productId),O=await Ge(R);if(O.exists()){const C=O.data().sellerId;if(C){const E=_e(J,"users",C),D=await Ge(E);if(D.exists()){const V=D.data();U={sellerId:C,displayName:V.displayName||"Unknown Seller",avatar:V.avatar||"https://ui-avatars.com/api/?name=S&background=3b82f6&color=fff&size=40"}}}}}catch(R){console.error("Error fetching seller data:",R.message)}return{orderId:v.id,trackingId:P,total:T,date:j.date||new Date().toISOString(),items:k,seller:U}}));e(N)}catch(x){i(`Failed to load orders: ${x.message}`)}finally{r(!1)}},p=we.onAuthStateChanged(x=>{x?f():(i("Please sign in to view your orders."),r(!1))});return()=>p()},[]);const d=f=>`${f.toLocaleString("en-NG",{minimumFractionDigits:2})}`,u=f=>{var p;l(`/chat/${f.orderId}`,{state:{sellerId:f.seller.sellerId,productName:((p=f.items[0])==null?void 0:p.name)||"Product",orderId:f.orderId,role:"buyer"}})},h=f=>{try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown Date"}};return s?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(Ii,{}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading orders..."})]}):a?n.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:n.jsxs(St.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[n.jsx("p",{className:"text-red-600 dark:text-red-400 text-lg font-medium",children:a}),n.jsx(ue,{to:"/login",className:"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-500 font-medium underline transition",children:"Go to Login"})]})}):n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx(ru,{}),n.jsx(St.div,{className:"md:w-3/4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Your Orders"}),t.length===0?n.jsxs(St.p,{initial:{opacity:0},animate:{opacity:1},className:"text-gray-600 dark:text-gray-400",children:["No orders found."," ",n.jsx(ue,{to:"/products",className:"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-500 font-medium underline",children:"Start shopping"})]}):n.jsx("div",{className:"space-y-4",children:n.jsx(Md,{children:t.map(f=>n.jsxs(St.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"bg-white dark:bg-gray-700 rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:f.seller.avatar,alt:"Seller",className:"w-10 h-10 rounded-full border border-gray-200 dark:border-gray-600"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:["Order #",f.orderId]}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Seller: ",f.seller.displayName]})]})]}),n.jsx(St.button,{onClick:()=>u(f),whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-2 sm:mt-0 px-4 py-2 bg-green-600 text-white rounded-full text-sm font-medium hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 transition",children:"Chat with Seller"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Tracking ID: ",f.trackingId]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Date: ",h(f.date)]})]}),n.jsx("div",{className:"space-y-2",children:f.items.map((p,x)=>n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300",children:[n.jsxs("span",{children:[p.name," x",p.quantity]}),n.jsx("span",{children:d(p.price*p.quantity)})]},x))}),n.jsxs("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mt-4",children:["Total: ",d(f.total)]})]},f.orderId))})})]})})]})})};function pJ(){const[t,e]=_.useState(!0),[s,r]=_.useState(""),[a,i]=_.useState(!1),[l,d]=_.useState(null),[u,h]=_.useState([]),[f,p]=_.useState({street:"",city:"",state:"",country:"",postalCode:""}),[x,w]=_.useState({}),[N,v]=_.useState(null),[j,k]=_.useState(0),[T]=_.useState(3),P="orderHistory_1",U=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,R=()=>{try{const V=localStorage.getItem(P);return V?JSON.parse(V).length:0}catch(V){return console.error("Error getting order count:",V),0}};_.useEffect(()=>{const V=we.onAuthStateChanged(async M=>{var Y;try{if(console.log("Auth state changed at:",new Date().toISOString()),!M){console.log("No user found, redirecting to login"),r("Please sign in to manage your addresses."),i(!0),e(!1);return}console.log("User authenticated, UID:",M.uid);const Q=localStorage.getItem("userData");let H={};if(Q)try{H=JSON.parse(Q),(typeof H.name!="string"||H.name.includes("{"))&&(console.warn("Corrupted name field:",H.name),H.name="Emmanuel Chinecherem"),typeof H.username!="string"&&(H.username="emmaChi")}catch(G){console.error("Error parsing userData:",G),H={}}console.log("Fetching Firestore data for UID:",M.uid);const W=_e(J,"users",M.uid),de=await Ge(W);if(!de.exists()){console.warn("User document not found in Firestore:",M.uid),r("User profile not found."),e(!1);return}const ge=de.data();console.log("Firestore data fetched:",ge);const z=ge.addresses||H.addresses||[];d({email:M.email||"test@example.com",username:H.username||M.displayName||"emmaChi",name:H.name||M.displayName||"Emmanuel Chinecherem",profileImage:H.profileImage||null,createdAt:H.createdAt||"2025-05-04T23:28:48.857Z",address:H.address||((Y=z[0])!=null&&Y.street?`${z[0].street}, ${z[0].city}, ${z[0].state}, ${z[0].postalCode}, ${z[0].country}`:"Not provided"),addresses:z,uid:M.uid}),h(z),k(R())}catch(Q){console.error("Error in useEffect:",Q.message,Q.stack),r("Failed to load addresses. Please try again.")}finally{console.log("Setting loading to false at:",new Date().toISOString()),e(!1)}},M=>{console.error("Auth state error:",M),r("Authentication error. Please try again."),e(!1)}),B=()=>k(R());return window.addEventListener("orderPlaced",B),()=>{console.log("Cleaning up useEffect"),V(),window.removeEventListener("orderPlaced",B)}},[]);const O=()=>{const V={};return f.street.trim()||(V.street="Street is required."),f.city.trim()||(V.city="City is required."),f.state.trim()||(V.state="State is required."),f.country.trim()||(V.country="Country is required."),f.postalCode.trim()||(V.postalCode="Postal code is required."),V},I=V=>{const{name:B,value:M}=V.target;p(Y=>({...Y,[B]:M})),w(Y=>({...Y,[B]:""}))},C=async V=>{V.preventDefault();const B=O();if(Object.keys(B).length>0){w(B);return}try{e(!0);const M={id:N||U(),street:f.street,city:f.city,state:f.state,country:f.country,postalCode:f.postalCode};let Y;N?Y=u.map(W=>W.id===N?M:W):Y=[...u,M];const Q=_e(J,"users",l.uid);await ts(Q,{addresses:Y,address:Y[0]?`${Y[0].street}, ${Y[0].city}, ${Y[0].state}, ${Y[0].postalCode}, ${Y[0].country}`:"Not provided"},{merge:!0});const H={...l,addresses:Y,address:Y[0]?`${Y[0].street}, ${Y[0].city}, ${Y[0].state}, ${Y[0].postalCode}, ${Y[0].country}`:"Not provided"};localStorage.setItem("userData",JSON.stringify(H)),h(Y),d(H),p({street:"",city:"",state:"",country:"",postalCode:""}),w({}),v(null)}catch(M){console.error("Error saving address:",M),r("Failed to save address. Please try again.")}finally{e(!1)}},E=V=>{p({street:V.street,city:V.city,state:V.state,country:V.country,postalCode:V.postalCode}),v(V.id)},D=async V=>{try{e(!0);const B=u.filter(Q=>Q.id!==V),M=_e(J,"users",l.uid);await ts(M,{addresses:B,address:B[0]?`${B[0].street}, ${B[0].city}, ${B[0].state}, ${B[0].postalCode}, ${B[0].country}`:"Not provided"},{merge:!0});const Y={...l,addresses:B,address:B[0]?`${B[0].street}, ${B[0].city}, ${B[0].state}, ${B[0].postalCode}, ${B[0].country}`:"Not provided"};localStorage.setItem("userData",JSON.stringify(Y)),h(B),d(Y)}catch(B){console.error("Error deleting address:",B),r("Failed to delete address. Please try again.")}finally{e(!1)}};return t?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(Ii,{}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]}):s?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600",children:s}),a?n.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline",children:"Go to Login"}):n.jsx("button",{onClick:()=>r(""),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]}):n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsx(ru,{userData:l,orderCount:j,wishlistCount:T}),n.jsxs("div",{className:"md:w-3/4",children:[n.jsxs("div",{className:"rounded-lg p-6 mb-6 bg-gray-50",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Personal Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Username"}),n.jsx("p",{className:"font-semibold text-gray-800",children:l.username})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"First Name"}),n.jsx("p",{className:"font-semibold text-gray-800",children:l.name.split(" ")[0]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400",children:"Last Name"}),n.jsx("p",{className:"font-semibold text-gray-800",children:l.name.split(" ").slice(1).join(" ")||"-"})]})]})]}),n.jsxs("div",{className:"rounded-lg p-6 mb-6 bg-gray-50",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:N?"Edit Address":"Add New Address"}),n.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-slate-400",children:"Street"}),n.jsx("input",{type:"text",name:"street",value:f.street,onChange:I,className:`w-full p-3 border rounded-lg ${x.street?"border-red-500":"border-gray-300"}`}),x.street&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.street})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-slate-400",children:"City"}),n.jsx("input",{type:"text",name:"city",value:f.city,onChange:I,className:`w-full p-3 border rounded-lg ${x.city?"border-red-500":"border-gray-300"}`}),x.city&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-slate-400",children:"State"}),n.jsx("input",{type:"text",name:"state",value:f.state,onChange:I,className:`w-full p-3 border rounded-lg ${x.state?"border-red-500":"border-gray-300"}`}),x.state&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.state})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-slate-400",children:"Country"}),n.jsx("input",{type:"text",name:"country",value:f.country,onChange:I,className:`w-full p-3 border rounded-lg ${x.country?"border-red-500":"border-gray-300"}`}),x.country&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.country})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-slate-400",children:"Postal Code"}),n.jsx("input",{type:"text",name:"postalCode",value:f.postalCode,onChange:I,className:`w-full p-3 border rounded-lg ${x.postalCode?"border-red-500":"border-gray-300"}`}),x.postalCode&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.postalCode})]}),n.jsxs("div",{className:"col-span-1 md:col-span-2",children:[n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",disabled:t,children:N?"Update Address":"Add Address"}),N&&n.jsx("button",{type:"button",onClick:()=>{p({street:"",city:"",state:"",country:"",postalCode:""}),v(null),w({})},className:"ml-2 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]}),n.jsxs("div",{className:"rounded-lg p-6 bg-gray-50",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Saved Addresses"}),u.length===0?n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-block p-4 rounded-full mb-2 bg-gray-100",children:n.jsx("i",{className:"bx bx-map text-2xl"})}),n.jsx("p",{className:"text-gray-400",children:"No addresses found!"})]}):n.jsx("div",{className:"space-y-4",children:u.map(V=>n.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-100 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:V.street}),n.jsxs("p",{className:"text-gray-600",children:[V.city,", ",V.state,", ",V.postalCode,", ",V.country]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>E(V),className:"text-blue-500 hover:text-blue-700",children:n.jsx("i",{className:"bx bx-edit text-lg"})}),n.jsx("button",{onClick:()=>D(V.id),className:"text-red-500 hover:text-red-700",children:n.jsx("i",{className:"bx bx-trash text-lg"})})]})]},V.id))})]})]})]})})}function xJ(){const[t,e]=_.useState(!0),[s,r]=_.useState(""),[a,i]=_.useState({name:"",username:"",email:"",country:"",phone:"",address:""}),[l,d]=_.useState(localStorage.getItem("profileImage")||null),[u,h]=_.useState(""),[f,p]=_.useState(""),[x,w]=_.useState(""),[N,v]=_.useState(""),[j,k]=_.useState(!1),[T,P]=_.useState(!1),[U,R]=_.useState(!0),[O,I]=_.useState(localStorage.getItem("theme")||"light"),C=Ns();_.useEffect(()=>{const H=we.onAuthStateChanged(async W=>{var de;if(e(!0),!W){r("Please sign in to edit your profile."),d(null),e(!1);return}try{const ge=_e(J,"users",W.uid),z=await Ge(ge);if(!z.exists()){r("User profile not found."),e(!1);return}const G=z.data(),X=G.addresses||[],re=(de=X[0])!=null&&de.street?`${X[0].street}, ${X[0].city}, ${X[0].state}, ${X[0].postalCode}, ${X[0].country}`:"Not provided";i({name:G.name||W.displayName||"Emmanuel Chinecherem",username:G.username||"emmachi789",email:W.email||"",country:G.country||"",phone:G.phone||"",address:re})}catch(ge){r("Failed to load profile data."),console.error("Error loading profile:",ge)}finally{e(!1)}});return document.documentElement.classList.toggle("dark",O==="dark"),()=>H()},[O]);const E=H=>{const{name:W,value:de}=H.target;i(ge=>({...ge,[W]:de}))},D=H=>{const W=H.target.files[0];if(W){if(!W.type.startsWith("image/")){h("Please upload a valid image file.");return}if(W.size>5*1024*1024){h("Image size must be less than 5MB.");return}h(""),e(!0);try{const de=new FileReader;de.onload=()=>{const ge=de.result;d(ge),localStorage.setItem("profileImage",ge),window.dispatchEvent(new Event("profileImageUpdated")),Ne.success("Profile image updated successfully!")},de.readAsDataURL(W)}catch(de){console.error("Error processing image:",de),h("Failed to process image. Please try again.")}finally{e(!1)}}},V=async()=>{v("");const H=we.currentUser;if(!H){v("Please sign in to change your password.");return}if(!f||!x){v("Please fill in both current and new password fields.");return}if(x.length<6){v("New password must be at least 6 characters long.");return}if(!/[A-Z]/.test(x)||!/[0-9]/.test(x)){v("New password must contain at least one uppercase letter and one number.");return}e(!0);try{const W=uc.credential(H.email,f);await L8(H,W),await F8(H,x),p(""),w(""),Ne.success("Password updated successfully!")}catch(W){console.error("Error changing password:",W),W.code==="auth/wrong-password"?v("Current password is incorrect."):W.code==="auth/requires-recent-login"?(v("Please log out and log in again to change your password."),C("/login")):v("Failed to change password. Please try again.")}finally{e(!1)}},B=async()=>{const H=we.currentUser;if(!H){r("Please sign in to save changes.");return}e(!0);try{const W=a.address.split(", "),de=W.length===5?{street:W[0],city:W[1],state:W[2],postalCode:W[3],country:W[4]}:{street:a.address,city:"",state:"",postalCode:"",country:a.country};await Qr(_e(J,"users",H.uid),{name:a.name,username:a.username,country:a.country,phone:a.phone,addresses:[de]}),localStorage.setItem("userData",JSON.stringify(a)),window.dispatchEvent(new Event("userDataUpdated")),Ne.success("Profile updated successfully!")}catch(W){console.error("Error saving profile:",W),r("Failed to save profile. Please try again.")}finally{e(!1)}},M=async()=>{e(!0);try{await we.signOut(),localStorage.removeItem("userData"),localStorage.removeItem("profileImage"),d(null),window.dispatchEvent(new Event("profileImageUpdated")),C("/login"),Ne.success("Logged out successfully!")}catch(H){console.error("Error logging out:",H),r("Failed to log out. Please try again.")}finally{e(!1)}},Y=()=>{const H=O==="light"?"dark":"light";I(H),localStorage.setItem("theme",H),document.documentElement.setAttribute("data-theme",H)},Q=()=>l?n.jsx("img",{src:l,alt:"Profile",className:"w-full h-full object-cover",onError:()=>d(null)}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-white text-2xl font-bold uppercase",children:a.email?a.email[0]:"U"});return t?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(Ii,{}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})]}):s?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600 dark:text-red-400",children:s}),n.jsx("button",{onClick:()=>r(""),className:"mt-6 px-6 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600 transition-colors",children:"Retry"})]}):n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-700",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx(ru,{}),n.jsxs("div",{className:"md:w-3/4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Settings"}),n.jsxs("div",{className:"rounded-lg p-6 bg-gray-50 dark:bg-gray-800 shadow-md",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Po,{size:20})," Profile Picture"]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden shadow",children:Q()}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("label",{className:"cursor-pointer text-blue-600 hover:text-blue-400 flex items-center gap-1",children:[n.jsx(C6,{size:16})," Choose Image",n.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"})]}),u&&n.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:u})]})]}),n.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Po,{size:20})," Personal Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:a.name,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Enter your name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Username"}),n.jsx("input",{type:"text",name:"username",value:a.username,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Enter your username"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:a.email,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",disabled:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Country"}),n.jsx("input",{type:"text",name:"country",value:a.country,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Enter your country"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Phone"}),n.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Enter your phone number"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:a.address,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Enter your address"})]})]}),n.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(QK,{size:20})," Security"]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:j?"text":"password",value:f,onChange:H=>p(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Enter current password"}),n.jsx("button",{onClick:()=>k(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-300",children:j?n.jsx(cC,{size:16}):n.jsx(dC,{size:16})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:T?"text":"password",value:x,onChange:H=>w(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",placeholder:"Enter new password"}),n.jsx("button",{onClick:()=>P(!T),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-300",children:T?n.jsx(cC,{size:16}):n.jsx(dC,{size:16})})]})]})]}),N&&n.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:N}),n.jsx("button",{onClick:V,className:"mt-4 px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-lg shadow-md hover:from-blue-600 hover:to-blue-800 transition-colors",children:"Change Password"})]}),n.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(T6,{size:20})," Preferences"]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Email Notifications"}),n.jsx("input",{type:"checkbox",checked:U,onChange:()=>R(!U),className:"h-5 w-5 text-blue-600 dark:bg-gray-700"})]}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Theme"}),n.jsxs("button",{onClick:Y,className:"px-6 py-2 bg-gray-200 dark:bg-gray-600 rounded-lg shadow hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:[O==="light"?n.jsx(nX,{size:16,className:"inline mr-1"}):n.jsx(vX,{size:16,className:"inline mr-1"}),O==="light"?"Switch to Dark":"Switch to Light"]})]})]}),n.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Po,{size:20})," Account Actions"]}),n.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[n.jsxs("button",{onClick:M,className:"px-3 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-lg shadow-md hover:from-red-600 hover:to-red-800 transition-colors flex items-center gap-1",children:[n.jsx(ZK,{size:16})," Log Out"]}),n.jsxs(ue,{to:"/profile",className:"px-6 py-2 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 rounded-lg shadow-md hover:from-gray-400 hover:to-gray-500 transition-colors dark:from-gray-600 dark:to-gray-700 dark:text-gray-200 dark:hover:from-gray-700 dark:hover:to-gray-800 flex items-center gap-1",children:[n.jsx(Vl,{size:16})," Cancel"]}),n.jsxs("button",{onClick:B,className:"px-3 py-2 bg-gradient-to-r from-green-500 to-green-700 text-white rounded-lg shadow-md hover:from-green-600 hover:to-green-800 transition-colors flex items-center gap-1",children:[n.jsx(dX,{size:16})," Save Changes"]})]}),s&&n.jsx("p",{className:"text-red-600 dark:text-red-400 mt-2",children:s})]})]})]})})}function yJ({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-gray-200 hover:text-white",children:""})]},s.id))})}function bJ(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(l=>l.id!==a))}}}function vJ(){var u,h,f,p,x,w,N,v,j;const{alerts:t,addAlert:e,removeAlert:s}=bJ(),[r,a]=_.useState(null),[i,l]=_.useState(!0),d=gr();return _.useEffect(()=>{(async()=>{var T,P,U;try{let O=new URLSearchParams(d.search).get("orderId")||((P=(T=d.state)==null?void 0:T.order)==null?void 0:P.id);if(console.log("Attempting to fetch order with ID:",O),!O){console.warn("No orderId provided in query params or state"),e("Order not found. Please check your link or contact support.","error"),l(!1);return}if(!O.startsWith("order-")){console.warn("Invalid orderId format:",O),e("Invalid order ID. Please contact support.","error"),l(!1);return}let I=null,C=3;for(;C>0;)try{const E=_e(J,"orders",O),D=await Ge(E);if(D.exists()){I={id:D.id,...D.data()},console.log("Order found:",I);break}console.warn(`Order ${O} not found on attempt ${4-C}`),C--,C>0&&await new Promise(V=>setTimeout(V,1e3))}catch(E){if(console.error("Firestore fetch error:",E),C--,C===0)throw E;await new Promise(D=>setTimeout(D,1e3))}if(!I&&O.includes("-")){const E=O.split("-").slice(0,2).join("-");console.log("Trying base orderId:",E);const D=Rt(Ue(J,"orders"),ht("id","==",E)),V=await yt(D);if(!V.empty){const B=V.docs[0];I={id:B.id,...B.data()},console.log("Found order with base ID:",I),O=B.id}}if(!I&&((U=d.state)!=null&&U.order)&&(console.log("Using state.order as fallback:",d.state.order),I={...d.state.order,id:O},e("Order loaded from session. Some details may be incomplete.","info")),!I){console.error("No order data found for ID:",O),e("Order not found. Please contact support at support@foremade.com.","error"),l(!1);return}a(I)}catch(R){console.error("Error fetching order:",{message:R.message,stack:R.stack}),e("Failed to load order. Please try again or contact support.","error")}finally{l(!1)}})()},[d,e]),i?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:n.jsxs("div",{className:"flex gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})}):r?n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 py-8",children:[n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-check-circle text-green-500"}),"Order Confirmation"]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:["Order #",r.id]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Thank you for your purchase! Your order has been successfully placed."}),n.jsx("div",{className:"space-y-4",children:r.items.map((k,T)=>{var P;return n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[n.jsx("img",{src:((P=k.imageUrls)==null?void 0:P[0])||"https://via.placeholder.com/150",alt:k.name||"Product",className:"w-16 h-16 object-cover rounded",onError:U=>{U.target.src="https://via.placeholder.com/150"}}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-bold text-gray-800 dark:text-gray-100",children:k.name||"Unknown Product"}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Quantity: ",k.quantity||1]}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Price: ",r.currency==="gbp"?"":"",((k.price||0)*(k.quantity||1)).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]},T)})}),n.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-600 pt-4",children:[n.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-300",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{children:[r.currency==="gbp"?"":"",(r.totalAmount||r.total||0).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),n.jsxs("div",{className:"flex justify-between font-semibold text-gray-800 dark:text-gray-100 mt-2",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:[r.currency==="gbp"?"":"",(r.totalAmount||r.total||0).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Shipping Details"}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[((u=r.shippingDetails)==null?void 0:u.name)||"Not provided",n.jsx("br",{}),((h=r.shippingDetails)==null?void 0:h.address)||"Not provided",n.jsx("br",{}),((f=r.shippingDetails)==null?void 0:f.city)||"",(p=r.shippingDetails)!=null&&p.city&&((x=r.shippingDetails)!=null&&x.postalCode)?", ":"",((w=r.shippingDetails)==null?void 0:w.postalCode)||"",n.jsx("br",{}),((N=r.shippingDetails)==null?void 0:N.country)||"Not provided",n.jsx("br",{}),n.jsx("strong",{children:"Email:"})," ",((v=r.shippingDetails)==null?void 0:v.email)||"Not provided",n.jsx("br",{}),n.jsx("strong",{children:"Phone:"})," ",((j=r.shippingDetails)==null?void 0:j.phone)||"Not provided"]})]})]})]}),n.jsx(yJ,{alerts:t,removeAlert:s})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:n.jsxs("div",{className:"text-center text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-error-circle text-4xl text-red-500 mb-2"}),n.jsxs("p",{children:["Order not found. Please contact ",n.jsx("a",{href:"mailto:support@foremade.com",className:"text-blue-600 hover:underline",children:"support@foremade.com"}),"."]})]})})}function wJ(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(""),[l,d]=_.useState(null),u=Ns();_.useEffect(()=>{const x=Sd(we,async w=>{if(w)try{console.log("Starting orders fetch for seller at:",new Date().toISOString()),console.log("Authenticated seller UID:",w.uid);const N=Ue(J,"products"),v=await yt(N);console.log("Products snapshot received, count:",v.docs.length);const j=v.docs.map(R=>({id:R.id,...R.data()})).filter(R=>R.sellerId===w.uid);if(console.log("Seller products fetched, count:",j.length),j.length===0){console.log("No products found for this seller."),e([]),r(!1);return}const k=j.map(R=>R.id);console.log("Seller product IDs:",k);const T=Ue(J,"orders"),P=await yt(T);console.log("Orders snapshot received, count:",P.docs.length);const U=P.docs.map(R=>({id:R.id,...R.data()})).filter(R=>R.items.some(O=>k.includes(O.productId))).map(R=>{const I=(Array.isArray(R.items)?R.items:[]).filter(C=>k.includes(C.productId));return{...R,items:I.map(C=>({productId:C.productId,name:C.name||"Unknown",quantity:C.quantity||0,price:C.price||0,sellerId:C.sellerId}))}}).sort((R,O)=>{var E,D;const I=((E=R.createdAt)==null?void 0:E.toDate())||new Date(0);return(((D=O.createdAt)==null?void 0:D.toDate())||new Date(0))-I});console.log("Filtered orders for seller, count:",U.length),e(U)}catch(N){console.error("Firestore fetch error:",{code:N.code,message:N.message,stack:N.stack}),i(`Failed to fetch user orders: ${N.message}.`)}else console.warn("No seller authenticated"),i("Please log in to view user orders."),u("/seller/login");r(!1)},w=>{console.error("Auth state error:",{code:w.code,message:w.message,stack:w.stack}),i("Authentication error: "+w.message),r(!1)});return()=>x()},[u]);const h=x=>{d(l===x?null:x)},f=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",p=(x,w)=>new Intl.NumberFormat("en-US",{style:"currency",currency:w||"NGN"}).format(x||0);return s?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):a?n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx(Ls,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6 font-serif",children:n.jsxs("div",{className:"max-w-4xl mx-auto bg-red-100 border-l-4 border-red-500 p-4 rounded-lg animate-fade-in",children:[n.jsx("p",{className:"text-red-700",children:a}),n.jsx("p",{className:"mt-2",children:n.jsx(ue,{to:"/seller/login",className:"text-blue-600 hover:underline",children:"Return to Login"})})]})})]}):n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx(Ls,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-4",children:n.jsxs("div",{className:"max-w-5xl mx-auto bg-white border border-gray-200 rounded-xl shadow-sm p-8 bg-gradient-to-br from-gray-50 to-white",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Your Orders"})}),t.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-gray-600 text-lg",children:"No orders found."}),n.jsx("p",{className:"mt-2",children:n.jsx(ue,{to:"/products-upload",className:"text-blue-600 hover:underline",children:"Upload products to start receiving orders"})})]}):n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full text-left border-collapse hidden md:table",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Order ID"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Customer"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Date"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Total"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Status"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Details"})]})}),n.jsx("tbody",{children:t.map(x=>{var w;return n.jsxs(ss.Fragment,{children:[n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[n.jsx("td",{className:"p-3 text-sm",children:x.orderId||x.id}),n.jsx("td",{className:"p-3 text-sm",children:((w=x.shippingDetails)==null?void 0:w.name)||"N/A"}),n.jsx("td",{className:"p-3 text-sm",children:f(x.createdAt)}),n.jsx("td",{className:"p-3 text-sm",children:p(x.sellerShare,x.currency)}),n.jsx("td",{className:"p-3 text-sm",children:n.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${x.status==="completed"?"bg-green-100 text-green-700":x.status==="pending-approval"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:x.status||"N/A"})}),n.jsx("td",{className:"p-3 text-sm",children:n.jsx("button",{onClick:()=>h(x.id),className:"text-blue-600 hover:underline",children:l===x.id?"Hide":"Show"})})]}),l===x.id&&n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"p-3 bg-gray-50",children:n.jsxs("div",{className:"pl-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Items"}),x.items&&x.items.length>0?n.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-600",children:x.items.map((N,v)=>n.jsxs("li",{children:[N.name," x",N.quantity," - ",p(N.price*N.quantity,x.currency)]},v))}):n.jsx("p",{className:"text-sm text-gray-600",children:"No items"})]})})})]},x.id)})})]}),n.jsx("div",{className:"md:hidden space-y-4",children:t.map(x=>{var w;return n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 hover:bg-gray-100",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Order ID:"}),n.jsx("span",{className:"text-sm",children:x.orderId||x.id})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Customer:"}),n.jsx("span",{className:"text-sm",children:((w=x.shippingDetails)==null?void 0:w.name)||"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Date:"}),n.jsx("span",{className:"text-sm",children:f(x.createdAt)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Total:"}),n.jsx("span",{className:"text-sm",children:p(x.sellerShare,x.currency)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Status:"}),n.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${x.status==="completed"?"bg-green-100 text-green-700":x.status==="pending-approval"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:x.status||"N/A"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Details:"}),n.jsx("button",{onClick:()=>h(x.id),className:"text-blue-600 hover:underline text-sm",children:l===x.id?"Hide":"Show"})]}),l===x.id&&n.jsxs("div",{className:"mt-2",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Items"}),x.items&&x.items.length>0?n.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-600",children:x.items.map((N,v)=>n.jsxs("li",{children:[N.name," x",N.quantity," - ",p(N.price*N.quantity,x.currency)]},v))}):n.jsx("p",{className:"text-sm text-gray-600",children:"No items"})]})]})},x.id)})})]})]})})]})}function NJ(){return n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx(Ls,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 flex flex-col p-6",children:n.jsx("div",{className:"",children:n.jsx("p",{children:" Seller Settings"})})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function tf(t){return t+.5|0}const _o=(t,e,s)=>Math.max(Math.min(t,s),e);function Ah(t){return _o(tf(t*2.55),0,255)}function Io(t){return _o(tf(t*255),0,255)}function ki(t){return _o(tf(t/2.55)/100,0,1)}function TC(t){return _o(tf(t*100),0,100)}const Zn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vw=[..."0123456789ABCDEF"],jJ=t=>vw[t&15],_J=t=>vw[(t&240)>>4]+vw[t&15],Ug=t=>(t&240)>>4===(t&15),SJ=t=>Ug(t.r)&&Ug(t.g)&&Ug(t.b)&&Ug(t.a);function kJ(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Zn[t[1]]*17,g:255&Zn[t[2]]*17,b:255&Zn[t[3]]*17,a:e===5?Zn[t[4]]*17:255}:(e===7||e===9)&&(s={r:Zn[t[1]]<<4|Zn[t[2]],g:Zn[t[3]]<<4|Zn[t[4]],b:Zn[t[5]]<<4|Zn[t[6]],a:e===9?Zn[t[7]]<<4|Zn[t[8]]:255})),s}const EJ=(t,e)=>t<255?e(t):"";function TJ(t){var e=SJ(t)?jJ:_J;return t?"#"+e(t.r)+e(t.g)+e(t.b)+EJ(t.a,e):void 0}const CJ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function W6(t,e,s){const r=e*Math.min(s,1-s),a=(i,l=(i+t/30)%12)=>s-r*Math.max(Math.min(l-3,9-l,1),-1);return[a(0),a(8),a(4)]}function AJ(t,e,s){const r=(a,i=(a+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function RJ(t,e,s){const r=W6(t,1,.5);let a;for(e+s>1&&(a=1/(e+s),e*=a,s*=a),a=0;a<3;a++)r[a]*=1-e-s,r[a]+=e;return r}function PJ(t,e,s,r,a){return t===a?(e-s)/r+(e<s?6:0):e===a?(s-t)/r+2:(t-e)/r+4}function Fj(t){const s=t.r/255,r=t.g/255,a=t.b/255,i=Math.max(s,r,a),l=Math.min(s,r,a),d=(i+l)/2;let u,h,f;return i!==l&&(f=i-l,h=d>.5?f/(2-i-l):f/(i+l),u=PJ(s,r,a,f,i),u=u*60+.5),[u|0,h||0,d]}function zj(t,e,s,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,r)).map(Io)}function Bj(t,e,s){return zj(W6,t,e,s)}function IJ(t,e,s){return zj(RJ,t,e,s)}function DJ(t,e,s){return zj(AJ,t,e,s)}function Y6(t){return(t%360+360)%360}function MJ(t){const e=CJ.exec(t);let s=255,r;if(!e)return;e[5]!==r&&(s=e[6]?Ah(+e[5]):Io(+e[5]));const a=Y6(+e[2]),i=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?r=IJ(a,i,l):e[1]==="hsv"?r=DJ(a,i,l):r=Bj(a,i,l),{r:r[0],g:r[1],b:r[2],a:s}}function OJ(t,e){var s=Fj(t);s[0]=Y6(s[0]+e),s=Bj(s),t.r=s[0],t.g=s[1],t.b=s[2]}function LJ(t){if(!t)return;const e=Fj(t),s=e[0],r=TC(e[1]),a=TC(e[2]);return t.a<255?`hsla(${s}, ${r}%, ${a}%, ${ki(t.a)})`:`hsl(${s}, ${r}%, ${a}%)`}const CC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},AC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function UJ(){const t={},e=Object.keys(AC),s=Object.keys(CC);let r,a,i,l,d;for(r=0;r<e.length;r++){for(l=d=e[r],a=0;a<s.length;a++)i=s[a],d=d.replace(i,CC[i]);i=parseInt(AC[l],16),t[d]=[i>>16&255,i>>8&255,i&255]}return t}let Vg;function VJ(t){Vg||(Vg=UJ(),Vg.transparent=[0,0,0,0]);const e=Vg[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const FJ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zJ(t){const e=FJ.exec(t);let s=255,r,a,i;if(e){if(e[7]!==r){const l=+e[7];s=e[8]?Ah(l):_o(l*255,0,255)}return r=+e[1],a=+e[3],i=+e[5],r=255&(e[2]?Ah(r):_o(r,0,255)),a=255&(e[4]?Ah(a):_o(a,0,255)),i=255&(e[6]?Ah(i):_o(i,0,255)),{r,g:a,b:i,a:s}}}function BJ(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ki(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const sv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,rd=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function $J(t,e,s){const r=rd(ki(t.r)),a=rd(ki(t.g)),i=rd(ki(t.b));return{r:Io(sv(r+s*(rd(ki(e.r))-r))),g:Io(sv(a+s*(rd(ki(e.g))-a))),b:Io(sv(i+s*(rd(ki(e.b))-i))),a:t.a+s*(e.a-t.a)}}function Fg(t,e,s){if(t){let r=Fj(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*s,e===0?360:1)),r=Bj(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function K6(t,e){return t&&Object.assign(e||{},t)}function RC(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Io(t[3]))):(e=K6(t,{r:0,g:0,b:0,a:1}),e.a=Io(e.a)),e}function qJ(t){return t.charAt(0)==="r"?zJ(t):MJ(t)}class jm{constructor(e){if(e instanceof jm)return e;const s=typeof e;let r;s==="object"?r=RC(e):s==="string"&&(r=kJ(e)||VJ(e)||qJ(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=K6(this._rgb);return e&&(e.a=ki(e.a)),e}set rgb(e){this._rgb=RC(e)}rgbString(){return this._valid?BJ(this._rgb):void 0}hexString(){return this._valid?TJ(this._rgb):void 0}hslString(){return this._valid?LJ(this._rgb):void 0}mix(e,s){if(e){const r=this.rgb,a=e.rgb;let i;const l=s===i?.5:s,d=2*l-1,u=r.a-a.a,h=((d*u===-1?d:(d+u)/(1+d*u))+1)/2;i=1-h,r.r=255&h*r.r+i*a.r+.5,r.g=255&h*r.g+i*a.g+.5,r.b=255&h*r.b+i*a.b+.5,r.a=l*r.a+(1-l)*a.a,this.rgb=r}return this}interpolate(e,s){return e&&(this._rgb=$J(this._rgb,e._rgb,s)),this}clone(){return new jm(this.rgb)}alpha(e){return this._rgb.a=Io(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=tf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Fg(this._rgb,2,e),this}darken(e){return Fg(this._rgb,2,-e),this}saturate(e){return Fg(this._rgb,1,e),this}desaturate(e){return Fg(this._rgb,1,-e),this}rotate(e){return OJ(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ji(){}const HJ=(()=>{let t=0;return()=>t++})();function ds(t){return t==null}function kr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function rs(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ra(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ma(t,e){return ra(t)?t:e}function Gt(t,e){return typeof t>"u"?e:t}const GJ=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,X6=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ts(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function ps(t,e,s,r){let a,i,l;if(kr(t))for(i=t.length,a=0;a<i;a++)e.call(s,t[a],a);else if(rs(t))for(l=Object.keys(t),i=l.length,a=0;a<i;a++)e.call(s,t[l[a]],l[a])}function l0(t,e){let s,r,a,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,r=t.length;s<r;++s)if(a=t[s],i=e[s],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function c0(t){if(kr(t))return t.map(c0);if(rs(t)){const e=Object.create(null),s=Object.keys(t),r=s.length;let a=0;for(;a<r;++a)e[s[a]]=c0(t[s[a]]);return e}return t}function Q6(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function WJ(t,e,s,r){if(!Q6(t))return;const a=e[t],i=s[t];rs(a)&&rs(i)?_m(a,i,r):e[t]=c0(i)}function _m(t,e,s){const r=kr(e)?e:[e],a=r.length;if(!rs(t))return t;s=s||{};const i=s.merger||WJ;let l;for(let d=0;d<a;++d){if(l=r[d],!rs(l))continue;const u=Object.keys(l);for(let h=0,f=u.length;h<f;++h)i(u[h],t,l,s)}return t}function Qh(t,e){return _m(t,e,{merger:YJ})}function YJ(t,e,s){if(!Q6(t))return;const r=e[t],a=s[t];rs(r)&&rs(a)?Qh(r,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=c0(a))}const PC={"":t=>t,x:t=>t.x,y:t=>t.y};function KJ(t){const e=t.split("."),s=[];let r="";for(const a of e)r+=a,r.endsWith("\\")?r=r.slice(0,-1)+".":(s.push(r),r="");return s}function XJ(t){const e=KJ(t);return s=>{for(const r of e){if(r==="")break;s=s&&s[r]}return s}}function ac(t,e){return(PC[e]||(PC[e]=XJ(e)))(t)}function $j(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Sm=t=>typeof t<"u",$o=t=>typeof t=="function",IC=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function QJ(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const nr=Math.PI,Bs=2*nr,JJ=Bs+nr,d0=Number.POSITIVE_INFINITY,ZJ=nr/180,hr=nr/2,kl=nr/4,DC=nr*2/3,J6=Math.log10,Za=Math.sign;function Jh(t,e,s){return Math.abs(t-e)<s}function MC(t){const e=Math.round(t);t=Jh(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(J6(t))),r=t/s;return(r<=1?1:r<=2?2:r<=5?5:10)*s}function eZ(t){const e=[],s=Math.sqrt(t);let r;for(r=1;r<s;r++)t%r===0&&(e.push(r),e.push(t/r));return s===(s|0)&&e.push(s),e.sort((a,i)=>a-i).pop(),e}function tZ(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function km(t){return!tZ(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function sZ(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function rZ(t,e,s){let r,a,i;for(r=0,a=t.length;r<a;r++)i=t[r][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Ci(t){return t*(nr/180)}function nZ(t){return t*(180/nr)}function OC(t){if(!ra(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function Z6(t,e){const s=e.x-t.x,r=e.y-t.y,a=Math.sqrt(s*s+r*r);let i=Math.atan2(r,s);return i<-.5*nr&&(i+=Bs),{angle:i,distance:a}}function ww(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function aZ(t,e){return(t-e+JJ)%Bs-nr}function bo(t){return(t%Bs+Bs)%Bs}function Em(t,e,s,r){const a=bo(t),i=bo(e),l=bo(s),d=bo(i-a),u=bo(l-a),h=bo(a-i),f=bo(a-l);return a===i||a===l||r&&i===l||d>u&&h<f}function Xr(t,e,s){return Math.max(e,Math.min(s,t))}function iZ(t){return Xr(t,-32768,32767)}function So(t,e,s,r=1e-6){return t>=Math.min(e,s)-r&&t<=Math.max(e,s)+r}function qj(t,e,s){s=s||(l=>t[l]<e);let r=t.length-1,a=0,i;for(;r-a>1;)i=a+r>>1,s(i)?a=i:r=i;return{lo:a,hi:r}}const Fl=(t,e,s,r)=>qj(t,s,r?a=>{const i=t[a][e];return i<s||i===s&&t[a+1][e]===s}:a=>t[a][e]<s),oZ=(t,e,s)=>qj(t,s,r=>t[r][e]>=s);function lZ(t,e,s){let r=0,a=t.length;for(;r<a&&t[r]<e;)r++;for(;a>r&&t[a-1]>s;)a--;return r>0||a<t.length?t.slice(r,a):t}const eD=["push","pop","shift","splice","unshift"];function cZ(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),eD.forEach(s=>{const r="_onData"+$j(s),a=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const l=a.apply(this,i);return t._chartjs.listeners.forEach(d=>{typeof d[r]=="function"&&d[r](...i)}),l}})})}function LC(t,e){const s=t._chartjs;if(!s)return;const r=s.listeners,a=r.indexOf(e);a!==-1&&r.splice(a,1),!(r.length>0)&&(eD.forEach(i=>{delete t[i]}),delete t._chartjs)}function tD(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const sD=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function rD(t,e){let s=[],r=!1;return function(...a){s=a,r||(r=!0,sD.call(window,()=>{r=!1,t.apply(e,s)}))}}function dZ(t,e){let s;return function(...r){return e?(clearTimeout(s),s=setTimeout(t,e,r)):t.apply(this,r),e}}const nD=t=>t==="start"?"left":t==="end"?"right":"center",On=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,uZ=(t,e,s,r)=>t===(r?"left":"right")?s:t==="center"?(e+s)/2:e;function hZ(t,e,s){const r=e.length;let a=0,i=r;if(t._sorted){const{iScale:l,vScale:d,_parsed:u}=t,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,f=l.axis,{min:p,max:x,minDefined:w,maxDefined:N}=l.getUserBounds();if(w){if(a=Math.min(Fl(u,f,p).lo,s?r:Fl(e,f,l.getPixelForValue(p)).lo),h){const v=u.slice(0,a+1).reverse().findIndex(j=>!ds(j[d.axis]));a-=Math.max(0,v)}a=Xr(a,0,r-1)}if(N){let v=Math.max(Fl(u,l.axis,x,!0).hi+1,s?0:Fl(e,f,l.getPixelForValue(x),!0).hi+1);if(h){const j=u.slice(v-1).findIndex(k=>!ds(k[d.axis]));v+=Math.max(0,j)}i=Xr(v,a,r)-a}else i=r-a}return{start:a,count:i}}function mZ(t){const{xScale:e,yScale:s,_scaleRanges:r}=t,a={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!r)return t._scaleRanges=a,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==s.min||r.ymax!==s.max;return Object.assign(r,a),i}const zg=t=>t===0||t===1,UC=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Bs/s)),VC=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Bs/s)+1,Zh={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*hr)+1,easeOutSine:t=>Math.sin(t*hr),easeInOutSine:t=>-.5*(Math.cos(nr*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>zg(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>zg(t)?t:UC(t,.075,.3),easeOutElastic:t=>zg(t)?t:VC(t,.075,.3),easeInOutElastic(t){return zg(t)?t:t<.5?.5*UC(t*2,.1125,.45):.5+.5*VC(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Zh.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Zh.easeInBounce(t*2)*.5:Zh.easeOutBounce(t*2-1)*.5+.5};function Hj(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function FC(t){return Hj(t)?t:new jm(t)}function rv(t){return Hj(t)?t:new jm(t).saturate(.5).darken(.1).hexString()}const fZ=["x","y","borderWidth","radius","tension"],gZ=["color","borderColor","backgroundColor"];function pZ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:gZ},numbers:{type:"number",properties:fZ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function xZ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const zC=new Map;function yZ(t,e){e=e||{};const s=t+JSON.stringify(e);let r=zC.get(s);return r||(r=new Intl.NumberFormat(t,e),zC.set(s,r)),r}function Gj(t,e,s){return yZ(e,s).format(t)}const bZ={values(t){return kr(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const r=this.chart.options.locale;let a,i=t;if(s.length>1){const h=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(h<1e-4||h>1e15)&&(a="scientific"),i=vZ(t,s)}const l=J6(Math.abs(i)),d=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),u={notation:a,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(u,this.options.ticks.format),Gj(t,r,u)}};function vZ(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var aD={formatters:bZ};function wZ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:aD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ic=Object.create(null),Nw=Object.create(null);function em(t,e){if(!e)return t;const s=e.split(".");for(let r=0,a=s.length;r<a;++r){const i=s[r];t=t[i]||(t[i]=Object.create(null))}return t}function nv(t,e,s){return typeof e=="string"?_m(em(t,e),s):_m(em(t,""),e)}class NZ{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,a)=>rv(a.backgroundColor),this.hoverBorderColor=(r,a)=>rv(a.borderColor),this.hoverColor=(r,a)=>rv(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return nv(this,e,s)}get(e){return em(this,e)}describe(e,s){return nv(Nw,e,s)}override(e,s){return nv(ic,e,s)}route(e,s,r,a){const i=em(this,e),l=em(this,r),d="_"+s;Object.defineProperties(i,{[d]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const u=this[d],h=l[a];return rs(u)?Object.assign({},h,u):Gt(u,h)},set(u){this[d]=u}}})}apply(e){e.forEach(s=>s(this))}}var Xs=new NZ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pZ,xZ,wZ]);function jZ(t){return!t||ds(t.size)||ds(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function BC(t,e,s,r,a){let i=e[a];return i||(i=e[a]=t.measureText(a).width,s.push(a)),i>r&&(r=i),r}function El(t,e,s){const r=t.currentDevicePixelRatio,a=s!==0?Math.max(s/2,.5):0;return Math.round((e-a)*r)/r+a}function $C(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function jw(t,e,s,r){iD(t,e,s,r,null)}function iD(t,e,s,r,a){let i,l,d,u,h,f,p,x;const w=e.pointStyle,N=e.rotation,v=e.radius;let j=(N||0)*ZJ;if(w&&typeof w=="object"&&(i=w.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,r),t.rotate(j),t.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),w){default:a?t.ellipse(s,r,a/2,v,0,0,Bs):t.arc(s,r,v,0,Bs),t.closePath();break;case"triangle":f=a?a/2:v,t.moveTo(s+Math.sin(j)*f,r-Math.cos(j)*v),j+=DC,t.lineTo(s+Math.sin(j)*f,r-Math.cos(j)*v),j+=DC,t.lineTo(s+Math.sin(j)*f,r-Math.cos(j)*v),t.closePath();break;case"rectRounded":h=v*.516,u=v-h,l=Math.cos(j+kl)*u,p=Math.cos(j+kl)*(a?a/2-h:u),d=Math.sin(j+kl)*u,x=Math.sin(j+kl)*(a?a/2-h:u),t.arc(s-p,r-d,h,j-nr,j-hr),t.arc(s+x,r-l,h,j-hr,j),t.arc(s+p,r+d,h,j,j+hr),t.arc(s-x,r+l,h,j+hr,j+nr),t.closePath();break;case"rect":if(!N){u=Math.SQRT1_2*v,f=a?a/2:u,t.rect(s-f,r-u,2*f,2*u);break}j+=kl;case"rectRot":p=Math.cos(j)*(a?a/2:v),l=Math.cos(j)*v,d=Math.sin(j)*v,x=Math.sin(j)*(a?a/2:v),t.moveTo(s-p,r-d),t.lineTo(s+x,r-l),t.lineTo(s+p,r+d),t.lineTo(s-x,r+l),t.closePath();break;case"crossRot":j+=kl;case"cross":p=Math.cos(j)*(a?a/2:v),l=Math.cos(j)*v,d=Math.sin(j)*v,x=Math.sin(j)*(a?a/2:v),t.moveTo(s-p,r-d),t.lineTo(s+p,r+d),t.moveTo(s+x,r-l),t.lineTo(s-x,r+l);break;case"star":p=Math.cos(j)*(a?a/2:v),l=Math.cos(j)*v,d=Math.sin(j)*v,x=Math.sin(j)*(a?a/2:v),t.moveTo(s-p,r-d),t.lineTo(s+p,r+d),t.moveTo(s+x,r-l),t.lineTo(s-x,r+l),j+=kl,p=Math.cos(j)*(a?a/2:v),l=Math.cos(j)*v,d=Math.sin(j)*v,x=Math.sin(j)*(a?a/2:v),t.moveTo(s-p,r-d),t.lineTo(s+p,r+d),t.moveTo(s+x,r-l),t.lineTo(s-x,r+l);break;case"line":l=a?a/2:Math.cos(j)*v,d=Math.sin(j)*v,t.moveTo(s-l,r-d),t.lineTo(s+l,r+d);break;case"dash":t.moveTo(s,r),t.lineTo(s+Math.cos(j)*(a?a/2:v),r+Math.sin(j)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Tm(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Wj(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Yj(t){t.restore()}function _Z(t,e,s,r,a){if(!e)return t.lineTo(s.x,s.y);if(a==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else a==="after"!=!!r?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function SZ(t,e,s,r){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?s.cp2x:s.cp1x,r?s.cp2y:s.cp1y,s.x,s.y)}function kZ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ds(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function EZ(t,e,s,r,a){if(a.strikethrough||a.underline){const i=t.measureText(r),l=e-i.actualBoundingBoxLeft,d=e+i.actualBoundingBoxRight,u=s-i.actualBoundingBoxAscent,h=s+i.actualBoundingBoxDescent,f=a.strikethrough?(u+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(l,f),t.lineTo(d,f),t.stroke()}}function TZ(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function u0(t,e,s,r,a,i={}){const l=kr(e)?e:[e],d=i.strokeWidth>0&&i.strokeColor!=="";let u,h;for(t.save(),t.font=a.string,kZ(t,i),u=0;u<l.length;++u)h=l[u],i.backdrop&&TZ(t,i.backdrop),d&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ds(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(h,s,r,i.maxWidth)),t.fillText(h,s,r,i.maxWidth),EZ(t,s,r,h,i),r+=Number(a.lineHeight);t.restore()}function h0(t,e){const{x:s,y:r,w:a,h:i,radius:l}=e;t.arc(s+l.topLeft,r+l.topLeft,l.topLeft,1.5*nr,nr,!0),t.lineTo(s,r+i-l.bottomLeft),t.arc(s+l.bottomLeft,r+i-l.bottomLeft,l.bottomLeft,nr,hr,!0),t.lineTo(s+a-l.bottomRight,r+i),t.arc(s+a-l.bottomRight,r+i-l.bottomRight,l.bottomRight,hr,0,!0),t.lineTo(s+a,r+l.topRight),t.arc(s+a-l.topRight,r+l.topRight,l.topRight,0,-hr,!0),t.lineTo(s+l.topLeft,r)}const CZ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,AZ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function RZ(t,e){const s=(""+t).match(CZ);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const PZ=t=>+t||0;function Kj(t,e){const s={},r=rs(e),a=r?Object.keys(e):e,i=rs(t)?r?l=>Gt(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of a)s[l]=PZ(i(l));return s}function oD(t){return Kj(t,{top:"y",right:"x",bottom:"y",left:"x"})}function jd(t){return Kj(t,["topLeft","topRight","bottomLeft","bottomRight"])}function xa(t){const e=oD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function vn(t,e){t=t||{},e=e||Xs.font;let s=Gt(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let r=Gt(t.style,e.style);r&&!(""+r).match(AZ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const a={family:Gt(t.family,e.family),lineHeight:RZ(Gt(t.lineHeight,e.lineHeight),s),size:s,style:r,weight:Gt(t.weight,e.weight),string:""};return a.string=jZ(a),a}function Bg(t,e,s,r){let a,i,l;for(a=0,i=t.length;a<i;++a)if(l=t[a],l!==void 0&&l!==void 0)return l}function IZ(t,e,s){const{min:r,max:a}=t,i=X6(e,(a-r)/2),l=(d,u)=>s&&d===0?0:d+u;return{min:l(r,-Math.abs(i)),max:l(a,i)}}function pc(t,e){return Object.assign(Object.create(t),e)}function Xj(t,e=[""],s,r,a=()=>t[0]){const i=s||t;typeof r>"u"&&(r=uD("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:a,override:d=>Xj([d,...t],e,i,r)};return new Proxy(l,{deleteProperty(d,u){return delete d[u],delete d._keys,delete t[0][u],!0},get(d,u){return cD(d,u,()=>zZ(u,e,t,d))},getOwnPropertyDescriptor(d,u){return Reflect.getOwnPropertyDescriptor(d._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(d,u){return HC(d).includes(u)},ownKeys(d){return HC(d)},set(d,u,h){const f=d._storage||(d._storage=a());return d[u]=f[u]=h,delete d._keys,!0}})}function Fd(t,e,s,r){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:lD(t,r),setContext:i=>Fd(t,i,s,r),override:i=>Fd(t.override(i),e,s,r)};return new Proxy(a,{deleteProperty(i,l){return delete i[l],delete t[l],!0},get(i,l,d){return cD(i,l,()=>MZ(i,l,d))},getOwnPropertyDescriptor(i,l){return i._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(i,l,d){return t[l]=d,delete i[l],!0}})}function lD(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:r=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:s,indexable:r,isScriptable:$o(s)?s:()=>s,isIndexable:$o(r)?r:()=>r}}const DZ=(t,e)=>t?t+$j(e):e,Qj=(t,e)=>rs(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function cD(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=s();return t[e]=r,r}function MZ(t,e,s){const{_proxy:r,_context:a,_subProxy:i,_descriptors:l}=t;let d=r[e];return $o(d)&&l.isScriptable(e)&&(d=OZ(e,d,t,s)),kr(d)&&d.length&&(d=LZ(e,d,t,l.isIndexable)),Qj(e,d)&&(d=Fd(d,a,i&&i[e],l)),d}function OZ(t,e,s,r){const{_proxy:a,_context:i,_subProxy:l,_stack:d}=s;if(d.has(t))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+t);d.add(t);let u=e(i,l||r);return d.delete(t),Qj(t,u)&&(u=Jj(a._scopes,a,t,u)),u}function LZ(t,e,s,r){const{_proxy:a,_context:i,_subProxy:l,_descriptors:d}=s;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(rs(e[0])){const u=e,h=a._scopes.filter(f=>f!==u);e=[];for(const f of u){const p=Jj(h,a,t,f);e.push(Fd(p,i,l&&l[t],d))}}return e}function dD(t,e,s){return $o(t)?t(e,s):t}const UZ=(t,e)=>t===!0?e:typeof t=="string"?ac(e,t):void 0;function VZ(t,e,s,r,a){for(const i of e){const l=UZ(s,i);if(l){t.add(l);const d=dD(l._fallback,s,a);if(typeof d<"u"&&d!==s&&d!==r)return d}else if(l===!1&&typeof r<"u"&&s!==r)return null}return!1}function Jj(t,e,s,r){const a=e._rootScopes,i=dD(e._fallback,s,r),l=[...t,...a],d=new Set;d.add(r);let u=qC(d,l,s,i||s,r);return u===null||typeof i<"u"&&i!==s&&(u=qC(d,l,i,u,r),u===null)?!1:Xj(Array.from(d),[""],a,i,()=>FZ(e,s,r))}function qC(t,e,s,r,a){for(;s;)s=VZ(t,e,s,r,a);return s}function FZ(t,e,s){const r=t._getTarget();e in r||(r[e]={});const a=r[e];return kr(a)&&rs(s)?s:a||{}}function zZ(t,e,s,r){let a;for(const i of e)if(a=uD(DZ(i,t),s),typeof a<"u")return Qj(t,a)?Jj(s,r,t,a):a}function uD(t,e){for(const s of e){if(!s)continue;const r=s[t];if(typeof r<"u")return r}}function HC(t){let e=t._keys;return e||(e=t._keys=BZ(t._scopes)),e}function BZ(t){const e=new Set;for(const s of t)for(const r of Object.keys(s).filter(a=>!a.startsWith("_")))e.add(r);return Array.from(e)}const $Z=Number.EPSILON||1e-14,zd=(t,e)=>e<t.length&&!t[e].skip&&t[e],hD=t=>t==="x"?"y":"x";function qZ(t,e,s,r){const a=t.skip?e:t,i=e,l=s.skip?e:s,d=ww(i,a),u=ww(l,i);let h=d/(d+u),f=u/(d+u);h=isNaN(h)?0:h,f=isNaN(f)?0:f;const p=r*h,x=r*f;return{previous:{x:i.x-p*(l.x-a.x),y:i.y-p*(l.y-a.y)},next:{x:i.x+x*(l.x-a.x),y:i.y+x*(l.y-a.y)}}}function HZ(t,e,s){const r=t.length;let a,i,l,d,u,h=zd(t,0);for(let f=0;f<r-1;++f)if(u=h,h=zd(t,f+1),!(!u||!h)){if(Jh(e[f],0,$Z)){s[f]=s[f+1]=0;continue}a=s[f]/e[f],i=s[f+1]/e[f],d=Math.pow(a,2)+Math.pow(i,2),!(d<=9)&&(l=3/Math.sqrt(d),s[f]=a*l*e[f],s[f+1]=i*l*e[f])}}function GZ(t,e,s="x"){const r=hD(s),a=t.length;let i,l,d,u=zd(t,0);for(let h=0;h<a;++h){if(l=d,d=u,u=zd(t,h+1),!d)continue;const f=d[s],p=d[r];l&&(i=(f-l[s])/3,d[`cp1${s}`]=f-i,d[`cp1${r}`]=p-i*e[h]),u&&(i=(u[s]-f)/3,d[`cp2${s}`]=f+i,d[`cp2${r}`]=p+i*e[h])}}function WZ(t,e="x"){const s=hD(e),r=t.length,a=Array(r).fill(0),i=Array(r);let l,d,u,h=zd(t,0);for(l=0;l<r;++l)if(d=u,u=h,h=zd(t,l+1),!!u){if(h){const f=h[e]-u[e];a[l]=f!==0?(h[s]-u[s])/f:0}i[l]=d?h?Za(a[l-1])!==Za(a[l])?0:(a[l-1]+a[l])/2:a[l-1]:a[l]}HZ(t,a,i),GZ(t,i,e)}function $g(t,e,s){return Math.max(Math.min(t,s),e)}function YZ(t,e){let s,r,a,i,l,d=Tm(t[0],e);for(s=0,r=t.length;s<r;++s)l=i,i=d,d=s<r-1&&Tm(t[s+1],e),i&&(a=t[s],l&&(a.cp1x=$g(a.cp1x,e.left,e.right),a.cp1y=$g(a.cp1y,e.top,e.bottom)),d&&(a.cp2x=$g(a.cp2x,e.left,e.right),a.cp2y=$g(a.cp2y,e.top,e.bottom)))}function KZ(t,e,s,r,a){let i,l,d,u;if(e.spanGaps&&(t=t.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")WZ(t,a);else{let h=r?t[t.length-1]:t[0];for(i=0,l=t.length;i<l;++i)d=t[i],u=qZ(h,d,t[Math.min(i+1,l-(r?0:1))%l],e.tension),d.cp1x=u.previous.x,d.cp1y=u.previous.y,d.cp2x=u.next.x,d.cp2y=u.next.y,h=d}e.capBezierPoints&&YZ(t,s)}function Zj(){return typeof window<"u"&&typeof document<"u"}function e1(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function m0(t,e,s){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[s])):r=t,r}const fx=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function XZ(t,e){return fx(t).getPropertyValue(e)}const QZ=["top","right","bottom","left"];function Gl(t,e,s){const r={};s=s?"-"+s:"";for(let a=0;a<4;a++){const i=QZ[a];r[i]=parseFloat(t[e+"-"+i+s])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const JZ=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function ZZ(t,e){const s=t.touches,r=s&&s.length?s[0]:t,{offsetX:a,offsetY:i}=r;let l=!1,d,u;if(JZ(a,i,t.target))d=a,u=i;else{const h=e.getBoundingClientRect();d=r.clientX-h.left,u=r.clientY-h.top,l=!0}return{x:d,y:u,box:l}}function Pl(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:r}=e,a=fx(s),i=a.boxSizing==="border-box",l=Gl(a,"padding"),d=Gl(a,"border","width"),{x:u,y:h,box:f}=ZZ(t,s),p=l.left+(f&&d.left),x=l.top+(f&&d.top);let{width:w,height:N}=e;return i&&(w-=l.width+d.width,N-=l.height+d.height),{x:Math.round((u-p)/w*s.width/r),y:Math.round((h-x)/N*s.height/r)}}function eee(t,e,s){let r,a;if(e===void 0||s===void 0){const i=t&&e1(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const l=i.getBoundingClientRect(),d=fx(i),u=Gl(d,"border","width"),h=Gl(d,"padding");e=l.width-h.width-u.width,s=l.height-h.height-u.height,r=m0(d.maxWidth,i,"clientWidth"),a=m0(d.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:r||d0,maxHeight:a||d0}}const qg=t=>Math.round(t*10)/10;function tee(t,e,s,r){const a=fx(t),i=Gl(a,"margin"),l=m0(a.maxWidth,t,"clientWidth")||d0,d=m0(a.maxHeight,t,"clientHeight")||d0,u=eee(t,e,s);let{width:h,height:f}=u;if(a.boxSizing==="content-box"){const x=Gl(a,"border","width"),w=Gl(a,"padding");h-=w.width+x.width,f-=w.height+x.height}return h=Math.max(0,h-i.width),f=Math.max(0,r?h/r:f-i.height),h=qg(Math.min(h,l,u.maxWidth)),f=qg(Math.min(f,d,u.maxHeight)),h&&!f&&(f=qg(h/2)),(e!==void 0||s!==void 0)&&r&&u.height&&f>u.height&&(f=u.height,h=qg(Math.floor(f*r))),{width:h,height:f}}function GC(t,e,s){const r=e||1,a=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const l=t.canvas;return l.style&&(s||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||l.height!==a||l.width!==i?(t.currentDevicePixelRatio=r,l.height=a,l.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const see=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Zj()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function WC(t,e){const s=XZ(t,e),r=s&&s.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Il(t,e,s,r){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function ree(t,e,s,r){return{x:t.x+s*(e.x-t.x),y:r==="middle"?s<.5?t.y:e.y:r==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function nee(t,e,s,r){const a={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},l=Il(t,a,s),d=Il(a,i,s),u=Il(i,e,s),h=Il(l,d,s),f=Il(d,u,s);return Il(h,f,s)}const aee=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,r){return s-r},leftForLtr(s,r){return s-r}}},iee=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function _d(t,e,s){return t?aee(e,s):iee()}function mD(t,e){let s,r;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,r=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=r)}function fD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function gD(t){return t==="angle"?{between:Em,compare:aZ,normalize:bo}:{between:So,compare:(e,s)=>e-s,normalize:e=>e}}function YC({start:t,end:e,count:s,loop:r,style:a}){return{start:t%s,end:e%s,loop:r&&(e-t+1)%s===0,style:a}}function oee(t,e,s){const{property:r,start:a,end:i}=s,{between:l,normalize:d}=gD(r),u=e.length;let{start:h,end:f,loop:p}=t,x,w;if(p){for(h+=u,f+=u,x=0,w=u;x<w&&l(d(e[h%u][r]),a,i);++x)h--,f--;h%=u,f%=u}return f<h&&(f+=u),{start:h,end:f,loop:p,style:t.style}}function lee(t,e,s){if(!s)return[t];const{property:r,start:a,end:i}=s,l=e.length,{compare:d,between:u,normalize:h}=gD(r),{start:f,end:p,loop:x,style:w}=oee(t,e,s),N=[];let v=!1,j=null,k,T,P;const U=()=>u(a,P,k)&&d(a,P)!==0,R=()=>d(i,k)===0||u(i,P,k),O=()=>v||U(),I=()=>!v||R();for(let C=f,E=f;C<=p;++C)T=e[C%l],!T.skip&&(k=h(T[r]),k!==P&&(v=u(k,a,i),j===null&&O()&&(j=d(k,a)===0?C:E),j!==null&&I()&&(N.push(YC({start:j,end:C,loop:x,count:l,style:w})),j=null),E=C,P=k));return j!==null&&N.push(YC({start:j,end:p,loop:x,count:l,style:w})),N}function cee(t,e){const s=[],r=t.segments;for(let a=0;a<r.length;a++){const i=lee(r[a],t.points,e);i.length&&s.push(...i)}return s}function dee(t,e,s,r){let a=0,i=e-1;if(s&&!r)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,s&&(i+=a);i>a&&t[i%e].skip;)i--;return i%=e,{start:a,end:i}}function uee(t,e,s,r){const a=t.length,i=[];let l=e,d=t[e],u;for(u=e+1;u<=s;++u){const h=t[u%a];h.skip||h.stop?d.skip||(r=!1,i.push({start:e%a,end:(u-1)%a,loop:r}),e=l=h.stop?u:null):(l=u,d.skip&&(e=u)),d=h}return l!==null&&i.push({start:e%a,end:l%a,loop:r}),i}function hee(t,e){const s=t.points,r=t.options.spanGaps,a=s.length;if(!a)return[];const i=!!t._loop,{start:l,end:d}=dee(s,a,i,r);if(r===!0)return KC(t,[{start:l,end:d,loop:i}],s,e);const u=d<l?d+a:d,h=!!t._fullLoop&&l===0&&d===a-1;return KC(t,uee(s,l,u,h),s,e)}function KC(t,e,s,r){return!r||!r.setContext||!s?e:mee(t,e,s,r)}function mee(t,e,s,r){const a=t._chart.getContext(),i=XC(t.options),{_datasetIndex:l,options:{spanGaps:d}}=t,u=s.length,h=[];let f=i,p=e[0].start,x=p;function w(N,v,j,k){const T=d?-1:1;if(N!==v){for(N+=u;s[N%u].skip;)N-=T;for(;s[v%u].skip;)v+=T;N%u!==v%u&&(h.push({start:N%u,end:v%u,loop:j,style:k}),f=k,p=v%u)}}for(const N of e){p=d?p:N.start;let v=s[p%u],j;for(x=p+1;x<=N.end;x++){const k=s[x%u];j=XC(r.setContext(pc(a,{type:"segment",p0:v,p1:k,p0DataIndex:(x-1)%u,p1DataIndex:x%u,datasetIndex:l}))),fee(j,f)&&w(p,x-1,N.loop,f),v=k,f=j}p<x-1&&w(p,x-1,N.loop,f)}return h}function XC(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function fee(t,e){if(!e)return!1;const s=[],r=function(a,i){return Hj(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Hg(t,e,s){return t.options.clip?t[s]:e[s]}function gee(t,e){const{xScale:s,yScale:r}=t;return s&&r?{left:Hg(s,e,"left"),right:Hg(s,e,"right"),top:Hg(r,e,"top"),bottom:Hg(r,e,"bottom")}:e}function pee(t,e){const s=e._clip;if(s.disabled)return!1;const r=gee(e,t.chartArea);return{left:s.left===!1?0:r.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:r.right+(s.right===!0?0:s.right),top:s.top===!1?0:r.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:r.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class xee{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,r,a){const i=s.listeners[a],l=s.duration;i.forEach(d=>d({chart:e,initial:s.initial,numSteps:l,currentStep:Math.min(r-s.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=sD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((r,a)=>{if(!r.running||!r.items.length)return;const i=r.items;let l=i.length-1,d=!1,u;for(;l>=0;--l)u=i[l],u._active?(u._total>r.duration&&(r.duration=u._total),u.tick(e),d=!0):(i[l]=i[i.length-1],i.pop());d&&(a.draw(),this._notify(a,r,e,"progress")),i.length||(r.running=!1,this._notify(a,r,e,"complete"),r.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let r=s.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,r)),r}listen(e,s,r){this._getAnims(e).listeners[s].push(r)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((r,a)=>Math.max(r,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const r=s.items;let a=r.length-1;for(;a>=0;--a)r[a].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var _i=new xee;const QC="transparent",yee={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const r=FC(t||QC),a=r.valid&&FC(e||QC);return a&&a.valid?a.mix(r,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class bee{constructor(e,s,r,a){const i=s[r];a=Bg([e.to,a,i,e.from]);const l=Bg([e.from,i,a]);this._active=!0,this._fn=e.fn||yee[e.type||typeof l],this._easing=Zh[e.easing]||Zh.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=r,this._from=l,this._to=a,this._promises=void 0}active(){return this._active}update(e,s,r){if(this._active){this._notify(!1);const a=this._target[this._prop],i=r-this._start,l=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Bg([e.to,s,a,e.from]),this._from=Bg([e.from,a,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,r=this._duration,a=this._prop,i=this._from,l=this._loop,d=this._to;let u;if(this._active=i!==d&&(l||s<r),!this._active){this._target[a]=d,this._notify(!0);return}if(s<0){this._target[a]=i;return}u=s/r%2,u=l&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[a]=this._fn(i,d,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,r)=>{e.push({res:s,rej:r})})}_notify(e){const s=e?"res":"rej",r=this._promises||[];for(let a=0;a<r.length;a++)r[a][s]()}}class pD{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!rs(e))return;const s=Object.keys(Xs.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const i=e[a];if(!rs(i))return;const l={};for(const d of s)l[d]=i[d];(kr(i.properties)&&i.properties||[a]).forEach(d=>{(d===a||!r.has(d))&&r.set(d,l)})})}_animateOptions(e,s){const r=s.options,a=wee(e,r);if(!a)return[];const i=this._createAnimations(a,r);return r.$shared&&vee(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,s){const r=this._properties,a=[],i=e.$animations||(e.$animations={}),l=Object.keys(s),d=Date.now();let u;for(u=l.length-1;u>=0;--u){const h=l[u];if(h.charAt(0)==="$")continue;if(h==="options"){a.push(...this._animateOptions(e,s));continue}const f=s[h];let p=i[h];const x=r.get(h);if(p)if(x&&p.active()){p.update(x,f,d);continue}else p.cancel();if(!x||!x.duration){e[h]=f;continue}i[h]=p=new bee(x,e,h,f),a.push(p)}return a}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const r=this._createAnimations(e,s);if(r.length)return _i.add(this._chart,r),!0}}function vee(t,e){const s=[],r=Object.keys(e);for(let a=0;a<r.length;a++){const i=t[r[a]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function wee(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function JC(t,e){const s=t&&t.options||{},r=s.reverse,a=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:r?i:a,end:r?a:i}}function Nee(t,e,s){if(s===!1)return!1;const r=JC(t,s),a=JC(e,s);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}function jee(t){let e,s,r,a;return rs(t)?(e=t.top,s=t.right,r=t.bottom,a=t.left):e=s=r=a=t,{top:e,right:s,bottom:r,left:a,disabled:t===!1}}function xD(t,e){const s=[],r=t._getSortedDatasetMetas(e);let a,i;for(a=0,i=r.length;a<i;++a)s.push(r[a].index);return s}function ZC(t,e,s,r={}){const a=t.keys,i=r.mode==="single";let l,d,u,h;if(e===null)return;let f=!1;for(l=0,d=a.length;l<d;++l){if(u=+a[l],u===s){if(f=!0,r.all)continue;break}h=t.values[u],ra(h)&&(i||e===0||Za(e)===Za(h))&&(e+=h)}return!f&&!r.all?0:e}function _ee(t,e){const{iScale:s,vScale:r}=e,a=s.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",l=Object.keys(t),d=new Array(l.length);let u,h,f;for(u=0,h=l.length;u<h;++u)f=l[u],d[u]={[a]:f,[i]:t[f]};return d}function av(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function See(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function kee(t){const{min:e,max:s,minDefined:r,maxDefined:a}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:a?s:Number.POSITIVE_INFINITY}}function Eee(t,e,s){const r=t[e]||(t[e]={});return r[s]||(r[s]={})}function eA(t,e,s,r){for(const a of e.getMatchingVisibleMetas(r).reverse()){const i=t[a.index];if(s&&i>0||!s&&i<0)return a.index}return null}function tA(t,e){const{chart:s,_cachedMeta:r}=t,a=s._stacks||(s._stacks={}),{iScale:i,vScale:l,index:d}=r,u=i.axis,h=l.axis,f=See(i,l,r),p=e.length;let x;for(let w=0;w<p;++w){const N=e[w],{[u]:v,[h]:j}=N,k=N._stacks||(N._stacks={});x=k[h]=Eee(a,f,v),x[d]=j,x._top=eA(x,l,!0,r.type),x._bottom=eA(x,l,!1,r.type);const T=x._visualValues||(x._visualValues={});T[d]=j}}function iv(t,e){const s=t.scales;return Object.keys(s).filter(r=>s[r].axis===e).shift()}function Tee(t,e){return pc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Cee(t,e,s){return pc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function gh(t,e){const s=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const a of e){const i=a._stacks;if(!i||i[r]===void 0||i[r][s]===void 0)return;delete i[r][s],i[r]._visualValues!==void 0&&i[r]._visualValues[s]!==void 0&&delete i[r]._visualValues[s]}}}const ov=t=>t==="reset"||t==="none",sA=(t,e)=>e?t:Object.assign({},t),Aee=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:xD(s,!0),values:null};class Wl{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=av(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&gh(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,r=this.getDataset(),a=(p,x,w,N)=>p==="x"?x:p==="r"?N:w,i=s.xAxisID=Gt(r.xAxisID,iv(e,"x")),l=s.yAxisID=Gt(r.yAxisID,iv(e,"y")),d=s.rAxisID=Gt(r.rAxisID,iv(e,"r")),u=s.indexAxis,h=s.iAxisID=a(u,i,l,d),f=s.vAxisID=a(u,l,i,d);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(l),s.rScale=this.getScaleForId(d),s.iScale=this.getScaleForId(h),s.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&LC(this._data,this),e._stacked&&gh(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),r=this._data;if(rs(s)){const a=this._cachedMeta;this._data=_ee(s,a)}else if(r!==s){if(r){LC(r,this);const a=this._cachedMeta;gh(a),a._parsed=[]}s&&Object.isExtensible(s)&&cZ(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,r=this.getDataset();let a=!1;this._dataCheck();const i=s._stacked;s._stacked=av(s.vScale,s),s.stack!==r.stack&&(a=!0,gh(s),s.stack=r.stack),this._resyncElements(e),(a||i!==s._stacked)&&(tA(this,s._parsed),s._stacked=av(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:r,_data:a}=this,{iScale:i,_stacked:l}=r,d=i.axis;let u=e===0&&s===a.length?!0:r._sorted,h=e>0&&r._parsed[e-1],f,p,x;if(this._parsing===!1)r._parsed=a,r._sorted=!0,x=a;else{kr(a[e])?x=this.parseArrayData(r,a,e,s):rs(a[e])?x=this.parseObjectData(r,a,e,s):x=this.parsePrimitiveData(r,a,e,s);const w=()=>p[d]===null||h&&p[d]<h[d];for(f=0;f<s;++f)r._parsed[f+e]=p=x[f],u&&(w()&&(u=!1),h=p);r._sorted=u}l&&tA(this,x)}parsePrimitiveData(e,s,r,a){const{iScale:i,vScale:l}=e,d=i.axis,u=l.axis,h=i.getLabels(),f=i===l,p=new Array(a);let x,w,N;for(x=0,w=a;x<w;++x)N=x+r,p[x]={[d]:f||i.parse(h[N],N),[u]:l.parse(s[N],N)};return p}parseArrayData(e,s,r,a){const{xScale:i,yScale:l}=e,d=new Array(a);let u,h,f,p;for(u=0,h=a;u<h;++u)f=u+r,p=s[f],d[u]={x:i.parse(p[0],f),y:l.parse(p[1],f)};return d}parseObjectData(e,s,r,a){const{xScale:i,yScale:l}=e,{xAxisKey:d="x",yAxisKey:u="y"}=this._parsing,h=new Array(a);let f,p,x,w;for(f=0,p=a;f<p;++f)x=f+r,w=s[x],h[f]={x:i.parse(ac(w,d),x),y:l.parse(ac(w,u),x)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,r){const a=this.chart,i=this._cachedMeta,l=s[e.axis],d={keys:xD(a,!0),values:s._stacks[e.axis]._visualValues};return ZC(d,l,i.index,{mode:r})}updateRangeFromParsed(e,s,r,a){const i=r[s.axis];let l=i===null?NaN:i;const d=a&&r._stacks[s.axis];a&&d&&(a.values=d,l=ZC(a,i,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,s){const r=this._cachedMeta,a=r._parsed,i=r._sorted&&e===r.iScale,l=a.length,d=this._getOtherScale(e),u=Aee(s,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=kee(d);let x,w;function N(){w=a[x];const v=w[d.axis];return!ra(w[e.axis])||f>v||p<v}for(x=0;x<l&&!(!N()&&(this.updateRangeFromParsed(h,e,w,u),i));++x);if(i){for(x=l-1;x>=0;--x)if(!N()){this.updateRangeFromParsed(h,e,w,u);break}}return h}getAllParsedValues(e){const s=this._cachedMeta._parsed,r=[];let a,i,l;for(a=0,i=s.length;a<i;++a)l=s[a][e.axis],ra(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,r=s.iScale,a=s.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=jee(Gt(this.options.clip,Nee(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,r=this._cachedMeta,a=r.data||[],i=s.chartArea,l=[],d=this._drawStart||0,u=this._drawCount||a.length-d,h=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,i,d,u),f=d;f<d+u;++f){const p=a[f];p.hidden||(p.active&&h?l.push(p):p.draw(e,i))}for(f=0;f<l.length;++f)l[f].draw(e,i)}getStyle(e,s){const r=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,s,r){const a=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];i=l.$context||(l.$context=Cee(this.getContext(),e,l)),i.parsed=this.getParsed(e),i.raw=a.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Tee(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",r){const a=s==="active",i=this._cachedDataOpts,l=e+"-"+s,d=i[l],u=this.enableOptionSharing&&Sm(r);if(d)return sA(d,u);const h=this.chart.config,f=h.datasetElementScopeKeys(this._type,e),p=a?[`${e}Hover`,"hover",e,""]:[e,""],x=h.getOptionScopes(this.getDataset(),f),w=Object.keys(Xs.elements[e]),N=()=>this.getContext(r,a,s),v=h.resolveNamedOptions(x,w,N,p);return v.$shared&&(v.$shared=u,i[l]=Object.freeze(sA(v,u))),v}_resolveAnimations(e,s,r){const a=this.chart,i=this._cachedDataOpts,l=`animation-${s}`,d=i[l];if(d)return d;let u;if(a.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,s),x=f.getOptionScopes(this.getDataset(),p);u=f.createResolver(x,this.getContext(e,r,s))}const h=new pD(a,u&&u.animations);return u&&u._cacheable&&(i[l]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||ov(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const r=this.resolveDataElementOptions(e,s),a=this._sharedOptions,i=this.getSharedOptions(r),l=this.includeOptions(s,i)||i!==a;return this.updateSharedOptions(i,s,r),{sharedOptions:i,includeOptions:l}}updateElement(e,s,r,a){ov(a)?Object.assign(e,r):this._resolveAnimations(s,a).update(e,r)}updateSharedOptions(e,s,r){e&&!ov(s)&&this._resolveAnimations(void 0,s).update(e,r)}_setStyle(e,s,r,a){e.active=a;const i=this.getStyle(s,a);this._resolveAnimations(s,r,a).update(e,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,s,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,r=this._cachedMeta.data;for(const[d,u,h]of this._syncList)this[d](u,h);this._syncList=[];const a=r.length,i=s.length,l=Math.min(i,a);l&&this.parse(0,l),i>a?this._insertElements(a,i-a,e):i<a&&this._removeElements(i,a-i)}_insertElements(e,s,r=!0){const a=this._cachedMeta,i=a.data,l=e+s;let d;const u=h=>{for(h.length+=s,d=h.length-1;d>=l;d--)h[d]=h[d-s]};for(u(i),d=e;d<l;++d)i[d]=new this.dataElementType;this._parsing&&u(a._parsed),this.parse(e,s),r&&this.updateElements(i,e,s,"reset")}updateElements(e,s,r,a){}_removeElements(e,s){const r=this._cachedMeta;if(this._parsing){const a=r._parsed.splice(e,s);r._stacked&&gh(r,a)}r.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,r,a]=e;this[s](r,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Be(Wl,"defaults",{}),Be(Wl,"datasetElementType",null),Be(Wl,"dataElementType",null);function Ree(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let r=[];for(let a=0,i=s.length;a<i;a++)r=r.concat(s[a].controller.getAllParsedValues(t));t._cache.$bar=tD(r.sort((a,i)=>a-i))}return t._cache.$bar}function Pee(t){const e=t.iScale,s=Ree(e,t.type);let r=e._length,a,i,l,d;const u=()=>{l===32767||l===-32768||(Sm(d)&&(r=Math.min(r,Math.abs(l-d)||r)),d=l)};for(a=0,i=s.length;a<i;++a)l=e.getPixelForValue(s[a]),u();for(d=void 0,a=0,i=e.ticks.length;a<i;++a)l=e.getPixelForTick(a),u();return r}function Iee(t,e,s,r){const a=s.barThickness;let i,l;return ds(a)?(i=e.min*s.categoryPercentage,l=s.barPercentage):(i=a*r,l=1),{chunk:i/r,ratio:l,start:e.pixels[t]-i/2}}function Dee(t,e,s,r){const a=e.pixels,i=a[t];let l=t>0?a[t-1]:null,d=t<a.length-1?a[t+1]:null;const u=s.categoryPercentage;l===null&&(l=i-(d===null?e.end-e.start:d-i)),d===null&&(d=i+i-l);const h=i-(i-Math.min(l,d))/2*u;return{chunk:Math.abs(d-l)/2*u/r,ratio:s.barPercentage,start:h}}function Mee(t,e,s,r){const a=s.parse(t[0],r),i=s.parse(t[1],r),l=Math.min(a,i),d=Math.max(a,i);let u=l,h=d;Math.abs(l)>Math.abs(d)&&(u=d,h=l),e[s.axis]=h,e._custom={barStart:u,barEnd:h,start:a,end:i,min:l,max:d}}function yD(t,e,s,r){return kr(t)?Mee(t,e,s,r):e[s.axis]=s.parse(t,r),e}function rA(t,e,s,r){const a=t.iScale,i=t.vScale,l=a.getLabels(),d=a===i,u=[];let h,f,p,x;for(h=s,f=s+r;h<f;++h)x=e[h],p={},p[a.axis]=d||a.parse(l[h],h),u.push(yD(x,p,i,h));return u}function lv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Oee(t,e,s){return t!==0?Za(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function Lee(t){let e,s,r,a,i;return t.horizontal?(e=t.base>t.x,s="left",r="right"):(e=t.base<t.y,s="bottom",r="top"),e?(a="end",i="start"):(a="start",i="end"),{start:s,end:r,reverse:e,top:a,bottom:i}}function Uee(t,e,s,r){let a=e.borderSkipped;const i={};if(!a){t.borderSkipped=i;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:d,reverse:u,top:h,bottom:f}=Lee(t);a==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===r?a=h:(s._bottom||0)===r?a=f:(i[nA(f,l,d,u)]=!0,a=h)),i[nA(a,l,d,u)]=!0,t.borderSkipped=i}function nA(t,e,s,r){return r?(t=Vee(t,e,s),t=aA(t,s,e)):t=aA(t,e,s),t}function Vee(t,e,s){return t===e?s:t===s?e:t}function aA(t,e,s){return t==="start"?e:t==="end"?s:t}function Fee(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class jp extends Wl{parsePrimitiveData(e,s,r,a){return rA(e,s,r,a)}parseArrayData(e,s,r,a){return rA(e,s,r,a)}parseObjectData(e,s,r,a){const{iScale:i,vScale:l}=e,{xAxisKey:d="x",yAxisKey:u="y"}=this._parsing,h=i.axis==="x"?d:u,f=l.axis==="x"?d:u,p=[];let x,w,N,v;for(x=r,w=r+a;x<w;++x)v=s[x],N={},N[i.axis]=i.parse(ac(v,h),x),p.push(yD(ac(v,f),N,l,x));return p}updateRangeFromParsed(e,s,r,a){super.updateRangeFromParsed(e,s,r,a);const i=r._custom;i&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:r,vScale:a}=s,i=this.getParsed(e),l=i._custom,d=lv(l)?"["+l.start+", "+l.end+"]":""+a.getLabelForValue(i[a.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,r,a){const i=a==="reset",{index:l,_cachedMeta:{vScale:d}}=this,u=d.getBasePixel(),h=d.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:x}=this._getSharedOptions(s,a);for(let w=s;w<s+r;w++){const N=this.getParsed(w),v=i||ds(N[d.axis])?{base:u,head:u}:this._calculateBarValuePixels(w),j=this._calculateBarIndexPixels(w,f),k=(N._stacks||{})[d.axis],T={horizontal:h,base:v.base,enableBorderRadius:!k||lv(N._custom)||l===k._top||l===k._bottom,x:h?v.head:j.center,y:h?j.center:v.head,height:h?j.size:Math.abs(v.size),width:h?Math.abs(v.size):j.size};x&&(T.options=p||this.resolveDataElementOptions(w,e[w].active?"active":a));const P=T.options||e[w].options;Uee(T,P,k,l),Fee(T,P,f.ratio),this.updateElement(e[w],w,T,a)}}_getStacks(e,s){const{iScale:r}=this._cachedMeta,a=r.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),i=r.options.stacked,l=[],d=this._cachedMeta.controller.getParsed(s),u=d&&d[r.axis],h=f=>{const p=f._parsed.find(w=>w[r.axis]===u),x=p&&p[f.vScale.axis];if(ds(x)||isNaN(x))return!0};for(const f of a)if(!(s!==void 0&&h(f))&&((i===!1||l.indexOf(f.stack)===-1||i===void 0&&f.stack===void 0)&&l.push(f.stack),f.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,s,r){const a=this._getStacks(e,r),i=s!==void 0?a.indexOf(s):-1;return i===-1?a.length-1:i}_getRuler(){const e=this.options,s=this._cachedMeta,r=s.iScale,a=[];let i,l;for(i=0,l=s.data.length;i<l;++i)a.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const d=e.barThickness;return{min:d||Pee(s),pixels:a,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:d?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:r,index:a},options:{base:i,minBarLength:l}}=this,d=i||0,u=this.getParsed(e),h=u._custom,f=lv(h);let p=u[s.axis],x=0,w=r?this.applyStack(s,u,r):p,N,v;w!==p&&(x=w-p,w=p),f&&(p=h.barStart,w=h.barEnd-h.barStart,p!==0&&Za(p)!==Za(h.barEnd)&&(x=0),x+=p);const j=!ds(i)&&!f?i:x;let k=s.getPixelForValue(j);if(this.chart.getDataVisibility(e)?N=s.getPixelForValue(x+w):N=k,v=N-k,Math.abs(v)<l){v=Oee(v,s,d)*l,p===d&&(k-=v/2);const T=s.getPixelForDecimal(0),P=s.getPixelForDecimal(1),U=Math.min(T,P),R=Math.max(T,P);k=Math.max(Math.min(k,R),U),N=k+v,r&&!f&&(u._stacks[s.axis]._visualValues[a]=s.getValueForPixel(N)-s.getValueForPixel(k))}if(k===s.getPixelForValue(d)){const T=Za(v)*s.getLineWidthForValue(d)/2;k+=T,v-=T}return{size:v,base:k,head:N,center:N+v/2}}_calculateBarIndexPixels(e,s){const r=s.scale,a=this.options,i=a.skipNull,l=Gt(a.maxBarThickness,1/0);let d,u;if(s.grouped){const h=i?this._getStackCount(e):s.stackCount,f=a.barThickness==="flex"?Dee(e,s,a,h):Iee(e,s,a,h),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);d=f.start+f.chunk*p+f.chunk/2,u=Math.min(l,f.chunk*f.ratio)}else d=r.getPixelForValue(this.getParsed(e)[r.axis],e),u=Math.min(l,s.min*s.ratio);return{base:d-u/2,head:d+u/2,center:d,size:u}}draw(){const e=this._cachedMeta,s=e.vScale,r=e.data,a=r.length;let i=0;for(;i<a;++i)this.getParsed(i)[s.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}Be(jp,"id","bar"),Be(jp,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Be(jp,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function zee(t,e,s){let r=1,a=1,i=0,l=0;if(e<Bs){const d=t,u=d+e,h=Math.cos(d),f=Math.sin(d),p=Math.cos(u),x=Math.sin(u),w=(P,U,R)=>Em(P,d,u,!0)?1:Math.max(U,U*s,R,R*s),N=(P,U,R)=>Em(P,d,u,!0)?-1:Math.min(U,U*s,R,R*s),v=w(0,h,p),j=w(hr,f,x),k=N(nr,h,p),T=N(nr+hr,f,x);r=(v-k)/2,a=(j-T)/2,i=-(v+k)/2,l=-(j+T)/2}return{ratioX:r,ratioY:a,offsetX:i,offsetY:l}}class Rh extends Wl{constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const r=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=r;else{let i=u=>+r[u];if(rs(r[e])){const{key:u="value"}=this._parsing;i=h=>+ac(r[h],u)}let l,d;for(l=e,d=e+s;l<d;++l)a._parsed[l]=i(l)}}_getRotation(){return Ci(this.options.rotation-90)}_getCircumference(){return Ci(this.options.circumference)}_getRotationExtents(){let e=Bs,s=-Bs;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const a=this.chart.getDatasetMeta(r).controller,i=a._getRotation(),l=a._getCircumference();e=Math.min(e,i),s=Math.max(s,i+l)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:r}=s,a=this._cachedMeta,i=a.data,l=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,d=Math.max((Math.min(r.width,r.height)-l)/2,0),u=Math.min(GJ(this.options.cutout,d),1),h=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:x,ratioY:w,offsetX:N,offsetY:v}=zee(p,f,u),j=(r.width-l)/x,k=(r.height-l)/w,T=Math.max(Math.min(j,k)/2,0),P=X6(this.options.radius,T),U=Math.max(P*u,0),R=(P-U)/this._getVisibleDatasetWeightTotal();this.offsetX=N*P,this.offsetY=v*P,a.total=this.calculateTotal(),this.outerRadius=P-R*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-R*h,0),this.updateElements(i,0,i.length,e)}_circumference(e,s){const r=this.options,a=this._cachedMeta,i=this._getCircumference();return s&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*i/Bs)}updateElements(e,s,r,a){const i=a==="reset",l=this.chart,d=l.chartArea,h=l.options.animation,f=(d.left+d.right)/2,p=(d.top+d.bottom)/2,x=i&&h.animateScale,w=x?0:this.innerRadius,N=x?0:this.outerRadius,{sharedOptions:v,includeOptions:j}=this._getSharedOptions(s,a);let k=this._getRotation(),T;for(T=0;T<s;++T)k+=this._circumference(T,i);for(T=s;T<s+r;++T){const P=this._circumference(T,i),U=e[T],R={x:f+this.offsetX,y:p+this.offsetY,startAngle:k,endAngle:k+P,circumference:P,outerRadius:N,innerRadius:w};j&&(R.options=v||this.resolveDataElementOptions(T,U.active?"active":a)),k+=P,this.updateElement(U,T,R,a)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let r=0,a;for(a=0;a<s.length;a++){const i=e._parsed[a];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(a)&&!s[a].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?Bs*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,r=this.chart,a=r.data.labels||[],i=Gj(s._parsed[e],r.options.locale);return{label:a[e]||"",value:i}}getMaxBorderWidth(e){let s=0;const r=this.chart;let a,i,l,d,u;if(!e){for(a=0,i=r.data.datasets.length;a<i;++a)if(r.isDatasetVisible(a)){l=r.getDatasetMeta(a),e=l.data,d=l.controller;break}}if(!e)return 0;for(a=0,i=e.length;a<i;++a)u=d.resolveDataElementOptions(a),u.borderAlign!=="inner"&&(s=Math.max(s,u.borderWidth||0,u.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let r=0,a=e.length;r<a;++r){const i=this.resolveDataElementOptions(r);s=Math.max(s,i.offset||0,i.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(s+=this._getRingWeight(r));return s}_getRingWeight(e){return Math.max(Gt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Be(Rh,"id","doughnut"),Be(Rh,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Be(Rh,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Be(Rh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:r,color:a}}=e.legend.options;return s.labels.map((i,l)=>{const u=e.getDatasetMeta(0).controller.getStyle(l);return{text:i,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:a,lineWidth:u.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,s,r){r.chart.toggleDataVisibility(s.index),r.chart.update()}}}});class _p extends Wl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:r,data:a=[],_dataset:i}=s,l=this.chart._animationsDisabled;let{start:d,count:u}=hZ(s,a,l);this._drawStart=d,this._drawCount=u,mZ(s)&&(d=0,u=a.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=a;const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:h},e),this.updateElements(a,d,u,e)}updateElements(e,s,r,a){const i=a==="reset",{iScale:l,vScale:d,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(s,a),x=l.axis,w=d.axis,{spanGaps:N,segment:v}=this.options,j=km(N)?N:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||i||a==="none",T=s+r,P=e.length;let U=s>0&&this.getParsed(s-1);for(let R=0;R<P;++R){const O=e[R],I=k?O:{};if(R<s||R>=T){I.skip=!0;continue}const C=this.getParsed(R),E=ds(C[w]),D=I[x]=l.getPixelForValue(C[x],R),V=I[w]=i||E?d.getBasePixel():d.getPixelForValue(u?this.applyStack(d,C,u):C[w],R);I.skip=isNaN(D)||isNaN(V)||E,I.stop=R>0&&Math.abs(C[x]-U[x])>j,v&&(I.parsed=C,I.raw=h.data[R]),p&&(I.options=f||this.resolveDataElementOptions(R,O.active?"active":a)),k||this.updateElement(O,R,I,a),U=C}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,r=s.options&&s.options.borderWidth||0,a=e.data||[];if(!a.length)return r;const i=a[0].size(this.resolveDataElementOptions(0)),l=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(r,i,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Be(_p,"id","line"),Be(_p,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Be(_p,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Tl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class t1{constructor(e){Be(this,"options");this.options=e||{}}static override(e){Object.assign(t1.prototype,e)}init(){}formats(){return Tl()}parse(){return Tl()}format(){return Tl()}add(){return Tl()}diff(){return Tl()}startOf(){return Tl()}endOf(){return Tl()}}var Bee={_date:t1};function $ee(t,e,s,r){const{controller:a,data:i,_sorted:l}=t,d=a._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(d&&e===d.axis&&e!=="r"&&l&&i.length){const h=d._reversePixels?oZ:Fl;if(r){if(a._sharedOptions){const f=i[0],p=typeof f.getRange=="function"&&f.getRange(e);if(p){const x=h(i,e,s-p),w=h(i,e,s+p);return{lo:x.lo,hi:w.hi}}}}else{const f=h(i,e,s);if(u){const{vScale:p}=a._cachedMeta,{_parsed:x}=t,w=x.slice(0,f.lo+1).reverse().findIndex(v=>!ds(v[p.axis]));f.lo-=Math.max(0,w);const N=x.slice(f.hi).findIndex(v=>!ds(v[p.axis]));f.hi+=Math.max(0,N)}return f}}return{lo:0,hi:i.length-1}}function gx(t,e,s,r,a){const i=t.getSortedVisibleDatasetMetas(),l=s[e];for(let d=0,u=i.length;d<u;++d){const{index:h,data:f}=i[d],{lo:p,hi:x}=$ee(i[d],e,l,a);for(let w=p;w<=x;++w){const N=f[w];N.skip||r(N,h,w)}}}function qee(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(r,a){const i=e?Math.abs(r.x-a.x):0,l=s?Math.abs(r.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(l,2))}}function cv(t,e,s,r,a){const i=[];return!a&&!t.isPointInArea(e)||gx(t,s,e,function(d,u,h){!a&&!Tm(d,t.chartArea,0)||d.inRange(e.x,e.y,r)&&i.push({element:d,datasetIndex:u,index:h})},!0),i}function Hee(t,e,s,r){let a=[];function i(l,d,u){const{startAngle:h,endAngle:f}=l.getProps(["startAngle","endAngle"],r),{angle:p}=Z6(l,{x:e.x,y:e.y});Em(p,h,f)&&a.push({element:l,datasetIndex:d,index:u})}return gx(t,s,e,i),a}function Gee(t,e,s,r,a,i){let l=[];const d=qee(s);let u=Number.POSITIVE_INFINITY;function h(f,p,x){const w=f.inRange(e.x,e.y,a);if(r&&!w)return;const N=f.getCenterPoint(a);if(!(!!i||t.isPointInArea(N))&&!w)return;const j=d(e,N);j<u?(l=[{element:f,datasetIndex:p,index:x}],u=j):j===u&&l.push({element:f,datasetIndex:p,index:x})}return gx(t,s,e,h),l}function dv(t,e,s,r,a,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!r?Hee(t,e,s,a):Gee(t,e,s,r,a,i)}function iA(t,e,s,r,a){const i=[],l=s==="x"?"inXRange":"inYRange";let d=!1;return gx(t,s,e,(u,h,f)=>{u[l]&&u[l](e[s],a)&&(i.push({element:u,datasetIndex:h,index:f}),d=d||u.inRange(e.x,e.y,a))}),r&&!d?[]:i}var Wee={modes:{index(t,e,s,r){const a=Pl(e,t),i=s.axis||"x",l=s.includeInvisible||!1,d=s.intersect?cv(t,a,i,r,l):dv(t,a,i,!1,r,l),u=[];return d.length?(t.getSortedVisibleDatasetMetas().forEach(h=>{const f=d[0].index,p=h.data[f];p&&!p.skip&&u.push({element:p,datasetIndex:h.index,index:f})}),u):[]},dataset(t,e,s,r){const a=Pl(e,t),i=s.axis||"xy",l=s.includeInvisible||!1;let d=s.intersect?cv(t,a,i,r,l):dv(t,a,i,!1,r,l);if(d.length>0){const u=d[0].datasetIndex,h=t.getDatasetMeta(u).data;d=[];for(let f=0;f<h.length;++f)d.push({element:h[f],datasetIndex:u,index:f})}return d},point(t,e,s,r){const a=Pl(e,t),i=s.axis||"xy",l=s.includeInvisible||!1;return cv(t,a,i,r,l)},nearest(t,e,s,r){const a=Pl(e,t),i=s.axis||"xy",l=s.includeInvisible||!1;return dv(t,a,i,s.intersect,r,l)},x(t,e,s,r){const a=Pl(e,t);return iA(t,a,"x",s.intersect,r)},y(t,e,s,r){const a=Pl(e,t);return iA(t,a,"y",s.intersect,r)}}};const bD=["left","top","right","bottom"];function ph(t,e){return t.filter(s=>s.pos===e)}function oA(t,e){return t.filter(s=>bD.indexOf(s.pos)===-1&&s.box.axis===e)}function xh(t,e){return t.sort((s,r)=>{const a=e?r:s,i=e?s:r;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function Yee(t){const e=[];let s,r,a,i,l,d;for(s=0,r=(t||[]).length;s<r;++s)a=t[s],{position:i,options:{stack:l,stackWeight:d=1}}=a,e.push({index:s,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&i+l,stackWeight:d});return e}function Kee(t){const e={};for(const s of t){const{stack:r,pos:a,stackWeight:i}=s;if(!r||!bD.includes(a))continue;const l=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=i}return e}function Xee(t,e){const s=Kee(t),{vBoxMaxWidth:r,hBoxMaxHeight:a}=e;let i,l,d;for(i=0,l=t.length;i<l;++i){d=t[i];const{fullSize:u}=d.box,h=s[d.stack],f=h&&d.stackWeight/h.weight;d.horizontal?(d.width=f?f*r:u&&e.availableWidth,d.height=a):(d.width=r,d.height=f?f*a:u&&e.availableHeight)}return s}function Qee(t){const e=Yee(t),s=xh(e.filter(h=>h.box.fullSize),!0),r=xh(ph(e,"left"),!0),a=xh(ph(e,"right")),i=xh(ph(e,"top"),!0),l=xh(ph(e,"bottom")),d=oA(e,"x"),u=oA(e,"y");return{fullSize:s,leftAndTop:r.concat(i),rightAndBottom:a.concat(u).concat(l).concat(d),chartArea:ph(e,"chartArea"),vertical:r.concat(a).concat(u),horizontal:i.concat(l).concat(d)}}function lA(t,e,s,r){return Math.max(t[s],e[s])+Math.max(t[r],e[r])}function vD(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Jee(t,e,s,r){const{pos:a,box:i}=s,l=t.maxPadding;if(!rs(a)){s.size&&(t[a]-=s.size);const p=r[s.stack]||{size:0,count:1};p.size=Math.max(p.size,s.horizontal?i.height:i.width),s.size=p.size/p.count,t[a]+=s.size}i.getPadding&&vD(l,i.getPadding());const d=Math.max(0,e.outerWidth-lA(l,t,"left","right")),u=Math.max(0,e.outerHeight-lA(l,t,"top","bottom")),h=d!==t.w,f=u!==t.h;return t.w=d,t.h=u,s.horizontal?{same:h,other:f}:{same:f,other:h}}function Zee(t){const e=t.maxPadding;function s(r){const a=Math.max(e[r]-t[r],0);return t[r]+=a,a}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function ete(t,e){const s=e.maxPadding;function r(a){const i={left:0,top:0,right:0,bottom:0};return a.forEach(l=>{i[l]=Math.max(e[l],s[l])}),i}return r(t?["left","right"]:["top","bottom"])}function Ph(t,e,s,r){const a=[];let i,l,d,u,h,f;for(i=0,l=t.length,h=0;i<l;++i){d=t[i],u=d.box,u.update(d.width||e.w,d.height||e.h,ete(d.horizontal,e));const{same:p,other:x}=Jee(e,s,d,r);h|=p&&a.length,f=f||x,u.fullSize||a.push(d)}return h&&Ph(a,e,s,r)||f}function Gg(t,e,s,r,a){t.top=s,t.left=e,t.right=e+r,t.bottom=s+a,t.width=r,t.height=a}function cA(t,e,s,r){const a=s.padding;let{x:i,y:l}=e;for(const d of t){const u=d.box,h=r[d.stack]||{placed:0,weight:1},f=d.stackWeight/h.weight||1;if(d.horizontal){const p=e.w*f,x=h.size||u.height;Sm(h.start)&&(l=h.start),u.fullSize?Gg(u,a.left,l,s.outerWidth-a.right-a.left,x):Gg(u,e.left+h.placed,l,p,x),h.start=l,h.placed+=p,l=u.bottom}else{const p=e.h*f,x=h.size||u.width;Sm(h.start)&&(i=h.start),u.fullSize?Gg(u,i,a.top,x,s.outerHeight-a.bottom-a.top):Gg(u,i,e.top+h.placed,x,p),h.start=i,h.placed+=p,i=u.right}}e.x=i,e.y=l}var ko={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,r){if(!t)return;const a=xa(t.options.layout.padding),i=Math.max(e-a.width,0),l=Math.max(s-a.height,0),d=Qee(t.boxes),u=d.vertical,h=d.horizontal;ps(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const f=u.reduce((v,j)=>j.box.options&&j.box.options.display===!1?v:v+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:s,padding:a,availableWidth:i,availableHeight:l,vBoxMaxWidth:i/2/f,hBoxMaxHeight:l/2}),x=Object.assign({},a);vD(x,xa(r));const w=Object.assign({maxPadding:x,w:i,h:l,x:a.left,y:a.top},a),N=Xee(u.concat(h),p);Ph(d.fullSize,w,p,N),Ph(u,w,p,N),Ph(h,w,p,N)&&Ph(u,w,p,N),Zee(w),cA(d.leftAndTop,w,p,N),w.x+=w.w,w.y+=w.h,cA(d.rightAndBottom,w,p,N),t.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},ps(d.chartArea,v=>{const j=v.box;Object.assign(j,t.chartArea),j.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class wD{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,r){}removeEventListener(e,s,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,r,a){return s=Math.max(0,s||e.width),r=r||e.height,{width:s,height:Math.max(0,a?Math.floor(s/a):r)}}isAttached(e){return!0}updateConfig(e){}}class tte extends wD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Sp="$chartjs",ste={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},dA=t=>t===null||t==="";function rte(t,e){const s=t.style,r=t.getAttribute("height"),a=t.getAttribute("width");if(t[Sp]={initial:{height:r,width:a,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",dA(a)){const i=WC(t,"width");i!==void 0&&(t.width=i)}if(dA(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=WC(t,"height");i!==void 0&&(t.height=i)}return t}const ND=see?{passive:!0}:!1;function nte(t,e,s){t&&t.addEventListener(e,s,ND)}function ate(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,ND)}function ite(t,e){const s=ste[t.type]||t.type,{x:r,y:a}=Pl(t,e);return{type:s,chart:e,native:t,x:r!==void 0?r:null,y:a!==void 0?a:null}}function f0(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function ote(t,e,s){const r=t.canvas,a=new MutationObserver(i=>{let l=!1;for(const d of i)l=l||f0(d.addedNodes,r),l=l&&!f0(d.removedNodes,r);l&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}function lte(t,e,s){const r=t.canvas,a=new MutationObserver(i=>{let l=!1;for(const d of i)l=l||f0(d.removedNodes,r),l=l&&!f0(d.addedNodes,r);l&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}const Cm=new Map;let uA=0;function jD(){const t=window.devicePixelRatio;t!==uA&&(uA=t,Cm.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function cte(t,e){Cm.size||window.addEventListener("resize",jD),Cm.set(t,e)}function dte(t){Cm.delete(t),Cm.size||window.removeEventListener("resize",jD)}function ute(t,e,s){const r=t.canvas,a=r&&e1(r);if(!a)return;const i=rD((d,u)=>{const h=a.clientWidth;s(d,u),h<a.clientWidth&&s()},window),l=new ResizeObserver(d=>{const u=d[0],h=u.contentRect.width,f=u.contentRect.height;h===0&&f===0||i(h,f)});return l.observe(a),cte(t,i),l}function uv(t,e,s){s&&s.disconnect(),e==="resize"&&dte(t)}function hte(t,e,s){const r=t.canvas,a=rD(i=>{t.ctx!==null&&s(ite(i,t))},t);return nte(r,e,a),a}class mte extends wD{acquireContext(e,s){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(rte(e,s),r):null}releaseContext(e){const s=e.canvas;if(!s[Sp])return!1;const r=s[Sp].initial;["height","width"].forEach(i=>{const l=r[i];ds(l)?s.removeAttribute(i):s.setAttribute(i,l)});const a=r.style||{};return Object.keys(a).forEach(i=>{s.style[i]=a[i]}),s.width=s.width,delete s[Sp],!0}addEventListener(e,s,r){this.removeEventListener(e,s);const a=e.$proxies||(e.$proxies={}),l={attach:ote,detach:lte,resize:ute}[s]||hte;a[s]=l(e,s,r)}removeEventListener(e,s){const r=e.$proxies||(e.$proxies={}),a=r[s];if(!a)return;({attach:uv,detach:uv,resize:uv}[s]||ate)(e,s,a),r[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,r,a){return tee(e,s,r,a)}isAttached(e){const s=e&&e1(e);return!!(s&&s.isConnected)}}function fte(t){return!Zj()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?tte:mte}var ep;let Yo=(ep=class{constructor(){Be(this,"x");Be(this,"y");Be(this,"active",!1);Be(this,"options");Be(this,"$animations")}tooltipPosition(e){const{x:s,y:r}=this.getProps(["x","y"],e);return{x:s,y:r}}hasValue(){return km(this.x)&&km(this.y)}getProps(e,s){const r=this.$animations;if(!s||!r)return this;const a={};return e.forEach(i=>{a[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),a}},Be(ep,"defaults",{}),Be(ep,"defaultRoutes"),ep);function gte(t,e){const s=t.options.ticks,r=pte(t),a=Math.min(s.maxTicksLimit||r,r),i=s.major.enabled?yte(e):[],l=i.length,d=i[0],u=i[l-1],h=[];if(l>a)return bte(e,h,i,l/a),h;const f=xte(i,e,a);if(l>0){let p,x;const w=l>1?Math.round((u-d)/(l-1)):null;for(Wg(e,h,f,ds(w)?0:d-w,d),p=0,x=l-1;p<x;p++)Wg(e,h,f,i[p],i[p+1]);return Wg(e,h,f,u,ds(w)?e.length:u+w),h}return Wg(e,h,f),h}function pte(t){const e=t.options.offset,s=t._tickSize(),r=t._length/s+(e?0:1),a=t._maxLength/s;return Math.floor(Math.min(r,a))}function xte(t,e,s){const r=vte(t),a=e.length/s;if(!r)return Math.max(a,1);const i=eZ(r);for(let l=0,d=i.length-1;l<d;l++){const u=i[l];if(u>a)return u}return Math.max(a,1)}function yte(t){const e=[];let s,r;for(s=0,r=t.length;s<r;s++)t[s].major&&e.push(s);return e}function bte(t,e,s,r){let a=0,i=s[0],l;for(r=Math.ceil(r),l=0;l<t.length;l++)l===i&&(e.push(t[l]),a++,i=s[a*r])}function Wg(t,e,s,r,a){const i=Gt(r,0),l=Math.min(Gt(a,t.length),t.length);let d=0,u,h,f;for(s=Math.ceil(s),a&&(u=a-r,s=u/Math.floor(u/s)),f=i;f<0;)d++,f=Math.round(i+d*s);for(h=Math.max(i,0);h<l;h++)h===f&&(e.push(t[h]),d++,f=Math.round(i+d*s))}function vte(t){const e=t.length;let s,r;if(e<2)return!1;for(r=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==r)return!1;return r}const wte=t=>t==="left"?"right":t==="right"?"left":t,hA=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,mA=(t,e)=>Math.min(e||t,t);function fA(t,e){const s=[],r=t.length/e,a=t.length;let i=0;for(;i<a;i+=r)s.push(t[Math.floor(i)]);return s}function Nte(t,e,s){const r=t.ticks.length,a=Math.min(e,r-1),i=t._startPixel,l=t._endPixel,d=1e-6;let u=t.getPixelForTick(a),h;if(!(s&&(r===1?h=Math.max(u-i,l-u):e===0?h=(t.getPixelForTick(1)-u)/2:h=(u-t.getPixelForTick(a-1))/2,u+=a<e?h:-h,u<i-d||u>l+d)))return u}function jte(t,e){ps(t,s=>{const r=s.gc,a=r.length/2;let i;if(a>e){for(i=0;i<a;++i)delete s.data[r[i]];r.splice(0,a)}})}function yh(t){return t.drawTicks?t.tickLength:0}function gA(t,e){if(!t.display)return 0;const s=vn(t.font,e),r=xa(t.padding);return(kr(t.text)?t.text.length:1)*s.lineHeight+r.height}function _te(t,e){return pc(t,{scale:e,type:"scale"})}function Ste(t,e,s){return pc(t,{tick:s,index:e,type:"tick"})}function kte(t,e,s){let r=nD(t);return(s&&e!=="right"||!s&&e==="right")&&(r=wte(r)),r}function Ete(t,e,s,r){const{top:a,left:i,bottom:l,right:d,chart:u}=t,{chartArea:h,scales:f}=u;let p=0,x,w,N;const v=l-a,j=d-i;if(t.isHorizontal()){if(w=On(r,i,d),rs(s)){const k=Object.keys(s)[0],T=s[k];N=f[k].getPixelForValue(T)+v-e}else s==="center"?N=(h.bottom+h.top)/2+v-e:N=hA(t,s,e);x=d-i}else{if(rs(s)){const k=Object.keys(s)[0],T=s[k];w=f[k].getPixelForValue(T)-j+e}else s==="center"?w=(h.left+h.right)/2-j+e:w=hA(t,s,e);N=On(r,l,a),p=s==="left"?-hr:hr}return{titleX:w,titleY:N,maxWidth:x,rotation:p}}class nu extends Yo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:r,_suggestedMax:a}=this;return e=Ma(e,Number.POSITIVE_INFINITY),s=Ma(s,Number.NEGATIVE_INFINITY),r=Ma(r,Number.POSITIVE_INFINITY),a=Ma(a,Number.NEGATIVE_INFINITY),{min:Ma(e,r),max:Ma(s,a),minDefined:ra(e),maxDefined:ra(s)}}getMinMax(e){let{min:s,max:r,minDefined:a,maxDefined:i}=this.getUserBounds(),l;if(a&&i)return{min:s,max:r};const d=this.getMatchingVisibleMetas();for(let u=0,h=d.length;u<h;++u)l=d[u].controller.getMinMax(this,e),a||(s=Math.min(s,l.min)),i||(r=Math.max(r,l.max));return s=i&&s>r?r:s,r=a&&s>r?s:r,{min:Ma(s,Ma(r,s)),max:Ma(r,Ma(s,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ts(this.options.beforeUpdate,[this])}update(e,s,r){const{beginAtZero:a,grace:i,ticks:l}=this.options,d=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=IZ(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=d<this.ticks.length;this._convertTicksToLabels(u?fA(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=gte(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,r;this.isHorizontal()?(s=this.left,r=this.right):(s=this.top,r=this.bottom,e=!e),this._startPixel=s,this._endPixel=r,this._reversePixels=e,this._length=r-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ts(this.options.afterUpdate,[this])}beforeSetDimensions(){Ts(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ts(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ts(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ts(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let r,a,i;for(r=0,a=e.length;r<a;r++)i=e[r],i.label=Ts(s.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Ts(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ts(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,r=mA(this.ticks.length,e.ticks.maxTicksLimit),a=s.minRotation||0,i=s.maxRotation;let l=a,d,u,h;if(!this._isVisible()||!s.display||a>=i||r<=1||!this.isHorizontal()){this.labelRotation=a;return}const f=this._getLabelSizes(),p=f.widest.width,x=f.highest.height,w=Xr(this.chart.width-p,0,this.maxWidth);d=e.offset?this.maxWidth/r:w/(r-1),p+6>d&&(d=w/(r-(e.offset?.5:1)),u=this.maxHeight-yh(e.grid)-s.padding-gA(e.title,this.chart.options.font),h=Math.sqrt(p*p+x*x),l=nZ(Math.min(Math.asin(Xr((f.highest.height+6)/d,-1,1)),Math.asin(Xr(u/h,-1,1))-Math.asin(Xr(x/h,-1,1)))),l=Math.max(a,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Ts(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ts(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:r,title:a,grid:i}}=this,l=this._isVisible(),d=this.isHorizontal();if(l){const u=gA(a,s.options.font);if(d?(e.width=this.maxWidth,e.height=yh(i)+u):(e.height=this.maxHeight,e.width=yh(i)+u),r.display&&this.ticks.length){const{first:h,last:f,widest:p,highest:x}=this._getLabelSizes(),w=r.padding*2,N=Ci(this.labelRotation),v=Math.cos(N),j=Math.sin(N);if(d){const k=r.mirror?0:j*p.width+v*x.height;e.height=Math.min(this.maxHeight,e.height+k+w)}else{const k=r.mirror?0:v*p.width+j*x.height;e.width=Math.min(this.maxWidth,e.width+k+w)}this._calculatePadding(h,f,j,v)}}this._handleMargins(),d?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,r,a){const{ticks:{align:i,padding:l},position:d}=this.options,u=this.labelRotation!==0,h=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,w=0;u?h?(x=a*e.width,w=r*s.height):(x=r*e.height,w=a*s.width):i==="start"?w=s.width:i==="end"?x=e.width:i!=="inner"&&(x=e.width/2,w=s.width/2),this.paddingLeft=Math.max((x-f+l)*this.width/(this.width-f),0),this.paddingRight=Math.max((w-p+l)*this.width/(this.width-p),0)}else{let f=s.height/2,p=e.height/2;i==="start"?(f=0,p=e.height):i==="end"&&(f=s.height,p=0),this.paddingTop=f+l,this.paddingBottom=p+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ts(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,r;for(s=0,r=e.length;s<r;s++)ds(e[s].label)&&(e.splice(s,1),r--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let r=this.ticks;s<r.length&&(r=fA(r,s)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,r){const{ctx:a,_longestTextCache:i}=this,l=[],d=[],u=Math.floor(s/mA(s,r));let h=0,f=0,p,x,w,N,v,j,k,T,P,U,R;for(p=0;p<s;p+=u){if(N=e[p].label,v=this._resolveTickFontOptions(p),a.font=j=v.string,k=i[j]=i[j]||{data:{},gc:[]},T=v.lineHeight,P=U=0,!ds(N)&&!kr(N))P=BC(a,k.data,k.gc,P,N),U=T;else if(kr(N))for(x=0,w=N.length;x<w;++x)R=N[x],!ds(R)&&!kr(R)&&(P=BC(a,k.data,k.gc,P,R),U+=T);l.push(P),d.push(U),h=Math.max(P,h),f=Math.max(U,f)}jte(i,s);const O=l.indexOf(h),I=d.indexOf(f),C=E=>({width:l[E]||0,height:d[E]||0});return{first:C(0),last:C(s-1),widest:C(O),highest:C(I),widths:l,heights:d}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return iZ(this._alignToPixels?El(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const r=s[e];return r.$context||(r.$context=Ste(this.getContext(),e,r))}return this.$context||(this.$context=_te(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Ci(this.labelRotation),r=Math.abs(Math.cos(s)),a=Math.abs(Math.sin(s)),i=this._getLabelSizes(),l=e.autoSkipPadding||0,d=i?i.widest.width+l:0,u=i?i.highest.height+l:0;return this.isHorizontal()?u*r>d*a?d/r:u/a:u*a<d*r?u/r:d/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,r=this.chart,a=this.options,{grid:i,position:l,border:d}=a,u=i.offset,h=this.isHorizontal(),p=this.ticks.length+(u?1:0),x=yh(i),w=[],N=d.setContext(this.getContext()),v=N.display?N.width:0,j=v/2,k=function(H){return El(r,H,v)};let T,P,U,R,O,I,C,E,D,V,B,M;if(l==="top")T=k(this.bottom),I=this.bottom-x,E=T-j,V=k(e.top)+j,M=e.bottom;else if(l==="bottom")T=k(this.top),V=e.top,M=k(e.bottom)-j,I=T+j,E=this.top+x;else if(l==="left")T=k(this.right),O=this.right-x,C=T-j,D=k(e.left)+j,B=e.right;else if(l==="right")T=k(this.left),D=e.left,B=k(e.right)-j,O=T+j,C=this.left+x;else if(s==="x"){if(l==="center")T=k((e.top+e.bottom)/2+.5);else if(rs(l)){const H=Object.keys(l)[0],W=l[H];T=k(this.chart.scales[H].getPixelForValue(W))}V=e.top,M=e.bottom,I=T+j,E=I+x}else if(s==="y"){if(l==="center")T=k((e.left+e.right)/2);else if(rs(l)){const H=Object.keys(l)[0],W=l[H];T=k(this.chart.scales[H].getPixelForValue(W))}O=T-j,C=O-x,D=e.left,B=e.right}const Y=Gt(a.ticks.maxTicksLimit,p),Q=Math.max(1,Math.ceil(p/Y));for(P=0;P<p;P+=Q){const H=this.getContext(P),W=i.setContext(H),de=d.setContext(H),ge=W.lineWidth,z=W.color,G=de.dash||[],X=de.dashOffset,re=W.tickWidth,xe=W.tickColor,ze=W.tickBorderDash||[],me=W.tickBorderDashOffset;U=Nte(this,P,u),U!==void 0&&(R=El(r,U,ge),h?O=C=D=B=R:I=E=V=M=R,w.push({tx1:O,ty1:I,tx2:C,ty2:E,x1:D,y1:V,x2:B,y2:M,width:ge,color:z,borderDash:G,borderDashOffset:X,tickWidth:re,tickColor:xe,tickBorderDash:ze,tickBorderDashOffset:me}))}return this._ticksLength=p,this._borderValue=T,w}_computeLabelItems(e){const s=this.axis,r=this.options,{position:a,ticks:i}=r,l=this.isHorizontal(),d=this.ticks,{align:u,crossAlign:h,padding:f,mirror:p}=i,x=yh(r.grid),w=x+f,N=p?-f:w,v=-Ci(this.labelRotation),j=[];let k,T,P,U,R,O,I,C,E,D,V,B,M="middle";if(a==="top")O=this.bottom-N,I=this._getXAxisLabelAlignment();else if(a==="bottom")O=this.top+N,I=this._getXAxisLabelAlignment();else if(a==="left"){const Q=this._getYAxisLabelAlignment(x);I=Q.textAlign,R=Q.x}else if(a==="right"){const Q=this._getYAxisLabelAlignment(x);I=Q.textAlign,R=Q.x}else if(s==="x"){if(a==="center")O=(e.top+e.bottom)/2+w;else if(rs(a)){const Q=Object.keys(a)[0],H=a[Q];O=this.chart.scales[Q].getPixelForValue(H)+w}I=this._getXAxisLabelAlignment()}else if(s==="y"){if(a==="center")R=(e.left+e.right)/2-w;else if(rs(a)){const Q=Object.keys(a)[0],H=a[Q];R=this.chart.scales[Q].getPixelForValue(H)}I=this._getYAxisLabelAlignment(x).textAlign}s==="y"&&(u==="start"?M="top":u==="end"&&(M="bottom"));const Y=this._getLabelSizes();for(k=0,T=d.length;k<T;++k){P=d[k],U=P.label;const Q=i.setContext(this.getContext(k));C=this.getPixelForTick(k)+i.labelOffset,E=this._resolveTickFontOptions(k),D=E.lineHeight,V=kr(U)?U.length:1;const H=V/2,W=Q.color,de=Q.textStrokeColor,ge=Q.textStrokeWidth;let z=I;l?(R=C,I==="inner"&&(k===T-1?z=this.options.reverse?"left":"right":k===0?z=this.options.reverse?"right":"left":z="center"),a==="top"?h==="near"||v!==0?B=-V*D+D/2:h==="center"?B=-Y.highest.height/2-H*D+D:B=-Y.highest.height+D/2:h==="near"||v!==0?B=D/2:h==="center"?B=Y.highest.height/2-H*D:B=Y.highest.height-V*D,p&&(B*=-1),v!==0&&!Q.showLabelBackdrop&&(R+=D/2*Math.sin(v))):(O=C,B=(1-V)*D/2);let G;if(Q.showLabelBackdrop){const X=xa(Q.backdropPadding),re=Y.heights[k],xe=Y.widths[k];let ze=B-X.top,me=0-X.left;switch(M){case"middle":ze-=re/2;break;case"bottom":ze-=re;break}switch(I){case"center":me-=xe/2;break;case"right":me-=xe;break;case"inner":k===T-1?me-=xe:k>0&&(me-=xe/2);break}G={left:me,top:ze,width:xe+X.width,height:re+X.height,color:Q.backdropColor}}j.push({label:U,font:E,textOffset:B,options:{rotation:v,color:W,strokeColor:de,strokeWidth:ge,textAlign:z,textBaseline:M,translation:[R,O],backdrop:G}})}return j}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Ci(this.labelRotation))return e==="top"?"left":"right";let a="center";return s.align==="start"?a="left":s.align==="end"?a="right":s.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:r,mirror:a,padding:i}}=this.options,l=this._getLabelSizes(),d=e+i,u=l.widest.width;let h,f;return s==="left"?a?(f=this.right+i,r==="near"?h="left":r==="center"?(h="center",f+=u/2):(h="right",f+=u)):(f=this.right-d,r==="near"?h="right":r==="center"?(h="center",f-=u/2):(h="left",f=this.left)):s==="right"?a?(f=this.left+i,r==="near"?h="right":r==="center"?(h="center",f-=u/2):(h="left",f-=u)):(f=this.left+d,r==="near"?h="left":r==="center"?(h="center",f+=u/2):(h="right",f=this.right)):h="right",{textAlign:h,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:r,top:a,width:i,height:l}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(r,a,i,l),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const a=this.ticks.findIndex(i=>i.value===e);return a>=0?s.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const s=this.options.grid,r=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,l;const d=(u,h,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(u.x,u.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(s.display)for(i=0,l=a.length;i<l;++i){const u=a[i];s.drawOnChartArea&&d({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),s.drawTicks&&d({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:r,grid:a}}=this,i=r.setContext(this.getContext()),l=r.display?i.width:0;if(!l)return;const d=a.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,f,p,x;this.isHorizontal()?(h=El(e,this.left,l)-l/2,f=El(e,this.right,d)+d/2,p=x=u):(p=El(e,this.top,l)-l/2,x=El(e,this.bottom,d)+d/2,h=f=u),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(h,p),s.lineTo(f,x),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,a=this._computeLabelArea();a&&Wj(r,a);const i=this.getLabelItems(e);for(const l of i){const d=l.options,u=l.font,h=l.label,f=l.textOffset;u0(r,h,0,f,u,d)}a&&Yj(r)}drawTitle(){const{ctx:e,options:{position:s,title:r,reverse:a}}=this;if(!r.display)return;const i=vn(r.font),l=xa(r.padding),d=r.align;let u=i.lineHeight/2;s==="bottom"||s==="center"||rs(s)?(u+=l.bottom,kr(r.text)&&(u+=i.lineHeight*(r.text.length-1))):u+=l.top;const{titleX:h,titleY:f,maxWidth:p,rotation:x}=Ete(this,u,s,d);u0(e,r.text,0,0,i,{color:r.color,maxWidth:p,rotation:x,textAlign:kte(d,s,a),textBaseline:"middle",translation:[h,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,r=Gt(e.grid&&e.grid.z,-1),a=Gt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==nu.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",a=[];let i,l;for(i=0,l=s.length;i<l;++i){const d=s[i];d[r]===this.id&&(!e||d.type===e)&&a.push(d)}return a}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return vn(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Yg{constructor(e,s,r){this.type=e,this.scope=s,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let r;Ate(s)&&(r=this.register(s));const a=this.items,i=e.id,l=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in a||(a[i]=e,Tte(e,l,r),this.override&&Xs.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const s=this.items,r=e.id,a=this.scope;r in s&&delete s[r],a&&r in Xs[a]&&(delete Xs[a][r],this.override&&delete ic[r])}}function Tte(t,e,s){const r=_m(Object.create(null),[s?Xs.get(s):{},Xs.get(e),t.defaults]);Xs.set(e,r),t.defaultRoutes&&Cte(e,t.defaultRoutes),t.descriptors&&Xs.describe(e,t.descriptors)}function Cte(t,e){Object.keys(e).forEach(s=>{const r=s.split("."),a=r.pop(),i=[t].concat(r).join("."),l=e[s].split("."),d=l.pop(),u=l.join(".");Xs.route(i,a,u,d)})}function Ate(t){return"id"in t&&"defaults"in t}class Rte{constructor(){this.controllers=new Yg(Wl,"datasets",!0),this.elements=new Yg(Yo,"elements"),this.plugins=new Yg(Object,"plugins"),this.scales=new Yg(nu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,r){[...s].forEach(a=>{const i=r||this._getRegistryForType(a);r||i.isForType(a)||i===this.plugins&&a.id?this._exec(e,i,a):ps(a,l=>{const d=r||this._getRegistryForType(l);this._exec(e,d,l)})})}_exec(e,s,r){const a=$j(e);Ts(r["before"+a],[],r),s[e](r),Ts(r["after"+a],[],r)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const r=this._typedRegistries[s];if(r.isForType(e))return r}return this.plugins}_get(e,s,r){const a=s.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return a}}var Va=new Rte;class Pte{constructor(){this._init=[]}notify(e,s,r,a){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=a?this._descriptors(e).filter(a):this._descriptors(e),l=this._notify(i,e,s,r);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,s,r,a){a=a||{};for(const i of e){const l=i.plugin,d=l[r],u=[s,a,i.options];if(Ts(d,u,l)===!1&&a.cancelable)return!1}return!0}invalidate(){ds(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const r=e&&e.config,a=Gt(r.options&&r.options.plugins,{}),i=Ite(r);return a===!1&&!s?[]:Mte(e,i,a,s)}_notifyStateChanges(e){const s=this._oldCache||[],r=this._cache,a=(i,l)=>i.filter(d=>!l.some(u=>d.plugin.id===u.plugin.id));this._notify(a(s,r),e,"stop"),this._notify(a(r,s),e,"start")}}function Ite(t){const e={},s=[],r=Object.keys(Va.plugins.items);for(let i=0;i<r.length;i++)s.push(Va.getPlugin(r[i]));const a=t.plugins||[];for(let i=0;i<a.length;i++){const l=a[i];s.indexOf(l)===-1&&(s.push(l),e[l.id]=!0)}return{plugins:s,localIds:e}}function Dte(t,e){return!e&&t===!1?null:t===!0?{}:t}function Mte(t,{plugins:e,localIds:s},r,a){const i=[],l=t.getContext();for(const d of e){const u=d.id,h=Dte(r[u],a);h!==null&&i.push({plugin:d,options:Ote(t.config,{plugin:d,local:s[u]},h,l)})}return i}function Ote(t,{plugin:e,local:s},r,a){const i=t.pluginScopeKeys(e),l=t.getOptionScopes(r,i);return s&&e.defaults&&l.push(e.defaults),t.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _w(t,e){const s=Xs.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function Lte(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function Ute(t,e){return t===e?"_index_":"_value_"}function pA(t){if(t==="x"||t==="y"||t==="r")return t}function Vte(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Sw(t,...e){if(pA(t))return t;for(const s of e){const r=s.axis||Vte(s.position)||t.length>1&&pA(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function xA(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function Fte(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(s.length)return xA(t,"x",s[0])||xA(t,"y",s[0])}return{}}function zte(t,e){const s=ic[t.type]||{scales:{}},r=e.scales||{},a=_w(t.type,e),i=Object.create(null);return Object.keys(r).forEach(l=>{const d=r[l];if(!rs(d))return console.error(`Invalid scale configuration for scale: ${l}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const u=Sw(l,d,Fte(l,t),Xs.scales[d.type]),h=Ute(u,a),f=s.scales||{};i[l]=Qh(Object.create(null),[{axis:u},d,f[u],f[h]])}),t.data.datasets.forEach(l=>{const d=l.type||t.type,u=l.indexAxis||_w(d,e),f=(ic[d]||{}).scales||{};Object.keys(f).forEach(p=>{const x=Lte(p,u),w=l[x+"AxisID"]||x;i[w]=i[w]||Object.create(null),Qh(i[w],[{axis:x},r[w],f[p]])})}),Object.keys(i).forEach(l=>{const d=i[l];Qh(d,[Xs.scales[d.type],Xs.scale])}),i}function _D(t){const e=t.options||(t.options={});e.plugins=Gt(e.plugins,{}),e.scales=zte(t,e)}function SD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Bte(t){return t=t||{},t.data=SD(t.data),_D(t),t}const yA=new Map,kD=new Set;function Kg(t,e){let s=yA.get(t);return s||(s=e(),yA.set(t,s),kD.add(s)),s}const bh=(t,e,s)=>{const r=ac(e,s);r!==void 0&&t.add(r)};class $te{constructor(e){this._config=Bte(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=SD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),_D(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kg(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Kg(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Kg(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,r=this.type;return Kg(`${r}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const r=this._scopeCache;let a=r.get(e);return(!a||s)&&(a=new Map,r.set(e,a)),a}getOptionScopes(e,s,r){const{options:a,type:i}=this,l=this._cachedScopes(e,r),d=l.get(s);if(d)return d;const u=new Set;s.forEach(f=>{e&&(u.add(e),f.forEach(p=>bh(u,e,p))),f.forEach(p=>bh(u,a,p)),f.forEach(p=>bh(u,ic[i]||{},p)),f.forEach(p=>bh(u,Xs,p)),f.forEach(p=>bh(u,Nw,p))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),kD.has(s)&&l.set(s,h),h}chartOptionScopes(){const{options:e,type:s}=this;return[e,ic[s]||{},Xs.datasets[s]||{},{type:s},Xs,Nw]}resolveNamedOptions(e,s,r,a=[""]){const i={$shared:!0},{resolver:l,subPrefixes:d}=bA(this._resolverCache,e,a);let u=l;if(Hte(l,s)){i.$shared=!1,r=$o(r)?r():r;const h=this.createResolver(e,r,d);u=Fd(l,r,h)}for(const h of s)i[h]=u[h];return i}createResolver(e,s,r=[""],a){const{resolver:i}=bA(this._resolverCache,e,r);return rs(s)?Fd(i,s,void 0,a):i}}function bA(t,e,s){let r=t.get(e);r||(r=new Map,t.set(e,r));const a=s.join();let i=r.get(a);return i||(i={resolver:Xj(e,s),subPrefixes:s.filter(d=>!d.toLowerCase().includes("hover"))},r.set(a,i)),i}const qte=t=>rs(t)&&Object.getOwnPropertyNames(t).some(e=>$o(t[e]));function Hte(t,e){const{isScriptable:s,isIndexable:r}=lD(t);for(const a of e){const i=s(a),l=r(a),d=(l||i)&&t[a];if(i&&($o(d)||qte(d))||l&&kr(d))return!0}return!1}var Gte="4.4.9";const Wte=["top","bottom","left","right","chartArea"];function vA(t,e){return t==="top"||t==="bottom"||Wte.indexOf(t)===-1&&e==="x"}function wA(t,e){return function(s,r){return s[t]===r[t]?s[e]-r[e]:s[t]-r[t]}}function NA(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Ts(s&&s.onComplete,[t],e)}function Yte(t){const e=t.chart,s=e.options.animation;Ts(s&&s.onProgress,[t],e)}function ED(t){return Zj()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const kp={},jA=t=>{const e=ED(t);return Object.values(kp).filter(s=>s.canvas===e).pop()};function Kte(t,e,s){const r=Object.keys(t);for(const a of r){const i=+a;if(i>=e){const l=t[a];delete t[a],(s>0||i>e)&&(t[i+s]=l)}}}function Xte(t,e,s,r){return!s||t.type==="mouseout"?null:r?e:t}var xo;let au=(xo=class{static register(...e){Va.add(...e),_A()}static unregister(...e){Va.remove(...e),_A()}constructor(e,s){const r=this.config=new $te(s),a=ED(e),i=jA(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const l=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||fte(a)),this.platform.updateConfig(r);const d=this.platform.acquireContext(a,l.aspectRatio),u=d&&d.canvas,h=u&&u.height,f=u&&u.width;if(this.id=HJ(),this.ctx=d,this.canvas=u,this.width=f,this.height=h,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Pte,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dZ(p=>this.update(p),l.resizeDelay||0),this._dataChanges=[],kp[this.id]=this,!d||!u){console.error("Failed to create chart: can't acquire context from the given item");return}_i.listen(this,"complete",NA),_i.listen(this,"progress",Yte),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:r,height:a,_aspectRatio:i}=this;return ds(e)?s&&i?i:a?r/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Va}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():GC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $C(this.canvas,this.ctx),this}stop(){return _i.stop(this),this}resize(e,s){_i.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const r=this.options,a=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(a,e,s,i),d=r.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,GC(this,d,!0)&&(this.notifyPlugins("resize",{size:l}),Ts(r.onResize,[this,l],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};ps(s,(r,a)=>{r.id=a})}buildOrUpdateScales(){const e=this.options,s=e.scales,r=this.scales,a=Object.keys(r).reduce((l,d)=>(l[d]=!1,l),{});let i=[];s&&(i=i.concat(Object.keys(s).map(l=>{const d=s[l],u=Sw(l,d),h=u==="r",f=u==="x";return{options:d,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),ps(i,l=>{const d=l.options,u=d.id,h=Sw(u,d),f=Gt(d.type,l.dtype);(d.position===void 0||vA(d.position,h)!==vA(l.dposition))&&(d.position=l.dposition),a[u]=!0;let p=null;if(u in r&&r[u].type===f)p=r[u];else{const x=Va.getScale(f);p=new x({id:u,type:f,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(d,e)}),ps(a,(l,d)=>{l||delete r[d]}),ps(r,l=>{ko.configure(this,l,l.options),ko.addBox(this,l)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,r=e.length;if(e.sort((a,i)=>a.index-i.index),r>s){for(let a=s;a<r;++a)this._destroyDatasetMeta(a);e.splice(s,r-s)}this._sortedMetasets=e.slice(0).sort(wA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((r,a)=>{s.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let r,a;for(this._removeUnreferencedMetasets(),r=0,a=s.length;r<a;r++){const i=s[r];let l=this.getDatasetMeta(r);const d=i.type||this.config.type;if(l.type&&l.type!==d&&(this._destroyDatasetMeta(r),l=this.getDatasetMeta(r)),l.type=d,l.indexAxis=i.indexAxis||_w(d,this.options),l.order=i.order||0,l.index=r,l.label=""+i.label,l.visible=this.isDatasetVisible(r),l.controller)l.controller.updateIndex(r),l.controller.linkScales();else{const u=Va.getController(d),{datasetElementType:h,dataElementType:f}=Xs.datasets[d];Object.assign(u,{dataElementType:Va.getElement(f),datasetElementType:h&&Va.getElement(h)}),l.controller=new u(this,r),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){ps(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const r=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let h=0,f=this.data.datasets.length;h<f;h++){const{controller:p}=this.getDatasetMeta(h),x=!a&&i.indexOf(p)===-1;p.buildOrUpdateElements(x),l=Math.max(+p.getMaxOverflow(),l)}l=this._minPadding=r.layout.autoPadding?l:0,this._updateLayout(l),a||ps(i,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(wA("z","_idx"));const{_active:d,_lastEvent:u}=this;u?this._eventHandler(u,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){ps(this.scales,e=>{ko.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!IC(s,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:r,start:a,count:i}of s){const l=r==="_removeElements"?-i:i;Kte(e,a,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,r=i=>new Set(e.filter(l=>l[0]===i).map((l,d)=>d+","+l.splice(1).join(","))),a=r(0);for(let i=1;i<s;i++)if(!IC(a,r(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ko.update(this,this.width,this.height,e);const s=this.chartArea,r=s.width<=0||s.height<=0;this._layers=[],ps(this.boxes,a=>{r&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,r=this.data.datasets.length;s<r;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,r=this.data.datasets.length;s<r;++s)this._updateDataset(s,$o(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const r=this.getDatasetMeta(e),a={meta:r,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(r.controller._update(s),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(_i.has(this)?this.attached&&!_i.running(this)&&_i.start(this):(this.draw(),NA({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,r=[];let a,i;for(a=0,i=s.length;a<i;++a){const l=s[a];(!e||l.visible)&&r.push(l)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,r={meta:e,index:e.index,cancelable:!0},a=pee(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(a&&Wj(s,a),e.controller.draw(),a&&Yj(s),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Tm(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,r,a){const i=Wee.modes[s];return typeof i=="function"?i(this,e,r,a):[]}getDatasetMeta(e){const s=this.data.datasets[e],r=this._metasets;let a=r.filter(i=>i&&i._dataset===s).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},r.push(a)),a}getContext(){return this.$context||(this.$context=pc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!s.hidden}setDatasetVisibility(e,s){const r=this.getDatasetMeta(e);r.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,r){const a=r?"show":"hide",i=this.getDatasetMeta(e),l=i.controller._resolveAnimations(void 0,a);Sm(s)?(i.data[s].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),l.update(i,{visible:r}),this.update(d=>d.datasetIndex===e?a:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),_i.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),$C(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete kp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,r=(i,l)=>{s.addEventListener(this,i,l),e[i]=l},a=(i,l,d)=>{i.offsetX=l,i.offsetY=d,this._eventHandler(i)};ps(this.options.events,i=>r(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,r=(u,h)=>{s.addEventListener(this,u,h),e[u]=h},a=(u,h)=>{e[u]&&(s.removeEventListener(this,u,h),delete e[u])},i=(u,h)=>{this.canvas&&this.resize(u,h)};let l;const d=()=>{a("attach",d),this.attached=!0,this.resize(),r("resize",i),r("detach",l)};l=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),r("attach",d)},s.isAttached(this.canvas)?d():l()}unbindEvents(){ps(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},ps(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,r){const a=r?"set":"remove";let i,l,d,u;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),d=0,u=e.length;d<u;++d){l=e[d];const h=l&&this.getDatasetMeta(l.datasetIndex).controller;h&&h[a+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],r=e.map(({datasetIndex:i,index:l})=>{const d=this.getDatasetMeta(i);if(!d)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:d.data[l],index:l}});!l0(r,s)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,s))}notifyPlugins(e,s,r){return this._plugins.notify(this,e,s,r)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,r){const a=this.options.hover,i=(u,h)=>u.filter(f=>!h.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),l=i(s,e),d=r?e:i(e,s);l.length&&this.updateHoverStyle(l,a.mode,!1),d.length&&a.mode&&this.updateHoverStyle(d,a.mode,!0)}_eventHandler(e,s){const r={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},a=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,a)===!1)return;const i=this._handleEvent(e,s,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,a),(i||r.changed)&&this.render(),this}_handleEvent(e,s,r){const{_active:a=[],options:i}=this,l=s,d=this._getActiveElements(e,a,r,l),u=QJ(e),h=Xte(e,this._lastEvent,r,u);r&&(this._lastEvent=null,Ts(i.onHover,[e,d,this],this),u&&Ts(i.onClick,[e,d,this],this));const f=!l0(d,a);return(f||s)&&(this._active=d,this._updateHoverStyles(d,a,s)),this._lastEvent=h,f}_getActiveElements(e,s,r,a){if(e.type==="mouseout")return[];if(!r)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,a)}},Be(xo,"defaults",Xs),Be(xo,"instances",kp),Be(xo,"overrides",ic),Be(xo,"registry",Va),Be(xo,"version",Gte),Be(xo,"getChart",jA),xo);function _A(){return ps(au.instances,t=>t._plugins.invalidate())}function Qte(t,e,s){const{startAngle:r,pixelMargin:a,x:i,y:l,outerRadius:d,innerRadius:u}=e;let h=a/d;t.beginPath(),t.arc(i,l,d,r-h,s+h),u>a?(h=a/u,t.arc(i,l,u,s+h,r-h,!0)):t.arc(i,l,a,s+hr,r-hr),t.closePath(),t.clip()}function Jte(t){return Kj(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Zte(t,e,s,r){const a=Jte(t.options.borderRadius),i=(s-e)/2,l=Math.min(i,r*e/2),d=u=>{const h=(s-Math.min(i,u))*r/2;return Xr(u,0,Math.min(i,h))};return{outerStart:d(a.outerStart),outerEnd:d(a.outerEnd),innerStart:Xr(a.innerStart,0,l),innerEnd:Xr(a.innerEnd,0,l)}}function nd(t,e,s,r){return{x:s+t*Math.cos(e),y:r+t*Math.sin(e)}}function g0(t,e,s,r,a,i){const{x:l,y:d,startAngle:u,pixelMargin:h,innerRadius:f}=e,p=Math.max(e.outerRadius+r+s-h,0),x=f>0?f+r+s+h:0;let w=0;const N=a-u;if(r){const Q=f>0?f-r:0,H=p>0?p-r:0,W=(Q+H)/2,de=W!==0?N*W/(W+r):N;w=(N-de)/2}const v=Math.max(.001,N*p-s/nr)/p,j=(N-v)/2,k=u+j+w,T=a-j-w,{outerStart:P,outerEnd:U,innerStart:R,innerEnd:O}=Zte(e,x,p,T-k),I=p-P,C=p-U,E=k+P/I,D=T-U/C,V=x+R,B=x+O,M=k+R/V,Y=T-O/B;if(t.beginPath(),i){const Q=(E+D)/2;if(t.arc(l,d,p,E,Q),t.arc(l,d,p,Q,D),U>0){const ge=nd(C,D,l,d);t.arc(ge.x,ge.y,U,D,T+hr)}const H=nd(B,T,l,d);if(t.lineTo(H.x,H.y),O>0){const ge=nd(B,Y,l,d);t.arc(ge.x,ge.y,O,T+hr,Y+Math.PI)}const W=(T-O/x+(k+R/x))/2;if(t.arc(l,d,x,T-O/x,W,!0),t.arc(l,d,x,W,k+R/x,!0),R>0){const ge=nd(V,M,l,d);t.arc(ge.x,ge.y,R,M+Math.PI,k-hr)}const de=nd(I,k,l,d);if(t.lineTo(de.x,de.y),P>0){const ge=nd(I,E,l,d);t.arc(ge.x,ge.y,P,k-hr,E)}}else{t.moveTo(l,d);const Q=Math.cos(E)*p+l,H=Math.sin(E)*p+d;t.lineTo(Q,H);const W=Math.cos(D)*p+l,de=Math.sin(D)*p+d;t.lineTo(W,de)}t.closePath()}function ese(t,e,s,r,a){const{fullCircles:i,startAngle:l,circumference:d}=e;let u=e.endAngle;if(i){g0(t,e,s,r,u,a);for(let h=0;h<i;++h)t.fill();isNaN(d)||(u=l+(d%Bs||Bs))}return g0(t,e,s,r,u,a),t.fill(),u}function tse(t,e,s,r,a){const{fullCircles:i,startAngle:l,circumference:d,options:u}=e,{borderWidth:h,borderJoinStyle:f,borderDash:p,borderDashOffset:x}=u,w=u.borderAlign==="inner";if(!h)return;t.setLineDash(p||[]),t.lineDashOffset=x,w?(t.lineWidth=h*2,t.lineJoin=f||"round"):(t.lineWidth=h,t.lineJoin=f||"bevel");let N=e.endAngle;if(i){g0(t,e,s,r,N,a);for(let v=0;v<i;++v)t.stroke();isNaN(d)||(N=l+(d%Bs||Bs))}w&&Qte(t,e,N),i||(g0(t,e,s,r,N,a),t.stroke())}class pd extends Yo{constructor(s){super();Be(this,"circumference");Be(this,"endAngle");Be(this,"fullCircles");Be(this,"innerRadius");Be(this,"outerRadius");Be(this,"pixelMargin");Be(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,r,a){const i=this.getProps(["x","y"],a),{angle:l,distance:d}=Z6(i,{x:s,y:r}),{startAngle:u,endAngle:h,innerRadius:f,outerRadius:p,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),w=(this.options.spacing+this.options.borderWidth)/2,N=Gt(x,h-u),v=Em(l,u,h)&&u!==h,j=N>=Bs||v,k=So(d,f+w,p+w);return j&&k}getCenterPoint(s){const{x:r,y:a,startAngle:i,endAngle:l,innerRadius:d,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:h,spacing:f}=this.options,p=(i+l)/2,x=(d+u+f+h)/2;return{x:r+Math.cos(p)*x,y:a+Math.sin(p)*x}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:r,circumference:a}=this,i=(r.offset||0)/4,l=(r.spacing||0)/2,d=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=a>Bs?Math.floor(a/Bs):0,a===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const u=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(u)*i,Math.sin(u)*i);const h=1-Math.sin(Math.min(nr,a||0)),f=i*h;s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,ese(s,this,f,l,d),tse(s,this,f,l,d),s.restore()}}Be(pd,"id","arc"),Be(pd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Be(pd,"defaultRoutes",{backgroundColor:"backgroundColor"}),Be(pd,"descriptors",{_scriptable:!0,_indexable:s=>s!=="borderDash"});function TD(t,e,s=e){t.lineCap=Gt(s.borderCapStyle,e.borderCapStyle),t.setLineDash(Gt(s.borderDash,e.borderDash)),t.lineDashOffset=Gt(s.borderDashOffset,e.borderDashOffset),t.lineJoin=Gt(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Gt(s.borderWidth,e.borderWidth),t.strokeStyle=Gt(s.borderColor,e.borderColor)}function sse(t,e,s){t.lineTo(s.x,s.y)}function rse(t){return t.stepped?_Z:t.tension||t.cubicInterpolationMode==="monotone"?SZ:sse}function CD(t,e,s={}){const r=t.length,{start:a=0,end:i=r-1}=s,{start:l,end:d}=e,u=Math.max(a,l),h=Math.min(i,d),f=a<l&&i<l||a>d&&i>d;return{count:r,start:u,loop:e.loop,ilen:h<u&&!f?r+h-u:h-u}}function nse(t,e,s,r){const{points:a,options:i}=e,{count:l,start:d,loop:u,ilen:h}=CD(a,s,r),f=rse(i);let{move:p=!0,reverse:x}=r||{},w,N,v;for(w=0;w<=h;++w)N=a[(d+(x?h-w:w))%l],!N.skip&&(p?(t.moveTo(N.x,N.y),p=!1):f(t,v,N,x,i.stepped),v=N);return u&&(N=a[(d+(x?h:0))%l],f(t,v,N,x,i.stepped)),!!u}function ase(t,e,s,r){const a=e.points,{count:i,start:l,ilen:d}=CD(a,s,r),{move:u=!0,reverse:h}=r||{};let f=0,p=0,x,w,N,v,j,k;const T=U=>(l+(h?d-U:U))%i,P=()=>{v!==j&&(t.lineTo(f,j),t.lineTo(f,v),t.lineTo(f,k))};for(u&&(w=a[T(0)],t.moveTo(w.x,w.y)),x=0;x<=d;++x){if(w=a[T(x)],w.skip)continue;const U=w.x,R=w.y,O=U|0;O===N?(R<v?v=R:R>j&&(j=R),f=(p*f+U)/++p):(P(),t.lineTo(U,R),N=O,p=0,v=j=R),k=R}P()}function kw(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?ase:nse}function ise(t){return t.stepped?ree:t.tension||t.cubicInterpolationMode==="monotone"?nee:Il}function ose(t,e,s,r){let a=e._path;a||(a=e._path=new Path2D,e.path(a,s,r)&&a.closePath()),TD(t,e.options),t.stroke(a)}function lse(t,e,s,r){const{segments:a,options:i}=e,l=kw(e);for(const d of a)TD(t,i,d.style),t.beginPath(),l(t,e,d,{start:s,end:s+r-1})&&t.closePath(),t.stroke()}const cse=typeof Path2D=="function";function dse(t,e,s,r){cse&&!e.options.segment?ose(t,e,s,r):lse(t,e,s,r)}class Ih extends Yo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const a=r.spanGaps?this._loop:this._fullLoop;KZ(this._points,r,e,a,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hee(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,r=e.length;return r&&s[e[r-1].end]}interpolate(e,s){const r=this.options,a=e[s],i=this.points,l=cee(this,{property:s,start:a,end:a});if(!l.length)return;const d=[],u=ise(r);let h,f;for(h=0,f=l.length;h<f;++h){const{start:p,end:x}=l[h],w=i[p],N=i[x];if(w===N){d.push(w);continue}const v=Math.abs((a-w[s])/(N[s]-w[s])),j=u(w,N,v,r.stepped);j[s]=e[s],d.push(j)}return d.length===1?d[0]:d}pathSegment(e,s,r){return kw(this)(e,this,s,r)}path(e,s,r){const a=this.segments,i=kw(this);let l=this._loop;s=s||0,r=r||this.points.length-s;for(const d of a)l&=i(e,this,d,{start:s,end:s+r-1});return!!l}draw(e,s,r,a){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),dse(e,this,r,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Be(Ih,"id","line"),Be(Ih,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Be(Ih,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Be(Ih,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function SA(t,e,s,r){const a=t.options,{[s]:i}=t.getProps([s],r);return Math.abs(e-i)<a.radius+a.hitRadius}class Ep extends Yo{constructor(s){super();Be(this,"parsed");Be(this,"skip");Be(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,r,a){const i=this.options,{x:l,y:d}=this.getProps(["x","y"],a);return Math.pow(s-l,2)+Math.pow(r-d,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,r){return SA(this,s,"x",r)}inYRange(s,r){return SA(this,s,"y",r)}getCenterPoint(s){const{x:r,y:a}=this.getProps(["x","y"],s);return{x:r,y:a}}size(s){s=s||this.options||{};let r=s.radius||0;r=Math.max(r,r&&s.hoverRadius||0);const a=r&&s.borderWidth||0;return(r+a)*2}draw(s,r){const a=this.options;this.skip||a.radius<.1||!Tm(this,r,this.size(a)/2)||(s.strokeStyle=a.borderColor,s.lineWidth=a.borderWidth,s.fillStyle=a.backgroundColor,jw(s,a,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}Be(Ep,"id","point"),Be(Ep,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Be(Ep,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function AD(t,e){const{x:s,y:r,base:a,width:i,height:l}=t.getProps(["x","y","base","width","height"],e);let d,u,h,f,p;return t.horizontal?(p=l/2,d=Math.min(s,a),u=Math.max(s,a),h=r-p,f=r+p):(p=i/2,d=s-p,u=s+p,h=Math.min(r,a),f=Math.max(r,a)),{left:d,top:h,right:u,bottom:f}}function Eo(t,e,s,r){return t?0:Xr(e,s,r)}function use(t,e,s){const r=t.options.borderWidth,a=t.borderSkipped,i=oD(r);return{t:Eo(a.top,i.top,0,s),r:Eo(a.right,i.right,0,e),b:Eo(a.bottom,i.bottom,0,s),l:Eo(a.left,i.left,0,e)}}function hse(t,e,s){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,i=jd(a),l=Math.min(e,s),d=t.borderSkipped,u=r||rs(a);return{topLeft:Eo(!u||d.top||d.left,i.topLeft,0,l),topRight:Eo(!u||d.top||d.right,i.topRight,0,l),bottomLeft:Eo(!u||d.bottom||d.left,i.bottomLeft,0,l),bottomRight:Eo(!u||d.bottom||d.right,i.bottomRight,0,l)}}function mse(t){const e=AD(t),s=e.right-e.left,r=e.bottom-e.top,a=use(t,s/2,r/2),i=hse(t,s/2,r/2);return{outer:{x:e.left,y:e.top,w:s,h:r,radius:i},inner:{x:e.left+a.l,y:e.top+a.t,w:s-a.l-a.r,h:r-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function hv(t,e,s,r){const a=e===null,i=s===null,d=t&&!(a&&i)&&AD(t,r);return d&&(a||So(e,d.left,d.right))&&(i||So(s,d.top,d.bottom))}function fse(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function gse(t,e){t.rect(e.x,e.y,e.w,e.h)}function mv(t,e,s={}){const r=t.x!==s.x?-e:0,a=t.y!==s.y?-e:0,i=(t.x+t.w!==s.x+s.w?e:0)-r,l=(t.y+t.h!==s.y+s.h?e:0)-a;return{x:t.x+r,y:t.y+a,w:t.w+i,h:t.h+l,radius:t.radius}}class tm extends Yo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:r,backgroundColor:a}}=this,{inner:i,outer:l}=mse(this),d=fse(l.radius)?h0:gse;e.save(),(l.w!==i.w||l.h!==i.h)&&(e.beginPath(),d(e,mv(l,s,i)),e.clip(),d(e,mv(i,-s,l)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),d(e,mv(i,s)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,s,r){return hv(this,e,s,r)}inXRange(e,s){return hv(this,e,null,s)}inYRange(e,s){return hv(this,null,e,s)}getCenterPoint(e){const{x:s,y:r,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+a)/2:s,y:i?r:(r+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Be(tm,"id","bar"),Be(tm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Be(tm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const kA=(t,e)=>{let{boxHeight:s=e,boxWidth:r=e}=t;return t.usePointStyle&&(s=Math.min(s,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:s,itemHeight:Math.max(e,s)}},pse=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class EA extends Yo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,r){this.maxWidth=e,this.maxHeight=s,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Ts(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(r=>e.filter(r,this.chart.data))),e.sort&&(s=s.sort((r,a)=>e.sort(r,a,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,a=vn(r.font),i=a.size,l=this._computeTitleHeight(),{boxWidth:d,itemHeight:u}=kA(r,i);let h,f;s.font=a.string,this.isHorizontal()?(h=this.maxWidth,f=this._fitRows(l,i,d,u)+10):(f=this.maxHeight,h=this._fitCols(l,a,d,u)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,s,r,a){const{ctx:i,maxWidth:l,options:{labels:{padding:d}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],f=a+d;let p=e;i.textAlign="left",i.textBaseline="middle";let x=-1,w=-f;return this.legendItems.forEach((N,v)=>{const j=r+s/2+i.measureText(N.text).width;(v===0||h[h.length-1]+j+2*d>l)&&(p+=f,h[h.length-(v>0?0:1)]=0,w+=f,x++),u[v]={left:0,top:w,row:x,width:j,height:a},h[h.length-1]+=j+d}),p}_fitCols(e,s,r,a){const{ctx:i,maxHeight:l,options:{labels:{padding:d}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],f=l-e;let p=d,x=0,w=0,N=0,v=0;return this.legendItems.forEach((j,k)=>{const{itemWidth:T,itemHeight:P}=xse(r,s,i,j,a);k>0&&w+P+2*d>f&&(p+=x+d,h.push({width:x,height:w}),N+=x+d,v++,x=w=0),u[k]={left:N,top:w,col:v,width:T,height:P},x=Math.max(x,T),w+=P+d}),p+=x,h.push({width:x,height:w}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:r,labels:{padding:a},rtl:i}}=this,l=_d(i,this.left,this.width);if(this.isHorizontal()){let d=0,u=On(r,this.left+a,this.right-this.lineWidths[d]);for(const h of s)d!==h.row&&(d=h.row,u=On(r,this.left+a,this.right-this.lineWidths[d])),h.top+=this.top+e+a,h.left=l.leftForLtr(l.x(u),h.width),u+=h.width+a}else{let d=0,u=On(r,this.top+e+a,this.bottom-this.columnSizes[d].height);for(const h of s)h.col!==d&&(d=h.col,u=On(r,this.top+e+a,this.bottom-this.columnSizes[d].height)),h.top=u,h.left+=this.left+a,h.left=l.leftForLtr(l.x(h.left),h.width),u+=h.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Wj(e,this),this._draw(),Yj(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:r,ctx:a}=this,{align:i,labels:l}=e,d=Xs.color,u=_d(e.rtl,this.left,this.width),h=vn(l.font),{padding:f}=l,p=h.size,x=p/2;let w;this.drawTitle(),a.textAlign=u.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=h.string;const{boxWidth:N,boxHeight:v,itemHeight:j}=kA(l,p),k=function(O,I,C){if(isNaN(N)||N<=0||isNaN(v)||v<0)return;a.save();const E=Gt(C.lineWidth,1);if(a.fillStyle=Gt(C.fillStyle,d),a.lineCap=Gt(C.lineCap,"butt"),a.lineDashOffset=Gt(C.lineDashOffset,0),a.lineJoin=Gt(C.lineJoin,"miter"),a.lineWidth=E,a.strokeStyle=Gt(C.strokeStyle,d),a.setLineDash(Gt(C.lineDash,[])),l.usePointStyle){const D={radius:v*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:E},V=u.xPlus(O,N/2),B=I+x;iD(a,D,V,B,l.pointStyleWidth&&N)}else{const D=I+Math.max((p-v)/2,0),V=u.leftForLtr(O,N),B=jd(C.borderRadius);a.beginPath(),Object.values(B).some(M=>M!==0)?h0(a,{x:V,y:D,w:N,h:v,radius:B}):a.rect(V,D,N,v),a.fill(),E!==0&&a.stroke()}a.restore()},T=function(O,I,C){u0(a,C.text,O,I+j/2,h,{strikethrough:C.hidden,textAlign:u.textAlign(C.textAlign)})},P=this.isHorizontal(),U=this._computeTitleHeight();P?w={x:On(i,this.left+f,this.right-r[0]),y:this.top+f+U,line:0}:w={x:this.left+f,y:On(i,this.top+U+f,this.bottom-s[0].height),line:0},mD(this.ctx,e.textDirection);const R=j+f;this.legendItems.forEach((O,I)=>{a.strokeStyle=O.fontColor,a.fillStyle=O.fontColor;const C=a.measureText(O.text).width,E=u.textAlign(O.textAlign||(O.textAlign=l.textAlign)),D=N+x+C;let V=w.x,B=w.y;u.setWidth(this.width),P?I>0&&V+D+f>this.right&&(B=w.y+=R,w.line++,V=w.x=On(i,this.left+f,this.right-r[w.line])):I>0&&B+R>this.bottom&&(V=w.x=V+s[w.line].width+f,w.line++,B=w.y=On(i,this.top+U+f,this.bottom-s[w.line].height));const M=u.x(V);if(k(M,B,O),V=uZ(E,V+N+x,P?V+D:this.right,e.rtl),T(u.x(V),B,O),P)w.x+=D+f;else if(typeof O.text!="string"){const Y=h.lineHeight;w.y+=RD(O,Y)+f}else w.y+=R}),fD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,r=vn(s.font),a=xa(s.padding);if(!s.display)return;const i=_d(e.rtl,this.left,this.width),l=this.ctx,d=s.position,u=r.size/2,h=a.top+u;let f,p=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),f=this.top+h,p=On(e.align,p,this.right-x);else{const N=this.columnSizes.reduce((v,j)=>Math.max(v,j.height),0);f=h+On(e.align,this.top,this.bottom-N-e.labels.padding-this._computeTitleHeight())}const w=On(d,p,p+x);l.textAlign=i.textAlign(nD(d)),l.textBaseline="middle",l.strokeStyle=s.color,l.fillStyle=s.color,l.font=r.string,u0(l,s.text,w,f,r)}_computeTitleHeight(){const e=this.options.title,s=vn(e.font),r=xa(e.padding);return e.display?s.lineHeight+r.height:0}_getLegendItemAt(e,s){let r,a,i;if(So(e,this.left,this.right)&&So(s,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(a=i[r],So(e,a.left,a.left+a.width)&&So(s,a.top,a.top+a.height))return this.legendItems[r]}return null}handleEvent(e){const s=this.options;if(!vse(e.type,s))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,i=pse(a,r);a&&!i&&Ts(s.onLeave,[e,a,this],this),this._hoveredItem=r,r&&!i&&Ts(s.onHover,[e,r,this],this)}else r&&Ts(s.onClick,[e,r,this],this)}}function xse(t,e,s,r,a){const i=yse(r,t,e,s),l=bse(a,r,e.lineHeight);return{itemWidth:i,itemHeight:l}}function yse(t,e,s,r){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((i,l)=>i.length>l.length?i:l)),e+s.size/2+r.measureText(a).width}function bse(t,e,s){let r=t;return typeof e.text!="string"&&(r=RD(e,s)),r}function RD(t,e){const s=t.text?t.text.length:0;return e*s}function vse(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var s1={id:"legend",_element:EA,start(t,e,s){const r=t.legend=new EA({ctx:t.ctx,options:s,chart:t});ko.configure(t,r,s),ko.addBox(t,r)},stop(t){ko.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const r=t.legend;ko.configure(t,r,s),r.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const r=e.datasetIndex,a=s.chart;a.isDatasetVisible(r)?(a.hide(r),e.hidden=!0):(a.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:r,textAlign:a,color:i,useBorderRadius:l,borderRadius:d}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(s?0:void 0),f=xa(h.borderWidth);return{text:e[u.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:a||h.textAlign,borderRadius:l&&(d||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Dh={average(t){if(!t.length)return!1;let e,s,r=new Set,a=0,i=0;for(e=0,s=t.length;e<s;++e){const d=t[e].element;if(d&&d.hasValue()){const u=d.tooltipPosition();r.add(u.x),a+=u.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((d,u)=>d+u)/r.size,y:a/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,r=e.y,a=Number.POSITIVE_INFINITY,i,l,d;for(i=0,l=t.length;i<l;++i){const u=t[i].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),f=ww(e,h);f<a&&(a=f,d=u)}}if(d){const u=d.tooltipPosition();s=u.x,r=u.y}return{x:s,y:r}}};function Oa(t,e){return e&&(kr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Si(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function wse(t,e){const{element:s,datasetIndex:r,index:a}=e,i=t.getDatasetMeta(r).controller,{label:l,value:d}=i.getLabelAndValue(a);return{chart:t,label:l,parsed:i.getParsed(a),raw:t.data.datasets[r].data[a],formattedValue:d,dataset:i.getDataset(),dataIndex:a,datasetIndex:r,element:s}}function TA(t,e){const s=t.chart.ctx,{body:r,footer:a,title:i}=t,{boxWidth:l,boxHeight:d}=e,u=vn(e.bodyFont),h=vn(e.titleFont),f=vn(e.footerFont),p=i.length,x=a.length,w=r.length,N=xa(e.padding);let v=N.height,j=0,k=r.reduce((U,R)=>U+R.before.length+R.lines.length+R.after.length,0);if(k+=t.beforeBody.length+t.afterBody.length,p&&(v+=p*h.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),k){const U=e.displayColors?Math.max(d,u.lineHeight):u.lineHeight;v+=w*U+(k-w)*u.lineHeight+(k-1)*e.bodySpacing}x&&(v+=e.footerMarginTop+x*f.lineHeight+(x-1)*e.footerSpacing);let T=0;const P=function(U){j=Math.max(j,s.measureText(U).width+T)};return s.save(),s.font=h.string,ps(t.title,P),s.font=u.string,ps(t.beforeBody.concat(t.afterBody),P),T=e.displayColors?l+2+e.boxPadding:0,ps(r,U=>{ps(U.before,P),ps(U.lines,P),ps(U.after,P)}),T=0,s.font=f.string,ps(t.footer,P),s.restore(),j+=N.width,{width:j,height:v}}function Nse(t,e){const{y:s,height:r}=e;return s<r/2?"top":s>t.height-r/2?"bottom":"center"}function jse(t,e,s,r){const{x:a,width:i}=r,l=s.caretSize+s.caretPadding;if(t==="left"&&a+i+l>e.width||t==="right"&&a-i-l<0)return!0}function _se(t,e,s,r){const{x:a,width:i}=s,{width:l,chartArea:{left:d,right:u}}=t;let h="center";return r==="center"?h=a<=(d+u)/2?"left":"right":a<=i/2?h="left":a>=l-i/2&&(h="right"),jse(h,t,e,s)&&(h="center"),h}function CA(t,e,s){const r=s.yAlign||e.yAlign||Nse(t,s);return{xAlign:s.xAlign||e.xAlign||_se(t,e,s,r),yAlign:r}}function Sse(t,e){let{x:s,width:r}=t;return e==="right"?s-=r:e==="center"&&(s-=r/2),s}function kse(t,e,s){let{y:r,height:a}=t;return e==="top"?r+=s:e==="bottom"?r-=a+s:r-=a/2,r}function AA(t,e,s,r){const{caretSize:a,caretPadding:i,cornerRadius:l}=t,{xAlign:d,yAlign:u}=s,h=a+i,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:w}=jd(l);let N=Sse(e,d);const v=kse(e,u,h);return u==="center"?d==="left"?N+=h:d==="right"&&(N-=h):d==="left"?N-=Math.max(f,x)+a:d==="right"&&(N+=Math.max(p,w)+a),{x:Xr(N,0,r.width-e.width),y:Xr(v,0,r.height-e.height)}}function Xg(t,e,s){const r=xa(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function RA(t){return Oa([],Si(t))}function Ese(t,e,s){return pc(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function PA(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const PD={beforeTitle:ji,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,r=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return s[e.dataIndex]}return""},afterTitle:ji,beforeBody:ji,beforeLabel:ji,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ds(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:ji,afterBody:ji,beforeFooter:ji,footer:ji,afterFooter:ji};function pn(t,e,s,r){const a=t[e].call(s,r);return typeof a>"u"?PD[e].call(s,r):a}class Ew extends Yo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,r=this.options.setContext(this.getContext()),a=r.enabled&&s.options.animation&&r.animations,i=new pD(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Ese(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:r}=s,a=pn(r,"beforeTitle",this,e),i=pn(r,"title",this,e),l=pn(r,"afterTitle",this,e);let d=[];return d=Oa(d,Si(a)),d=Oa(d,Si(i)),d=Oa(d,Si(l)),d}getBeforeBody(e,s){return RA(pn(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:r}=s,a=[];return ps(e,i=>{const l={before:[],lines:[],after:[]},d=PA(r,i);Oa(l.before,Si(pn(d,"beforeLabel",this,i))),Oa(l.lines,pn(d,"label",this,i)),Oa(l.after,Si(pn(d,"afterLabel",this,i))),a.push(l)}),a}getAfterBody(e,s){return RA(pn(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:r}=s,a=pn(r,"beforeFooter",this,e),i=pn(r,"footer",this,e),l=pn(r,"afterFooter",this,e);let d=[];return d=Oa(d,Si(a)),d=Oa(d,Si(i)),d=Oa(d,Si(l)),d}_createItems(e){const s=this._active,r=this.chart.data,a=[],i=[],l=[];let d=[],u,h;for(u=0,h=s.length;u<h;++u)d.push(wse(this.chart,s[u]));return e.filter&&(d=d.filter((f,p,x)=>e.filter(f,p,x,r))),e.itemSort&&(d=d.sort((f,p)=>e.itemSort(f,p,r))),ps(d,f=>{const p=PA(e.callbacks,f);a.push(pn(p,"labelColor",this,f)),i.push(pn(p,"labelPointStyle",this,f)),l.push(pn(p,"labelTextColor",this,f))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=l,this.dataPoints=d,d}update(e,s){const r=this.options.setContext(this.getContext()),a=this._active;let i,l=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{const d=Dh[r.position].call(this,a,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const u=this._size=TA(this,r),h=Object.assign({},d,u),f=CA(this.chart,r,h),p=AA(r,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,i={opacity:1,x:p.x,y:p.y,width:u.width,height:u.height,caretX:d.x,caretY:d.y}}this._tooltipItems=l,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,r,a){const i=this.getCaretPosition(e,r,a);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,r){const{xAlign:a,yAlign:i}=this,{caretSize:l,cornerRadius:d}=r,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=jd(d),{x,y:w}=e,{width:N,height:v}=s;let j,k,T,P,U,R;return i==="center"?(U=w+v/2,a==="left"?(j=x,k=j-l,P=U+l,R=U-l):(j=x+N,k=j+l,P=U-l,R=U+l),T=j):(a==="left"?k=x+Math.max(u,f)+l:a==="right"?k=x+N-Math.max(h,p)-l:k=this.caretX,i==="top"?(P=w,U=P-l,j=k-l,T=k+l):(P=w+v,U=P+l,j=k+l,T=k-l),R=P),{x1:j,x2:k,x3:T,y1:P,y2:U,y3:R}}drawTitle(e,s,r){const a=this.title,i=a.length;let l,d,u;if(i){const h=_d(r.rtl,this.x,this.width);for(e.x=Xg(this,r.titleAlign,r),s.textAlign=h.textAlign(r.titleAlign),s.textBaseline="middle",l=vn(r.titleFont),d=r.titleSpacing,s.fillStyle=r.titleColor,s.font=l.string,u=0;u<i;++u)s.fillText(a[u],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+d,u+1===i&&(e.y+=r.titleMarginBottom-d)}}_drawColorBox(e,s,r,a,i){const l=this.labelColors[r],d=this.labelPointStyles[r],{boxHeight:u,boxWidth:h}=i,f=vn(i.bodyFont),p=Xg(this,"left",i),x=a.x(p),w=u<f.lineHeight?(f.lineHeight-u)/2:0,N=s.y+w;if(i.usePointStyle){const v={radius:Math.min(h,u)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},j=a.leftForLtr(x,h)+h/2,k=N+u/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,jw(e,v,j,k),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,jw(e,v,j,k)}else{e.lineWidth=rs(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const v=a.leftForLtr(x,h),j=a.leftForLtr(a.xPlus(x,1),h-2),k=jd(l.borderRadius);Object.values(k).some(T=>T!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,h0(e,{x:v,y:N,w:h,h:u,radius:k}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),h0(e,{x:j,y:N+1,w:h-2,h:u-2,radius:k}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,N,h,u),e.strokeRect(v,N,h,u),e.fillStyle=l.backgroundColor,e.fillRect(j,N+1,h-2,u-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,s,r){const{body:a}=this,{bodySpacing:i,bodyAlign:l,displayColors:d,boxHeight:u,boxWidth:h,boxPadding:f}=r,p=vn(r.bodyFont);let x=p.lineHeight,w=0;const N=_d(r.rtl,this.x,this.width),v=function(C){s.fillText(C,N.x(e.x+w),e.y+x/2),e.y+=x+i},j=N.textAlign(l);let k,T,P,U,R,O,I;for(s.textAlign=l,s.textBaseline="middle",s.font=p.string,e.x=Xg(this,j,r),s.fillStyle=r.bodyColor,ps(this.beforeBody,v),w=d&&j!=="right"?l==="center"?h/2+f:h+2+f:0,U=0,O=a.length;U<O;++U){for(k=a[U],T=this.labelTextColors[U],s.fillStyle=T,ps(k.before,v),P=k.lines,d&&P.length&&(this._drawColorBox(s,e,U,N,r),x=Math.max(p.lineHeight,u)),R=0,I=P.length;R<I;++R)v(P[R]),x=p.lineHeight;ps(k.after,v)}w=0,x=p.lineHeight,ps(this.afterBody,v),e.y-=i}drawFooter(e,s,r){const a=this.footer,i=a.length;let l,d;if(i){const u=_d(r.rtl,this.x,this.width);for(e.x=Xg(this,r.footerAlign,r),e.y+=r.footerMarginTop,s.textAlign=u.textAlign(r.footerAlign),s.textBaseline="middle",l=vn(r.footerFont),s.fillStyle=r.footerColor,s.font=l.string,d=0;d<i;++d)s.fillText(a[d],u.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,s,r,a){const{xAlign:i,yAlign:l}=this,{x:d,y:u}=e,{width:h,height:f}=r,{topLeft:p,topRight:x,bottomLeft:w,bottomRight:N}=jd(a.cornerRadius);s.fillStyle=a.backgroundColor,s.strokeStyle=a.borderColor,s.lineWidth=a.borderWidth,s.beginPath(),s.moveTo(d+p,u),l==="top"&&this.drawCaret(e,s,r,a),s.lineTo(d+h-x,u),s.quadraticCurveTo(d+h,u,d+h,u+x),l==="center"&&i==="right"&&this.drawCaret(e,s,r,a),s.lineTo(d+h,u+f-N),s.quadraticCurveTo(d+h,u+f,d+h-N,u+f),l==="bottom"&&this.drawCaret(e,s,r,a),s.lineTo(d+w,u+f),s.quadraticCurveTo(d,u+f,d,u+f-w),l==="center"&&i==="left"&&this.drawCaret(e,s,r,a),s.lineTo(d,u+p),s.quadraticCurveTo(d,u,d+p,u),s.closePath(),s.fill(),a.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,r=this.$animations,a=r&&r.x,i=r&&r.y;if(a||i){const l=Dh[e.position].call(this,this._active,this._eventPosition);if(!l)return;const d=this._size=TA(this,e),u=Object.assign({},l,this._size),h=CA(s,e,u),f=AA(e,u,h,s);(a._to!==f.x||i._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=d.width,this.height=d.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(s);const a={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=xa(s.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&d&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,a,s),mD(e,s.textDirection),i.y+=l.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),fD(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const r=this._active,a=e.map(({datasetIndex:d,index:u})=>{const h=this.chart.getDatasetMeta(d);if(!h)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:h.data[u],index:u}}),i=!l0(r,a),l=this._positionChanged(a,s);(i||l)&&(this._active=a,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,r=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,i=this._active||[],l=this._getActiveElements(e,i,s,r),d=this._positionChanged(l,e),u=s||!l0(l,i)||d;return u&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),u}_getActiveElements(e,s,r,a){const i=this.options;if(e.type==="mouseout")return[];if(!a)return s.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&l.reverse(),l}_positionChanged(e,s){const{caretX:r,caretY:a,options:i}=this,l=Dh[i.position].call(this,e,s);return l!==!1&&(r!==l.x||a!==l.y)}}Be(Ew,"positioners",Dh);var r1={id:"tooltip",_element:Ew,positioners:Dh,afterInit(t,e,s){s&&(t.tooltip=new Ew({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:PD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Tse=(t,e,s,r)=>(typeof e=="string"?(s=t.push(e)-1,r.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function Cse(t,e,s,r){const a=t.indexOf(e);if(a===-1)return Tse(t,e,s,r);const i=t.lastIndexOf(e);return a!==i?s:a}const Ase=(t,e)=>t===null?null:Xr(Math.round(t),0,e);function IA(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Am extends nu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const r=this.getLabels();for(const{index:a,label:i}of s)r[a]===i&&r.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ds(e))return null;const r=this.getLabels();return s=isFinite(s)&&r[s]===e?s:Cse(r,e,Gt(s,e),this._addedLabels),Ase(s,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:r,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),s||(a=this.getLabels().length-1)),this.min=r,this.max=a}buildTicks(){const e=this.min,s=this.max,r=this.options.offset,a=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let l=e;l<=s;l++)a.push({value:l});return a}getLabelForValue(e){return IA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Be(Am,"id","category"),Be(Am,"defaults",{ticks:{callback:IA}});function Rse(t,e){const s=[],{bounds:a,step:i,min:l,max:d,precision:u,count:h,maxTicks:f,maxDigits:p,includeBounds:x}=t,w=i||1,N=f-1,{min:v,max:j}=e,k=!ds(l),T=!ds(d),P=!ds(h),U=(j-v)/(p+1);let R=MC((j-v)/N/w)*w,O,I,C,E;if(R<1e-14&&!k&&!T)return[{value:v},{value:j}];E=Math.ceil(j/R)-Math.floor(v/R),E>N&&(R=MC(E*R/N/w)*w),ds(u)||(O=Math.pow(10,u),R=Math.ceil(R*O)/O),a==="ticks"?(I=Math.floor(v/R)*R,C=Math.ceil(j/R)*R):(I=v,C=j),k&&T&&i&&sZ((d-l)/i,R/1e3)?(E=Math.round(Math.min((d-l)/R,f)),R=(d-l)/E,I=l,C=d):P?(I=k?l:I,C=T?d:C,E=h-1,R=(C-I)/E):(E=(C-I)/R,Jh(E,Math.round(E),R/1e3)?E=Math.round(E):E=Math.ceil(E));const D=Math.max(OC(R),OC(I));O=Math.pow(10,ds(u)?D:u),I=Math.round(I*O)/O,C=Math.round(C*O)/O;let V=0;for(k&&(x&&I!==l?(s.push({value:l}),I<l&&V++,Jh(Math.round((I+V*R)*O)/O,l,DA(l,U,t))&&V++):I<l&&V++);V<E;++V){const B=Math.round((I+V*R)*O)/O;if(T&&B>d)break;s.push({value:B})}return T&&x&&C!==d?s.length&&Jh(s[s.length-1].value,d,DA(d,U,t))?s[s.length-1].value=d:s.push({value:d}):(!T||C===d)&&s.push({value:C}),s}function DA(t,e,{horizontal:s,minRotation:r}){const a=Ci(r),i=(s?Math.sin(a):Math.cos(a))||.001,l=.75*e*(""+t).length;return Math.min(e/i,l)}class Pse extends nu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ds(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:r}=this.getUserBounds();let{min:a,max:i}=this;const l=u=>a=s?a:u,d=u=>i=r?i:u;if(e){const u=Za(a),h=Za(i);u<0&&h<0?d(0):u>0&&h>0&&l(0)}if(a===i){let u=i===0?1:Math.abs(i*.05);d(i+u),e||l(a-u)}this.min=a,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:r}=e,a;return r?(a=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),s=s||11),s&&(a=Math.min(s,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const a={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,l=Rse(a,i);return e.bounds==="ticks"&&rZ(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let s=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const a=(r-s)/Math.max(e.length-1,1)/2;s-=a,r+=a}this._startValue=s,this._endValue=r,this._valueRange=r-s}getLabelForValue(e){return Gj(e,this.chart.options.locale,this.options.ticks.format)}}class Rm extends Pse{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=ra(e)?e:0,this.max=ra(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,r=Ci(this.options.ticks.minRotation),a=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Be(Rm,"id","linear"),Be(Rm,"defaults",{ticks:{callback:aD.formatters.numeric}});const px={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yn=Object.keys(px);function MA(t,e){return t-e}function OA(t,e){if(ds(e))return null;const s=t._adapter,{parser:r,round:a,isoWeekday:i}=t._parseOpts;let l=e;return typeof r=="function"&&(l=r(l)),ra(l)||(l=typeof r=="string"?s.parse(l,r):s.parse(l)),l===null?null:(a&&(l=a==="week"&&(km(i)||i===!0)?s.startOf(l,"isoWeek",i):s.startOf(l,a)),+l)}function LA(t,e,s,r){const a=yn.length;for(let i=yn.indexOf(t);i<a-1;++i){const l=px[yn[i]],d=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((s-e)/(d*l.size))<=r)return yn[i]}return yn[a-1]}function Ise(t,e,s,r,a){for(let i=yn.length-1;i>=yn.indexOf(s);i--){const l=yn[i];if(px[l].common&&t._adapter.diff(a,r,l)>=e-1)return l}return yn[s?yn.indexOf(s):0]}function Dse(t){for(let e=yn.indexOf(t)+1,s=yn.length;e<s;++e)if(px[yn[e]].common)return yn[e]}function UA(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:r,hi:a}=qj(s,e),i=s[r]>=e?s[r]:s[a];t[i]=!0}}function Mse(t,e,s,r){const a=t._adapter,i=+a.startOf(e[0].value,r),l=e[e.length-1].value;let d,u;for(d=i;d<=l;d=+a.add(d,1,r))u=s[d],u>=0&&(e[u].major=!0);return e}function VA(t,e,s){const r=[],a={},i=e.length;let l,d;for(l=0;l<i;++l)d=e[l],a[d]=l,r.push({value:d,major:!1});return i===0||!s?r:Mse(t,r,a,s)}class p0 extends nu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const r=e.time||(e.time={}),a=this._adapter=new Bee._date(e.adapters.date);a.init(s),Qh(r.displayFormats,a.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:OA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,r=e.time.unit||"day";let{min:a,max:i,minDefined:l,maxDefined:d}=this.getUserBounds();function u(h){!l&&!isNaN(h.min)&&(a=Math.min(a,h.min)),!d&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!l||!d)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),a=ra(a)&&!isNaN(a)?a:+s.startOf(Date.now(),r),i=ra(i)&&!isNaN(i)?i:+s.endOf(Date.now(),r)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],r=e[e.length-1]),{min:s,max:r}}buildTicks(){const e=this.options,s=e.time,r=e.ticks,a=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const i=this.min,l=this.max,d=lZ(a,i,l);return this._unit=s.unit||(r.autoSkip?LA(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):Ise(this,d.length,s.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Dse(this._unit),this.initOffsets(a),e.reverse&&d.reverse(),VA(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,r=0,a,i;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?s=1-a:s=(this.getDecimalForValue(e[1])-a)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;s=Xr(s,0,l),r=Xr(r,0,l),this._offsets={start:s,end:r,factor:1/(s+1+r)}}_generate(){const e=this._adapter,s=this.min,r=this.max,a=this.options,i=a.time,l=i.unit||LA(i.minUnit,s,r,this._getLabelCapacity(s)),d=Gt(a.ticks.stepSize,1),u=l==="week"?i.isoWeekday:!1,h=km(u)||u===!0,f={};let p=s,x,w;if(h&&(p=+e.startOf(p,"isoWeek",u)),p=+e.startOf(p,h?"day":l),e.diff(r,s,l)>1e5*d)throw new Error(s+" and "+r+" are too far apart with stepSize of "+d+" "+l);const N=a.ticks.source==="data"&&this.getDataTimestamps();for(x=p,w=0;x<r;x=+e.add(x,d,l),w++)UA(f,x,N);return(x===r||a.bounds==="ticks"||w===1)&&UA(f,x,N),Object.keys(f).sort(MA).map(v=>+v)}getLabelForValue(e){const s=this._adapter,r=this.options.time;return r.tooltipFormat?s.format(e,r.tooltipFormat):s.format(e,r.displayFormats.datetime)}format(e,s){const a=this.options.time.displayFormats,i=this._unit,l=s||a[i];return this._adapter.format(e,l)}_tickFormatFunction(e,s,r,a){const i=this.options,l=i.ticks.callback;if(l)return Ts(l,[e,s,r],this);const d=i.time.displayFormats,u=this._unit,h=this._majorUnit,f=u&&d[u],p=h&&d[h],x=r[s],w=h&&p&&x&&x.major;return this._adapter.format(e,a||(w?p:f))}generateTickLabels(e){let s,r,a;for(s=0,r=e.length;s<r;++s)a=e[s],a.label=this._tickFormatFunction(a.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+r)*s.factor)}getValueForPixel(e){const s=this._offsets,r=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,r=this.ctx.measureText(e).width,a=Ci(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(a),l=Math.sin(a),d=this._resolveTickFontOptions(0).size;return{w:r*i+d*l,h:r*l+d*i}}_getLabelCapacity(e){const s=this.options.time,r=s.displayFormats,a=r[s.unit]||r.millisecond,i=this._tickFormatFunction(e,0,VA(this,[e],this._majorUnit),a),l=this._getLabelSize(i),d=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return d>0?d:1}getDataTimestamps(){let e=this._cache.data||[],s,r;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(s=0,r=a.length;s<r;++s)e=e.concat(a[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,r;if(e.length)return e;const a=this.getLabels();for(s=0,r=a.length;s<r;++s)e.push(OA(this,a[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return tD(e.sort(MA))}}Be(p0,"id","time"),Be(p0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qg(t,e,s){let r=0,a=t.length-1,i,l,d,u;s?(e>=t[r].pos&&e<=t[a].pos&&({lo:r,hi:a}=Fl(t,"pos",e)),{pos:i,time:d}=t[r],{pos:l,time:u}=t[a]):(e>=t[r].time&&e<=t[a].time&&({lo:r,hi:a}=Fl(t,"time",e)),{time:i,pos:d}=t[r],{time:l,pos:u}=t[a]);const h=l-i;return h?d+(u-d)*(e-i)/h:d}class FA extends p0{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Qg(s,this.min),this._tableRange=Qg(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:r}=this,a=[],i=[];let l,d,u,h,f;for(l=0,d=e.length;l<d;++l)h=e[l],h>=s&&h<=r&&a.push(h);if(a.length<2)return[{time:s,pos:0},{time:r,pos:1}];for(l=0,d=a.length;l<d;++l)f=a[l+1],u=a[l-1],h=a[l],Math.round((f+u)/2)!==h&&i.push({time:h,pos:l/(d-1)});return i}_generate(){const e=this.min,s=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(s)||r.length===1)&&r.push(s),r.sort((a,i)=>a-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),r=this.getLabelTimestamps();return s.length&&r.length?e=this.normalize(s.concat(r)):e=s.length?s:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Qg(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,r=this.getDecimalForPixel(e)/s.factor-s.end;return Qg(this._table,r*this._tableRange+this._minPos,!0)}}Be(FA,"id","timeseries"),Be(FA,"defaults",p0.defaults);const ID="label";function zA(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Ose(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function DD(t,e){t.labels=e}function MD(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ID;const r=[];t.datasets=e.map(a=>{const i=t.datasets.find(l=>l[s]===a[s]);return!i||!a.data||r.includes(i)?{...a}:(r.push(i),Object.assign(i,a),i)})}function Lse(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ID;const s={labels:[],datasets:[]};return DD(s,t.labels),MD(s,t.datasets,e),s}function Use(t,e){const{height:s=150,width:r=300,redraw:a=!1,datasetIdKey:i,type:l,data:d,options:u,plugins:h=[],fallbackContent:f,updateMode:p,...x}=t,w=_.useRef(null),N=_.useRef(null),v=()=>{w.current&&(N.current=new au(w.current,{type:l,data:Lse(d,i),options:u&&{...u},plugins:h}),zA(e,N.current))},j=()=>{zA(e,null),N.current&&(N.current.destroy(),N.current=null)};return _.useEffect(()=>{!a&&N.current&&u&&Ose(N.current,u)},[a,u]),_.useEffect(()=>{!a&&N.current&&DD(N.current.config.data,d.labels)},[a,d.labels]),_.useEffect(()=>{!a&&N.current&&d.datasets&&MD(N.current.config.data,d.datasets,i)},[a,d.datasets]),_.useEffect(()=>{N.current&&(a?(j(),setTimeout(v)):N.current.update(p))},[a,u,d.labels,d.datasets,p]),_.useEffect(()=>{N.current&&(j(),setTimeout(v))},[l]),_.useEffect(()=>(v(),()=>j()),[]),ss.createElement("canvas",{ref:w,role:"img",height:s,width:r,...x},f)}const Vse=_.forwardRef(Use);function n1(t,e){return au.register(e),_.forwardRef((s,r)=>ss.createElement(Vse,{...s,ref:r,type:t}))}const Fse=n1("line",_p),zse=n1("bar",jp),Bse=n1("doughnut",Rh);function $se(){return n.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 py-1 px-6 select-none pointer-events-none",style:{opacity:0,userSelect:"none"},"aria-hidden":"true",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Second Header"}),n.jsxs("nav",{className:"hidden md:flex space-x-4",children:[n.jsx("a",{href:"#",className:"text-gray-600",children:"Link 1"}),n.jsx("a",{href:"#",className:"text-gray-600",children:"Link 2"}),n.jsx("a",{href:"#",className:"text-gray-600",children:"Link 3"})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm",children:"Action Button"})})]})})})}au.register(pd,tm,Am,Rm,r1,s1);function BA(){const[t,e]=_.useState(!0),[s,r]=_.useState(""),[a,i]=_.useState(!1),[l,d]=_.useState({products:0,approvedProducts:0,rejectedProducts:0}),[u,h]=_.useState({products:0,approvedProducts:0,rejectedProducts:0}),[f,p]=_.useState("");_.useEffect(()=>{let v,j={...u},k={...l},T=800,P=null;function U(R){P||(P=R);let O=Math.min((R-P)/T,1);h({products:Math.floor(j.products+(k.products-j.products)*O),approvedProducts:Math.floor(j.approvedProducts+(k.approvedProducts-j.approvedProducts)*O),rejectedProducts:Math.floor(j.rejectedProducts+(k.rejectedProducts-j.rejectedProducts)*O)}),O<1&&(v=requestAnimationFrame(U))}return v=requestAnimationFrame(U),()=>cancelAnimationFrame(v)},[l]),_.useEffect(()=>{const v=Sd(we,async j=>{j&&p(j.displayName||"Seller")});return()=>v()},[]),_.useEffect(()=>{console.log("Seller Dashboard mounted");const v=Sd(we,async j=>{if(console.log("Auth state changed:",j?"User logged in":"No user"),!j){r("Please log in to view your dashboard."),e(!1);return}try{const k=j.uid,[T,P,U]=await Promise.all([yt(Rt(Ue(J,"products"),ht("sellerId","==",k))),yt(Rt(Ue(J,"products"),ht("sellerId","==",k),ht("status","==","approved"))),yt(Rt(Ue(J,"products"),ht("sellerId","==",k),ht("status","==","rejected")))]);d({products:T.size,approvedProducts:P.size,rejectedProducts:U.size})}catch(k){console.error("Error fetching seller stats:",k),r("Failed to load dashboard stats: "+k.message)}finally{e(!1)}});return()=>{console.log("Seller Dashboard unmounting"),v()}},[]);const x={labels:["Total Products","Approved Products","Rejected Products"],datasets:[{label:"Counts",data:[l.products,l.approvedProducts,l.rejectedProducts],backgroundColor:["#3B82F6","#22C55E","#EF4444"],borderColor:["#2563EB","#16A34A","#DC2626"],borderWidth:1}]},w={labels:["Approved Products","Rejected Products","Pending Products"],datasets:[{label:"Product Status",data:[l.approvedProducts,l.rejectedProducts,l.products-(l.approvedProducts+l.rejectedProducts)],backgroundColor:["#22C55E","#EF4444","#F59E0B"],borderColor:["#16A34A","#DC2626","#D97706"],borderWidth:1}]},N={responsive:!0,plugins:{legend:{position:"top"},tooltip:{enabled:!0}}};return t?n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-blue-800 text-white rounded-lg",onClick:()=>i(!a),children:n.jsx("i",{className:"bx bx-menu text-xl"})}),n.jsx("div",{className:`${a?"block":"hidden"} md:block md:w-64 bg-white border-r`,children:n.jsx(Ls,{})}),n.jsx("div",{className:"flex-1 p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-pulse",children:Array.from({length:3}).map((v,j)=>n.jsx("div",{className:"bg-gray-200 p-4 rounded-lg h-24"},j))}),n.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"}),n.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"})]})]})})]}):s?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:[n.jsx("p",{className:"text-red-700",children:s}),n.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline mt-2 inline-block",children:"Return to Login"})]})}):n.jsxs("div",{className:"relative flex min-h-screen bg-white overflow-x-hidden",children:[n.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-blue-800 text-white rounded-lg focus:outline-blue-400 focus:ring-2 focus:ring-blue-300",onClick:()=>i(!a),"aria-label":a?"Close sidebar":"Open sidebar",children:n.jsx("i",{className:"bx bx-menu text-xl"})}),n.jsx("div",{className:`${a?"block":"hidden"} md:block md:w-64 bg-white border-r max-h-[calc(100vh-2rem)] overflow-y-auto`,children:n.jsx(Ls,{})}),n.jsxs("div",{className:"flex-1 p-3 sm:p-4 md:p-8",children:[n.jsx($se,{}),n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"relative flex flex-col items-center md:flex-row md:items-center md:justify-between bg-white border border-blue-100 rounded-2xl shadow-sm p-4 sm:p-6 md:p-8 mb-8 md:mb-10",children:[n.jsxs("div",{className:"flex flex-col items-center md:items-start text-center md:text-left w-full md:w-auto",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold text-blue-900 mb-1 tracking-tight",children:["Welcome back, ",n.jsx("span",{className:"text-blue-600",children:f}),"!"]}),n.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Heres a snapshot of your stores performance."})]}),n.jsx("div",{className:"mt-4 md:mt-0 flex-shrink-0",children:n.jsx("img",{src:"/src/assets/icons/sell-registration.svg",alt:"Seller Avatar",className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-full shadow border-2 border-blue-100 bg-white object-contain"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 mb-8 md:mb-10 items-stretch",children:[n.jsxs(ue,{to:"/products-upload",className:"flex-1 min-w-[140px] flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-blue-600 text-white font-semibold shadow-sm hover:bg-blue-700 focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"Add Product",children:[n.jsx(Uj,{className:"w-5 h-5"})," Add Product"]}),n.jsxs(ue,{to:"/sellers/orders",className:"flex-1 min-w-[140px] flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-green-600 text-white font-semibold shadow-sm hover:bg-green-700 focus:outline-green-400 focus:ring-2 focus:ring-green-300 transition",title:"View Orders",children:[n.jsx(wp,{className:"w-5 h-5"})," View Orders"]}),n.jsxs(ue,{to:"/smile",className:"flex-1 min-w-[140px] flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-gray-700 text-white font-semibold shadow-sm hover:bg-gray-800 focus:outline-gray-400 focus:ring-2 focus:ring-gray-300 transition",title:"Withdraw Funds",children:[n.jsx(o0,{className:"w-5 h-5"})," Withdraw Funds"]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white border border-blue-100 p-5 rounded-xl shadow flex items-center justify-between transition-transform hover:scale-105 focus-within:scale-105 cursor-pointer group relative overflow-hidden",tabIndex:0,"aria-label":"Total Products","aria-live":"polite",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-blue-700 mb-1",children:"Total Products"}),n.jsx("p",{className:"text-2xl font-extrabold text-blue-900 animate-countup",children:u.products})]}),n.jsx(hx,{className:"w-8 h-8 text-blue-500 group-hover:scale-110 group-focus:scale-110 transition-transform z-10"})]}),n.jsxs("div",{className:"bg-white border border-green-100 p-5 rounded-xl shadow flex items-center justify-between transition-transform hover:scale-105 focus-within:scale-105 cursor-pointer group relative overflow-hidden",tabIndex:0,"aria-label":"Approved Products","aria-live":"polite",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-green-700 mb-1",children:"Approved Products"}),n.jsx("p",{className:"text-2xl font-extrabold text-green-900 animate-countup",children:u.approvedProducts})]}),n.jsx(ux,{className:"w-8 h-8 text-green-500 group-hover:scale-110 group-focus:scale-110 transition-transform z-10"})]}),n.jsxs("div",{className:"bg-white border border-orange-100 p-5 rounded-xl shadow flex items-center justify-between transition-transform hover:scale-105 focus-within:scale-105 cursor-pointer group relative overflow-hidden",tabIndex:0,"aria-label":"Rejected Products","aria-live":"polite",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-orange-700 mb-1",children:"Rejected Products"}),n.jsx("p",{className:"text-2xl font-extrabold text-orange-900 animate-countup",children:u.rejectedProducts})]}),n.jsx(wd,{className:"w-8 h-8 text-orange-500 group-hover:scale-110 group-focus:scale-110 transition-transform z-10"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white border border-blue-100 p-5 rounded-xl shadow",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(yK,{className:"w-5 h-5 text-blue-500"}),n.jsx("h2",{className:"text-base font-bold text-blue-900",children:"Product Analytics"})]}),n.jsx("div",{className:"h-56 sm:h-64",children:n.jsx(zse,{data:x,options:N})})]}),n.jsxs("div",{className:"bg-white border border-purple-100 p-5 rounded-xl shadow",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(vK,{className:"w-5 h-5 text-purple-500"}),n.jsx("h2",{className:"text-base font-bold text-purple-900",children:"Product Status"})]}),n.jsx("div",{className:"h-56 sm:h-64 flex items-center justify-center",children:n.jsx("div",{className:"w-3/4 sm:w-1/2",children:n.jsx(Bse,{data:w,options:N})})})]})]})]})]})]})}function qse(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(""),[l,d]=_.useState([]),[u,h]=_.useState("");_.useEffect(()=>{(async()=>{try{Sd(we,async x=>{if(x)try{const w=Rt(Ue(J,"products"),ht("sellerId","==",x.uid)),v=(await yt(w)).docs.map(j=>({id:j.id,...j.data(),active:j.data().active||!0,isHidden:j.data().isHidden||!1}));e(v),d(v)}catch(w){i("Failed to fetch products: "+w.message)}else i("Please log in to view your products.");r(!1)})}catch(x){i("Authentication error: "+x.message),r(!1)}})()},[]),_.useEffect(()=>{const p=t.filter(x=>{var w;return(w=x.name)==null?void 0:w.toLowerCase().includes(u.toLowerCase())});d(p)},[u,t]);const f=()=>window.location.reload();return s?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):a?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 to-gray-50",children:n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-lg",children:[n.jsx("p",{className:"text-red-700 text-base mb-4",children:a}),n.jsx(ue,{to:"/seller/login",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Return to Login"})]})}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Ls,{}),n.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 md:gap-6 mb-8 p-4 sm:p-6 md:p-8 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100 shadow-sm",children:[n.jsx(hx,{className:"w-8 h-8 text-blue-600 mb-2 md:mb-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-blue-900 flex items-center gap-3 flex-wrap",children:["My Products",n.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-base md:text-lg font-semibold px-3 py-1 rounded-full ml-2",children:[t.length," ",t.length===1?"Product":"Products"]})]}),n.jsx("p",{className:"text-gray-500 text-sm md:text-base mt-1",children:"Manage and track all your listed products."})]}),n.jsx("button",{onClick:f,title:"Refresh",className:"ml-0 md:ml-auto bg-white border border-blue-200 rounded-full p-2 md:p-3 hover:bg-blue-100 transition focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 mt-2 md:mt-0",children:n.jsx(E6,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600"})}),n.jsxs(ue,{to:"/products-upload",className:"hidden sm:flex bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 md:px-10 md:py-5 rounded-xl hover:from-blue-700 hover:to-purple-700 transition duration-300 items-center gap-3 shadow-xl focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 ml-4 font-bold text-lg md:text-xl animate-none hover:animate-pulseBtn",children:[n.jsx(a0,{className:"w-7 h-7 md:w-8 md:h-8"})," ",n.jsx("span",{children:"Add New Product"})]})]}),n.jsxs(ue,{to:"/products-upload",className:"sm:hidden fixed bottom-8 right-4 md:bottom-12 md:right-12 z-50 rounded-full bg-gradient-to-br from-blue-600 via-purple-500 to-pink-500 text-white p-7 shadow-2xl hover:from-blue-700 hover:to-pink-600 transition focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 flex items-center justify-center animate-pulseBtn",title:"Add New Product","aria-label":"Add New Product",tabIndex:0,children:[n.jsx(Uj,{className:"w-12 h-12 font-bold"}),n.jsx("span",{className:"sr-only",children:"Add New Product"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 max-w-full overflow-x-auto",children:[n.jsx("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:n.jsxs("div",{className:"relative w-full sm:w-1/3",children:[n.jsx("input",{type:"text",value:u,onChange:p=>h(p.target.value),placeholder:"Search by product name...",className:"w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-search"})}),u&&n.jsx("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:n.jsx("i",{className:"bx bx-x"})})]})}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsx("div",{className:"block sm:hidden",children:l.map((p,x)=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-4 shadow-md hover:shadow-xl transition duration-300 animate-slide-in focus:ring-2 focus:ring-blue-300 outline-none",tabIndex:0,children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"font-medium text-gray-700",children:"SL:"}),n.jsx("span",{className:"text-gray-900",children:x+1})]}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Name:"}),n.jsx(ue,{to:`/seller/edit-product/${p.id}`,className:"text-blue-900 font-medium hover:underline focus:underline cursor-pointer focus:outline-blue-400",children:p.name||"Unnamed Product"})]}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Price:"}),n.jsxs("span",{className:"text-gray-900",children:["",p.price||0]})]}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Verify:"}),n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${p.status==="pending"?"bg-orange-100 text-orange-800":p.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[p.status==="pending"&&n.jsx(dh,{className:"w-3 h-3"}),p.status==="approved"&&n.jsx(dh,{className:"w-3 h-3"}),p.status==="pending"?"Pending":p.status==="approved"?"Approved":"Not Approved"]})]}),n.jsx("div",{className:"flex justify-end mt-2",children:n.jsxs(ue,{to:`/seller/edit-product/${p.id}`,className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"View/Edit Product",children:[n.jsx(Ld,{className:"w-4 h-4"})," Edit"]})})]},p.id))}),n.jsx("div",{className:"hidden sm:block w-full overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border-collapse text-sm md:text-base",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"SL"}),n.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"Name"}),n.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"Price"}),n.jsxs("th",{className:"p-2 text-left text-gray-700 font-semibold flex items-center gap-1",children:["Verify",n.jsxs("span",{className:"group relative cursor-pointer",children:[n.jsx(dh,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-500 transition"}),n.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-40 bg-gray-800 text-white text-xs rounded p-2 opacity-0 group-hover:opacity-100 pointer-events-none z-10 transition-opacity duration-200 shadow-lg",children:"Status: Pending = Awaiting approval, Approved = Live, Not Approved = Rejected"})]})]}),n.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:l.map((p,x)=>n.jsxs("tr",{className:`border-t transition duration-200 animate-slide-in outline-none ${x%2===0?"bg-white":"bg-blue-50"}`,tabIndex:0,children:[n.jsx("td",{className:"p-2 text-gray-900",children:x+1}),n.jsx("td",{className:"p-2 text-blue-900 font-medium truncate max-w-xs hover:underline focus:underline cursor-pointer",title:p.name||"Unnamed Product",children:n.jsx(ue,{to:`/seller/edit-product/${p.id}`,className:"focus:outline-blue-400",children:p.name||"Unnamed Product"})}),n.jsxs("td",{className:"p-2 text-gray-900",children:["",p.price||0]}),n.jsx("td",{className:"p-2",children:n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${p.status==="pending"?"bg-orange-100 text-orange-800":p.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[p.status==="pending"&&n.jsx(dh,{className:"w-3 h-3"}),p.status==="approved"&&n.jsx(dh,{className:"w-3 h-3"}),p.status==="pending"?"Pending":p.status==="approved"?"Approved":"Not Approved"]})}),n.jsx("td",{className:"p-2",children:n.jsxs(ue,{to:`/seller/edit-product/${p.id}`,className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"View/Edit Product",children:[n.jsx(Ld,{className:"w-4 h-4"})," Edit"]})})]},p.id))})]})})]}),l.length===0&&n.jsxs("div",{className:"flex flex-col items-center justify-center mt-10 mb-10 animate-slide-in",children:[n.jsx("img",{src:"/src/assets/icons/empty-cart.svg",alt:"No products",className:"w-32 h-32 mb-6 opacity-80"}),n.jsx("p",{className:"text-gray-700 text-center text-xl font-semibold mb-4",children:"No products found"}),n.jsxs(ue,{to:"/products-upload",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center gap-2 shadow-lg focus:outline-blue-400 focus:ring-2 focus:ring-blue-300",children:[n.jsx(a0,{className:"w-5 h-5"})," Add Your First Product"]})]})]})]}),n.jsx("style",{children:`
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(16px); }
          to { opacity: 1; transform: none; }
        }
        .animate-fade-in {
          animation: fade-in 0.7s cubic-bezier(0.4,0,0.2,1);
        }
        @keyframes slide-in {
          from { opacity: 0; transform: translateY(32px); }
          to { opacity: 1; transform: none; }
        }
        .animate-slide-in {
          animation: slide-in 0.7s cubic-bezier(0.4,0,0.2,1);
        }
        @keyframes pulseBtn {
          0%, 100% { box-shadow: 0 0 0 0 rgba(124,58,237,0.4), 0 8px 32px 0 rgba(30,58,138,0.18); }
          50% { box-shadow: 0 0 0 12px rgba(124,58,237,0.15), 0 8px 32px 0 rgba(30,58,138,0.18); }
        }
        .animate-pulseBtn {
          animation: pulseBtn 1.2s infinite;
        }
      `})]})}var Hse={};function Gse(){var k;const t=Ns(),[e,s]=_.useState({fullName:"",country:"Nigeria",idNumber:"",bankName:"",bankCode:"",accountNumber:"",iban:"",email:((k=we.currentUser)==null?void 0:k.email)||""}),[r,a]=_.useState([]),[i,l]=_.useState({}),[d,u]=_.useState(!0),[h,f]=_.useState(""),[p,x]=_.useState(!1),w=()=>{const T={};return e.fullName.trim()||(T.fullName="Full name is required."),e.country==="Nigeria"?(e.bankCode||(T.bankCode="Select a bank."),e.accountNumber.match(/^\d{10}$/)||(T.accountNumber="Enter a valid 10-digit account number.")):(e.idNumber.trim()||(T.idNumber="Enter a valid ID number."),e.iban.match(/^[A-Z]{2}\d{2}[A-Z0-9]{1,30}$/)||(T.iban="Enter a valid IBAN."),e.email.match(/\S+@\S+\.\S+/)||(T.email="Enter a valid email.")),T};_.useEffect(()=>{(async()=>{try{if(!we.currentUser){f("Please log in to onboard."),t("/login");return}const P=_e(J,"sellers",we.currentUser.uid);if((await Ge(P)).exists()){x(!0);return}if(e.country==="Nigeria"){const R=await Ut.get("https://foremade-backend.onrender.com/fetch-banks");a(R.data)}}catch(P){f("Initialization error: "+P.message)}finally{u(!1)}})()},[e.country,t]);const N=T=>{const{name:P,value:U}=T.target;s(R=>({...R,[P]:U})),l(R=>({...R,[P]:""}))},v=async(T,P,U)=>{const R=await Ut.post("https://api.paystack.co/transferrecipient",{type:"nuban",name:U,account_number:P,bank_code:T,currency:"NGN"},{headers:{Authorization:`Bearer ${Hse.PAYSTACK_SECRET_KEY}`,"Content-Type":"application/json"}});if(!R.data.status)throw new Error("Failed to create transfer recipient");return R.data.data.recipient_code},j=async T=>{var U,R,O;T.preventDefault(),l({}),u(!0);const P=w();if(Object.keys(P).length>0){l(P),u(!1);return}try{const I={userId:we.currentUser.uid,country:e.country,fullName:e.fullName,email:e.email,bankCode:e.country==="Nigeria"?e.bankCode:void 0,accountNumber:e.country==="Nigeria"?e.accountNumber:void 0,iban:e.country==="United Kingdom"?e.iban:void 0,bankName:e.country==="United Kingdom"?e.bankName:void 0,idNumber:e.country==="United Kingdom"?e.idNumber:void 0},C=await Ut.post("https://foremade-backend.onrender.com/onboard-seller",I);if(C.data.error)throw new Error(C.data.error);let E=null;e.country==="Nigeria"&&(E=await v(e.bankCode,e.accountNumber,e.fullName));const D=new Date().toISOString();await ts(_e(J,"sellers",we.currentUser.uid),{fullName:e.fullName,country:e.country,idNumber:e.country==="United Kingdom"?e.idNumber:"",bankName:e.country==="Nigeria"?(U=r.find(V=>V.code===e.bankCode))==null?void 0:U.name:e.bankName,bankCode:e.country==="Nigeria"?e.bankCode:"",accountNumber:e.country==="Nigeria"?e.accountNumber:"",iban:e.country==="United Kingdom"?e.iban:"",email:e.country==="United Kingdom"?e.email:"",paystackRecipientCode:E||"",createdAt:D,updatedAt:D},{merge:!0}),alert("Onboarding successful!"),t("/seller-dashboard")}catch(I){f("Failed to onboard: "+(((O=(R=I.response)==null?void 0:R.data)==null?void 0:O.error)||I.message))}finally{u(!1)}};return d?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):h?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-lg",children:[n.jsx("p",{className:"text-red-700 text-base mb-4",children:h}),n.jsx(ue,{to:"/login",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Return to Login"})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center",children:[n.jsx("i",{className:"bx bxs-bank text-blue-500 mr-2"}),"Seller Onboarding"]}),n.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Set up your seller account to start selling."})]}),n.jsxs("form",{onSubmit:j,className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Full Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",name:"fullName",value:e.fullName,onChange:N,className:`w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${i.fullName?"border-red-500":""}`,disabled:d}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-user"})})]}),i.fullName&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.fullName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Country ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"country",value:e.country,onChange:N,className:"mt-1 w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",disabled:d,children:[n.jsx("option",{value:"Nigeria",children:"Nigeria"}),n.jsx("option",{value:"United Kingdom",children:"UK"})]})]}),e.country==="Nigeria"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Bank Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"bankCode",value:e.bankCode,onChange:N,className:`mt-1 w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${i.bankCode?"border-red-500":""}`,disabled:d,children:[n.jsx("option",{value:"",children:"Select a bank"}),r.map(T=>n.jsx("option",{value:T.code,children:T.name},T.code))]}),i.bankCode&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.bankCode})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Account Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",name:"accountNumber",value:e.accountNumber,onChange:N,placeholder:"e.g., 0123456789",className:`w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${i.accountNumber?"border-red-500":""}`,disabled:d}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-bank"})})]}),i.accountNumber&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.accountNumber})]})]}),e.country==="United Kingdom"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["ID Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",name:"idNumber",value:e.idNumber,onChange:N,className:`w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${i.idNumber?"border-red-500":""}`,disabled:d}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-id-card"})})]}),i.idNumber&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.idNumber})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Bank Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",name:"bankName",value:e.bankName,onChange:N,placeholder:"e.g., Barclays",className:`w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${i.bankName?"border-red-500":""}`,disabled:d}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-bank"})})]}),i.bankName&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.bankName})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["IBAN ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",name:"iban",value:e.iban,onChange:N,placeholder:"e.g., GB33BUKB20201555555555",className:`w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${i.iban?"border-red-500":""}`,disabled:d}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-credit-card"})})]}),i.iban&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.iban})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"email",name:"email",value:e.email,onChange:N,placeholder:"e.g., seller@example.com",className:`w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition ${i.email?"border-red-500":""}`,disabled:d}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-envelope"})})]}),i.email&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.email})]})]}),n.jsxs("button",{type:"submit",className:`w-full py-2 px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition duration-300 ${d?"opacity-50 cursor-not-allowed":""}`,disabled:d,children:[n.jsx("i",{className:"bx bx-check"}),"Complete Onboarding"]})]})]})}),p&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Already Onboarded"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"You are already onboarded as a seller. Would you like to proceed to your dashboard?"}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>t("/smile"),className:"py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Yes"}),n.jsx("button",{onClick:()=>x(!1),className:"py-2 px-4 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"No"})]})]})})]})}function a1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var xc=a1();function OD(t){xc=t}var sm={exec:()=>null};function ms(t,e=""){let s=typeof t=="string"?t:t.source;const r={replace:(a,i)=>{let l=typeof i=="string"?i:i.source;return l=l.replace(cn.caret,"$1"),s=s.replace(a,l),r},getRegex:()=>new RegExp(s,e)};return r}var cn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Wse=/^(?:[ \t]*(?:\n|$))+/,Yse=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Kse=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,sf=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Xse=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,i1=/(?:[*+-]|\d{1,9}[.)])/,LD=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,UD=ms(LD).replace(/bull/g,i1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Qse=ms(LD).replace(/bull/g,i1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),o1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Jse=/^[^\n]+/,l1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Zse=ms(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",l1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ere=ms(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,i1).getRegex(),xx="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",c1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,tre=ms("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",c1).replace("tag",xx).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),VD=ms(o1).replace("hr",sf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xx).getRegex(),sre=ms(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",VD).getRegex(),d1={blockquote:sre,code:Yse,def:Zse,fences:Kse,heading:Xse,hr:sf,html:tre,lheading:UD,list:ere,newline:Wse,paragraph:VD,table:sm,text:Jse},$A=ms("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",sf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xx).getRegex(),rre={...d1,lheading:Qse,table:$A,paragraph:ms(o1).replace("hr",sf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",$A).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xx).getRegex()},nre={...d1,html:ms(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",c1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:sm,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ms(o1).replace("hr",sf).replace("heading",` *#{1,6} *[^
]`).replace("lheading",UD).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},are=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ire=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,FD=/^( {2,}|\\)\n(?!\s*$)/,ore=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,yx=/[\p{P}\p{S}]/u,u1=/[\s\p{P}\p{S}]/u,zD=/[^\s\p{P}\p{S}]/u,lre=ms(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,u1).getRegex(),BD=/(?!~)[\p{P}\p{S}]/u,cre=/(?!~)[\s\p{P}\p{S}]/u,dre=/(?:[^\s\p{P}\p{S}]|~)/u,ure=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,$D=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,hre=ms($D,"u").replace(/punct/g,yx).getRegex(),mre=ms($D,"u").replace(/punct/g,BD).getRegex(),qD="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",fre=ms(qD,"gu").replace(/notPunctSpace/g,zD).replace(/punctSpace/g,u1).replace(/punct/g,yx).getRegex(),gre=ms(qD,"gu").replace(/notPunctSpace/g,dre).replace(/punctSpace/g,cre).replace(/punct/g,BD).getRegex(),pre=ms("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,zD).replace(/punctSpace/g,u1).replace(/punct/g,yx).getRegex(),xre=ms(/\\(punct)/,"gu").replace(/punct/g,yx).getRegex(),yre=ms(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),bre=ms(c1).replace("(?:-->|$)","-->").getRegex(),vre=ms("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",bre).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),x0=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,wre=ms(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",x0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),HD=ms(/^!?\[(label)\]\[(ref)\]/).replace("label",x0).replace("ref",l1).getRegex(),GD=ms(/^!?\[(ref)\](?:\[\])?/).replace("ref",l1).getRegex(),Nre=ms("reflink|nolink(?!\\()","g").replace("reflink",HD).replace("nolink",GD).getRegex(),h1={_backpedal:sm,anyPunctuation:xre,autolink:yre,blockSkip:ure,br:FD,code:ire,del:sm,emStrongLDelim:hre,emStrongRDelimAst:fre,emStrongRDelimUnd:pre,escape:are,link:wre,nolink:GD,punctuation:lre,reflink:HD,reflinkSearch:Nre,tag:vre,text:ore,url:sm},jre={...h1,link:ms(/^!?\[(label)\]\((.*?)\)/).replace("label",x0).getRegex(),reflink:ms(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",x0).getRegex()},Tw={...h1,emStrongRDelimAst:gre,emStrongLDelim:mre,url:ms(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},_re={...Tw,br:ms(FD).replace("{2,}","*").getRegex(),text:ms(Tw.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Jg={normal:d1,gfm:rre,pedantic:nre},vh={normal:h1,gfm:Tw,breaks:_re,pedantic:jre},Sre={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qA=t=>Sre[t];function La(t,e){if(e){if(cn.escapeTest.test(t))return t.replace(cn.escapeReplace,qA)}else if(cn.escapeTestNoEncode.test(t))return t.replace(cn.escapeReplaceNoEncode,qA);return t}function HA(t){try{t=encodeURI(t).replace(cn.percentDecode,"%")}catch{return null}return t}function GA(t,e){var i;const s=t.replace(cn.findPipe,(l,d,u)=>{let h=!1,f=d;for(;--f>=0&&u[f]==="\\";)h=!h;return h?"|":" |"}),r=s.split(cn.splitPipe);let a=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;a<r.length;a++)r[a]=r[a].trim().replace(cn.slashPipe,"|");return r}function wh(t,e,s){const r=t.length;if(r===0)return"";let a=0;for(;a<r&&t.charAt(r-a-1)===e;)a++;return t.slice(0,r-a)}function kre(t,e){if(t.indexOf(e[1])===-1)return-1;let s=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])s++;else if(t[r]===e[1]&&(s--,s<0))return r;return s>0?-2:-1}function WA(t,e,s,r,a){const i=e.href,l=e.title||null,d=t[1].replace(a.other.outputLinkReplace,"$1");r.state.inLink=!0;const u={type:t[0].charAt(0)==="!"?"image":"link",raw:s,href:i,title:l,text:d,tokens:r.inlineTokens(d)};return r.state.inLink=!1,u}function Ere(t,e,s){const r=t.match(s.other.indentCodeCompensation);if(r===null)return e;const a=r[1];return e.split(`
`).map(i=>{const l=i.match(s.other.beginningSpace);if(l===null)return i;const[d]=l;return d.length>=a.length?i.slice(a.length):i}).join(`
`)}var y0=class{constructor(t){Be(this,"options");Be(this,"rules");Be(this,"lexer");this.options=t||xc}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const s=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:wh(s,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const s=e[0],r=Ere(s,e[3]||"",this.rules);return{type:"code",raw:s,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let s=e[2].trim();if(this.rules.other.endingHash.test(s)){const r=wh(s,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(s=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:wh(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let s=wh(e[0],`
`).split(`
`),r="",a="";const i=[];for(;s.length>0;){let l=!1;const d=[];let u;for(u=0;u<s.length;u++)if(this.rules.other.blockquoteStart.test(s[u]))d.push(s[u]),l=!0;else if(!l)d.push(s[u]);else break;s=s.slice(u);const h=d.join(`
`),f=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${h}`:h,a=a?`${a}
${f}`:f;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=p,s.length===0)break;const x=i.at(-1);if((x==null?void 0:x.type)==="code")break;if((x==null?void 0:x.type)==="blockquote"){const w=x,N=w.raw+`
`+s.join(`
`),v=this.blockquote(N);i[i.length-1]=v,r=r.substring(0,r.length-w.raw.length)+v.raw,a=a.substring(0,a.length-w.text.length)+v.text;break}else if((x==null?void 0:x.type)==="list"){const w=x,N=w.raw+`
`+s.join(`
`),v=this.list(N);i[i.length-1]=v,r=r.substring(0,r.length-x.raw.length)+v.raw,a=a.substring(0,a.length-w.raw.length)+v.raw,s=N.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:a}}}list(t){let e=this.rules.block.list.exec(t);if(e){let s=e[1].trim();const r=s.length>1,a={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const i=this.rules.other.listItemRegex(s);let l=!1;for(;t;){let u=!1,h="",f="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;h=e[0],t=t.substring(h.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,k=>" ".repeat(3*k.length)),x=t.split(`
`,1)[0],w=!p.trim(),N=0;if(this.options.pedantic?(N=2,f=p.trimStart()):w?N=e[1].length+1:(N=e[2].search(this.rules.other.nonSpaceChar),N=N>4?1:N,f=p.slice(N),N+=e[1].length),w&&this.rules.other.blankLine.test(x)&&(h+=x+`
`,t=t.substring(x.length+1),u=!0),!u){const k=this.rules.other.nextBulletRegex(N),T=this.rules.other.hrRegex(N),P=this.rules.other.fencesBeginRegex(N),U=this.rules.other.headingBeginRegex(N),R=this.rules.other.htmlBeginRegex(N);for(;t;){const O=t.split(`
`,1)[0];let I;if(x=O,this.options.pedantic?(x=x.replace(this.rules.other.listReplaceNesting,"  "),I=x):I=x.replace(this.rules.other.tabCharGlobal,"    "),P.test(x)||U.test(x)||R.test(x)||k.test(x)||T.test(x))break;if(I.search(this.rules.other.nonSpaceChar)>=N||!x.trim())f+=`
`+I.slice(N);else{if(w||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||P.test(p)||U.test(p)||T.test(p))break;f+=`
`+x}!w&&!x.trim()&&(w=!0),h+=O+`
`,t=t.substring(O.length+1),p=I.slice(N)}}a.loose||(l?a.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(l=!0));let v=null,j;this.options.gfm&&(v=this.rules.other.listIsTask.exec(f),v&&(j=v[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:h,task:!!v,checked:j,loose:!1,text:f,tokens:[]}),a.raw+=h}const d=a.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let u=0;u<a.items.length;u++)if(this.lexer.state.top=!1,a.items[u].tokens=this.lexer.blockTokens(a.items[u].text,[]),!a.loose){const h=a.items[u].tokens.filter(p=>p.type==="space"),f=h.length>0&&h.some(p=>this.rules.other.anyLine.test(p.raw));a.loose=f}if(a.loose)for(let u=0;u<a.items.length;u++)a.items[u].loose=!0;return a}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const s=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:s,raw:e[0],href:r,title:a}}}table(t){var l;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const s=GA(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=(l=e[3])!=null&&l.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const d of r)this.rules.other.tableAlignRight.test(d)?i.align.push("right"):this.rules.other.tableAlignCenter.test(d)?i.align.push("center"):this.rules.other.tableAlignLeft.test(d)?i.align.push("left"):i.align.push(null);for(let d=0;d<s.length;d++)i.header.push({text:s[d],tokens:this.lexer.inline(s[d]),header:!0,align:i.align[d]});for(const d of a)i.rows.push(GA(d,i.header.length).map((u,h)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:i.align[h]})));return i}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const s=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:s,tokens:this.lexer.inline(s)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const s=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;const i=wh(s.slice(0,-1),"\\");if((s.length-i.length)%2===0)return}else{const i=kre(e[2],"()");if(i===-2)return;if(i>-1){const d=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,d).trim(),e[3]=""}}let r=e[2],a="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],a=i[3])}else a=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?r=r.slice(1):r=r.slice(1,-1)),WA(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let s;if((s=this.rules.inline.reflink.exec(t))||(s=this.rules.inline.nolink.exec(t))){const r=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),a=e[r.toLowerCase()];if(!a){const i=s[0].charAt(0);return{type:"text",raw:i,text:i}}return WA(s,a,s[0],this.lexer,this.rules)}}emStrong(t,e,s=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&s.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const i=[...r[0]].length-1;let l,d,u=i,h=0;const f=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,e=e.slice(-1*t.length+i);(r=f.exec(e))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(d=[...l].length,r[3]||r[4]){u+=d;continue}else if((r[5]||r[6])&&i%3&&!((i+d)%3)){h+=d;continue}if(u-=d,u>0)continue;d=Math.min(d,d+u+h);const p=[...r[0]][0].length,x=t.slice(0,i+r.index+p+d);if(Math.min(i,d)%2){const N=x.slice(1,-1);return{type:"em",raw:x,text:N,tokens:this.lexer.inlineTokens(N)}}const w=x.slice(2,-2);return{type:"strong",raw:x,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let s=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(s),a=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return r&&a&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:e[0],text:s}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let s,r;return e[2]==="@"?(s=e[1],r="mailto:"+s):(s=e[1],r=s),{type:"link",raw:e[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(t){var s;let e;if(e=this.rules.inline.url.exec(t)){let r,a;if(e[2]==="@")r=e[0],a="mailto:"+r;else{let i;do i=e[0],e[0]=((s=this.rules.inline._backpedal.exec(e[0]))==null?void 0:s[0])??"";while(i!==e[0]);r=e[0],e[1]==="www."?a="http://"+e[0]:a=e[0]}return{type:"link",raw:e[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const s=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:s}}}},Ai=class Cw{constructor(e){Be(this,"tokens");Be(this,"options");Be(this,"state");Be(this,"tokenizer");Be(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||xc,this.options.tokenizer=this.options.tokenizer||new y0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={other:cn,block:Jg.normal,inline:vh.normal};this.options.pedantic?(s.block=Jg.pedantic,s.inline=vh.pedantic):this.options.gfm&&(s.block=Jg.gfm,this.options.breaks?s.inline=vh.breaks:s.inline=vh.gfm),this.tokenizer.rules=s}static get rules(){return{block:Jg,inline:vh}}static lex(e,s){return new Cw(s).lex(e)}static lexInline(e,s){return new Cw(s).inlineTokens(e)}lex(e){e=e.replace(cn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){const r=this.inlineQueue[s];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,s=[],r=!1){var a,i,l;for(this.options.pedantic&&(e=e.replace(cn.tabCharGlobal,"    ").replace(cn.spaceLine,""));e;){let d;if((i=(a=this.options.extensions)==null?void 0:a.block)!=null&&i.some(h=>(d=h.call({lexer:this},e,s))?(e=e.substring(d.raw.length),s.push(d),!0):!1))continue;if(d=this.tokenizer.space(e)){e=e.substring(d.raw.length);const h=s.at(-1);d.raw.length===1&&h!==void 0?h.raw+=`
`:s.push(d);continue}if(d=this.tokenizer.code(e)){e=e.substring(d.raw.length);const h=s.at(-1);(h==null?void 0:h.type)==="paragraph"||(h==null?void 0:h.type)==="text"?(h.raw+=`
`+d.raw,h.text+=`
`+d.text,this.inlineQueue.at(-1).src=h.text):s.push(d);continue}if(d=this.tokenizer.fences(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.heading(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.hr(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.blockquote(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.list(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.html(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.def(e)){e=e.substring(d.raw.length);const h=s.at(-1);(h==null?void 0:h.type)==="paragraph"||(h==null?void 0:h.type)==="text"?(h.raw+=`
`+d.raw,h.text+=`
`+d.raw,this.inlineQueue.at(-1).src=h.text):this.tokens.links[d.tag]||(this.tokens.links[d.tag]={href:d.href,title:d.title});continue}if(d=this.tokenizer.table(e)){e=e.substring(d.raw.length),s.push(d);continue}if(d=this.tokenizer.lheading(e)){e=e.substring(d.raw.length),s.push(d);continue}let u=e;if((l=this.options.extensions)!=null&&l.startBlock){let h=1/0;const f=e.slice(1);let p;this.options.extensions.startBlock.forEach(x=>{p=x.call({lexer:this},f),typeof p=="number"&&p>=0&&(h=Math.min(h,p))}),h<1/0&&h>=0&&(u=e.substring(0,h+1))}if(this.state.top&&(d=this.tokenizer.paragraph(u))){const h=s.at(-1);r&&(h==null?void 0:h.type)==="paragraph"?(h.raw+=`
`+d.raw,h.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):s.push(d),r=u.length!==e.length,e=e.substring(d.raw.length);continue}if(d=this.tokenizer.text(e)){e=e.substring(d.raw.length);const h=s.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=`
`+d.raw,h.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):s.push(d);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return this.state.top=!0,s}inline(e,s=[]){return this.inlineQueue.push({src:e,tokens:s}),s}inlineTokens(e,s=[]){var d,u,h;let r=e,a=null;if(this.tokens.links){const f=Object.keys(this.tokens.links);if(f.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)f.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,a.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,l="";for(;e;){i||(l=""),i=!1;let f;if((u=(d=this.options.extensions)==null?void 0:d.inline)!=null&&u.some(x=>(f=x.call({lexer:this},e,s))?(e=e.substring(f.raw.length),s.push(f),!0):!1))continue;if(f=this.tokenizer.escape(e)){e=e.substring(f.raw.length),s.push(f);continue}if(f=this.tokenizer.tag(e)){e=e.substring(f.raw.length),s.push(f);continue}if(f=this.tokenizer.link(e)){e=e.substring(f.raw.length),s.push(f);continue}if(f=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(f.raw.length);const x=s.at(-1);f.type==="text"&&(x==null?void 0:x.type)==="text"?(x.raw+=f.raw,x.text+=f.text):s.push(f);continue}if(f=this.tokenizer.emStrong(e,r,l)){e=e.substring(f.raw.length),s.push(f);continue}if(f=this.tokenizer.codespan(e)){e=e.substring(f.raw.length),s.push(f);continue}if(f=this.tokenizer.br(e)){e=e.substring(f.raw.length),s.push(f);continue}if(f=this.tokenizer.del(e)){e=e.substring(f.raw.length),s.push(f);continue}if(f=this.tokenizer.autolink(e)){e=e.substring(f.raw.length),s.push(f);continue}if(!this.state.inLink&&(f=this.tokenizer.url(e))){e=e.substring(f.raw.length),s.push(f);continue}let p=e;if((h=this.options.extensions)!=null&&h.startInline){let x=1/0;const w=e.slice(1);let N;this.options.extensions.startInline.forEach(v=>{N=v.call({lexer:this},w),typeof N=="number"&&N>=0&&(x=Math.min(x,N))}),x<1/0&&x>=0&&(p=e.substring(0,x+1))}if(f=this.tokenizer.inlineText(p)){e=e.substring(f.raw.length),f.raw.slice(-1)!=="_"&&(l=f.raw.slice(-1)),i=!0;const x=s.at(-1);(x==null?void 0:x.type)==="text"?(x.raw+=f.raw,x.text+=f.text):s.push(f);continue}if(e){const x="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(x);break}else throw new Error(x)}}return s}},b0=class{constructor(t){Be(this,"options");Be(this,"parser");this.options=t||xc}space(t){return""}code({text:t,lang:e,escaped:s}){var i;const r=(i=(e||"").match(cn.notSpaceStart))==null?void 0:i[0],a=t.replace(cn.endingNewline,"")+`
`;return r?'<pre><code class="language-'+La(r)+'">'+(s?a:La(a,!0))+`</code></pre>
`:"<pre><code>"+(s?a:La(a,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,s=t.start;let r="";for(let l=0;l<t.items.length;l++){const d=t.items[l];r+=this.listitem(d)}const a=e?"ol":"ul",i=e&&s!==1?' start="'+s+'"':"";return"<"+a+i+`>
`+r+"</"+a+`>
`}listitem(t){var s;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((s=t.tokens[0])==null?void 0:s.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+La(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",s="";for(let a=0;a<t.header.length;a++)s+=this.tablecell(t.header[a]);e+=this.tablerow({text:s});let r="";for(let a=0;a<t.rows.length;a++){const i=t.rows[a];s="";for(let l=0;l<i.length;l++)s+=this.tablecell(i[l]);r+=this.tablerow({text:s})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),s=t.header?"th":"td";return(t.align?`<${s} align="${t.align}">`:`<${s}>`)+e+`</${s}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${La(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:s}){const r=this.parser.parseInline(s),a=HA(t);if(a===null)return r;t=a;let i='<a href="'+t+'"';return e&&(i+=' title="'+La(e)+'"'),i+=">"+r+"</a>",i}image({href:t,title:e,text:s,tokens:r}){r&&(s=this.parser.parseInline(r,this.parser.textRenderer));const a=HA(t);if(a===null)return La(s);t=a;let i=`<img src="${t}" alt="${s}"`;return e&&(i+=` title="${La(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:La(t.text)}},m1=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Ri=class Aw{constructor(e){Be(this,"options");Be(this,"renderer");Be(this,"textRenderer");this.options=e||xc,this.options.renderer=this.options.renderer||new b0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new m1}static parse(e,s){return new Aw(s).parse(e)}static parseInline(e,s){return new Aw(s).parseInline(e)}parse(e,s=!0){var a,i;let r="";for(let l=0;l<e.length;l++){const d=e[l];if((i=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&i[d.type]){const h=d,f=this.options.extensions.renderers[h.type].call({parser:this},h);if(f!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){r+=f||"";continue}}const u=d;switch(u.type){case"space":{r+=this.renderer.space(u);continue}case"hr":{r+=this.renderer.hr(u);continue}case"heading":{r+=this.renderer.heading(u);continue}case"code":{r+=this.renderer.code(u);continue}case"table":{r+=this.renderer.table(u);continue}case"blockquote":{r+=this.renderer.blockquote(u);continue}case"list":{r+=this.renderer.list(u);continue}case"html":{r+=this.renderer.html(u);continue}case"paragraph":{r+=this.renderer.paragraph(u);continue}case"text":{let h=u,f=this.renderer.text(h);for(;l+1<e.length&&e[l+1].type==="text";)h=e[++l],f+=`
`+this.renderer.text(h);s?r+=this.renderer.paragraph({type:"paragraph",raw:f,text:f,tokens:[{type:"text",raw:f,text:f,escaped:!0}]}):r+=f;continue}default:{const h='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return r}parseInline(e,s=this.renderer){var a,i;let r="";for(let l=0;l<e.length;l++){const d=e[l];if((i=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&i[d.type]){const h=this.options.extensions.renderers[d.type].call({parser:this},d);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type)){r+=h||"";continue}}const u=d;switch(u.type){case"escape":{r+=s.text(u);break}case"html":{r+=s.html(u);break}case"link":{r+=s.link(u);break}case"image":{r+=s.image(u);break}case"strong":{r+=s.strong(u);break}case"em":{r+=s.em(u);break}case"codespan":{r+=s.codespan(u);break}case"br":{r+=s.br(u);break}case"del":{r+=s.del(u);break}case"text":{r+=s.text(u);break}default:{const h='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return r}},fv,Tp=(fv=class{constructor(t){Be(this,"options");Be(this,"block");this.options=t||xc}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Ai.lex:Ai.lexInline}provideParser(){return this.block?Ri.parse:Ri.parseInline}},Be(fv,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),fv),Tre=class{constructor(...t){Be(this,"defaults",a1());Be(this,"options",this.setOptions);Be(this,"parse",this.parseMarkdown(!0));Be(this,"parseInline",this.parseMarkdown(!1));Be(this,"Parser",Ri);Be(this,"Renderer",b0);Be(this,"TextRenderer",m1);Be(this,"Lexer",Ai);Be(this,"Tokenizer",y0);Be(this,"Hooks",Tp);this.use(...t)}walkTokens(t,e){var r,a;let s=[];for(const i of t)switch(s=s.concat(e.call(this,i)),i.type){case"table":{const l=i;for(const d of l.header)s=s.concat(this.walkTokens(d.tokens,e));for(const d of l.rows)for(const u of d)s=s.concat(this.walkTokens(u.tokens,e));break}case"list":{const l=i;s=s.concat(this.walkTokens(l.items,e));break}default:{const l=i;(a=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&a[l.type]?this.defaults.extensions.childTokens[l.type].forEach(d=>{const u=l[d].flat(1/0);s=s.concat(this.walkTokens(u,e))}):l.tokens&&(s=s.concat(this.walkTokens(l.tokens,e)))}}return s}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const i=e.renderers[a.name];i?e.renderers[a.name]=function(...l){let d=a.renderer.apply(this,l);return d===!1&&(d=i.apply(this,l)),d}:e.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=e[a.level];i?i.unshift(a.tokenizer):e[a.level]=[a.tokenizer],a.start&&(a.level==="block"?e.startBlock?e.startBlock.push(a.start):e.startBlock=[a.start]:a.level==="inline"&&(e.startInline?e.startInline.push(a.start):e.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(e.childTokens[a.name]=a.childTokens)}),r.extensions=e),s.renderer){const a=this.defaults.renderer||new b0(this.defaults);for(const i in s.renderer){if(!(i in a))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const l=i,d=s.renderer[l],u=a[l];a[l]=(...h)=>{let f=d.apply(a,h);return f===!1&&(f=u.apply(a,h)),f||""}}r.renderer=a}if(s.tokenizer){const a=this.defaults.tokenizer||new y0(this.defaults);for(const i in s.tokenizer){if(!(i in a))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const l=i,d=s.tokenizer[l],u=a[l];a[l]=(...h)=>{let f=d.apply(a,h);return f===!1&&(f=u.apply(a,h)),f}}r.tokenizer=a}if(s.hooks){const a=this.defaults.hooks||new Tp;for(const i in s.hooks){if(!(i in a))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const l=i,d=s.hooks[l],u=a[l];Tp.passThroughHooks.has(i)?a[l]=h=>{if(this.defaults.async)return Promise.resolve(d.call(a,h)).then(p=>u.call(a,p));const f=d.call(a,h);return u.call(a,f)}:a[l]=(...h)=>{let f=d.apply(a,h);return f===!1&&(f=u.apply(a,h)),f}}r.hooks=a}if(s.walkTokens){const a=this.defaults.walkTokens,i=s.walkTokens;r.walkTokens=function(l){let d=[];return d.push(i.call(this,l)),a&&(d=d.concat(a.call(this,l))),d}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Ai.lex(t,e??this.defaults)}parser(t,e){return Ri.parse(t,e??this.defaults)}parseMarkdown(t){return(s,r)=>{const a={...r},i={...this.defaults,...a},l=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&a.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const d=i.hooks?i.hooks.provideLexer():t?Ai.lex:Ai.lexInline,u=i.hooks?i.hooks.provideParser():t?Ri.parse:Ri.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(s):s).then(h=>d(h,i)).then(h=>i.hooks?i.hooks.processAllTokens(h):h).then(h=>i.walkTokens?Promise.all(this.walkTokens(h,i.walkTokens)).then(()=>h):h).then(h=>u(h,i)).then(h=>i.hooks?i.hooks.postprocess(h):h).catch(l);try{i.hooks&&(s=i.hooks.preprocess(s));let h=d(s,i);i.hooks&&(h=i.hooks.processAllTokens(h)),i.walkTokens&&this.walkTokens(h,i.walkTokens);let f=u(h,i);return i.hooks&&(f=i.hooks.postprocess(f)),f}catch(h){return l(h)}}}onError(t,e){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+La(s.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(s);throw s}}},oc=new Tre;function us(t,e){return oc.parse(t,e)}us.options=us.setOptions=function(t){return oc.setOptions(t),us.defaults=oc.defaults,OD(us.defaults),us};us.getDefaults=a1;us.defaults=xc;us.use=function(...t){return oc.use(...t),us.defaults=oc.defaults,OD(us.defaults),us};us.walkTokens=function(t,e){return oc.walkTokens(t,e)};us.parseInline=oc.parseInline;us.Parser=Ri;us.parser=Ri.parse;us.Renderer=b0;us.TextRenderer=m1;us.Lexer=Ai;us.lexer=Ai.lex;us.Tokenizer=y0;us.Hooks=Tp;us.parse=us;us.options;us.setOptions;us.use;us.walkTokens;us.parseInline;Ri.parse;Ai.lex;function bx({locationData:t,setLocationData:e,errors:s,saveLocation:r}){const a=l=>{const{name:d,value:u}=l.target;e(h=>({...h,[d]:u}))},i=async()=>{var l;if(r){const d=(l=we.currentUser)==null?void 0:l.uid;if(d)try{await ts(_e(J,"sellerLocations",d),t,{merge:!0}),console.log("Location saved to Firestore:",t)}catch(u){console.error("Error saving location:",u)}}};return ss.useEffect(()=>{r&&Object.values(t).some(l=>l)&&i()},[t,r]),n.jsxs("div",{className:"mt-6",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-map text-blue-500"}),"Seller Location"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"country",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${t.country?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:["Country ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"country",name:"country",value:t.country||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${s.country?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),s.country&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),s.country]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"state",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${t.state?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:["State ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"state",name:"state",value:t.state||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${s.state?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),s.state&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),s.state]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{htmlFor:"city",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${t.city?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:"City"}),n.jsx("input",{type:"text",id:"city",name:"city",value:t.city||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${s.city?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),s.city&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),s.city]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{htmlFor:"address",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${t.address?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:"Address"}),n.jsx("input",{type:"text",id:"address",name:"address",value:t.address||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${s.address?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),s.address&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),s.address]})]})]})]})}bx.propTypes={locationData:Ft.shape({country:Ft.string,state:Ft.string,city:Ft.string,address:Ft.string}).isRequired,setLocationData:Ft.func.isRequired,errors:Ft.object.isRequired,saveLocation:Ft.func};bx.defaultProps={saveLocation:null};function vx({isOpen:t,onClose:e,message:s,icon:r,type:a,showYesNoButtons:i,onYes:l,onNo:d}){return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md relative shadow-lg transform transition-all duration-300 animate-slide-in",children:[n.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300","aria-label":"Close popup",children:n.jsx("i",{className:"bx bx-x text-2xl"})}),n.jsxs("div",{className:"flex flex-col items-center text-center",children:[n.jsx("i",{className:`bx ${r} text-5xl ${a==="success"?"text-green-600":"text-blue-600"} mb-4`}),n.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:s}),a==="success"&&n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Your product is awaiting admin approval before going live. This would take around 24 hours."}),n.jsx("div",{className:"mt-6 flex gap-4",children:i?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200",children:"Yes"}),n.jsx("button",{onClick:d,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-200",children:"No"})]}):n.jsx("button",{onClick:e,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200",children:"Close"})})]})]})}):null}vx.propTypes={isOpen:Ft.bool.isRequired,onClose:Ft.func.isRequired,message:Ft.string,icon:Ft.string,type:Ft.oneOf(["success","question"]),showYesNoButtons:Ft.bool,onYes:Ft.func,onNo:Ft.func};vx.defaultProps={message:"Action completed!",icon:"bx-check-circle",type:"success",showYesNoButtons:!1,onYes:()=>{},onNo:()=>{}};Ut.defaults.timeout=6e4;function Cre({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Are(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(l=>l.id!==a))}}}function Rre(){var Fn,Ko,Xo,wa,Qo;const t=Ns(),{alerts:e,addAlert:s,removeAlert:r}=Are(),[a,i]=_.useState(()=>{const ne=localStorage.getItem("sellerProductForm");return ne?JSON.parse(ne):{sellerName:"",name:"",description:"",price:"",stock:"",category:"",subcategory:"",subSubcategory:"",colors:[],sizes:[],condition:"New",productUrl:"",images:[],videos:[],tags:[],manualSize:""}}),[l,d]=_.useState(()=>{const ne=localStorage.getItem("sellerLocationForm");return ne?JSON.parse(ne):{country:"",state:"",city:"",address:""}}),[u,h]=_.useState({}),[f,p]=_.useState(!0),[x,w]=_.useState(!1),[N,v]=_.useState(()=>{const ne=localStorage.getItem("sellerProductImages");return ne?JSON.parse(ne):[]}),[j,k]=_.useState(()=>{const ne=localStorage.getItem("sellerProductPreviews");return ne?JSON.parse(ne):[]}),[T,P]=_.useState(()=>{const ne=localStorage.getItem("sellerProductVideos");return ne?JSON.parse(ne):[]}),[U,R]=_.useState(()=>{const ne=localStorage.getItem("sellerProductVideoPreviews");return ne?JSON.parse(ne):[]}),[O,I]=_.useState({}),[C,E]=_.useState(!1),[D,V]=_.useState(0),[B,M]=_.useState(null),[Y,Q]=_.useState(""),[H,W]=_.useState([]),[de,ge]=_.useState(!1),[z,G]=_.useState(!1),[X,re]=_.useState(!1),[xe,ze]=_.useState(!1),[me,Ce]=_.useState(!1),[ve,Z]=_.useState({productSize:"",buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),[Se,Te]=_.useState(!1),[te,Oe]=_.useState([]),[Ae,qe]=_.useState({}),[Ve,Xe]=_.useState({}),[Et,Qe]=_.useState([]),[nt,It]=_.useState(null),[lt,xt]=_.useState(null),[ct,it]=_.useState(""),[Je,Ye]=_.useState(1),Ze=ne=>ne===1?N.length>0:ne===2?a.name&&a.description&&a.sellerName:ne===3?a.price&&a.stock:ne===4?l.country&&l.state:!1;_.useEffect(()=>{Ze(1)&&Je<2&&Ye(2),Ze(2)&&Je<3&&Ye(3),Ze(3)&&Je<4&&Ye(4)},[N,a.name,a.description,a.sellerName,a.price,a.stock,l.country,l.state]),console.log(me);const ut=_.useRef(null),je=_.useRef(null),He=_.useRef(null),mt=_.useRef(null),Dt=_.useRef(null),Fe=[{name:"Red",hex:"#ff0000"},{name:"Orange",hex:"#FFA500"},{name:"Blue",hex:"#0000ff"},{name:"Green",hex:"#008000"},{name:"Brown",hex:"#8b4513"},{name:"Black",hex:"#000000"},{name:"White",hex:"#ffffff"},{name:"Purple",hex:"#800080"},{name:"Pink",hex:"#ffc1cc"},{name:"Gray",hex:"#808080"},{name:"Yellow",hex:"#FFFF00"},{name:"Gold",hex:"#ff9a1d"},{name:"Silver",hex:"#e2f2ec"}],dt=["S","M","L","XL","XXL"],Nt=["3","4","6","8","10","12","14","16","18","20"],Kt=['3"','5"','5.5"','6"','6.5"','7"','7.5"','8"','8.5"','9"','9.5"','10"','10.5"','11"','11.5"','12"','12.5"'],Qs=["30ml","50ml","60ml","75ml","100ml"],Er=["Small","Medium","Large","X-Large"],Rs=8,ks=1,ns=10*1024*1024,Zr=30;_.useEffect(()=>{localStorage.setItem("sellerLocationForm",JSON.stringify(l))},[l]),_.useEffect(()=>{const ne=ws(Ue(J,"categories"),Tt=>{const ft=Tt.docs.map(ot=>({id:ot.id,...ot.data()}));Oe(ft.map(ot=>ot.name)),a.category&&!ft.some(ot=>ot.name===a.category)&&(i(ot=>({...ot,category:"",subcategory:"",subSubcategory:"",sizes:[]})),s("Selected category was removed by admin.","error"))},Tt=>{console.error("Error fetching categories:",Tt),s("Failed to load categories.","error")}),Ie=ws(Ue(J,"customSubcategories"),Tt=>{var ot;const ft={};Tt.forEach($t=>{ft[$t.id]=$t.data().subcategories||[]}),qe(ft),a.category&&a.subcategory&&!((ot=ft[a.category])!=null&&ot.includes(a.subcategory))&&(i($t=>({...$t,subcategory:"",subSubcategory:"",sizes:[]})),s("Selected subcategory was removed by admin.","error"))},Tt=>{console.error("Error fetching subcategories:",Tt),s("Failed to load subcategories.","error")}),Le=ws(Ue(J,"customSubSubcategories"),Tt=>{var ot,$t;const ft={};Tt.forEach(Br=>{const aa=Br.id,Ar=Br.data();ft[aa]={},Object.entries(Ar).forEach(([Jo,yc])=>{ft[aa][Jo]=Array.isArray(yc)?yc:[]})}),Xe(ft),a.category&&a.subcategory&&a.subSubcategory&&!(($t=(ot=ft[a.category])==null?void 0:ot[a.subcategory])!=null&&$t.includes(a.subSubcategory))&&(i(Br=>({...Br,subSubcategory:"",sizes:[]})),s("Selected sub-subcategory was removed by admin.","error"))},Tt=>{console.error("Error fetching sub-subcategories:",Tt),s("Failed to load sub-subcategories.","error")});return(async()=>{try{const Tt=_e(J,"feeConfigurations","categoryFees"),ft=await Ge(Tt);ft.exists()?xt(ft.data()):s("No fee configurations found.","error")}catch(Tt){console.error("Error fetching fee configurations:",Tt),s("Failed to load fee configurations.","error")}})(),()=>{ne(),Ie(),Le()}},[a.category,a.subcategory,a.subSubcategory]),_.useEffect(()=>{const ne=we.onAuthStateChanged(Ie=>{if(Ie){M(Ie);try{let Le=Ie.displayName||"";Le&&Le.startsWith("{")&&(Le=JSON.parse(Le).name||""),i(rt=>({...rt,sellerName:Le})),localStorage.setItem("sellerProductForm",JSON.stringify({...a,sellerName:Le}))}catch(Le){console.error("Error parsing displayName:",Le),s("Failed to load seller profile.","error")}}else s("Please log in to add products.","error"),t("/login")});return()=>ne()},[t]),_.useEffect(()=>{if(!lt||!a.category)return;const ne=parseFloat(a.price);if(!ne||isNaN(ne)){Z({productSize:"",buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0});return}const Ie=lt[a.category]||{buyerProtectionRate:.08,handlingRate:.2},Le=ne*Ie.buyerProtectionRate,rt=ne*Ie.handlingRate,Tt=ne+Le+rt,ft=ne;Z({productSize:a.category,buyerProtectionFee:Le,handlingFee:rt,totalEstimatedPrice:Tt,sellerEarnings:ft}),localStorage.setItem("sellerProductForm",JSON.stringify(a))},[a.price,a.category,lt]),_.useEffect(()=>{localStorage.setItem("sellerProductForm",JSON.stringify(a)),localStorage.setItem("sellerProductImages",JSON.stringify(N)),localStorage.setItem("sellerProductPreviews",JSON.stringify(j)),localStorage.setItem("sellerProductVideos",JSON.stringify(T)),localStorage.setItem("sellerProductVideoPreviews",JSON.stringify(U))},[a,N,j,T,U]),_.useEffect(()=>{it(us(a.description||"",{gfm:!0,breaks:!0}))},[a.description]),_.useEffect(()=>{(()=>{const Ie=`${a.name} ${a.description} ${a.subSubcategory}`.toLowerCase(),Le=[];Ie.includes("leather")&&Le.push("Leather"),(Ie.includes("shoe")||Ie.includes("footwear"))&&Le.push("Footwear"),(Ie.includes("phone")||Ie.includes("mobile"))&&Le.push("Smartphone"),Ie.includes("fashion")&&Le.push("Fashion"),Ie.includes("vintage")&&Le.push("Vintage"),Ie.includes("smart")&&Le.push("Smart"),Qe(Le.filter(rt=>!a.tags.includes(rt)))})()},[a.name,a.description,a.subSubcategory]),_.useEffect(()=>{const ne=navigator.userAgent||navigator.vendor||window.opera;Te(/android|iphone|ipad|ipod|opera mini|mobile/i.test(ne))},[]);const as=ne=>{const{name:Ie,value:Le}=ne.target;i(rt=>({...rt,[Ie]:Le,...Ie==="category"?{subcategory:"",subSubcategory:"",sizes:[]}:{},...Ie==="subcategory"?{subSubcategory:"",sizes:[]}:{}})),I(rt=>({...rt,[Ie]:""}))},pr=(ne,Ie=!1)=>{const rt=Array.from(ne).filter(ot=>ot.type.startsWith("image/")&&ot.size<=5*1024*1024);if(N.length+rt.length>Rs){s(`You can upload a maximum of ${Rs} images.`,"error");return}if(Ie&&rt.length>1){s("Please upload one image at a time.","error");return}v(ot=>[...ot,...rt]);const ft=rt.map(ot=>URL.createObjectURL(ot));k(ot=>[...ot,...ft]),I(ot=>({...ot,images:""})),ut.current&&(ut.current.value=""),je.current&&(je.current.value="")},Ps=ne=>{const Le=Array.from(ne.target.files).filter(Tt=>Tt.type.startsWith("video/")&&Tt.size<=ns);if(T.length+Le.length>ks){s(`You can upload a maximum of ${ks} video.`,"error");return}const rt=Tt=>new Promise((ft,ot)=>{const $t=document.createElement("video");$t.preload="metadata",$t.onloadedmetadata=()=>{$t.duration>Zr&&ot(new Error(`Video must be under ${Zr} seconds.`)),($t.audioTracks||[]).length>0?ot(new Error("Please upload a video without audio.")):ft(Tt)},$t.onerror=()=>ot(new Error("Error loading video metadata.")),$t.src=URL.createObjectURL(Tt)});Promise.all(Le.map(Tt=>rt(Tt))).then(Tt=>{P(ot=>[...ot,...Tt]);const ft=Tt.map(ot=>URL.createObjectURL(ot));R(ot=>[...ot,...ft]),I(ot=>({...ot,videos:""}))}).catch(Tt=>{s(Tt.message,"error")}),He.current&&(He.current.value="")},zr=ne=>pr(ne.target.files),xr=ne=>pr(ne.target.files,!0),ae=ne=>{ne.preventDefault(),ne.stopPropagation(),mt.current.classList.remove("border-blue-500"),pr(ne.dataTransfer.files)},ee=ne=>{ne.preventDefault(),ne.stopPropagation(),mt.current.classList.add("border-blue-500")},ye=ne=>{ne.preventDefault(),ne.stopPropagation(),mt.current.classList.remove("border-blue-500")},Ee=ne=>{v(Ie=>Ie.filter((Le,rt)=>rt!==ne)),k(Ie=>Ie.filter((Le,rt)=>rt!==ne)),N.length<=1&&(ut.current&&(ut.current.value=""),je.current&&(je.current.value=""))},Ke=ne=>{P(Ie=>Ie.filter((Le,rt)=>rt!==ne)),R(Ie=>Ie.filter((Le,rt)=>rt!==ne)),T.length<=1&&He.current&&(He.current.value="")},tt=ne=>{i(Ie=>{const Le=Ie.colors.includes(ne)?Ie.colors.filter(rt=>rt!==ne):[...Ie.colors,ne];return{...Ie,colors:Le}}),Q(""),ge(!1)},Mt=ne=>{const Ie=ne.target.value;if(Q(Ie),Ie.trim()===""){W([]),ge(!1);return}const Le=Fe.filter(rt=>rt.name.toLowerCase().includes(Ie.toLowerCase()));W(Le),ge(!0)},is=ne=>{if(ne.key==="Enter"&&Y.trim()){const Ie=Y.trim();if(Ie.length>20){s("Color name must be 20 characters or less.","error");return}i(Le=>{const rt=Le.colors.includes(Ie)?Le.colors:[...Le.colors,Ie];return{...Le,colors:rt}}),Q(""),W([]),ge(!1)}},Hs=ne=>{i(Ie=>({...Ie,colors:Ie.colors.filter(Le=>Le!==ne)}))},Sn=ne=>{i(Ie=>{const Le=Ie.sizes.includes(ne)?Ie.sizes.filter(rt=>rt!==ne):[...Ie.sizes,ne];return{...Ie,sizes:Le}})},en=ne=>{if(ne.key==="Enter"&&ne.target.value.trim()){const Ie=ne.target.value.trim();i(Le=>{const rt=Le.sizes.includes(Ie)?Le.sizes:[...Le.sizes,Ie];return{...Le,sizes:rt}}),ne.target.value=""}},Js=ne=>{i(Ie=>({...Ie,sizes:Ie.sizes.filter(Le=>Le!==ne)}))},yr=ne=>{i(Ie=>{const Le=Ie.tags.includes(ne)?Ie.tags.filter(rt=>rt!==ne):[...Ie.tags,ne];return{...Ie,tags:Le}})},Tr=ne=>{const Ie=Dt.current;if(!Ie)return;const Le=Ie.selectionStart,rt=Ie.selectionEnd,Tt=a.description.substring(Le,rt);let ft=a.description,ot=Le,$t=rt;ne==="bold"?Tt?(ft=ft.substring(0,Le)+`**${Tt}**`+ft.substring(rt),ot=Le+2,$t=rt+2):(ft=ft.substring(0,Le)+"****"+ft.substring(Le),ot=Le+2,$t=Le+2):ne==="italic"?Tt?(ft=ft.substring(0,Le)+`*${Tt}*`+ft.substring(rt),ot=Le+1,$t=rt+1):(ft=ft.substring(0,Le)+"**"+ft.substring(Le),ot=Le+1,$t=Le+1):ne==="code"&&(Tt?(ft=ft.substring(0,Le)+`\`${Tt}\``+ft.substring(rt),ot=Le+1,$t=rt+1):(ft=ft.substring(0,Le)+"``"+ft.substring(Le),ot=Le+1,$t=Le+1)),i(Br=>({...Br,description:ft})),setTimeout(()=>{Ie.selectionStart=ot,Ie.selectionEnd=$t,Ie.focus()},0)},Cr=()=>{const ne={};return a.sellerName.trim()||(ne.sellerName="Please enter your full name."),a.name.trim()||(ne.name="Product name is required."),(!a.price||isNaN(a.price)||a.price<=0)&&(ne.price="Enter a valid price greater than 0."),(!a.stock||isNaN(a.stock)||a.stock<0)&&(ne.stock="Enter a valid stock quantity (0 or more)."),(!a.category||!te.includes(a.category))&&(ne.category="Select a valid category."),N.length===0&&(ne.images="At least one image is required."),N.length>Rs&&(ne.images=`Maximum ${Rs} images allowed.`),T.length>ks&&(ne.videos=`Maximum ${ks} video allowed.`),a.colors.length===0&&(ne.colors="Select at least one color."),a.category==="Clothing"&&a.subcategory&&a.sizes.length===0&&(ne.sizes="Select or enter at least one size for clothing products."),a.category==="Footwear"&&a.subcategory&&a.sizes.length===0&&(ne.sizes="Select or enter at least one size for footwear products."),a.category==="Perfumes"&&a.subcategory&&a.sizes.length===0&&(ne.sizes="Select or enter at least one size for perfume products."),a.manualSize||(ne.manualSize="Please select a product size."),ne},Is=()=>({}),$i=async(ne,Ie=!1)=>{var rt,Tt,ft;const Le=new FormData;Le.append("file",ne),Le.append("isVideo",Ie);try{const $t=await Ut.post("https://foremade-backend.onrender.com/upload",Le,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4,onUploadProgress:Br=>{const aa=Math.round(Br.loaded*100/Br.total);V(aa)}});if($t.status!==200||!$t.data.url)throw new Error(`Failed to upload ${Ie?"video":"image"} to Cloudinary.`);return $t.data.url}catch(ot){throw console.error(`${Ie?"Video":"Image"} upload error:`,{message:ot.message,code:ot.code,response:(rt=ot.response)==null?void 0:rt.data}),new Error(ot.code==="ECONNABORTED"?"Request timed out. Please check your network or try again later.":ot.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network or server status.":((ft=(Tt=ot.response)==null?void 0:Tt.data)==null?void 0:ft.error)||`Failed to upload ${Ie?"video":"image"}.`)}finally{V(0)}},qi=async ne=>{if(ne.preventDefault(),I({}),h({}),E(!0),!B){s("You must be logged in to add products.","error"),E(!1),t("/login");return}const Ie=Cr(),Le=Is();if(Object.keys(Ie).length>0||Object.keys(Le).length>0){I(Ie),h(Le),E(!1),s("Please fix the form errors.","error");return}try{const rt=await Promise.all(N.map($t=>$i($t))),Tt=T.length>0?await Promise.all(T.map($t=>$i($t,!0))):[];if(rt.length===0)throw new Error("At least one image URL is required.");const ft={sellerName:a.sellerName,name:a.name,description:a.description||"",price:parseFloat(a.price),stock:parseInt(a.stock,10),category:a.category.toLowerCase(),subcategory:a.subcategory||"",subSubcategory:a.subSubcategory||"",colors:a.colors,sizes:a.sizes,condition:a.condition||"New",productUrl:a.productUrl||"",imageUrls:rt,videoUrls:Tt,tags:a.tags,sellerId:B.uid,seller:{name:a.sellerName,id:B.uid},createdAt:new Date().toISOString(),reviews:[],buyerProtectionFee:ve.buyerProtectionFee,handlingFee:ve.handlingFee,totalEstimatedPrice:ve.totalEstimatedPrice,sellerEarnings:ve.sellerEarnings,manualSize:a.manualSize,location:{country:l.country,state:l.state,city:l.city||"",address:l.address||""}},ot=await wn(Ue(J,"products"),ft);console.log("Product uploaded with ID:",ot.id),w(!0),i({sellerName:"",name:"",description:"",price:"",stock:"",category:"",subcategory:"",subSubcategory:"",colors:[],sizes:[],condition:"New",productUrl:"",images:[],videos:[],tags:[],manualSize:""}),d({country:"",state:"",city:"",address:""}),v([]),k([]),P([]),R([]),localStorage.removeItem("sellerProductForm"),localStorage.removeItem("sellerLocationForm"),localStorage.removeItem("sellerProductImages"),localStorage.removeItem("sellerProductPreviews"),localStorage.removeItem("sellerProductVideos"),localStorage.removeItem("sellerProductVideoPreviews"),ut.current&&(ut.current.value=""),je.current&&(je.current.value=""),He.current&&(He.current.value=""),W([]),ge(!1),G(!1),re(!1),ze(!1),Z({productSize:"",buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),Ce(!1)}catch(rt){console.error("Error uploading product:",{message:rt.message,stack:rt.stack,code:rt.code}),s(rt.message||"Failed to upload product.","error")}finally{E(!1)}},kn=()=>{var ne;return a.category==="Clothing"&&a.subcategory?a.subcategory==="Men"?dt:Nt:a.category==="Footwear"&&a.subcategory?Kt:a.category==="Perfumes"&&((ne=a.subSubcategory)!=null&&ne.startsWith("Oil -"))?Qs:[]};return B?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-8 max-w-4xl mx-auto",children:n.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-package text-blue-500"}),"Add a New Product"]}),n.jsxs("form",{onSubmit:qi,className:"space-y-6 sm:space-y-8",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Images (up to ",Rs,") ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Upload up to 8 images (JPEG, PNG, etc.)"})]}),n.jsxs("div",{ref:mt,onDrop:ae,onDragOver:ee,onDragLeave:ye,className:`mt-1 w-full p-4 border-2 border-dashed rounded-lg flex flex-col items-center justify-center min-h-[200px] transition-colors ${O.images?"border-red-500":"border-gray-300 hover:border-blue-500 dark:border-gray-600"} ${C?"opacity-50":""}`,children:[j.length===0?n.jsxs("div",{className:"text-center",children:[n.jsx("i",{className:"bx bx-cloud-upload text-5xl text-gray-600 dark:text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:Se?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>je.current.click(),className:"text-blue-600 hover:underline",disabled:C,children:"Upload one image"})," or ",n.jsxs("button",{type:"button",onClick:()=>ut.current.click(),className:"text-blue-600 hover:underline",disabled:C,children:["select up to ",Rs," images"]})]}):n.jsxs(n.Fragment,{children:["Drag and drop up to ",Rs," images or"," ",n.jsx("button",{type:"button",onClick:()=>ut.current.click(),className:"text-blue-600 hover:underline",disabled:C,children:"select images"})]})}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"(JPEG, JPG, PNG, WEBP, GIF, max 5MB each)"})]}):n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 w-full",children:j.map((ne,Ie)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:ne,alt:`Preview ${Ie+1}`,className:"w-full h-48 object-cover rounded-md border border-gray-200 dark:border-gray-600 cursor-pointer shadow-sm",onClick:()=>It({type:"image",src:ne})}),n.jsx("button",{type:"button",onClick:()=>Ee(Ie),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 shadow-sm",disabled:C,title:"Remove image",children:n.jsx("i",{className:"bx bx-x text-sm"})})]},Ie))}),n.jsx("input",{ref:ut,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:zr,className:"hidden",disabled:C,multiple:!0}),n.jsx("input",{ref:je,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:xr,className:"hidden",disabled:C})]}),O.images&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.images]}),Se&&j.length>0&&j.length<Rs&&n.jsx("button",{type:"button",onClick:()=>je.current.click(),className:"mt-2 text-blue-600 hover:underline text-sm",disabled:C,children:"Add another image"}),D>0&&n.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${D}%`}})})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Video (1 video, Optional)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Upload one video (MP4, MKV, WEBM, max 10MB, 30s, no audio)"})]}),n.jsxs("div",{className:`mt-1 w-full p-4 border-2 border-dashed rounded-lg flex flex-col items-center justify-center min-h-[200px] transition-colors ${O.videos?"border-red-500":"border-gray-300 hover:border-blue-500 dark:border-gray-600"} ${C?"opacity-50":""}`,children:[U.length===0?n.jsxs("div",{className:"text-center",children:[n.jsx("i",{className:"bx bx-video-plus text-5xl text-gray-600 dark:text-gray-400"}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Drag and drop a video or"," ",n.jsx("button",{type:"button",onClick:()=>He.current.click(),className:"text-blue-600 hover:underline",disabled:C,children:"select a video"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"(MP4, MKV, WEBM, max 10MB, under 30 seconds, no audio)"})]}):n.jsx("div",{className:"w-full",children:U.map((ne,Ie)=>n.jsxs("div",{className:"relative",children:[n.jsx("video",{src:ne,controls:!0,className:"w-full h-[255px] object-cover rounded-md border border-gray-200 dark:border-gray-600 cursor-pointer shadow-sm md:w-full md:h-auto",onClick:()=>It({type:"video",src:ne})}),n.jsx("button",{type:"button",onClick:()=>Ke(Ie),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 shadow-sm",disabled:C,title:"Remove video",children:n.jsx("i",{className:"bx bx-x text-sm"})})]},Ie))}),n.jsx("input",{ref:He,type:"file",accept:"video/mp4,video/mkv,video/webm",onChange:Ps,className:"hidden",disabled:C})]}),O.videos&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.videos]}),D>0&&n.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${D}%`}})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-info-circle text-blue-500"}),"Product Details"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Seller Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Your registered name"})]}),n.jsx("input",{type:"text",name:"sellerName",value:a.sellerName,placeholder:"Enter your full name",className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:!0}),O.sellerName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.sellerName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Name of the product"})]}),n.jsx("input",{type:"text",name:"name",value:a.name,onChange:as,placeholder:"e.g., Men's Leather Jacket",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),O.name&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.name]})]})]}),n.jsxs("div",{className:"mt-6 relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Description",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Describe your product with optional bold, italic, or code formatting"})]}),n.jsxs("div",{className:"mt-1",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("button",{type:"button",onClick:()=>Tr("bold"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:C,title:"Bold text (**text**)",children:n.jsx("i",{className:"bx bx-bold text-lg group-hover:text-blue-500"})}),n.jsx("button",{type:"button",onClick:()=>Tr("italic"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:C,title:"Italic text (*text*)",children:n.jsx("i",{className:"bx bx-italic text-lg group-hover:text-blue-500"})}),n.jsx("button",{type:"button",onClick:()=>Tr("code"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:C,title:"Code text (`text`)",children:n.jsx("i",{className:"bx bx-code text-lg group-hover:text-blue-500"})})]}),n.jsx("textarea",{ref:Dt,name:"description",value:a.description,onChange:as,placeholder:"e.g., **Premium leather** jacket with *stylish stitching*",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,rows:"4",disabled:C}),a.description&&n.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Preview"}),n.jsx("div",{className:"prose prose-sm dark:prose-invert",dangerouslySetInnerHTML:{__html:ct}})]})]}),O.description&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.description]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-money text-blue-500"}),"Pricing & Stock"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Price () ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Price in Naira"})]}),n.jsx("input",{type:"number",name:"price",value:a.price,onChange:as,step:"0.01",min:"0",placeholder:"e.g., 5000.00",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.price?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),O.price&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.price]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Stock Quantity ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Available stock"})]}),n.jsx("input",{type:"number",name:"stock",value:a.stock,onChange:as,min:"0",placeholder:"e.g., 10",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.stock?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),O.stock&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.stock]})]})]}),n.jsxs("div",{className:"mt-6 relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Size ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product size"})]}),n.jsxs("select",{name:"manualSize",value:a.manualSize,onChange:as,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.manualSize?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C,children:[n.jsx("option",{value:"",children:"Select a size"}),Er.map(ne=>n.jsx("option",{value:ne,children:ne},ne))]}),O.manualSize&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.manualSize]})]}),ve.productSize&&lt&&n.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-calculator text-blue-500"}),"Foremade Fees"]}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[n.jsxs("p",{children:["Category: ",n.jsx("span",{className:"font-semibold",children:ve.productSize})]}),n.jsxs("p",{className:"hidden",children:["Buyer Protection Fee (",(((Fn=lt[ve.productSize])==null?void 0:Fn.buyerProtectionRate)*100).toFixed(2),"%): ",ve.buyerProtectionFee.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsxs("p",{className:"hidden",children:["Handling Fee (",(((Ko=lt[ve.productSize])==null?void 0:Ko.handlingRate)*100).toFixed(2),"%): ",ve.handlingFee.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsxs("p",{className:"font-bold",children:["Total Estimated Price for Buyer: ",ve.totalEstimatedPrice.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsxs("p",{className:"font-bold text-green-600",children:["Your Estimated Earnings: ",ve.sellerEarnings.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Note: International shipping costs can be added separately."})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-category text-blue-500"}),"Category & Subcategory"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product category"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsxs("button",{type:"button",onClick:()=>G(!z),className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.category?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 flex justify-between items-center transition-all duration-200`,disabled:C||te.length===0,children:[n.jsx("span",{children:a.category||"Select a category"}),n.jsx("i",{className:"bx bx-chevron-down text-gray-500 dark:text-gray-400"})]}),z&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:te.length===0?n.jsx("div",{className:"p-2 text-sm text-gray-500 dark:text-gray-400",children:"No categories available"}):te.map(ne=>n.jsx("button",{type:"button",onClick:()=>{i(Ie=>({...Ie,category:ne,subcategory:"",subSubcategory:"",sizes:[]})),G(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:ne},ne))})]}),O.category&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.category]}),te.length===0&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),"Loading categories..."]})]}),a.category&&n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Subcategory ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a subcategory"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.subcategory,onChange:ne=>i(Ie=>({...Ie,subcategory:ne.target.value,subSubcategory:"",sizes:[]})),onFocus:()=>re(!0),onBlur:()=>setTimeout(()=>re(!1),200),placeholder:"Select or type a subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.subcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C||!Ae[a.category]}),X&&Ae[a.category]&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:Ae[a.category].filter(ne=>ne.toLowerCase().includes(a.subcategory.toLowerCase())).map(ne=>n.jsx("button",{type:"button",onClick:()=>{i(Ie=>({...Ie,subcategory:ne,subSubcategory:"",sizes:[]})),re(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:ne},ne))}),!Ae[a.category]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),"Loading subcategories..."]}),O.subcategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.subcategory]})]})]}),a.subcategory&&((Xo=Ve[a.category])==null?void 0:Xo[a.subcategory])&&n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Sub-Subcategory ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a sub-subcategory"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.subSubcategory,onChange:ne=>i(Ie=>({...Ie,subSubcategory:ne.target.value,sizes:[]})),onFocus:()=>ze(!0),onBlur:()=>setTimeout(()=>ze(!1),200),placeholder:"Select or type a sub-subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.subSubcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C||!((wa=Ve[a.category])!=null&&wa[a.subcategory])}),xe&&((Qo=Ve[a.category])==null?void 0:Qo[a.subcategory])&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:Ve[a.category][a.subcategory].filter(ne=>ne.toLowerCase().includes(a.subSubcategory.toLowerCase())).map(ne=>n.jsx("button",{type:"button",onClick:()=>{i(Ie=>({...Ie,subSubcategory:ne,sizes:[]})),ze(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:ne},ne))}),O.subSubcategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.subSubcategory]})]})]})]})]}),(a.category==="Clothing"||a.category==="Footwear"||a.category==="Perfumes")&&a.subcategory&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-ruler text-blue-500"}),"Sizes"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Sizes ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or enter sizes"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:kn().map(ne=>n.jsx("button",{type:"button",onClick:()=>Sn(ne),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.sizes.includes(ne)?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${C?"opacity-50 cursor-not-allowed":""}`,disabled:C,children:ne},ne))}),n.jsx("div",{className:"relative mt-2",children:n.jsx("input",{type:"text",placeholder:"Enter custom size (e.g., Size 35) and press Enter",onKeyDown:en,className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.sizes?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C})}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.sizes.map(ne=>n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[n.jsx("span",{children:ne}),n.jsx("button",{type:"button",onClick:()=>Js(ne),className:"text-red-500 hover:text-red-700",disabled:C,title:"Remove size",children:n.jsx("i",{className:"bx bx-x"})})]},ne))}),O.sizes&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.sizes]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-color-fill text-blue-500"}),"Colors"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Colors ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or enter colors"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-2",children:a.colors.map(ne=>{const Ie=Fe.find(Le=>Le.name.toLowerCase()===ne.toLowerCase());return n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[n.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Ie?Ie.hex:"#ccc"}}),n.jsx("span",{children:ne}),n.jsx("button",{type:"button",onClick:()=>Hs(ne),className:"text-red-500 hover:text-red-700",disabled:C,title:"Remove color",children:n.jsx("i",{className:"bx bx-x"})})]},ne)})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:Y,onChange:Mt,onKeyDown:is,onFocus:()=>Y.trim()&&ge(!0),onBlur:()=>setTimeout(()=>ge(!1),200),placeholder:"Type a color and press Enter (e.g., Navy)",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.colors?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),de&&H.length>0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md z-10 max-h-40 overflow-y-auto",children:H.map(ne=>n.jsxs("button",{type:"button",onMouseDown:()=>tt(ne.name),className:"flex items-center w-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",disabled:C,children:[n.jsx("span",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:ne.hex}}),ne.name]},ne.name))})]}),O.colors&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.colors]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-purchase-tag text-blue-500"}),"Tags"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tags (Optional)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Add tags to improve product discoverability"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.tags.join(", "),onChange:ne=>{const Ie=ne.target.value.split(",").map(Le=>Le.trim()).filter(Le=>Le);i(Le=>({...Le,tags:Ie}))},placeholder:"e.g., Vintage, Leather, Smartphone",className:"w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:C}),Et.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Suggested Tags:"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:Et.map(ne=>n.jsx("button",{type:"button",onClick:()=>yr(ne),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.tags.includes(ne)?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${C?"opacity-50 cursor-not-allowed":""}`,disabled:C,children:ne},ne))})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-star text-blue-500"}),"Condition"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Condition ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select the condition of the product"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["New","Used","Refurbished"].map(ne=>n.jsx("button",{type:"button",onClick:()=>i(Ie=>({...Ie,condition:ne})),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.condition===ne?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${C?"opacity-50 cursor-not-allowed":""}`,disabled:C,children:ne},ne))}),O.condition&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.condition]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-link text-blue-500"}),"Product URL (Optional)"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["External Product URL",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Link to external product page (optional)"})]}),n.jsx("input",{type:"url",name:"productUrl",value:a.productUrl,onChange:as,placeholder:"e.g., https://example.com/product",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${O.productUrl?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:C}),O.productUrl&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),O.productUrl]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-map text-blue-500"}),"Location"]}),n.jsx(bx,{locationData:l,setLocationData:d,errors:u,disabled:C})]}),n.jsx("div",{className:"flex justify-end mt-8",children:n.jsx("button",{type:"submit",className:`flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition-colors text-sm font-medium ${C?"opacity-50 cursor-not-allowed":""}`,disabled:C,children:C?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bx bx-loader bx-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bx bx-upload"}),"Add Product"]})})})]})]}),n.jsx(Cre,{alerts:e,removeAlert:r}),n.jsx(vx,{isOpen:x,onClose:()=>{w(!1)},message:"Product added successfully!",icon:"bx-check-circle",type:"success",showYesNoButtons:!1}),nt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:n.jsxs("div",{className:"relative max-w-4xl w-full",children:[nt.type==="image"?n.jsx("img",{src:nt.src,alt:"Zoomed media",className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}):n.jsx("video",{src:nt.src,controls:!0,className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}),n.jsx("button",{onClick:()=>It(null),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",title:"Close",children:n.jsx("i",{className:"bx bx-x text-xl"})})]})})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]})}function Pre(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(""),[l,d]=_.useState(""),[u,h]=_.useState(!1),[f,p]=_.useState(null),x=_.useCallback(Vj(v=>{d(v)},300),[]);_.useEffect(()=>{(async()=>{try{Sd(we,async j=>{if(j)try{const k=Rt(Ue(J,"products"),ht("sellerId","==",j.uid)),P=(await yt(k)).docs.map(U=>{const R=U.data(),O=Array.isArray(R.imageUrls)?R.imageUrls.filter(E=>typeof E=="string"&&E.startsWith("https://res.cloudinary.com/")):R.imageUrl&&typeof R.imageUrl=="string"&&R.imageUrl.startsWith("https://res.cloudinary.com/")?[R.imageUrl]:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"],I=Array.isArray(R.videoUrls)?R.videoUrls.filter(E=>typeof E=="string"&&E.startsWith("https://res.cloudinary.com/")):[],C=Array.isArray(R.variants)?R.variants:[];return{id:U.id,...R,imageUrls:O.length>0?O:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"],videoUrls:I,variants:C,uploadDate:R.uploadDate?R.uploadDate.toDate():new Date}});e(P)}catch(k){i("Failed to fetch products: "+k.message)}else i("Please log in to view your products.");r(!1)})}catch(j){i("Authentication error: "+j.message),r(!1)}})()},[]);const w=t.filter(v=>{var j;return(j=v.name)==null?void 0:j.toLowerCase().includes(l.toLowerCase())}),N=()=>window.location.reload();return s?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-5xl",children:Array.from({length:6}).map((v,j)=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-md animate-pulse h-64"},j))})})]}):a?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 to-gray-50",children:n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-lg",children:[n.jsx("p",{className:"text-red-700 text-base mb-4",children:a}),n.jsx(ue,{to:"/seller/login",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Return to Login"})]})}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Ls,{}),n.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 md:gap-6 mb-8 p-4 sm:p-6 md:p-8 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100 shadow-sm",children:[n.jsx(UK,{className:"w-8 h-8 text-blue-600 mb-2 md:mb-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-blue-900 flex items-center gap-3 flex-wrap",children:["Product Gallery",n.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-base md:text-lg font-semibold px-3 py-1 rounded-full ml-2",children:[t.length," ",t.length===1?"Product":"Products"]})]}),n.jsx("p",{className:"text-gray-500 text-sm md:text-base mt-1",children:"Explore your uploaded products with images and videos."})]}),n.jsx("button",{onClick:N,title:"Refresh",className:"ml-0 md:ml-auto bg-white border border-blue-200 rounded-full p-2 md:p-3 hover:bg-blue-100 transition focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 mt-2 md:mt-0",children:n.jsx(E6,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600"})}),n.jsxs(ue,{to:"/products-upload",className:"hidden sm:flex bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 md:px-10 md:py-5 rounded-xl hover:from-blue-700 hover:to-purple-700 transition duration-300 items-center gap-3 shadow-xl focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 ml-4 font-bold text-lg md:text-xl animate-none hover:animate-pulseBtn",children:[n.jsx(a0,{className:"w-7 h-7 md:w-8 md:h-8"})," ",n.jsx("span",{children:"Add New Product"})]})]}),n.jsxs(ue,{to:"/products-upload",className:"sm:hidden fixed bottom-8 right-4 md:bottom-12 md:right-12 z-50 rounded-full bg-gradient-to-br from-blue-600 via-purple-500 to-pink-500 text-white p-7 shadow-2xl hover:from-blue-700 hover:to-pink-600 transition focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 flex items-center justify-center animate-pulseBtn",title:"Add New Product","aria-label":"Add New Product",tabIndex:0,children:[n.jsx(Uj,{className:"w-12 h-12 font-bold"}),n.jsx("span",{className:"sr-only",children:"Add New Product"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 max-w-full overflow-x-auto",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative w-full max-w-md",children:[n.jsx("input",{type:"text",value:l,onChange:v=>x(v.target.value),placeholder:"Search by product name...",className:"w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-search"})})]})}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.length>0?w.map(v=>{var k,T,P,U;const j=((k=v.variants)==null?void 0:k.length)>0&&((T=v.variants[0].imageUrls)==null?void 0:T.length)>0?v.variants[0].imageUrls[0]:v.imageUrls[0];return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-md hover:shadow-xl transition duration-300 animate-slide-in focus:ring-2 focus:ring-blue-300 outline-none cursor-pointer group",tabIndex:0,onClick:()=>{h(!0),p(v)},title:"View product media",children:[n.jsxs("div",{className:"relative aspect-[4/3] mb-4 overflow-hidden",children:[j?n.jsx("img",{src:j,alt:v.name||"Product Image",className:"w-full h-full object-cover rounded-lg group-hover:scale-105 transition-transform duration-300 hover:opacity-90",onError:R=>{R.target.style.display="none",R.target.parentElement.innerHTML='<div class="absolute w-full h-full bg-gray-200 rounded-lg flex items-center justify-center"><span class="text-gray-500">Image N/A</span></div>'}}):n.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-gray-500",children:"Image N/A"})}),v.videoUrls[0]&&n.jsx(RX,{className:"absolute bottom-2 right-2 w-8 h-8 text-blue-600 bg-white rounded-full p-1 shadow",title:"Video available"})]}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 truncate",children:v.name||"Unnamed Product"}),n.jsxs("p",{className:"text-gray-600 text-sm mb-1",children:["Price: ",((P=v.variants)==null?void 0:P.length)>0?`${Math.min(...v.variants.map(R=>R.price||0)).toLocaleString("en-NG")} - ${Math.max(...v.variants.map(R=>R.price||0)).toLocaleString("en-NG")}`:`${(v.price||0).toLocaleString("en-NG")}`]}),n.jsxs("p",{className:"text-gray-600 text-sm mb-1",children:["Variants: ",((U=v.variants)==null?void 0:U.length)||0]}),n.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${v.status==="pending"?"bg-orange-100 text-orange-800":v.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.status==="pending"?"Pending":v.status==="approved"?"Approved":"Not Approved"}),n.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Uploaded: ",v.uploadDate.toLocaleDateString("en-NG",{day:"2-digit",month:"short",year:"numeric"})]}),n.jsxs(ue,{to:`/seller/edit-product/${v.id}`,className:"mt-4 inline-flex items-center gap-1 px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"Edit Product",children:[n.jsx(Ld,{className:"w-4 h-4"})," Edit"]})]},v.id)}):n.jsxs("div",{className:"flex flex-col items-center justify-center mt-10 mb-10 animate-slide-in col-span-full",children:[n.jsx(Ul,{className:"w-24 h-24 mb-4 text-blue-200"}),n.jsxs("p",{className:"text-gray-600 text-center text-lg",children:["No products uploaded yet.",n.jsx("br",{}),"Start by adding your first product!"]}),n.jsxs(ue,{to:"/products-upload",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center gap-2 shadow-lg focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 mt-4",children:[n.jsx(a0,{className:"w-5 h-5"})," Add Your First Product"]})]})})]}),u&&f&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 animate-fade-in overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-4 sm:p-6 max-w-lg w-full relative mx-auto",children:[n.jsx("button",{onClick:()=>h(!1),className:"absolute top-2 right-2 bg-gray-100 hover:bg-gray-200 rounded-full p-2 focus:outline-blue-400",title:"Close",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 truncate",children:f.name||"Unnamed Product"}),f.imageUrls&&f.imageUrls.length>0&&n.jsx("img",{src:f.imageUrls[0],alt:f.name||"Product Image",className:"w-full h-64 object-cover rounded-lg mb-4"}),f.videoUrls&&f.videoUrls.length>0&&n.jsx("video",{src:f.videoUrls[0],controls:!0,className:"w-full h-64 rounded-lg"}),n.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Price: ",f.price||0]}),n.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${f.status==="pending"?"bg-orange-100 text-orange-800":f.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.status==="pending"?"Pending":f.status==="approved"?"Approved":"Not Approved"}),n.jsx("button",{onClick:()=>h(!1),className:"mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition focus:outline-blue-400 focus:ring-2 focus:ring-blue-300",children:"Close"})]})}),n.jsx("style",{children:`
          @keyframes slide-in {
            from { opacity: 0; transform: translateY(32px); }
            to { opacity: 1; transform: none; }
          }
          .animate-slide-in {
            animation: slide-in 0.7s cubic-bezier(0.4,0,0.2,1);
          }
          @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          .animate-fade-in {
            animation: fade-in 0.5s cubic-bezier(0.4,0,0.2,1);
          }
          @keyframes pulseBtn {
            0%, 100% { box-shadow: 0 0 0 0 rgba(124,58,237,0.4), 0 8px 32px 0 rgba(30,58,138,0.18); }
            50% { box-shadow: 0 0 0 12px rgba(124,58,237,0.15), 0 8px 32px 0 rgba(30,58,138,0.18); }
          }
          .animate-pulseBtn {
            animation: pulseBtn 1.2s infinite;
          }
        `})]})]})}function Ire(){return n.jsx("div",{children:"This page feches all transactions made by the seller."})}Ut.defaults.timeout=6e4;function Dre({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Mre(){const[t,e]=_.useState([]),s=_.useCallback((a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},[]),r=_.useCallback(a=>{e(i=>i.filter(l=>l.id!==a))},[]);return{alerts:t,addAlert:s,removeAlert:r}}function Ore(){const t=Ns(),{alerts:e,addAlert:s,removeAlert:r}=Mre(),[a,i]=_.useState({sellerName:"",name:"",description:"",category:"",subcategory:"",subSubcategory:"",colors:[],condition:"New",productUrl:"",tags:[],manualSize:""}),[l,d]=_.useState({country:"",state:"",city:"",address:""}),[u,h]=_.useState([{color:"",size:"",price:"",stock:"",images:[]}]),[f,p]=_.useState([[]]),[x,w]=_.useState([[]]),[N,v]=_.useState({}),[j,k]=_.useState({}),[T,P]=_.useState(!1),[U,R]=_.useState(0),[O,I]=_.useState(null),[C,E]=_.useState(""),[D,V]=_.useState([]),[B,M]=_.useState(!1),[Y,Q]=_.useState(!1),[H,W]=_.useState(!1),[de,ge]=_.useState(!1),[z,G]=_.useState(!1),[X,re]=_.useState([]),[xe,ze]=_.useState({}),[me,Ce]=_.useState({}),[ve,Z]=_.useState([]),[Se,Te]=_.useState(null),[te,Oe]=_.useState(null),[Ae,qe]=_.useState(""),Ve=_.useRef([]),Xe=_.useRef([]),Et=_.useRef(null),Qe=4,nt=_.useMemo(()=>[{name:"Red",hex:"#ff0000"},{name:"Orange",hex:"#FFA500"},{name:"Blue",hex:"#0000ff"},{name:"Green",hex:"#008000"},{name:"Brown",hex:"#8b4513"},{name:"Black",hex:"#000000"},{name:"White",hex:"#ffffff"},{name:"Purple",hex:"#800080"},{name:"Pink",hex:"#ffc1cc"},{name:"Gray",hex:"#808080"},{name:"Yellow",hex:"#FFFF00"},{name:"Gold",hex:"#ff9a1d"},{name:"Silver",hex:"#e2f2ec"}],[]),It=_.useMemo(()=>["S","M","L","XL","XXL"],[]),lt=_.useMemo(()=>["3","4","6","8","10","12","14","16","18","20"],[]),xt=_.useMemo(()=>['3"','5"','5.5"','6"','6.5"','7"','7.5"','8"','8.5"','9"','9.5"','10"','10.5"','11"','11.5"','12"','12.5"'],[]),ct=_.useMemo(()=>["30ml","50ml","60ml","75ml","100ml"],[]),it=_.useMemo(()=>["Small","Medium","Large","X-Large"],[]);_.useEffect(()=>{Ve.current=Array(u.length).fill().map(()=>({current:null})),Xe.current=Array(u.length).fill().map(()=>({current:null}))},[u.length]),_.useEffect(()=>()=>{x.forEach(ae=>ae.forEach(ee=>URL.revokeObjectURL(ee)))},[x]),_.useEffect(()=>{const ae=ws(Ue(J,"categories"),Ke=>{const tt=Ke.docs.map(Mt=>({id:Mt.id,...Mt.data()}));re(tt.map(Mt=>Mt.name))},Ke=>{console.error("Error fetching categories:",Ke),s("Failed to load categories.","error")}),ee=ws(Ue(J,"customSubcategories"),Ke=>{const tt={};Ke.forEach(Mt=>{tt[Mt.id]=Mt.data().subcategories||[]}),ze(tt)},Ke=>{console.error("Error fetching subcategories:",Ke),s("Failed to load subcategories.","error")}),ye=ws(Ue(J,"customSubSubcategories"),Ke=>{const tt={};Ke.forEach(Mt=>{const is=Mt.id,Hs=Mt.data();tt[is]={},Object.entries(Hs).forEach(([Sn,en])=>{tt[is][Sn]=Array.isArray(en)?en:[]})}),Ce(tt)},Ke=>{console.error("Error fetching sub-subcategories:",Ke),s("Failed to load sub-subcategories.","error")});return(async()=>{try{const Ke=_e(J,"feeConfigurations","categoryFees"),tt=await Ge(Ke);tt.exists()?Oe(tt.data()):s("No fee configurations found.","error")}catch(Ke){console.error("Error fetching fee configurations:",Ke),s("Failed to load fee configurations.","error")}})(),()=>{ae(),ee(),ye()}},[s]),_.useEffect(()=>{var ae,ee,ye;a.category&&!X.includes(a.category)&&(i(Ee=>({...Ee,category:"",subcategory:"",subSubcategory:""})),s("Selected category was removed by admin.","error")),a.subcategory&&!((ae=xe[a.category])!=null&&ae.includes(a.subcategory))&&(i(Ee=>({...Ee,subcategory:"",subSubcategory:""})),s("Selected subcategory was removed by admin.","error")),a.subSubcategory&&!((ye=(ee=me[a.category])==null?void 0:ee[a.subcategory])!=null&&ye.includes(a.subSubcategory))&&(i(Ee=>({...Ee,subSubcategory:""})),s("Selected sub-subcategory was removed by admin.","error"))},[X,xe,me,a,s]),_.useEffect(()=>{const ae=we.onAuthStateChanged(ee=>{if(ee){I(ee);try{let ye=ee.displayName||"";ye&&ye.startsWith("{")&&(ye=JSON.parse(ye).name||""),i(Ee=>({...Ee,sellerName:ye}))}catch(ye){console.error("Error parsing displayName:",ye),s("Failed to load seller profile.","error")}}else s("Please log in to add products.","error"),t("/login")});return()=>ae()},[t,s]),_.useEffect(()=>{qe(us(a.description||"",{gfm:!0,breaks:!0}))},[a.description]),_.useEffect(()=>{(()=>{const ee=`${a.name} ${a.description} ${a.subSubcategory}`.toLowerCase(),ye=[];ee.includes("leather")&&ye.push("Leather"),(ee.includes("shoe")||ee.includes("footwear"))&&ye.push("Footwear"),(ee.includes("phone")||ee.includes("mobile"))&&ye.push("Smartphone"),ee.includes("fashion")&&ye.push("Fashion"),ee.includes("vintage")&&ye.push("Vintage"),ee.includes("smart")&&ye.push("Smart"),Z(ye.filter(Ee=>!a.tags.includes(Ee)))})()},[a.name,a.description,a.subSubcategory]);const Je=_.useCallback(()=>{const ae=ks().length>0?ks()[0]:"";h(ee=>[...ee,{color:"",size:ae,price:"",stock:"",images:[]}]),p(ee=>[...ee,[]]),w(ee=>[...ee,[]]),Ve.current.push({current:null}),Xe.current.push({current:null})},[]),Ye=_.useCallback(ae=>{h(ee=>ee.filter((ye,Ee)=>Ee!==ae)),p(ee=>ee.filter((ye,Ee)=>Ee!==ae)),w(ee=>((ee[ae]||[]).forEach(Ee=>URL.revokeObjectURL(Ee)),ee.filter((Ee,Ke)=>Ke!==ae))),Ve.current.splice(ae,1),Xe.current.splice(ae,1)},[]),Ze=_.useCallback((ae,ee,ye)=>{h(Ee=>Ee.map((Ke,tt)=>tt===ae?{...Ke,[ee]:ye}:Ke))},[]),ut=_.useCallback((ae,ee)=>{var Ee,Ke;const ye=Array.from(ee).filter(tt=>tt.type.startsWith("image/")&&tt.size<=5242880);if((((Ee=f[ae])==null?void 0:Ee.length)||0)+ye.length>Qe){s(`Maximum ${Qe} images allowed per variant.`,"error");return}p(tt=>{const Mt=[...tt];return Mt[ae]=[...Mt[ae]||[],...ye],Mt}),w(tt=>{const Mt=[...tt];return Mt[ae]=[...Mt[ae]||[],...ye.map(is=>URL.createObjectURL(is))],Mt}),(Ke=Xe.current[ae])!=null&&Ke.current&&(Xe.current[ae].current.value="")},[f,s]),je=_.useCallback((ae,ee)=>{p(ye=>{const Ee=[...ye];return Ee[ae]=Ee[ae].filter((Ke,tt)=>tt!==ee),Ee}),w(ye=>{const Ee=[...ye],Ke=Ee[ae][ee];return Ee[ae]=Ee[ae].filter((tt,Mt)=>Mt!==ee),URL.revokeObjectURL(Ke),Ee})},[]),He=_.useCallback((ae,ee)=>{var ye;ae.preventDefault(),ae.stopPropagation(),(ye=Ve.current[ee])!=null&&ye.current&&Ve.current[ee].current.classList.remove("border-blue-500"),ut(ee,ae.dataTransfer.files)},[ut]),mt=_.useCallback((ae,ee)=>{var ye;ae.preventDefault(),ae.stopPropagation(),(ye=Ve.current[ee])!=null&&ye.current&&Ve.current[ee].current.classList.add("border-blue-500")},[]),Dt=_.useCallback((ae,ee)=>{var ye;ae.preventDefault(),ae.stopPropagation(),(ye=Ve.current[ee])!=null&&ye.current&&Ve.current[ee].current.classList.remove("border-blue-500")},[]),Fe=_.useCallback(ae=>{const{name:ee,value:ye}=ae.target;i(Ee=>({...Ee,[ee]:ye,...ee==="category"?{subcategory:"",subSubcategory:""}:{},...ee==="subcategory"?{subSubcategory:""}:{}})),k(Ee=>({...Ee,[ee]:""}))},[]),dt=_.useCallback(ae=>{i(ee=>{const ye=ee.colors.includes(ae)?ee.colors.filter(Ee=>Ee!==ae):[...ee.colors,ae];return{...ee,colors:ye}}),E(""),M(!1)},[]),Nt=_.useCallback(ae=>{const ee=ae.target.value;if(E(ee),ee.trim()===""){V([]),M(!1);return}const ye=nt.filter(Ee=>Ee.name.toLowerCase().includes(ee.toLowerCase()));V(ye),M(!0)},[nt]),Kt=_.useCallback(ae=>{if(ae.key==="Enter"&&C.trim()){const ee=C.trim();if(ee.length>20){s("Color name must be 20 characters or less.","error");return}i(ye=>{const Ee=ye.colors.includes(ee)?ye.colors:[...ye.colors,ee];return{...ye,colors:Ee}}),E(""),V([]),M(!1)}},[C,s]),Qs=_.useCallback(ae=>{i(ee=>({...ee,colors:ee.colors.filter(ye=>ye!==ae)}))},[]),Er=_.useCallback(ae=>{i(ee=>{const ye=ee.tags.includes(ae)?ee.tags.filter(Ee=>Ee!==ae):[...ee.tags,ae];return{...ee,tags:ye}})},[]),Rs=_.useCallback(ae=>{const ee=Et.current;if(!ee)return;const ye=ee.selectionStart,Ee=ee.selectionEnd,Ke=a.description.substring(ye,Ee);let tt=a.description,Mt=ye,is=Ee;ae==="bold"?Ke?(tt=tt.substring(0,ye)+`**${Ke}**`+tt.substring(Ee),Mt=ye+2,is=Ee+2):(tt=tt.substring(0,ye)+"****"+tt.substring(ye),Mt=ye+2,is=ye+2):ae==="italic"?Ke?(tt=tt.substring(0,ye)+`*${Ke}*`+tt.substring(Ee),Mt=ye+1,is=Ee+1):(tt=tt.substring(0,ye)+"**"+tt.substring(ye),Mt=ye+1,is=ye+1):ae==="code"&&(Ke?(tt=tt.substring(0,ye)+`\`${Ke}\``+tt.substring(Ee),Mt=ye+1,is=Ee+1):(tt=tt.substring(0,ye)+"``"+tt.substring(ye),Mt=ye+1,is=ye+1)),i(Hs=>({...Hs,description:tt})),setTimeout(()=>{ee.selectionStart=Mt,ee.selectionEnd=is,ee.focus()},0)},[a.description]),ks=_.useMemo(()=>()=>{var ae;return a.category==="Clothing"&&a.subcategory?a.subcategory==="Men"?It:lt:a.category==="Footwear"&&a.subcategory?xt:a.category==="Perfumes"&&((ae=a.subSubcategory)!=null&&ae.startsWith("Oil -"))?ct:[]},[a.category,a.subcategory,a.subSubcategory]),ns=_.useCallback(()=>{var ee,ye,Ee;const ae={};return a.sellerName.trim()||(ae.sellerName="Please enter your full name."),a.name.trim()||(ae.name="Product name is required."),(!a.category||!X.includes(a.category))&&(ae.category="Select a valid category."),(!a.subcategory||!((ee=xe[a.category])!=null&&ee.includes(a.subcategory)))&&(ae.subcategory="You are free man."),((Ee=(ye=me[a.category])==null?void 0:ye[a.subcategory])==null?void 0:Ee.length)>0&&!a.subSubcategory&&(ae.subSubcategory="Select a sub-subcategory."),a.colors.length===0&&(ae.colors="Select at least one color."),a.manualSize||(ae.manualSize="Please select a product size."),u.length===0&&(ae.variants="At least one variant is required."),u.forEach((Ke,tt)=>{var Mt;Ke.color.trim()||(ae[`variant${tt}_color`]="Color is required."),!Ke.size&&ks().length>0&&(ae[`variant${tt}_size`]="Size is required."),(!Ke.price||isNaN(Ke.price)||parseFloat(Ke.price)<=0)&&(ae[`variant${tt}_price`]="Enter a valid price greater than 0."),(!Ke.stock||isNaN(Ke.stock)||parseInt(Ke.stock,10)<0)&&(ae[`variant${tt}_stock`]="Enter a valid stock quantity (0 or more)."),(((Mt=f[tt])==null?void 0:Mt.length)||0)===0&&(ae[`variant${tt}_images`]="At least one image is required per variant.")}),ae},[a,u,X,xe,me,f,ks]),Zr=_.useCallback(()=>{const ae={};return l.country.trim()||(ae.country="Country is required."),l.state.trim()||(ae.state="State is required."),ae},[l]),as=_.useCallback(async ae=>{var ye,Ee;const ee=new FormData;ee.append("file",ae),ee.append("isVideo",!1);try{const tt=await Ut.post("https://foremade-backend.onrender.com/upload",ee,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:Mt=>{const is=Math.round(Mt.loaded*100/Mt.total);R(is)}});if(tt.status!==200||!tt.data.url)throw new Error("Failed to upload image to Cloudinary.");return tt.data.url}catch(Ke){throw new Error(Ke.code==="ECONNABORTED"?"Request timed out. Please check your network or try again later.":Ke.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network or server status.":((Ee=(ye=Ke.response)==null?void 0:ye.data)==null?void 0:Ee.error)||"Failed to upload image.")}finally{R(0)}},[]),pr=_.useCallback(async ae=>{var Ee,Ke,tt,Mt;if(ae.preventDefault(),k({}),v({}),P(!0),!O){s("You must be logged in to add products.","error"),P(!1),t("/login");return}const ee=ns(),ye=Zr();if(Object.keys(ee).length>0||Object.keys(ye).length>0){k(ee),v(ye),P(!1),Object.entries(ee).forEach(([is,Hs])=>s(Hs,"error")),Object.entries(ye).forEach(([is,Hs])=>s(Hs,"error"));return}try{const is=await Promise.all(f.map(async Js=>Promise.all(Js.map(yr=>as(yr))))),Hs=u.reduce((Js,yr)=>{const Tr=parseFloat(yr.price);return isNaN(Tr)?Js:Math.min(Js,Tr)},1/0),Sn={sellerName:a.sellerName,name:a.name,description:a.description||"",category:a.category.toLowerCase(),subcategory:a.subcategory||"",subSubcategory:a.subSubcategory||"",colors:a.colors,condition:a.condition||"New",productUrl:a.productUrl||"",tags:a.tags,sellerId:O.uid,seller:{name:a.sellerName,id:O.uid},createdAt:new Date().toISOString(),reviews:[],variants:u.map((Js,yr)=>({...Js,price:parseFloat(Js.price),stock:parseInt(Js.stock,10),imageUrls:is[yr]||[]})),location:{country:l.country,state:l.state,city:l.city||"",address:l.address||""},buyerProtectionFee:((Ee=te==null?void 0:te[a.category])==null?void 0:Ee.buyerProtectionRate)*Hs||0,handlingFee:((Ke=te==null?void 0:te[a.category])==null?void 0:Ke.handlingRate)*Hs||0,totalEstimatedPrice:Hs+(((tt=te==null?void 0:te[a.category])==null?void 0:tt.buyerProtectionRate)*Hs||0)+(((Mt=te==null?void 0:te[a.category])==null?void 0:Mt.handlingRate)*Hs||0),sellerEarnings:Hs,manualSize:a.manualSize},en=await wn(Ue(J,"products"),Sn);console.log("Product with variants uploaded with ID:",en.id),G(!0),i({sellerName:"",name:"",description:"",category:"",subcategory:"",subSubcategory:"",colors:[],condition:"New",productUrl:"",tags:[],manualSize:""}),d({country:"",state:"",city:"",address:""}),h([{color:"",size:"",price:"",stock:"",images:[]}]),p([[]]),w([[]]),Ve.current=[{current:null}],Xe.current=[{current:null}],V([]),M(!1),Q(!1),W(!1),ge(!1)}catch(is){console.error("Error uploading product:",is),s(is.message||"Failed to upload product variants.","error")}finally{P(!1)}},[O,a,l,u,f,te,ns,Zr,as,s,t]),Ps=_.useMemo(()=>X,[X]),zr=_.useMemo(()=>xe[a.category]||[],[xe,a.category]),xr=_.useMemo(()=>{var ae;return((ae=me[a.category])==null?void 0:ae[a.subcategory])||[]},[me,a.category,a.subcategory]);return O?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-package text-blue-500"}),"Add Product with Variants"]}),n.jsxs("form",{onSubmit:pr,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-info-circle text-blue-500"}),"Product Details"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Seller Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Your registered name"})]}),n.jsx("input",{type:"text",name:"sellerName",value:a.sellerName,placeholder:"Enter your full name",className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:!0}),j.sellerName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.sellerName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Name of the product"})]}),n.jsx("input",{type:"text",name:"name",value:a.name,onChange:Fe,placeholder:"e.g., Men's Leather Jacket",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),j.name&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.name]})]})]}),n.jsxs("div",{className:"mt-6 relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Description",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Describe your product with optional bold, italic, or code formatting"})]}),n.jsxs("div",{className:"mt-1",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("button",{type:"button",onClick:()=>Rs("bold"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:T,title:"Bold text (**text**)",children:n.jsx("i",{className:"bx bx-bold text-lg group-hover:text-blue-500"})}),n.jsx("button",{type:"button",onClick:()=>Rs("italic"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:T,title:"Italic text (*text*)",children:n.jsx("i",{className:"bx bx-italic text-lg group-hover:text-blue-500"})}),n.jsx("button",{type:"button",onClick:()=>Rs("code"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:T,title:"Code text (`text`)",children:n.jsx("i",{className:"bx bx-code text-lg group-hover:text-blue-500"})})]}),n.jsx("textarea",{ref:Et,name:"description",value:a.description,onChange:Fe,placeholder:"e.g., Premium leather jacket with stylish stitching",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,rows:"4",disabled:T}),a.description&&n.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Preview"}),n.jsx("div",{className:"prose prose-sm dark:prose-invert",dangerouslySetInnerHTML:{__html:Ae}})]})]}),j.description&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.description]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-category text-blue-500"}),"Category & Subcategory"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product category"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsxs("button",{type:"button",onClick:()=>Q(!Y),className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j.category?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 flex justify-between items-center transition-all duration-200`,disabled:T||Ps.length===0,children:[n.jsx("span",{children:a.category||"Select a category"}),n.jsx("i",{className:"bx bx-chevron-down text-gray-500 dark:text-gray-400"})]}),Y&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:Ps.length===0?n.jsx("div",{className:"p-2 text-sm text-gray-500 dark:text-gray-400",children:"No categories available"}):Ps.map(ae=>n.jsx("button",{type:"button",onClick:()=>{i(ee=>({...ee,category:ae,subcategory:"",subSubcategory:""})),Q(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:ae},ae))})]}),j.category&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.category]}),Ps.length===0&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),"Loading categories..."]})]}),a.category&&n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Subcategory ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a subcategory"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.subcategory,onChange:ae=>{i(ee=>({...ee,subcategory:ae.target.value,subSubcategory:""})),W(!0)},onFocus:()=>W(!0),onBlur:()=>setTimeout(()=>W(!1),200),placeholder:"Select or type a subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j.subcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T||!zr.length}),H&&zr.length>0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:zr.filter(ae=>ae.toLowerCase().includes(a.subcategory.toLowerCase())).map(ae=>n.jsx("button",{type:"button",onClick:()=>{i(ee=>({...ee,subcategory:ae,subSubcategory:""})),W(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:ae},ae))}),j.subcategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.subcategory]})]})]}),a.subcategory&&xr.length>0&&n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Sub-Subcategory ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a sub-subcategory"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.subSubcategory,onChange:ae=>i(ee=>({...ee,subSubcategory:ae.target.value})),onFocus:()=>ge(!0),onBlur:()=>setTimeout(()=>ge(!1),200),placeholder:"Select or type a sub-subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j.subSubcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),de&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:xr.filter(ae=>ae.toLowerCase().includes(a.subSubcategory.toLowerCase())).map(ae=>n.jsx("button",{type:"button",onClick:()=>{i(ee=>({...ee,subSubcategory:ae})),ge(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:ae},ae))}),j.subSubcategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.subSubcategory]})]})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-color-fill text-blue-500"}),"Colors"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Colors ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or enter colors"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-2",children:a.colors.map(ae=>{const ee=nt.find(ye=>ye.name.toLowerCase()===ae.toLowerCase());return n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[n.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ee?ee.hex:"#ccc"}}),n.jsx("span",{children:ae}),n.jsx("button",{type:"button",onClick:()=>Qs(ae),className:"text-red-500 hover:text-red-700",disabled:T,title:"Remove color",children:n.jsx("i",{className:"bx bx-x"})})]},ae)})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:C,onChange:Nt,onKeyDown:Kt,onFocus:()=>C.trim()&&M(!0),onBlur:()=>setTimeout(()=>M(!1),200),placeholder:"Type a color and press Enter (e.g., Navy)",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j.colors?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),B&&D.length>0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md z-10 max-h-40 overflow-y-auto",children:D.map(ae=>n.jsxs("button",{type:"button",onMouseDown:()=>dt(ae.name),className:"flex items-center w-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",disabled:T,children:[n.jsx("span",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:ae.hex}}),ae.name]},ae.name))})]}),j.colors&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.colors]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-purchase-tag text-blue-500"}),"Tags"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tags (Optional)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Add tags to improve product discoverability"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.tags.join(", "),onChange:ae=>{const ee=ae.target.value.split(",").map(ye=>ye.trim()).filter(ye=>ye);i(ye=>({...ye,tags:ee}))},placeholder:"e.g., Vintage, Leather, Smartphone",className:"w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:T}),ve.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Suggested Tags:"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:ve.map(ae=>n.jsx("button",{type:"button",onClick:()=>Er(ae),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.tags.includes(ae)?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${T?"opacity-50 cursor-not-allowed":""}`,disabled:T,children:ae},ae))})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-star text-blue-500"}),"Condition"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Condition ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select the condition of the product"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["New","Used - Like New","Used - Good","Used - Fair"].map(ae=>n.jsx("button",{type:"button",onClick:()=>i(ee=>({...ee,condition:ae})),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.condition===ae?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${T?"opacity-50 cursor-not-allowed":""}`,disabled:T,children:ae},ae))}),j.condition&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.condition]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-ruler text-blue-500"}),"Product Size"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Size ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product size"})]}),n.jsxs("select",{name:"manualSize",value:a.manualSize,onChange:Fe,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j.manualSize?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T,children:[n.jsx("option",{value:"",children:"Select a size"}),it.map(ae=>n.jsx("option",{value:ae,children:ae},ae))]}),j.manualSize&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.manualSize]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-map text-blue-500"}),"Location"]}),n.jsx(bx,{locationData:l,setLocationData:d,errors:N,disabled:T})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-plus text-blue-500"}),"Variants"]}),j.variants&&n.jsxs("p",{className:"text-red-600 text-xs mb-2 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j.variants]}),u.map((ae,ee)=>{var ye;return n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:["Variant ",ee+1]}),n.jsx("button",{type:"button",onClick:()=>Ye(ee),className:"text-red-500 hover:text-red-700",disabled:T,"aria-label":`Remove variant ${ee+1}`,children:n.jsx("i",{className:"bx bx-trash text-lg"})})]}),n.jsxs("div",{className:"relative group mb-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Variant Images (up to ",Qe,") ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:`Upload up to ${Qe} images (max 5MB each)`})]}),n.jsxs("div",{ref:Ee=>Ve.current[ee]={current:Ee},onDrop:Ee=>He(Ee,ee),onDragOver:Ee=>mt(Ee,ee),onDragLeave:Ee=>Dt(Ee,ee),className:`mt-1 w-full p-4 border-2 border-dashed rounded-lg flex flex-col items-center justify-center min-h-[150px] transition-colors ${j[`variant${ee}_images`]?"border-red-500":"border-gray-300 hover:border-blue-500 dark:border-gray-600"} ${T?"opacity-50":""}`,children:[(((ye=x[ee])==null?void 0:ye.length)||0)===0?n.jsxs("div",{className:"text-center",children:[n.jsx("i",{className:"bx bx-cloud-upload text-4xl text-gray-600 dark:text-gray-400"}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Drag and drop images or"," ",n.jsx("button",{type:"button",onClick:()=>{var Ee;return(Ee=Xe.current[ee])==null?void 0:Ee.current.click()},className:"text-blue-600 hover:underline",disabled:T,children:"select images"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"(JPEG, JPG, PNG, WEBP, GIF, max 5MB each)"})]}):n.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:x[ee].map((Ee,Ke)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:Ee,alt:`Variant ${ee+1} Preview ${Ke+1}`,className:"w-full h-32 object-cover rounded-md border border-gray-200 dark:border-gray-600 cursor-pointer shadow-sm",onClick:()=>Te({type:"image",src:Ee})}),n.jsx("button",{type:"button",onClick:()=>je(ee,Ke),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 shadow-sm",disabled:T,title:"Remove image","aria-label":`Remove image ${Ke+1} from variant ${ee+1}`,children:n.jsx("i",{className:"bx bx-x text-sm"})})]},Ke))}),n.jsx("input",{ref:Ee=>Xe.current[ee]={current:Ee},type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:Ee=>ut(ee,Ee.target.files),className:"hidden",disabled:T,multiple:!0})]}),j[`variant${ee}_images`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j[`variant${ee}_images`]]}),U>0&&n.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${U}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Color ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ae.color,onChange:Ee=>Ze(ee,"color",Ee.target.value),placeholder:"Type a color (e.g., Navy Blue)",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j[`variant${ee}_color`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),j[`variant${ee}_color`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j[`variant${ee}_color`]]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Size ",ks().length>0&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:ae.size,onChange:Ee=>Ze(ee,"size",Ee.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j[`variant${ee}_size`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T,children:[n.jsx("option",{value:"",children:"Select a size"}),ks().map(Ee=>n.jsx("option",{value:Ee,children:Ee},Ee))]}),j[`variant${ee}_size`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j[`variant${ee}_size`]]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Price () ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",value:ae.price,onChange:Ee=>Ze(ee,"price",Ee.target.value),step:"0.01",min:"0",placeholder:"e.g., 5000.00",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j[`variant${ee}_price`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),j[`variant${ee}_price`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j[`variant${ee}_price`]]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Stock ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",value:ae.stock,onChange:Ee=>Ze(ee,"stock",Ee.target.value),min:"0",placeholder:"e.g., 10",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${j[`variant${ee}_stock`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),j[`variant${ee}_stock`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),j[`variant${ee}_stock`]]})]})]})]},ee)}),n.jsxs("button",{type:"button",onClick:Je,className:`mt-4 py-2 px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 flex items-center gap-2 ${T?"opacity-50 cursor-not-allowed":""}`,disabled:T,"aria-label":"Add new variant",children:[n.jsx("i",{className:"bx bx-plus"}),"Add Variant"]})]}),n.jsx("div",{className:"flex justify-end mt-8",children:n.jsx("button",{type:"submit",className:`flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition-colors text-sm font-medium ${T?"opacity-50 cursor-not-allowed":""}`,disabled:T,children:T?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bx bx-loader bx-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bx bx-upload"}),"Add Product with Variants"]})})})]}),n.jsx(Dre,{alerts:e,removeAlert:r}),n.jsx(vx,{isOpen:z,onClose:()=>{G(!1)},message:"Product variants uploaded successfully!",icon:"bx-check-circle",type:"success",showYesNoButtons:!1}),Se&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:n.jsxs("div",{className:"relative max-w-4xl w-full",children:[n.jsx("img",{src:Se.src,alt:"Zoomed media",className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}),n.jsx("button",{onClick:()=>Te(null),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 shadow-md",title:"Close",children:n.jsx("i",{className:"bx bx-x text-xl"})})]})})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]})}const Lre=()=>{const[t,e]=_.useState("contact"),[s,r]=_.useState(null),[a,i]=_.useState({name:"",email:"",subject:"",message:""}),[l,d]=_.useState(!1),u=[{question:"How do I place an order?",answer:"To place an order, browse our products, add items to your cart, and proceed to checkout. You'll need to provide shipping and payment information to complete your order."},{question:"What payment methods do you accept?",answer:"We accept various payment methods including credit/debit cards, bank transfers, and digital wallets. All payments are processed securely through our payment partners."},{question:"How can I track my order?",answer:"Once your order is shipped, you'll receive a tracking number via email. You can also view your order status and tracking information in your account under 'My Orders'."},{question:"What is your return policy?",answer:"We offer a 30-day return policy for most items. Products must be in original condition with all packaging. Some restrictions may apply to certain categories."},{question:"How long does shipping take?",answer:"Standard shipping typically takes 3-7 business days within the country. International shipping may take 7-14 business days. Express shipping options are available at checkout."},{question:"Do you ship internationally?",answer:"Yes, we ship to most countries worldwide. International shipping costs and delivery times vary by location."},{question:"How do I become a seller on Foremade?",answer:"To become a seller, create an account and click on 'Become a Seller' in your profile. You'll need to complete the seller application and verification process."},{question:"What are Foremade's fees for sellers?",answer:"Our seller fees include a small listing fee and a commission on sales. The exact fee structure depends on your seller level and product category."}],h=[{name:"Privacy Policy",url:"/privacy-policy"},{name:"Terms & Conditions",url:"/terms-conditions"},{name:"Seller Agreement",url:"/seller-agreement"},{name:"Shipping Policy",url:"/shipping-policy"}],f=w=>{const{name:N,value:v}=w.target;i(j=>({...j,[N]:v}))},p=async w=>{w.preventDefault(),d(!0);try{await new Promise(N=>setTimeout(N,1e3)),console.log("Support form submitted:",a),Ne.success("Your message has been sent! Our support team will get back to you soon."),i({name:"",email:"",subject:"",message:""})}catch(N){console.error("Error submitting form:",N),Ne.error("Failed to send message. Please try again later.")}finally{d(!1)}},x=w=>{r(s===w?null:w)};return n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx(St.h1,{className:"text-2xl md:text-3xl font-bold text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Customer Support Center"}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsx("div",{className:"inline-flex bg-gray-100 rounded-lg p-1",children:["contact","faq","policies"].map(w=>n.jsxs(St.button,{onClick:()=>e(w),className:`px-4 py-2 rounded-md ${t===w?"bg-blue-500 text-white":"bg-transparent text-gray-700 hover:bg-gray-200"} transition-all duration-200 text-sm md:text-base font-medium`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[w==="contact"&&"Contact Us",w==="faq"&&"FAQs",w==="policies"&&"Policies"]},w))})}),t==="contact"&&n.jsxs(St.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Get in Touch"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Have a question or need assistance? Fill out the form below and our support team will get back to you as soon as possible."}),n.jsxs("form",{onSubmit:p,children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),n.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:f,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),n.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:f,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",id:"subject",name:"subject",value:a.subject,onChange:f,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),n.jsx("textarea",{id:"message",name:"message",value:a.message,onChange:f,rows:"5",className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsx(St.button,{type:"submit",disabled:l,className:`w-full py-2 px-4 ${l?"bg-blue-400":"bg-blue-500 hover:bg-blue-600"} text-white rounded-md transition-colors duration-200 flex items-center justify-center`,whileHover:{scale:1.02},whileTap:{scale:.98},children:l?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"mr-2",children:"Sending..."}),n.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]}):"Send Message"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 bg-blue-100 p-3 rounded-full text-blue-500",children:n.jsx("i",{className:"bx bx-envelope text-xl"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-md font-medium",children:"Email"}),n.jsx("p",{className:"text-blue-500 hover:underline",children:"support@foremade.com"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 bg-blue-100 p-3 rounded-full text-blue-500",children:n.jsx("i",{className:"bx bx-map text-xl"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-md font-medium",children:"Address"}),n.jsx("p",{className:"text-gray-600",children:"United Kingdom"})]})]})]})]})]}),t==="faq"&&n.jsxs(St.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"max-w-3xl mx-auto",children:[n.jsx("h2",{className:"text-xl font-semibold mb-6 text-center",children:"Frequently Asked Questions"}),n.jsx("div",{className:"space-y-4",children:u.map((w,N)=>n.jsxs(St.div,{className:"border border-gray-200 rounded-lg overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:N*.1},children:[n.jsxs("button",{className:"w-full px-6 py-4 text-left bg-white hover:bg-gray-50 flex justify-between items-center",onClick:()=>x(N),children:[n.jsx("span",{className:"font-medium",children:w.question}),n.jsx(St.i,{className:`bx ${s===N?"bx-minus":"bx-plus"} text-blue-500`,animate:{rotate:s===N?180:0},transition:{duration:.3}})]}),n.jsx(St.div,{className:"px-6 pb-4",initial:{height:0,opacity:0},animate:{height:s===N?"auto":0,opacity:s===N?1:0},transition:{duration:.3},style:{overflow:"hidden"},children:n.jsx("p",{className:"text-gray-600",children:w.answer})})]},N))}),n.jsxs("div",{className:"mt-8 text-center",children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"Can't find what you're looking for?"}),n.jsx(St.button,{onClick:()=>e("contact"),className:"px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Contact Support"})]})]}),t==="policies"&&n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsx("h2",{className:"text-xl font-semibold mb-6 text-center",children:"Policies & Terms"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map((w,N)=>n.jsxs(ue,{to:w.url,className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center hover:shadow-lg transition-shadow duration-200 hover:text-blue-600",children:[n.jsx("div",{className:"bg-blue-100 p-4 rounded-full text-blue-500 mb-4",children:n.jsx("i",{className:"bx bx-file text-2xl"})}),n.jsx("h3",{className:"text-lg font-medium",children:w.name}),n.jsxs("p",{className:"text-blue-500 mt-2 flex items-center",children:["Read more",n.jsx("i",{className:"bx bx-right-arrow-alt ml-1"})]})]},N))})]})]})};function ar(){const[t,e]=_.useState(window.innerWidth>=768),s=gr();_.useEffect(()=>{const i=()=>{e(window.innerWidth>=768)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const r=()=>{e(!t)},a=[{path:"/admin/dashboard",icon:i0,label:"Dashboard"},{path:"/admin/users",icon:A6,label:"Manage Users"},{path:"/admin/sellers-wallet",icon:T6,label:"Account Management"},{path:"/admin/sellers/payouts",icon:DK,label:"Approve Payments"},{path:"/admin/products",icon:hx,label:"Manage Products"},{path:"/admin/edit/categories",icon:S6,label:"Categories"},{path:"/admin/edit/fees",icon:gK,label:"Edit Fees"},{path:"/admin/notifications",icon:uK,label:"Notifications"},{path:"/admin/edit/banners",icon:Ul,label:"Edit Banners & Others"},{path:"/admin/edit/daily-deals",icon:NX,label:"Daily Deals"},{path:"/admin/manager",icon:i0,label:"Admin Manager"}];return n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:r,className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-blue-600 text-white rounded-lg focus:outline-none hover:bg-blue-700 transition-colors","aria-label":t?"Close menu":"Open menu",children:t?n.jsx(Vl,{className:"w-6 h-6"}):n.jsx(k6,{className:"w-6 h-6"})}),n.jsxs("div",{className:`fixed top-0 left-0 w-64 h-full bg-gradient-to-b from-gray-900 to-gray-800 text-white shadow-xl transform transition-transform duration-300 ease-in-out z-40
          ${t?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:block`,children:[n.jsx(ue,{to:"/",onClick:()=>window.innerWidth<768&&e(!1),children:n.jsxs("div",{className:"p-4 border-b border-gray-700 flex-col items-center gap-2",children:[n.jsx("img",{src:nc,alt:"Logo",className:"h-10"}),n.jsx("span",{className:"text-sm font-bold",children:"Admin Panel"})]})}),n.jsx("nav",{className:"mt-4 px-2",children:n.jsx("ul",{className:"space-y-1",children:a.map(i=>n.jsx("li",{children:n.jsxs(ue,{to:i.path,onClick:()=>window.innerWidth<768&&e(!1),className:`flex items-center p-3 rounded-lg transition-all duration-200 ${s.pathname===i.path?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[n.jsx(i.icon,{className:"w-5 h-5 mr-3"}),n.jsx("span",{className:"text-sm font-medium",children:i.label})]})},i.path))})})]}),t&&n.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:r})]})}function YA({variants:t=[],imageUrls:e=[],isModal:s,product:r={},onUpdateProduct:a}){const[i,l]=_.useState(0),[d,u]=_.useState(0),[h,f]=_.useState(!1),[p,x]=_.useState({...r,variants:t.length?t.map(M=>({...M,imageUrls:M.imageUrls||[],price:M.price||0,stock:M.stock||0,color:M.color||"",size:M.size||""})):[],imageUrls:r.imageUrls||e||[]}),w=t.length?p.variants[i]||{imageUrls:[]}:null,N=t.length?w.imageUrls.map(M=>({type:"image",url:M})).filter(M=>M.url):p.imageUrls.map(M=>({type:"image",url:M})).filter(M=>M.url);if(!N.length&&!h)return n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm flex items-center gap-1",children:"No media available."});const v=M=>{M.stopPropagation(),u(Y=>Y===0?N.length-1:Y-1)},j=M=>{M.stopPropagation(),u(Y=>Y===N.length-1?0:Y+1)},k=M=>{M.stopPropagation(),l(Y=>Y===0?p.variants.length-1:Y-1),u(0)},T=M=>{M.stopPropagation(),l(Y=>Y===p.variants.length-1?0:Y+1),u(0)},P=()=>{f(!h),h||x({...r,variants:t.length?t.map(M=>({...M,imageUrls:M.imageUrls||[],price:M.price||0,stock:M.stock||0,color:M.color||"",size:M.size||""})):[],imageUrls:r.imageUrls||e||[]})},U=(M,Y)=>{x(Q=>({...Q,[M]:Y}))},R=(M,Y,Q)=>{x(H=>({...H,variants:H.variants.map((W,de)=>de===M?{...W,[Y]:Q}:W)}))},O=(M,Y,Q)=>{t.length?x(H=>({...H,variants:H.variants.map((W,de)=>de===M?{...W,imageUrls:W.imageUrls.map((ge,z)=>z===Y?Q:ge)}:W)})):x(H=>({...H,imageUrls:H.imageUrls.map((W,de)=>de===Y?Q:W)}))},I=M=>{t.length?x(Y=>({...Y,variants:Y.variants.map((Q,H)=>H===M?{...Q,imageUrls:[...Q.imageUrls,""]}:Q)})):x(Y=>({...Y,imageUrls:[...Y.imageUrls,""]}))},C=(M,Y)=>{t.length?x(Q=>({...Q,variants:Q.variants.map((H,W)=>W===M?{...H,imageUrls:H.imageUrls.filter((de,ge)=>ge!==Y)}:H)})):x(Q=>({...Q,imageUrls:Q.imageUrls.filter((H,W)=>W!==Y)})),d>=N.length-1&&u(0)},E=()=>{x(M=>({...M,variants:[...M.variants,{color:"",size:"",price:0,stock:0,imageUrls:[]}]}))},D=M=>{x(Y=>({...Y,variants:Y.variants.filter((Q,H)=>H!==M)})),i>=p.variants.length-1&&l(0)},V=()=>{a&&a({...p,variants:p.variants.map(M=>({...M,price:parseFloat(M.price)||0,stock:parseInt(M.stock)||0,imageUrls:M.imageUrls.filter(Y=>Y.trim())})),imageUrls:p.imageUrls.filter(M=>M.trim())}),f(!1)},B=N[d];return n.jsxs("div",{className:`relative ${s?"h-full":"h-64"} p-2 rounded-xl overflow-hidden shadow-md`,children:[n.jsxs("div",{className:"w-full h-full relative",children:[B&&n.jsx("img",{src:B.url,alt:`${r.name||"Product"} ${t.length?`variant ${i+1}`:""} image`,className:"w-full h-full object-cover rounded-xl transition-transform duration-300 hover:scale-105",onError:M=>{M.target.src="https://via.placeholder.com/150",console.error(`Failed to load image: ${B.url}`)}}),N.length>1&&s&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:v,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Previous media","aria-label":"Previous media",children:n.jsx(lC,{size:20})}),n.jsx("button",{onClick:j,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Next media","aria-label":"Next media",children:n.jsx(Xh,{size:20})}),n.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2 bg-gray-900 bg-opacity-70 p-1 rounded-full",children:N.map((M,Y)=>n.jsx("button",{onClick:()=>u(Y),className:`w-2 h-2 rounded-full transition-all duration-200 ${Y===d?"bg-blue-500 w-3":"bg-gray-400 hover:bg-gray-500"}`,"aria-label":`Go to media ${Y+1}`},Y))})]}),t.length>1&&s&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:k,className:"absolute left-2 top-1/4 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Previous variant","aria-label":"Previous variant",children:n.jsx(lC,{size:20})}),n.jsx("button",{onClick:T,className:"absolute right-2 top-1/4 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Next variant","aria-label":"Next variant",children:n.jsx(Xh,{size:20})})]}),n.jsxs("div",{className:"absolute top-2 right-2 bg-gray-900 bg-opacity-70 text-white px-2 py-1 rounded-full text-xs flex items-center gap-1",children:[n.jsx(Ul,{size:12}),t.length?`Variant ${i+1}/${p.variants.length} | `:"","Image ",d+1,"/",N.length]}),s&&n.jsx("div",{className:"absolute top-2 left-2",children:h?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:V,className:"bg-emerald-600 text-white p-2 rounded-full hover:bg-emerald-700 transition-all duration-200 focus:outline-none",title:"Save edits","aria-label":"Save edits",children:n.jsx(NK,{size:16})}),n.jsx("button",{onClick:P,className:"bg-red-600 text-white p-2 rounded-full hover:bg-red-700 transition-all duration-200 focus:outline-none",title:"Cancel edits","aria-label":"Cancel edits",children:n.jsx(Vl,{size:16})})]}):n.jsx("button",{onClick:P,className:"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition-all duration-200 focus:outline-none",title:"Edit product","aria-label":"Edit product",children:n.jsx(Ld,{size:16})})})]}),h&&s&&n.jsxs("div",{className:"mt-4 p-2 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-y-auto max-h-[40vh]",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Edit Product Details"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Name"}),n.jsx("input",{type:"text",value:p.name||"",onChange:M=>U("name",M.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Category"}),n.jsx("input",{type:"text",value:p.category||"",onChange:M=>U("category",M.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Condition"}),n.jsx("input",{type:"text",value:p.condition||"",onChange:M=>U("condition",M.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Tags (comma-separated)"}),n.jsx("input",{type:"text",value:Array.isArray(p.tags)?p.tags.join(", "):p.tags||"",onChange:M=>U("tags",M.target.value.split(", ").filter(Boolean)),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),t.length?n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Variants"}),p.variants.map((M,Y)=>n.jsxs("div",{className:"mb-4 p-2 border border-gray-300 dark:border-gray-600 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("h5",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:["Variant ",Y+1]}),n.jsx("button",{onClick:()=>D(Y),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-all duration-200",title:"Remove variant","aria-label":"Remove variant",children:n.jsx(Vl,{size:14})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Color"}),n.jsx("input",{type:"text",value:M.color||"",onChange:Q=>R(Y,"color",Q.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Size"}),n.jsx("input",{type:"text",value:M.size||"",onChange:Q=>R(Y,"size",Q.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Price ()"}),n.jsx("input",{type:"number",value:M.price||"",onChange:Q=>R(Y,"price",Q.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Stock"}),n.jsx("input",{type:"number",value:M.stock||"",onChange:Q=>R(Y,"stock",Q.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Images"}),M.imageUrls.map((Q,H)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("input",{type:"text",value:Q||"",onChange:W=>O(Y,H,W.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter image URL"}),n.jsx("button",{onClick:()=>C(Y,H),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-all duration-200",title:"Remove image","aria-label":"Remove image",children:n.jsx(Vl,{size:14})})]},H)),n.jsxs("button",{onClick:()=>I(Y),className:"mt-2 text-blue-600 hover:underline text-sm flex items-center gap-1",children:[n.jsx(Ul,{size:14})," Add Image"]})]})]})]},Y)),n.jsxs("button",{onClick:E,className:"mt-2 text-blue-600 hover:underline text-sm flex items-center gap-1",children:[n.jsx(Ul,{size:14})," Add Variant"]})]}):n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Images"}),p.imageUrls.map((M,Y)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("input",{type:"text",value:M||"",onChange:Q=>O(0,Y,Q.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter image URL"}),n.jsx("button",{onClick:()=>C(0,Y),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-all duration-200",title:"Remove image","aria-label":"Remove image",children:n.jsx(Vl,{size:14})})]},Y)),n.jsxs("button",{onClick:()=>I(0),className:"mt-2 text-blue-600 hover:underline text-sm flex items-center gap-1",children:[n.jsx(Ul,{size:14})," Add Image"]})]})]})]})]})}function KA({productId:t,currentStatus:e,onStatusChange:s,onDelete:r,loading:a,onEdit:i,isModal:l}){return n.jsxs("div",{className:`flex ${l?"justify-end mt-4":"space-x-2"}`,children:[e!=="approved"&&n.jsx("button",{onClick:d=>{d.stopPropagation(),s(t,"approved")},disabled:a,className:"py-2 px-2 m-1 bg-emerald-600 text-white rounded-xl text-sm hover:bg-emerald-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Approve product for sale",children:a?n.jsx(Pg,{size:16,className:"animate-spin"}):n.jsx(ux,{size:16})}),e!=="rejected"&&n.jsx("button",{onClick:d=>{d.stopPropagation(),s(t,"rejected")},disabled:a,className:"py-2 px-4 m-1 bg-red-600 text-white rounded-xl text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Reject product",children:a?n.jsx(Pg,{size:16,className:"animate-spin"}):n.jsx(wd,{size:16})}),n.jsx("button",{onClick:d=>{d.stopPropagation(),r(t)},disabled:a,className:"py-2 px-4 m-1 bg-red-600 text-white rounded-xl text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Delete product permanently",children:a?n.jsx(Pg,{size:16,className:"animate-spin"}):n.jsx(kX,{size:16})}),n.jsx("button",{onClick:d=>{d.stopPropagation(),i(t)},disabled:a,className:"py-2 px-4 m-1 bg-blue-600 text-white rounded-xl text-sm hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Edit product details",children:a?n.jsx(Pg,{size:16,className:"animate-spin"}):n.jsx(Ld,{size:16})})]})}function XA({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-xl shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-emerald-600 text-white"} flex items-center gap-2`,children:[s.type==="error"?n.jsx(wd,{size:20}):n.jsx(ux,{size:20}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg hover:text-gray-200",children:""})]},s.id))})}function Ure(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(l=>l.id!==a))}}}function QA(){var ge,z;const{alerts:t,addAlert:e,removeAlert:s}=Ure(),[r,a]=_.useState({products:[]}),[i,l]=_.useState(!0),[d,u]=_.useState(""),[h,f]=_.useState(null),[p,x]=_.useState("default"),[w,N]=_.useState(!1),[v,j]=_.useState(!1),[k,T]=_.useState(""),[P,U]=_.useState(""),[R,O]=_.useState(null);_.useEffect(()=>{(async()=>{try{const X=await yt(Ue(J,"products")),re=await Promise.all(X.docs.map(async xe=>{const ze={id:xe.id,...xe.data()},me=await I(ze.id);return{...ze,buyerCount:me}}));a({products:re})}catch(X){console.error("Error fetching data:",X),u("Failed to fetch data: "+X.message),e("Failed to load products.","error")}finally{l(!1)}})()},[e]),_.useEffect(()=>{const G=X=>{X.key==="Escape"&&(h||v)&&Y()};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[h,v]);const I=async G=>{try{return(await yt(Ue(J,"orders"))).docs.filter(re=>re.data().items.some(xe=>xe.productId===G)).length}catch(X){return console.error("Error fetching buyer count:",X),0}},C=async(G,X)=>{const re=r.products.find(xe=>xe.id===G);if(X==="rejected"){O(re),j(!0);return}if(window.confirm(`Are you sure you want to ${X==="approved"?"approve":"reject"} this product?`)){l(!0);try{const xe=_e(J,"products",G);await Qr(xe,{status:X}),a(me=>({...me,products:me.products.map(Ce=>Ce.id===G?{...Ce,status:X}:Ce)})),e(`Product ${X==="approved"?"approved":"rejected"} successfully! `,"success");const ze=X==="approved"?"/send-product-approved-email":"/send-product-rejected-email";try{await Ut.post(`https://foremade-backend.onrender.com${ze}`,{productId:G,productName:re.name,sellerId:re.sellerId,sellerEmail:re.sellerEmail||await D(re.sellerId),...X==="rejected"&&{reason:k||P}}),e(`${X==="approved"?"Approval":"Rejection"} email sent to seller! `,"success")}catch(me){console.error(`Error sending ${X} email:`,me),e(`Failed to send ${X} email.`,"error")}}catch(xe){console.error("Error updating product status:",xe),e("Failed to update product status.","error")}finally{l(!1)}}},E=async()=>{if(!k&&!P){e("Please select or enter a rejection reason.","error");return}const G=k==="Other"?P:k;if(!G){e("Please enter a custom reason.","error");return}l(!0);try{const X=R.id,re=_e(J,"products",X);await Qr(re,{status:"rejected"}),a(xe=>({...xe,products:xe.products.map(ze=>ze.id===X?{...ze,status:"rejected"}:ze)})),e("Product rejected successfully! ","success");try{await Ut.post("https://foremade-backend.onrender.com/send-product-rejected-email",{productId:X,productName:R.name,sellerId:R.sellerId,sellerEmail:R.sellerEmail||await D(R.sellerId),reason:G}),e("Rejection email sent to seller! ","success")}catch(xe){console.error("Error sending rejection email:",xe),e("Failed to send rejection email.","error")}}catch(X){console.error("Error rejecting product:",X),e("Failed to reject product.","error")}finally{l(!1),j(!1),T(""),U(""),O(null)}},D=async G=>{try{const X=await Ge(_e(J,"users",G));return X.exists()?X.data().email:null}catch(X){return console.error("Error fetching seller email:",X),null}},V=async G=>{if(window.confirm("Are you sure you want to delete this product?")){l(!0);try{await nn(_e(J,"products",G)),a(X=>({...X,products:X.products.filter(re=>re.id!==G)})),e("Product deleted successfully! ","success")}catch(X){console.error(`Error deleting product ${G}:`,X),e("Failed to delete product.","error")}finally{l(!1)}}},B=(G,X)=>{X.stopPropagation(),console.log("Card clicked:",G.id,G.name),f(G)},M=async G=>{if(!G.name||G.variants.some(X=>!X.price||!X.stock||!X.color)){e("Please fill all required fields for all variants.","error");return}l(!0);try{const X=_e(J,"products",G.id);await Qr(X,{name:G.name,category:G.category,condition:G.condition,tags:G.tags,variants:G.variants.map(re=>({...re,price:parseFloat(re.price)||0,stock:parseInt(re.stock)||0})),imageUrls:G.imageUrls||[]}),a(re=>({...re,products:re.products.map(xe=>xe.id===G.id?{...xe,...G}:xe)})),e("Product updated successfully! ","success"),f(null)}catch(X){console.error("Error updating product:",X),e("Failed to update product.","error")}finally{l(!1)}},Y=()=>{f(null),j(!1),T(""),U(""),O(null)},H=(G=>{const X=[...G];switch(p){case"name-asc":return X.sort((re,xe)=>(re.name||"").localeCompare(xe.name||""));case"name-desc":return X.sort((re,xe)=>(xe.name||"").localeCompare(re.name||""));case"price-asc":return X.sort((re,xe)=>{const ze=re.variants&&re.variants.length?Math.min(...re.variants.map(Ce=>Ce.price||0)):re.price||0,me=xe.variants&&xe.variants.length?Math.min(...xe.variants.map(Ce=>Ce.price||0)):xe.price||0;return ze-me});case"price-desc":return X.sort((re,xe)=>{const ze=re.variants&&re.variants.length?Math.max(...re.variants.map(Ce=>Ce.price||0)):re.price||0;return(xe.variants&&xe.variants.length?Math.max(...xe.variants.map(Ce=>Ce.price||0)):xe.price||0)-ze});case"status-pending":return X.sort(re=>re.status==="pending"?-1:1);case"status-approved":return X.sort(re=>re.status==="approved"?-1:1);case"status-not-approved":return X.sort(re=>re.status!=="approved"&&re.status!=="pending"?-1:1);default:return X}})(r.products),W=r.products.filter(G=>G.status==="approved").length,de=r.products.filter(G=>G.status!=="approved").length;return i?n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-50 to-gray-200 dark:from-gray-900 dark:to-gray-800",children:[n.jsx(ar,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})})]}):d?n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-50 to-gray-200 dark:from-gray-900 dark:to-gray-800",children:[n.jsx(ar,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"bg-red-600 text-white p-4 rounded-xl shadow-md flex items-center gap-2",children:[n.jsx(wd,{size:20}),n.jsx("p",{children:d})]})})}),n.jsx(XA,{alerts:t,removeAlert:s})]}):n.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-50 to-gray-200 dark:from-gray-900 dark:to-gray-800",children:[n.jsx(ar,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-4 sm:mb-0 flex items-center gap-2",children:[n.jsx(ux,{size:24,className:"text-blue-500"}),"Product Verification Hub"]}),n.jsxs("button",{onClick:()=>N(!w),className:"py-2 px-4 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 flex items-center gap-2 transition-all duration-200 shadow-md",children:[n.jsx("i",{className:`bx bx-${w?"x":"filter-alt"}`}),w?"Close Filters":"Filters & Sort"]})]}),w&&n.jsx("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl shadow-md mb-6 animate-slide-down",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center gap-1",children:["Sort Products",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Sort products by name, price, or status"})]}),n.jsxs("select",{value:p,onChange:G=>x(G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"default",children:"Default"}),n.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),n.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),n.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),n.jsx("option",{value:"price-desc",children:"Price (High to Low)"}),n.jsx("option",{value:"status-pending",children:"Status: Pending"}),n.jsx("option",{value:"status-approved",children:"Status: Approved"}),n.jsx("option",{value:"status-not-approved",children:"Status: Not Approved"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stats"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm shadow-md",children:["Approved: ",W]}),n.jsxs("div",{className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm shadow-md",children:["Not Approved: ",de]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 gap-6",children:[H.map(G=>{var X;return n.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-lg transition-all duration-200 shadow-md",onClick:re=>B(G,re),children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200 truncate",children:G.name||"Unnamed Product"}),n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${G.status==="pending"?"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300":G.status==="approved"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:G.status==="pending"?"Pending":G.status==="approved"?"Approved":"Not Approved"})]}),n.jsx(YA,{variants:G.variants||[],imageUrls:G.imageUrls||[]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1",children:[n.jsx(Po,{size:14})," Seller: ",G.sellerName||"Unknown"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1",children:[n.jsx(wp,{size:14})," Buyers: ",G.buyerCount||0]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Variants: ",((X=G.variants)==null?void 0:X.length)||0]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Price Range: ",G.variants&&G.variants.length?Math.min(...G.variants.map(re=>re.price||0)).toLocaleString("en-NG"):(G.price||0).toLocaleString("en-NG")," - ",G.variants&&G.variants.length?Math.max(...G.variants.map(re=>re.price||0)).toLocaleString("en-NG"):(G.price||0).toLocaleString("en-NG")]}),n.jsx(KA,{productId:G.id,currentStatus:G.status,onStatusChange:C,onDelete:V,loading:i,onEdit:re=>B(G,re)})]},G.id)}),H.length===0&&n.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center mt-4 col-span-3 italic",children:"No products to verify."})]})]})}),h&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 m-4 rounded-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto shadow-lg flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"w-full md:w-1/2 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-2",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:h.name||"Unnamed Product"}),n.jsx("button",{onClick:Y,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl",title:"Close",children:n.jsx("i",{className:"bx bx-x"})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[n.jsx(oC,{size:18,className:"text-blue-500"})," Details"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Seller:"})," ",h.sellerName||"Unknown Seller"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Status:"})," ",h.status==="pending"?"Pending":h.status==="approved"?"Approved":"Not Approved"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Category:"})," ",h.category||"Uncategorized"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Condition:"})," ",h.condition||"New"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Rating:"})," ",h.rating||"N/A"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Buyers:"})," ",h.buyerCount||0]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[n.jsx(Ld,{size:18,className:"text-blue-500"})," Tags"]}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-sm",children:Array.isArray(h.tags)?h.tags.join(", "):"None"})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[n.jsx(Po,{size:18,className:"text-blue-500"})," Seller Info"]}),n.jsxs("p",{className:"text-[13px] mt-3",children:[n.jsx("span",{className:"bg-amber-100 rounded-full p-1",children:"Name:"})," ",((ge=h.seller)==null?void 0:ge.name)||"Unknown Seller"]}),n.jsxs("p",{className:"text-[13px] mt-4",children:[n.jsx("span",{className:"bg-amber-100 rounded-full p-1",children:"ID:"})," ",((z=h.seller)==null?void 0:z.id)||"N/A"]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[n.jsx(wp,{size:18,className:"text-blue-500"})," Variants"]}),h.variants&&h.variants.length>0?n.jsx("div",{className:"space-y-4 mt-2",children:h.variants.map((G,X)=>{var re;return n.jsxs("div",{className:"p-2 border border-gray-200 dark:border-gray-600 rounded-lg",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Variant ",X+1]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Color:"})," ",G.color||"N/A"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Size:"})," ",G.size||"N/A"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Price:"})," ",(G.price||0).toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Stock:"})," ",G.stock||0," units"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-blue-100 rounded-full p-1",children:"Images:"})," ",((re=G.imageUrls)==null?void 0:re.length)||0]})]})]},X)})}):n.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-400",children:"No variants available."})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[n.jsx(wp,{size:18,className:"text-blue-500"})," Reviews"]}),Array.isArray(h.reviews)&&h.reviews.length>0?n.jsx("ul",{className:"list-disc pl-5 space-y-2",children:h.reviews.map((G,X)=>n.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:[G.comment," ",n.jsxs("span",{className:"text-yellow-500",children:["(Rating: ",G.rating,")"]}),", By: ",G.userName||"Anonymous"]},X))}):n.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-400",children:"No reviews available yet."})]}),n.jsx(KA,{productId:h.id,currentStatus:h.status,onStatusChange:C,onDelete:V,loading:i,onEdit:G=>B(h,G),isModal:!0})]}),n.jsxs("div",{className:"w-full md:w-1/2",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2 mb-4",children:[n.jsx(oC,{size:18,className:"text-blue-500"})," Variant Media Preview"]}),n.jsx(YA,{variants:h.variants||[],imageUrls:h.imageUrls||[],isModal:!0,product:h,onUpdateProduct:M})]})]})}),v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl w-full max-w-md shadow-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-2",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx(wd,{size:20,className:"text-red-500"})," Reject Product"]}),n.jsx("button",{onClick:Y,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl",title:"Close",children:n.jsx("i",{className:"bx bx-x"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reason for Rejection"}),n.jsxs("select",{value:k,onChange:G=>T(G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Select a reason"}),n.jsx("option",{value:"Missing product image",children:"Missing product image"}),n.jsx("option",{value:"Incomplete product description",children:"Incomplete product description"}),n.jsx("option",{value:"Invalid price",children:"Invalid price"}),n.jsx("option",{value:"Product violates guidelines",children:"Product violates guidelines"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),k==="Other"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Custom Reason"}),n.jsx("textarea",{value:P,onChange:G=>U(G.target.value),placeholder:"Enter custom reason...",className:"w-full p-2 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200",rows:"4"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:Y,className:"py-2 px-4 bg-gray-300 text-gray-800 rounded-lg text-sm hover:bg-gray-400 transition-all duration-200",children:"Cancel"}),n.jsxs("button",{onClick:E,className:"py-2 px-4 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-all duration-200 flex items-center gap-2",disabled:i,children:[i?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx(wd,{size:16}),"Reject Product"]})]})]})]})}),n.jsx(XA,{alerts:t,removeAlert:s})]})}au.register(pd,tm,Am,Rm,r1,s1);function Vre({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-2 sm:bottom-4 right-2 sm:right-4 z-50 space-y-1 sm:space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-2 sm:p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-1 sm:gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-lg sm:text-xl`}),n.jsx("span",{className:"text-xs sm:text-base",children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg sm:text-xl font-bold hover:text-gray-200",children:""})]},s.id))})}function Fre(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(l=>l.id!==a))}}}function zre(){const{alerts:t,addAlert:e,removeAlert:s}=Fre(),[r,a]=_.useState(null),[i,l]=_.useState([]),[d,u]=_.useState(!0);_.useEffect(()=>{const x=we.onAuthStateChanged(w=>{w?(a(w),u(!1)):(e("Please log in to access this page.","error"),u(!1))});return()=>x()},[e]),_.useEffect(()=>{if(!r)return;const x=Rt(Ue(J,"notifications"),Wm("createdAt","desc")),w=ws(x,N=>{try{const v=N.docs.map(j=>({id:j.id,...j.data()}));l(v),u(!1)}catch(v){console.error("Error fetching notifications:",v),e("Failed to load notifications.","error"),u(!1)}},N=>{console.error("Snapshot error:",N),e("Error receiving real-time updates.","error"),u(!1)});return()=>w()},[r,e]);const h=async()=>{if(window.confirm("Are you sure you want to clear all notifications? This cannot be undone.")){u(!0);try{const x=Ue(J,"notifications"),N=(await yt(x)).docs.map(v=>nn(v.ref));await Promise.all(N),e("All notifications cleared successfully! ","success")}catch(x){console.error("Error clearing notifications:",x),e("Failed to clear notifications.","error")}finally{u(!1)}}},f=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleString("en-NG",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",p=x=>{switch(x){case"user_signup":return{icon:"bx-user-plus",color:"text-green-500"};case"product_upload":return{icon:"bx-package",color:"text-blue-500"};case"order_placed":return{icon:"bx-cart",color:"text-yellow-500"};case"payment_failed":return{icon:"bx-credit-card",color:"text-red-500"};default:return{icon:"bx-bell",color:"text-gray-500"}}};return r?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-3 sm:p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-lg sm:max-w-md md:max-w-2xl lg:max-w-5xl bg-white dark:bg-gray-800 p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl shadow-sm",children:[n.jsxs("div",{className:"flex sm:flex-row justify-between items-start sm:items-center mb-3 sm:mb-6",children:[n.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 sm:border-b-0 border-blue-500 pb-2 sm:pb-0 flex items-center gap-1 sm:gap-2",children:[n.jsx("i",{className:"bx bx-bell text-blue-500 text-lg sm:text-xl md:text-2xl"}),"Notifications"]}),i.length>0&&n.jsxs("button",{onClick:h,disabled:d,className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm font-medium text-white bg-red-600 rounded-md sm:rounded-lg hover:bg-red-700 transition-all duration-200 shadow-md ${d?"opacity-50 cursor-not-allowed":""} mt-2 sm:mt-0`,children:[n.jsx("i",{className:"bx bx-trash text-base sm:text-lg"}),n.jsx("span",{children:"Clear All"})]})]}),d?n.jsx("div",{className:"flex justify-center items-center py-4 sm:py-6",children:n.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Loading notifications..."})]})}):i.length===0?n.jsxs("div",{className:"text-center py-6 sm:py-8",children:[n.jsx("i",{className:"bx bx-bell-off text-3xl sm:text-5xl text-gray-400 dark:text-gray-500 mb-2 sm:mb-4"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic text-sm sm:text-base",children:"No notifications found."})]}):n.jsx("ul",{className:"space-y-2 sm:space-y-4",children:i.map(x=>{const{icon:w,color:N}=p(x.type);return n.jsxs("li",{className:"p-2 sm:p-4 bg-gray-50 dark:bg-gray-700 rounded-lg sm:rounded-xl shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200 flex items-start gap-2 sm:gap-4",children:[n.jsx("i",{className:`bx ${w} text-lg sm:text-2xl ${N}`}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[n.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100 text-sm sm:text-base",children:x.message}),n.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1 sm:mt-0",children:f(x.createdAt)})]}),x.details&&n.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 mt-1 sm:mt-2",children:Object.entries(x.details).map(([v,j])=>n.jsxs("span",{children:[n.jsxs("strong",{children:[v.replace("_"," "),":"]})," ",j," ",n.jsx("br",{})]},v))})]})]},x.id)})}),n.jsx(Vre,{alerts:t,removeAlert:s})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-3 sm:p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Loading..."})]})})]})}function Bre({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-3 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-lg`}),n.jsx("span",{className:"text-sm",children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function $re(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(l=>l.id!==a))}}}const JA=(t,e)=>{const s=[t,e].filter(d=>d&&d.trim()),r=s[0]?s[0].slice(0,4).toLowerCase():"user",a=s[1]?s[1].slice(0,3).toLowerCase():"",i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return(r+a).replace(/[^a-z0-9]/g,"")+i};function qre(){const t=Ns(),{alerts:e,addAlert:s,removeAlert:r}=$re(),[a,i]=_.useState(!1),[l,d]=_.useState(null),[u,h]=_.useState([]),[f,p]=_.useState({email:"",firstName:"",lastName:"",password:"",role:"buyer"}),[x,w]=_.useState(null),[N,v]=_.useState({}),[j,k]=_.useState(!1),[T,P]=_.useState(!1),[U,R]=_.useState(""),[O,I]=_.useState(!1),[C,E]=_.useState(!1);_.useEffect(()=>{const z=we.onAuthStateChanged(async X=>{if(X){d(X);const re=await Ge(_e(J,"users",X.uid));(!re.exists()||re.data().role!=="admin")&&s("Unauthorized access.","error")}else s("Please log in as an admin.","error")}),G=ws(Ue(J,"users"),X=>{const re=X.docs.map(xe=>({id:xe.id,...xe.data()}));h(re)});return()=>{z(),G()}},[t]),_.useEffect(()=>{const z=G=>{G.key==="Escape"&&j&&k(!1)};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[j]);const D=z=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z),V=z=>z&&z.length<6?"Password must be at least 6 characters long.":"",B=(z,G)=>{p(X=>({...X,[z]:G})),v(X=>({...X,[z]:""}))},M=(z,G)=>{w(X=>({...X,[z]:G})),v(X=>({...X,[z]:""}))},Y=z=>{const G={};if(z.firstName.trim()||(G.firstName="First name is required."),z.lastName.trim()||(G.lastName="Last name is required."),z.email?D(z.email)||(G.email="Please enter a valid email address."):G.email="Email is required.",z.password){const X=V(z.password);X&&(G.password=X)}return["buyer","seller","admin"].includes(z.role)||(G.role="Invalid role selected."),G},Q=async z=>{z.preventDefault(),v({}),i(!0);const G=Y(f);if(Object.keys(G).length>0){v(G),i(!1),s("Please fix the form errors.","error");return}try{const X=JA(f.firstName,f.lastName),xe=(await eP(we,f.email,f.password)).user;await _v(xe,{displayName:X});const ze={email:f.email,name:`${f.firstName} ${f.lastName}`,username:X,role:f.role,preRegistered:!0,createdAt:new Date().toISOString(),uid:xe.uid,profileImage:null};await ts(_e(J,"users",xe.uid),ze),s(`User ${f.email} added successfully! `,"success"),p({email:"",firstName:"",lastName:"",password:"",role:"buyer"})}catch(X){console.error("Error adding user:",X),X.code==="auth/email-already-in-use"?v({email:"This email is already in use."}):X.code==="auth/invalid-email"?v({email:"Invalid email format."}):X.code==="auth/wrong-password"?v({password:"Invalid password."}):s("Failed to add user.","error")}finally{i(!1)}},H=async z=>{z.preventDefault(),v({}),i(!0);const G=Y(x);if(Object.keys(G).length>0){v(G),i(!1),s("Please fix the form errors.","error");return}try{const X=x.username||JA(x.firstName,x.lastName),re=_e(J,"users",x.id);await Qr(re,{email:x.email,name:`${x.firstName} ${x.lastName}`,username:X,role:x.role,updatedAt:new Date().toISOString()}),x.password&&(await ZR(we,x.email),s(`Password reset email sent to ${x.email}! `,"success")),s(`User ${x.email} updated successfully! `,"success"),k(!1),w(null)}catch(X){console.error("Error updating user:",X),s("Failed to update user.","error")}finally{i(!1)}},W=async(z,G)=>{if(window.confirm(`Are you sure you want to delete ${G}? This cannot be undone.`)){i(!0);try{await nn(_e(J,"users",z)),s(`User ${G} deleted successfully! `,"success")}catch(X){console.error("Error deleting user:",X),s("Failed to delete user.","error")}finally{i(!1)}}},de=z=>{w({id:z.id,email:z.email,firstName:z.name.split(" ")[0],lastName:z.name.split(" ").slice(1).join(" ")||"",username:z.username,role:z.role,password:""}),k(!0)},ge=u.filter(z=>z.email.toLowerCase().includes(U.toLowerCase())||z.name.toLowerCase().includes(U.toLowerCase()));return l?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6",children:n.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-4 sm:mb-6 border-b-2 border-blue-500 pb-2 sm:pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-user text-blue-500 text-lg sm:text-xl"}),"Manage Users"]}),n.jsx("div",{className:"mb-4 sm:mb-6",children:n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 mb-1",children:["Search Users",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Search by email or name"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"}),n.jsx("input",{type:"text",value:U,onChange:z=>R(z.target.value),placeholder:"Search by email or name...",className:"w-full py-2 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200"})]})]})}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md mb-4 sm:mb-8",children:[n.jsx("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>P(!T),children:n.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${T?"up":"down"} text-blue-500 text-lg sm:text-xl`}),"Add New User"]})}),T&&n.jsx("div",{className:"mt-4 animate-slide-down",children:n.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[n.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's first name"})]}),n.jsx("input",{type:"text",value:f.firstName,onChange:z=>B("firstName",z.target.value),placeholder:"John",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.firstName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),N.firstName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.firstName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's last name"})]}),n.jsx("input",{type:"text",value:f.lastName,onChange:z=>B("lastName",z.target.value),placeholder:"Doe",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.lastName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),N.lastName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.lastName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's email address"})]}),n.jsx("input",{type:"email",value:f.email,onChange:z=>B("email",z.target.value),placeholder:"john.doe@example.com",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),N.email&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.email]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Password ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Password (min 6 characters)"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:O?"text":"password",value:f.password,onChange:z=>B("password",z.target.value),placeholder:"Enter password",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.password?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),n.jsx("button",{type:"button",onClick:()=>I(!O),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-sm",title:O?"Hide password":"Show password",children:n.jsx("i",{className:`bx ${O?"bx-hide":"bx-show"}`})})]}),N.password&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.password]})]}),n.jsxs("div",{className:"relative group sm:col-span-2",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Role ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Select user role"})]}),n.jsxs("select",{value:f.role,onChange:z=>B("role",z.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.role?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a,children:[n.jsx("option",{value:"buyer",children:"Buyer"}),n.jsx("option",{value:"seller",children:"Seller"}),n.jsx("option",{value:"admin",children:"Admin"})]}),N.role&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.role]})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{type:"submit",disabled:a,className:"py-2 px-4 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-sm",children:[a?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-plus"}),a?"Adding...":"Add User"]})})]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md",children:[n.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 mb-2 sm:mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-ul text-blue-500 text-lg sm:text-xl"}),"All Users"]}),ge.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic text-sm",children:"No users found."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"hidden md:block overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm text-left text-gray-700 dark:text-gray-200",children:[n.jsx("thead",{className:"text-xs uppercase bg-gray-50 dark:bg-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-1 sm:px-2 py-2 min-w-[120px]",children:"Email"}),n.jsx("th",{className:"px-1 sm:px-2 py-2 min-w-[100px]",children:"Name"}),n.jsx("th",{className:"px-1 sm:px-2 py-2 min-w-[80px] hidden lg:table-cell",children:"Username"}),n.jsx("th",{className:"px-1 sm:px-2 py-2 min-w-[70px]",children:"Role"}),n.jsx("th",{className:"px-1 sm:px-2 py-2 min-w-[100px] hidden xl:table-cell",children:"Created At"}),n.jsx("th",{className:"px-1 sm:px-2 py-2 min-w-[80px]",children:"Actions"})]})}),n.jsx("tbody",{children:ge.map(z=>n.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700 hover:shadow-sm transition-all duration-200",children:[n.jsx("td",{className:"px-1 sm:px-2 py-2 break-words",children:z.email}),n.jsx("td",{className:"px-1 sm:px-2 py-2 break-words",children:z.name}),n.jsx("td",{className:"px-1 sm:px-2 py-2 break-words hidden lg:table-cell",children:z.username}),n.jsx("td",{className:"px-1 sm:px-2 py-2",children:n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${z.role==="admin"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":z.role==="seller"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:z.role})}),n.jsx("td",{className:"px-2 sm:px-4 py-2 hidden xl:table-cell",children:new Date(z.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),n.jsxs("td",{className:"px-2 sm:px-4 py-2 flex gap-2",children:[n.jsxs("button",{onClick:()=>de(z),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center gap-1 text-xs sm:text-sm",disabled:a,title:"Edit user",children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:()=>W(z.id,z.email),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 flex items-center gap-1 text-xs sm:text-sm",disabled:a,title:"Delete user",children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]},z.id))})]})}),n.jsx("div",{className:"block md:hidden space-y-3",children:ge.map(z=>n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 text-xs sm:text-sm",children:"Email:"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 break-words text-xs sm:text-sm",children:z.email})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 text-xs sm:text-sm",children:"Name:"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 break-words text-xs sm:text-sm",children:z.name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 text-xs sm:text-sm",children:"Username:"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 break-words text-xs sm:text-sm",children:z.username})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 text-xs sm:text-sm",children:"Role:"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 capitalize text-xs sm:text-sm",children:n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${z.role==="admin"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":z.role==="seller"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:z.role})})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 text-xs sm:text-sm",children:"Created At:"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm",children:new Date(z.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsxs("button",{onClick:()=>de(z),className:"flex-1 py-2 px-3 bg-blue-600 text-white rounded-lg text-xs sm:text-sm hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-1 transition-all duration-200 shadow-sm",disabled:a,children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:()=>W(z.id,z.email),className:"flex-1 py-2 px-3 bg-red-600 text-white rounded-lg text-xs sm:text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-1 transition-all duration-200 shadow-sm",disabled:a,children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]},z.id))})]})]}),j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fade-in",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md w-full max-w-sm sm:max-w-md",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-edit text-blue-500 text-lg sm:text-xl"}),"Edit User"]}),n.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-lg sm:text-xl",title:"Close",children:n.jsx("i",{className:"bx bx-x"})})]}),n.jsxs("form",{onSubmit:H,className:"space-y-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's first name"})]}),n.jsx("input",{type:"text",value:x.firstName,onChange:z=>M("firstName",z.target.value),placeholder:"John",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.firstName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),N.firstName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.firstName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's last name"})]}),n.jsx("input",{type:"text",value:x.lastName,onChange:z=>M("lastName",z.target.value),placeholder:"Doe",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.lastName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),N.lastName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.lastName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's email address"})]}),n.jsx("input",{type:"email",value:x.email,onChange:z=>M("email",z.target.value),placeholder:"john.doe@example.com",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),N.email&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.email]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Username",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Unique username (auto-generated if blank)"})]}),n.jsx("input",{type:"text",value:x.username,onChange:z=>M("username",z.target.value),placeholder:"Auto-generated if blank",className:"mt-1 w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:a})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["New Password (optional)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Enter new password to send reset email"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:C?"text":"password",value:x.password,onChange:z=>M("password",z.target.value),placeholder:"Leave blank to keep current password",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.password?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),n.jsx("button",{type:"button",onClick:()=>E(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-sm",title:C?"Hide password":"Show password",children:n.jsx("i",{className:`bx ${C?"bx-hide":"bx-show"}`})})]}),N.password&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.password]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Role ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Select user role"})]}),n.jsxs("select",{value:x.role,onChange:z=>M("role",z.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${N.role?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a,children:[n.jsx("option",{value:"buyer",children:"Buyer"}),n.jsx("option",{value:"seller",children:"Seller"}),n.jsx("option",{value:"admin",children:"Admin"})]}),N.role&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),N.role]})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:gap-4",children:[n.jsxs("button",{type:"button",onClick:()=>k(!1),className:"py-2 px-3 rounded-lg text-gray-700 dark:text-gray-200 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-xs sm:text-sm flex items-center gap-1 transition-all duration-200 shadow-sm",disabled:a,children:[n.jsx("i",{className:"bx bx-x"}),"Cancel"]}),n.jsxs("button",{type:"submit",disabled:a,className:"py-2 px-3 rounded-lg text-white text-xs sm:text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-1 transition-all duration-200 shadow-sm",children:[a?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-save"}),a?"Updating...":"Update User"]})]})]})]})}),n.jsx(Bre,{alerts:e,removeAlert:r})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Loading..."})]})})]})}function Hre({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg ${s.type==="error"?"bg-red-600":"bg-green-600"} text-white flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Gre(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="success")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(l=>l.id!==a))}}function Wre(){const{alerts:t,addAlert:e,removeAlert:s}=Gre(),r=Ns(),[a,i]=_.useState([]),[l,d]=_.useState(!1);_.useEffect(()=>{const f=N=>{if(!N){e("Please log in.","error"),r("/login");return}},p=we.onAuthStateChanged(f);if(!we.currentUser){f(null);return}const x=Rt(Ue(J,"transactions"),ht("status","==","Pending"),ht("type","==","Withdrawal")),w=ws(x,async N=>{const v=[];for(const j of N.docs){const k={id:j.id,...j.data()},T=_e(J,"sellers",k.userId);try{const P=await Ge(T);if(P.exists()){const U=P.data();if(k.sellerName=U.fullName||"Unknown",k.accountNumber=U.accountNumber||"N/A",U.bankCode){const R=_e(J,"banks",U.bankCode),O=await Ge(R);k.bankName=O.exists()&&O.data().name||"N/A"}else k.bankName="N/A"}else k.sellerName="Unknown",k.bankName="N/A",k.accountNumber="N/A"}catch(P){console.error(`Failed to fetch seller or bank data for ${k.userId}:`,P),k.sellerName="Unknown",k.bankName="N/A",k.accountNumber="N/A"}v.push(k)}i(v)},N=>{e("Failed to fetch transactions.","error"),console.error("Firestore listener error:",N)});return()=>{p(),w&&w()}},[r]);const u=async(f,p,x)=>{var w,N,v;d(!0);try{console.log("Attempting approval for amount:",x);const k=await Ut.post("https://foremade-backend.onrender.com/approve-payout",{transactionId:f,sellerId:p});e(k.data.message,"success"),console.log("Approval response:",k.data)}catch(j){const k=((N=(w=j.response)==null?void 0:w.data)==null?void 0:N.details)||"Approval failed. Please check your Paystack balance.";e(k,"error"),console.error("Approval error:",((v=j.response)==null?void 0:v.data)||j.message)}finally{d(!1)}},h=async(f,p)=>{var x,w;d(!0);try{const v=await Ut.post("https://foremade-backend.onrender.com/reject-payout",{transactionId:f,sellerId:p});e(v.data.message,"success")}catch(N){e(((w=(x=N.response)==null?void 0:x.data)==null?void 0:w.error)||"Rejection failed","error")}finally{d(!1)}};return n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full lg:max-w-5xl md:max-w-4xl sm:max-w-3xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-xl shadow-sm",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-dollar text-blue-500"}),"Admin Payout Monitor"]}),a.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No pending payout requests."}):n.jsx("div",{className:"space-y-4 mt-6",children:a.map(f=>{var p;return n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",f.id]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",f.userId]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller Name:"})," ",f.sellerName]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Bank Name:"})," ",f.bankName]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Account Number:"})," ",f.accountNumber]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ",f.amount.toFixed(2)]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date((p=f.createdAt)==null?void 0:p.toDate()).toLocaleString()]}),n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsxs("button",{onClick:()=>u(f.id,f.userId,f.amount),className:`py-2 px-4 bg-green-600 text-white rounded-lg shadow-md hover:bg-green-700 flex items-center gap-2 ${l?"opacity-50 cursor-not-allowed":""}`,disabled:l,children:[n.jsx("i",{className:"bx bx-check"}),"Approve"]}),n.jsxs("button",{onClick:()=>h(f.id,f.userId),className:`py-2 px-4 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 flex items-center gap-2 ${l?"opacity-50 cursor-not-allowed":""}`,disabled:l,children:[n.jsx("i",{className:"bx bx-x"}),"Reject"]})]})]},f.id)})}),n.jsx(Hre,{alerts:t,removeAlert:s})]})})]})}function Yre({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Kre(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(l=>l.id!==a))}}function Xre({label:t="Minimum Purchase Amount",currencySymbol:e="",firestorePath:s="settings/minimumPurchase",defaultValue:r=25e3}){const{alerts:a,addAlert:i,removeAlert:l}=Kre(),d=Ns(),[u,h]=_.useState(r),[f,p]=_.useState(!0),[x,w]=_.useState(!1);_.useEffect(()=>{if(!we.currentUser){i("Please log in as admin.","error"),d("/login");return}(async()=>{try{const j=_e(J,s),k=await Ge(j);k.exists()&&h(k.data().amount||r)}catch(j){i(`Failed to fetch ${t.toLowerCase()}.`,"error"),console.error("Fetch error:",j)}finally{p(!1)}})()},[d,s,t,r]);const N=async()=>{if(!we.currentUser){i("Please log in as admin.","error"),d("/login");return}if(u<=0){i(`${t} must be greater than zero.`,"error");return}w(!0);try{const v=_e(J,s);await ts(v,{amount:u},{merge:!0}),i(`${t} updated successfully.`,"success")}catch(v){i(`Failed to update ${t.toLowerCase()}.`,"error"),console.error("Save error:",v)}finally{w(!1)}};return f?n.jsx("div",{className:"flex-1 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})}):n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-2 md:pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-dollar text-blue-500"}),t]}),n.jsxs("div",{className:"mt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"minimumPurchase",className:"block text-sm md:text-base font-medium text-gray-700 dark:text-gray-300",children:[t," (",e,")"]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e}),n.jsx("input",{type:"number",id:"minimumPurchase",value:u,onChange:v=>h(Math.max(0,Number(v.target.value))),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",min:"0",required:!0,disabled:x})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Set the ",t.toLowerCase()," buyers must meet to proceed."]})]}),n.jsxs("button",{onClick:N,className:`w-full md:w-auto py-2 px-4 md:px-6 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition ${x?"opacity-50 cursor-not-allowed":""}`,disabled:x,children:[n.jsx("i",{className:"bx bx-save"}),x?"Saving...":"Save Changes"]})]}),n.jsx(Yre,{alerts:a,removeAlert:l})]})}function Qre({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function Jre(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(l=>l.id!==a))}}function Zre(){const{alerts:t,addAlert:e,removeAlert:s}=Jre(),[r,a]=_.useState(!0),[i,l]=_.useState({}),[d,u]=_.useState([]),[h,f]=_.useState({}),[p,x]=_.useState({});_.useEffect(()=>{(async()=>{try{a(!0);const U=(await yt(Ue(J,"categories"))).docs.map(E=>E.id).sort();u(U);const R=_e(J,"feeConfigurations","categoryFees"),O=await Ge(R);let I={};O.exists()?I=O.data():(I=U.reduce((E,D)=>({...E,[D]:{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2,taxRate:.075}}),{}),await ts(R,I));const C={...I};U.forEach(E=>{C[E]||(C[E]={minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2,taxRate:.075})}),l(C)}catch(P){console.error("Error fetching data:",P),e("Failed to load categories or fees.","error")}finally{a(!1)}})()},[]);const w=(T,P,U)=>{l(R=>({...R,[T]:{...R[T],[P]:P==="minPrice"||P==="maxPrice"?U===""?1/0:parseFloat(U)||0:(parseFloat(U)||0)/100}})),f(R=>({...R,[`${T}_${P}`]:""}))},N=()=>{const T={};return d.forEach(P=>{const U=i[P]||{};U.minPrice<0&&(T[`${P}_minPrice`]="Minimum price cannot be negative."),U.maxPrice!==1/0&&U.maxPrice<U.minPrice&&(T[`${P}_maxPrice`]="Maximum price must be greater than minimum price."),(U.buyerProtectionRate<0||U.buyerProtectionRate>1)&&(T[`${P}_buyerProtectionRate`]="Rate must be between 0 and 100%."),(U.handlingRate<0||U.handlingRate>1)&&(T[`${P}_handlingRate`]="Rate must be between 0 and 100%."),(U.taxRate<0||U.taxRate>1)&&(T[`${P}_taxRate`]="Tax rate must be between 0 and 100%.")}),T},v=async T=>{T.preventDefault(),f({}),a(!0);const P=N();if(Object.keys(P).length>0){f(P),a(!1),e("Please fix the form errors.","error");return}try{const U=_e(J,"feeConfigurations","categoryFees");await ts(U,i),e("Fees updated successfully! ","success")}catch(U){console.error("Error saving fees:",U),e("Failed to save fees.","error")}finally{a(!1)}},j=T=>{l(P=>({...P,[T]:{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2,taxRate:.075}})),f(P=>({...P,[`${T}_minPrice`]:"",[`${T}_maxPrice`]:"",[`${T}_buyerProtectionRate`]:"",[`${T}_handlingRate`]:"",[`${T}_taxRate`]:""}))},k=T=>{x(P=>({...P,[T]:!P[T]}))};return r?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsx(Xre,{label:"Set Minimum Purchase",currencySymbol:"",firestorePath:"settings/minimumPurchase",defaultValue:25e3}),n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mt-8 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-money text-blue-500"}),"Edit Category Fees"]}),d.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No categories found. Add categories in Firestore to set fees."}):n.jsxs("form",{onSubmit:v,className:"space-y-6",children:[d.map(T=>{var P,U,R,O,I,C,E;return n.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>k(T),children:[n.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${p[T]?"up":"down"} text-blue-500`}),T]}),n.jsxs("button",{onClick:D=>{D.stopPropagation(),j(T)},disabled:r,className:"text-gray-600 hover:text-gray-800 dark:hover:text-gray-400 text-sm flex items-center gap-1",title:"Reset fees to default",children:[n.jsx("i",{className:"bx bx-refresh"}),"Reset"]})]}),p[T]&&n.jsx("div",{className:"mt-4 ml-4 space-y-4 animate-slide-down",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Minimum Price ()",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Minimum product price for this category"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:""}),n.jsx("input",{type:"number",value:((P=i[T])==null?void 0:P.minPrice)===1/0?"":((U=i[T])==null?void 0:U.minPrice)||"",onChange:D=>w(T,"minPrice",D.target.value),min:"0",step:"0.01",placeholder:"1000",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${T}_minPrice`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r})]}),h[`${T}_minPrice`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),h[`${T}_minPrice`]]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Maximum Price ()",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Maximum product price (leave blank for no limit)"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:""}),n.jsx("input",{type:"number",value:((R=i[T])==null?void 0:R.maxPrice)===1/0?"":((O=i[T])==null?void 0:O.maxPrice)||"",onChange:D=>w(T,"maxPrice",D.target.value),min:"0",step:"0.01",placeholder:"No maximum",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${T}_maxPrice`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r})]}),h[`${T}_maxPrice`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),h[`${T}_maxPrice`]]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Buyer Protection Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for buyer protection"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:((I=i[T])==null?void 0:I.buyerProtectionRate)*100||"",onChange:D=>w(T,"buyerProtectionRate",D.target.value),min:"0",max:"100",step:"0.01",placeholder:"8",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${T}_buyerProtectionRate`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),h[`${T}_buyerProtectionRate`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),h[`${T}_buyerProtectionRate`]]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Handling Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for handling"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:((C=i[T])==null?void 0:C.handlingRate)*100||"",onChange:D=>w(T,"handlingRate",D.target.value),min:"0",max:"100",step:"0.01",placeholder:"20",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${T}_handlingRate`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),h[`${T}_handlingRate`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),h[`${T}_handlingRate`]]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tax Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Tax percentage for this category"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:((E=i[T])==null?void 0:E.taxRate)*100||"",onChange:D=>w(T,"taxRate",D.target.value),min:"0",max:"100",step:"0.01",placeholder:"7.5",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${h[`${T}_taxRate`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),h[`${T}_taxRate`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),h[`${T}_taxRate`]]})]})]})})]},T)}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsxs("button",{type:"submit",disabled:r,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-sm",children:[r?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-save"}),r?"Saving...":"Save Fees"]})})]}),n.jsx(Qre,{alerts:t,removeAlert:s})]})})]})}function ene(){const[t,e]=_.useState([]),[s,r]=_.useState({Fashion:[],Gadgets:[]}),[a,i]=_.useState(""),[l,d]=_.useState("All"),[u,h]=_.useState([]),[f,p]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const j=Rt(Ue(J,"products"),ht("status","==","approved")),T=(await yt(j)).docs.map(O=>({id:O.id,...O.data()})),P=new Set(T.map(O=>O.category||"Other"));h(["All",...P]);const U=await yt(Ue(J,"trendingItems")),R={Fashion:[],Gadgets:[]};U.forEach(O=>{const I=O.data();if(I.category==="Fashion"||I.category==="Gadgets"){const C=T.find(E=>E.id===I.productId);R[I.category].push({id:O.id,...I,productName:(C==null?void 0:C.name)||"Unknown Product"})}}),r(R),e(T)}catch(j){console.error("Error loading data:",j),Ne.error("Failed to load products or trending items.")}finally{p(!1)}})()},[]);const x=async(v,j)=>{if(s[j].length>=10){Ne.error(`Cannot add more to trending ${j}. Maximum 10 items reached.`);return}try{const k=_e(Ue(J,"trendingItems"));await ts(k,{productId:v,category:j,addedAt:new Date});const T=t.find(P=>P.id===v);r({...s,[j]:[...s[j],{id:k.id,productId:v,productName:T.name}]}),Ne.success(`Added to trending ${j}!`)}catch(k){console.error("Error adding trending item:",k),Ne.error("Failed to add trending item.")}},w=async(v,j)=>{try{await nn(_e(J,"trendingItems",v)),r({...s,[j]:s[j].filter(k=>k.id!==v)}),Ne.success("Removed from trending items!")}catch(k){console.error("Error removing trending item:",k),Ne.error("Failed to remove trending item.")}},N=t.filter(v=>v.name.toLowerCase().includes(a.toLowerCase())&&(l==="All"||v.category===l));return f?n.jsx("div",{className:"py-4 xs:py-6",children:n.jsx("div",{className:"container mx-auto px-2 xs:px-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 xs:p-6 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6"}),n.jsx("div",{className:"space-y-4",children:[...Array(5)].map((v,j)=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},j))})]})})}):n.jsx("div",{className:"py-4 xs:py-6",children:n.jsxs("div",{className:"container mx-auto px-2 xs:px-4",children:[n.jsxs("h1",{className:"text-xl xs:text-2xl font-bold text-gray-800 mb-4 xs:mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-trending-up text-blue-600 mr-2 text-2xl"}),"Edit Trending Items"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 xs:gap-4 mb-4 xs:mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("input",{type:"text",placeholder:"Search products...",value:a,onChange:v=>i(v.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all","aria-label":"Search products"}),n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg"})]}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx("select",{value:l,onChange:v=>d(v.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all appearance-none","aria-label":"Filter by category",children:u.map(v=>n.jsx("option",{value:v,children:v},v))}),n.jsx("i",{className:"bx bx-filter absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg"})]})]}),["Fashion","Gadgets"].map(v=>n.jsxs("div",{className:"mb-6 xs:mb-8 bg-white rounded-lg shadow-sm",children:[n.jsx("div",{className:"sticky top-0 bg-white z-10 p-4 xs:p-6 border-b border-gray-100",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[n.jsx("i",{className:"bx bx-star text-blue-600 mr-2 text-xl"}),"Trending in ",v]})}),n.jsxs("div",{className:"p-4 xs:p-6",children:[n.jsxs("div",{className:"mb-4 xs:mb-6",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Current Trending Products"}),s[v].length===0?n.jsxs("p",{className:"text-gray-500 text-sm flex items-center",children:[n.jsx("i",{className:"bx bx-list-ul mr-1 text-gray-400"}),"No trending products selected for ",v,"."]}):n.jsx("ul",{className:"space-y-2 animate-fadeIn",children:s[v].map(j=>n.jsxs("li",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-800",children:j.productName}),n.jsx("button",{onClick:()=>w(j.id,v),className:"text-red-500 hover:text-red-600 transform hover:scale-110 transition-transform","aria-label":`Remove ${j.productName} from trending ${v}`,children:n.jsx("i",{className:"bx bx-trash text-lg"})})]},j.id))})]}),n.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Add Products"}),N.length===0?n.jsxs("p",{className:"text-gray-500 text-sm flex items-center",children:[n.jsx("i",{className:"bx bx-search-alt-2 mr-1 text-gray-400"}),"No products match your search or filter."]}):n.jsx("ul",{className:"space-y-2 max-h-80 overflow-y-auto animate-fadeIn",children:N.map(j=>{var k;return n.jsxs("li",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[((k=j.imageUrls)==null?void 0:k[0])&&n.jsx("img",{src:j.imageUrls[0],alt:j.name,className:"w-10 h-10 object-cover rounded"}),n.jsx("span",{className:"text-sm text-gray-800",children:j.name})]}),n.jsx("button",{onClick:()=>x(j.id,v),className:`text-blue-600 hover:text-blue-500 text-sm transform hover:scale-110 transition-transform ${s[v].some(T=>T.productId===j.id)?"opacity-50 cursor-not-allowed":""}`,disabled:s[v].some(T=>T.productId===j.id),"aria-label":`Add ${j.name} to trending ${v}`,children:n.jsx("i",{className:"bx bx-plus text-lg"})})]},j.id)})})]})]},v))]})})}function tne({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function sne(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(l=>l.id!==a))}}}function rne(){const{alerts:t,addAlert:e,removeAlert:s}=sne(),[r,a]=_.useState([]),[i,l]=_.useState({id:"",desktop:"",tablet:"",mobile:""}),[d,u]=_.useState(!1),[h,f]=_.useState({desktop:!1,tablet:!1,mobile:!1}),[p,x]=_.useState({desktop:0,tablet:0,mobile:0}),[w,N]=_.useState(!0),[v,j]=_.useState(!0);_.useEffect(()=>{(async()=>{try{N(!0);const V=(await yt(Ue(J,"carouselSlides"))).docs.map(B=>({id:B.id,...B.data()}));a(V),e("Slides loaded successfully!","success")}catch(D){console.error("Error fetching slides:",D),e("Failed to load slides.","error")}finally{N(!1)}})()},[]);const k=E=>{const{name:D,value:V}=E.target;l(B=>({...B,[D]:V}))},T=async(E,D)=>{var Y;const V=E.target.files[0];if(!V)return;if(!["image/gif","video/mp4","video/webm","image/jpeg","image/png"].includes(V.type)){e(`Invalid file type for ${D}. Use GIF, MP4, WebM, JPEG, or PNG.`,"error");return}const M=V.type.startsWith("video")?50*1024*1024:10*1024*1024;if(V.size>M){e(`File too large for ${D}. Max size is ${V.type.startsWith("video")?"50MB":"10MB"}.`,"error");return}f(Q=>({...Q,[D]:!0})),x(Q=>({...Q,[D]:0}));try{const Q=new FormData;Q.append("file",V),Q.append("isVideo",V.type.startsWith("video").toString());const W=await Ut.post("https://foremade-backend.onrender.com/upload",Q,{headers:{"Content-Type":"multipart/form-data"},timeout:12e4,onUploadProgress:de=>{const ge=Math.round(de.loaded*100/de.total);x(z=>({...z,[D]:ge}))}});if(W.status!==200||!W.data.url)throw new Error("Failed to upload media to Cloudinary.");l(de=>({...de,[D]:W.data.url})),e(`${D} media uploaded!`,"success")}catch(Q){console.error("Media upload error:",{message:Q.message,code:Q.code,response:(Y=Q.response)==null?void 0:Y.data}),e(Q.code==="ECONNABORTED"?"Upload timed out. Please check your network.":Q.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network.":`Failed to upload ${D} media.`,"error")}finally{f(Q=>({...Q,[D]:!1})),x(Q=>({...Q,[D]:0}))}},P=E=>E?E.match(/\.(mp4|webm)$/i)?n.jsx("video",{src:E,controls:!0,className:"mt-2 h-20 w-auto rounded shadow-sm",title:"Video preview"}):n.jsx("img",{src:E,alt:"Media preview",className:"mt-2 h-20 w-auto rounded shadow-sm"}):null,U=async E=>{if(E.preventDefault(),!i.desktop||!i.tablet||!i.mobile){e("All media fields are required.","error");return}try{N(!0);const D=d?i.id:`slide-${Date.now()}`;await ts(_e(J,"carouselSlides",D),{desktop:i.desktop,tablet:i.tablet,mobile:i.mobile,createdAt:new Date().toISOString()}),e(d?"Slide updated successfully! ":"Slide added successfully! ","success"),a(V=>d?V.map(B=>B.id===D?{id:D,...i}:B):[...V,{id:D,...i}]),I()}catch(D){console.error("Error saving slide:",D),e("Failed to save slide.","error")}finally{N(!1)}},R=E=>{l(E),u(!0),j(!0)},O=async E=>{if(confirm("Delete this slide?"))try{N(!0),await nn(_e(J,"carouselSlides",E)),a(D=>D.filter(V=>V.id!==E)),e("Slide deleted successfully!","success")}catch(D){console.error("Error deleting slide:",D),e("Failed to delete slide.","error")}finally{N(!1)}},I=()=>{l({id:"",desktop:"",tablet:"",mobile:""}),u(!1)},C=()=>{j(E=>!E)};return w?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-image text-blue-500"}),"Manage Carousel Banners"]}),n.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:C,children:[n.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${v?"up":"down"} text-blue-500`}),d?"Edit Slide":"Add New Slide"]}),d&&n.jsxs("button",{onClick:E=>{E.stopPropagation(),I()},className:"text-gray-600 hover:text-gray-800 dark:hover:text-gray-400 text-sm flex items-center gap-1",title:"Cancel editing",children:[n.jsx("i",{className:"bx bx-x"}),"Cancel"]})]}),v&&n.jsxs("form",{onSubmit:U,className:"mt-4 ml-4 space-y-4 animate-slide-down",children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["desktop","tablet","mobile"].map(E=>n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[`${E.charAt(0).toUpperCase()+E.slice(1)} Media`,n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:`Upload an image, GIF, or short video optimized for ${E} devices (GIF 10MB, Videos 50MB)`})]}),n.jsx("div",{className:"relative",children:n.jsx("input",{type:"text",name:E,value:i[E],onChange:k,placeholder:"Enter media URL or upload below",className:"mt-1 w-full py-2 pl-3 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:h[E]})}),n.jsx("input",{type:"file",accept:"image/*,video/mp4,video/webm",onChange:D=>T(D,E),className:"mt-2 w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",disabled:h[E]}),h[E]&&n.jsxs("div",{className:"mt-2",children:[n.jsxs("p",{className:"text-sm text-gray-500",children:["Uploading... ",p[E],"%"]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${p[E]}%`}})})]}),P(i[E])]},E))}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsxs("button",{type:"submit",disabled:h.desktop||h.tablet||h.mobile||w,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-sm",children:[w?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-save"}),w?"Saving...":d?"Update Slide":"Add Slide"]})})]})]}),n.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:[n.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-ul text-blue-500"}),"Current Slides"]}),r.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No slides available."}):n.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(E=>n.jsxs("li",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all duration-200",children:[P(E.desktop),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Slide ",E.id.split("-")[1]]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>R(E),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-sm",title:"Edit slide",children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:()=>O(E.id),className:"text-red-600 hover:text-red-800 flex items-center gap-1 text-sm",title:"Delete slide",children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]})]},E.id))})]}),n.jsx(ene,{}),n.jsx(tne,{alerts:t,removeAlert:s})]})})]})}function nne({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function ane(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(l=>l.id!==a))}}}function ine(){const{alerts:t,addAlert:e,removeAlert:s}=ane(),[r,a]=_.useState([]),[i,l]=_.useState([]),[d,u]=_.useState({id:"",productId:"",discount:"",startDate:"",endDate:""}),[h,f]=_.useState(!1),[p,x]=_.useState(!0),[w,N]=_.useState(!0),[v,j]=_.useState({});_.useEffect(()=>{(async()=>{try{x(!0);const V=(await yt(Ue(J,"products"))).docs.map(Y=>({id:Y.id,...Y.data()})).filter(Y=>Y.status==="approved");l(V);const M=(await yt(Ue(J,"dailyDeals"))).docs.map(Y=>({id:Y.id,...Y.data()}));a(M),e("Data loaded successfully!","success")}catch(D){console.error("Error fetching data:",D),e("Failed to load products or deals.","error")}finally{x(!1)}})()},[]);const k=E=>{const{name:D,value:V}=E.target;u(B=>({...B,[D]:V})),j(B=>({...B,[D]:""}))},T=()=>{const E={};return d.productId||(E.productId="Please select a product."),(!d.discount||d.discount<0||d.discount>100)&&(E.discount="Discount must be between 0 and 100%."),d.startDate||(E.startDate="Start date is required."),d.endDate||(E.endDate="End date is required."),d.startDate&&d.endDate&&d.startDate>d.endDate&&(E.endDate="End date must be after start date."),E},P=async E=>{E.preventDefault();const D=T();if(Object.keys(D).length>0){j(D),e("Please fix form errors.","error");return}try{x(!0);const V=h?d.id:`deal-${Date.now()}`,B={productId:d.productId,discount:parseFloat(d.discount)/100,startDate:d.startDate,endDate:d.endDate,createdAt:new Date().toISOString()};await ts(_e(J,"dailyDeals",V),B),e(h?"Deal updated successfully! ":"Deal added successfully! ","success"),a(M=>h?M.map(Y=>Y.id===V?{id:V,...B}:Y):[...M,{id:V,...B}]),O()}catch(V){console.error("Error saving deal:",V),e("Failed to save deal.","error")}finally{x(!1)}},U=E=>{u({id:E.id,productId:E.productId,discount:(E.discount*100).toString(),startDate:E.startDate,endDate:E.endDate}),f(!0),N(!0)},R=async E=>{if(confirm("Delete this deal?"))try{x(!0),await nn(_e(J,"dailyDeals",E)),a(D=>D.filter(V=>V.id!==E)),e("Deal deleted successfully!","success")}catch(D){console.error("Error deleting deal:",D),e("Failed to delete deal.","error")}finally{x(!1)}},O=()=>{u({id:"",productId:"",discount:"",startDate:"",endDate:""}),f(!1),j({})},I=()=>{N(E=>!E)},C=E=>i.find(D=>D.id===E)||{};return p?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-purchase-tag text-blue-500"}),"Manage Daily Deals"]}),n.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:I,children:[n.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${w?"up":"down"} text-blue-500`}),h?"Edit Deal":"Add New Deal"]}),h&&n.jsxs("button",{onClick:E=>{E.stopPropagation(),O()},className:"text-gray-600 hover:text-gray-800 dark:hover:text-gray-400 text-sm flex items-center gap-1",title:"Cancel editing",children:[n.jsx("i",{className:"bx bx-x"}),"Cancel"]})]}),w&&n.jsxs("form",{onSubmit:P,className:"mt-4 ml-4 space-y-4 animate-slide-down",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select a product for the deal"})]}),n.jsxs("select",{name:"productId",value:d.productId,onChange:k,className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.productId?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,children:[n.jsx("option",{value:"",children:"Select a product"}),i.map(E=>n.jsx("option",{value:E.id,children:E.name||"Unnamed Product"},E.id))]}),v.productId&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.productId]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Discount (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Discount percentage for the deal"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",name:"discount",value:d.discount,onChange:k,min:"0",max:"100",step:"0.01",placeholder:"20",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.discount?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),v.discount&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.discount]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Start Date",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"When the deal starts"})]}),n.jsx("input",{type:"date",name:"startDate",value:d.startDate,onChange:k,className:`mt-1 w-full py-2 pl-3 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.startDate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),v.startDate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.startDate]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["End Date",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"When the deal ends"})]}),n.jsx("input",{type:"date",name:"endDate",value:d.endDate,onChange:k,className:`mt-1 w-full py-2 pl-3 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.endDate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),v.endDate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.endDate]})]})]}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsxs("button",{type:"submit",disabled:p,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-sm",children:[p?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-save"}),p?"Saving...":h?"Update Deal":"Add Deal"]})})]})]}),n.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:[n.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-ul text-blue-500"}),"Current Daily Deals"]}),r.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No deals available."}):n.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(E=>{var V;const D=C(E.productId);return n.jsxs("li",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all duration-200",children:[n.jsx("img",{src:((V=D.imageUrls)==null?void 0:V[0])||"/images/placeholder.jpg",alt:D.name||"Product",className:"h-32 w-full object-cover rounded-lg mb-2"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:D.name||"Unnamed Product"}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Discount: ",(E.discount*100).toFixed(2),"%"]}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[E.startDate," to ",E.endDate]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Deal ",E.id.split("-")[1]]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>U(E),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-sm",title:"Edit deal",children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:()=>R(E.id),className:"text-red-600 hover:text-red-800 flex items-center gap-1 text-sm",title:"Delete deal",children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]})]},E.id)})})]}),n.jsx(nne,{alerts:t,removeAlert:s})]})})]})}function one({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function lne(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(l=>l.id!==a))}}const Zg=async(t,e=3,s=1e3)=>{for(let r=1;r<=e;r++)try{return await t()}catch(a){if(r===e)throw a;const i=s*Math.pow(2,r-1);console.warn(`Retry ${r}/${e} after ${i}ms due to: ${a.message}`),await new Promise(l=>setTimeout(l,i))}};function cne(){const{alerts:t,addAlert:e,removeAlert:s}=lne(),[r,a]=_.useState(!0),[i,l]=_.useState([]),[d,u]=_.useState({}),[h,f]=_.useState({}),[p,x]=_.useState(""),[w,N]=_.useState(null),[v,j]=_.useState(null),[k,T]=_.useState({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),[P,U]=_.useState({}),[R,O]=_.useState({}),[I,C]=_.useState(null),[E,D]=_.useState(null),[V,B]=_.useState({}),[M,Y]=_.useState({}),[Q,H]=_.useState({category:null,subcategory:null,subSubcategory:null});_.useEffect(()=>{let Z=!0;return(async()=>{const Te=te=>new Promise((Oe,Ae)=>setTimeout(()=>Ae(new Error(`Data fetch timed out after ${te}ms`)),te));try{a(!0);const Oe=(await Zg(()=>Promise.race([yt(Ue(J,"categories")),Te(3e4)]))).docs.map(lt=>lt.id).sort();Z&&l(Oe);const Ae=Oe.map(lt=>Zg(()=>Promise.race([Ge(_e(J,"customSubcategories",lt)),Te(3e4)])).then(xt=>({cat:lt,subcats:xt.exists()?xt.data().subcategories||[]:[]}))),qe=Oe.map(lt=>Zg(()=>Promise.race([Ge(_e(J,"customSubSubcategories",lt)),Te(3e4)])).then(xt=>({cat:lt,subSubcats:xt.exists()?xt.data()||{}:{}}))),[Ve,Xe]=await Promise.all([Promise.all(Ae),Promise.all(qe)]),Et=Ve.reduce((lt,{cat:xt,subcats:ct})=>(lt[xt]=ct,lt),{}),Qe=Xe.reduce((lt,{cat:xt,subSubcats:ct})=>(lt[xt]=ct,lt),{});Z&&(u(Et),f(Qe));const nt=_e(J,"feeConfigurations","categoryFees"),It=await Zg(()=>Promise.race([Ge(nt),Te(3e4)]));if(It.exists())Z&&j(It.data());else{const lt={};await ts(nt,lt),Z&&j(lt)}}catch(te){Z&&(console.error("Error fetching data:",te),e(`Failed to load data: ${te.message}`,"error"))}finally{Z&&a(!1)}})(),()=>{Z=!1}},[]);const W=async()=>{if(!p.trim()){B({newCategory:"Category name is required."}),e("Category name is required.","error");return}if(i.includes(p.trim())){B({newCategory:"Category already exists."}),e("Category already exists.","error");return}const Z={};if(k.minPrice&&parseFloat(k.minPrice)<0&&(Z.minPrice="Minimum price cannot be negative."),k.maxPrice&&parseFloat(k.maxPrice)<(parseFloat(k.minPrice)||0)&&(Z.maxPrice="Maximum price must be greater than minimum price."),k.buyerProtectionRate&&(parseFloat(k.buyerProtectionRate)<0||parseFloat(k.buyerProtectionRate)>100)&&(Z.buyerProtectionRate="Rate must be between 0 and 100%."),k.handlingRate&&(parseFloat(k.handlingRate)<0||parseFloat(k.handlingRate)>100)&&(Z.handlingRate="Rate must be between 0 and 100%."),k.taxRate&&(parseFloat(k.taxRate)<0||parseFloat(k.taxRate)>100)&&(Z.taxRate="Tax rate must be between 0 and 100%."),Object.keys(Z).length>0){B(Z),e("Please fix the form errors.","error");return}a(!0);try{const Se=_e(J,"categories",p.trim());await ts(Se,{name:p.trim(),createdAt:new Date});const Te=_e(J,"feeConfigurations","categoryFees"),te={...v,[p.trim()]:{minPrice:parseFloat(k.minPrice)||1e3,maxPrice:k.maxPrice?parseFloat(k.maxPrice):1/0,buyerProtectionRate:(parseFloat(k.buyerProtectionRate)||8)/100,handlingRate:(parseFloat(k.handlingRate)||20)/100,taxRate:(parseFloat(k.taxRate)||7.5)/100}};await ts(Te,te),l([...i,p.trim()].sort()),j(te),x(""),T({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),B({}),e("Category added successfully! ","success")}catch(Se){console.error("Error adding category:",Se),e("Failed to add category.","error")}finally{a(!1)}},de=async Z=>{if(!p.trim()){B({newCategory:"Category name is required."}),e("Category name is required.","error");return}if(i.includes(p.trim())&&p.trim()!==Z){B({newCategory:"Category name already exists."}),e("Category name already exists.","error");return}const Se={};if(k.minPrice&&parseFloat(k.minPrice)<0&&(Se.minPrice="Minimum price cannot be negative."),k.maxPrice&&parseFloat(k.maxPrice)<(parseFloat(k.minPrice)||0)&&(Se.maxPrice="Maximum price must be greater than minimum price."),k.buyerProtectionRate&&(parseFloat(k.buyerProtectionRate)<0||parseFloat(k.buyerProtectionRate)>100)&&(Se.buyerProtectionRate="Rate must be between 0 and 100%."),k.handlingRate&&(parseFloat(k.handlingRate)<0||parseFloat(k.handlingRate)>100)&&(Se.handlingRate="Rate must be between 0 and 100%."),k.taxRate&&(parseFloat(k.taxRate)<0||parseFloat(k.taxRate)>100)&&(Se.taxRate="Tax rate must be between 0 and 100%."),Object.keys(Se).length>0){B(Se),e("Please fix the form errors.","error");return}a(!0);try{const Te=_e(J,"categories",Z),te=_e(J,"categories",p.trim());await ts(te,{name:p.trim(),createdAt:new Date}),await nn(Te);const Oe={...v};Oe[p.trim()]={minPrice:parseFloat(k.minPrice)||Oe[Z].minPrice,maxPrice:k.maxPrice?parseFloat(k.maxPrice):Oe[Z].maxPrice,buyerProtectionRate:(parseFloat(k.buyerProtectionRate)||Oe[Z].buyerProtectionRate*100)/100,handlingRate:(parseFloat(k.handlingRate)||Oe[Z].handlingRate*100)/100,taxRate:(parseFloat(k.taxRate)||Oe[Z].taxRate||7.5)/100},delete Oe[Z];const Ae=_e(J,"feeConfigurations","categoryFees");await ts(Ae,Oe);const qe=_e(J,"customSubcategories",Z),Ve=await Ge(qe);if(Ve.exists()){const Qe=_e(J,"customSubcategories",p.trim());await ts(Qe,Ve.data()),await nn(qe)}const Xe=_e(J,"customSubSubcategories",Z),Et=await Ge(Xe);if(Et.exists()){const Qe=_e(J,"customSubSubcategories",p.trim());await ts(Qe,Et.data()),await nn(Xe)}l(i.map(Qe=>Qe===Z?p.trim():Qe).sort()),j(Oe),u(Qe=>{const nt={...Qe,[p.trim()]:Qe[Z]||[]};return delete nt[Z],nt}),f(Qe=>{const nt={...Qe,[p.trim()]:Qe[Z]||{}};return delete nt[Z],nt}),x(""),T({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),N(null),B({}),e("Category updated successfully! ","success")}catch(Te){console.error("Error editing category:",Te),e("Failed to edit category.","error")}finally{a(!1)}},ge=async Z=>{a(!0);try{await nn(_e(J,"categories",Z));const Se={...v};delete Se[Z];const Te=_e(J,"feeConfigurations","categoryFees");await ts(Te,Se),j(Se),await nn(_e(J,"customSubcategories",Z)),await nn(_e(J,"customSubSubcategories",Z)),l(i.filter(te=>te!==Z)),u(te=>{const Oe={...te};return delete Oe[Z],Oe}),f(te=>{const Oe={...te};return delete Oe[Z],Oe}),e("Category deleted successfully! ","success")}catch(Se){console.error("Error deleting category:",Se),e("Failed to delete category.","error")}finally{a(!1)}},z=async Z=>{var Te,te;const Se=(Te=P[Z])==null?void 0:Te.trim();if(!Se){e("Subcategory name is required.","error");return}if((te=d[Z])!=null&&te.includes(Se)){e("Subcategory already exists.","error");return}a(!0);try{const Oe=_e(J,"customSubcategories",Z),Ae=await Ge(Oe),Ve=[...Ae.exists()?Ae.data().subcategories||[]:[],Se];await ts(Oe,{subcategories:Ve}),u(Xe=>({...Xe,[Z]:Ve})),U(Xe=>({...Xe,[Z]:""})),e(`Subcategory "${Se}" added! `,"success")}catch(Oe){console.error("Error adding subcategory:",Oe),e("Failed to add subcategory.","error")}finally{a(!1)}},G=async(Z,Se)=>{var te,Oe;const Te=(te=P[Z])==null?void 0:te.trim();if(!Te){e("Subcategory name is required.","error");return}if((Oe=d[Z])!=null&&Oe.includes(Te)&&Te!==Se){e("Subcategory name already exists.","error");return}a(!0);try{const Ae=_e(J,"customSubcategories",Z),qe=await Ge(Ae),Xe=(qe.exists()?qe.data().subcategories||[]:[]).map(lt=>lt===Se?Te:lt);await ts(Ae,{subcategories:Xe});const Et=_e(J,"customSubSubcategories",Z),Qe=await Ge(Et),nt=Qe.exists()?Qe.data()||{}:{},It=Object.fromEntries(Object.entries(nt).map(([lt,xt])=>lt===Se?[Te,xt]:[lt,xt]));await ts(Et,It),u(lt=>({...lt,[Z]:Xe})),f(lt=>({...lt,[Z]:It})),U(lt=>({...lt,[Z]:""})),C(null),e(`Subcategory "${Se}" updated to "${Te}"! `,"success")}catch(Ae){console.error("Error editing subcategory:",Ae),e("Failed to edit subcategory.","error")}finally{a(!1)}},X=async(Z,Se)=>{a(!0);try{const Te=_e(J,"customSubcategories",Z),te=await Ge(Te),Ae=(te.exists()?te.data().subcategories||[]:[]).filter(Qe=>Qe!==Se);await ts(Te,{subcategories:Ae});const qe=_e(J,"customSubSubcategories",Z),Ve=await Ge(qe),Et={...Ve.exists()?Ve.data()||{}:{}};delete Et[Se],await ts(qe,Et),u(Qe=>({...Qe,[Z]:Ae})),f(Qe=>({...Qe,[Z]:Et})),e(`Subcategory "${Se}" deleted successfully! `,"success")}catch(Te){console.error("Error deleting subcategory:",Te),e("Failed to delete subcategory.","error")}finally{a(!1)}},re=async(Z,Se)=>{var te,Oe,Ae;const Te=(te=R[`${Z}_${Se}`])==null?void 0:te.trim();if(!Te){e("Sub-subcategory name is required.","error");return}if((Ae=(Oe=h[Z])==null?void 0:Oe[Se])!=null&&Ae.includes(Te)){e("Sub-subcategory already exists.","error");return}a(!0);try{const qe=_e(J,"customSubSubcategories",Z),Ve=await Ge(qe),Xe=Ve.exists()?Ve.data()||{}:{},Et={...Xe,[Se]:[...Xe[Se]||[],Te]};await ts(qe,Et),f(Qe=>({...Qe,[Z]:Et})),O(Qe=>({...Qe,[`${Z}_${Se}`]:""})),e(`Sub-subcategory "${Te}" added! `,"success")}catch(qe){console.error("Error adding sub-subcategory:",qe),e("Failed to add sub-subcategory.","error")}finally{a(!1)}},xe=async(Z,Se,Te)=>{var Oe,Ae,qe;const te=(Oe=R[`${Z}_${Se}`])==null?void 0:Oe.trim();if(!te){e("Sub-subcategory name is required.","error");return}if((qe=(Ae=h[Z])==null?void 0:Ae[Se])!=null&&qe.includes(te)&&te!==Te){e("Sub-subcategory already exists.","error");return}a(!0);try{const Ve=_e(J,"customSubSubcategories",Z),Xe=await Ge(Ve),Et=Xe.exists()?Xe.data()||{}:{},Qe={...Et,[Se]:Et[Se].map(nt=>nt===Te?te:nt)};await ts(Ve,Qe),f(nt=>({...nt,[Z]:Qe})),O(nt=>({...nt,[`${Z}_${Se}`]:""})),D(null),e(`Sub-subcategory "${Te}" updated to "${te}"! `,"success")}catch(Ve){console.error("Error editing sub-subcategory:",Ve),e("Failed to edit sub-subcategory.","error")}finally{a(!1)}},ze=async(Z,Se,Te)=>{a(!0);try{const te=_e(J,"customSubSubcategories",Z),Oe=await Ge(te),Ae=Oe.exists()?Oe.data()||{}:{},qe={...Ae,[Se]:Ae[Se].filter(Ve=>Ve!==Te)};await ts(te,qe),f(Ve=>({...Ve,[Z]:qe})),e(`Sub-subcategory "${Te}" deleted successfully! `,"success")}catch(te){console.error("Error deleting sub-subcategory:",te),e("Failed to delete sub-subcategory.","error")}finally{a(!1)}},me=(Z,Se)=>{T(Te=>({...Te,[Z]:Se})),B(Te=>({...Te,[Z]:""}))},Ce=Z=>{Y(Se=>({...Se,[Z]:!Se[Z]}))},ve=()=>{x(""),T({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),N(null),B({})};return r||!v?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-xl shadow-lg",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-category text-blue-500"}),"Manage Categories"]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-6 bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-inner",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-plus-circle text-green-500"}),w?"Edit Category":"Add New Category"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Category Name",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Unique name for the category (e.g., Electronics)"})]}),n.jsx("input",{type:"text",value:p,onChange:Z=>x(Z.target.value),placeholder:"e.g., Electronics",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${V.newCategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r}),V.newCategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),V.newCategory]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Minimum Price ()",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Minimum product price for this category"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:""}),n.jsx("input",{type:"number",value:k.minPrice,onChange:Z=>me("minPrice",Z.target.value),min:"0",step:"0.01",placeholder:"1000",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${V.minPrice?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r})]}),V.minPrice&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),V.minPrice]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Maximum Price ()",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Maximum product price (leave blank for no limit)"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:""}),n.jsx("input",{type:"number",value:k.maxPrice,onChange:Z=>me("maxPrice",Z.target.value),min:"0",step:"0.01",placeholder:"No maximum",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${V.maxPrice?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r})]}),V.maxPrice&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),V.maxPrice]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Buyer Protection Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for buyer protection"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:k.buyerProtectionRate,onChange:Z=>me("buyerProtectionRate",Z.target.value),min:"0",step:"0.01",placeholder:"8",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${V.buyerProtectionRate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),V.buyerProtectionRate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),V.buyerProtectionRate]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Handling Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for handling"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:k.handlingRate,onChange:Z=>me("handlingRate",Z.target.value),min:"0",step:"0.01",placeholder:"20",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${V.handlingRate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),V.handlingRate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),V.handlingRate]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tax Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Tax percentage for this category"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:k.taxRate,onChange:Z=>me("taxRate",Z.target.value),min:"0",step:"0.01",placeholder:"7.5",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${V.taxRate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:r}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),V.taxRate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),V.taxRate]})]})]}),n.jsx("div",{className:"flex gap-4 mt-6",children:w?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>de(w),disabled:r,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[n.jsx("i",{className:"bx bx-save"}),r?"Updating...":"Update Category"]}),n.jsxs("button",{onClick:ve,disabled:r,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-red-600 hover:bg-red-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[n.jsx("i",{className:"bx bx-x"}),"Cancel"]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:W,disabled:r,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[n.jsx("i",{className:"bx bx-plus"}),r?"Adding...":"Add Category"]}),n.jsxs("button",{onClick:ve,disabled:r,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[n.jsx("i",{className:"bx bx-refresh"}),"Clear Form"]})]})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-ul text-blue-500"}),"Existing Categories"]}),i.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No categories found. Add one above!"}):n.jsx("ul",{className:"space-y-4",children:i.map(Z=>{var Se;return n.jsxs("li",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>Ce(Z),children:[n.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${M[Z]?"up":"down"} text-blue-500`}),Z]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:Te=>{Te.stopPropagation(),N(Z),x(Z),T({minPrice:v[Z].minPrice===1/0?"":v[Z].minPrice,maxPrice:v[Z].maxPrice===1/0?"":v[Z].maxPrice,buyerProtectionRate:v[Z].buyerProtectionRate*100,handlingRate:v[Z].handlingRate*100,taxRate:v[Z].taxRate?v[Z].taxRate*100:7.5})},disabled:r,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 text-sm flex items-center gap-1",title:"Edit category",children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:Te=>{Te.stopPropagation(),H({...Q,category:Z})},disabled:r,className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm flex items-center gap-1",title:"Delete category",children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]}),M[Z]&&n.jsxs("div",{className:"mt-4 ml-4 space-y-4 animate-slide-down",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Add Subcategory",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Subcategories group products within a category (e.g., Phones under Electronics)"})]}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsx("input",{type:"text",value:P[Z]||"",onChange:Te=>U(te=>({...te,[Z]:Te.target.value})),placeholder:"e.g., Phones",className:"w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:r}),n.jsxs("button",{type:"button",onClick:()=>z(Z),className:"py-2 px-4 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",disabled:r,children:[r?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-plus"}),"Add"]})]})]}),((Se=d[Z])==null?void 0:Se.length)>0&&n.jsx("ul",{className:"space-y-3 ml-4",children:d[Z].map(Te=>{var te,Oe;return n.jsxs("li",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-subdirectory-right text-gray-500"}),Te]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{C({category:Z,subcat:Te}),U(Ae=>({...Ae,[Z]:Te}))},disabled:r,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 text-sm flex items-center gap-1",title:"Edit subcategory",children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:()=>H({...Q,subcategory:{category:Z,subcat:Te}}),disabled:r,className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm flex items-center gap-1",title:"Delete subcategory",children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]}),(I==null?void 0:I.category)===Z&&I.subcat===Te&&n.jsxs("div",{className:"mt-2 ml-4",children:[n.jsx("input",{type:"text",value:P[Z]||"",onChange:Ae=>U(qe=>({...qe,[Z]:Ae.target.value})),className:"w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:r}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsxs("button",{onClick:()=>G(Z,Te),disabled:r,className:"py-2 px-4 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:[n.jsx("i",{className:"bx bx-save"})," Save"]}),n.jsxs("button",{onClick:()=>C(null),disabled:r,className:"py-2 px-4 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:[n.jsx("i",{className:"bx bx-x"})," Cancel"]})]})]}),n.jsxs("div",{className:"mt-2 ml-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Add Sub-subcategory",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Further refine products (e.g., Smartphones under Phones)"})]}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsx("input",{type:"text",value:R[`${Z}_${Te}`]||"",onChange:Ae=>O(qe=>({...qe,[`${Z}_${Te}`]:Ae.target.value})),placeholder:"e.g., Smartphones",className:"w-full max-w-md py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:r}),n.jsx("button",{type:"button",onClick:()=>re(Z,Te),className:"py-2 px-3 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",disabled:r,children:r?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-plus"})})]}),((Oe=(te=h[Z])==null?void 0:te[Te])==null?void 0:Oe.length)>0&&n.jsx("ul",{className:"mt-2 space-y-1 ml-6",children:h[Z][Te].map(Ae=>n.jsxs("li",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx("i",{className:"bx bx-subdirectory-right text-gray-400"}),Ae]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{D({category:Z,subcategory:Te,subSubcat:Ae}),O(qe=>({...qe,[`${Z}_${Te}`]:Ae}))},disabled:r,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 text-sm flex items-center gap-1",title:"Edit sub-subcategory",children:n.jsx("i",{className:"bx bx-edit text-[15px]"})}),n.jsx("button",{onClick:()=>H({...Q,subSubcategory:{category:Z,subcategory:Te,subSubcat:Ae}}),disabled:r,className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm flex items-center gap-1",title:"Delete sub-subcategory",children:n.jsx("i",{className:"bx bx-trash text-[15px]"})})]})]},Ae))}),(E==null?void 0:E.category)===Z&&E.subcategory===Te&&E.subSubcat&&n.jsxs("div",{className:"mt-2 ml-6",children:[n.jsx("input",{type:"text",value:R[`${Z}_${Te}`]||"",onChange:Ae=>O(qe=>({...qe,[`${Z}_${Te}`]:Ae.target.value})),className:"w-full max-w-md py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:r}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{onClick:()=>xe(Z,Te,E.subSubcat),disabled:r,className:"py-2 px-4 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:n.jsx("i",{className:"bx bx-save"})}),n.jsx("button",{onClick:()=>D(null),disabled:r,className:"py-2 px-4 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:n.jsx("i",{className:"bx bx-x"})})]})]})]})]},Te)})})]})]},Z)})})]})]}),Q.category&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Confirm Deletion"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['Are you sure you want to delete the category "',Q.category,'"? This action cannot be undone.']}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>H({...Q,category:null}),className:"py-2 px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}),n.jsxs("button",{onClick:()=>{ge(Q.category),H({...Q,category:null})},className:"py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 transition",disabled:r,children:[n.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),Q.subcategory&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Confirm Deletion"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['Are you sure you want to delete the subcategory "',Q.subcategory.subcat,'" under "',Q.subcategory.category,'"? This action cannot be undone.']}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>H({...Q,subcategory:null}),className:"py-2 px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}),n.jsxs("button",{onClick:()=>{X(Q.subcategory.category,Q.subcategory.subcat),H({...Q,subcategory:null})},className:"py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 transition",disabled:r,children:[n.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),Q.subSubcategory&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Confirm Deletion"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['Are you sure you want to delete the sub-subcategory "',Q.subSubcategory.subSubcat,'" under "',Q.subSubcategory.subcategory,'" in "',Q.subSubcategory.category,'"? This action cannot be undone.']}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>H({...Q,subSubcategory:null}),className:"py-2 px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}),n.jsxs("button",{onClick:()=>{ze(Q.subSubcategory.category,Q.subSubcategory.subcategory,Q.subSubcategory.subSubcat),H({...Q,subSubcategory:null})},className:"py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 transition",disabled:r,children:[n.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),n.jsx(one,{alerts:t,removeAlert:s})]})})]})}function dne({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${s.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function une(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="info")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(l=>l.id!==a))}}function hne(){const{alerts:t,addAlert:e,removeAlert:s}=une(),r=Ns(),[a,i]=_.useState([]),[l,d]=_.useState(!1),[u,h]=_.useState(null),[f,p]=_.useState(!1);_.useEffect(()=>{if(!we.currentUser){e("Please log in as admin.","error"),r("/login");return}d(!0),(async()=>{try{const v=(await yt(Ue(J,"sellers"))).docs.map(j=>({id:j.id,...j.data(),email:j.data().email||"N/A",phoneNumber:j.data().phoneNumber||"N/A",walletAddress:j.data().walletAddress||"N/A",bankName:j.data().bankName||"N/A",fullName:j.data().fullName||"N/A",accountNumber:j.data().accountNumber||"N/A"}));i(v)}catch(N){e("Failed to fetch sellers.","error"),console.error("Fetch error:",N)}finally{d(!1)}})()},[r]);const x=async()=>{if(u){d(!0);try{await nn(_e(J,"sellers",u.id)),i(a.filter(w=>w.id!==u.id)),e("Seller wallet deleted successfully.","success"),p(!1)}catch(w){e("Failed to delete seller wallet.","error"),console.error("Delete error:",w)}finally{d(!1)}}};return l?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-6",children:n.jsxs("div",{className:"w-full max-w-7xl mx-auto bg-white dark:bg-gray-800 p-4 md:p-6 rounded-xl shadow-lg",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-2 md:pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-wallet-alt text-blue-500"}),"Admin Seller Wallet"]}),a.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center py-4 md:py-6",children:"No sellers found."}):n.jsx("div",{className:"space-y-4 mt-4 md:mt-6",children:a.map(w=>n.jsx("div",{className:"p-3 md:p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition",children:n.jsxs("div",{className:"grid grid-cols-1 gap-2  lg:flex md:items-center md:justify-between md:gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",w.id]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Full Name:"})," ",w.fullName]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Email:"})," ",w.email]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Bank Name:"})," ",w.bankName]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Account Number:"})," ",w.accountNumber]})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Phone:"})," ",w.phoneNumber]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Wallet Address:"})," ",w.walletAddress]})]}),n.jsx("div",{className:"mt-2 md:mt-0",children:n.jsxs("button",{onClick:()=>{h(w),p(!0)},className:"w-full md:w-auto py-2 px-3 md:px-4 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 flex items-center justify-center gap-1 md:gap-2 text-sm md:text-base transition",disabled:l,children:[n.jsx("i",{className:"bx bx-trash"})," Delete Wallet"]})})]})},w.id))}),f&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 md:p-6 rounded-lg shadow-lg w-11/12 md:max-w-md",children:[n.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-800 dark:text-gray-100 mb-2 md:mb-4",children:"Confirm Deletion"}),n.jsxs("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mb-2 md:mb-4",children:["Are you sure you want to delete the wallet for ",u.email,"? This action cannot be undone."]}),n.jsxs("div",{className:"flex justify-end gap-2 md:gap-4",children:[n.jsx("button",{onClick:()=>p(!1),className:"py-1 md:py-2 px-2 md:px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 text-sm md:text-base transition",children:"Cancel"}),n.jsxs("button",{onClick:x,className:"py-1 md:py-2 px-2 md:px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-1 md:gap-2 text-sm md:text-base transition",disabled:l,children:[n.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),n.jsx(dne,{alerts:t,removeAlert:s})]})})]})}function mne({alerts:t,removeAlert:e}){return _.useEffect(()=>{if(t.length===0)return;const s=setTimeout(()=>t.forEach(r=>e(r.id)),5e3);return()=>clearTimeout(s)},[t,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(s=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg ${s.type==="error"?"bg-red-600":"bg-green-600"} text-white flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${s.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:s.message}),n.jsx("button",{onClick:()=>e(s.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:""})]},s.id))})}function fne(){const[t,e]=_.useState([]);return{alerts:t,addAlert:(a,i="success")=>{const l=Date.now();e(d=>[...d,{id:l,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(l=>l.id!==a))}}function gne(){const{alerts:t,addAlert:e,removeAlert:s}=fne(),r=Ns(),[a,i]=_.useState("sellers"),[l,d]=_.useState([]),[u,h]=_.useState([]),[f,p]=_.useState([]),[x,w]=_.useState([]),[N,v]=_.useState(!0),[j,k]=_.useState(!1),[T,P]=_.useState(null),[U,R]=_.useState({color:"",size:"",stock:""});_.useEffect(()=>{if(!we.currentUser){e("Please log in.","error"),r("/login");return}const C=Rt(Ue(J,"sellers")),E=ws(C,async H=>{const W=[];for(const de of H.docs){const ge={id:de.id,...de.data()};if(ge.bankCode){const X=_e(J,"banks",ge.bankCode),re=await Ge(X);ge.bankName=re.exists()&&re.data().name||"N/A"}else ge.bankName="N/A";const z=Rt(Ue(J,"products"),ht("sellerId","==",ge.id)),G=await Ge(_e(J,"products",ge.id));ge.productCount=G.exists()?(await ws(z,X=>X.size)).size:0,W.push(ge)}d(W)},H=>{e("Failed to fetch sellers.","error"),console.error("Sellers fetch error:",H)}),D=Rt(Ue(J,"products")),V=ws(D,async H=>{const W=[];for(const de of H.docs){const ge={id:de.id,...de.data()},z=Rt(Ue(J,"orders"),ht("productId","==",ge.id)),G=await Ge(_e(J,"orders",ge.id));ge.buyerCount=G.exists()?(await ws(z,X=>X.size)).size:0,W.push(ge)}h(W)},H=>{e("Failed to fetch products.","error"),console.error("Products fetch error:",H)}),B=Rt(Ue(J,"orders")),M=ws(B,H=>{p(H.docs.map(W=>({id:W.id,...W.data()})))},H=>{e("Failed to fetch orders.","error"),console.error("Orders fetch error:",H)}),Y=Rt(Ue(J,"favorites")),Q=ws(Y,H=>{const W={};H.docs.forEach(ge=>{const z=ge.data();W[z.productId]=(W[z.productId]||0)+1});const de=Object.entries(W).map(([ge,z])=>({productId:ge,count:z}));de.sort((ge,z)=>z.count-ge.count),w(de)},H=>{e("Failed to fetch favorites.","error"),console.error("Favorites fetch error:",H)});return v(!1),()=>{E(),V(),M(),Q()}},[r]);const O=async C=>{if(C.preventDefault(),!!T){v(!0);try{const E=_e(J,"products",T.id),D=await Ge(E),B=[...D.exists()?D.data().variants||[]:[],{...U,stock:parseInt(U.stock)||0}];await Qr(E,{variants:B}),e("Variant added successfully!","success"),R({color:"",size:"",stock:""}),k(!1)}catch(E){e("Failed to add variant.","error"),console.error("Add variant error:",E)}finally{v(!1)}}},I=C=>{P(C),k(!0)};return N?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(ar,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full lg:max-w-5xl md:max-w-4xl sm:max-w-3xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-xl shadow-sm",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-user text-blue-500"}),"Admin Manager"]}),n.jsx("div",{className:"flex border-b border-gray-300 dark:border-gray-600 mt-6",children:["sellers","products","orders","favorites"].map(C=>n.jsx("button",{onClick:()=>i(C),className:`py-2 px-4 text-sm md:text-base font-medium ${a===C?"border-b-2 border-blue-500 text-blue-500":"text-gray-600 dark:text-gray-300 hover:text-blue-500"}`,children:C.charAt(0).toUpperCase()+C.slice(1)},C))}),a==="sellers"&&n.jsx("div",{className:"mt-6 space-y-4",children:l.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No sellers found."}):l.map(C=>n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",C.id]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",C.fullName||"Unknown"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Bank:"})," ",C.bankName]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Account Number:"})," ",C.accountNumber||"N/A"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Products:"})," ",C.productCount||0]})]},C.id))}),a==="products"&&n.jsx("div",{className:"mt-6 space-y-4",children:u.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No products found."}):u.map(C=>{var E,D;return n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Product ID:"})," ",C.id]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",C.name||"Unnamed Product"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",C.sellerId]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Price:"})," ",((E=C.price)==null?void 0:E.toFixed(2))||"0.00"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Buyers:"})," ",C.buyerCount||0]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Variants:"})," ",(D=C.variants)!=null&&D.length?C.variants.map(V=>`${V.color} (${V.size}, ${V.stock})`).join(", "):"None"]}),n.jsxs("button",{onClick:()=>I(C),className:"mt-2 py-1 px-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm",children:[n.jsx("i",{className:"bx bx-plus"})," Add Variant"]})]},C.id)})}),a==="orders"&&n.jsx("div",{className:"mt-6 space-y-4",children:f.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No orders found."}):f.map(C=>{var E,D;return n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Order ID:"})," ",C.id]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Product ID:"})," ",C.productId]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Buyer ID:"})," ",C.buyerId]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ",((E=C.amount)==null?void 0:E.toFixed(2))||"0.00"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Status:"})," ",C.status||"Unknown"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date((D=C.createdAt)==null?void 0:D.toDate()).toLocaleString()]})]},C.id)})}),a==="favorites"&&n.jsx("div",{className:"mt-6 space-y-4",children:x.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No favorited products found."}):x.map(C=>{const E=u.find(D=>D.id===C.productId)||{};return n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Product ID:"})," ",C.productId]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",E.name||"Unnamed Product"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",E.sellerId||"N/A"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Favorite Count:"})," ",C.count]})]},C.productId)})}),j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:["Add Variant for ",T==null?void 0:T.name]}),n.jsxs("form",{onSubmit:O,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Color"}),n.jsx("input",{type:"text",value:U.color,onChange:C=>R({...U,color:C.target.value}),className:"mt-1 p-2 w-full border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Size"}),n.jsx("input",{type:"text",value:U.size,onChange:C=>R({...U,size:C.target.value}),className:"mt-1 p-2 w-full border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Stock"}),n.jsx("input",{type:"number",value:U.stock,onChange:C=>R({...U,stock:C.target.value}),className:"mt-1 p-2 w-full border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:!0})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 text-sm",children:"Cancel"}),n.jsx("button",{type:"submit",className:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm ${N?"opacity-50 cursor-not-allowed":""}`,disabled:N,children:"Add Variant"})]})]})]})}),n.jsx(mne,{alerts:t,removeAlert:s})]})})]})}const pne=()=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"p-10 m-2 bg-green-100",children:n.jsx("p",{className:""})}),n.jsx("div",{className:"p-10 m-2 bg-green-100",children:n.jsx("p",{className:""})})]}),n.jsxs("div",{className:"font-sans max-w-3xl mx-auto p-5",children:[n.jsx("h1",{className:"text-center text-3xl font-bold text-gray-800",children:"HOW FOREMADE WORKS"}),n.jsx("p",{className:"text-center text-lg italic text-gray-600 mt-2",children:"Your easy way to buy and sell online  fast, simple, and smart, Naija-style."}),n.jsx("h2",{className:"mt-8 text-2xl font-semibold text-gray-700",children:"FOR SELLERS  Make that money with ease"}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"1. List for Free"}),n.jsx("p",{className:"text-gray-700",children:"Oya, just snap and list sharp-sharp. Download the Foremade app for free. Take photos of your item, describe it small, set your price and upload. Your listing go live immediately."})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"2. Sell it, Ship it"}),n.jsx("p",{className:"text-gray-700",children:"Somebody don reason your item? Package am well and drop am. Once your item sell, just box am, print your prepaid label and drop it at any nearby point within 5 days. Easy like that."})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"3. Its Payday!"}),n.jsx("p",{className:"text-gray-700",children:"Omo, your money don show. There are no selling fees  everything you earn is yours. Once buyer confirm say everything dey okay, your FOREMADE wallet go alert you."})]}),n.jsx("h2",{className:"mt-8 text-2xl font-semibold text-gray-700",children:"FOR BUYERS  Get what you need, no stress"}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"1. Find it"}),n.jsx("p",{className:"text-gray-700",children:"Wetin you dey find? Just search am. Use the Foremade app to browse millions of items  from gadgets to clothes and everything in-between. If e dey, you go see am."})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"2. Buy it"}),n.jsx("p",{className:"text-gray-700",children:"Tap am and pay, no wahala. Ask the seller questions if you wan confirm something, then buy easily with your card or your FOREMADE balance."})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"3. Get it"}),n.jsx("p",{className:"text-gray-700",children:"Sit down and relax, delivery dey come. At checkout, you go see when your item go arrive. Once e enter post, we go update you. Just chill  your item go soon reach."})]}),n.jsx("p",{className:"text-center mt-8 font-bold text-2xl text-gray-800",children:"FOREMADE  Na we dey run things."})]})]});au.register(Ih,Ep,Rm,Am,r1,s1);function xne(){var P;const t=Ns(),[e,s]=_.useState(0),[r,a]=_.useState(0),[i,l]=_.useState(""),[d,u]=_.useState(""),[h,f]=_.useState(!0),[p,x]=_.useState(!1),[w,N]=_.useState({labels:[],datasets:[]}),v=_.useRef(0);_.useEffect(()=>{if(!we.currentUser){t("/login");return}(async()=>{const E=_e(J,"wallets",we.currentUser.uid);try{const D=await Ge(E);console.log(`Fetching wallet for ${we.currentUser.uid}:`,D.exists()?D.data():"No wallet found"),D.exists()||(console.log(`Creating new wallet for ${we.currentUser.uid}`),await ts(E,{availableBalance:0,pendingBalance:0,updatedAt:ha(),accountDetails:null})),f(!1)}catch(D){console.error(`Error fetching wallet for ${we.currentUser.uid}:`,D),u("Failed to load wallet: "+D.message),f(!1)}})();const R=_e(J,"wallets",we.currentUser.uid),O=ws(R,E=>{if(E.exists()){const D=E.data();console.log(`Snapshot received for ${we.currentUser.uid}:`,D),s(D.availableBalance||0),a(D.pendingBalance||0),k(D.availableBalance||0,D.pendingBalance||0)}else console.log(`No wallet document found for ${we.currentUser.uid} in snapshot`),s(0),a(0),k(0,0)},E=>{console.error("Wallet snapshot error:",E),u("Failed to update wallet data: "+E.message)}),I=Rt(Ue(J,"transactions"),ht("userId","==",we.currentUser.uid),ht("type","==","Withdrawal")),C=ws(I,()=>{},E=>{console.error("Transaction snapshot error:",E),u("Failed to fetch transaction data: "+E.message)});return()=>{O(),C()}},[t,(P=we.currentUser)==null?void 0:P.uid]),_.useEffect(()=>{if(r>0&&r!==v.current){console.log(`Pending balance changed to ${r}, scheduling transfer to availableBalance`);const U=Math.floor(Math.random()*5001)+1e4,R=_e(J,"wallets",we.currentUser.uid),O=setTimeout(async()=>{try{console.log(`Transferring ${r} from pendingBalance to availableBalance for ${we.currentUser.uid}`),await Qr(R,{availableBalance:uz(r),pendingBalance:0,updatedAt:ha()}),console.log(`Transfer complete: ${r} moved to availableBalance`)}catch(I){console.error(`Transfer failed for ${we.currentUser.uid}:`,I),u(`Failed to transfer pending balance: ${I.message} (Check Firebase version or Firestore rules)`)}},U);return v.current=r,()=>clearTimeout(O)}},[r]);const j=async U=>{var I,C;U.preventDefault(),u(""),f(!0);const R=parseFloat(i);if(isNaN(R)||R<=0){u("Please enter a valid amount."),f(!1);return}if(R>e){u("Insufficient available balance."),f(!1);return}const O="https://foremade-backend.onrender.com";try{const E={sellerId:we.currentUser.uid,amount:R,transactionReference:`TXN_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};console.log("Sending withdrawal request to:",`${O}/initiate-seller-payout`,E),(await Ut.post(`${O}/initiate-seller-payout`,E,{timeout:1e4})).data.status==="success"&&(l(""),x(!1),alert("Withdrawal request submitted. Funds will be credited to your bank account shortly. Some banks may take up to 30 minutes to process."))}catch(E){console.error("Withdrawal error:",E),u("Failed to submit withdrawal: "+(((C=(I=E.response)==null?void 0:I.data)==null?void 0:C.error)||E.message||"Endpoint not found. Check Render deployment at https://dashboard.render.com/"))}finally{f(!1)}},k=(U=e,R=0)=>{N({labels:["Current State"],datasets:[{label:"Available Balance",data:[U],fill:!1,backgroundColor:"#3490dc",borderColor:"#2563EB",tension:.4,borderWidth:2},{label:"Pending Balance",data:[R],fill:!1,backgroundColor:"#f6ad55",borderColor:"#c08640",tension:.4,borderWidth:2}]})},T={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Amount ()"}},x:{title:{display:!0,text:"Wallet Overview"}}},plugins:{legend:{position:"top"},title:{display:!0,text:"Wallet Wave Statistics"}}};return h?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsx("div",{className:"flex flex-col min-h-screen bg-gray-50",children:n.jsxs("div",{className:"flex flex-1",children:[n.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-gray-200 text-gray-700 rounded-lg",onClick:()=>{},"aria-label":"Open sidebar",children:n.jsx("i",{className:"bx bx-menu text-xl"})}),n.jsx("div",{className:"md:block md:w-64 lg:w-72 bg-gray-50 transition-all duration-300",children:n.jsx(Ls,{})}),n.jsx("div",{className:"flex-1 p-3 sm:p-4 md:p-8",children:n.jsxs("div",{className:"max-w-xl mx-auto w-full",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(o0,{className:"w-7 h-7 text-blue-600"}),n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-900",children:"My Wallet"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 md:gap-6 mb-2 sm:mb-4 md:mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-2 sm:p-4 md:p-6 text-white",children:[n.jsxs("span",{className:"text-[10px] sm:text-sm font-light",children:["Wallet ID: ",we.currentUser.uid]}),n.jsx("h3",{className:"text-sm sm:text-lg md:text-xl font-semibold mt-1 sm:mt-2",children:"Available Balance"}),n.jsxs("p",{className:"text-2xl sm:text-2xl md:text-3xl font-bold mt-1 sm:mt-2",children:["",e.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-2 sm:p-4 md:p-6 text-white",children:[n.jsx("span",{className:"text-xs sm:text-sm font-light",children:"Pending Transactions"}),n.jsx("h3",{className:"text-sm sm:text-lg md:text-xl font-semibold mt-1 sm:mt-2",children:"Pending Balance"}),n.jsxs("p",{className:"text-2xl sm:text-2xl md:text-3xl font-bold mt-1 sm:mt-2",children:["",r.toLocaleString()]})]})]}),n.jsxs("form",{onSubmit:j,className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-5 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(TK,{className:"w-5 h-5 text-green-600"}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Request Withdrawal"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"withdraw-amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Withdrawal Amount ()"}),n.jsx("input",{id:"withdraw-amount",type:"number",value:i,onChange:U=>l(U.target.value),className:"mt-1 p-2 w-full border border-blue-200 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-200 text-base",required:!0,"aria-label":"Withdrawal Amount",min:"1",step:"any"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum withdrawal: 1. Withdrawals are subject to admin approval and may take up to 24 hours."})]}),n.jsx("button",{type:"submit",className:`w-full mt-2 sm:mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition text-base ${h?"opacity-50 cursor-not-allowed":""}`,disabled:h,"aria-label":"Request Withdrawal",children:"Request Withdrawal"})]}),n.jsxs("div",{className:"mt-6 h-48 sm:h-64 bg-white p-3 rounded-lg shadow",children:[n.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-2",children:"Statistics"}),n.jsx("div",{className:"h-full",children:n.jsx(Fse,{data:w,options:T})})]})]})})]})})}const yne=()=>{const[t,e]=_.useState({}),s=a=>{e(i=>({...i,[a]:!i[a]}))},r=[{id:"introduction",title:"Introduction and Scope",icon:"bx-info-circle",content:n.jsx("p",{className:"text-gray-700 leading-relaxed",children:'This Privacy Notice explains how Foremade and its affiliates ("Foremade", "we", "us", or "our") collect, use, store, share, and protect your personal data. It complies with international privacy laws including GDPR, NDPR, CCPA, and more.'})},{id:"controller",title:"Data Controller",icon:"bx-globe",content:n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{region:"EU",entity:"Foremade GmbH  Berlin, Germany"},{region:"UK",entity:"Foremade UK Ltd.  London"},{region:"Nigeria",entity:"Foremade Nigeria Ltd.  Lagos"},{region:"Other Africa",entity:"Foremade Africa Ltd.  Nairobi"},{region:"Americas",entity:"Foremade Americas Inc.  Delaware, USA"},{region:"Asia",entity:"Foremade Asia Pte. Ltd.  Singapore"},{region:"Australia/Oceania",entity:"Foremade AU Pty Ltd.  Sydney"},{region:"All Regions",entity:"Foremade Global AG  Zurich"}].map(({region:a,entity:i},l)=>n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border-l-4 border-blue-500",children:[n.jsx("div",{className:"font-semibold text-blue-900",children:a}),n.jsx("div",{className:"text-sm text-blue-700",children:i})]},l))})},{id:"contact",title:"Contact and DPO",icon:"bx-envelope",content:n.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 p-4 rounded-lg border border-orange-200",children:n.jsxs("p",{className:"text-gray-700",children:["Reach our Data Protection Officers via the"," ",n.jsx(ue,{to:"/privacy-policy/contact",className:"text-orange-600 hover:text-orange-800 font-semibold underline decoration-2 underline-offset-2 transition-colors",children:"Privacy Centre"}),"."]})})},{id:"data-collection",title:"What Data We Collect",icon:"bx-shield",content:n.jsx("div",{className:"space-y-3",children:[{type:"Identity",desc:"Name, email, phone number"},{type:"Account Data",desc:"Order history, preferences, settings"},{type:"Usage Data",desc:"Device/browser information, interaction patterns"},{type:"Geolocation",desc:"Location data (if enabled by you)"},{type:"Third-party Sources",desc:"Data from partners and public sources"}].map(({type:a,desc:i},l)=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-900",children:a}),n.jsx("div",{className:"text-sm text-gray-600",children:i})]})]},l))})},{id:"legal-basis",title:"Legal Basis",icon:"bx-check-circle",content:n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:["Contract fulfillment","Legal compliance","Platform improvement","Consent (e.g., marketing)"].map((a,i)=>n.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-green-800 font-medium",children:a})]},i))})},{id:"transfers",title:"International Transfers",icon:"bx-world",content:n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500",children:n.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We use Standard Contractual Clauses (SCCs), NDPR rules, APEC frameworks, or other safeguards to protect your data when transferred internationally."})})},{id:"retention",title:"Data Retention",icon:"bx-folder",content:n.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We keep your data as long as needed to deliver services, comply with legal obligations, or resolve disputes."})},{id:"rights",title:"Your Rights",icon:"bx-user",content:n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[n.jsx("p",{className:"text-gray-700 mb-3",children:"Depending on your region, you may request access, correction, deletion, or restriction of your data."}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-purple-700",children:"Submit requests via our"}),n.jsx(ue,{to:"/privacy-policy/contact",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors font-semibold",children:"Privacy Centre"})]})]})},{id:"cookies",title:"Cookies",icon:"bx-cookie",content:n.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:n.jsxs("p",{className:"text-gray-700 mb-3",children:["We use cookies to enhance performance and deliver marketing. Adjust your preferences in our"," ",n.jsx(ue,{to:"/privacy-policy/cookies",className:"text-yellow-700 hover:text-yellow-900 font-semibold underline decoration-2 underline-offset-2 transition-colors",children:"Cookie Settings"}),"."]})})},{id:"security",title:"Data Security",icon:"bx-lock",content:n.jsx("div",{className:"bg-red-50 p-4 rounded-lg border-l-4 border-red-500",children:n.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We apply encryption, access controls, and secure infrastructure to protect your data from unauthorized access and breaches."})})},{id:"third-party",title:"Third-Party Links",icon:"bx-link",content:n.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We are not responsible for third-party privacy practices linked from our platform. Please review their policies separately."})},{id:"children",title:"Children's Privacy",icon:"bx-child",content:n.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:n.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Children under 16 require verified parental consent to use our services."})})},{id:"updates",title:"Policy Updates",icon:"bx-refresh",content:n.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We may update this policy and will notify you of major changes through our website or email notifications."})}];return n.jsxs(n.Fragment,{children:[n.jsx("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css",rel:"stylesheet"}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[n.jsx("div",{className:"bg-gray-100",children:n.jsx("div",{className:"max-w-4xl mx-auto px-6 py-16",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:n.jsx("i",{className:"bx bx-shield text-4xl text-blue-600"})})}),n.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-gray-900",children:"Foremade Global Privacy Notice"}),n.jsx("div",{className:"bg-orange-100 px-4 py-2 rounded-full inline-block",children:n.jsx("p",{className:"text-orange-600 font-medium",children:"Effective Date: June 2, 2025"})})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsx("div",{className:"space-y-4",children:r.map(a=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[n.jsxs("button",{onClick:()=>s(a.id),className:"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"text-blue-600 flex items-center justify-center w-8",children:n.jsx("i",{className:`bx ${a.icon} text-2xl`})}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a.title})]}),n.jsx("div",{className:"text-gray-400",children:t[a.id]?n.jsx("i",{className:"bx bx-chevron-down text-2xl"}):n.jsx("i",{className:"bx bx-chevron-right text-2xl"})})]}),t[a.id]&&n.jsx("div",{className:"px-6 pb-6 border-t border-gray-100",children:n.jsx("div",{className:"pt-4",children:a.content})})]},a.id))}),n.jsxs("div",{className:"mt-12 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-globe text-2xl text-blue-600 mr-3"}),"Regional Privacy Policies"]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"EU Policy",type:"eu",color:"blue"},{name:"Nigeria Policy",type:"nigeria",color:"green"},{name:"US Policy",type:"us",color:"red"},{name:"Asia Policy",type:"asia",color:"yellow"},{name:"Australia/Oceania",type:"australia",color:"purple"}].map((a,i)=>n.jsxs(ue,{to:`/privacy-policy/${a.type}`,className:`block p-4 rounded-lg border-2 bg-${a.color}-50 hover:bg-${a.color}-100 transition-all group `+(a.color==="blue"?"border-blue-200 hover:border-blue-300":a.color==="green"?"border-green-200 hover:border-green-300":a.color==="red"?"border-red-200 hover:border-red-300":a.color==="yellow"?"border-yellow-200 hover:border-yellow-300":a.color==="purple"?"border-purple-200 hover:border-purple-300":""),children:[n.jsx("div",{className:a.color==="blue"?"text-blue-800 group-hover:text-blue-900":a.color==="green"?"text-green-800 group-hover:text-green-900":a.color==="red"?"text-red-800 group-hover:text-red-900":a.color==="yellow"?"text-yellow-800 group-hover:text-yellow-900":a.color==="purple"?"text-purple-800 group-hover:text-purple-900":"",children:a.name}),n.jsxs("div",{className:"text-sm flex items-center gap-1 "+(a.color==="blue"?"text-blue-600":a.color==="green"?"text-green-600":a.color==="red"?"text-red-600":a.color==="yellow"?"text-yellow-600":a.color==="purple"?"text-purple-600":""),children:["View regional details",n.jsx("i",{className:"bx bx-right-arrow-alt"})]})]},i))})]}),n.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:n.jsx("div",{className:"text-gray-500 text-sm",children:" 2025 Foremade Global. All rights reserved."})})]})]})]})},bne=()=>{const[t,e]=_.useState("requests"),[s,r]=_.useState({requestType:"",fullName:"",email:"",phone:"",region:"",requestDetails:"",additionalInfo:""}),[a,i]=_.useState(!1),l=[{value:"access",label:"Access My Data",description:"Get a copy of all personal data we hold about you"},{value:"correction",label:"Correct My Data",description:"Update or correct inaccurate personal information"},{value:"deletion",label:"Delete My Data",description:"Request deletion of your personal data (Right to be Forgotten)"},{value:"restriction",label:"Restrict Processing",description:"Limit how we process your personal data"},{value:"portability",label:"Data Portability",description:"Receive your data in a structured, machine-readable format"},{value:"objection",label:"Object to Processing",description:"Object to processing based on legitimate interests"},{value:"withdraw",label:"Withdraw Consent",description:"Withdraw previously given consent for data processing"},{value:"complaint",label:"File a Complaint",description:"Report privacy concerns or violations"}],d=[{value:"eu",label:"European Union (GDPR)"},{value:"uk",label:"United Kingdom (UK GDPR)"},{value:"nigeria",label:"Nigeria (NDPR)"},{value:"us",label:"United States (CCPA/CPRA)"},{value:"canada",label:"Canada (PIPEDA)"},{value:"australia",label:"Australia (Privacy Act)"},{value:"singapore",label:"Singapore (PDPA)"},{value:"other",label:"Other Region"}],u=f=>{const{name:p,value:x}=f.target;r(w=>({...w,[p]:x}))},h=async f=>{if(f.preventDefault(),!s.requestType||!s.fullName||!s.email){Ne.error("Please fill in all required fields");return}i(!0),setTimeout(()=>{Ne.success("Privacy request submitted successfully! We will respond within 30 days."),r({requestType:"",fullName:"",email:"",phone:"",region:"",requestDetails:"",additionalInfo:""}),i(!1)},2e3)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[n.jsx("div",{className:"flex justify-center mb-8",children:n.jsxs("div",{className:"bg-gray-100 rounded-lg p-1",children:[n.jsx("button",{onClick:()=>e("requests"),className:`px-6 py-2 rounded-md transition-colors ${t==="requests"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Privacy Requests"}),n.jsx("button",{onClick:()=>e("contact"),className:`px-6 py-2 rounded-md transition-colors ${t==="contact"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Contact DPO"})]})}),t==="requests"&&n.jsxs("form",{onSubmit:h,className:"space-y-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Submit Privacy Request"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Request Type *"}),n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:l.map(f=>n.jsxs("label",{className:"flex items-start space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"requestType",value:f.value,checked:s.requestType===f.value,onChange:u,className:"mt-1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:f.label}),n.jsx("div",{className:"text-sm text-gray-600",children:f.description})]})]},f.value))})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),n.jsx("input",{type:"text",name:"fullName",value:s.fullName,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),n.jsx("input",{type:"email",name:"email",value:s.email,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),n.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Region *"}),n.jsxs("select",{name:"region",value:s.region,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select your region"}),d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Request Details *"}),n.jsx("textarea",{name:"requestDetails",value:s.requestDetails,onChange:u,rows:"4",placeholder:"Please provide specific details about your request...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("i",{className:"bx bx-info-circle text-blue-600 text-xl mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Email Verification"}),n.jsxs("p",{className:"text-sm text-blue-700",children:["We will verify your identity via email at ",n.jsx("strong",{children:s.email}),". Please check your inbox for a verification link after submitting this request."]})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Information (Optional)"}),n.jsx("textarea",{name:"additionalInfo",value:s.additionalInfo,onChange:u,rows:"3",placeholder:"Any additional context or specific requirements...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:a,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-semibold",children:a?n.jsxs("span",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-loader-alt animate-spin mr-2"}),"Submitting..."]}):"Submit Request"})})]}),t==="contact"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Contact Data Protection Officer"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Email Contact"}),n.jsx("p",{className:"text-blue-700 mb-4",children:"For privacy-related inquiries and support:"}),n.jsx("a",{href:"mailto:privacy@foremade.com",className:"text-blue-600 hover:text-blue-800 font-semibold",children:"privacy@foremade.com"})]}),n.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[n.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Response Time"}),n.jsx("p",{className:"text-green-700 mb-2",children:"We aim to respond to all privacy requests within:"}),n.jsxs("ul",{className:"text-green-700 text-sm space-y-1",children:[n.jsx("li",{children:" Initial acknowledgment: 24 hours"}),n.jsx("li",{children:" Full response: 30 days"}),n.jsx("li",{children:" Complex requests: 60 days"})]})]})]}),n.jsxs("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200",children:[n.jsx("h4",{className:"font-semibold text-yellow-900 mb-3",children:"Data Protection Officer"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"mb-2",children:[n.jsx("strong",{className:"text-yellow-800",children:"Email:"})," privacy@foremade.com"]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("strong",{className:"text-yellow-800",children:"Response Time:"})," Within 24-48 hours"]}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-yellow-800",children:"Languages:"})," English, French, Spanish, Arabic"]})]})]})]})]})},vne=()=>{const{type:t}=lc(),e=Ns(),s=()=>{switch(t){case"cookies":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-cookie text-2xl text-yellow-600"}),"Cookie Settings"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-700",children:"We use cookies and similar technologies to provide, protect, and improve our services. This page helps you understand how we use them and what choices you have."}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Essential Cookies"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Required for basic site functionality. Always active."})]}),n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Analytics Cookies"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Help us understand how visitors interact with our website."})]}),n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Marketing Cookies"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Used to deliver personalized advertisements."})]}),n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Preference Cookies"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Remember your settings and preferences."})]})]}),n.jsxs("div",{className:"mt-6 flex gap-4",children:[n.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Accept All"}),n.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Essential Only"})]})]})]});case"contact":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-support text-2xl text-blue-600"}),"Privacy Centre"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-700",children:"Contact our Data Protection Officers for any privacy-related concerns or to exercise your data rights."}),n.jsx(bne,{})]})]});case"eu":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-flag text-2xl text-blue-600"}),"EU Privacy Policy"]}),n.jsxs("div",{className:"prose prose-blue max-w-none",children:[n.jsx("p",{className:"text-gray-700",children:"This policy complies with GDPR requirements for EU residents."}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key GDPR Rights"}),n.jsx("div",{className:"grid gap-4",children:[{title:"Right to Access",description:"Individuals can request access to their personal data and obtain information about how it's processed.",link:"https://gdpr-info.eu/art-15-gdpr/"},{title:"Right to Rectification",description:"Allows individuals to have inaccurate personal data corrected.",link:"https://gdpr-info.eu/art-16-gdpr/"},{title:'Right to Erasure ("Right to be Forgotten")',description:"Enables individuals to request the deletion of their personal data under certain circumstances.",link:"https://gdpr-info.eu/art-17-gdpr/"},{title:"Right to Restrict Processing",description:"Individuals can request the limitation of their data processing under specific conditions.",link:"https://gdpr-info.eu/art-18-gdpr/"},{title:"Right to Data Portability",description:"Allows individuals to receive their personal data in a structured format and transfer it to another controller.",link:"https://gdpr-info.eu/art-20-gdpr/"},{title:"Right to Object to Processing",description:"Grants individuals the right to object to the processing of their personal data in certain situations.",link:"https://gdpr-info.eu/art-21-gdpr/"}].map((r,a)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:r.title}),n.jsx("p",{className:"text-gray-600 mb-3",children:r.description}),n.jsxs("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors",children:["Learn More",n.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});case"nigeria":return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-green-100 rounded-full",children:n.jsx("i",{className:"bx bx-shield text-5xl text-green-700"})}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-green-700 mb-2",children:"Your Data Protection Rights under Nigerian Law (NDPA 2023)"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"As a data subject in Nigeria, the Nigeria Data Protection Act (NDPA) 2023 grants you specific rights regarding your personal data. These rights ensure transparency, accountability, and give you greater control over how your information is collected, used, stored, and shared by organizations."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-green-100",children:[n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"1. Right to Access Personal Data"}),n.jsx("p",{className:"mb-2",children:"You have the right to request and receive confirmation as to whether or not an organization holds your personal data. Where your data is being processed, you are entitled to:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-green-900",children:[n.jsx("li",{children:"A copy of the personal data being processed"}),n.jsx("li",{children:"Information about the purpose of the processing"}),n.jsx("li",{children:"The categories of data involved"}),n.jsx("li",{children:"The recipients or categories of recipients to whom the data has been disclosed"}),n.jsx("li",{children:"The retention period for the data or criteria for determining that period"}),n.jsx("li",{children:"The existence of your data protection rights (e.g., correction, deletion)"}),n.jsx("li",{children:"Information about any automated decision-making (e.g., profiling) that may affect you"})]}),n.jsx("p",{className:"mb-4",children:"Organizations must respond within 30 days and in a clear, intelligible format."}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"2. Right to Data Correction (Rectification)"}),n.jsx("p",{className:"mb-4",children:"You have the right to request that inaccurate or incomplete data about you be corrected or updated without undue delay. The organization must also notify any third parties who received the inaccurate data."}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"3. Right to Data Deletion (Erasure)"}),n.jsx("p",{className:"mb-2",children:'Also known as the "right to be forgotten", you may request the deletion of your data under specific conditions, such as:'}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Data is no longer needed for its original purpose"}),n.jsx("li",{children:"You withdraw consent"}),n.jsx("li",{children:"You object to processing with no overriding legitimate reason"}),n.jsx("li",{children:"Data was unlawfully processed"}),n.jsx("li",{children:"Deletion is required for legal compliance"})]}),n.jsx("p",{className:"mb-4",children:"Note: This right is not absolute and may be limited by legal obligations."}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"4. Right to Restrict Data Processing"}),n.jsx("p",{className:"mb-2",children:"You can request temporary restriction of data processing under circumstances such as:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Contesting the accuracy of the data"}),n.jsx("li",{children:"Unlawful processing but preferring restriction over deletion"}),n.jsx("li",{children:"Data no longer needed but required for legal claims"}),n.jsx("li",{children:"Pending verification of objection to processing"})]}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"5. Right to Data Portability"}),n.jsx("p",{className:"mb-4",children:"You have the right to receive your personal data in a structured, machine-readable format, and to transmit it to another data controller. This applies to data based on consent or a contract and processed by automated means."}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"How to Exercise Your Rights"}),n.jsxs("p",{className:"mb-4",children:["You may contact the organization (data controller) through a formal Data Subject Access Request (DSAR). A response is typically required within 30 days. If unsatisfied, complaints can be filed with the Nigeria Data Protection Commission (NDPC) at ",n.jsx("a",{href:"https://ndpc.gov.ng",target:"_blank",rel:"noopener noreferrer",className:"text-green-700 underline font-semibold",children:"https://ndpc.gov.ng"}),"."]})]})]})});case"us":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-flag text-2xl text-red-600"}),"US Privacy Policy"]}),n.jsxs("div",{className:"prose prose-red max-w-none",children:[n.jsx("p",{className:"text-gray-700",children:"This policy complies with CCPA and other US privacy requirements."}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key CCPA Rights"}),n.jsx("div",{className:"grid gap-4",children:[{title:"Right to Know",description:"Consumers can request disclosure of categories and specific pieces of personal information collected, sources, purposes, and third parties with whom it's shared.",link:"https://oag.ca.gov/privacy/ccpa"},{title:"Right to Delete",description:"Consumers can request the deletion of personal information collected by the business, subject to certain exceptions.",link:"https://oag.ca.gov/privacy/ccpa"},{title:"Right to Opt-Out of Sale or Sharing",description:"Consumers can direct businesses to stop selling or sharing their personal information with third parties.",link:"https://cppa.ca.gov/"},{title:"Right to Non-Discrimination",description:"Businesses cannot discriminate against consumers for exercising their CCPA rights.",link:"https://cppa.ca.gov/"}].map((r,a)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:r.title}),n.jsx("p",{className:"text-gray-600 mb-3",children:r.description}),n.jsxs("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-full hover:bg-red-100 transition-colors",children:["Learn More",n.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});case"asia":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-flag text-2xl text-yellow-600"}),"Asia Privacy Policy"]}),n.jsxs("div",{className:"prose prose-yellow max-w-none",children:[n.jsx("p",{className:"text-gray-700",children:"This policy complies with APEC and Asian privacy requirements."}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key Privacy Resources"}),n.jsx("div",{className:"grid gap-4",children:[{title:"APEC Privacy Framework",description:"Comprehensive framework for privacy protection across APEC member economies.",link:"https://www.apec.org/docs/default-source/Publications/2005/12/APEC-Privacy-Framework/05_ecsg_privacyframewk.pdf"},{title:"APEC Secretariat Privacy Policy",description:"Official privacy policy and procedures of the APEC Secretariat.",link:"https://www.apec.org/docs/default-source/aboutus/policiesandprocedures/1a-apec-secretariatpersonal-data-protection-policy-v2-1-%28approved-by-cmg-on-22-july-2022%29.pdf"},{title:"CBPR System Guidelines",description:"Cross-Border Privacy Rules system policies and guidelines.",link:"https://cbprs.org/wp-content/uploads/2019/11/4.-CBPR-Policies-Rules-and-Guidelines-Revised-For-Posting-3-16-updated-1709-2019.pdf"},{title:"Hong Kong Privacy Guidelines",description:"Privacy protection guidelines from the Office of the Privacy Commissioner for Personal Data.",link:"https://www.pcpd.org.hk/english/files/infocentre/1tonylam1_ppt.pdf"}].map((r,a)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:r.title}),n.jsx("p",{className:"text-gray-600 mb-3",children:r.description}),n.jsxs("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-50 text-yellow-600 rounded-full hover:bg-yellow-100 transition-colors",children:["View Document",n.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});case"australia":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-flag text-2xl text-purple-600"}),"Australia/Oceania Privacy Policy"]}),n.jsxs("div",{className:"prose prose-purple max-w-none",children:[n.jsx("p",{className:"text-gray-700",children:"This policy complies with Australian Privacy Principles (APPs)."}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key Privacy Resources"}),n.jsx("div",{className:"grid gap-4",children:[{title:"Australian Privacy Principles",description:"The 13 APPs that form the basis of privacy protection in Australia.",link:"https://www.oaic.gov.au/privacy/australian-privacy-principles"},{title:"Privacy Complaints",description:"Information about making privacy complaints and the complaint process.",link:"https://www.oaic.gov.au/privacy/privacy-complaints"},{title:"Privacy Guidance for Organisations and Government Agencies",description:"Guidance for organisations and government agencies on privacy obligations.",link:"https://www.oaic.gov.au/privacy/guidance-and-advice"},{title:"Notifiable Data Breaches",description:"Information about the Notifiable Data Breaches (NDB) scheme and reporting requirements.",link:"https://www.oaic.gov.au/privacy/notifiable-data-breaches"},{title:"Anonymity and Pseudonymity",description:"Guidelines on anonymity and pseudonymity in data collection.",link:"https://www.oaic.gov.au/privacy/privacy-fact-sheets/individuals/anonymity-and-pseudonymity"},{title:"Data Collection and Use",description:"Information about how personal data is collected and used.",link:"https://www.oaic.gov.au/privacy/your-privacy-rights/knowing-how-your-data-is-collected-and-used"}].map((r,a)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:r.title}),n.jsx("p",{className:"text-gray-600 mb-3",children:r.description}),n.jsxs("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-50 text-purple-600 rounded-full hover:bg-purple-100 transition-colors",children:["Learn More",n.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});default:return e("/privacy-policy"),null}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white",children:n.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e("/privacy-policy"),className:"bg-white/10 p-2 rounded-lg hover:bg-white/20 transition-colors",children:n.jsx("i",{className:"bx bx-arrow-back text-2xl"})}),n.jsx("h1",{className:"text-3xl font-bold",children:"Privacy Settings"})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:s()}),n.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:n.jsx("div",{className:"text-gray-500 text-sm",children:" 2025 Foremade Global. All rights reserved."})})]})]})},wne=()=>{const[t,e]=_.useState(!1);return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("section",{className:"bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 text-white",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6 leading-tight",children:"Foremade Empowerment Hub"}),n.jsx("p",{className:"text-xl md:text-2xl text-indigo-100 max-w-3xl mx-auto leading-relaxed",children:"Empowering the Next Generation of Creators & Entrepreneurs"})]})})}),n.jsx("section",{className:"py-16 bg-white",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"text-center mb-12",children:n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-8",children:"Our Mission"})}),n.jsxs("div",{className:"prose prose-xl mx-auto text-gray-700 leading-relaxed",children:[n.jsx("p",{className:"mb-8",children:"At Foremade, we believe that the future belongs to the bold. We are committed to supporting young individuals with creative minds and entrepreneurial passion through comprehensive funding, expert mentorship, and a professional platform to showcase their talents."}),n.jsx("p",{children:"Our mission extends beyond providing toolswe create pathways for visionaries to bring their ideas to life and establish sustainable businesses that thrive both locally and globally. Each creator we sponsor represents the embodiment of passion, cultural heritage, and innovation."})]})]})}),n.jsx("section",{className:"py-16 bg-gray-50",children:n.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden",children:n.jsxs("div",{className:"md:flex",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx("img",{src:"https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2000&q=80",alt:"Handcrafted jewelry collection",className:"h-64 md:h-full w-full object-cover"})}),n.jsxs("div",{className:"md:w-1/2 p-8 md:p-12",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("span",{className:"inline-block bg-indigo-100 text-indigo-800 text-sm font-semibold px-3 py-1 rounded-full mb-4",children:"Featured Creator"}),n.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rhoda"}),n.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"Founder, Rhodabella Crafted"}),n.jsx("p",{className:"text-lg text-indigo-600 font-medium",children:"Handmade  Heritage-Inspired  Uniquely Crafted"})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("p",{className:"text-gray-700 mb-6 leading-relaxed",children:["Rhoda is a distinguished jewelry designer who masterfully blends traditional African artistry with contemporary aesthetics. Her brand, ",n.jsx("strong",{children:"Rhodabella Crafted"}),", creates handcrafted pieces that serve as both elegant accessories and powerful expressions of cultural identity."]}),n.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"From intricately beaded chokers to custom waist beads, each piece in Rhoda's collections tells a story of heritage, pride, and individual expression."}),n.jsxs("blockquote",{className:"border-l-4 border-indigo-500 pl-6 italic text-gray-600 mb-8",children:['"My jewelry transcends mere aesthetics. It honors our heritage while expressing our authentic selves."',n.jsx("footer",{className:"text-sm font-semibold text-gray-900 mt-2",children:" Rhoda, Rhodabella Crafted"})]})]}),n.jsxs("a",{href:"https://foremade.com/store/RhodabellaCrafted",className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors duration-200",target:"_blank",rel:"noopener noreferrer",children:["Visit Store",n.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})})})}),n.jsx("section",{className:"py-16 bg-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Program Benefits"}),n.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Comprehensive support designed to transform creative passion into sustainable business success"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Financial Sponsorship"}),n.jsx("p",{className:"text-gray-600",children:"Funding for product development and business growth"})]}),n.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Expert Mentorship"}),n.jsx("p",{className:"text-gray-600",children:"Professional guidance in branding and digital commerce"})]}),n.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"E-commerce Platform"}),n.jsx("p",{className:"text-gray-600",children:"Professional online storefront at no cost"})]}),n.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Global Promotion"}),n.jsx("p",{className:"text-gray-600",children:"Marketing and visibility across Africa and beyond"})]})]})]})}),n.jsx("section",{className:"py-16 bg-gradient-to-r from-indigo-600 to-purple-600 mb-20",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Join Our Creator Program"}),n.jsx("p",{className:"text-xl text-indigo-100 mb-8 max-w-2xl mx-auto leading-relaxed",children:"Are you a young creator or entrepreneur ready to transform your vision into reality? Apply to become part of our exclusive empowerment program."}),n.jsx("div",{className:"flex items-center justify-center mb-8",children:n.jsxs("label",{className:"flex items-center text-white",children:[n.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-300 rounded border-white",onChange:s=>e(s.target.checked),checked:t}),n.jsxs("span",{className:"ml-2 text-sm",children:["I have read and agree to the"," ",n.jsx(ue,{to:"/youth-empowerment-terms",className:"underline hover:text-indigo-200",children:"Terms and Conditions"})]})]})}),n.jsxs(ue,{to:t?"/youth-empowerment-form":"#",className:`inline-flex items-center px-8 py-4 font-semibold rounded-lg transition-colors duration-200 ${t?"bg-white text-indigo-600 hover:bg-gray-100":"bg-gray-400 text-gray-700 cursor-not-allowed"}`,onClick:s=>{t||(s.preventDefault(),alert("Please accept the terms and conditions to continue."))},children:["Apply Now",n.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})]})},Nne=()=>{const[t,e]=_.useState(1),[s,r]=_.useState(!1),[a,i]=_.useState({fullName:"",age:"",email:"",businessIdea:"",motivation:"",relevantExperience:"",expectedChallenges:"",twelveMonthGoals:"",supportNeeded:""}),[l,d]=_.useState({}),{alerts:u,addAlert:h,removeAlert:f}=Nm(),p=(k,T)=>{i(P=>({...P,[k]:T})),l[k]&&d(P=>({...P,[k]:""}))},x=k=>{const T={};return k===1&&(a.fullName||(T.fullName="Name is required"),a.age||(T.age="Age is required"),a.email?/\S+@\S+\.\S+/.test(a.email)||(T.email="Invalid email"):T.email="Email is required"),k===2&&(a.businessIdea||(T.businessIdea="Business idea is required"),a.motivation||(T.motivation="Motivation is required"),a.relevantExperience||(T.relevantExperience="Relevant experience is required")),k===3&&(a.expectedChallenges||(T.expectedChallenges="Expected challenges is required"),a.twelveMonthGoals||(T.twelveMonthGoals="12-month goals is required"),a.supportNeeded||(T.supportNeeded="Support needed is required")),d(T),Object.keys(T).length===0},w=async()=>{x(t)&&(t<3?e(k=>k+1):await N())},N=async()=>{r(!0);try{const k={...a,submittedAt:new Date().toISOString(),timestamp:Date.now(),userAgent:navigator.userAgent,formType:"Youth Empowerment Application"};console.log("=== YOUTH EMPOWERMENT FORM SUBMISSION ==="),console.log("Form Data:",k),console.log("Submission Time:",new Date().toLocaleString()),console.log("Total Fields:",Object.keys(a).length),console.log("=========================================="),console.log("Sending data to /api/youth-empowerment...");const P=await fetch("https://foremade-backend.onrender.com/api/youth-empowerment",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(k)});if(console.log("API Response Status:",P.status),console.log("API Response Headers:",Object.fromEntries(P.headers.entries())),!P.ok){const R=await P.text();throw console.error("API Error Response:",R),new Error(`HTTP error! status: ${P.status}, message: ${R}`)}const U=await P.json();console.log("API Success Response:",U),console.log("=== SUBMISSION COMPLETED SUCCESSFULLY ==="),h("Application submitted successfully! We will review your application and get back to you soon.","success"),i({fullName:"",age:"",email:"",businessIdea:"",motivation:"",relevantExperience:"",expectedChallenges:"",twelveMonthGoals:"",supportNeeded:""}),e(1)}catch(k){console.error("=== SUBMISSION ERROR ==="),console.error("Error Details:",k),console.error("Error Message:",k.message),console.error("Error Stack:",k.stack),console.error("======================="),h("There was an error submitting your application. Please try again or contact support at support@foremade.com","error")}finally{r(!1)}},v=()=>{t>1&&e(k=>k-1)},j=()=>{const k={enter:{x:50,opacity:0},center:{x:0,opacity:1},exit:{x:-50,opacity:0}};return n.jsx(Md,{mode:"wait",children:n.jsxs(St.div,{variants:k,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},children:[t===1&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(Po,{className:"w-6 h-6 text-neutral-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Personal Information"}),n.jsx("p",{className:"text-neutral-600",children:"Let's start with the basics"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Full Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Enter your full name",value:a.fullName,onChange:T=>p("fullName",T.target.value),className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all ${l.fullName?"border-red-500":"border-gray-300"}`}),l.fullName&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.fullName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Age ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Enter your age",value:a.age,onChange:T=>p("age",T.target.value),className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all pr-12 ${l.age?"border-red-500":"border-gray-300"}`}),n.jsx(_K,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-neutral-400"})]}),l.age&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.age})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"your.email@example.com",value:a.email,onChange:T=>p("email",T.target.value),className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all ${l.email?"border-red-500":"border-gray-300"}`}),l.email&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.email})]})]}),t===2&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(WK,{className:"w-6 h-6 text-neutral-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Your Business Vision"}),n.jsx("p",{className:"text-neutral-600",children:"Tell us about your entrepreneurial journey"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Idea ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"Describe your business idea in detail...",value:a.businessIdea,onChange:T=>p("businessIdea",T.target.value),rows:4,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${l.businessIdea?"border-red-500":"border-gray-300"}`}),l.businessIdea&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.businessIdea})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Motivation ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"What drives you to pursue this business opportunity?",value:a.motivation,onChange:T=>p("motivation",T.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${l.motivation?"border-red-500":"border-gray-300"}`}),l.motivation&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.motivation})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Relevant Experience ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"Share any relevant experience, skills, or background...",value:a.relevantExperience,onChange:T=>p("relevantExperience",T.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${l.relevantExperience?"border-red-500":"border-gray-300"}`}),l.relevantExperience&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.relevantExperience})]})]}),t===3&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(_X,{className:"w-6 h-6 text-neutral-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Goals & Support"}),n.jsx("p",{className:"text-neutral-600",children:"Help us understand how we can support your success"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Expected Challenges ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"What obstacles do you anticipate in your entrepreneurial journey?",value:a.expectedChallenges,onChange:T=>p("expectedChallenges",T.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${l.expectedChallenges?"border-red-500":"border-gray-300"}`}),l.expectedChallenges&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.expectedChallenges})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["12-Month Goals ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"What do you aim to achieve in the next 12 months?",value:a.twelveMonthGoals,onChange:T=>p("twelveMonthGoals",T.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${l.twelveMonthGoals?"border-red-500":"border-gray-300"}`}),l.twelveMonthGoals&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.twelveMonthGoals})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Support Needed from Foremade ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"What specific support, resources, or guidance would be most valuable to you?",value:a.supportNeeded,onChange:T=>p("supportNeeded",T.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${l.supportNeeded?"border-red-500":"border-gray-300"}`}),l.supportNeeded&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.supportNeeded})]})]})]},t)})};return n.jsxs("div",{className:"relative",children:[n.jsx(Nd,{alerts:u,removeAlert:f}),n.jsx("div",{className:"min-h-screen bg-neutral-50 py-6 px-4 sm:py-8 md:py-12 lg:py-16",children:n.jsxs("div",{className:"max-w-md lg:max-w-2xl xl:max-w-3xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8 sm:mb-10 lg:mb-12",children:[n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-black rounded-2xl flex items-center justify-center mx-auto mb-4 sm:mb-6",children:n.jsx(A6,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})}),n.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-neutral-900 mb-3 sm:mb-4 leading-tight",children:["Youth Empowerment",n.jsx("br",{}),"Program"]}),n.jsx("p",{className:"text-neutral-600 text-sm sm:text-base lg:text-lg leading-relaxed max-w-2xl mx-auto",children:"Join our exclusive community of ambitious young entrepreneurs and creators."})]}),n.jsx("div",{className:"flex justify-center items-center gap-2 sm:gap-4 lg:gap-6 mb-8 sm:mb-10 max-w-lg mx-auto",children:[1,2,3].map((k,T)=>n.jsxs(ss.Fragment,{children:[n.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center transition-all
                    ${t>k||t===k?"bg-black text-white":"bg-neutral-200 text-neutral-600"}`,children:t>k?n.jsx(Ua,{className:"w-4 h-4 sm:w-5 sm:h-5"}):n.jsx("span",{className:"text-sm sm:text-base font-bold",children:k})}),T<2&&n.jsx("div",{className:`w-8 sm:w-12 h-0.5 transition-all ${t>k+1?"bg-black":"bg-neutral-200"}`})]},k))}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 sm:p-6 lg:p-8 shadow-xl shadow-neutral-200/50 mb-6",children:[j(),n.jsxs("div",{className:"flex gap-3 mt-6 sm:mt-8 lg:mt-10",children:[t>1&&n.jsx("button",{onClick:v,className:"flex-1 px-4 py-3 sm:py-4 border border-neutral-300 rounded-xl font-semibold text-neutral-600 hover:bg-neutral-50 transition-colors lg:text-lg",children:"Previous"}),n.jsx("button",{onClick:w,disabled:s,className:`flex-1 bg-black text-white py-3 sm:py-4 px-6 rounded-xl font-semibold flex items-center justify-center gap-2 transition-colors lg:text-lg ${s?"bg-gray-400 cursor-not-allowed":"hover:bg-neutral-800"}`,children:t===3?s?n.jsxs(n.Fragment,{children:["Submitting...",n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"})]}):n.jsxs(n.Fragment,{children:["Submit Application",n.jsx(Ua,{className:"w-4 h-4"})]}):n.jsxs(n.Fragment,{children:["Continue",n.jsx(xw,{className:"w-4 h-4"})]})})]})]}),n.jsx("div",{className:"text-center",children:n.jsxs("p",{className:"text-xs sm:text-sm lg:text-base text-neutral-500",children:["Questions? Contact us at"," ",n.jsx("span",{className:"text-black font-medium hover:underline",children:"support@foremade.com"})]})})]})})]})},jne=()=>n.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 min-h-screen py-12",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsx(Nne,{})})}),_ne=()=>n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:[n.jsxs("div",{className:"max-w-5xl mx-auto p-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-100",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 rounded-full",children:n.jsx("i",{className:"bx bx-world text-3xl text-white"})})}),n.jsx("h1",{className:"text-4xl font-bold text-center bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"FOREMADE Youth Empowerment"}),n.jsx("h2",{className:"text-2xl font-semibold text-center text-gray-700 mb-4",children:"Terms of Engagement"}),n.jsx("div",{className:"bg-indigo-50 rounded-lg p-4",children:n.jsx("p",{className:"text-center text-gray-700 font-medium",children:'"Empowered Creators Collaboration Agreement"'})}),n.jsxs("p",{className:"mt-6 text-gray-600 text-center leading-relaxed",children:["This agreement outlines the terms and conditions between ",n.jsx("strong",{className:"text-indigo-600",children:"FOREMADE Marketplace"}),' ("FOREMADE") and the selected participant/brand ("Creator") under the ',n.jsx("strong",{className:"text-purple-600",children:"FOREMADE Youth Empowerment Initiative"}),"."]})]}),n.jsx("div",{className:"space-y-6",children:Sne.map((t,e)=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"bg-indigo-50 p-2 rounded-lg mr-3",children:n.jsx("i",{className:`bx ${t.icon} text-indigo-600 text-xl`})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:t.title})]}),t.content]},e))}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 text-white mb-20",children:[n.jsxs("div",{className:"flex items-center justify-center mb-4",children:[n.jsx("i",{className:"bx bx-handshake text-3xl mr-3"}),n.jsx("h3",{className:"text-xl font-semibold",children:"Agreement Commitment"})]}),n.jsx("p",{className:"text-center leading-relaxed",children:n.jsx("strong",{children:"By entering into this agreement, both parties commit to upholding the objectives of the Youth Empowerment Initiative in a fair and transparent manner."})})]})]}),n.jsx("link",{href:"https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css",rel:"stylesheet"})]}),Sne=[{icon:"bx-target-lock",title:"1. Purpose",content:n.jsx("p",{className:"text-gray-600 leading-relaxed ml-12",children:"The initiative aims to empower talented youth-led creators by offering financial support, free retail exposure, and a structured commercial partnership to scale their creations through the FOREMADE platform."})},{icon:"bx-briefcase",title:"2. Project Scope",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-dollar-circle text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Provide initial funding for production setup"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-store text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Offer access to online retail infrastructure"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-trending-up text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Co-market the Creator's selected product lines through web and social campaigns"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-shield-check text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-600",children:["Retain co-ownership of the empowered product lines ",n.jsx("strong",{className:"text-indigo-600",children:"until 10,000 units are sold"})]})]})]})},{icon:"bx-time",title:"3. Duration & Termination",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-calendar text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-600",children:["The partnership runs until a total of ",n.jsx("strong",{className:"text-indigo-600",children:"10,000 units"})," have been sold"]})]}),n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 mt-3",children:[n.jsx("div",{className:"font-medium text-indigo-700 mb-2",children:"After reaching this threshold:"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-crown text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-600",children:["Creator retains ",n.jsx("strong",{className:"text-indigo-600",children:"100% ownership"})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-no-entry text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"FOREMADE no longer shares in profits"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-wallet text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"50% of capital funding is retained by the Creator"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-refresh text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Option to renew under revised terms"})]})]})]})]})},{icon:"bx-pie-chart-alt",title:"4. Profit Sharing",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsx("div",{className:"bg-indigo-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-line-chart text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-700",children:[n.jsx("strong",{children:"010,000 units:"})," Creator gets ",n.jsx("strong",{className:"text-indigo-600",children:"40% net profit"})]})]})}),n.jsx("div",{className:"bg-indigo-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-trending-up text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-700",children:[n.jsx("strong",{children:"Post-10,000 units:"})," Creator gets ",n.jsx("strong",{className:"text-indigo-600",children:"60%"}),", FOREMADE gets ",n.jsx("strong",{className:"text-indigo-600",children:"40%"})," (if agreement continues)"]})]})})]})},{icon:"bx-money",title:"5. Capital Funding",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-package text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Initial setup costs covered by FOREMADE"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-repeat text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Performance-based funding adjustments"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-coin-stack text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Materials and packaging support included"})]})]})},{icon:"bx-refresh",title:"6. Continuation Clause",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-copyright text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Creator retains intellectual property rights"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-package text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"FOREMADE continues logistics support"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-calendar-check text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Quarterly performance reviews"})]})]})},{icon:"bx-package",title:"7. Product Standards",content:n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed ml-12",children:"All products must meet agreed quality standards. Packaging design must align with youth-focused branding and maintain consistency with the Creator's vision while meeting FOREMADE's marketplace requirements."})},{icon:"bx-bullhorn",title:"8. Marketing & Branding",content:n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed ml-12",children:'Products will be featured prominently on the "Empowered Creators" section. All marketing materials will include Creator credits and cultural storytelling elements to maintain authenticity.'})},{icon:"bx-exit",title:"9. Termination Clause",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-time text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"14 days notice required"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-calculator text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Fair reconciliation of funding and inventory"})]})]})},{icon:"bx-balance-scale",title:"10. Dispute Resolution",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-conversation text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Mediation as primary resolution method"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-book-open text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Local jurisdiction laws apply"})]}),n.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:[n.jsx("strong",{children:"Note:"})," All disputes will be handled in accordance with the laws applicable to your country of operation."]})]})}],kne=()=>{const t=()=>{window.open("https://gdpr-info.eu/art-15-gdpr/","_blank","noopener,noreferrer")};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white",children:n.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(ue,{to:"/privacy-policy/eu",className:"bg-white/10 p-2 rounded-lg hover:bg-white/20 transition-colors",children:n.jsx("i",{className:"bx bx-arrow-back text-2xl"})}),n.jsx("h1",{className:"text-3xl font-bold",children:"Right of Access (Article 15 GDPR)"})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"prose prose-blue max-w-none",children:[n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-gray-700",children:"To view the official text of Article 15 of the GDPR, please click the button below to open it in a new window:"})}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx("i",{className:"bx bx-external-link text-xl"}),"View Article 15 GDPR"]})}),n.jsxs("div",{className:"mt-8 bg-gray-50 p-6 rounded-lg",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"How to Exercise Your Right"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"To exercise your right of access, you can:"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("i",{className:"bx bx-envelope text-blue-600 text-xl mt-1"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:"Email Request"}),n.jsx("p",{className:"text-gray-600",children:"Send your request to privacy@foremade.com"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("i",{className:"bx bx-user text-blue-600 text-xl mt-1"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:"Privacy Centre"}),n.jsxs("p",{className:"text-gray-600",children:["Submit your request through our ",n.jsx(ue,{to:"/privacy-policy/contact",className:"text-blue-600 hover:text-blue-800",children:"Privacy Centre"})]})]})]})]})]})]})}),n.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:n.jsx("div",{className:"text-gray-500 text-sm",children:" 2025 Foremade Global. All rights reserved."})})]})]})},Bd=({category:t})=>{const e={"Tablet & Phones":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496510/photo_2025-06-09_20-11-21_vsojz8.jpg","Health & Beauty":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496502/photo_2025-06-09_20-11-23_2_kwjqqr.jpg",Electronics:"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496477/photo_2025-06-09_20-11-29_tzs0vs.jpg","Computers & Accessories":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496469/photo_2025-06-09_20-11-31_xtfepw.jpg","Baby Products":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496470/photo_2025-06-09_20-11-30_ht9ms8.jpg","Games & Fun":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749425277/photo_2025-06-09_00-28-12_dt7sp3.jpg","Drinks & Categories":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749417059/photo_2025-06-08_22-10-17_inpwcf.jpg","Home & Kitchen":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749425370/photo_2025-06-09_00-28-16_mildb8.jpg","Smart Watches":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749425266/photo_2025-06-09_00-28-13_hai2go.jpg"};return n.jsxs("div",{className:"w-full h-[200px] relative overflow-hidden rounded-lg mb-6",children:[n.jsx("img",{src:e[t]||"default-banner-url.jpg",alt:`${t} banner`,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/50 to-transparent",children:n.jsx("div",{className:"flex items-center h-full px-6",children:n.jsx("h1",{className:"hidden text-3xl font-bold text-white",children:t})})})]})};function Ene(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l="Tablet & Phones",d=1,u="tablet & phones";return _.useEffect(()=>{(async()=>{try{r(!0),i(null);const f=Rt(Ue(J,"products"),ht("category","==",u)),x=(await yt(f)).docs.map(N=>{const v=N.data();return{id:N.id,...v}});console.log("All fetched products (Tablet & Phones):",x);const w=x.map(N=>{var k;const v=N;let j=v.imageUrl&&typeof v.imageUrl=="string"&&v.imageUrl.startsWith("https://")?v.imageUrl:Array.isArray(v.imageUrls)&&v.imageUrls[0]&&typeof v.imageUrls[0]=="string"&&v.imageUrls[0].startsWith("https://")?v.imageUrls[0]:"/images/placeholder.jpg";return{id:N.id,name:v.name||"Unnamed Product",description:v.description||"",price:v.price||0,stock:v.stock||0,category:v.category||"tablet & phones",categoryId:((k=v.category)==null?void 0:k.trim().toLowerCase())===u.toLowerCase()?d:1,colors:v.colors||[],sizes:v.sizes||[],condition:v.condition||"",imageUrl:j,sellerId:v.sellerId||"",rating:v.rating||Math.random()*2+3}}).filter(N=>N.stock<10?(console.warn("Filtered out product with low stock (Tablet & Phones):",{id:N.id,name:N.name,stock:N.stock}),!1):!(N.imageUrl&&typeof N.imageUrl=="string"&&N.imageUrl.startsWith("https://"))&&N.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (Tablet & Phones):",{id:N.id,name:N.name,imageUrl:N.imageUrl}),!1):!0).sort((N,v)=>v.rating-N.rating);if(console.log(`Fetched ${l} products:`,w),w.length===0){console.warn("No products passed the filters (Tablet & Phones). Relaxing stock filter to debug...");const N=x.map(v=>{var T;const j=v;let k=j.imageUrl&&typeof j.imageUrl=="string"&&j.imageUrl.startsWith("https://")?j.imageUrl:Array.isArray(j.imageUrls)&&j.imageUrls[0]&&typeof j.imageUrls[0]=="string"&&j.imageUrls[0].startsWith("https://")?j.imageUrls[0]:"/images/placeholder.jpg";return{id:v.id,name:j.name||"Unnamed Product",description:j.description||"",price:j.price||0,stock:j.stock||0,category:j.category||"tablet & phones",categoryId:((T=j.category)==null?void 0:T.trim().toLowerCase())===u.toLowerCase()?d:1,colors:j.colors||[],sizes:j.sizes||[],condition:j.condition||"",imageUrl:k,sellerId:j.sellerId||"",rating:j.rating||Math.random()*2+3}}).filter(v=>!(v.imageUrl&&typeof v.imageUrl=="string"&&v.imageUrl.startsWith("https://"))&&v.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (relaxed filter, Tablet & Phones):",{id:v.id,name:v.name,imageUrl:v.imageUrl}),!1):!0);console.log("Products with relaxed stock filter (Tablet & Phones):",N),e(N.sort((v,j)=>j.rating-v.rating))}else e(w)}catch(f){console.error(`Error loading ${l} products:`,{message:f.message,code:f.code}),i(`Failed to load ${l} products.`)}finally{r(!1)}})()},[]),s?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(Bd,{category:l}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:l}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(4)].map((h,f)=>n.jsx("div",{className:"w-full",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},f))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(Bd,{category:l}),n.jsxs("div",{className:"flex mt-6 justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending ",l]}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx(ue,{to:`/products?category=${d}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"})})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[t.length===0?n.jsxs("p",{className:"text-gray-600",children:["No ",l," products found."]}):t.map(h=>n.jsx("div",{className:"w-full",children:n.jsx(hn,{product:h})},h.id)),console.log(a)]})]})})}function Tne(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l="Electronics",d=3,u="electronics";return _.useEffect(()=>{(async()=>{try{r(!0),i(null);const f=Rt(Ue(J,"products"),ht("category","==",u)),x=(await yt(f)).docs.map(N=>{const v=N.data();return{id:N.id,...v}});console.log("All fetched products (Electronics):",x);const w=x.map(N=>{var k;const v=N;let j=v.imageUrl&&typeof v.imageUrl=="string"&&v.imageUrl.startsWith("https://")?v.imageUrl:Array.isArray(v.imageUrls)&&v.imageUrls[0]&&typeof v.imageUrls[0]=="string"&&v.imageUrls[0].startsWith("https://")?v.imageUrls[0]:"/images/placeholder.jpg";return{id:N.id,name:v.name||"Unnamed Product",description:v.description||"",price:v.price||0,stock:v.stock||0,category:v.category||"electronics",categoryId:((k=v.category)==null?void 0:k.trim().toLowerCase())===u.toLowerCase()?d:3,colors:v.colors||[],sizes:v.sizes||[],condition:v.condition||"",imageUrl:j,sellerId:v.sellerId||"",rating:v.rating||Math.random()*2+3}}).filter(N=>N.stock<10?(console.warn("Filtered out product with low stock (Electronics):",{id:N.id,name:N.name,stock:N.stock}),!1):!(N.imageUrl&&typeof N.imageUrl=="string"&&N.imageUrl.startsWith("https://"))&&N.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (Electronics):",{id:N.id,name:N.name,imageUrl:N.imageUrl}),!1):!0).sort((N,v)=>v.rating-N.rating);if(console.log(`Fetched ${l} products:`,w),w.length===0){console.warn("No products passed the filters (Electronics). Relaxing stock filter to debug...");const N=x.map(v=>{var T;const j=v;let k=j.imageUrl&&typeof j.imageUrl=="string"&&j.imageUrl.startsWith("https://")?j.imageUrl:Array.isArray(j.imageUrls)&&j.imageUrls[0]&&typeof j.imageUrls[0]=="string"&&j.imageUrls[0].startsWith("https://")?j.imageUrls[0]:"/images/placeholder.jpg";return{id:v.id,name:j.name||"Unnamed Product",description:j.description||"",price:j.price||0,stock:j.stock||0,category:j.category||"electronics",categoryId:((T=j.category)==null?void 0:T.trim().toLowerCase())===u.toLowerCase()?d:3,colors:j.colors||[],sizes:j.sizes||[],condition:j.condition||"",imageUrl:k,sellerId:j.sellerId||"",rating:j.rating||Math.random()*2+3}}).filter(v=>!(v.imageUrl&&typeof v.imageUrl=="string"&&v.imageUrl.startsWith("https://"))&&v.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (relaxed filter, Electronics):",{id:v.id,name:v.name,imageUrl:v.imageUrl}),!1):!0);console.log("Products with relaxed stock filter (Electronics):",N),e(N.sort((v,j)=>j.rating-v.rating))}else e(w)}catch(f){console.error(`Error loading ${l} products:`,{message:f.message,code:f.code}),i(`Failed to load ${l} products.`)}finally{r(!1)}})()},[]),s?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(Bd,{category:l}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:l}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[...Array(4)].map((h,f)=>n.jsx("div",{className:"w-full",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},f))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(Bd,{category:l}),n.jsxs("div",{className:"flex mt-6 justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:l}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx(ue,{to:`/products?category=${d}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"})})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[t.length===0?n.jsxs("p",{className:"text-gray-600 p-4",children:["No ",l," products found."]}):t.map(h=>n.jsx("div",{className:"w-full",children:n.jsx(hn,{product:h})},h.id)),console.log(a)]})]})})}function Cne(){const[t,e]=_.useState([]),[s,r]=_.useState(!0),[a,i]=_.useState(null),l="Smart Watches",d=9,u="smart watches";return _.useEffect(()=>{(async()=>{try{r(!0),i(null);const f=Rt(Ue(J,"products"),ht("category","==",u)),x=(await yt(f)).docs.map(N=>{const v=N.data();return{id:N.id,...v}});console.log("All fetched products (Smart Watches):",x);const w=x.map(N=>{var k;const v=N;let j=v.imageUrl&&typeof v.imageUrl=="string"&&v.imageUrl.startsWith("https://")?v.imageUrl:Array.isArray(v.imageUrls)&&v.imageUrls[0]&&typeof v.imageUrls[0]=="string"&&v.imageUrls[0].startsWith("https://")?v.imageUrls[0]:"/images/placeholder.jpg";return{id:N.id,name:v.name||"Unnamed Product",description:v.description||"",price:v.price||0,stock:v.stock||0,category:v.category||"smart watches",categoryId:((k=v.category)==null?void 0:k.trim().toLowerCase())===u.toLowerCase()?d:9,colors:v.colors||[],sizes:v.sizes||[],condition:v.condition||"",imageUrl:j,sellerId:v.sellerId||"",rating:v.rating||Math.random()*2+3}}).filter(N=>N.stock<10?(console.warn("Filtered out product with low stock (Smart Watches):",{id:N.id,name:N.name,stock:N.stock}),!1):!(N.imageUrl&&typeof N.imageUrl=="string"&&N.imageUrl.startsWith("https://"))&&N.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (Smart Watches):",{id:N.id,name:N.name,imageUrl:N.imageUrl}),!1):!0).sort((N,v)=>v.rating-N.rating);if(console.log(`Fetched ${l} products:`,w),w.length===0){console.warn("No products passed the filters (Smart Watches). Relaxing stock filter to debug...");const N=x.map(v=>{var T;const j=v;let k=j.imageUrl&&typeof j.imageUrl=="string"&&j.imageUrl.startsWith("https://")?j.imageUrl:Array.isArray(j.imageUrls)&&j.imageUrls[0]&&typeof j.imageUrls[0]=="string"&&j.imageUrls[0].startsWith("https://")?j.imageUrls[0]:"/images/placeholder.jpg";return{id:v.id,name:j.name||"Unnamed Product",description:j.description||"",price:j.price||0,stock:j.stock||0,category:j.category||"smart watches",categoryId:((T=j.category)==null?void 0:T.trim().toLowerCase())===u.toLowerCase()?d:9,colors:j.colors||[],sizes:j.sizes||[],condition:j.condition||"",imageUrl:k,sellerId:j.sellerId||"",rating:j.rating||Math.random()*2+3}}).filter(v=>!(v.imageUrl&&typeof v.imageUrl=="string"&&v.imageUrl.startsWith("https://"))&&v.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (relaxed filter, Smart Watches):",{id:v.id,name:v.name,imageUrl:v.imageUrl}),!1):!0);console.log("Products with relaxed stock filter (Smart Watches):",N),e(N.sort((v,j)=>j.rating-v.rating))}else e(w)}catch(f){console.error(`Error loading ${l} products:`,{message:f.message,code:f.code}),i(`Failed to load ${l} products.`)}finally{r(!1)}})()},[]),s?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(Bd,{category:l}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:l}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(4)].map((h,f)=>n.jsx("div",{className:"w-full",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},f))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(Bd,{category:l}),n.jsxs("div",{className:"flex mt-6 justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:l}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx(ue,{to:`/products?category=${d}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"})})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[t.length===0?n.jsx("p",{className:"text-gray-600",children:"No product found."}):t.map(h=>n.jsx("div",{className:"w-full",children:n.jsx(hn,{product:h})},h.id)),console.log(a)]})]})})}const Ane=t=>{switch(t.code){case"auth/network-request-failed":return"Check your network connection and try again.";case"auth/user-not-found":return"No user found with this email.";case"auth/invalid-email":return"Please enter a valid email address.";default:return"An unexpected error occurred. Please try again later."}};function Rne(){const t=Ns(),[e,s]=_.useState(""),[r,a]=_.useState(""),[i,l]=_.useState(""),[d,u]=_.useState(!1),h=p=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p),f=async p=>{if(p.preventDefault(),a(""),l(""),u(!0),!e){a("Email is required."),u(!1);return}if(!h(e)){a("Please enter a valid email address."),u(!1);return}try{await ZR(we,e),l(`Password reset email sent to ${e}. Please check your inbox.`),s(""),setTimeout(()=>{u(!1),t("/login")},7e3)}catch(x){console.error("Error sending password reset email:",x),a(Ane(x)),u(!1)}};return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"w-full h-screen flex",children:[n.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://images.pexels.com/photos/5625115/pexels-photo-5625115.jpeg?auto=compress&cs=tinysrgb&w=600')"},children:n.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 dark:bg-black/50 flex flex-col justify-center items-center text-white p-8",children:[n.jsx("h1",{className:"text-3xl font-bold flex-col items-center",children:n.jsx("img",{src:nc,alt:"Formade logo",className:"h-20"})}),n.jsx("p",{className:"text-lg",children:"Recover Your Password."})]})}),n.jsxs("div",{className:"w-full md:w-1/2 h-full p-9 flex flex-col justify-center bg-white dark:bg-gray-800",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Forgot Password"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Already have an account?"," ",n.jsx(ue,{to:"/login",className:"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Sign In"})]}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"email",id:"email",value:e,onChange:p=>{s(p.target.value),a("")},className:`w-full p-3 border rounded-lg transition-all duration-300 ${r?"border-red-500":i?"border-green-500":"border-gray-300 dark:border-gray-600"}`,autoComplete:"email",required:!0}),n.jsx("label",{htmlFor:"email",className:`absolute left-3 top-3 text-gray-500 dark:text-gray-400 transition-all duration-300 transform origin-left pointer-events-none peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-500 peer-focus:bg-white dark:peer-focus:bg-gray-800 peer-focus:px-1 ${e?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""}`,children:"Email"}),n.jsx("span",{className:"absolute right-3 top-3 text-blue-500 dark:text-blue-400",children:n.jsx("i",{className:"bx bx-envelope text-xl"})}),r&&n.jsx("p",{className:"text-red-600 text-[10px] mt-1",children:r})]}),i&&n.jsx("p",{className:"text-green-600 text-[10px] mb-4",children:i}),n.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200 dark:bg-slate-700 dark:hover:bg-blue-900",disabled:d,children:d?"Sending...":n.jsxs(n.Fragment,{children:["Send Reset Link"," ",n.jsx("i",{className:"bx bx-send text-blue-500 text-xl inline-block ml-2"})]})})]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-5",children:["Dont have an account?"," ",n.jsx(ue,{to:"/register",className:"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Sign Up"})]})]})]})})}const Pne={Shoes:"https://banner2.cleanpng.com/20180406/wow/kisspng-shoe-jumpman-sneakers-air-jordan-teal-jordan-5ac6ff9c2fcfe2.7959868915229910041959.jpg",Fashion:"https://pngimg.com/uploads/dress_shirt/dress_shirt_PNG8088.png",Phones:"https://banner2.cleanpng.com/20240415/cv/transparent-apple-logo-person-holding-iphone-11-pro-max661df755177ea1.73458741.webp",Laptops:"https://banner2.cleanpng.com/lnd/20240424/uxz/transparent-rainbow-open-laptop-with-rainbow-gradient-background-image662945f170dc49.58708681.webp",Watches:"https://banner2.cleanpng.com/20180202/lie/av2ldq3r4.webp",Electronics:"https://banner2.cleanpng.com/20180131/jgw/av1z4nree.webp"};function Ine(t){const e=lc();gr();const s=t.category||e.category||"",[r,a]=_.useState([]),[i,l]=_.useState(!0);_.useEffect(()=>{if(!s)return;(async()=>{l(!0);try{const h=Rt(Ue(J,"products"),ht("category","==",s.toLowerCase())),p=(await yt(h)).docs.map(x=>({id:x.id,...x.data()}));a(p)}catch{a([])}finally{l(!1)}})()},[s]);const d=Pne[s]||null;return n.jsxs("section",{className:"py-8 bg-white",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative w-full h-40 md:h-56 bg-gradient-to-r from-blue-100 to-blue-300 flex items-center justify-center rounded-lg overflow-hidden",children:[d&&n.jsx("img",{src:d,alt:s,className:"absolute right-4 bottom-0 h-32 md:h-48 object-contain opacity-60 pointer-events-none",style:{maxWidth:"40%"}}),n.jsx("h1",{className:"relative z-10 text-2xl md:text-4xl font-bold text-blue-900 drop-shadow-lg",children:s?`${s} Products`:"Products"})]})}),n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-4",children:s?`Products in ${s}`:"Products"}),i?n.jsx("div",{children:"Loading..."}):r.length===0?n.jsx("p",{className:"text-gray-600",children:"No products found for this category."}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:r.map(u=>n.jsx(hn,{product:u},u.id))})]})]})}const Dne=()=>n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white",children:n.jsx("div",{className:"max-w-4xl mx-auto px-6 py-16",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:n.jsx("i",{className:"bx bx-store text-4xl text-blue-600"})})}),n.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"About Us"}),n.jsx("p",{className:"text-xl text-blue-100",children:"Shop. Sell. Smile."})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"prose prose-lg max-w-none",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Welcome to ",n.jsx("strong",{className:"text-blue-600",children:"FOREMADE Marketplace"}),"  the people-first platform where ",n.jsx("em",{children:"everyone can shop, sell, and smile"}),".",n.jsx("br",{}),"Whether you're clearing out the old, launching something new, or simply looking to buy smart, FOREMADE gives you the tools, the platform, and the audience."]})}),n.jsx("div",{className:"mb-8",children:n.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["We're ",n.jsx("strong",{className:"text-blue-600",children:"not just another marketplace"}),". FOREMADE was created to ",n.jsx("strong",{children:"level the playing field"}),"  giving everyday people, creatives, and entrepreneurs a ",n.jsx("strong",{children:"free, secure space to sell"})," new or used products and reach buyers everywhere."]})}),n.jsxs("div",{className:"mb-12",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-star text-2xl text-yellow-500 mr-3"}),"What Makes Us Different?"]}),n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{icon:"bx-gift",title:"Free to Sell",desc:"List your items at no cost  new, handmade, or preloved."},{icon:"bx-money",title:"Get Paid Fast",desc:"Sellers receive full payment after confirmed deliveries. No delays."},{icon:"bx-mobile",title:"User-Friendly Platform",desc:"Designed to be mobile-first, easy to use, and built with sellers in mind."},{icon:"bx-globe",title:"Worldwide Reach",desc:"Buy or sell across cities, countries, and continents."},{icon:"bx-shield",title:"Safe & Secure",desc:"Protected payments, verified vendors, and encrypted data."},{icon:"bx-check-shield",title:"Zero Tolerance for Fraud",desc:"Robust anti-money laundering and transaction monitoring systems."},{icon:"bx-truck",title:"Fast, Discounted Delivery",desc:"Reliable logistics and savings on bundled shipments."}].map((t,e)=>n.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsx("div",{className:"text-blue-600 flex items-center justify-center w-8",children:n.jsx("i",{className:`bx ${t.icon} text-2xl`})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:t.title}),n.jsx("p",{className:"text-sm text-gray-600",children:t.desc})]})]},e))})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-globe text-2xl text-green-600 mr-3"}),"For Everyone. Open to the World."]}),n.jsx("p",{className:"text-gray-700 leading-relaxed",children:"FOREMADE empowers sellers from all walks of life to connect with a growing global marketplace. Whether you're a student with a side hustle or a brand ready to scale, we help you get noticed  and get paid."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-100",children:[n.jsx("p",{className:"text-gray-800 font-semibold mb-2",children:"Shop what you love. Sell what you have. To your neighborhood  or across borders. And always, smile."}),n.jsx("p",{className:"text-gray-600 italic",children:"Because on FOREMADE, everyone is a seller, and everyone is a customer."})]})]})}),n.jsx("div",{className:"mt-12 text-center",children:n.jsxs(ue,{to:"/products",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["Start Shopping",n.jsx("i",{className:"bx bx-right-arrow-alt"})]})}),n.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:n.jsx("div",{className:"text-gray-500 text-sm",children:" 2025 Foremade Global. All rights reserved."})})]})]}),Mne=()=>{const[t,e]=_.useState(""),[s,r]=_.useState([]),[a,i]=_.useState(!1),[l,d]=_.useState([]),[u,h]=_.useState("All"),[f,p]=_.useState([0,1e5]);_.useEffect(()=>{(async()=>{try{const N=await yt(Ue(J,"products")),v=new Set(N.docs.map(j=>j.data().category||"Other"));d(["All",...v])}catch(N){console.error("Error fetching categories:",N),Ne.error("Failed to load categories.")}})()},[]);const x=async()=>{if(!t.trim()){r([]);return}i(!0);try{let w=Rt(Ue(J,"products"),ht("status","==","approved"));u!=="All"&&(w=Rt(w,ht("category","==",u)));const v=(await yt(w)).docs.map(j=>({id:j.id,...j.data()})).filter(j=>j.name.toLowerCase().includes(t.toLowerCase())&&j.price>=f[0]&&j.price<=f[1]);r(v)}catch(w){console.error("Error searching products:",w),Ne.error("Failed to load search results.")}finally{i(!1)}};return _.useEffect(()=>{const w=setTimeout(x,500);return()=>clearTimeout(w)},[t,u,f]),n.jsx("div",{className:"min-h-screen bg-gray-100 py-4 xs:py-6",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsxs("div",{className:"relative mb-4 xs:mb-6",children:[n.jsx("input",{type:"text",placeholder:"Search for items...",value:t,onChange:w=>e(w.target.value),className:"w-full pl-10 pr-4 py-2 xs:py-3 rounded-full bg-white shadow-sm text-sm xs:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-lg xs:text-xl"})]}),n.jsxs("div",{className:"flex flex-col xs:flex-row gap-3 xs:gap-4 mb-4 xs:mb-6",children:[n.jsx("select",{value:u,onChange:w=>h(w.target.value),className:"px-3 py-2 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:l.map(w=>n.jsx("option",{value:w,children:w},w))}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",placeholder:"Min",value:f[0]||"",onChange:w=>p([Number(w.target.value)||0,f[1]]),className:"w-20 px-2 py-2 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("span",{children:"-"}),n.jsx("input",{type:"number",placeholder:"Max",value:f[1]||"",onChange:w=>p([f[0],Number(w.target.value)||1e5]),className:"w-20 px-2 py-2 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a?n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 xs:gap-4",children:[...Array(8)].map((w,N)=>n.jsx("div",{className:"bg-white rounded-lg shadow-sm h-[260px] animate-pulse"},N))}):s.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-600",children:[n.jsx("i",{className:"bx bx-search-alt-2 text-4xl mb-2"}),n.jsx("p",{className:"text-sm xs:text-base",children:"No products found. Try a different search term."})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 xs:gap-4",children:s.map(w=>n.jsx(hn,{product:{id:w.id,name:w.name,price:w.price,imageUrls:w.imageUrls,sellerName:w.sellerName||"Unknown Seller"}},w.id))})]})})},One=()=>{const[t,e]=_.useState([]),[s,r]=_.useState(!0);_.useEffect(()=>{(async()=>{var d;r(!0);try{const u=(d=we.currentUser)==null?void 0:d.uid;if(!u){e([]),r(!1);return}const h=Rt(Ue(J,"notifications"),ht("userId","==",u),Wm("createdAt","desc")),p=(await yt(h)).docs.map(x=>({id:x.id,...x.data()}));e(p)}catch(u){console.error("Error fetching notifications:",u),Ne.error("Failed to load notifications.")}finally{r(!1)}})()},[]);const a=l=>{switch(l){case"signup":return"bx bx-user-check";case"order_placed":return"bx bx-package";case"order_status":return"bx bx-truck";case"promo":return"bx bx-gift";default:return"bx bx-bell"}},i=l=>l?(l.toDate?l.toDate():new Date(l)).toLocaleString("en-NG",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"Unknown time";return n.jsx("div",{className:"min-h-screen bg-gray-100 py-4 xs:py-6",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsxs("h2",{className:"text-lg xs:text-xl font-bold text-gray-800 mb-4 xs:mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-bell text-blue-600 mr-2 text-xl xs:text-2xl"}),"Notifications"]}),s?n.jsx("div",{className:"space-y-3 xs:space-y-4",children:[...Array(5)].map((l,d)=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},d))}):t.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-600",children:[n.jsx("i",{className:"bx bx-bell-off text-4xl mb-2"}),n.jsx("p",{className:"text-sm xs:text-base",children:"No notifications yet."})]}):n.jsx("div",{className:"space-y-3 xs:space-y-4",children:t.map(l=>n.jsxs("div",{className:`bg-white rounded-lg shadow-sm p-4 flex items-start gap-3 xs:gap-4 ${l.read===!1?"border-l-4 border-blue-500":""}`,children:[n.jsx("i",{className:`${a(l.type)} text-blue-600 text-xl xs:text-2xl`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm xs:text-base text-gray-800",children:l.message||"No message available"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i(l.createdAt)})]})]},l.id))})]})})};function Lne(){return n.jsxs("div",{children:["No store available at the moment.",n.jsx("p",{children:"Check back later for updates."})]})}function Une(){const{productId:t}=lc(),e=Ns(),[s,r]=_.useState({name:"",price:"",quantity:0,description:"",imageUrls:[],videoUrls:[],colors:[],status:"pending",locationData:{country:"",state:"",city:"",address:""},isDailyDeal:!1,discountPercentage:0}),[a,i]=_.useState(!0),[l,d]=_.useState({}),[u,h]=_.useState(""),[f,p]=_.useState(""),[x,w]=_.useState("");_.useEffect(()=>{(async()=>{var O;try{const I=(O=we.currentUser)==null?void 0:O.uid;if(!I)throw new Error("User not authenticated");const C=_e(J,"products",t),E=await Ge(C);if(E.exists()&&E.data().sellerId===I){const D=E.data();r({name:D.name||"",price:D.price||"",quantity:D.quantity||0,description:D.description||"",imageUrls:Array.isArray(D.imageUrls)?D.imageUrls:[],videoUrls:Array.isArray(D.videoUrls)?D.videoUrls:[],colors:Array.isArray(D.colors)?D.colors:[],status:D.status||"pending",locationData:D.locationData||{country:"",state:"",city:"",address:""},isDailyDeal:D.isDailyDeal||!1,discountPercentage:D.discountPercentage||0})}else throw new Error("Product not found or unauthorized")}catch(I){d({general:I.message})}finally{i(!1)}})()},[t]);const N=()=>{const R={};return s.name.trim()||(R.name="Product name is required"),(!s.price||isNaN(s.price)||Number(s.price)<=0)&&(R.price="Valid price is required"),s.quantity<0&&(R.quantity="Quantity cannot be negative"),s.locationData.country||(R.country="Country is required"),s.locationData.state||(R.state="State is required"),s.isDailyDeal&&(!s.discountPercentage||s.discountPercentage<0||s.discountPercentage>100)&&(R.discountPercentage="Discount must be between 0 and 100%"),R},v=R=>{const{name:O,value:I,type:C,checked:E}=R.target;r(D=>({...D,[O]:C==="checkbox"?E:I}))},j=R=>{const O=Number(R.target.value);r(I=>({...I,quantity:O>=0?O:0}))},k=R=>{const O=R.target.value;r(I=>({...I,colors:O?[...new Set([...I.colors,O])]:I.colors}))},T=async R=>{const O=R.target.files[0];if(O){const I=new FileReader;I.onloadend=async()=>{const C=I.result,E=CE($v,`products/${t}/images/${Date.now()}`);await EE(E,C,"data_url");const D=await TE(E);r(V=>({...V,imageUrls:[...V.imageUrls,D]}))},I.readAsDataURL(O)}},P=async R=>{const O=R.target.files[0];if(O){const I=new FileReader;I.onloadend=async()=>{const C=I.result,E=CE($v,`products/${t}/videos/${Date.now()}`);await EE(E,C,"data_url");const D=await TE(E);r(V=>({...V,videoUrls:[...V.videoUrls,D]}))},I.readAsDataURL(O)}},U=async()=>{var O;const R=N();if(Object.keys(R).length>0){d(R);return}try{const I=(O=we.currentUser)==null?void 0:O.uid,C=_e(J,"products",t);await Qr(C,{...s,updatedAt:ha()});const E=_e(Ue(J,"adminNotifications"));await ts(E,{message:`Product "${s.name}" (ID: ${t}) edited by seller ${I}`,type:"product_edit",sellerId:I,productId:t,timestamp:ha(),read:!1}),h("Product updated successfully!"),setTimeout(()=>e("/seller/products"),2e3)}catch(I){d({general:"Failed to save product: "+I.message})}};return a?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:n.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-6rem)]",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("p",{className:"mt-4 text-xl font-semibold text-gray-800",children:"Loading..."})]})})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Ls,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-8 max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-edit-alt text-blue-500 mr-2"})," Edit Product"]}),l.general&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg mb-6",children:n.jsx("p",{className:"text-red-700",children:l.general})}),u&&n.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-6",children:n.jsx("p",{className:"text-green-700",children:u})}),n.jsxs("form",{className:"space-y-6 sm:space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:v,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${l.name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),l.name&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:l.name})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:["Price () ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",id:"price",name:"price",value:s.price,onChange:v,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${l.price?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),l.price&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:l.price})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",id:"quantity",name:"quantity",value:s.quantity,onChange:j,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${l.quantity?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),l.quantity&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:l.quantity})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{htmlFor:"colors",className:"block text-sm font-medium text-gray-700",children:"Colors"}),n.jsx("input",{type:"text",id:"colors",name:"colors",value:"",onChange:k,placeholder:"Enter a color (e.g., #FF0000)",className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.colors.map((R,O)=>n.jsx("span",{className:"inline-block w-6 h-6 rounded-full",style:{backgroundColor:R}},O))})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:v,className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500",rows:"4"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Images"}),n.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.imageUrls.map((R,O)=>n.jsx("img",{src:R,alt:"Product",className:"w-20 h-20 object-cover rounded-lg"},O))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Videos"}),n.jsx("input",{type:"file",accept:"video/*",onChange:P,className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.videoUrls.map((R,O)=>n.jsxs("video",{controls:!0,className:"w-40 h-30 object-cover rounded-lg",children:[n.jsx("source",{src:R,type:"video/mp4"}),"Your browser does not support the video tag."]},O))})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Daily Deal"}),n.jsx("input",{type:"checkbox",id:"isDailyDeal",name:"isDailyDeal",checked:s.isDailyDeal,onChange:v,className:"mt-1 h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.isDailyDeal&&n.jsxs("div",{className:"mt-2",children:[n.jsxs("label",{htmlFor:"discountPercentage",className:"block text-sm font-medium text-gray-700",children:["Discount Percentage (%) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",id:"discountPercentage",name:"discountPercentage",value:s.discountPercentage,onChange:v,min:"0",max:"100",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${l.discountPercentage?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),l.discountPercentage&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:l.discountPercentage})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"button",onClick:U,className:"w-full sm:w-auto px-6 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold shadow-md hover:from-blue-700 hover:to-purple-700 transition focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 mt-4 sm:mt-0",children:"Save Changes"})})]})]})})]})}function Vne({title:t,imageUrl:e}){return n.jsxs("div",{className:"relative h-64 md:h-96 overflow-hidden",children:[e?n.jsx("img",{src:e,alt:t,className:"w-full h-full object-cover"}):n.jsx("div",{className:"bg-gray-200 border-2 border-dashed w-full h-full"}),t&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:n.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white text-center",children:t})})]})}function Fne(){const[t,e]=_.useState(window.innerWidth<768);return _.useEffect(()=>{const s=()=>e(window.innerWidth<768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),t}const zne={"Vehicles & Transport":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485716/auto_big_k4jp8e.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485719/auto_small_fvr8do.jpg"},"Television & Accessories":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485684/screens_big_stuvgq.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485713/screens_small_wzvifu.jpg"},"Perfumes & Fragrances":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485702/perfume_big_mzpohm.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485684/perfume_small_xhsxan.jpg"},"Home & Living":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485706/garden_big_p9bfjz.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485710/garden_small_ruvatt.jpg"},"Camera & Photography":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485711/camera_big_icewmf.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485703/camera_small_dv0k55.jpg"},"Game & Console":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485685/games_big_tyfg2v.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485698/games_small_s2hvrp.jpg"},"Drinks & Beverages":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485685/drink_big_afnisz.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485685/drink_small_tsaqxo.jpg"}},Bne="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80";function $ne(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function qne(t,e){return Object.keys(e).find(s=>$ne(s)===t)}function Hne(){const{categoryName:t}=lc(),[e,s]=_.useState({}),[r,a]=_.useState(!0),[i,l]=_.useState(""),[d,u]=_.useState([]),[h,f]=_.useState(!1),p=Fne();_.useEffect(()=>{const k=ws(Ue(J,"customSubcategories"),T=>{const P={};T.forEach(U=>{P[U.id]=U.data().subcategories||[]}),s(P),a(!1)});return()=>k()},[]);const x=qne(t,e),w=x?e[x]:null,N=zne[x],v=N?p?N.mobile:N.desktop:Bne,j=!N;return _.useEffect(()=>{w&&w.length>0&&l(w[0])},[w]),_.useEffect(()=>{(async()=>{if(!(!x||!i)){f(!0);try{const T=Rt(Ue(J,"products"),ht("category","==",x.toLowerCase()),ht("subcategory","==",i)),U=(await yt(T)).docs.map(R=>({id:R.id,...R.data()}));u(U)}catch{u([])}finally{f(!1)}}})()},[x,i]),r?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):w?n.jsxs("div",{className:"bg-white min-h-screen",children:[n.jsx(Vne,{title:j?x:"",imageUrl:v}),n.jsxs("div",{className:"container mx-auto px-4 py-6",children:[n.jsx("div",{className:"flex overflow-x-auto pb-2 mb-6 -mx-4 px-4 border-b",children:w.map(k=>n.jsx("button",{className:`px-4 py-2 font-medium whitespace-nowrap ${i===k?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>l(k),children:k},k))}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h2",{className:"text-xl font-bold",children:[i," Products"]}),n.jsx(ue,{to:`/products?category=${encodeURIComponent(x)}&subcategory=${encodeURIComponent(i)}`,className:"text-blue-600 hover:underline",children:"See All"})]}),h?n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(5)].map((k,T)=>n.jsx("div",{className:"bg-gray-200 rounded-lg aspect-square animate-pulse"},T))}):d.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-600",children:["No products found in ",i]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:d.map(k=>n.jsx(hn,{product:k},k.id))})]})]})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Category not found"}),n.jsxs("p",{className:"mt-4",children:['The category "',t,`" doesn't exist.`]}),n.jsx(ue,{to:"/",className:"mt-6 inline-block text-blue-600 hover:underline",children:"Return to homepage"})]})})}const ZA={businessName:"",regNumber:"",regVerified:!1,regVerifying:!1,regError:"",taxRef:"",taxVerified:!1,taxVerifying:!1,taxError:"",address:"",country:"Nigeria",phone:"",phoneCode:"+234",email:"",manager:"",managerEmail:"",managerPhone:"",productLines:[],categories:[],bankName:"",bankCode:"",accountNumber:"",accountName:"",accountVerified:!1,accountVerifying:!1,accountError:"",agree:!1},Gne=()=>{const[t,e]=_.useState(1),[s,r]=_.useState(!1),[a,i]=_.useState(ZA),[l,d]=_.useState({}),[u,h]=_.useState([]),[f,p]=_.useState([]),{alerts:x,addAlert:w,removeAlert:N}=Nm();_.useEffect(()=>{fetch("/api/categories").then(C=>C.json()).then(C=>{h(C),console.log("Fetched categories:",C)}).catch(C=>console.error("Error fetching categories:",C)),fetch("/fetch-banks").then(C=>C.json()).then(C=>{p(C),console.log("Fetched banks:",C)}).catch(C=>console.error("Error fetching banks:",C))},[]);const v=(C,E)=>{i(D=>({...D,[C]:E})),l[C]&&d(D=>({...D,[C]:""}))},j=C=>{const E={};return C===1&&(a.businessName||(E.businessName="Business name is required"),a.regNumber||(E.regNumber="Registration number is required"),a.address||(E.address="Business address is required"),a.country||(E.country="Country is required")),C===2&&(a.phone||(E.phone="Phone number is required"),a.email||(E.email="Email is required"),a.manager||(E.manager="Manager name is required"),a.managerEmail||(E.managerEmail="Manager email is required"),a.managerPhone||(E.managerPhone="Manager phone is required")),C===3&&(a.productLines||(E.productLines="Product line is required"),a.bankName||(E.bankName="Bank name is required"),a.accountName||(E.accountName="Account name is required"),a.accountNumber||(E.accountNumber="Account number is required"),a.agree||(E.agree="You must agree to the terms")),d(E),Object.keys(E).length===0},k=async()=>{t<4?j(t)&&e(t+1):await T()},T=async()=>{r(!0);try{const C={...a,submittedAt:new Date().toISOString(),timestamp:Date.now(),userAgent:navigator.userAgent,formType:"Pro Seller Application"};console.log("Submitting Pro Seller Application:",C);const D=await fetch("https://foremade-backend.onrender.com/api/pro-seller",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(C)}),V=await D.json();if(console.log("API Response:",V),!D.ok)throw new Error(V.message||"Submission failed");w("Pro Seller application submitted successfully! We will review your application and get back to you soon.","success"),i(ZA),e(1)}catch(C){w("There was an error submitting your application. Please try again or contact support.","error"),console.error("Submission error:",C)}finally{r(!1)}},P=()=>{t>1&&e(C=>C-1)},U=async()=>{if(!(!a.regNumber||!a.businessName)){i(C=>({...C,regVerifying:!0,regError:"",regVerified:!1}));try{const C={country:a.country==="Nigeria"?"NG":a.country,regNumber:a.regNumber};console.log("Verifying reg number:",C);const E=await fetch("/verify-business-reg-number",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),D=await E.json();console.log("Reg number verification response:",D),E.ok&&D.businessName?D.businessName.trim().toLowerCase()===a.businessName.trim().toLowerCase()?i(V=>({...V,regVerified:!0,regVerifying:!1,regError:""})):i(V=>({...V,regVerified:!1,regVerifying:!1,regError:"Business name does not match registration."})):i(V=>({...V,regVerified:!1,regVerifying:!1,regError:D.message||"Verification failed."}))}catch(C){i(E=>({...E,regVerified:!1,regVerifying:!1,regError:"Network or server error."})),console.error("Reg number verification error:",C)}}},R=async()=>{if(!(!a.accountNumber||!a.bankCode)){i(C=>({...C,accountVerifying:!0,accountError:"",accountVerified:!1,accountName:""}));try{const C={accountNumber:a.accountNumber,bankCode:a.bankCode};console.log("Verifying bank account:",C);const E=await fetch("/verify-bank-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),D=await E.json();console.log("Bank account verification response:",D),E.ok&&D.accountName?i(V=>({...V,accountVerified:!0,accountVerifying:!1,accountError:"",accountName:D.accountName})):i(V=>({...V,accountVerified:!1,accountVerifying:!1,accountError:D.message||"Verification failed.",accountName:""}))}catch(C){i(E=>({...E,accountVerified:!1,accountVerifying:!1,accountError:"Network or server error.",accountName:""})),console.error("Bank account verification error:",C)}}},O=()=>{const C={enter:{x:50,opacity:0},center:{x:0,opacity:1},exit:{x:-50,opacity:0}};return n.jsx(Md,{mode:"wait",children:n.jsxs(St.div,{variants:C,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},children:[t===1&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(mK,{className:"w-6 h-6 text-orange-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-orange-800 mb-2",children:"Business Information"}),n.jsx("p",{className:"text-orange-600",children:"Let's start with your business details"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Business Name",value:a.businessName,onChange:E=>v("businessName",E.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.businessName?"border-red-500":"border-gray-300"}`}),l.businessName&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.businessName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center",children:["Registration Number ",n.jsx("span",{className:"text-red-500",children:"*"}),a.regVerifying&&n.jsx("span",{className:"ml-2 text-xs text-orange-500 animate-pulse",children:"Verifying..."}),a.regVerified&&!a.regError&&n.jsx(Ua,{className:"ml-2 w-5 h-5 text-green-500"}),a.regError&&n.jsx("span",{className:"ml-2 text-xs text-red-500",children:a.regError})]}),n.jsx("input",{type:"text",placeholder:"Registration Number",value:a.regNumber,onChange:E=>v("regNumber",E.target.value),onBlur:U,className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${a.regError?"border-red-500":a.regVerified?"border-green-500":l.regNumber?"border-red-500":"border-gray-300"}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tax Reference"}),n.jsx("input",{type:"text",placeholder:"Tax Reference (optional)",value:a.taxRef,onChange:E=>v("taxRef",E.target.value),className:"w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all border-gray-300"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Address ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Business Address",value:a.address,onChange:E=>v("address",E.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.address?"border-red-500":"border-gray-300"}`}),l.address&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.address})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Country ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Country",value:a.country,onChange:E=>v("country",E.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.country?"border-red-500":"border-gray-300"}`}),l.country&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.country})]})]}),t===2&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(Po,{className:"w-6 h-6 text-orange-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-orange-800 mb-2",children:"Contact Information"}),n.jsx("p",{className:"text-orange-600",children:"How can we reach you?"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Phone Number",value:a.phone,onChange:E=>v("phone",E.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.phone?"border-red-500":"border-gray-300"}`}),l.phone&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.phone})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"Email Address",value:a.email,onChange:E=>v("email",E.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.email?"border-red-500":"border-gray-300"}`}),l.email&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.email})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Manager Name",value:a.manager,onChange:E=>v("manager",E.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.manager?"border-red-500":"border-gray-300"}`}),l.manager&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.manager})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"Manager Email",value:a.managerEmail,onChange:E=>v("managerEmail",E.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.managerEmail?"border-red-500":"border-gray-300"}`}),l.managerEmail&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.managerEmail})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager Phone ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Manager Phone",value:a.managerPhone,onChange:E=>v("managerPhone",E.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.managerPhone?"border-red-500":"border-gray-300"}`}),l.managerPhone&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.managerPhone})]})]}),t===3&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(hx,{className:"w-6 h-6 text-orange-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-orange-800 mb-2",children:"Products & Banking"}),n.jsx("p",{className:"text-orange-600",children:"Tell us about your products and banking details"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Product Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:u.length>0?u.map((E,D)=>n.jsxs("label",{className:"flex items-center space-x-2 bg-orange-50 rounded-lg px-3 py-2 cursor-pointer hover:bg-orange-100 transition",children:[n.jsx("input",{type:"checkbox",checked:a.productLines.includes(E.value||E.name||E),onChange:V=>{let B=a.productLines.includes(E.value||E.name||E)?a.productLines.filter(M=>M!==(E.value||E.name||E)):[...a.productLines,E.value||E.name||E];v("productLines",B),console.log("Selected product lines:",B)},className:"accent-orange-500 w-4 h-4"}),n.jsx("span",{className:"text-sm",children:E.label||E.name||E})]},E.value||E.code||E.name||D)):n.jsx("span",{className:"text-gray-400 italic",children:"Loading categories..."})}),l.productLines&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.productLines})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Bank Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:a.bankCode,onChange:E=>{const D=f.find(V=>V.code===E.target.value);v("bankCode",E.target.value),v("bankName",D?D.name:""),console.log("Selected bank:",D)},className:`w-full px-4 py-3 border rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${l.bankName?"border-red-500":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select Bank"}),f.map((E,D)=>n.jsx("option",{value:E.code,children:E.name},E.code||D))]}),l.bankName&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.bankName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center",children:["Account Number ",n.jsx("span",{className:"text-red-500",children:"*"}),a.accountVerifying&&n.jsx("span",{className:"ml-2 text-xs text-orange-500 animate-pulse",children:"Verifying..."}),a.accountVerified&&!a.accountError&&n.jsx(Ua,{className:"ml-2 w-5 h-5 text-green-500"}),a.accountError&&n.jsx("span",{className:"ml-2 text-xs text-red-500",children:a.accountError})]}),n.jsx("input",{type:"text",placeholder:"Account Number",value:a.accountNumber,onChange:E=>v("accountNumber",E.target.value),onBlur:R,className:`w-full px-4 py-3 border rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${a.accountError?"border-red-500":a.accountVerified?"border-green-500":l.accountNumber?"border-red-500":"border-gray-300"}`}),a.accountName&&n.jsxs("div",{className:"mt-2 flex items-center text-green-600 text-sm font-semibold",children:[n.jsx(Ua,{className:"w-5 h-5 mr-1"}),a.accountName]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:a.agree,onChange:E=>v("agree",E.target.checked)}),n.jsxs("label",{className:"text-sm text-gray-700",children:["I agree to the Pro Seller Terms & Conditions ",n.jsx("span",{className:"text-red-500",children:"*"})]}),l.agree&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.agree})]})]}),t===4&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(Ua,{className:"w-8 h-8 text-green-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-2",children:"Review & Submit"}),n.jsx("p",{className:"text-green-600",children:"Please review your information before submitting."})]}),n.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 shadow space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Business Name:"})," ",a.businessName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Registration Number:"})," ",a.regNumber," ",a.regVerified&&n.jsx(Ua,{className:"inline w-4 h-4 text-green-500 ml-1"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Tax Reference:"})," ",a.taxRef," ",a.taxVerified&&n.jsx(Ua,{className:"inline w-4 h-4 text-green-500 ml-1"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Business Address:"})," ",a.address]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Country:"})," ",a.country]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Phone:"})," ",a.phoneCode," ",a.phone]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",a.email]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Manager:"})," ",a.manager]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Manager Email:"})," ",a.managerEmail]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Manager Phone:"})," ",a.managerPhone]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Product Lines:"})," ",a.productLines.join(", ")]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Bank:"})," ",a.bankName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Account Number:"})," ",a.accountNumber," ",a.accountVerified&&n.jsx(Ua,{className:"inline w-4 h-4 text-green-500 ml-1"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Account Name:"})," ",a.accountName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Agreed to Terms:"})," ",a.agree?"Yes":"No"]})]}),n.jsx("div",{className:"text-xs text-gray-500 text-center",children:"By submitting, you confirm all information is correct and consent to verification."})]})]},t)})},I=[{label:"Business Info"},{label:"Contact Info"},{label:"Products & Banking"},{label:"Review & Submit"}];return n.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-100 flex items-center justify-center py-8 px-2 sm:px-4",children:[n.jsx(Nd,{alerts:x,removeAlert:N}),n.jsx("div",{className:"w-full max-w-lg mx-auto",children:n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl border border-orange-100 dark:border-gray-800 overflow-hidden",children:n.jsxs("div",{className:"px-6 pt-8 pb-2 sm:px-10",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-orange-700 dark:text-orange-400 tracking-tight",children:"Pro Seller Registration"}),n.jsx(Ua,{className:"w-9 h-9 text-orange-500"})]}),n.jsx("div",{className:"flex items-center justify-center mb-10",children:I.map((C,E)=>n.jsxs(ss.Fragment,{children:[n.jsxs("div",{className:`flex flex-col items-center ${E<t-1?"text-orange-600":E===t-1?"text-orange-700 font-bold dark:text-orange-300":"text-gray-300 dark:text-gray-600"}`,children:[n.jsx("div",{className:`w-9 h-9 flex items-center justify-center rounded-full border-4 ${E<t-1?"border-orange-600 bg-orange-100":E===t-1?"border-orange-700 bg-orange-200 dark:bg-orange-900":"border-gray-200 bg-gray-100 dark:bg-gray-800"} text-lg font-bold`,children:E+1}),n.jsx("span",{className:"text-xs mt-2 font-semibold tracking-wide uppercase",children:C.label})]}),E<I.length-1&&n.jsx("div",{className:`flex-1 h-1 mx-2 rounded-full ${E<t-1?"bg-orange-600":"bg-gray-200 dark:bg-gray-700"}`})]},C.label))}),n.jsxs("form",{onSubmit:C=>{C.preventDefault(),k()},children:[n.jsx("div",{className:"max-h-[55vh] overflow-y-auto pb-2 custom-scrollbar",children:O()}),n.jsx("div",{className:"sticky bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-white via-white/90 to-transparent dark:from-gray-900 dark:via-gray-900/90 dark:to-transparent px-0 pt-6 pb-4 mt-8 border-t border-orange-100 dark:border-gray-800 shadow-2xl flex flex-col items-center gap-2",children:n.jsxs("div",{className:"flex w-full gap-4",children:[t>1&&n.jsx("button",{type:"button",onClick:P,className:"flex-1 px-6 py-3 rounded-xl bg-orange-100 text-orange-700 font-bold text-lg shadow hover:bg-orange-200 transition border-2 border-orange-200",children:"Back"}),n.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-6 py-3 rounded-xl bg-gradient-to-r from-orange-500 to-orange-600 text-white font-extrabold text-lg shadow-lg hover:from-orange-600 hover:to-orange-700 focus:ring-4 focus:ring-orange-200 transition border-2 border-orange-500 disabled:opacity-60 disabled:cursor-not-allowed",children:s?"Submitting...":t<4?"Continue":"Submit"})]})})]})]})})})]})},Wne="/assets/bg-wEpT47DD.jpg",Yne="/assets/1-BrZQmCyo.png",Kne="/assets/3-jTyAYhqG.png",Xne="/assets/2-DOJJuS8a.png";function Qne(){return n.jsxs("div",{className:"min-h-screen relative overflow-x-hidden flex flex-col",children:[n.jsx("style",{children:`
        .arrow-border {
          clip-path: polygon(0% 10%, 50% 10%, 50% 0%, 100% 50%, 50% 100%, 50% 90%, 0% 90%);
          box-shadow: 0 4px 24px 0 rgba(0,0,0,0.08);
          background: white;
        }
        .fold-effect {
          /* Optionally add a slight transform for the fold effect */
          box-shadow: 0 8px 32px 0 rgba(0,0,0,0.18);
          z-index: 2;
        }
        .sway {
          animation: sway-left-right 2.2s ease-in-out infinite alternate;
        }
        @keyframes sway-left-right {
          0% { transform: translateX(0); }
          50% { transform: translateX(10px); }
          100% { transform: translateX(0); }
        }
        .learn-more-anim {
          transition: background 0.3s, color 0.3s, transform 0.3s;
        }
        .learn-more-anim:hover {
          background: #f59e42;
          color: #fff;
          transform: scale(1.07) translateY(-2px);
        }
        .learn-more-anim .arrow-anim {
          transition: transform 0.3s;
        }
        .learn-more-anim:hover .arrow-anim {
          transform: translateX(8px) scale(1.2) rotate(8deg);
        }
        .register-anim {
          transition: background 0.3s, box-shadow 0.3s, transform 0.3s;
        }
        .register-anim:hover {
          background: linear-gradient(90deg, #1e3a8a 0%, #7c3aed 100%);
          box-shadow: 0 8px 32px 0 rgba(245,158,66,0.18);
          transform: scale(1.06) translateY(-2px);
        }
        .register-anim .arrow-anim {
          transition: transform 0.3s;
        }
        .register-anim:hover .arrow-anim {
          transform: translateX(8px) scale(1.2) rotate(8deg);
        }
      `}),n.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat pointer-events-none",style:{backgroundImage:`url(${Wne})`}}),n.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 flex items-center justify-end pr-8 pointer-events-none select-none"}),n.jsxs("div",{className:"relative z-10 flex-1 flex flex-col justify-center max-w-6xl mx-auto px-4 py-12 w-full",children:[n.jsx("div",{className:"mb-12 max-w-2xl lg:ml-0 ml-0",children:n.jsxs("div",{className:"bg-gradient-to-r from-blue-900 via-blue-800 to-purple-900 text-white p-10 md:p-16 rounded-2xl shadow-2xl flex flex-col items-start",children:[n.jsx("h1",{className:"text-orange-400 text-4xl md:text-5xl font-extrabold mb-4 self-start",children:"Foremade Pro Seller"}),n.jsxs("div",{className:"flex items-center text-lg md:text-xl",children:[n.jsx("span",{children:"Grow Your Business With Ease"}),n.jsxs(ue,{to:"/pro-seller-form",className:"ml-4 flex items-center group",children:[n.jsx(Xh,{className:"w-8 h-8 animate-pulse text-yellow-300 group-hover:text-orange-400 transition-colors duration-200 sway"}),n.jsx(Xh,{className:"w-8 h-8 animate-pulse delay-75 text-yellow-300 group-hover:text-orange-400 transition-colors duration-200 sway"}),n.jsx(Xh,{className:"w-8 h-8 animate-pulse delay-150 text-yellow-300 group-hover:text-orange-400 transition-colors duration-200 sway"})]})]})]})}),n.jsx("div",{className:"mb-12 max-w-4xl lg:ml-0 ml-0",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-10 md:p-16 w-full",children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 pb-2 border-b border-gray-200",children:"WHO CAN REGISTER AS A PRO SELLER?"}),n.jsx("div",{className:"mb-8",children:n.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:"Are you a manufacturer, trader, brand, or retail business looking to expand your reach and grow your customer base? Become a FOREMADE Pro Seller and gain access to advanced features, dedicated support, and increased visibility."})}),n.jsxs("div",{className:"space-y-6 mb-8",children:[n.jsxs("div",{className:"hover:bg-blue-50 p-4 rounded transition-colors duration-200",children:[n.jsx("h3",{className:"font-semibold text-blue-900 text-lg mb-2",children:"1. New to FOREMADE?"}),n.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Sign up directly through the FOREMADE Pro Seller registration page."})]}),n.jsxs("div",{className:"hover:bg-blue-50 p-4 rounded transition-colors duration-200",children:[n.jsx("h3",{className:"font-semibold text-blue-900 text-lg mb-2",children:"2. Already have a FOREMADE account?"}),n.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"You can upgrade your existing seller account to a Pro account once all current orders are fulfilled."})]}),n.jsxs("div",{className:"hover:bg-blue-50 p-4 rounded transition-colors duration-200",children:[n.jsx("h3",{className:"font-semibold text-blue-900 text-lg mb-2",children:"3. Need both personal and business accounts?"}),n.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"No problem! You're welcome to have one standard account and one Pro account - just use a different email and phone number for your Pro registration."})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(ue,{to:"/pro-seller-form",className:"learn-more-anim group text-orange-500 text-lg font-semibold px-6 py-2 rounded-full border border-orange-200 shadow hover:shadow-lg flex items-center justify-end w-fit",children:n.jsxs("span",{className:"flex items-center justify-center",children:["Learn more",n.jsx(xw,{className:"ml-2 w-5 h-5 arrow-anim group-hover:text-white transition-transform duration-200 sway"})]})})})]})}),n.jsxs("div",{className:"flex flex-col items-center justify-center w-full gap-8 -mt-11 -mb-4",children:[n.jsxs("div",{className:"flex flex-row items-end justify-start gap-8 w-full",children:[n.jsx("div",{className:"w-48 h-48 md:w-52 md:h-52 lg:w-72 lg:h-72 rounded-full shadow-lg bg-white flex items-center justify-center overflow-hidden",children:n.jsx("img",{src:Yne,alt:"Seller 1",className:"w-full h-full object-cover"})}),n.jsx("div",{className:"w-48 h-48 md:w-52 md:h-52 lg:w-72 lg:h-72 rounded-full shadow-xl bg-white flex items-center justify-center overflow-hidden fold-effect",children:n.jsx("img",{src:Kne,alt:"Seller 2",className:"w-full h-full object-cover"})})]}),n.jsxs("div",{className:"flex flex-row items-center justify-center lg:justify-end w-full gap-6 -mt-9 mb-8",children:[n.jsx("div",{className:"w-48 h-48 md:w-52 md:h-52 lg:w-72 lg:h-72 arrow-border shadow-xl bg-white flex items-center justify-center overflow-hidden flex-shrink-0",children:n.jsx("img",{src:Xne,alt:"Seller 3",className:"w-full h-full object-cover"})}),n.jsx(ue,{to:"/pro-seller-form",className:"register-anim group bg-gradient-to-r from-blue-900 to-purple-900 text-white px-8 py-4 rounded-full font-semibold text-base flex items-center hover:from-blue-800 hover:to-purple-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:n.jsxs("span",{className:"flex items-center",children:["Register Now",n.jsx(xw,{className:"ml-2 w-5 h-5 arrow-anim group-hover:text-orange-300 transition-transform duration-200 sway"})]})})]})]})]})]})}const f1="/assets/undraw_my-files_1xwx-DOxcO3os.svg",Jne=()=>n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("img",{src:f1,alt:"Buyer Protection",className:"w-40 h-40 mb-4"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"Buyer Protection Policy"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"Your peace of mind is our priority. Learn how Foremade protects your purchases and ensures a safe shopping experience."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3",children:"Important"}),n.jsxs("p",{className:"mb-4",children:["If your purchase was made through a Foremade Pro Seller, please refer to our ",n.jsx("strong",{children:"Pro Refund Policy"})," instead.",n.jsx("br",{}),"Every order placed using the Buy Now button includes our Buyer Protection (added as a fee at checkout), which activates the Foremade Refund Policy. This protection ensures you're eligible for a refund if:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[n.jsx("li",{children:"Your parcel never arrives"}),n.jsx("li",{children:"Your parcel arrives damaged"}),n.jsx("li",{children:"The item you receive is significantly not as described (SNAD)"})]}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 mb-4 rounded",children:[n.jsx("strong",{className:"text-blue-700",children:"Please note:"})," Refunds are not guaranteed for items that don't fit or aren't your style. You may still contact the seller to request a return, but approval is at their discretion."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Refunds for Returns"}),n.jsx("p",{className:"mb-2",children:"A full return refund may include:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"The price of returned items"}),n.jsx("li",{children:"The Buyer Protection fee linked to returned items"}),n.jsx("li",{children:"Your original shipping fee"}),n.jsx("li",{children:"Optional services (e.g., Item or Electronics Verification)"})]}),n.jsx("p",{className:"mb-4",children:"We'll calculate the protection refund based on the items kept and refund the remaining portion. Discounts or voucher values used during purchase will be deducted proportionally from your refund."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Partial Refunds"}),n.jsxs("p",{className:"mb-2",children:["If your item is SNAD, the seller may offer a partial refund, allowing you to keep the item while receiving part of the cost back. You'll see the offer in your chat with the seller, where you can ",n.jsx("em",{children:"accept or decline"}),". Accepted partial refunds include:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"A partial item price refund"}),n.jsx("li",{children:"A proportional refund of the Buyer Protection fee"})]}),n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4 rounded",children:"Shipping fees and optional service charges are not refunded in partial cases. Bundled purchases don't qualify for partial refundsonly full or item-specific returns."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"How to Request a Refund"}),n.jsx("p",{className:"mb-2",children:"You must act within 2 days of being notified that your order was delivered or marked as lost:"}),n.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[n.jsxs("li",{children:["Go to your ",n.jsx("em",{children:"chat with the seller"})]}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"I have an issue"})]}),n.jsx("li",{children:"Follow the prompts to submit your refund request"})]}),n.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 mb-4 rounded",children:"This action temporarily freezes the order while we help resolve the situation. If you do nothing within the 2-day window, payment will be released to the seller."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"What Happens Next?"}),n.jsx("p",{className:"mb-2",children:"Depending on the issue, here's how we handle it:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Order is paused"}),n.jsx("li",{children:"Payment is held securely"}),n.jsx("li",{children:"You and the seller can work toward a solution"})]}),n.jsxs("p",{className:"mb-4",children:["You can track the status directly in the ",n.jsx("em",{children:"conversation screen"}),". If you both resolve the issue yourselves, simply press:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:[n.jsx("em",{children:"Resolve this issue"})," for missing/damaged parcels"]}),n.jsxs("li",{children:[n.jsx("em",{children:"Cancel & keep order"})," for agreed resolutions"]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You're the Seller"}),n.jsx("p",{className:"mb-2",children:"If a buyer raises an SNAD claim:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:["Ask them to suspend the order by clicking ",n.jsx("em",{children:"I have an issue"})]}),n.jsx("li",{children:"You'll have 14 days to resolve the issue"}),n.jsxs("li",{children:["Review buyer's evidence and choose one option:",n.jsxs("ul",{className:"list-disc ml-6",children:[n.jsxs("li",{children:[n.jsx("em",{children:"Partial refund"})," (buyer keeps item)"]}),n.jsxs("li",{children:[n.jsx("em",{children:"Full refund"})," (buyer keeps item)"]}),n.jsx("li",{children:n.jsx("em",{children:"Request a return"})})]})]})]}),n.jsx("p",{className:"mb-2",children:"If a return is requested:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Buyer ships the item within 5 business days"}),n.jsxs("li",{children:["Share your ",n.jsx("em",{children:"contact info"})," if required"]}),n.jsx("li",{children:"After receiving the item, confirm its condition within 2 days"}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"Everything is OK"})," to complete the return"]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You Disagree with a Claim"}),n.jsx("p",{className:"mb-2",children:"You may dispute the refund request:"}),n.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[n.jsxs("li",{children:["Press ",n.jsx("em",{children:"View issue details"})]}),n.jsxs("li",{children:["Click ",n.jsx("em",{children:"Contact Us"})]}),n.jsxs("li",{children:["Review the terms and press ",n.jsx("em",{children:"Agree"})]}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"Submit"})," to escalate to our support team"]})]}),n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 mb-4 rounded",children:[n.jsx("strong",{children:"Note:"})," You can only dispute if you haven't already accepted a refund option."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If No Agreement is Reached"}),n.jsx("p",{className:"mb-4",children:"If both sides can't find a solution within 14 days, and no one reaches out for support, Foremade will step in to review the case and issue a final decision."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Special Cases"}),n.jsxs("p",{className:"mb-2",children:[n.jsx("strong",{children:"Item Verified but Still SNAD"}),n.jsx("br",{}),"Follow the steps under ",n.jsx("em",{children:"I've received a SNAD item"})," to request a refund."]}),n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Device Linked to Seller's Account"})}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Notify the seller"}),n.jsx("li",{children:"If unlinking fails, discuss a return or refund"}),n.jsxs("li",{children:["If a return is required, use the ",n.jsx("em",{children:"Return the order"})," button"]})]}),n.jsx("p",{className:"mb-4",children:"Shipping details must be accurate. If not provided, Foremade may issue a refund even without a return."})]})]})}),Zne=()=>n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("img",{src:f1,alt:"Refund Policy",className:"w-40 h-40 mb-4"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"Refund Policy"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"Understand how Foremade handles refunds and protects your purchases."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3",children:"Important"}),n.jsxs("p",{className:"mb-4",children:["If your purchase was made through a Foremade ",n.jsx(ue,{to:"/pro-seller-guide",className:"text-blue-600 underline font-semibold",children:"Pro Seller"}),", please refer to our ",n.jsx(ue,{to:"/pro-refund-policy",className:"text-blue-600 underline font-semibold",children:"Pro Refund Policy"})," instead.",n.jsx("br",{}),"Every order placed using the Buy Now button includes our Buyer Protection (added as a fee at checkout), which activates the Foremade Refund Policy. This protection ensures you're eligible for a refund if:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[n.jsx("li",{children:"Your parcel never arrives"}),n.jsx("li",{children:"Your parcel arrives damaged"}),n.jsx("li",{children:"The item you receive is significantly not as described (SNAD)"})]}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 mb-4 rounded",children:[n.jsx("strong",{className:"text-blue-700",children:"Please note:"})," Refunds are not guaranteed for items that don't fit or aren't your style. You may still contact the seller to request a return, but approval is at their discretion."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Refunds for Returns"}),n.jsx("p",{className:"mb-2",children:"A full return refund may include:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"The price of returned items"}),n.jsx("li",{children:"The Buyer Protection fee linked to returned items"}),n.jsx("li",{children:"Your original shipping fee"}),n.jsx("li",{children:"Optional services (e.g., Item or Electronics Verification)"})]}),n.jsx("p",{className:"mb-4",children:"We'll calculate the protection refund based on the items kept and refund the remaining portion. Discounts or voucher values used during purchase will be deducted proportionally from your refund."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Partial Refunds"}),n.jsxs("p",{className:"mb-2",children:["If your item is SNAD, the seller may offer a partial refund, allowing you to keep the item while receiving part of the cost back. You'll see the offer in your chat with the seller, where you can ",n.jsx("em",{children:"accept or decline"}),". Accepted partial refunds include:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"A partial item price refund"}),n.jsx("li",{children:"A proportional refund of the Buyer Protection fee"})]}),n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4 rounded",children:"Shipping fees and optional service charges are not refunded in partial cases. Bundled purchases don't qualify for partial refundsonly full or item-specific returns."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"How to Request a Refund"}),n.jsx("p",{className:"mb-2",children:"You must act within 2 days of being notified that your order was delivered or marked as lost:"}),n.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[n.jsxs("li",{children:["Go to your ",n.jsx(ue,{to:"/orders",className:"text-blue-600 underline font-semibold",children:"chat with the seller"})]}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"I have an issue"})]}),n.jsx("li",{children:"Follow the prompts to submit your refund request"})]}),n.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 mb-4 rounded",children:"This action temporarily freezes the order while we help resolve the situation. If you do nothing within the 2-day window, payment will be released to the seller."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"What Happens Next?"}),n.jsx("p",{className:"mb-2",children:"Depending on the issue, here's how we handle it:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Order is paused"}),n.jsx("li",{children:"Payment is held securely"}),n.jsx("li",{children:"You and the seller can work toward a solution"})]}),n.jsxs("p",{className:"mb-4",children:["You can track the status directly in the ",n.jsx(ue,{to:"/orders",className:"text-blue-600 underline font-semibold",children:"conversation screen"}),". If you both resolve the issue yourselves, simply press:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:[n.jsx("em",{children:"Resolve this issue"})," for missing/damaged parcels"]}),n.jsxs("li",{children:[n.jsx("em",{children:"Cancel & keep order"})," for agreed resolutions"]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You're the Seller"}),n.jsx("p",{className:"mb-2",children:"If a buyer raises an SNAD claim:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:["Ask them to suspend the order by clicking ",n.jsx("em",{children:"I have an issue"})]}),n.jsx("li",{children:"You'll have 14 days to resolve the issue"}),n.jsxs("li",{children:["Review buyer's evidence and choose one option:",n.jsxs("ul",{className:"list-disc ml-6",children:[n.jsxs("li",{children:[n.jsx("em",{children:"Partial refund"})," (buyer keeps item)"]}),n.jsxs("li",{children:[n.jsx("em",{children:"Full refund"})," (buyer keeps item)"]}),n.jsx("li",{children:n.jsx("em",{children:"Request a return"})})]})]})]}),n.jsx("p",{className:"mb-2",children:"If a return is requested:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Buyer ships the item within 5 business days"}),n.jsxs("li",{children:["Share your ",n.jsx("em",{children:"contact info"})," if required (",n.jsx(ue,{to:"/support",className:"text-blue-600 underline font-semibold",children:"Contact Us"}),")"]}),n.jsx("li",{children:"After receiving the item, confirm its condition within 2 days"}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"Everything is OK"})," to complete the return"]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You Disagree with a Claim"}),n.jsx("p",{className:"mb-2",children:"You may dispute the refund request:"}),n.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[n.jsxs("li",{children:["Press ",n.jsx("em",{children:"View issue details"})]}),n.jsxs("li",{children:["Click ",n.jsx(ue,{to:"/support",className:"text-blue-600 underline font-semibold",children:"Contact Us"})]}),n.jsxs("li",{children:["Review the terms and press ",n.jsx("em",{children:"Agree"})]}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"Submit"})," to escalate to our support team"]})]}),n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 mb-4 rounded",children:[n.jsx("strong",{children:"Note:"})," You can only dispute if you haven't already accepted a refund option."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If No Agreement is Reached"}),n.jsx("p",{className:"mb-4",children:"If both sides can't find a solution within 14 days, and no one reaches out for support, Foremade will step in to review the case and issue a final decision."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Special Cases"}),n.jsxs("p",{className:"mb-2",children:[n.jsx("strong",{children:"Item Verified but Still SNAD"}),n.jsx("br",{}),"Follow the steps under ",n.jsx("em",{children:"I've received a SNAD item"})," to request a refund."]}),n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Device Linked to Seller's Account"})}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Notify the seller"}),n.jsx("li",{children:"If unlinking fails, discuss a return or refund"}),n.jsxs("li",{children:["If a return is required, use the ",n.jsx(ue,{to:"/orders",className:"text-blue-600 underline font-semibold",children:"Return the order"})," button"]})]}),n.jsx("p",{className:"mb-4",children:"Shipping details must be accurate. If not provided, Foremade may issue a refund even without a return."})]})]})}),eae=()=>n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("img",{src:f1,alt:"Pro Refund Policy",className:"w-40 h-40 mb-4"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"Pro Seller Refund & Withdrawal Policy"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"Learn about Foremade's return, refund, and withdrawal policy for Pro Seller transactions."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3",children:"Buyer Return Rights"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"7-Day Return Period:"})," Buyers have 7 calendar days from the day after receiving their order to request a return and refund."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"How to Request a Return:"})," Use the ",n.jsx("span",{className:"font-semibold",children:'"Report an Issue"'})," button within your order conversation on Foremade."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Return Exceptions:"})," Some products like custom-made, perishable, or hygiene-sensitive items are excluded from return eligibility."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Return Shipping Costs:"})," Buyers usually cover return shipping unless the seller offers free returns."]})]}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 mb-4 rounded",children:[n.jsx("strong",{className:"text-blue-700",children:"Note:"})," Always check the product listing for specific return exceptions or seller-offered free returns."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Pro Seller Responsibilities"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Accept Return Requests:"})," Must be accepted if submitted within the 7-day return window."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Respond Within 2 Business Days:"})," Decide whether to request the item back or issue a refund."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Inspect Returned Items:"})," Sellers must confirm the condition within 2 days of receiving returned goods."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Additional Policies:"})," Sellers may add more generous return options as long as they align with Foremade standards."]})]}),n.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4 rounded",children:[n.jsx("span",{className:"text-yellow-700 font-semibold",children:"Tip:"})," Pro Sellers can offer more flexible return policies to attract buyers, but must always meet Foremade's minimum standards."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Item Not Delivered"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Missing Parcels:"})," If an order is marked delivered but not received, the 7-day period begins from the expected delivery date."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Reporting Issues:"})," Buyers should report delivery issues within this period. Foremade will investigate with the courier."]})]}),n.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 mb-4 rounded",children:[n.jsx("span",{className:"text-purple-700 font-semibold",children:"Reminder:"})," Always keep your tracking information and communicate promptly if there are delivery issues."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Foremade's Role"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Dispute Support:"})," Foremade helps resolve issues if buyers and sellers can't agree."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Item Not as Described:"})," Claims will be reviewed based on evidence from both parties."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Enforcement:"})," Sellers must respond to valid claims within 2 days, or Foremade may intervene and refund the buyer directly."]})]}),n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 mb-4 rounded",children:[n.jsx("strong",{children:"Important:"})," Failure to respond to disputes may result in automatic refunds and impact your Pro Seller status. For more details, see the ",n.jsx(ue,{to:"/pro-seller-guide",className:"text-blue-600 underline font-semibold",children:"Pro Seller Guide"}),"."]})]})]})}),tae=()=>n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-blue-100 rounded-full",children:n.jsx("i",{className:"bx bx-file text-5xl text-blue-700"})}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"FOREMADE Marketplace  Terms and Conditions"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"Please read these terms and conditions carefully before using the FOREMADE platform."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[n.jsxs("p",{className:"mb-2",children:[n.jsx("strong",{children:"Last Updated:"})," July 5, 2024"]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"1. Eligibility"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[n.jsx("li",{children:"Be at least 18 years old (or have guardian consent if underage)"}),n.jsx("li",{children:"Provide truthful and accurate registration details"}),n.jsx("li",{children:"Not be restricted from using digital platforms by applicable law"})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"2. Account Registration"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Keep your login details secure"}),n.jsx("li",{children:"Be responsible for all activity under your account"}),n.jsx("li",{children:"Notify FOREMADE of any unauthorised access or misuse"})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"3. Selling on FOREMADE"}),n.jsxs("p",{className:"mb-4",children:["Sellers must list only legal, original, and accurately described items, fulfill orders on time, maintain good service, and follow our policies. See our ",n.jsx(ue,{to:"/seller-agreement",className:"text-blue-600 underline font-semibold",children:"Seller Agreement"}),"."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"4. Buying on FOREMADE"}),n.jsx("p",{className:"mb-4",children:"Buyers must complete purchases in good faith, avoid fraud, and raise issues respectfully within the platform."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"5. Listing and Selling Fees"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:["No listing fees for up to 300 items/month (",n.jsx(ue,{to:"/sellers-guide",className:"text-blue-600 underline font-semibold",children:"Standard Sellers"}),")"]}),n.jsxs("li",{children:["Up to 400 items/month (",n.jsx(ue,{to:"/pro-seller-guide",className:"text-blue-600 underline font-semibold",children:"Pro Sellers"}),")"]}),n.jsx("li",{children:"Fees apply only for extra listings, communicated in advance"})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"6. Inclusive Pricing"}),n.jsx("p",{className:"mb-4",children:"All prices shown are final and include taxes, buyer protection, and handling fees. No hidden costs at checkout."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"7. Payments & Payouts"}),n.jsx("p",{className:"mb-4",children:"Payments are released after buyer confirmation. Seller wallets show pending balance until approved by FOREMADE, after which they can withdraw."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"8. Returns & Refunds"}),n.jsx("p",{className:"mb-4",children:"7-day return window. Sellers respond within 2 business days. Refunds issued after successful return. Exceptions apply."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"9. Prohibited Items"}),n.jsx("p",{className:"mb-4",children:"Illegal, counterfeit, restricted, or infringing items are banned. Violations lead to suspension."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"10. Disputes & Resolution"}),n.jsx("p",{className:"mb-4",children:"Direct communication encouraged. FOREMADE may step in and issue a final decision if needed."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"11. Intellectual Property"}),n.jsx("p",{className:"mb-4",children:"Users grant FOREMADE a non-exclusive license to use uploaded content. Do not upload content you don't own."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"12. Platform Use & Conduct"}),n.jsx("p",{className:"mb-4",children:"No fraud, abuse, or misuse of the platform. Violators may be banned."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"13. Limitation of Liability"}),n.jsx("p",{className:"mb-4",children:"FOREMADE is not liable for third-party delays, misuse of products, or losses from transactions."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"14. Account Suspension & Termination"}),n.jsx("p",{className:"mb-4",children:"FOREMADE can suspend or terminate accounts violating terms without prior notice."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"15. Privacy and Data Use"}),n.jsxs("p",{className:"mb-4",children:["We respect your data. See our ",n.jsx(ue,{to:"/privacy-policy",className:"text-blue-600 underline font-semibold",children:"Privacy Policy"})," for more details."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"16. Changes to These Terms"}),n.jsx("p",{className:"mb-4",children:"We may update these terms. Continued use implies acceptance of updates."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"17. Contact Us"}),n.jsxs("p",{className:"mb-4",children:["Email: support@foremade.com",n.jsx("br",{}),"Website: www.foremade.com",n.jsx("br",{}),"See also our ",n.jsx(ue,{to:"/shipping-policy",className:"text-blue-600 underline font-semibold",children:"Shipping Policy"}),"."]})]})]})}),sae=()=>n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-blue-100 rounded-full",children:n.jsx("i",{className:"bx bx-file text-5xl text-blue-700"})}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"FOREMADE Seller Agreement"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"Read the terms and responsibilities for selling on FOREMADE Marketplace."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[n.jsxs("p",{className:"mb-2",children:[n.jsx("strong",{children:"Effective Date:"})," July 5, 2024"]}),n.jsxs("p",{className:"mb-2",children:[n.jsx("strong",{children:"Version:"})," 1.0"]}),n.jsxs("p",{className:"mb-6",children:[n.jsx("strong",{children:"Platform:"})," FOREMADE Marketplace"]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"1. Registration and Eligibility"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[n.jsx("li",{children:"Must be at least 18 years old."}),n.jsx("li",{children:"Provide accurate and verifiable personal/business information."}),n.jsx("li",{children:"Operate in compliance with applicable laws."})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"2. Account Types"}),n.jsxs("p",{className:"mb-2",children:[n.jsx(ue,{to:"/sellers-guide",className:"text-blue-600 underline font-semibold",children:"Standard Sellers"}),": Up to 300 listings/month for free.",n.jsx("br",{}),n.jsx(ue,{to:"/pro-seller-guide",className:"text-blue-600 underline font-semibold",children:"Pro Sellers"}),": Up to 400 listings/month for free with added benefits."]}),n.jsxs("p",{className:"mb-4",children:[n.jsx("strong",{children:"Additional Posting Fees:"})," 5% charge on each item listed beyond the monthly limit."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"3. Fees and Payment Terms"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"No listing fees within the monthly limit."}),n.jsx("li",{children:"All buyer protection, tax, and handling fees are included in the displayed price."}),n.jsx("li",{children:"Commission fees may apply depending on product category."})]}),n.jsxs("p",{className:"mb-4",children:[n.jsx("strong",{children:"Disbursement Options:"}),n.jsx("br",{}),"Sellers can receive payments via direct bank transfer or withdraw from their secure FOREMADE wallet."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"4. Product Listings"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"List only genuine, legal items."}),n.jsx("li",{children:"Provide accurate images and descriptions."}),n.jsx("li",{children:"No duplicates or misleading content."})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"5. Order Fulfillment"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Dispatch within the set timeframe."}),n.jsx("li",{children:"Provide tracking if using independent shipping."}),n.jsx("li",{children:"Work with FOREMADE logistics when applicable."})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"6. Returns & Cancellations"}),n.jsx("p",{className:"mb-4",children:"Buyers may return items within 7 days of delivery under the Right of Withdrawal (some items excluded). Sellers must respond within 2 business days."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"7. Dispute Resolution"}),n.jsx("p",{className:"mb-4",children:"FOREMADE may act as a neutral party in disputes and make final decisions."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"8. Seller Conduct and Suspension"}),n.jsx("p",{className:"mb-4",children:"Accounts may be suspended or terminated for policy violations or abusive behavior."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"9. Data & Communication"}),n.jsxs("p",{className:"mb-4",children:["FOREMADE may use your information for operational and promotional purposes. Sellers must not solicit off-platform transactions. See our ",n.jsx(ue,{to:"/privacy-policy",className:"text-blue-600 underline font-semibold",children:"Privacy Policy"})," for more details."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"10. Termination"}),n.jsx("p",{className:"mb-4",children:"You may close your account after fulfilling orders and withdrawing your balance. FOREMADE may terminate accounts for violations with or without notice."}),n.jsx("p",{className:"font-semibold text-blue-700 mt-8",children:"By using FOREMADE, you agree to these terms. This agreement is subject to updates with notice provided via your dashboard or email."})]})]})}),rae=()=>n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-blue-100 rounded-full",children:n.jsx("i",{className:"bx bx-package text-5xl text-blue-700"})}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"FOREMADE Shipping Policy"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"Learn about our shipping methods, fees, and delivery timeframes for FOREMADE Marketplace."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[n.jsxs("p",{className:"mb-2",children:[n.jsx("strong",{children:"Last Updated:"})," July 5, 2024"]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"1. Shipping Methods"}),n.jsx("p",{className:"mb-4",children:"FOREMADE offers multiple shipping options depending on the location of the buyer and seller:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Local Delivery:"})," Available for buyers and sellers within the same country or region."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Standard Shipping:"})," Carried out through our partnered courier services with tracking provided."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Express Shipping:"})," Optional faster delivery for eligible items at an additional cost."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Pick-Up Options:"})," In some locations, buyers may choose to collect items directly from sellers or drop-off points."]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"2. Shipping Fees"}),n.jsx("p",{className:"mb-4",children:"Shipping fees are automatically calculated at checkout based on item size, weight, and destination. Multi-item discounts may apply when purchasing several products from the same seller. Sellers are responsible for accurately entering item weight and dimensions to ensure correct fee calculation."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"3. Order Processing Time"}),n.jsxs("p",{className:"mb-4",children:["Sellers must ship items within ",n.jsx("strong",{children:"2 business days"})," of receiving an order. Failure to ship within the required time may lead to order cancellation and account penalties."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"4. Delivery Timeframes"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Local Delivery:"})," 25 business days"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Domestic Standard Shipping:"})," 37 business days"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"International Shipping:"})," 721 business days (depending on destination and customs)"]})]}),n.jsx("p",{className:"mb-4",children:"Delivery times may vary based on the courier and unforeseen circumstances such as weather or strikes."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"5. Tracking & Confirmation"}),n.jsx("p",{className:"mb-4",children:"All shipped orders must include tracking information. Buyers will receive tracking updates and can monitor delivery progress through their FOREMADE account."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"6. Shipping Responsibility"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Sellers:"})," Responsible for packaging items securely and dispatching within the stated timeframe."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Buyers:"})," Responsible for providing a complete and accurate delivery address."]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"7. Lost or Delayed Shipments"}),n.jsxs("p",{className:"mb-4",children:["If an item hasnt arrived within the expected timeframe, buyers should contact the seller first via the platform. If unresolved, buyers can raise an issue within ",n.jsx("strong",{children:"7 days after the estimated delivery date"})," for further investigation and support."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"8. International Shipping & Customs"}),n.jsx("p",{className:"mb-4",children:"International orders may be subject to customs fees, import duties, or taxes depending on the destination country. These charges are the responsibility of the buyer unless otherwise stated."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"9. Non-Delivery or Return to Sender"}),n.jsx("p",{className:"mb-4",children:"If an order is returned due to incorrect address or non-collection, the buyer may be responsible for re-shipping costs."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"10. Prohibited Items"}),n.jsxs("p",{className:"mb-4",children:["Items that violate FOREMADE's ",n.jsx(ue,{to:"/terms-conditions",className:"text-blue-600 underline font-semibold",children:"Prohibited Products Policy"})," or applicable shipping laws will not be permitted."]}),n.jsxs("p",{className:"mb-4",children:["If you need help with your shipment, contact our support team via the ",n.jsx(ue,{to:"/support",className:"text-blue-600 underline font-semibold",children:"Help Centre"})," on your dashboard."]})]})]})});function nae(){const t=gr();return _.useEffect(()=>{const e=()=>{"scrollBehavior"in document.documentElement.style?window.scrollTo({top:0,left:0,behavior:"smooth"}):window.scrollTo(0,0)},s=setTimeout(e,100);return e(),()=>clearTimeout(s)},[t.pathname]),null}const aae=({children:t})=>{const e=gr(),s=["/login","/register","/recover-password","/sell","/smile","/overview","/settings","/products-gallery","/products-upload","/seller/edit-product/:productId","/admin","/admin/payouts","/admin/dashboard","/admin/users","/admin/admins","/admin/edit/fees","/admin/edit/categories","/admin/sellers/payouts","/admin/products","/admin/notifications","/admin/edit/banners","/admin/edit/daily-deals","/admin/sellers-wallet","/admin/preset-messages","/admin/manager","/sellers/orders","/sellers/products","/seller-onboarding","/transactions","/products-upload-variant","/dashboard"].some(a=>e.pathname===a||e.pathname.startsWith(a.replace(":productId",""))),r=["/profile","/about"].includes(e.pathname);return n.jsxs(n.Fragment,{children:[!s&&n.jsx(MX,{}),!s&&n.jsx("div",{className:"flex justify-between items-center bg-white dark:bg-gray-900",children:n.jsx(yq,{})}),n.jsx("main",{className:"min-h-screen bg-white text-black dark:bg-gray-900 dark:text-white",children:t}),r&&n.jsx(UX,{})]})},Es=({children:t,adminOnly:e=!1})=>{const{loading:s,user:r}=_B()||{loading:!0,user:null},[a,i]=_.useState(!1),[l,d]=_.useState(e);return _.useEffect(()=>{e&&r?(async()=>{const h=_e(J,"users",r.uid),f=await Ge(h);i(f.exists()&&f.data().isAdmin===!0),d(!1)})():d(!1)},[r,e]),s||l?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"})}):r?e&&!a?n.jsx(FS,{to:"/dashboard",replace:!0}):t:n.jsx(FS,{to:"/login",replace:!0})};function iae(){const t=gr();return n.jsx(SB,{children:n.jsx(sq,{children:n.jsx(aae,{children:n.jsxs(bO,{children:[n.jsx(et,{path:"/login",element:n.jsx(gQ,{})}),n.jsx(et,{path:"/register",element:n.jsx(pQ,{})}),n.jsx(et,{path:"/add-phone",element:n.jsx(bQ,{})}),n.jsx(et,{path:"/sellers-guide",element:n.jsx(pne,{})}),n.jsx(et,{path:"/pro-seller-form",element:n.jsx(Gne,{})}),n.jsx(et,{path:"/smile",element:n.jsx(Es,{children:n.jsx(xne,{})})}),n.jsx(et,{path:"/sell",element:n.jsx(Es,{children:n.jsx(BA,{})})}),n.jsx(et,{path:"/sellers/products",element:n.jsx(Es,{children:n.jsx(qse,{})})}),n.jsx(et,{path:"/products-upload",element:n.jsx(Es,{children:n.jsx(Rre,{})})}),n.jsx(et,{path:"/products-gallery",element:n.jsx(Es,{children:n.jsx(Pre,{})})}),n.jsx(et,{path:"/dashboard",element:n.jsx(Es,{children:n.jsx(BA,{})})}),n.jsx(et,{path:"/sellers/orders",element:n.jsx(Es,{children:n.jsx(wJ,{})})}),n.jsx(et,{path:"/settings",element:n.jsx(Es,{children:n.jsx(NJ,{})})}),n.jsx(et,{path:"/seller-onboarding",element:n.jsx(Es,{children:n.jsx(Gse,{})})}),n.jsx(et,{path:"/products-upload-variant",element:n.jsx(Es,{children:n.jsx(Ore,{})})}),n.jsx(et,{path:"/recover-password",element:n.jsx(Rne,{})}),n.jsx(et,{path:"/transactions",element:n.jsx(Es,{children:n.jsx(Ire,{})})}),n.jsx(et,{path:"/chat/:orderId",element:n.jsx(Es,{children:n.jsx(zX,{})})}),n.jsx(et,{path:"/seller-chat",element:n.jsx(Es,{children:n.jsx(hC,{})})}),n.jsx(et,{path:"/seller-chat/:chatId",element:n.jsx(Es,{children:n.jsx(hC,{})})}),n.jsx(et,{path:"/admin/sellers-wallet",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(hne,{})})}),n.jsx(et,{path:"/admin/manager",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(gne,{})})}),n.jsx(et,{path:"/admin/dashboard",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(QA,{})})}),n.jsx(et,{path:"/admin/users",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(qre,{})})}),n.jsx(et,{path:"/admin/products",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(QA,{})})}),n.jsx(et,{path:"/admin/sellers/payouts",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(Wre,{})})}),n.jsx(et,{path:"/admin/edit/fees",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(Zre,{})})}),n.jsx(et,{path:"/admin/edit/categories",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(cne,{})})}),n.jsx(et,{path:"/admin/notifications",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(zre,{})})}),n.jsx(et,{path:"/admin/edit/banners",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(rne,{})})}),n.jsx(et,{path:"/admin/edit/daily-deals",element:n.jsx(Es,{adminOnly:!0,children:n.jsx(ine,{})})}),n.jsx(et,{path:"/",element:n.jsx(uQ,{})}),n.jsx(et,{path:"/support",element:n.jsx(Lre,{})}),n.jsx(et,{path:"/empowerment-hub",element:n.jsx(wne,{})}),n.jsx(et,{path:"/youth-empowerment-form",element:n.jsx(jne,{})}),n.jsx(et,{path:"/youth-empowerment-terms",element:n.jsx(_ne,{})}),n.jsx(et,{path:"/products",element:n.jsx(fQ,{})}),n.jsx(et,{path:"/product/:id",element:n.jsx(yQ,{},t.pathname)}),n.jsx(et,{path:"/best-selling",element:n.jsx(M6,{})}),n.jsx(et,{path:"/electronics",element:n.jsx(Tne,{})}),n.jsx(et,{path:"/tablet-phones",element:n.jsx(Ene,{})}),n.jsx(et,{path:"/smart-watches",element:n.jsx(Cne,{})}),n.jsx(et,{path:"/privacy-policy",element:n.jsx(yne,{})}),n.jsx(et,{path:"/privacy-policy/:type",element:n.jsx(vne,{})}),n.jsx(et,{path:"/privacy-policy/eu/access",element:n.jsx(kne,{})}),n.jsx(et,{path:"/pages/other-products/:category",element:n.jsx(Ine,{})}),n.jsx(et,{path:"/stores",element:n.jsx(Lne,{})}),n.jsx(et,{path:"/cart",element:n.jsx(jQ,{})}),n.jsx(et,{path:"/checkout",element:n.jsx(fJ,{})}),n.jsx(et,{path:"/favorites",element:n.jsx(_Q,{})}),n.jsx(et,{path:"/order-confirmation",element:n.jsx(vJ,{})}),n.jsx(et,{path:"/profile",element:n.jsx(SQ,{})}),n.jsx(et,{path:"/orders",element:n.jsx(gJ,{})}),n.jsx(et,{path:"/address",element:n.jsx(pJ,{})}),n.jsx(et,{path:"/setting",element:n.jsx(xJ,{})}),n.jsx(et,{path:"/search",element:n.jsx(Mne,{})}),n.jsx(et,{path:"/notifications",element:n.jsx(One,{})}),n.jsx(et,{path:"/about",element:n.jsx(Dne,{})}),n.jsx(et,{path:"/category/:categoryName",element:n.jsx(Hne,{})}),n.jsx(et,{path:"/pro-seller-guide",element:n.jsx(Qne,{})}),n.jsx(et,{path:"/pro-refund-policy",element:n.jsx(eae,{})}),n.jsx(et,{path:"/seller/edit-product/:productId",element:n.jsx(Une,{})}),n.jsx(et,{path:"/buyer-protection-policy",element:n.jsx(Jne,{})}),n.jsx(et,{path:"/refund-policy",element:n.jsx(Zne,{})}),n.jsx(et,{path:"/terms-conditions",element:n.jsx(tae,{})}),n.jsx(et,{path:"/seller-agreement",element:n.jsx(sae,{})}),n.jsx(et,{path:"/shipping-policy",element:n.jsx(rae,{})}),n.jsx(et,{path:"*",element:n.jsx(xQ,{})})]})})})})}function oae(){return n.jsxs($O,{children:[n.jsx(nae,{}),n.jsx(iae,{}),n.jsx(VX,{})]})}TM.createRoot(document.getElementById("root")).render(n.jsx(_.StrictMode,{children:n.jsx(oae,{})}));
