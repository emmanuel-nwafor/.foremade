(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var nx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function U8(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),t}var lw={exports:{}},Em={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC;function z8(){if(jC)return Em;jC=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:r,type:s,key:o,ref:a!==void 0?a:null,props:i}}return Em.Fragment=e,Em.jsx=t,Em.jsxs=t,Em}var kC;function V8(){return kC||(kC=1,lw.exports=z8()),lw.exports}var n=V8(),cw={exports:{}},Wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SC;function B8(){if(SC)return Wt;SC=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function g(B){return B===null||typeof B!="object"?null:(B=f&&B[f]||B["@@iterator"],typeof B=="function"?B:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function v(B,Q,ee){this.props=B,this.context=Q,this.refs=b,this.updater=ee||x}v.prototype.isReactComponent={},v.prototype.setState=function(B,Q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Q,"setState")},v.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function N(){}N.prototype=v.prototype;function k(B,Q,ee){this.props=B,this.context=Q,this.refs=b,this.updater=ee||x}var A=k.prototype=new N;A.constructor=k,y(A,v.prototype),A.isPureReactComponent=!0;var R=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function P(B,Q,ee,se,le,Ee){return ee=Ee.ref,{$$typeof:r,type:B,key:Q,ref:ee!==void 0?ee:null,props:Ee}}function T(B,Q){return P(B.type,Q,void 0,void 0,void 0,B.props)}function D(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function L(B){var Q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ee){return Q[ee]})}var F=/\/+/g;function z(B,Q){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):Q.toString(36)}function O(){}function V(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(O,O):(B.status="pending",B.then(function(Q){B.status==="pending"&&(B.status="fulfilled",B.value=Q)},function(Q){B.status==="pending"&&(B.status="rejected",B.reason=Q)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Y(B,Q,ee,se,le){var Ee=typeof B;(Ee==="undefined"||Ee==="boolean")&&(B=null);var ue=!1;if(B===null)ue=!0;else switch(Ee){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(B.$$typeof){case r:case e:ue=!0;break;case h:return ue=B._init,Y(ue(B._payload),Q,ee,se,le)}}if(ue)return le=le(B),ue=se===""?"."+z(B,0):se,R(le)?(ee="",ue!=null&&(ee=ue.replace(F,"$&/")+"/"),Y(le,Q,ee,"",function(Ie){return Ie})):le!=null&&(D(le)&&(le=T(le,ee+(le.key==null||B&&B.key===le.key?"":(""+le.key).replace(F,"$&/")+"/")+ue)),Q.push(le)),1;ue=0;var Oe=se===""?".":se+":";if(R(B))for(var Pe=0;Pe<B.length;Pe++)se=B[Pe],Ee=Oe+z(se,Pe),ue+=Y(se,Q,ee,Ee,le);else if(Pe=g(B),typeof Pe=="function")for(B=Pe.call(B),Pe=0;!(se=B.next()).done;)se=se.value,Ee=Oe+z(se,Pe++),ue+=Y(se,Q,ee,Ee,le);else if(Ee==="object"){if(typeof B.then=="function")return Y(V(B),Q,ee,se,le);throw Q=String(B),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ue}function H(B,Q,ee){if(B==null)return B;var se=[],le=0;return Y(B,se,"","",function(Ee){return Q.call(ee,Ee,le++)}),se}function $(B){if(B._status===-1){var Q=B._result;Q=Q(),Q.then(function(ee){(B._status===0||B._status===-1)&&(B._status=1,B._result=ee)},function(ee){(B._status===0||B._status===-1)&&(B._status=2,B._result=ee)}),B._status===-1&&(B._status=0,B._result=Q)}if(B._status===1)return B._result.default;throw B._result}var X=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function G(){}return Wt.Children={map:H,forEach:function(B,Q,ee){H(B,function(){Q.apply(this,arguments)},ee)},count:function(B){var Q=0;return H(B,function(){Q++}),Q},toArray:function(B){return H(B,function(Q){return Q})||[]},only:function(B){if(!D(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Wt.Component=v,Wt.Fragment=t,Wt.Profiler=a,Wt.PureComponent=k,Wt.StrictMode=s,Wt.Suspense=c,Wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Wt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return _.H.useMemoCache(B)}},Wt.cache=function(B){return function(){return B.apply(null,arguments)}},Wt.cloneElement=function(B,Q,ee){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var se=y({},B.props),le=B.key,Ee=void 0;if(Q!=null)for(ue in Q.ref!==void 0&&(Ee=void 0),Q.key!==void 0&&(le=""+Q.key),Q)!I.call(Q,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&Q.ref===void 0||(se[ue]=Q[ue]);var ue=arguments.length-2;if(ue===1)se.children=ee;else if(1<ue){for(var Oe=Array(ue),Pe=0;Pe<ue;Pe++)Oe[Pe]=arguments[Pe+2];se.children=Oe}return P(B.type,le,void 0,void 0,Ee,se)},Wt.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:i,_context:B},B},Wt.createElement=function(B,Q,ee){var se,le={},Ee=null;if(Q!=null)for(se in Q.key!==void 0&&(Ee=""+Q.key),Q)I.call(Q,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(le[se]=Q[se]);var ue=arguments.length-2;if(ue===1)le.children=ee;else if(1<ue){for(var Oe=Array(ue),Pe=0;Pe<ue;Pe++)Oe[Pe]=arguments[Pe+2];le.children=Oe}if(B&&B.defaultProps)for(se in ue=B.defaultProps,ue)le[se]===void 0&&(le[se]=ue[se]);return P(B,Ee,void 0,void 0,null,le)},Wt.createRef=function(){return{current:null}},Wt.forwardRef=function(B){return{$$typeof:l,render:B}},Wt.isValidElement=D,Wt.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:$}},Wt.memo=function(B,Q){return{$$typeof:u,type:B,compare:Q===void 0?null:Q}},Wt.startTransition=function(B){var Q=_.T,ee={};_.T=ee;try{var se=B(),le=_.S;le!==null&&le(ee,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(G,X)}catch(Ee){X(Ee)}finally{_.T=Q}},Wt.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Wt.use=function(B){return _.H.use(B)},Wt.useActionState=function(B,Q,ee){return _.H.useActionState(B,Q,ee)},Wt.useCallback=function(B,Q){return _.H.useCallback(B,Q)},Wt.useContext=function(B){return _.H.useContext(B)},Wt.useDebugValue=function(){},Wt.useDeferredValue=function(B,Q){return _.H.useDeferredValue(B,Q)},Wt.useEffect=function(B,Q,ee){var se=_.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(B,Q)},Wt.useId=function(){return _.H.useId()},Wt.useImperativeHandle=function(B,Q,ee){return _.H.useImperativeHandle(B,Q,ee)},Wt.useInsertionEffect=function(B,Q){return _.H.useInsertionEffect(B,Q)},Wt.useLayoutEffect=function(B,Q){return _.H.useLayoutEffect(B,Q)},Wt.useMemo=function(B,Q){return _.H.useMemo(B,Q)},Wt.useOptimistic=function(B,Q){return _.H.useOptimistic(B,Q)},Wt.useReducer=function(B,Q,ee){return _.H.useReducer(B,Q,ee)},Wt.useRef=function(B){return _.H.useRef(B)},Wt.useState=function(B){return _.H.useState(B)},Wt.useSyncExternalStore=function(B,Q,ee){return _.H.useSyncExternalStore(B,Q,ee)},Wt.useTransition=function(){return _.H.useTransition()},Wt.version="19.1.1",Wt}var _C;function fb(){return _C||(_C=1,cw.exports=B8()),cw.exports}var E=fb();const cs=mb(E);var dw={exports:{}},Tm={},uw={exports:{}},hw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC;function H8(){return AC||(AC=1,function(r){function e(H,$){var X=H.length;H.push($);e:for(;0<X;){var G=X-1>>>1,B=H[G];if(0<a(B,$))H[G]=$,H[X]=B,X=G;else break e}}function t(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var $=H[0],X=H.pop();if(X!==$){H[0]=X;e:for(var G=0,B=H.length,Q=B>>>1;G<Q;){var ee=2*(G+1)-1,se=H[ee],le=ee+1,Ee=H[le];if(0>a(se,X))le<B&&0>a(Ee,se)?(H[G]=Ee,H[le]=X,G=le):(H[G]=se,H[ee]=X,G=ee);else if(le<B&&0>a(Ee,X))H[G]=Ee,H[le]=X,G=le;else break e}}return $}function a(H,$){var X=H.sortIndex-$.sortIndex;return X!==0?X:H.id-$.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,g=3,x=!1,y=!1,b=!1,v=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function R(H){for(var $=t(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=H)s(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=t(u)}}function _(H){if(b=!1,R(H),!y)if(t(c)!==null)y=!0,I||(I=!0,z());else{var $=t(u);$!==null&&Y(_,$.startTime-H)}}var I=!1,P=-1,T=5,D=-1;function L(){return v?!0:!(r.unstable_now()-D<T)}function F(){if(v=!1,I){var H=r.unstable_now();D=H;var $=!0;try{e:{y=!1,b&&(b=!1,k(P),P=-1),x=!0;var X=g;try{t:{for(R(H),f=t(c);f!==null&&!(f.expirationTime>H&&L());){var G=f.callback;if(typeof G=="function"){f.callback=null,g=f.priorityLevel;var B=G(f.expirationTime<=H);if(H=r.unstable_now(),typeof B=="function"){f.callback=B,R(H),$=!0;break t}f===t(c)&&s(c),R(H)}else s(c);f=t(c)}if(f!==null)$=!0;else{var Q=t(u);Q!==null&&Y(_,Q.startTime-H),$=!1}}break e}finally{f=null,g=X,x=!1}$=void 0}}finally{$?z():I=!1}}}var z;if(typeof A=="function")z=function(){A(F)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,V=O.port2;O.port1.onmessage=F,z=function(){V.postMessage(null)}}else z=function(){N(F,0)};function Y(H,$){P=N(function(){H(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_next=function(H){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var X=g;g=$;try{return H()}finally{g=X}},r.unstable_requestPaint=function(){v=!0},r.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=g;g=H;try{return $()}finally{g=X}},r.unstable_scheduleCallback=function(H,$,X){var G=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?G+X:G):X=G,H){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,H={id:h++,callback:$,priorityLevel:H,startTime:X,expirationTime:B,sortIndex:-1},X>G?(H.sortIndex=X,e(u,H),t(c)===null&&H===t(u)&&(b?(k(P),P=-1):b=!0,Y(_,X-G))):(H.sortIndex=B,e(c,H),y||x||(y=!0,I||(I=!0,z()))),H},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(H){var $=g;return function(){var X=g;g=$;try{return H.apply(this,arguments)}finally{g=X}}}}(hw)),hw}var CC;function $8(){return CC||(CC=1,uw.exports=H8()),uw.exports}var mw={exports:{}},ya={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC;function W8(){if(EC)return ya;EC=1;var r=fb();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(c,u,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:h}}var o=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ya.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ya.createPortal=function(c,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return i(c,u,null,h)},ya.flushSync=function(c){var u=o.T,h=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=u,s.p=h,s.d.f()}},ya.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,s.d.C(c,u))},ya.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},ya.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var h=u.as,f=l(h,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?s.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:g,fetchPriority:x}):h==="script"&&s.d.X(c,{crossOrigin:f,integrity:g,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ya.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=l(u.as,u.crossOrigin);s.d.M(c,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&s.d.M(c)},ya.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,f=l(h,u.crossOrigin);s.d.L(c,h,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ya.preloadModule=function(c,u){if(typeof c=="string")if(u){var h=l(u.as,u.crossOrigin);s.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else s.d.m(c)},ya.requestFormReset=function(c){s.d.r(c)},ya.unstable_batchedUpdates=function(c,u){return c(u)},ya.useFormState=function(c,u,h){return o.H.useFormState(c,u,h)},ya.useFormStatus=function(){return o.H.useHostTransitionStatus()},ya.version="19.1.1",ya}var TC;function Y8(){if(TC)return mw.exports;TC=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),mw.exports=W8(),mw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PC;function q8(){if(PC)return Tm;PC=1;var r=$8(),e=fb(),t=Y8();function s(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function i(d){var m=d,p=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(p=m.return),d=m.return;while(d)}return m.tag===3?p:null}function o(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function l(d){if(i(d)!==d)throw Error(s(188))}function c(d){var m=d.alternate;if(!m){if(m=i(d),m===null)throw Error(s(188));return m!==d?null:d}for(var p=d,w=m;;){var C=p.return;if(C===null)break;var M=C.alternate;if(M===null){if(w=C.return,w!==null){p=w;continue}break}if(C.child===M.child){for(M=C.child;M;){if(M===p)return l(C),d;if(M===w)return l(C),m;M=M.sibling}throw Error(s(188))}if(p.return!==w.return)p=C,w=M;else{for(var q=!1,K=C.child;K;){if(K===p){q=!0,p=C,w=M;break}if(K===w){q=!0,w=C,p=M;break}K=K.sibling}if(!q){for(K=M.child;K;){if(K===p){q=!0,p=M,w=C;break}if(K===w){q=!0,w=M,p=C;break}K=K.sibling}if(!q)throw Error(s(189))}}if(p.alternate!==w)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?d:m}function u(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d;for(d=d.child;d!==null;){if(m=u(d),m!==null)return m;d=d.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),A=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function z(d){return d===null||typeof d!="object"?null:(d=F&&d[F]||d["@@iterator"],typeof d=="function"?d:null)}var O=Symbol.for("react.client.reference");function V(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===O?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case y:return"Fragment";case v:return"Profiler";case b:return"StrictMode";case _:return"Suspense";case I:return"SuspenseList";case D:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case x:return"Portal";case A:return(d.displayName||"Context")+".Provider";case k:return(d._context.displayName||"Context")+".Consumer";case R:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case P:return m=d.displayName||null,m!==null?m:V(d.type)||"Memo";case T:m=d._payload,d=d._init;try{return V(d(m))}catch{}}return null}var Y=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},G=[],B=-1;function Q(d){return{current:d}}function ee(d){0>B||(d.current=G[B],G[B]=null,B--)}function se(d,m){B++,G[B]=d.current,d.current=m}var le=Q(null),Ee=Q(null),ue=Q(null),Oe=Q(null);function Pe(d,m){switch(se(ue,m),se(Ee,d),se(le,null),m.nodeType){case 9:case 11:d=(d=m.documentElement)&&(d=d.namespaceURI)?QA(d):0;break;default:if(d=m.tagName,m=m.namespaceURI)m=QA(m),d=ZA(m,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}ee(le),se(le,d)}function Ie(){ee(le),ee(Ee),ee(ue)}function ie(d){d.memoizedState!==null&&se(Oe,d);var m=le.current,p=ZA(m,d.type);m!==p&&(se(Ee,d),se(le,p))}function ze(d){Ee.current===d&&(ee(le),ee(Ee)),Oe.current===d&&(ee(Oe),km._currentValue=X)}var Ve=Object.prototype.hasOwnProperty,ce=r.unstable_scheduleCallback,ke=r.unstable_cancelCallback,Qe=r.unstable_shouldYield,me=r.unstable_requestPaint,$e=r.unstable_now,tt=r.unstable_getCurrentPriorityLevel,Ye=r.unstable_ImmediatePriority,De=r.unstable_UserBlockingPriority,Xe=r.unstable_NormalPriority,st=r.unstable_LowPriority,vt=r.unstable_IdlePriority,Mt=r.log,as=r.unstable_setDisableYieldValue,wt=null,Ge=null;function Pt(d){if(typeof Mt=="function"&&as(d),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(wt,d)}catch{}}var bt=Math.clz32?Math.clz32:Bt,qt=Math.log,Ct=Math.LN2;function Bt(d){return d>>>=0,d===0?32:31-(qt(d)/Ct|0)|0}var Kt=256,Xt=4194304;function Js(d){var m=d&42;if(m!==0)return m;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function At(d,m,p){var w=d.pendingLanes;if(w===0)return 0;var C=0,M=d.suspendedLanes,q=d.pingedLanes;d=d.warmLanes;var K=w&134217727;return K!==0?(w=K&~M,w!==0?C=Js(w):(q&=K,q!==0?C=Js(q):p||(p=K&~d,p!==0&&(C=Js(p))))):(K=w&~M,K!==0?C=Js(K):q!==0?C=Js(q):p||(p=w&~d,p!==0&&(C=Js(p)))),C===0?0:m!==0&&m!==C&&(m&M)===0&&(M=C&-C,p=m&-m,M>=p||M===32&&(p&4194048)!==0)?m:C}function Vt(d,m){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&m)===0}function ar(d,m){switch(d){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fs(){var d=Kt;return Kt<<=1,(Kt&4194048)===0&&(Kt=256),d}function nr(){var d=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),d}function Ss(d){for(var m=[],p=0;31>p;p++)m.push(d);return m}function Ts(d,m){d.pendingLanes|=m,m!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Us(d,m,p,w,C,M){var q=d.pendingLanes;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=p,d.entangledLanes&=p,d.errorRecoveryDisabledLanes&=p,d.shellSuspendCounter=0;var K=d.entanglements,ae=d.expirationTimes,ye=d.hiddenUpdates;for(p=q&~p;0<p;){var Me=31-bt(p),He=1<<Me;K[Me]=0,ae[Me]=-1;var we=ye[Me];if(we!==null)for(ye[Me]=null,Me=0;Me<we.length;Me++){var je=we[Me];je!==null&&(je.lane&=-536870913)}p&=~He}w!==0&&Ps(d,w,0),M!==0&&C===0&&d.tag!==0&&(d.suspendedLanes|=M&~(q&~m))}function Ps(d,m,p){d.pendingLanes|=m,d.suspendedLanes&=~m;var w=31-bt(m);d.entangledLanes|=m,d.entanglements[w]=d.entanglements[w]|1073741824|p&4194090}function Pr(d,m){var p=d.entangledLanes|=m;for(d=d.entanglements;p;){var w=31-bt(p),C=1<<w;C&m|d[w]&m&&(d[w]|=m),p&=~C}}function vs(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function ws(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Ws(){var d=$.p;return d!==0?d:(d=window.event,d===void 0?32:xC(d.type))}function be(d,m){var p=$.p;try{return $.p=d,m()}finally{$.p=p}}var de=Math.random().toString(36).slice(2),Se="__reactFiber$"+de,Je="__reactProps$"+de,te="__reactContainer$"+de,Ae="__reactEvents$"+de,Fe="__reactListeners$"+de,gt="__reactHandles$"+de,pt="__reactResources$"+de,Ht="__reactMarker$"+de;function Qt(d){delete d[Se],delete d[Je],delete d[Ae],delete d[Fe],delete d[gt]}function Rr(d){var m=d[Se];if(m)return m;for(var p=d.parentNode;p;){if(m=p[te]||p[Se]){if(p=m.alternate,m.child!==null||p!==null&&p.child!==null)for(d=sC(d);d!==null;){if(p=d[Se])return p;d=sC(d)}return m}d=p,p=d.parentNode}return null}function Ba(d){if(d=d[Se]||d[te]){var m=d.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return d}return null}function Ca(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d.stateNode;throw Error(s(33))}function Hr(d){var m=d[pt];return m||(m=d[pt]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function Ut(d){d[Ht]=!0}var wn=new Set,Gi={};function Ea(d,m){rn(d,m),rn(d+"Capture",m)}function rn(d,m){for(Gi[d]=m,d=0;d<m.length;d++)wn.add(m[d])}var zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zs={},re={};function Ue(d){return Ve.call(re,d)?!0:Ve.call(zs,d)?!1:zo.test(d)?re[d]=!0:(zs[d]=!0,!1)}function qe(d,m,p){if(Ue(m))if(p===null)d.removeAttribute(m);else{switch(typeof p){case"undefined":case"function":case"symbol":d.removeAttribute(m);return;case"boolean":var w=m.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){d.removeAttribute(m);return}}d.setAttribute(m,""+p)}}function ot(d,m,p){if(p===null)d.removeAttribute(m);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(m);return}d.setAttribute(m,""+p)}}function mt(d,m,p,w){if(w===null)d.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(p);return}d.setAttributeNS(m,p,""+w)}}var _t,yt;function _s(d){if(_t===void 0)try{throw Error()}catch(p){var m=p.stack.trim().match(/\n( *(at )?)/);_t=m&&m[1]||"",yt=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_t+d+yt}var Hn=!1;function Vo(d,m){if(!d||Hn)return"";Hn=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(m){var He=function(){throw Error()};if(Object.defineProperty(He.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(He,[])}catch(je){var we=je}Reflect.construct(d,[],He)}else{try{He.call()}catch(je){we=je}d.call(He.prototype)}}else{try{throw Error()}catch(je){we=je}(He=d())&&typeof He.catch=="function"&&He.catch(function(){})}}catch(je){if(je&&we&&typeof je.stack=="string")return[je.stack,we.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=w.DetermineComponentFrameRoot(),q=M[0],K=M[1];if(q&&K){var ae=q.split(`
`),ye=K.split(`
`);for(C=w=0;w<ae.length&&!ae[w].includes("DetermineComponentFrameRoot");)w++;for(;C<ye.length&&!ye[C].includes("DetermineComponentFrameRoot");)C++;if(w===ae.length||C===ye.length)for(w=ae.length-1,C=ye.length-1;1<=w&&0<=C&&ae[w]!==ye[C];)C--;for(;1<=w&&0<=C;w--,C--)if(ae[w]!==ye[C]){if(w!==1||C!==1)do if(w--,C--,0>C||ae[w]!==ye[C]){var Me=`
`+ae[w].replace(" at new "," at ");return d.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",d.displayName)),Me}while(1<=w&&0<=C);break}}}finally{Hn=!1,Error.prepareStackTrace=p}return(p=d?d.displayName||d.name:"")?_s(p):""}function Bo(d){switch(d.tag){case 26:case 27:case 5:return _s(d.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 15:return Vo(d.type,!1);case 11:return Vo(d.type.render,!1);case 1:return Vo(d.type,!0);case 31:return _s("Activity");default:return""}}function Td(d){try{var m="";do m+=Bo(d),d=d.return;while(d);return m}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Ta(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Rh(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function hy(d){var m=Rh(d)?"checked":"value",p=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),w=""+d[m];if(!d.hasOwnProperty(m)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var C=p.get,M=p.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return C.call(this)},set:function(q){w=""+q,M.call(this,q)}}),Object.defineProperty(d,m,{enumerable:p.enumerable}),{getValue:function(){return w},setValue:function(q){w=""+q},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function Pd(d){d._valueTracker||(d._valueTracker=hy(d))}function Ih(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var p=m.getValue(),w="";return d&&(w=Rh(d)?d.checked?"true":"false":d.value),d=w,d!==p?(m.setValue(d),!0):!1}function ec(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var my=/[\n"\\]/g;function Ir(d){return d.replace(my,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function an(d,m,p,w,C,M,q,K){d.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?d.type=q:d.removeAttribute("type"),m!=null?q==="number"?(m===0&&d.value===""||d.value!=m)&&(d.value=""+Ta(m)):d.value!==""+Ta(m)&&(d.value=""+Ta(m)):q!=="submit"&&q!=="reset"||d.removeAttribute("value"),m!=null?Ho(d,q,Ta(m)):p!=null?Ho(d,q,Ta(p)):w!=null&&d.removeAttribute("value"),C==null&&M!=null&&(d.defaultChecked=!!M),C!=null&&(d.checked=C&&typeof C!="function"&&typeof C!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?d.name=""+Ta(K):d.removeAttribute("name")}function tc(d,m,p,w,C,M,q,K){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(d.type=M),m!=null||p!=null){if(!(M!=="submit"&&M!=="reset"||m!=null))return;p=p!=null?""+Ta(p):"",m=m!=null?""+Ta(m):p,K||m===d.value||(d.value=m),d.defaultValue=m}w=w??C,w=typeof w!="function"&&typeof w!="symbol"&&!!w,d.checked=K?d.checked:!!w,d.defaultChecked=!!w,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(d.name=q)}function Ho(d,m,p){m==="number"&&ec(d.ownerDocument)===d||d.defaultValue===""+p||(d.defaultValue=""+p)}function Ki(d,m,p,w){if(d=d.options,m){m={};for(var C=0;C<p.length;C++)m["$"+p[C]]=!0;for(p=0;p<d.length;p++)C=m.hasOwnProperty("$"+d[p].value),d[p].selected!==C&&(d[p].selected=C),C&&w&&(d[p].defaultSelected=!0)}else{for(p=""+Ta(p),m=null,C=0;C<d.length;C++){if(d[C].value===p){d[C].selected=!0,w&&(d[C].defaultSelected=!0);return}m!==null||d[C].disabled||(m=d[C])}m!==null&&(m.selected=!0)}}function Ys(d,m,p){if(m!=null&&(m=""+Ta(m),m!==d.value&&(d.value=m),p==null)){d.defaultValue!==m&&(d.defaultValue=m);return}d.defaultValue=p!=null?""+Ta(p):""}function sc(d,m,p,w){if(m==null){if(w!=null){if(p!=null)throw Error(s(92));if(Y(w)){if(1<w.length)throw Error(s(93));w=w[0]}p=w}p==null&&(p=""),m=p}p=Ta(m),d.defaultValue=p,w=d.textContent,w===p&&w!==""&&w!==null&&(d.value=w)}function Nn(d,m){if(m){var p=d.firstChild;if(p&&p===d.lastChild&&p.nodeType===3){p.nodeValue=m;return}}d.textContent=m}var rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $g(d,m,p){var w=m.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?w?d.setProperty(m,""):m==="float"?d.cssFloat="":d[m]="":w?d.setProperty(m,p):typeof p!="number"||p===0||rc.has(m)?m==="float"?d.cssFloat=p:d[m]=(""+p).trim():d[m]=p+"px"}function Dh(d,m,p){if(m!=null&&typeof m!="object")throw Error(s(62));if(d=d.style,p!=null){for(var w in p)!p.hasOwnProperty(w)||m!=null&&m.hasOwnProperty(w)||(w.indexOf("--")===0?d.setProperty(w,""):w==="float"?d.cssFloat="":d[w]="");for(var C in m)w=m[C],m.hasOwnProperty(C)&&p[C]!==w&&$g(d,C,w)}else for(var M in m)m.hasOwnProperty(M)&&$g(d,M,m[M])}function Mh(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rd(d){return gy.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Qi=null;function jn(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Zi=null,Ji=null;function Oh(d){var m=Ba(d);if(m&&(d=m.stateNode)){var p=d[Je]||null;e:switch(d=m.stateNode,m.type){case"input":if(an(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),m=p.name,p.type==="radio"&&m!=null){for(p=d;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ir(""+m)+'"][type="radio"]'),m=0;m<p.length;m++){var w=p[m];if(w!==d&&w.form===d.form){var C=w[Je]||null;if(!C)throw Error(s(90));an(w,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(m=0;m<p.length;m++)w=p[m],w.form===d.form&&Ih(w)}break e;case"textarea":Ys(d,p.value,p.defaultValue);break e;case"select":m=p.value,m!=null&&Ki(d,!!p.multiple,m,!1)}}}var di=!1;function Wg(d,m,p){if(di)return d(m,p);di=!0;try{var w=d(m);return w}finally{if(di=!1,(Zi!==null||Ji!==null)&&(Fp(),Zi&&(m=Zi,d=Ji,Ji=Zi=null,Oh(m),d)))for(m=0;m<d.length;m++)Oh(d[m])}}function ac(d,m){var p=d.stateNode;if(p===null)return null;var w=p[Je]||null;if(w===null)return null;p=w[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(d=d.type,w=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!w;break e;default:d=!1}if(d)return null;if(p&&typeof p!="function")throw Error(s(231,m,typeof p));return p}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kn=!1;if($n)try{var nc={};Object.defineProperty(nc,"passive",{get:function(){kn=!0}}),window.addEventListener("test",nc,nc),window.removeEventListener("test",nc,nc)}catch{kn=!1}var ui=null,$o=null,eo=null;function Lh(){if(eo)return eo;var d,m=$o,p=m.length,w,C="value"in ui?ui.value:ui.textContent,M=C.length;for(d=0;d<p&&m[d]===C[d];d++);var q=p-d;for(w=1;w<=q&&m[p-w]===C[M-w];w++);return eo=C.slice(d,1<w?1-w:void 0)}function hi(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function mi(){return!0}function Fh(){return!1}function Zr(d){function m(p,w,C,M,q){this._reactName=p,this._targetInst=C,this.type=w,this.nativeEvent=M,this.target=q,this.currentTarget=null;for(var K in d)d.hasOwnProperty(K)&&(p=d[K],this[K]=p?p(M):M[K]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?mi:Fh,this.isPropagationStopped=Fh,this}return h(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),m}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Id=Zr(Rs),ic=h({},Rs,{view:0,detail:0}),Yg=Zr(ic),Dd,Md,fi,oc=h({},ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==fi&&(fi&&d.type==="mousemove"?(Dd=d.screenX-fi.screenX,Md=d.screenY-fi.screenY):Md=Dd=0,fi=d),Dd)},movementY:function(d){return"movementY"in d?d.movementY:Md}}),Sn=Zr(oc),qg=h({},oc,{dataTransfer:0}),py=Zr(qg),lc=h({},ic,{relatedTarget:0}),Od=Zr(lc),Uh=h({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ld=Zr(Uh),Xg=h({},Rs,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Fd=Zr(Xg),xy=h({},Rs,{data:0}),zh=Zr(xy),cc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vh(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=Kg[d])?!!m[d]:!1}function dc(){return Vh}var Qg=h({},ic,{key:function(d){if(d.key){var m=cc[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=hi(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Gg[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(d){return d.type==="keypress"?hi(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?hi(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Ud=Zr(Qg),Zg=h({},oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bh=Zr(Zg),to=h({},ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),Jg=Zr(to),ep=h({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),tp=Zr(ep),sp=h({},oc,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),zd=Zr(sp),Pa=h({},Rs,{newState:0,oldState:0}),rp=Zr(Pa),ap=[9,13,27,32],gi=$n&&"CompositionEvent"in window,S=null;$n&&"documentMode"in document&&(S=document.documentMode);var U=$n&&"TextEvent"in window&&!S,W=$n&&(!gi||S&&8<S&&11>=S),Z=" ",ge=!1;function Ce(d,m){switch(d){case"keyup":return ap.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var hs=!1;function $r(d,m){switch(d){case"compositionend":return nt(m);case"keypress":return m.which!==32?null:(ge=!0,Z);case"textInput":return d=m.data,d===Z&&ge?null:d;default:return null}}function ms(d,m){if(hs)return d==="compositionend"||!gi&&Ce(d,m)?(d=Lh(),eo=$o=ui=null,hs=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return W&&m.locale!=="ko"?null:m.data;default:return null}}var Jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!Jr[d.type]:m==="textarea"}function so(d,m,p,w){Zi?Ji?Ji.push(w):Ji=[w]:Zi=w,m=$p(m,"onChange"),0<m.length&&(p=new Id("onChange","change",null,p,w),d.push({event:p,listeners:m}))}var oa=null,pi=null;function Hh(d){YA(d,0)}function np(d){var m=Ca(d);if(Ih(m))return d}function mS(d,m){if(d==="change")return m}var fS=!1;if($n){var by;if($n){var yy="oninput"in document;if(!yy){var gS=document.createElement("div");gS.setAttribute("oninput","return;"),yy=typeof gS.oninput=="function"}by=yy}else by=!1;fS=by&&(!document.documentMode||9<document.documentMode)}function pS(){oa&&(oa.detachEvent("onpropertychange",xS),pi=oa=null)}function xS(d){if(d.propertyName==="value"&&np(pi)){var m=[];so(m,pi,d,jn(d)),Wg(Hh,m)}}function gF(d,m,p){d==="focusin"?(pS(),oa=m,pi=p,oa.attachEvent("onpropertychange",xS)):d==="focusout"&&pS()}function pF(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return np(pi)}function xF(d,m){if(d==="click")return np(m)}function bF(d,m){if(d==="input"||d==="change")return np(m)}function yF(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var nn=typeof Object.is=="function"?Object.is:yF;function $h(d,m){if(nn(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var p=Object.keys(d),w=Object.keys(m);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var C=p[w];if(!Ve.call(m,C)||!nn(d[C],m[C]))return!1}return!0}function bS(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function yS(d,m){var p=bS(d);d=0;for(var w;p;){if(p.nodeType===3){if(w=d+p.textContent.length,d<=m&&w>=m)return{node:p,offset:m-d};d=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=bS(p)}}function vS(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?vS(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function wS(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var m=ec(d.document);m instanceof d.HTMLIFrameElement;){try{var p=typeof m.contentWindow.location.href=="string"}catch{p=!1}if(p)d=m.contentWindow;else break;m=ec(d.document)}return m}function vy(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}var vF=$n&&"documentMode"in document&&11>=document.documentMode,Vd=null,wy=null,Wh=null,Ny=!1;function NS(d,m,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Ny||Vd==null||Vd!==ec(w)||(w=Vd,"selectionStart"in w&&vy(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Wh&&$h(Wh,w)||(Wh=w,w=$p(wy,"onSelect"),0<w.length&&(m=new Id("onSelect","select",null,m,p),d.push({event:m,listeners:w}),m.target=Vd)))}function uc(d,m){var p={};return p[d.toLowerCase()]=m.toLowerCase(),p["Webkit"+d]="webkit"+m,p["Moz"+d]="moz"+m,p}var Bd={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionrun:uc("Transition","TransitionRun"),transitionstart:uc("Transition","TransitionStart"),transitioncancel:uc("Transition","TransitionCancel"),transitionend:uc("Transition","TransitionEnd")},jy={},jS={};$n&&(jS=document.createElement("div").style,"AnimationEvent"in window||(delete Bd.animationend.animation,delete Bd.animationiteration.animation,delete Bd.animationstart.animation),"TransitionEvent"in window||delete Bd.transitionend.transition);function hc(d){if(jy[d])return jy[d];if(!Bd[d])return d;var m=Bd[d],p;for(p in m)if(m.hasOwnProperty(p)&&p in jS)return jy[d]=m[p];return d}var kS=hc("animationend"),SS=hc("animationiteration"),_S=hc("animationstart"),wF=hc("transitionrun"),NF=hc("transitionstart"),jF=hc("transitioncancel"),AS=hc("transitionend"),CS=new Map,ky="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ky.push("scrollEnd");function Wn(d,m){CS.set(d,m),Ea(m,[d])}var ES=new WeakMap;function _n(d,m){if(typeof d=="object"&&d!==null){var p=ES.get(d);return p!==void 0?p:(m={value:d,source:m,stack:Td(m)},ES.set(d,m),m)}return{value:d,source:m,stack:Td(m)}}var An=[],Hd=0,Sy=0;function ip(){for(var d=Hd,m=Sy=Hd=0;m<d;){var p=An[m];An[m++]=null;var w=An[m];An[m++]=null;var C=An[m];An[m++]=null;var M=An[m];if(An[m++]=null,w!==null&&C!==null){var q=w.pending;q===null?C.next=C:(C.next=q.next,q.next=C),w.pending=C}M!==0&&TS(p,C,M)}}function op(d,m,p,w){An[Hd++]=d,An[Hd++]=m,An[Hd++]=p,An[Hd++]=w,Sy|=w,d.lanes|=w,d=d.alternate,d!==null&&(d.lanes|=w)}function _y(d,m,p,w){return op(d,m,p,w),lp(d)}function $d(d,m){return op(d,null,null,m),lp(d)}function TS(d,m,p){d.lanes|=p;var w=d.alternate;w!==null&&(w.lanes|=p);for(var C=!1,M=d.return;M!==null;)M.childLanes|=p,w=M.alternate,w!==null&&(w.childLanes|=p),M.tag===22&&(d=M.stateNode,d===null||d._visibility&1||(C=!0)),d=M,M=M.return;return d.tag===3?(M=d.stateNode,C&&m!==null&&(C=31-bt(p),d=M.hiddenUpdates,w=d[C],w===null?d[C]=[m]:w.push(m),m.lane=p|536870912),M):null}function lp(d){if(50<pm)throw pm=0,Rv=null,Error(s(185));for(var m=d.return;m!==null;)d=m,m=d.return;return d.tag===3?d.stateNode:null}var Wd={};function kF(d,m,p,w){this.tag=d,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(d,m,p,w){return new kF(d,m,p,w)}function Ay(d){return d=d.prototype,!(!d||!d.isReactComponent)}function ro(d,m){var p=d.alternate;return p===null?(p=on(d.tag,m,d.key,d.mode),p.elementType=d.elementType,p.type=d.type,p.stateNode=d.stateNode,p.alternate=d,d.alternate=p):(p.pendingProps=m,p.type=d.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=d.flags&65011712,p.childLanes=d.childLanes,p.lanes=d.lanes,p.child=d.child,p.memoizedProps=d.memoizedProps,p.memoizedState=d.memoizedState,p.updateQueue=d.updateQueue,m=d.dependencies,p.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},p.sibling=d.sibling,p.index=d.index,p.ref=d.ref,p.refCleanup=d.refCleanup,p}function PS(d,m){d.flags&=65011714;var p=d.alternate;return p===null?(d.childLanes=0,d.lanes=m,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,m=p.dependencies,d.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),d}function cp(d,m,p,w,C,M){var q=0;if(w=d,typeof d=="function")Ay(d)&&(q=1);else if(typeof d=="string")q=_8(d,p,le.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case D:return d=on(31,p,m,C),d.elementType=D,d.lanes=M,d;case y:return mc(p.children,C,M,m);case b:q=8,C|=24;break;case v:return d=on(12,p,m,C|2),d.elementType=v,d.lanes=M,d;case _:return d=on(13,p,m,C),d.elementType=_,d.lanes=M,d;case I:return d=on(19,p,m,C),d.elementType=I,d.lanes=M,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case N:case A:q=10;break e;case k:q=9;break e;case R:q=11;break e;case P:q=14;break e;case T:q=16,w=null;break e}q=29,p=Error(s(130,d===null?"null":typeof d,"")),w=null}return m=on(q,p,m,C),m.elementType=d,m.type=w,m.lanes=M,m}function mc(d,m,p,w){return d=on(7,d,w,m),d.lanes=p,d}function Cy(d,m,p){return d=on(6,d,null,m),d.lanes=p,d}function Ey(d,m,p){return m=on(4,d.children!==null?d.children:[],d.key,m),m.lanes=p,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}var Yd=[],qd=0,dp=null,up=0,Cn=[],En=0,fc=null,ao=1,no="";function gc(d,m){Yd[qd++]=up,Yd[qd++]=dp,dp=d,up=m}function RS(d,m,p){Cn[En++]=ao,Cn[En++]=no,Cn[En++]=fc,fc=d;var w=ao;d=no;var C=32-bt(w)-1;w&=~(1<<C),p+=1;var M=32-bt(m)+C;if(30<M){var q=C-C%5;M=(w&(1<<q)-1).toString(32),w>>=q,C-=q,ao=1<<32-bt(m)+C|p<<C|w,no=M+d}else ao=1<<M|p<<C|w,no=d}function Ty(d){d.return!==null&&(gc(d,1),RS(d,1,0))}function Py(d){for(;d===dp;)dp=Yd[--qd],Yd[qd]=null,up=Yd[--qd],Yd[qd]=null;for(;d===fc;)fc=Cn[--En],Cn[En]=null,no=Cn[--En],Cn[En]=null,ao=Cn[--En],Cn[En]=null}var Ra=null,pr=null,As=!1,pc=null,xi=!1,Ry=Error(s(519));function xc(d){var m=Error(s(418,""));throw Xh(_n(m,d)),Ry}function IS(d){var m=d.stateNode,p=d.type,w=d.memoizedProps;switch(m[Se]=d,m[Je]=w,p){case"dialog":is("cancel",m),is("close",m);break;case"iframe":case"object":case"embed":is("load",m);break;case"video":case"audio":for(p=0;p<bm.length;p++)is(bm[p],m);break;case"source":is("error",m);break;case"img":case"image":case"link":is("error",m),is("load",m);break;case"details":is("toggle",m);break;case"input":is("invalid",m),tc(m,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),Pd(m);break;case"select":is("invalid",m);break;case"textarea":is("invalid",m),sc(m,w.value,w.defaultValue,w.children),Pd(m)}p=w.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||m.textContent===""+p||w.suppressHydrationWarning===!0||KA(m.textContent,p)?(w.popover!=null&&(is("beforetoggle",m),is("toggle",m)),w.onScroll!=null&&is("scroll",m),w.onScrollEnd!=null&&is("scrollend",m),w.onClick!=null&&(m.onclick=Wp),m=!0):m=!1,m||xc(d)}function DS(d){for(Ra=d.return;Ra;)switch(Ra.tag){case 5:case 13:xi=!1;return;case 27:case 3:xi=!0;return;default:Ra=Ra.return}}function Yh(d){if(d!==Ra)return!1;if(!As)return DS(d),As=!0,!1;var m=d.tag,p;if((p=m!==3&&m!==27)&&((p=m===5)&&(p=d.type,p=!(p!=="form"&&p!=="button")||Xv(d.type,d.memoizedProps)),p=!p),p&&pr&&xc(d),DS(d),m===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8)if(p=d.data,p==="/$"){if(m===0){pr=qn(d.nextSibling);break e}m--}else p!=="$"&&p!=="$!"&&p!=="$?"||m++;d=d.nextSibling}pr=null}}else m===27?(m=pr,il(d.type)?(d=Zv,Zv=null,pr=d):pr=m):pr=Ra?qn(d.stateNode.nextSibling):null;return!0}function qh(){pr=Ra=null,As=!1}function MS(){var d=pc;return d!==null&&(Wa===null?Wa=d:Wa.push.apply(Wa,d),pc=null),d}function Xh(d){pc===null?pc=[d]:pc.push(d)}var Iy=Q(null),bc=null,io=null;function Wo(d,m,p){se(Iy,m._currentValue),m._currentValue=p}function oo(d){d._currentValue=Iy.current,ee(Iy)}function Dy(d,m,p){for(;d!==null;){var w=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,w!==null&&(w.childLanes|=m)):w!==null&&(w.childLanes&m)!==m&&(w.childLanes|=m),d===p)break;d=d.return}}function My(d,m,p,w){var C=d.child;for(C!==null&&(C.return=d);C!==null;){var M=C.dependencies;if(M!==null){var q=C.child;M=M.firstContext;e:for(;M!==null;){var K=M;M=C;for(var ae=0;ae<m.length;ae++)if(K.context===m[ae]){M.lanes|=p,K=M.alternate,K!==null&&(K.lanes|=p),Dy(M.return,p,d),w||(q=null);break e}M=K.next}}else if(C.tag===18){if(q=C.return,q===null)throw Error(s(341));q.lanes|=p,M=q.alternate,M!==null&&(M.lanes|=p),Dy(q,p,d),q=null}else q=C.child;if(q!==null)q.return=C;else for(q=C;q!==null;){if(q===d){q=null;break}if(C=q.sibling,C!==null){C.return=q.return,q=C;break}q=q.return}C=q}}function Gh(d,m,p,w){d=null;for(var C=m,M=!1;C!==null;){if(!M){if((C.flags&524288)!==0)M=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var q=C.alternate;if(q===null)throw Error(s(387));if(q=q.memoizedProps,q!==null){var K=C.type;nn(C.pendingProps.value,q.value)||(d!==null?d.push(K):d=[K])}}else if(C===Oe.current){if(q=C.alternate,q===null)throw Error(s(387));q.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(d!==null?d.push(km):d=[km])}C=C.return}d!==null&&My(m,d,p,w),m.flags|=262144}function hp(d){for(d=d.firstContext;d!==null;){if(!nn(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function yc(d){bc=d,io=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function ba(d){return OS(bc,d)}function mp(d,m){return bc===null&&yc(d),OS(d,m)}function OS(d,m){var p=m._currentValue;if(m={context:m,memoizedValue:p,next:null},io===null){if(d===null)throw Error(s(308));io=m,d.dependencies={lanes:0,firstContext:m},d.flags|=524288}else io=io.next=m;return p}var SF=typeof AbortController<"u"?AbortController:function(){var d=[],m=this.signal={aborted:!1,addEventListener:function(p,w){d.push(w)}};this.abort=function(){m.aborted=!0,d.forEach(function(p){return p()})}},_F=r.unstable_scheduleCallback,AF=r.unstable_NormalPriority,Yr={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oy(){return{controller:new SF,data:new Map,refCount:0}}function Kh(d){d.refCount--,d.refCount===0&&_F(AF,function(){d.controller.abort()})}var Qh=null,Ly=0,Xd=0,Gd=null;function CF(d,m){if(Qh===null){var p=Qh=[];Ly=0,Xd=Uv(),Gd={status:"pending",value:void 0,then:function(w){p.push(w)}}}return Ly++,m.then(LS,LS),m}function LS(){if(--Ly===0&&Qh!==null){Gd!==null&&(Gd.status="fulfilled");var d=Qh;Qh=null,Xd=0,Gd=null;for(var m=0;m<d.length;m++)(0,d[m])()}}function EF(d,m){var p=[],w={status:"pending",value:null,reason:null,then:function(C){p.push(C)}};return d.then(function(){w.status="fulfilled",w.value=m;for(var C=0;C<p.length;C++)(0,p[C])(m)},function(C){for(w.status="rejected",w.reason=C,C=0;C<p.length;C++)(0,p[C])(void 0)}),w}var FS=H.S;H.S=function(d,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&CF(d,m),FS!==null&&FS(d,m)};var vc=Q(null);function Fy(){var d=vc.current;return d!==null?d:sr.pooledCache}function fp(d,m){m===null?se(vc,vc.current):se(vc,m.pool)}function US(){var d=Fy();return d===null?null:{parent:Yr._currentValue,pool:d}}var Zh=Error(s(460)),zS=Error(s(474)),gp=Error(s(542)),Uy={then:function(){}};function VS(d){return d=d.status,d==="fulfilled"||d==="rejected"}function pp(){}function BS(d,m,p){switch(p=d[p],p===void 0?d.push(m):p!==m&&(m.then(pp,pp),m=p),m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,$S(d),d;default:if(typeof m.status=="string")m.then(pp,pp);else{if(d=sr,d!==null&&100<d.shellSuspendCounter)throw Error(s(482));d=m,d.status="pending",d.then(function(w){if(m.status==="pending"){var C=m;C.status="fulfilled",C.value=w}},function(w){if(m.status==="pending"){var C=m;C.status="rejected",C.reason=w}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,$S(d),d}throw Jh=m,Zh}}var Jh=null;function HS(){if(Jh===null)throw Error(s(459));var d=Jh;return Jh=null,d}function $S(d){if(d===Zh||d===gp)throw Error(s(483))}var Yo=!1;function zy(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vy(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function qo(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Xo(d,m,p){var w=d.updateQueue;if(w===null)return null;if(w=w.shared,(Vs&2)!==0){var C=w.pending;return C===null?m.next=m:(m.next=C.next,C.next=m),w.pending=m,m=lp(d),TS(d,null,p),m}return op(d,w,m,p),lp(d)}function em(d,m,p){if(m=m.updateQueue,m!==null&&(m=m.shared,(p&4194048)!==0)){var w=m.lanes;w&=d.pendingLanes,p|=w,m.lanes=p,Pr(d,p)}}function By(d,m){var p=d.updateQueue,w=d.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var C=null,M=null;if(p=p.firstBaseUpdate,p!==null){do{var q={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};M===null?C=M=q:M=M.next=q,p=p.next}while(p!==null);M===null?C=M=m:M=M.next=m}else C=M=m;p={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:M,shared:w.shared,callbacks:w.callbacks},d.updateQueue=p;return}d=p.lastBaseUpdate,d===null?p.firstBaseUpdate=m:d.next=m,p.lastBaseUpdate=m}var Hy=!1;function tm(){if(Hy){var d=Gd;if(d!==null)throw d}}function sm(d,m,p,w){Hy=!1;var C=d.updateQueue;Yo=!1;var M=C.firstBaseUpdate,q=C.lastBaseUpdate,K=C.shared.pending;if(K!==null){C.shared.pending=null;var ae=K,ye=ae.next;ae.next=null,q===null?M=ye:q.next=ye,q=ae;var Me=d.alternate;Me!==null&&(Me=Me.updateQueue,K=Me.lastBaseUpdate,K!==q&&(K===null?Me.firstBaseUpdate=ye:K.next=ye,Me.lastBaseUpdate=ae))}if(M!==null){var He=C.baseState;q=0,Me=ye=ae=null,K=M;do{var we=K.lane&-536870913,je=we!==K.lane;if(je?(fs&we)===we:(w&we)===we){we!==0&&we===Xd&&(Hy=!0),Me!==null&&(Me=Me.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var Ot=d,Rt=K;we=m;var Gs=p;switch(Rt.tag){case 1:if(Ot=Rt.payload,typeof Ot=="function"){He=Ot.call(Gs,He,we);break e}He=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Rt.payload,we=typeof Ot=="function"?Ot.call(Gs,He,we):Ot,we==null)break e;He=h({},He,we);break e;case 2:Yo=!0}}we=K.callback,we!==null&&(d.flags|=64,je&&(d.flags|=8192),je=C.callbacks,je===null?C.callbacks=[we]:je.push(we))}else je={lane:we,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Me===null?(ye=Me=je,ae=He):Me=Me.next=je,q|=we;if(K=K.next,K===null){if(K=C.shared.pending,K===null)break;je=K,K=je.next,je.next=null,C.lastBaseUpdate=je,C.shared.pending=null}}while(!0);Me===null&&(ae=He),C.baseState=ae,C.firstBaseUpdate=ye,C.lastBaseUpdate=Me,M===null&&(C.shared.lanes=0),sl|=q,d.lanes=q,d.memoizedState=He}}function WS(d,m){if(typeof d!="function")throw Error(s(191,d));d.call(m)}function YS(d,m){var p=d.callbacks;if(p!==null)for(d.callbacks=null,d=0;d<p.length;d++)WS(p[d],m)}var Kd=Q(null),xp=Q(0);function qS(d,m){d=go,se(xp,d),se(Kd,m),go=d|m.baseLanes}function $y(){se(xp,go),se(Kd,Kd.current)}function Wy(){go=xp.current,ee(Kd),ee(xp)}var Go=0,Zt=null,qs=null,Dr=null,bp=!1,Qd=!1,wc=!1,yp=0,rm=0,Zd=null,TF=0;function kr(){throw Error(s(321))}function Yy(d,m){if(m===null)return!1;for(var p=0;p<m.length&&p<d.length;p++)if(!nn(d[p],m[p]))return!1;return!0}function qy(d,m,p,w,C,M){return Go=M,Zt=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,H.H=d===null||d.memoizedState===null?T_:P_,wc=!1,M=p(w,C),wc=!1,Qd&&(M=GS(m,p,w,C)),XS(d),M}function XS(d){H.H=Sp;var m=qs!==null&&qs.next!==null;if(Go=0,Dr=qs=Zt=null,bp=!1,rm=0,Zd=null,m)throw Error(s(300));d===null||ea||(d=d.dependencies,d!==null&&hp(d)&&(ea=!0))}function GS(d,m,p,w){Zt=d;var C=0;do{if(Qd&&(Zd=null),rm=0,Qd=!1,25<=C)throw Error(s(301));if(C+=1,Dr=qs=null,d.updateQueue!=null){var M=d.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}H.H=LF,M=m(p,w)}while(Qd);return M}function PF(){var d=H.H,m=d.useState()[0];return m=typeof m.then=="function"?am(m):m,d=d.useState()[0],(qs!==null?qs.memoizedState:null)!==d&&(Zt.flags|=1024),m}function Xy(){var d=yp!==0;return yp=0,d}function Gy(d,m,p){m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~p}function Ky(d){if(bp){for(d=d.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}bp=!1}Go=0,Dr=qs=Zt=null,Qd=!1,rm=yp=0,Zd=null}function Ha(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?Zt.memoizedState=Dr=d:Dr=Dr.next=d,Dr}function Mr(){if(qs===null){var d=Zt.alternate;d=d!==null?d.memoizedState:null}else d=qs.next;var m=Dr===null?Zt.memoizedState:Dr.next;if(m!==null)Dr=m,qs=d;else{if(d===null)throw Zt.alternate===null?Error(s(467)):Error(s(310));qs=d,d={memoizedState:qs.memoizedState,baseState:qs.baseState,baseQueue:qs.baseQueue,queue:qs.queue,next:null},Dr===null?Zt.memoizedState=Dr=d:Dr=Dr.next=d}return Dr}function Qy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function am(d){var m=rm;return rm+=1,Zd===null&&(Zd=[]),d=BS(Zd,d,m),m=Zt,(Dr===null?m.memoizedState:Dr.next)===null&&(m=m.alternate,H.H=m===null||m.memoizedState===null?T_:P_),d}function vp(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return am(d);if(d.$$typeof===A)return ba(d)}throw Error(s(438,String(d)))}function Zy(d){var m=null,p=Zt.updateQueue;if(p!==null&&(m=p.memoCache),m==null){var w=Zt.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(m={data:w.data.map(function(C){return C.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),p===null&&(p=Qy(),Zt.updateQueue=p),p.memoCache=m,p=m.data[m.index],p===void 0)for(p=m.data[m.index]=Array(d),w=0;w<d;w++)p[w]=L;return m.index++,p}function lo(d,m){return typeof m=="function"?m(d):m}function wp(d){var m=Mr();return Jy(m,qs,d)}function Jy(d,m,p){var w=d.queue;if(w===null)throw Error(s(311));w.lastRenderedReducer=p;var C=d.baseQueue,M=w.pending;if(M!==null){if(C!==null){var q=C.next;C.next=M.next,M.next=q}m.baseQueue=C=M,w.pending=null}if(M=d.baseState,C===null)d.memoizedState=M;else{m=C.next;var K=q=null,ae=null,ye=m,Me=!1;do{var He=ye.lane&-536870913;if(He!==ye.lane?(fs&He)===He:(Go&He)===He){var we=ye.revertLane;if(we===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),He===Xd&&(Me=!0);else if((Go&we)===we){ye=ye.next,we===Xd&&(Me=!0);continue}else He={lane:0,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ae===null?(K=ae=He,q=M):ae=ae.next=He,Zt.lanes|=we,sl|=we;He=ye.action,wc&&p(M,He),M=ye.hasEagerState?ye.eagerState:p(M,He)}else we={lane:He,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ae===null?(K=ae=we,q=M):ae=ae.next=we,Zt.lanes|=He,sl|=He;ye=ye.next}while(ye!==null&&ye!==m);if(ae===null?q=M:ae.next=K,!nn(M,d.memoizedState)&&(ea=!0,Me&&(p=Gd,p!==null)))throw p;d.memoizedState=M,d.baseState=q,d.baseQueue=ae,w.lastRenderedState=M}return C===null&&(w.lanes=0),[d.memoizedState,w.dispatch]}function ev(d){var m=Mr(),p=m.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=d;var w=p.dispatch,C=p.pending,M=m.memoizedState;if(C!==null){p.pending=null;var q=C=C.next;do M=d(M,q.action),q=q.next;while(q!==C);nn(M,m.memoizedState)||(ea=!0),m.memoizedState=M,m.baseQueue===null&&(m.baseState=M),p.lastRenderedState=M}return[M,w]}function KS(d,m,p){var w=Zt,C=Mr(),M=As;if(M){if(p===void 0)throw Error(s(407));p=p()}else p=m();var q=!nn((qs||C).memoizedState,p);q&&(C.memoizedState=p,ea=!0),C=C.queue;var K=JS.bind(null,w,C,d);if(nm(2048,8,K,[d]),C.getSnapshot!==m||q||Dr!==null&&Dr.memoizedState.tag&1){if(w.flags|=2048,Jd(9,Np(),ZS.bind(null,w,C,p,m),null),sr===null)throw Error(s(349));M||(Go&124)!==0||QS(w,m,p)}return p}function QS(d,m,p){d.flags|=16384,d={getSnapshot:m,value:p},m=Zt.updateQueue,m===null?(m=Qy(),Zt.updateQueue=m,m.stores=[d]):(p=m.stores,p===null?m.stores=[d]:p.push(d))}function ZS(d,m,p,w){m.value=p,m.getSnapshot=w,e_(m)&&t_(d)}function JS(d,m,p){return p(function(){e_(m)&&t_(d)})}function e_(d){var m=d.getSnapshot;d=d.value;try{var p=m();return!nn(d,p)}catch{return!0}}function t_(d){var m=$d(d,2);m!==null&&hn(m,d,2)}function tv(d){var m=Ha();if(typeof d=="function"){var p=d;if(d=p(),wc){Pt(!0);try{p()}finally{Pt(!1)}}}return m.memoizedState=m.baseState=d,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:d},m}function s_(d,m,p,w){return d.baseState=p,Jy(d,qs,typeof w=="function"?w:lo)}function RF(d,m,p,w,C){if(kp(d))throw Error(s(485));if(d=m.action,d!==null){var M={payload:C,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){M.listeners.push(q)}};H.T!==null?p(!0):M.isTransition=!1,w(M),p=m.pending,p===null?(M.next=m.pending=M,r_(m,M)):(M.next=p.next,m.pending=p.next=M)}}function r_(d,m){var p=m.action,w=m.payload,C=d.state;if(m.isTransition){var M=H.T,q={};H.T=q;try{var K=p(C,w),ae=H.S;ae!==null&&ae(q,K),a_(d,m,K)}catch(ye){sv(d,m,ye)}finally{H.T=M}}else try{M=p(C,w),a_(d,m,M)}catch(ye){sv(d,m,ye)}}function a_(d,m,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(w){n_(d,m,w)},function(w){return sv(d,m,w)}):n_(d,m,p)}function n_(d,m,p){m.status="fulfilled",m.value=p,i_(m),d.state=p,m=d.pending,m!==null&&(p=m.next,p===m?d.pending=null:(p=p.next,m.next=p,r_(d,p)))}function sv(d,m,p){var w=d.pending;if(d.pending=null,w!==null){w=w.next;do m.status="rejected",m.reason=p,i_(m),m=m.next;while(m!==w)}d.action=null}function i_(d){d=d.listeners;for(var m=0;m<d.length;m++)(0,d[m])()}function o_(d,m){return m}function l_(d,m){if(As){var p=sr.formState;if(p!==null){e:{var w=Zt;if(As){if(pr){t:{for(var C=pr,M=xi;C.nodeType!==8;){if(!M){C=null;break t}if(C=qn(C.nextSibling),C===null){C=null;break t}}M=C.data,C=M==="F!"||M==="F"?C:null}if(C){pr=qn(C.nextSibling),w=C.data==="F!";break e}}xc(w)}w=!1}w&&(m=p[0])}}return p=Ha(),p.memoizedState=p.baseState=m,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o_,lastRenderedState:m},p.queue=w,p=A_.bind(null,Zt,w),w.dispatch=p,w=tv(!1),M=ov.bind(null,Zt,!1,w.queue),w=Ha(),C={state:m,dispatch:null,action:d,pending:null},w.queue=C,p=RF.bind(null,Zt,C,M,p),C.dispatch=p,w.memoizedState=d,[m,p,!1]}function c_(d){var m=Mr();return d_(m,qs,d)}function d_(d,m,p){if(m=Jy(d,m,o_)[0],d=wp(lo)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var w=am(m)}catch(q){throw q===Zh?gp:q}else w=m;m=Mr();var C=m.queue,M=C.dispatch;return p!==m.memoizedState&&(Zt.flags|=2048,Jd(9,Np(),IF.bind(null,C,p),null)),[w,M,d]}function IF(d,m){d.action=m}function u_(d){var m=Mr(),p=qs;if(p!==null)return d_(m,p,d);Mr(),m=m.memoizedState,p=Mr();var w=p.queue.dispatch;return p.memoizedState=d,[m,w,!1]}function Jd(d,m,p,w){return d={tag:d,create:p,deps:w,inst:m,next:null},m=Zt.updateQueue,m===null&&(m=Qy(),Zt.updateQueue=m),p=m.lastEffect,p===null?m.lastEffect=d.next=d:(w=p.next,p.next=d,d.next=w,m.lastEffect=d),d}function Np(){return{destroy:void 0,resource:void 0}}function h_(){return Mr().memoizedState}function jp(d,m,p,w){var C=Ha();w=w===void 0?null:w,Zt.flags|=d,C.memoizedState=Jd(1|m,Np(),p,w)}function nm(d,m,p,w){var C=Mr();w=w===void 0?null:w;var M=C.memoizedState.inst;qs!==null&&w!==null&&Yy(w,qs.memoizedState.deps)?C.memoizedState=Jd(m,M,p,w):(Zt.flags|=d,C.memoizedState=Jd(1|m,M,p,w))}function m_(d,m){jp(8390656,8,d,m)}function f_(d,m){nm(2048,8,d,m)}function g_(d,m){return nm(4,2,d,m)}function p_(d,m){return nm(4,4,d,m)}function x_(d,m){if(typeof m=="function"){d=d();var p=m(d);return function(){typeof p=="function"?p():m(null)}}if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function b_(d,m,p){p=p!=null?p.concat([d]):null,nm(4,4,x_.bind(null,m,d),p)}function rv(){}function y_(d,m){var p=Mr();m=m===void 0?null:m;var w=p.memoizedState;return m!==null&&Yy(m,w[1])?w[0]:(p.memoizedState=[d,m],d)}function v_(d,m){var p=Mr();m=m===void 0?null:m;var w=p.memoizedState;if(m!==null&&Yy(m,w[1]))return w[0];if(w=d(),wc){Pt(!0);try{d()}finally{Pt(!1)}}return p.memoizedState=[w,m],w}function av(d,m,p){return p===void 0||(Go&1073741824)!==0?d.memoizedState=m:(d.memoizedState=p,d=jA(),Zt.lanes|=d,sl|=d,p)}function w_(d,m,p,w){return nn(p,m)?p:Kd.current!==null?(d=av(d,p,w),nn(d,m)||(ea=!0),d):(Go&42)===0?(ea=!0,d.memoizedState=p):(d=jA(),Zt.lanes|=d,sl|=d,m)}function N_(d,m,p,w,C){var M=$.p;$.p=M!==0&&8>M?M:8;var q=H.T,K={};H.T=K,ov(d,!1,m,p);try{var ae=C(),ye=H.S;if(ye!==null&&ye(K,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Me=EF(ae,w);im(d,m,Me,un(d))}else im(d,m,w,un(d))}catch(He){im(d,m,{then:function(){},status:"rejected",reason:He},un())}finally{$.p=M,H.T=q}}function DF(){}function nv(d,m,p,w){if(d.tag!==5)throw Error(s(476));var C=j_(d).queue;N_(d,C,m,X,p===null?DF:function(){return k_(d),p(w)})}function j_(d){var m=d.memoizedState;if(m!==null)return m;m={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:X},next:null};var p={};return m.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:p},next:null},d.memoizedState=m,d=d.alternate,d!==null&&(d.memoizedState=m),m}function k_(d){var m=j_(d).next.queue;im(d,m,{},un())}function iv(){return ba(km)}function S_(){return Mr().memoizedState}function __(){return Mr().memoizedState}function MF(d){for(var m=d.return;m!==null;){switch(m.tag){case 24:case 3:var p=un();d=qo(p);var w=Xo(m,d,p);w!==null&&(hn(w,m,p),em(w,m,p)),m={cache:Oy()},d.payload=m;return}m=m.return}}function OF(d,m,p){var w=un();p={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},kp(d)?C_(m,p):(p=_y(d,m,p,w),p!==null&&(hn(p,d,w),E_(p,m,w)))}function A_(d,m,p){var w=un();im(d,m,p,w)}function im(d,m,p,w){var C={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(kp(d))C_(m,C);else{var M=d.alternate;if(d.lanes===0&&(M===null||M.lanes===0)&&(M=m.lastRenderedReducer,M!==null))try{var q=m.lastRenderedState,K=M(q,p);if(C.hasEagerState=!0,C.eagerState=K,nn(K,q))return op(d,m,C,0),sr===null&&ip(),!1}catch{}finally{}if(p=_y(d,m,C,w),p!==null)return hn(p,d,w),E_(p,m,w),!0}return!1}function ov(d,m,p,w){if(w={lane:2,revertLane:Uv(),action:w,hasEagerState:!1,eagerState:null,next:null},kp(d)){if(m)throw Error(s(479))}else m=_y(d,p,w,2),m!==null&&hn(m,d,2)}function kp(d){var m=d.alternate;return d===Zt||m!==null&&m===Zt}function C_(d,m){Qd=bp=!0;var p=d.pending;p===null?m.next=m:(m.next=p.next,p.next=m),d.pending=m}function E_(d,m,p){if((p&4194048)!==0){var w=m.lanes;w&=d.pendingLanes,p|=w,m.lanes=p,Pr(d,p)}}var Sp={readContext:ba,use:vp,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useLayoutEffect:kr,useInsertionEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useSyncExternalStore:kr,useId:kr,useHostTransitionStatus:kr,useFormState:kr,useActionState:kr,useOptimistic:kr,useMemoCache:kr,useCacheRefresh:kr},T_={readContext:ba,use:vp,useCallback:function(d,m){return Ha().memoizedState=[d,m===void 0?null:m],d},useContext:ba,useEffect:m_,useImperativeHandle:function(d,m,p){p=p!=null?p.concat([d]):null,jp(4194308,4,x_.bind(null,m,d),p)},useLayoutEffect:function(d,m){return jp(4194308,4,d,m)},useInsertionEffect:function(d,m){jp(4,2,d,m)},useMemo:function(d,m){var p=Ha();m=m===void 0?null:m;var w=d();if(wc){Pt(!0);try{d()}finally{Pt(!1)}}return p.memoizedState=[w,m],w},useReducer:function(d,m,p){var w=Ha();if(p!==void 0){var C=p(m);if(wc){Pt(!0);try{p(m)}finally{Pt(!1)}}}else C=m;return w.memoizedState=w.baseState=C,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:C},w.queue=d,d=d.dispatch=OF.bind(null,Zt,d),[w.memoizedState,d]},useRef:function(d){var m=Ha();return d={current:d},m.memoizedState=d},useState:function(d){d=tv(d);var m=d.queue,p=A_.bind(null,Zt,m);return m.dispatch=p,[d.memoizedState,p]},useDebugValue:rv,useDeferredValue:function(d,m){var p=Ha();return av(p,d,m)},useTransition:function(){var d=tv(!1);return d=N_.bind(null,Zt,d.queue,!0,!1),Ha().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,m,p){var w=Zt,C=Ha();if(As){if(p===void 0)throw Error(s(407));p=p()}else{if(p=m(),sr===null)throw Error(s(349));(fs&124)!==0||QS(w,m,p)}C.memoizedState=p;var M={value:p,getSnapshot:m};return C.queue=M,m_(JS.bind(null,w,M,d),[d]),w.flags|=2048,Jd(9,Np(),ZS.bind(null,w,M,p,m),null),p},useId:function(){var d=Ha(),m=sr.identifierPrefix;if(As){var p=no,w=ao;p=(w&~(1<<32-bt(w)-1)).toString(32)+p,m="«"+m+"R"+p,p=yp++,0<p&&(m+="H"+p.toString(32)),m+="»"}else p=TF++,m="«"+m+"r"+p.toString(32)+"»";return d.memoizedState=m},useHostTransitionStatus:iv,useFormState:l_,useActionState:l_,useOptimistic:function(d){var m=Ha();m.memoizedState=m.baseState=d;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=p,m=ov.bind(null,Zt,!0,p),p.dispatch=m,[d,m]},useMemoCache:Zy,useCacheRefresh:function(){return Ha().memoizedState=MF.bind(null,Zt)}},P_={readContext:ba,use:vp,useCallback:y_,useContext:ba,useEffect:f_,useImperativeHandle:b_,useInsertionEffect:g_,useLayoutEffect:p_,useMemo:v_,useReducer:wp,useRef:h_,useState:function(){return wp(lo)},useDebugValue:rv,useDeferredValue:function(d,m){var p=Mr();return w_(p,qs.memoizedState,d,m)},useTransition:function(){var d=wp(lo)[0],m=Mr().memoizedState;return[typeof d=="boolean"?d:am(d),m]},useSyncExternalStore:KS,useId:S_,useHostTransitionStatus:iv,useFormState:c_,useActionState:c_,useOptimistic:function(d,m){var p=Mr();return s_(p,qs,d,m)},useMemoCache:Zy,useCacheRefresh:__},LF={readContext:ba,use:vp,useCallback:y_,useContext:ba,useEffect:f_,useImperativeHandle:b_,useInsertionEffect:g_,useLayoutEffect:p_,useMemo:v_,useReducer:ev,useRef:h_,useState:function(){return ev(lo)},useDebugValue:rv,useDeferredValue:function(d,m){var p=Mr();return qs===null?av(p,d,m):w_(p,qs.memoizedState,d,m)},useTransition:function(){var d=ev(lo)[0],m=Mr().memoizedState;return[typeof d=="boolean"?d:am(d),m]},useSyncExternalStore:KS,useId:S_,useHostTransitionStatus:iv,useFormState:u_,useActionState:u_,useOptimistic:function(d,m){var p=Mr();return qs!==null?s_(p,qs,d,m):(p.baseState=d,[d,p.queue.dispatch])},useMemoCache:Zy,useCacheRefresh:__},eu=null,om=0;function _p(d){var m=om;return om+=1,eu===null&&(eu=[]),BS(eu,d,m)}function lm(d,m){m=m.props.ref,d.ref=m!==void 0?m:null}function Ap(d,m){throw m.$$typeof===f?Error(s(525)):(d=Object.prototype.toString.call(m),Error(s(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d)))}function R_(d){var m=d._init;return m(d._payload)}function I_(d){function m(fe,oe){if(d){var pe=fe.deletions;pe===null?(fe.deletions=[oe],fe.flags|=16):pe.push(oe)}}function p(fe,oe){if(!d)return null;for(;oe!==null;)m(fe,oe),oe=oe.sibling;return null}function w(fe){for(var oe=new Map;fe!==null;)fe.key!==null?oe.set(fe.key,fe):oe.set(fe.index,fe),fe=fe.sibling;return oe}function C(fe,oe){return fe=ro(fe,oe),fe.index=0,fe.sibling=null,fe}function M(fe,oe,pe){return fe.index=pe,d?(pe=fe.alternate,pe!==null?(pe=pe.index,pe<oe?(fe.flags|=67108866,oe):pe):(fe.flags|=67108866,oe)):(fe.flags|=1048576,oe)}function q(fe){return d&&fe.alternate===null&&(fe.flags|=67108866),fe}function K(fe,oe,pe,Le){return oe===null||oe.tag!==6?(oe=Cy(pe,fe.mode,Le),oe.return=fe,oe):(oe=C(oe,pe),oe.return=fe,oe)}function ae(fe,oe,pe,Le){var xt=pe.type;return xt===y?Me(fe,oe,pe.props.children,Le,pe.key):oe!==null&&(oe.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===T&&R_(xt)===oe.type)?(oe=C(oe,pe.props),lm(oe,pe),oe.return=fe,oe):(oe=cp(pe.type,pe.key,pe.props,null,fe.mode,Le),lm(oe,pe),oe.return=fe,oe)}function ye(fe,oe,pe,Le){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==pe.containerInfo||oe.stateNode.implementation!==pe.implementation?(oe=Ey(pe,fe.mode,Le),oe.return=fe,oe):(oe=C(oe,pe.children||[]),oe.return=fe,oe)}function Me(fe,oe,pe,Le,xt){return oe===null||oe.tag!==7?(oe=mc(pe,fe.mode,Le,xt),oe.return=fe,oe):(oe=C(oe,pe),oe.return=fe,oe)}function He(fe,oe,pe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=Cy(""+oe,fe.mode,pe),oe.return=fe,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return pe=cp(oe.type,oe.key,oe.props,null,fe.mode,pe),lm(pe,oe),pe.return=fe,pe;case x:return oe=Ey(oe,fe.mode,pe),oe.return=fe,oe;case T:var Le=oe._init;return oe=Le(oe._payload),He(fe,oe,pe)}if(Y(oe)||z(oe))return oe=mc(oe,fe.mode,pe,null),oe.return=fe,oe;if(typeof oe.then=="function")return He(fe,_p(oe),pe);if(oe.$$typeof===A)return He(fe,mp(fe,oe),pe);Ap(fe,oe)}return null}function we(fe,oe,pe,Le){var xt=oe!==null?oe.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return xt!==null?null:K(fe,oe,""+pe,Le);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case g:return pe.key===xt?ae(fe,oe,pe,Le):null;case x:return pe.key===xt?ye(fe,oe,pe,Le):null;case T:return xt=pe._init,pe=xt(pe._payload),we(fe,oe,pe,Le)}if(Y(pe)||z(pe))return xt!==null?null:Me(fe,oe,pe,Le,null);if(typeof pe.then=="function")return we(fe,oe,_p(pe),Le);if(pe.$$typeof===A)return we(fe,oe,mp(fe,pe),Le);Ap(fe,pe)}return null}function je(fe,oe,pe,Le,xt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return fe=fe.get(pe)||null,K(oe,fe,""+Le,xt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case g:return fe=fe.get(Le.key===null?pe:Le.key)||null,ae(oe,fe,Le,xt);case x:return fe=fe.get(Le.key===null?pe:Le.key)||null,ye(oe,fe,Le,xt);case T:var rs=Le._init;return Le=rs(Le._payload),je(fe,oe,pe,Le,xt)}if(Y(Le)||z(Le))return fe=fe.get(pe)||null,Me(oe,fe,Le,xt,null);if(typeof Le.then=="function")return je(fe,oe,pe,_p(Le),xt);if(Le.$$typeof===A)return je(fe,oe,pe,mp(oe,Le),xt);Ap(oe,Le)}return null}function Ot(fe,oe,pe,Le){for(var xt=null,rs=null,Nt=oe,It=oe=0,sa=null;Nt!==null&&It<pe.length;It++){Nt.index>It?(sa=Nt,Nt=null):sa=Nt.sibling;var ks=we(fe,Nt,pe[It],Le);if(ks===null){Nt===null&&(Nt=sa);break}d&&Nt&&ks.alternate===null&&m(fe,Nt),oe=M(ks,oe,It),rs===null?xt=ks:rs.sibling=ks,rs=ks,Nt=sa}if(It===pe.length)return p(fe,Nt),As&&gc(fe,It),xt;if(Nt===null){for(;It<pe.length;It++)Nt=He(fe,pe[It],Le),Nt!==null&&(oe=M(Nt,oe,It),rs===null?xt=Nt:rs.sibling=Nt,rs=Nt);return As&&gc(fe,It),xt}for(Nt=w(Nt);It<pe.length;It++)sa=je(Nt,fe,It,pe[It],Le),sa!==null&&(d&&sa.alternate!==null&&Nt.delete(sa.key===null?It:sa.key),oe=M(sa,oe,It),rs===null?xt=sa:rs.sibling=sa,rs=sa);return d&&Nt.forEach(function(ul){return m(fe,ul)}),As&&gc(fe,It),xt}function Rt(fe,oe,pe,Le){if(pe==null)throw Error(s(151));for(var xt=null,rs=null,Nt=oe,It=oe=0,sa=null,ks=pe.next();Nt!==null&&!ks.done;It++,ks=pe.next()){Nt.index>It?(sa=Nt,Nt=null):sa=Nt.sibling;var ul=we(fe,Nt,ks.value,Le);if(ul===null){Nt===null&&(Nt=sa);break}d&&Nt&&ul.alternate===null&&m(fe,Nt),oe=M(ul,oe,It),rs===null?xt=ul:rs.sibling=ul,rs=ul,Nt=sa}if(ks.done)return p(fe,Nt),As&&gc(fe,It),xt;if(Nt===null){for(;!ks.done;It++,ks=pe.next())ks=He(fe,ks.value,Le),ks!==null&&(oe=M(ks,oe,It),rs===null?xt=ks:rs.sibling=ks,rs=ks);return As&&gc(fe,It),xt}for(Nt=w(Nt);!ks.done;It++,ks=pe.next())ks=je(Nt,fe,It,ks.value,Le),ks!==null&&(d&&ks.alternate!==null&&Nt.delete(ks.key===null?It:ks.key),oe=M(ks,oe,It),rs===null?xt=ks:rs.sibling=ks,rs=ks);return d&&Nt.forEach(function(F8){return m(fe,F8)}),As&&gc(fe,It),xt}function Gs(fe,oe,pe,Le){if(typeof pe=="object"&&pe!==null&&pe.type===y&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case g:e:{for(var xt=pe.key;oe!==null;){if(oe.key===xt){if(xt=pe.type,xt===y){if(oe.tag===7){p(fe,oe.sibling),Le=C(oe,pe.props.children),Le.return=fe,fe=Le;break e}}else if(oe.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===T&&R_(xt)===oe.type){p(fe,oe.sibling),Le=C(oe,pe.props),lm(Le,pe),Le.return=fe,fe=Le;break e}p(fe,oe);break}else m(fe,oe);oe=oe.sibling}pe.type===y?(Le=mc(pe.props.children,fe.mode,Le,pe.key),Le.return=fe,fe=Le):(Le=cp(pe.type,pe.key,pe.props,null,fe.mode,Le),lm(Le,pe),Le.return=fe,fe=Le)}return q(fe);case x:e:{for(xt=pe.key;oe!==null;){if(oe.key===xt)if(oe.tag===4&&oe.stateNode.containerInfo===pe.containerInfo&&oe.stateNode.implementation===pe.implementation){p(fe,oe.sibling),Le=C(oe,pe.children||[]),Le.return=fe,fe=Le;break e}else{p(fe,oe);break}else m(fe,oe);oe=oe.sibling}Le=Ey(pe,fe.mode,Le),Le.return=fe,fe=Le}return q(fe);case T:return xt=pe._init,pe=xt(pe._payload),Gs(fe,oe,pe,Le)}if(Y(pe))return Ot(fe,oe,pe,Le);if(z(pe)){if(xt=z(pe),typeof xt!="function")throw Error(s(150));return pe=xt.call(pe),Rt(fe,oe,pe,Le)}if(typeof pe.then=="function")return Gs(fe,oe,_p(pe),Le);if(pe.$$typeof===A)return Gs(fe,oe,mp(fe,pe),Le);Ap(fe,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,oe!==null&&oe.tag===6?(p(fe,oe.sibling),Le=C(oe,pe),Le.return=fe,fe=Le):(p(fe,oe),Le=Cy(pe,fe.mode,Le),Le.return=fe,fe=Le),q(fe)):p(fe,oe)}return function(fe,oe,pe,Le){try{om=0;var xt=Gs(fe,oe,pe,Le);return eu=null,xt}catch(Nt){if(Nt===Zh||Nt===gp)throw Nt;var rs=on(29,Nt,null,fe.mode);return rs.lanes=Le,rs.return=fe,rs}finally{}}}var tu=I_(!0),D_=I_(!1),Tn=Q(null),bi=null;function Ko(d){var m=d.alternate;se(qr,qr.current&1),se(Tn,d),bi===null&&(m===null||Kd.current!==null||m.memoizedState!==null)&&(bi=d)}function M_(d){if(d.tag===22){if(se(qr,qr.current),se(Tn,d),bi===null){var m=d.alternate;m!==null&&m.memoizedState!==null&&(bi=d)}}else Qo()}function Qo(){se(qr,qr.current),se(Tn,Tn.current)}function co(d){ee(Tn),bi===d&&(bi=null),ee(qr)}var qr=Q(0);function Cp(d){for(var m=d;m!==null;){if(m.tag===13){var p=m.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||Qv(p)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function lv(d,m,p,w){m=d.memoizedState,p=p(w,m),p=p==null?m:h({},m,p),d.memoizedState=p,d.lanes===0&&(d.updateQueue.baseState=p)}var cv={enqueueSetState:function(d,m,p){d=d._reactInternals;var w=un(),C=qo(w);C.payload=m,p!=null&&(C.callback=p),m=Xo(d,C,w),m!==null&&(hn(m,d,w),em(m,d,w))},enqueueReplaceState:function(d,m,p){d=d._reactInternals;var w=un(),C=qo(w);C.tag=1,C.payload=m,p!=null&&(C.callback=p),m=Xo(d,C,w),m!==null&&(hn(m,d,w),em(m,d,w))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var p=un(),w=qo(p);w.tag=2,m!=null&&(w.callback=m),m=Xo(d,w,p),m!==null&&(hn(m,d,p),em(m,d,p))}};function O_(d,m,p,w,C,M,q){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(w,M,q):m.prototype&&m.prototype.isPureReactComponent?!$h(p,w)||!$h(C,M):!0}function L_(d,m,p,w){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(p,w),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(p,w),m.state!==d&&cv.enqueueReplaceState(m,m.state,null)}function Nc(d,m){var p=m;if("ref"in m){p={};for(var w in m)w!=="ref"&&(p[w]=m[w])}if(d=d.defaultProps){p===m&&(p=h({},p));for(var C in d)p[C]===void 0&&(p[C]=d[C])}return p}var Ep=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function F_(d){Ep(d)}function U_(d){console.error(d)}function z_(d){Ep(d)}function Tp(d,m){try{var p=d.onUncaughtError;p(m.value,{componentStack:m.stack})}catch(w){setTimeout(function(){throw w})}}function V_(d,m,p){try{var w=d.onCaughtError;w(p.value,{componentStack:p.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function dv(d,m,p){return p=qo(p),p.tag=3,p.payload={element:null},p.callback=function(){Tp(d,m)},p}function B_(d){return d=qo(d),d.tag=3,d}function H_(d,m,p,w){var C=p.type.getDerivedStateFromError;if(typeof C=="function"){var M=w.value;d.payload=function(){return C(M)},d.callback=function(){V_(m,p,w)}}var q=p.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(d.callback=function(){V_(m,p,w),typeof C!="function"&&(rl===null?rl=new Set([this]):rl.add(this));var K=w.stack;this.componentDidCatch(w.value,{componentStack:K!==null?K:""})})}function FF(d,m,p,w,C){if(p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(m=p.alternate,m!==null&&Gh(m,p,C,!0),p=Tn.current,p!==null){switch(p.tag){case 13:return bi===null?Dv():p.alternate===null&&xr===0&&(xr=3),p.flags&=-257,p.flags|=65536,p.lanes=C,w===Uy?p.flags|=16384:(m=p.updateQueue,m===null?p.updateQueue=new Set([w]):m.add(w),Ov(d,w,C)),!1;case 22:return p.flags|=65536,w===Uy?p.flags|=16384:(m=p.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([w])},p.updateQueue=m):(p=m.retryQueue,p===null?m.retryQueue=new Set([w]):p.add(w)),Ov(d,w,C)),!1}throw Error(s(435,p.tag))}return Ov(d,w,C),Dv(),!1}if(As)return m=Tn.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=C,w!==Ry&&(d=Error(s(422),{cause:w}),Xh(_n(d,p)))):(w!==Ry&&(m=Error(s(423),{cause:w}),Xh(_n(m,p))),d=d.current.alternate,d.flags|=65536,C&=-C,d.lanes|=C,w=_n(w,p),C=dv(d.stateNode,w,C),By(d,C),xr!==4&&(xr=2)),!1;var M=Error(s(520),{cause:w});if(M=_n(M,p),gm===null?gm=[M]:gm.push(M),xr!==4&&(xr=2),m===null)return!0;w=_n(w,p),p=m;do{switch(p.tag){case 3:return p.flags|=65536,d=C&-C,p.lanes|=d,d=dv(p.stateNode,w,d),By(p,d),!1;case 1:if(m=p.type,M=p.stateNode,(p.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(rl===null||!rl.has(M))))return p.flags|=65536,C&=-C,p.lanes|=C,C=B_(C),H_(C,d,p,w),By(p,C),!1}p=p.return}while(p!==null);return!1}var $_=Error(s(461)),ea=!1;function la(d,m,p,w){m.child=d===null?D_(m,null,p,w):tu(m,d.child,p,w)}function W_(d,m,p,w,C){p=p.render;var M=m.ref;if("ref"in w){var q={};for(var K in w)K!=="ref"&&(q[K]=w[K])}else q=w;return yc(m),w=qy(d,m,p,q,M,C),K=Xy(),d!==null&&!ea?(Gy(d,m,C),uo(d,m,C)):(As&&K&&Ty(m),m.flags|=1,la(d,m,w,C),m.child)}function Y_(d,m,p,w,C){if(d===null){var M=p.type;return typeof M=="function"&&!Ay(M)&&M.defaultProps===void 0&&p.compare===null?(m.tag=15,m.type=M,q_(d,m,M,w,C)):(d=cp(p.type,null,w,m,m.mode,C),d.ref=m.ref,d.return=m,m.child=d)}if(M=d.child,!bv(d,C)){var q=M.memoizedProps;if(p=p.compare,p=p!==null?p:$h,p(q,w)&&d.ref===m.ref)return uo(d,m,C)}return m.flags|=1,d=ro(M,w),d.ref=m.ref,d.return=m,m.child=d}function q_(d,m,p,w,C){if(d!==null){var M=d.memoizedProps;if($h(M,w)&&d.ref===m.ref)if(ea=!1,m.pendingProps=w=M,bv(d,C))(d.flags&131072)!==0&&(ea=!0);else return m.lanes=d.lanes,uo(d,m,C)}return uv(d,m,p,w,C)}function X_(d,m,p){var w=m.pendingProps,C=w.children,M=d!==null?d.memoizedState:null;if(w.mode==="hidden"){if((m.flags&128)!==0){if(w=M!==null?M.baseLanes|p:p,d!==null){for(C=m.child=d.child,M=0;C!==null;)M=M|C.lanes|C.childLanes,C=C.sibling;m.childLanes=M&~w}else m.childLanes=0,m.child=null;return G_(d,m,w,p)}if((p&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},d!==null&&fp(m,M!==null?M.cachePool:null),M!==null?qS(m,M):$y(),M_(m);else return m.lanes=m.childLanes=536870912,G_(d,m,M!==null?M.baseLanes|p:p,p)}else M!==null?(fp(m,M.cachePool),qS(m,M),Qo(),m.memoizedState=null):(d!==null&&fp(m,null),$y(),Qo());return la(d,m,C,p),m.child}function G_(d,m,p,w){var C=Fy();return C=C===null?null:{parent:Yr._currentValue,pool:C},m.memoizedState={baseLanes:p,cachePool:C},d!==null&&fp(m,null),$y(),M_(m),d!==null&&Gh(d,m,w,!0),null}function Pp(d,m){var p=m.ref;if(p===null)d!==null&&d.ref!==null&&(m.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(d===null||d.ref!==p)&&(m.flags|=4194816)}}function uv(d,m,p,w,C){return yc(m),p=qy(d,m,p,w,void 0,C),w=Xy(),d!==null&&!ea?(Gy(d,m,C),uo(d,m,C)):(As&&w&&Ty(m),m.flags|=1,la(d,m,p,C),m.child)}function K_(d,m,p,w,C,M){return yc(m),m.updateQueue=null,p=GS(m,w,p,C),XS(d),w=Xy(),d!==null&&!ea?(Gy(d,m,M),uo(d,m,M)):(As&&w&&Ty(m),m.flags|=1,la(d,m,p,M),m.child)}function Q_(d,m,p,w,C){if(yc(m),m.stateNode===null){var M=Wd,q=p.contextType;typeof q=="object"&&q!==null&&(M=ba(q)),M=new p(w,M),m.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=cv,m.stateNode=M,M._reactInternals=m,M=m.stateNode,M.props=w,M.state=m.memoizedState,M.refs={},zy(m),q=p.contextType,M.context=typeof q=="object"&&q!==null?ba(q):Wd,M.state=m.memoizedState,q=p.getDerivedStateFromProps,typeof q=="function"&&(lv(m,p,q,w),M.state=m.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(q=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),q!==M.state&&cv.enqueueReplaceState(M,M.state,null),sm(m,w,M,C),tm(),M.state=m.memoizedState),typeof M.componentDidMount=="function"&&(m.flags|=4194308),w=!0}else if(d===null){M=m.stateNode;var K=m.memoizedProps,ae=Nc(p,K);M.props=ae;var ye=M.context,Me=p.contextType;q=Wd,typeof Me=="object"&&Me!==null&&(q=ba(Me));var He=p.getDerivedStateFromProps;Me=typeof He=="function"||typeof M.getSnapshotBeforeUpdate=="function",K=m.pendingProps!==K,Me||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(K||ye!==q)&&L_(m,M,w,q),Yo=!1;var we=m.memoizedState;M.state=we,sm(m,w,M,C),tm(),ye=m.memoizedState,K||we!==ye||Yo?(typeof He=="function"&&(lv(m,p,He,w),ye=m.memoizedState),(ae=Yo||O_(m,p,ae,w,we,ye,q))?(Me||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(m.flags|=4194308)):(typeof M.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=w,m.memoizedState=ye),M.props=w,M.state=ye,M.context=q,w=ae):(typeof M.componentDidMount=="function"&&(m.flags|=4194308),w=!1)}else{M=m.stateNode,Vy(d,m),q=m.memoizedProps,Me=Nc(p,q),M.props=Me,He=m.pendingProps,we=M.context,ye=p.contextType,ae=Wd,typeof ye=="object"&&ye!==null&&(ae=ba(ye)),K=p.getDerivedStateFromProps,(ye=typeof K=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(q!==He||we!==ae)&&L_(m,M,w,ae),Yo=!1,we=m.memoizedState,M.state=we,sm(m,w,M,C),tm();var je=m.memoizedState;q!==He||we!==je||Yo||d!==null&&d.dependencies!==null&&hp(d.dependencies)?(typeof K=="function"&&(lv(m,p,K,w),je=m.memoizedState),(Me=Yo||O_(m,p,Me,w,we,je,ae)||d!==null&&d.dependencies!==null&&hp(d.dependencies))?(ye||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(w,je,ae),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(w,je,ae)),typeof M.componentDidUpdate=="function"&&(m.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof M.componentDidUpdate!="function"||q===d.memoizedProps&&we===d.memoizedState||(m.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||q===d.memoizedProps&&we===d.memoizedState||(m.flags|=1024),m.memoizedProps=w,m.memoizedState=je),M.props=w,M.state=je,M.context=ae,w=Me):(typeof M.componentDidUpdate!="function"||q===d.memoizedProps&&we===d.memoizedState||(m.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||q===d.memoizedProps&&we===d.memoizedState||(m.flags|=1024),w=!1)}return M=w,Pp(d,m),w=(m.flags&128)!==0,M||w?(M=m.stateNode,p=w&&typeof p.getDerivedStateFromError!="function"?null:M.render(),m.flags|=1,d!==null&&w?(m.child=tu(m,d.child,null,C),m.child=tu(m,null,p,C)):la(d,m,p,C),m.memoizedState=M.state,d=m.child):d=uo(d,m,C),d}function Z_(d,m,p,w){return qh(),m.flags|=256,la(d,m,p,w),m.child}var hv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mv(d){return{baseLanes:d,cachePool:US()}}function fv(d,m,p){return d=d!==null?d.childLanes&~p:0,m&&(d|=Pn),d}function J_(d,m,p){var w=m.pendingProps,C=!1,M=(m.flags&128)!==0,q;if((q=M)||(q=d!==null&&d.memoizedState===null?!1:(qr.current&2)!==0),q&&(C=!0,m.flags&=-129),q=(m.flags&32)!==0,m.flags&=-33,d===null){if(As){if(C?Ko(m):Qo(),As){var K=pr,ae;if(ae=K){e:{for(ae=K,K=xi;ae.nodeType!==8;){if(!K){K=null;break e}if(ae=qn(ae.nextSibling),ae===null){K=null;break e}}K=ae}K!==null?(m.memoizedState={dehydrated:K,treeContext:fc!==null?{id:ao,overflow:no}:null,retryLane:536870912,hydrationErrors:null},ae=on(18,null,null,0),ae.stateNode=K,ae.return=m,m.child=ae,Ra=m,pr=null,ae=!0):ae=!1}ae||xc(m)}if(K=m.memoizedState,K!==null&&(K=K.dehydrated,K!==null))return Qv(K)?m.lanes=32:m.lanes=536870912,null;co(m)}return K=w.children,w=w.fallback,C?(Qo(),C=m.mode,K=Rp({mode:"hidden",children:K},C),w=mc(w,C,p,null),K.return=m,w.return=m,K.sibling=w,m.child=K,C=m.child,C.memoizedState=mv(p),C.childLanes=fv(d,q,p),m.memoizedState=hv,w):(Ko(m),gv(m,K))}if(ae=d.memoizedState,ae!==null&&(K=ae.dehydrated,K!==null)){if(M)m.flags&256?(Ko(m),m.flags&=-257,m=pv(d,m,p)):m.memoizedState!==null?(Qo(),m.child=d.child,m.flags|=128,m=null):(Qo(),C=w.fallback,K=m.mode,w=Rp({mode:"visible",children:w.children},K),C=mc(C,K,p,null),C.flags|=2,w.return=m,C.return=m,w.sibling=C,m.child=w,tu(m,d.child,null,p),w=m.child,w.memoizedState=mv(p),w.childLanes=fv(d,q,p),m.memoizedState=hv,m=C);else if(Ko(m),Qv(K)){if(q=K.nextSibling&&K.nextSibling.dataset,q)var ye=q.dgst;q=ye,w=Error(s(419)),w.stack="",w.digest=q,Xh({value:w,source:null,stack:null}),m=pv(d,m,p)}else if(ea||Gh(d,m,p,!1),q=(p&d.childLanes)!==0,ea||q){if(q=sr,q!==null&&(w=p&-p,w=(w&42)!==0?1:vs(w),w=(w&(q.suspendedLanes|p))!==0?0:w,w!==0&&w!==ae.retryLane))throw ae.retryLane=w,$d(d,w),hn(q,d,w),$_;K.data==="$?"||Dv(),m=pv(d,m,p)}else K.data==="$?"?(m.flags|=192,m.child=d.child,m=null):(d=ae.treeContext,pr=qn(K.nextSibling),Ra=m,As=!0,pc=null,xi=!1,d!==null&&(Cn[En++]=ao,Cn[En++]=no,Cn[En++]=fc,ao=d.id,no=d.overflow,fc=m),m=gv(m,w.children),m.flags|=4096);return m}return C?(Qo(),C=w.fallback,K=m.mode,ae=d.child,ye=ae.sibling,w=ro(ae,{mode:"hidden",children:w.children}),w.subtreeFlags=ae.subtreeFlags&65011712,ye!==null?C=ro(ye,C):(C=mc(C,K,p,null),C.flags|=2),C.return=m,w.return=m,w.sibling=C,m.child=w,w=C,C=m.child,K=d.child.memoizedState,K===null?K=mv(p):(ae=K.cachePool,ae!==null?(ye=Yr._currentValue,ae=ae.parent!==ye?{parent:ye,pool:ye}:ae):ae=US(),K={baseLanes:K.baseLanes|p,cachePool:ae}),C.memoizedState=K,C.childLanes=fv(d,q,p),m.memoizedState=hv,w):(Ko(m),p=d.child,d=p.sibling,p=ro(p,{mode:"visible",children:w.children}),p.return=m,p.sibling=null,d!==null&&(q=m.deletions,q===null?(m.deletions=[d],m.flags|=16):q.push(d)),m.child=p,m.memoizedState=null,p)}function gv(d,m){return m=Rp({mode:"visible",children:m},d.mode),m.return=d,d.child=m}function Rp(d,m){return d=on(22,d,null,m),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function pv(d,m,p){return tu(m,d.child,null,p),d=gv(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function eA(d,m,p){d.lanes|=m;var w=d.alternate;w!==null&&(w.lanes|=m),Dy(d.return,m,p)}function xv(d,m,p,w,C){var M=d.memoizedState;M===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:C}:(M.isBackwards=m,M.rendering=null,M.renderingStartTime=0,M.last=w,M.tail=p,M.tailMode=C)}function tA(d,m,p){var w=m.pendingProps,C=w.revealOrder,M=w.tail;if(la(d,m,w.children,p),w=qr.current,(w&2)!==0)w=w&1|2,m.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&eA(d,p,m);else if(d.tag===19)eA(d,p,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}w&=1}switch(se(qr,w),C){case"forwards":for(p=m.child,C=null;p!==null;)d=p.alternate,d!==null&&Cp(d)===null&&(C=p),p=p.sibling;p=C,p===null?(C=m.child,m.child=null):(C=p.sibling,p.sibling=null),xv(m,!1,C,p,M);break;case"backwards":for(p=null,C=m.child,m.child=null;C!==null;){if(d=C.alternate,d!==null&&Cp(d)===null){m.child=C;break}d=C.sibling,C.sibling=p,p=C,C=d}xv(m,!0,p,null,M);break;case"together":xv(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function uo(d,m,p){if(d!==null&&(m.dependencies=d.dependencies),sl|=m.lanes,(p&m.childLanes)===0)if(d!==null){if(Gh(d,m,p,!1),(p&m.childLanes)===0)return null}else return null;if(d!==null&&m.child!==d.child)throw Error(s(153));if(m.child!==null){for(d=m.child,p=ro(d,d.pendingProps),m.child=p,p.return=m;d.sibling!==null;)d=d.sibling,p=p.sibling=ro(d,d.pendingProps),p.return=m;p.sibling=null}return m.child}function bv(d,m){return(d.lanes&m)!==0?!0:(d=d.dependencies,!!(d!==null&&hp(d)))}function UF(d,m,p){switch(m.tag){case 3:Pe(m,m.stateNode.containerInfo),Wo(m,Yr,d.memoizedState.cache),qh();break;case 27:case 5:ie(m);break;case 4:Pe(m,m.stateNode.containerInfo);break;case 10:Wo(m,m.type,m.memoizedProps.value);break;case 13:var w=m.memoizedState;if(w!==null)return w.dehydrated!==null?(Ko(m),m.flags|=128,null):(p&m.child.childLanes)!==0?J_(d,m,p):(Ko(m),d=uo(d,m,p),d!==null?d.sibling:null);Ko(m);break;case 19:var C=(d.flags&128)!==0;if(w=(p&m.childLanes)!==0,w||(Gh(d,m,p,!1),w=(p&m.childLanes)!==0),C){if(w)return tA(d,m,p);m.flags|=128}if(C=m.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),se(qr,qr.current),w)break;return null;case 22:case 23:return m.lanes=0,X_(d,m,p);case 24:Wo(m,Yr,d.memoizedState.cache)}return uo(d,m,p)}function sA(d,m,p){if(d!==null)if(d.memoizedProps!==m.pendingProps)ea=!0;else{if(!bv(d,p)&&(m.flags&128)===0)return ea=!1,UF(d,m,p);ea=(d.flags&131072)!==0}else ea=!1,As&&(m.flags&1048576)!==0&&RS(m,up,m.index);switch(m.lanes=0,m.tag){case 16:e:{d=m.pendingProps;var w=m.elementType,C=w._init;if(w=C(w._payload),m.type=w,typeof w=="function")Ay(w)?(d=Nc(w,d),m.tag=1,m=Q_(null,m,w,d,p)):(m.tag=0,m=uv(null,m,w,d,p));else{if(w!=null){if(C=w.$$typeof,C===R){m.tag=11,m=W_(null,m,w,d,p);break e}else if(C===P){m.tag=14,m=Y_(null,m,w,d,p);break e}}throw m=V(w)||w,Error(s(306,m,""))}}return m;case 0:return uv(d,m,m.type,m.pendingProps,p);case 1:return w=m.type,C=Nc(w,m.pendingProps),Q_(d,m,w,C,p);case 3:e:{if(Pe(m,m.stateNode.containerInfo),d===null)throw Error(s(387));w=m.pendingProps;var M=m.memoizedState;C=M.element,Vy(d,m),sm(m,w,null,p);var q=m.memoizedState;if(w=q.cache,Wo(m,Yr,w),w!==M.cache&&My(m,[Yr],p,!0),tm(),w=q.element,M.isDehydrated)if(M={element:w,isDehydrated:!1,cache:q.cache},m.updateQueue.baseState=M,m.memoizedState=M,m.flags&256){m=Z_(d,m,w,p);break e}else if(w!==C){C=_n(Error(s(424)),m),Xh(C),m=Z_(d,m,w,p);break e}else{switch(d=m.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(pr=qn(d.firstChild),Ra=m,As=!0,pc=null,xi=!0,p=D_(m,null,w,p),m.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(qh(),w===C){m=uo(d,m,p);break e}la(d,m,w,p)}m=m.child}return m;case 26:return Pp(d,m),d===null?(p=iC(m.type,null,m.pendingProps,null))?m.memoizedState=p:As||(p=m.type,d=m.pendingProps,w=Yp(ue.current).createElement(p),w[Se]=m,w[Je]=d,da(w,p,d),Ut(w),m.stateNode=w):m.memoizedState=iC(m.type,d.memoizedProps,m.pendingProps,d.memoizedState),null;case 27:return ie(m),d===null&&As&&(w=m.stateNode=rC(m.type,m.pendingProps,ue.current),Ra=m,xi=!0,C=pr,il(m.type)?(Zv=C,pr=qn(w.firstChild)):pr=C),la(d,m,m.pendingProps.children,p),Pp(d,m),d===null&&(m.flags|=4194304),m.child;case 5:return d===null&&As&&((C=w=pr)&&(w=m8(w,m.type,m.pendingProps,xi),w!==null?(m.stateNode=w,Ra=m,pr=qn(w.firstChild),xi=!1,C=!0):C=!1),C||xc(m)),ie(m),C=m.type,M=m.pendingProps,q=d!==null?d.memoizedProps:null,w=M.children,Xv(C,M)?w=null:q!==null&&Xv(C,q)&&(m.flags|=32),m.memoizedState!==null&&(C=qy(d,m,PF,null,null,p),km._currentValue=C),Pp(d,m),la(d,m,w,p),m.child;case 6:return d===null&&As&&((d=p=pr)&&(p=f8(p,m.pendingProps,xi),p!==null?(m.stateNode=p,Ra=m,pr=null,d=!0):d=!1),d||xc(m)),null;case 13:return J_(d,m,p);case 4:return Pe(m,m.stateNode.containerInfo),w=m.pendingProps,d===null?m.child=tu(m,null,w,p):la(d,m,w,p),m.child;case 11:return W_(d,m,m.type,m.pendingProps,p);case 7:return la(d,m,m.pendingProps,p),m.child;case 8:return la(d,m,m.pendingProps.children,p),m.child;case 12:return la(d,m,m.pendingProps.children,p),m.child;case 10:return w=m.pendingProps,Wo(m,m.type,w.value),la(d,m,w.children,p),m.child;case 9:return C=m.type._context,w=m.pendingProps.children,yc(m),C=ba(C),w=w(C),m.flags|=1,la(d,m,w,p),m.child;case 14:return Y_(d,m,m.type,m.pendingProps,p);case 15:return q_(d,m,m.type,m.pendingProps,p);case 19:return tA(d,m,p);case 31:return w=m.pendingProps,p=m.mode,w={mode:w.mode,children:w.children},d===null?(p=Rp(w,p),p.ref=m.ref,m.child=p,p.return=m,m=p):(p=ro(d.child,w),p.ref=m.ref,m.child=p,p.return=m,m=p),m;case 22:return X_(d,m,p);case 24:return yc(m),w=ba(Yr),d===null?(C=Fy(),C===null&&(C=sr,M=Oy(),C.pooledCache=M,M.refCount++,M!==null&&(C.pooledCacheLanes|=p),C=M),m.memoizedState={parent:w,cache:C},zy(m),Wo(m,Yr,C)):((d.lanes&p)!==0&&(Vy(d,m),sm(m,null,null,p),tm()),C=d.memoizedState,M=m.memoizedState,C.parent!==w?(C={parent:w,cache:w},m.memoizedState=C,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=C),Wo(m,Yr,w)):(w=M.cache,Wo(m,Yr,w),w!==C.cache&&My(m,[Yr],p,!0))),la(d,m,m.pendingProps.children,p),m.child;case 29:throw m.pendingProps}throw Error(s(156,m.tag))}function ho(d){d.flags|=4}function rA(d,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!uC(m)){if(m=Tn.current,m!==null&&((fs&4194048)===fs?bi!==null:(fs&62914560)!==fs&&(fs&536870912)===0||m!==bi))throw Jh=Uy,zS;d.flags|=8192}}function Ip(d,m){m!==null&&(d.flags|=4),d.flags&16384&&(m=d.tag!==22?nr():536870912,d.lanes|=m,nu|=m)}function cm(d,m){if(!As)switch(d.tailMode){case"hidden":m=d.tail;for(var p=null;m!==null;)m.alternate!==null&&(p=m),m=m.sibling;p===null?d.tail=null:p.sibling=null;break;case"collapsed":p=d.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:w.sibling=null}}function ur(d){var m=d.alternate!==null&&d.alternate.child===d.child,p=0,w=0;if(m)for(var C=d.child;C!==null;)p|=C.lanes|C.childLanes,w|=C.subtreeFlags&65011712,w|=C.flags&65011712,C.return=d,C=C.sibling;else for(C=d.child;C!==null;)p|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=d,C=C.sibling;return d.subtreeFlags|=w,d.childLanes=p,m}function zF(d,m,p){var w=m.pendingProps;switch(Py(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ur(m),null;case 1:return ur(m),null;case 3:return p=m.stateNode,w=null,d!==null&&(w=d.memoizedState.cache),m.memoizedState.cache!==w&&(m.flags|=2048),oo(Yr),Ie(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(d===null||d.child===null)&&(Yh(m)?ho(m):d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,MS())),ur(m),null;case 26:return p=m.memoizedState,d===null?(ho(m),p!==null?(ur(m),rA(m,p)):(ur(m),m.flags&=-16777217)):p?p!==d.memoizedState?(ho(m),ur(m),rA(m,p)):(ur(m),m.flags&=-16777217):(d.memoizedProps!==w&&ho(m),ur(m),m.flags&=-16777217),null;case 27:ze(m),p=ue.current;var C=m.type;if(d!==null&&m.stateNode!=null)d.memoizedProps!==w&&ho(m);else{if(!w){if(m.stateNode===null)throw Error(s(166));return ur(m),null}d=le.current,Yh(m)?IS(m):(d=rC(C,w,p),m.stateNode=d,ho(m))}return ur(m),null;case 5:if(ze(m),p=m.type,d!==null&&m.stateNode!=null)d.memoizedProps!==w&&ho(m);else{if(!w){if(m.stateNode===null)throw Error(s(166));return ur(m),null}if(d=le.current,Yh(m))IS(m);else{switch(C=Yp(ue.current),d){case 1:d=C.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:d=C.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":d=C.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":d=C.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":d=C.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof w.is=="string"?C.createElement("select",{is:w.is}):C.createElement("select"),w.multiple?d.multiple=!0:w.size&&(d.size=w.size);break;default:d=typeof w.is=="string"?C.createElement(p,{is:w.is}):C.createElement(p)}}d[Se]=m,d[Je]=w;e:for(C=m.child;C!==null;){if(C.tag===5||C.tag===6)d.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===m)break e;for(;C.sibling===null;){if(C.return===null||C.return===m)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}m.stateNode=d;e:switch(da(d,p,w),p){case"button":case"input":case"select":case"textarea":d=!!w.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ho(m)}}return ur(m),m.flags&=-16777217,null;case 6:if(d&&m.stateNode!=null)d.memoizedProps!==w&&ho(m);else{if(typeof w!="string"&&m.stateNode===null)throw Error(s(166));if(d=ue.current,Yh(m)){if(d=m.stateNode,p=m.memoizedProps,w=null,C=Ra,C!==null)switch(C.tag){case 27:case 5:w=C.memoizedProps}d[Se]=m,d=!!(d.nodeValue===p||w!==null&&w.suppressHydrationWarning===!0||KA(d.nodeValue,p)),d||xc(m)}else d=Yp(d).createTextNode(w),d[Se]=m,m.stateNode=d}return ur(m),null;case 13:if(w=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(C=Yh(m),w!==null&&w.dehydrated!==null){if(d===null){if(!C)throw Error(s(318));if(C=m.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(s(317));C[Se]=m}else qh(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ur(m),C=!1}else C=MS(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=C),C=!0;if(!C)return m.flags&256?(co(m),m):(co(m),null)}if(co(m),(m.flags&128)!==0)return m.lanes=p,m;if(p=w!==null,d=d!==null&&d.memoizedState!==null,p){w=m.child,C=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(C=w.alternate.memoizedState.cachePool.pool);var M=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(M=w.memoizedState.cachePool.pool),M!==C&&(w.flags|=2048)}return p!==d&&p&&(m.child.flags|=8192),Ip(m,m.updateQueue),ur(m),null;case 4:return Ie(),d===null&&Hv(m.stateNode.containerInfo),ur(m),null;case 10:return oo(m.type),ur(m),null;case 19:if(ee(qr),C=m.memoizedState,C===null)return ur(m),null;if(w=(m.flags&128)!==0,M=C.rendering,M===null)if(w)cm(C,!1);else{if(xr!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(M=Cp(d),M!==null){for(m.flags|=128,cm(C,!1),d=M.updateQueue,m.updateQueue=d,Ip(m,d),m.subtreeFlags=0,d=p,p=m.child;p!==null;)PS(p,d),p=p.sibling;return se(qr,qr.current&1|2),m.child}d=d.sibling}C.tail!==null&&$e()>Op&&(m.flags|=128,w=!0,cm(C,!1),m.lanes=4194304)}else{if(!w)if(d=Cp(M),d!==null){if(m.flags|=128,w=!0,d=d.updateQueue,m.updateQueue=d,Ip(m,d),cm(C,!0),C.tail===null&&C.tailMode==="hidden"&&!M.alternate&&!As)return ur(m),null}else 2*$e()-C.renderingStartTime>Op&&p!==536870912&&(m.flags|=128,w=!0,cm(C,!1),m.lanes=4194304);C.isBackwards?(M.sibling=m.child,m.child=M):(d=C.last,d!==null?d.sibling=M:m.child=M,C.last=M)}return C.tail!==null?(m=C.tail,C.rendering=m,C.tail=m.sibling,C.renderingStartTime=$e(),m.sibling=null,d=qr.current,se(qr,w?d&1|2:d&1),m):(ur(m),null);case 22:case 23:return co(m),Wy(),w=m.memoizedState!==null,d!==null?d.memoizedState!==null!==w&&(m.flags|=8192):w&&(m.flags|=8192),w?(p&536870912)!==0&&(m.flags&128)===0&&(ur(m),m.subtreeFlags&6&&(m.flags|=8192)):ur(m),p=m.updateQueue,p!==null&&Ip(m,p.retryQueue),p=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(p=d.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==p&&(m.flags|=2048),d!==null&&ee(vc),null;case 24:return p=null,d!==null&&(p=d.memoizedState.cache),m.memoizedState.cache!==p&&(m.flags|=2048),oo(Yr),ur(m),null;case 25:return null;case 30:return null}throw Error(s(156,m.tag))}function VF(d,m){switch(Py(m),m.tag){case 1:return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return oo(Yr),Ie(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 26:case 27:case 5:return ze(m),null;case 13:if(co(m),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(s(340));qh()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return ee(qr),null;case 4:return Ie(),null;case 10:return oo(m.type),null;case 22:case 23:return co(m),Wy(),d!==null&&ee(vc),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 24:return oo(Yr),null;case 25:return null;default:return null}}function aA(d,m){switch(Py(m),m.tag){case 3:oo(Yr),Ie();break;case 26:case 27:case 5:ze(m);break;case 4:Ie();break;case 13:co(m);break;case 19:ee(qr);break;case 10:oo(m.type);break;case 22:case 23:co(m),Wy(),d!==null&&ee(vc);break;case 24:oo(Yr)}}function dm(d,m){try{var p=m.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var C=w.next;p=C;do{if((p.tag&d)===d){w=void 0;var M=p.create,q=p.inst;w=M(),q.destroy=w}p=p.next}while(p!==C)}}catch(K){er(m,m.return,K)}}function Zo(d,m,p){try{var w=m.updateQueue,C=w!==null?w.lastEffect:null;if(C!==null){var M=C.next;w=M;do{if((w.tag&d)===d){var q=w.inst,K=q.destroy;if(K!==void 0){q.destroy=void 0,C=m;var ae=p,ye=K;try{ye()}catch(Me){er(C,ae,Me)}}}w=w.next}while(w!==M)}}catch(Me){er(m,m.return,Me)}}function nA(d){var m=d.updateQueue;if(m!==null){var p=d.stateNode;try{YS(m,p)}catch(w){er(d,d.return,w)}}}function iA(d,m,p){p.props=Nc(d.type,d.memoizedProps),p.state=d.memoizedState;try{p.componentWillUnmount()}catch(w){er(d,m,w)}}function um(d,m){try{var p=d.ref;if(p!==null){switch(d.tag){case 26:case 27:case 5:var w=d.stateNode;break;case 30:w=d.stateNode;break;default:w=d.stateNode}typeof p=="function"?d.refCleanup=p(w):p.current=w}}catch(C){er(d,m,C)}}function yi(d,m){var p=d.ref,w=d.refCleanup;if(p!==null)if(typeof w=="function")try{w()}catch(C){er(d,m,C)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(C){er(d,m,C)}else p.current=null}function oA(d){var m=d.type,p=d.memoizedProps,w=d.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":p.autoFocus&&w.focus();break e;case"img":p.src?w.src=p.src:p.srcSet&&(w.srcset=p.srcSet)}}catch(C){er(d,d.return,C)}}function yv(d,m,p){try{var w=d.stateNode;l8(w,d.type,p,m),w[Je]=m}catch(C){er(d,d.return,C)}}function lA(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&il(d.type)||d.tag===4}function vv(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||lA(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&il(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function wv(d,m,p){var w=d.tag;if(w===5||w===6)d=d.stateNode,m?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(d,m):(m=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,m.appendChild(d),p=p._reactRootContainer,p!=null||m.onclick!==null||(m.onclick=Wp));else if(w!==4&&(w===27&&il(d.type)&&(p=d.stateNode,m=null),d=d.child,d!==null))for(wv(d,m,p),d=d.sibling;d!==null;)wv(d,m,p),d=d.sibling}function Dp(d,m,p){var w=d.tag;if(w===5||w===6)d=d.stateNode,m?p.insertBefore(d,m):p.appendChild(d);else if(w!==4&&(w===27&&il(d.type)&&(p=d.stateNode),d=d.child,d!==null))for(Dp(d,m,p),d=d.sibling;d!==null;)Dp(d,m,p),d=d.sibling}function cA(d){var m=d.stateNode,p=d.memoizedProps;try{for(var w=d.type,C=m.attributes;C.length;)m.removeAttributeNode(C[0]);da(m,w,p),m[Se]=d,m[Je]=p}catch(M){er(d,d.return,M)}}var mo=!1,Sr=!1,Nv=!1,dA=typeof WeakSet=="function"?WeakSet:Set,ta=null;function BF(d,m){if(d=d.containerInfo,Yv=Zp,d=wS(d),vy(d)){if("selectionStart"in d)var p={start:d.selectionStart,end:d.selectionEnd};else e:{p=(p=d.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var C=w.anchorOffset,M=w.focusNode;w=w.focusOffset;try{p.nodeType,M.nodeType}catch{p=null;break e}var q=0,K=-1,ae=-1,ye=0,Me=0,He=d,we=null;t:for(;;){for(var je;He!==p||C!==0&&He.nodeType!==3||(K=q+C),He!==M||w!==0&&He.nodeType!==3||(ae=q+w),He.nodeType===3&&(q+=He.nodeValue.length),(je=He.firstChild)!==null;)we=He,He=je;for(;;){if(He===d)break t;if(we===p&&++ye===C&&(K=q),we===M&&++Me===w&&(ae=q),(je=He.nextSibling)!==null)break;He=we,we=He.parentNode}He=je}p=K===-1||ae===-1?null:{start:K,end:ae}}else p=null}p=p||{start:0,end:0}}else p=null;for(qv={focusedElem:d,selectionRange:p},Zp=!1,ta=m;ta!==null;)if(m=ta,d=m.child,(m.subtreeFlags&1024)!==0&&d!==null)d.return=m,ta=d;else for(;ta!==null;){switch(m=ta,M=m.alternate,d=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&M!==null){d=void 0,p=m,C=M.memoizedProps,M=M.memoizedState,w=p.stateNode;try{var Ot=Nc(p.type,C,p.elementType===p.type);d=w.getSnapshotBeforeUpdate(Ot,M),w.__reactInternalSnapshotBeforeUpdate=d}catch(Rt){er(p,p.return,Rt)}}break;case 3:if((d&1024)!==0){if(d=m.stateNode.containerInfo,p=d.nodeType,p===9)Kv(d);else if(p===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":Kv(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(s(163))}if(d=m.sibling,d!==null){d.return=m.return,ta=d;break}ta=m.return}}function uA(d,m,p){var w=p.flags;switch(p.tag){case 0:case 11:case 15:Jo(d,p),w&4&&dm(5,p);break;case 1:if(Jo(d,p),w&4)if(d=p.stateNode,m===null)try{d.componentDidMount()}catch(q){er(p,p.return,q)}else{var C=Nc(p.type,m.memoizedProps);m=m.memoizedState;try{d.componentDidUpdate(C,m,d.__reactInternalSnapshotBeforeUpdate)}catch(q){er(p,p.return,q)}}w&64&&nA(p),w&512&&um(p,p.return);break;case 3:if(Jo(d,p),w&64&&(d=p.updateQueue,d!==null)){if(m=null,p.child!==null)switch(p.child.tag){case 27:case 5:m=p.child.stateNode;break;case 1:m=p.child.stateNode}try{YS(d,m)}catch(q){er(p,p.return,q)}}break;case 27:m===null&&w&4&&cA(p);case 26:case 5:Jo(d,p),m===null&&w&4&&oA(p),w&512&&um(p,p.return);break;case 12:Jo(d,p);break;case 13:Jo(d,p),w&4&&fA(d,p),w&64&&(d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(p=QF.bind(null,p),g8(d,p))));break;case 22:if(w=p.memoizedState!==null||mo,!w){m=m!==null&&m.memoizedState!==null||Sr,C=mo;var M=Sr;mo=w,(Sr=m)&&!M?el(d,p,(p.subtreeFlags&8772)!==0):Jo(d,p),mo=C,Sr=M}break;case 30:break;default:Jo(d,p)}}function hA(d){var m=d.alternate;m!==null&&(d.alternate=null,hA(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&Qt(m)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var cr=null,$a=!1;function fo(d,m,p){for(p=p.child;p!==null;)mA(d,m,p),p=p.sibling}function mA(d,m,p){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(wt,p)}catch{}switch(p.tag){case 26:Sr||yi(p,m),fo(d,m,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Sr||yi(p,m);var w=cr,C=$a;il(p.type)&&(cr=p.stateNode,$a=!1),fo(d,m,p),vm(p.stateNode),cr=w,$a=C;break;case 5:Sr||yi(p,m);case 6:if(w=cr,C=$a,cr=null,fo(d,m,p),cr=w,$a=C,cr!==null)if($a)try{(cr.nodeType===9?cr.body:cr.nodeName==="HTML"?cr.ownerDocument.body:cr).removeChild(p.stateNode)}catch(M){er(p,m,M)}else try{cr.removeChild(p.stateNode)}catch(M){er(p,m,M)}break;case 18:cr!==null&&($a?(d=cr,tC(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,p.stateNode),Cm(d)):tC(cr,p.stateNode));break;case 4:w=cr,C=$a,cr=p.stateNode.containerInfo,$a=!0,fo(d,m,p),cr=w,$a=C;break;case 0:case 11:case 14:case 15:Sr||Zo(2,p,m),Sr||Zo(4,p,m),fo(d,m,p);break;case 1:Sr||(yi(p,m),w=p.stateNode,typeof w.componentWillUnmount=="function"&&iA(p,m,w)),fo(d,m,p);break;case 21:fo(d,m,p);break;case 22:Sr=(w=Sr)||p.memoizedState!==null,fo(d,m,p),Sr=w;break;default:fo(d,m,p)}}function fA(d,m){if(m.memoizedState===null&&(d=m.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Cm(d)}catch(p){er(m,m.return,p)}}function HF(d){switch(d.tag){case 13:case 19:var m=d.stateNode;return m===null&&(m=d.stateNode=new dA),m;case 22:return d=d.stateNode,m=d._retryCache,m===null&&(m=d._retryCache=new dA),m;default:throw Error(s(435,d.tag))}}function jv(d,m){var p=HF(d);m.forEach(function(w){var C=ZF.bind(null,d,w);p.has(w)||(p.add(w),w.then(C,C))})}function ln(d,m){var p=m.deletions;if(p!==null)for(var w=0;w<p.length;w++){var C=p[w],M=d,q=m,K=q;e:for(;K!==null;){switch(K.tag){case 27:if(il(K.type)){cr=K.stateNode,$a=!1;break e}break;case 5:cr=K.stateNode,$a=!1;break e;case 3:case 4:cr=K.stateNode.containerInfo,$a=!0;break e}K=K.return}if(cr===null)throw Error(s(160));mA(M,q,C),cr=null,$a=!1,M=C.alternate,M!==null&&(M.return=null),C.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)gA(m,d),m=m.sibling}var Yn=null;function gA(d,m){var p=d.alternate,w=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:ln(m,d),cn(d),w&4&&(Zo(3,d,d.return),dm(3,d),Zo(5,d,d.return));break;case 1:ln(m,d),cn(d),w&512&&(Sr||p===null||yi(p,p.return)),w&64&&mo&&(d=d.updateQueue,d!==null&&(w=d.callbacks,w!==null&&(p=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=p===null?w:p.concat(w))));break;case 26:var C=Yn;if(ln(m,d),cn(d),w&512&&(Sr||p===null||yi(p,p.return)),w&4){var M=p!==null?p.memoizedState:null;if(w=d.memoizedState,p===null)if(w===null)if(d.stateNode===null){e:{w=d.type,p=d.memoizedProps,C=C.ownerDocument||C;t:switch(w){case"title":M=C.getElementsByTagName("title")[0],(!M||M[Ht]||M[Se]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=C.createElement(w),C.head.insertBefore(M,C.querySelector("head > title"))),da(M,w,p),M[Se]=d,Ut(M),w=M;break e;case"link":var q=cC("link","href",C).get(w+(p.href||""));if(q){for(var K=0;K<q.length;K++)if(M=q[K],M.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&M.getAttribute("rel")===(p.rel==null?null:p.rel)&&M.getAttribute("title")===(p.title==null?null:p.title)&&M.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){q.splice(K,1);break t}}M=C.createElement(w),da(M,w,p),C.head.appendChild(M);break;case"meta":if(q=cC("meta","content",C).get(w+(p.content||""))){for(K=0;K<q.length;K++)if(M=q[K],M.getAttribute("content")===(p.content==null?null:""+p.content)&&M.getAttribute("name")===(p.name==null?null:p.name)&&M.getAttribute("property")===(p.property==null?null:p.property)&&M.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&M.getAttribute("charset")===(p.charSet==null?null:p.charSet)){q.splice(K,1);break t}}M=C.createElement(w),da(M,w,p),C.head.appendChild(M);break;default:throw Error(s(468,w))}M[Se]=d,Ut(M),w=M}d.stateNode=w}else dC(C,d.type,d.stateNode);else d.stateNode=lC(C,w,d.memoizedProps);else M!==w?(M===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):M.count--,w===null?dC(C,d.type,d.stateNode):lC(C,w,d.memoizedProps)):w===null&&d.stateNode!==null&&yv(d,d.memoizedProps,p.memoizedProps)}break;case 27:ln(m,d),cn(d),w&512&&(Sr||p===null||yi(p,p.return)),p!==null&&w&4&&yv(d,d.memoizedProps,p.memoizedProps);break;case 5:if(ln(m,d),cn(d),w&512&&(Sr||p===null||yi(p,p.return)),d.flags&32){C=d.stateNode;try{Nn(C,"")}catch(je){er(d,d.return,je)}}w&4&&d.stateNode!=null&&(C=d.memoizedProps,yv(d,C,p!==null?p.memoizedProps:C)),w&1024&&(Nv=!0);break;case 6:if(ln(m,d),cn(d),w&4){if(d.stateNode===null)throw Error(s(162));w=d.memoizedProps,p=d.stateNode;try{p.nodeValue=w}catch(je){er(d,d.return,je)}}break;case 3:if(Gp=null,C=Yn,Yn=qp(m.containerInfo),ln(m,d),Yn=C,cn(d),w&4&&p!==null&&p.memoizedState.isDehydrated)try{Cm(m.containerInfo)}catch(je){er(d,d.return,je)}Nv&&(Nv=!1,pA(d));break;case 4:w=Yn,Yn=qp(d.stateNode.containerInfo),ln(m,d),cn(d),Yn=w;break;case 12:ln(m,d),cn(d);break;case 13:ln(m,d),cn(d),d.child.flags&8192&&d.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Ev=$e()),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,jv(d,w)));break;case 22:C=d.memoizedState!==null;var ae=p!==null&&p.memoizedState!==null,ye=mo,Me=Sr;if(mo=ye||C,Sr=Me||ae,ln(m,d),Sr=Me,mo=ye,cn(d),w&8192)e:for(m=d.stateNode,m._visibility=C?m._visibility&-2:m._visibility|1,C&&(p===null||ae||mo||Sr||jc(d)),p=null,m=d;;){if(m.tag===5||m.tag===26){if(p===null){ae=p=m;try{if(M=ae.stateNode,C)q=M.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{K=ae.stateNode;var He=ae.memoizedProps.style,we=He!=null&&He.hasOwnProperty("display")?He.display:null;K.style.display=we==null||typeof we=="boolean"?"":(""+we).trim()}}catch(je){er(ae,ae.return,je)}}}else if(m.tag===6){if(p===null){ae=m;try{ae.stateNode.nodeValue=C?"":ae.memoizedProps}catch(je){er(ae,ae.return,je)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===d)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break e;for(;m.sibling===null;){if(m.return===null||m.return===d)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}w&4&&(w=d.updateQueue,w!==null&&(p=w.retryQueue,p!==null&&(w.retryQueue=null,jv(d,p))));break;case 19:ln(m,d),cn(d),w&4&&(w=d.updateQueue,w!==null&&(d.updateQueue=null,jv(d,w)));break;case 30:break;case 21:break;default:ln(m,d),cn(d)}}function cn(d){var m=d.flags;if(m&2){try{for(var p,w=d.return;w!==null;){if(lA(w)){p=w;break}w=w.return}if(p==null)throw Error(s(160));switch(p.tag){case 27:var C=p.stateNode,M=vv(d);Dp(d,M,C);break;case 5:var q=p.stateNode;p.flags&32&&(Nn(q,""),p.flags&=-33);var K=vv(d);Dp(d,K,q);break;case 3:case 4:var ae=p.stateNode.containerInfo,ye=vv(d);wv(d,ye,ae);break;default:throw Error(s(161))}}catch(Me){er(d,d.return,Me)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function pA(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var m=d;pA(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),d=d.sibling}}function Jo(d,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)uA(d,m.alternate,m),m=m.sibling}function jc(d){for(d=d.child;d!==null;){var m=d;switch(m.tag){case 0:case 11:case 14:case 15:Zo(4,m,m.return),jc(m);break;case 1:yi(m,m.return);var p=m.stateNode;typeof p.componentWillUnmount=="function"&&iA(m,m.return,p),jc(m);break;case 27:vm(m.stateNode);case 26:case 5:yi(m,m.return),jc(m);break;case 22:m.memoizedState===null&&jc(m);break;case 30:jc(m);break;default:jc(m)}d=d.sibling}}function el(d,m,p){for(p=p&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var w=m.alternate,C=d,M=m,q=M.flags;switch(M.tag){case 0:case 11:case 15:el(C,M,p),dm(4,M);break;case 1:if(el(C,M,p),w=M,C=w.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(ye){er(w,w.return,ye)}if(w=M,C=w.updateQueue,C!==null){var K=w.stateNode;try{var ae=C.shared.hiddenCallbacks;if(ae!==null)for(C.shared.hiddenCallbacks=null,C=0;C<ae.length;C++)WS(ae[C],K)}catch(ye){er(w,w.return,ye)}}p&&q&64&&nA(M),um(M,M.return);break;case 27:cA(M);case 26:case 5:el(C,M,p),p&&w===null&&q&4&&oA(M),um(M,M.return);break;case 12:el(C,M,p);break;case 13:el(C,M,p),p&&q&4&&fA(C,M);break;case 22:M.memoizedState===null&&el(C,M,p),um(M,M.return);break;case 30:break;default:el(C,M,p)}m=m.sibling}}function kv(d,m){var p=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(p=d.memoizedState.cachePool.pool),d=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(d=m.memoizedState.cachePool.pool),d!==p&&(d!=null&&d.refCount++,p!=null&&Kh(p))}function Sv(d,m){d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Kh(d))}function vi(d,m,p,w){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)xA(d,m,p,w),m=m.sibling}function xA(d,m,p,w){var C=m.flags;switch(m.tag){case 0:case 11:case 15:vi(d,m,p,w),C&2048&&dm(9,m);break;case 1:vi(d,m,p,w);break;case 3:vi(d,m,p,w),C&2048&&(d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Kh(d)));break;case 12:if(C&2048){vi(d,m,p,w),d=m.stateNode;try{var M=m.memoizedProps,q=M.id,K=M.onPostCommit;typeof K=="function"&&K(q,m.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(ae){er(m,m.return,ae)}}else vi(d,m,p,w);break;case 13:vi(d,m,p,w);break;case 23:break;case 22:M=m.stateNode,q=m.alternate,m.memoizedState!==null?M._visibility&2?vi(d,m,p,w):hm(d,m):M._visibility&2?vi(d,m,p,w):(M._visibility|=2,su(d,m,p,w,(m.subtreeFlags&10256)!==0)),C&2048&&kv(q,m);break;case 24:vi(d,m,p,w),C&2048&&Sv(m.alternate,m);break;default:vi(d,m,p,w)}}function su(d,m,p,w,C){for(C=C&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var M=d,q=m,K=p,ae=w,ye=q.flags;switch(q.tag){case 0:case 11:case 15:su(M,q,K,ae,C),dm(8,q);break;case 23:break;case 22:var Me=q.stateNode;q.memoizedState!==null?Me._visibility&2?su(M,q,K,ae,C):hm(M,q):(Me._visibility|=2,su(M,q,K,ae,C)),C&&ye&2048&&kv(q.alternate,q);break;case 24:su(M,q,K,ae,C),C&&ye&2048&&Sv(q.alternate,q);break;default:su(M,q,K,ae,C)}m=m.sibling}}function hm(d,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var p=d,w=m,C=w.flags;switch(w.tag){case 22:hm(p,w),C&2048&&kv(w.alternate,w);break;case 24:hm(p,w),C&2048&&Sv(w.alternate,w);break;default:hm(p,w)}m=m.sibling}}var mm=8192;function ru(d){if(d.subtreeFlags&mm)for(d=d.child;d!==null;)bA(d),d=d.sibling}function bA(d){switch(d.tag){case 26:ru(d),d.flags&mm&&d.memoizedState!==null&&C8(Yn,d.memoizedState,d.memoizedProps);break;case 5:ru(d);break;case 3:case 4:var m=Yn;Yn=qp(d.stateNode.containerInfo),ru(d),Yn=m;break;case 22:d.memoizedState===null&&(m=d.alternate,m!==null&&m.memoizedState!==null?(m=mm,mm=16777216,ru(d),mm=m):ru(d));break;default:ru(d)}}function yA(d){var m=d.alternate;if(m!==null&&(d=m.child,d!==null)){m.child=null;do m=d.sibling,d.sibling=null,d=m;while(d!==null)}}function fm(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var p=0;p<m.length;p++){var w=m[p];ta=w,wA(w,d)}yA(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)vA(d),d=d.sibling}function vA(d){switch(d.tag){case 0:case 11:case 15:fm(d),d.flags&2048&&Zo(9,d,d.return);break;case 3:fm(d);break;case 12:fm(d);break;case 22:var m=d.stateNode;d.memoizedState!==null&&m._visibility&2&&(d.return===null||d.return.tag!==13)?(m._visibility&=-3,Mp(d)):fm(d);break;default:fm(d)}}function Mp(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var p=0;p<m.length;p++){var w=m[p];ta=w,wA(w,d)}yA(d)}for(d=d.child;d!==null;){switch(m=d,m.tag){case 0:case 11:case 15:Zo(8,m,m.return),Mp(m);break;case 22:p=m.stateNode,p._visibility&2&&(p._visibility&=-3,Mp(m));break;default:Mp(m)}d=d.sibling}}function wA(d,m){for(;ta!==null;){var p=ta;switch(p.tag){case 0:case 11:case 15:Zo(8,p,m);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var w=p.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Kh(p.memoizedState.cache)}if(w=p.child,w!==null)w.return=p,ta=w;else e:for(p=d;ta!==null;){w=ta;var C=w.sibling,M=w.return;if(hA(w),w===p){ta=null;break e}if(C!==null){C.return=M,ta=C;break e}ta=M}}}var $F={getCacheForType:function(d){var m=ba(Yr),p=m.data.get(d);return p===void 0&&(p=d(),m.data.set(d,p)),p}},WF=typeof WeakMap=="function"?WeakMap:Map,Vs=0,sr=null,ns=null,fs=0,Bs=0,dn=null,tl=!1,au=!1,_v=!1,go=0,xr=0,sl=0,kc=0,Av=0,Pn=0,nu=0,gm=null,Wa=null,Cv=!1,Ev=0,Op=1/0,Lp=null,rl=null,ca=0,al=null,iu=null,ou=0,Tv=0,Pv=null,NA=null,pm=0,Rv=null;function un(){if((Vs&2)!==0&&fs!==0)return fs&-fs;if(H.T!==null){var d=Xd;return d!==0?d:Uv()}return Ws()}function jA(){Pn===0&&(Pn=(fs&536870912)===0||As?Fs():536870912);var d=Tn.current;return d!==null&&(d.flags|=32),Pn}function hn(d,m,p){(d===sr&&(Bs===2||Bs===9)||d.cancelPendingCommit!==null)&&(lu(d,0),nl(d,fs,Pn,!1)),Ts(d,p),((Vs&2)===0||d!==sr)&&(d===sr&&((Vs&2)===0&&(kc|=p),xr===4&&nl(d,fs,Pn,!1)),wi(d))}function kA(d,m,p){if((Vs&6)!==0)throw Error(s(327));var w=!p&&(m&124)===0&&(m&d.expiredLanes)===0||Vt(d,m),C=w?XF(d,m):Mv(d,m,!0),M=w;do{if(C===0){au&&!w&&nl(d,m,0,!1);break}else{if(p=d.current.alternate,M&&!YF(p)){C=Mv(d,m,!1),M=!1;continue}if(C===2){if(M=m,d.errorRecoveryDisabledLanes&M)var q=0;else q=d.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){m=q;e:{var K=d;C=gm;var ae=K.current.memoizedState.isDehydrated;if(ae&&(lu(K,q).flags|=256),q=Mv(K,q,!1),q!==2){if(_v&&!ae){K.errorRecoveryDisabledLanes|=M,kc|=M,C=4;break e}M=Wa,Wa=C,M!==null&&(Wa===null?Wa=M:Wa.push.apply(Wa,M))}C=q}if(M=!1,C!==2)continue}}if(C===1){lu(d,0),nl(d,m,0,!0);break}e:{switch(w=d,M=C,M){case 0:case 1:throw Error(s(345));case 4:if((m&4194048)!==m)break;case 6:nl(w,m,Pn,!tl);break e;case 2:Wa=null;break;case 3:case 5:break;default:throw Error(s(329))}if((m&62914560)===m&&(C=Ev+300-$e(),10<C)){if(nl(w,m,Pn,!tl),At(w,0,!0)!==0)break e;w.timeoutHandle=JA(SA.bind(null,w,p,Wa,Lp,Cv,m,Pn,kc,nu,tl,M,2,-0,0),C);break e}SA(w,p,Wa,Lp,Cv,m,Pn,kc,nu,tl,M,0,-0,0)}}break}while(!0);wi(d)}function SA(d,m,p,w,C,M,q,K,ae,ye,Me,He,we,je){if(d.timeoutHandle=-1,He=m.subtreeFlags,(He&8192||(He&16785408)===16785408)&&(jm={stylesheets:null,count:0,unsuspend:A8},bA(m),He=E8(),He!==null)){d.cancelPendingCommit=He(RA.bind(null,d,m,M,p,w,C,q,K,ae,Me,1,we,je)),nl(d,M,q,!ye);return}RA(d,m,M,p,w,C,q,K,ae)}function YF(d){for(var m=d;;){var p=m.tag;if((p===0||p===11||p===15)&&m.flags&16384&&(p=m.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var w=0;w<p.length;w++){var C=p[w],M=C.getSnapshot;C=C.value;try{if(!nn(M(),C))return!1}catch{return!1}}if(p=m.child,m.subtreeFlags&16384&&p!==null)p.return=m,m=p;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function nl(d,m,p,w){m&=~Av,m&=~kc,d.suspendedLanes|=m,d.pingedLanes&=~m,w&&(d.warmLanes|=m),w=d.expirationTimes;for(var C=m;0<C;){var M=31-bt(C),q=1<<M;w[M]=-1,C&=~q}p!==0&&Ps(d,p,m)}function Fp(){return(Vs&6)===0?(xm(0),!1):!0}function Iv(){if(ns!==null){if(Bs===0)var d=ns.return;else d=ns,io=bc=null,Ky(d),eu=null,om=0,d=ns;for(;d!==null;)aA(d.alternate,d),d=d.return;ns=null}}function lu(d,m){var p=d.timeoutHandle;p!==-1&&(d.timeoutHandle=-1,d8(p)),p=d.cancelPendingCommit,p!==null&&(d.cancelPendingCommit=null,p()),Iv(),sr=d,ns=p=ro(d.current,null),fs=m,Bs=0,dn=null,tl=!1,au=Vt(d,m),_v=!1,nu=Pn=Av=kc=sl=xr=0,Wa=gm=null,Cv=!1,(m&8)!==0&&(m|=m&32);var w=d.entangledLanes;if(w!==0)for(d=d.entanglements,w&=m;0<w;){var C=31-bt(w),M=1<<C;m|=d[C],w&=~M}return go=m,ip(),p}function _A(d,m){Zt=null,H.H=Sp,m===Zh||m===gp?(m=HS(),Bs=3):m===zS?(m=HS(),Bs=4):Bs=m===$_?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,dn=m,ns===null&&(xr=1,Tp(d,_n(m,d.current)))}function AA(){var d=H.H;return H.H=Sp,d===null?Sp:d}function CA(){var d=H.A;return H.A=$F,d}function Dv(){xr=4,tl||(fs&4194048)!==fs&&Tn.current!==null||(au=!0),(sl&134217727)===0&&(kc&134217727)===0||sr===null||nl(sr,fs,Pn,!1)}function Mv(d,m,p){var w=Vs;Vs|=2;var C=AA(),M=CA();(sr!==d||fs!==m)&&(Lp=null,lu(d,m)),m=!1;var q=xr;e:do try{if(Bs!==0&&ns!==null){var K=ns,ae=dn;switch(Bs){case 8:Iv(),q=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(m=!0);var ye=Bs;if(Bs=0,dn=null,cu(d,K,ae,ye),p&&au){q=0;break e}break;default:ye=Bs,Bs=0,dn=null,cu(d,K,ae,ye)}}qF(),q=xr;break}catch(Me){_A(d,Me)}while(!0);return m&&d.shellSuspendCounter++,io=bc=null,Vs=w,H.H=C,H.A=M,ns===null&&(sr=null,fs=0,ip()),q}function qF(){for(;ns!==null;)EA(ns)}function XF(d,m){var p=Vs;Vs|=2;var w=AA(),C=CA();sr!==d||fs!==m?(Lp=null,Op=$e()+500,lu(d,m)):au=Vt(d,m);e:do try{if(Bs!==0&&ns!==null){m=ns;var M=dn;t:switch(Bs){case 1:Bs=0,dn=null,cu(d,m,M,1);break;case 2:case 9:if(VS(M)){Bs=0,dn=null,TA(m);break}m=function(){Bs!==2&&Bs!==9||sr!==d||(Bs=7),wi(d)},M.then(m,m);break e;case 3:Bs=7;break e;case 4:Bs=5;break e;case 7:VS(M)?(Bs=0,dn=null,TA(m)):(Bs=0,dn=null,cu(d,m,M,7));break;case 5:var q=null;switch(ns.tag){case 26:q=ns.memoizedState;case 5:case 27:var K=ns;if(!q||uC(q)){Bs=0,dn=null;var ae=K.sibling;if(ae!==null)ns=ae;else{var ye=K.return;ye!==null?(ns=ye,Up(ye)):ns=null}break t}}Bs=0,dn=null,cu(d,m,M,5);break;case 6:Bs=0,dn=null,cu(d,m,M,6);break;case 8:Iv(),xr=6;break e;default:throw Error(s(462))}}GF();break}catch(Me){_A(d,Me)}while(!0);return io=bc=null,H.H=w,H.A=C,Vs=p,ns!==null?0:(sr=null,fs=0,ip(),xr)}function GF(){for(;ns!==null&&!Qe();)EA(ns)}function EA(d){var m=sA(d.alternate,d,go);d.memoizedProps=d.pendingProps,m===null?Up(d):ns=m}function TA(d){var m=d,p=m.alternate;switch(m.tag){case 15:case 0:m=K_(p,m,m.pendingProps,m.type,void 0,fs);break;case 11:m=K_(p,m,m.pendingProps,m.type.render,m.ref,fs);break;case 5:Ky(m);default:aA(p,m),m=ns=PS(m,go),m=sA(p,m,go)}d.memoizedProps=d.pendingProps,m===null?Up(d):ns=m}function cu(d,m,p,w){io=bc=null,Ky(m),eu=null,om=0;var C=m.return;try{if(FF(d,C,m,p,fs)){xr=1,Tp(d,_n(p,d.current)),ns=null;return}}catch(M){if(C!==null)throw ns=C,M;xr=1,Tp(d,_n(p,d.current)),ns=null;return}m.flags&32768?(As||w===1?d=!0:au||(fs&536870912)!==0?d=!1:(tl=d=!0,(w===2||w===9||w===3||w===6)&&(w=Tn.current,w!==null&&w.tag===13&&(w.flags|=16384))),PA(m,d)):Up(m)}function Up(d){var m=d;do{if((m.flags&32768)!==0){PA(m,tl);return}d=m.return;var p=zF(m.alternate,m,go);if(p!==null){ns=p;return}if(m=m.sibling,m!==null){ns=m;return}ns=m=d}while(m!==null);xr===0&&(xr=5)}function PA(d,m){do{var p=VF(d.alternate,d);if(p!==null){p.flags&=32767,ns=p;return}if(p=d.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!m&&(d=d.sibling,d!==null)){ns=d;return}ns=d=p}while(d!==null);xr=6,ns=null}function RA(d,m,p,w,C,M,q,K,ae){d.cancelPendingCommit=null;do zp();while(ca!==0);if((Vs&6)!==0)throw Error(s(327));if(m!==null){if(m===d.current)throw Error(s(177));if(M=m.lanes|m.childLanes,M|=Sy,Us(d,p,M,q,K,ae),d===sr&&(ns=sr=null,fs=0),iu=m,al=d,ou=p,Tv=M,Pv=C,NA=w,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,JF(Xe,function(){return LA(),null})):(d.callbackNode=null,d.callbackPriority=0),w=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||w){w=H.T,H.T=null,C=$.p,$.p=2,q=Vs,Vs|=4;try{BF(d,m,p)}finally{Vs=q,$.p=C,H.T=w}}ca=1,IA(),DA(),MA()}}function IA(){if(ca===1){ca=0;var d=al,m=iu,p=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||p){p=H.T,H.T=null;var w=$.p;$.p=2;var C=Vs;Vs|=4;try{gA(m,d);var M=qv,q=wS(d.containerInfo),K=M.focusedElem,ae=M.selectionRange;if(q!==K&&K&&K.ownerDocument&&vS(K.ownerDocument.documentElement,K)){if(ae!==null&&vy(K)){var ye=ae.start,Me=ae.end;if(Me===void 0&&(Me=ye),"selectionStart"in K)K.selectionStart=ye,K.selectionEnd=Math.min(Me,K.value.length);else{var He=K.ownerDocument||document,we=He&&He.defaultView||window;if(we.getSelection){var je=we.getSelection(),Ot=K.textContent.length,Rt=Math.min(ae.start,Ot),Gs=ae.end===void 0?Rt:Math.min(ae.end,Ot);!je.extend&&Rt>Gs&&(q=Gs,Gs=Rt,Rt=q);var fe=yS(K,Rt),oe=yS(K,Gs);if(fe&&oe&&(je.rangeCount!==1||je.anchorNode!==fe.node||je.anchorOffset!==fe.offset||je.focusNode!==oe.node||je.focusOffset!==oe.offset)){var pe=He.createRange();pe.setStart(fe.node,fe.offset),je.removeAllRanges(),Rt>Gs?(je.addRange(pe),je.extend(oe.node,oe.offset)):(pe.setEnd(oe.node,oe.offset),je.addRange(pe))}}}}for(He=[],je=K;je=je.parentNode;)je.nodeType===1&&He.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<He.length;K++){var Le=He[K];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}Zp=!!Yv,qv=Yv=null}finally{Vs=C,$.p=w,H.T=p}}d.current=m,ca=2}}function DA(){if(ca===2){ca=0;var d=al,m=iu,p=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||p){p=H.T,H.T=null;var w=$.p;$.p=2;var C=Vs;Vs|=4;try{uA(d,m.alternate,m)}finally{Vs=C,$.p=w,H.T=p}}ca=3}}function MA(){if(ca===4||ca===3){ca=0,me();var d=al,m=iu,p=ou,w=NA;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?ca=5:(ca=0,iu=al=null,OA(d,d.pendingLanes));var C=d.pendingLanes;if(C===0&&(rl=null),ws(p),m=m.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(wt,m,void 0,(m.current.flags&128)===128)}catch{}if(w!==null){m=H.T,C=$.p,$.p=2,H.T=null;try{for(var M=d.onRecoverableError,q=0;q<w.length;q++){var K=w[q];M(K.value,{componentStack:K.stack})}}finally{H.T=m,$.p=C}}(ou&3)!==0&&zp(),wi(d),C=d.pendingLanes,(p&4194090)!==0&&(C&42)!==0?d===Rv?pm++:(pm=0,Rv=d):pm=0,xm(0)}}function OA(d,m){(d.pooledCacheLanes&=m)===0&&(m=d.pooledCache,m!=null&&(d.pooledCache=null,Kh(m)))}function zp(d){return IA(),DA(),MA(),LA()}function LA(){if(ca!==5)return!1;var d=al,m=Tv;Tv=0;var p=ws(ou),w=H.T,C=$.p;try{$.p=32>p?32:p,H.T=null,p=Pv,Pv=null;var M=al,q=ou;if(ca=0,iu=al=null,ou=0,(Vs&6)!==0)throw Error(s(331));var K=Vs;if(Vs|=4,vA(M.current),xA(M,M.current,q,p),Vs=K,xm(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(wt,M)}catch{}return!0}finally{$.p=C,H.T=w,OA(d,m)}}function FA(d,m,p){m=_n(p,m),m=dv(d.stateNode,m,2),d=Xo(d,m,2),d!==null&&(Ts(d,2),wi(d))}function er(d,m,p){if(d.tag===3)FA(d,d,p);else for(;m!==null;){if(m.tag===3){FA(m,d,p);break}else if(m.tag===1){var w=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(rl===null||!rl.has(w))){d=_n(p,d),p=B_(2),w=Xo(m,p,2),w!==null&&(H_(p,w,m,d),Ts(w,2),wi(w));break}}m=m.return}}function Ov(d,m,p){var w=d.pingCache;if(w===null){w=d.pingCache=new WF;var C=new Set;w.set(m,C)}else C=w.get(m),C===void 0&&(C=new Set,w.set(m,C));C.has(p)||(_v=!0,C.add(p),d=KF.bind(null,d,m,p),m.then(d,d))}function KF(d,m,p){var w=d.pingCache;w!==null&&w.delete(m),d.pingedLanes|=d.suspendedLanes&p,d.warmLanes&=~p,sr===d&&(fs&p)===p&&(xr===4||xr===3&&(fs&62914560)===fs&&300>$e()-Ev?(Vs&2)===0&&lu(d,0):Av|=p,nu===fs&&(nu=0)),wi(d)}function UA(d,m){m===0&&(m=nr()),d=$d(d,m),d!==null&&(Ts(d,m),wi(d))}function QF(d){var m=d.memoizedState,p=0;m!==null&&(p=m.retryLane),UA(d,p)}function ZF(d,m){var p=0;switch(d.tag){case 13:var w=d.stateNode,C=d.memoizedState;C!==null&&(p=C.retryLane);break;case 19:w=d.stateNode;break;case 22:w=d.stateNode._retryCache;break;default:throw Error(s(314))}w!==null&&w.delete(m),UA(d,p)}function JF(d,m){return ce(d,m)}var Vp=null,du=null,Lv=!1,Bp=!1,Fv=!1,Sc=0;function wi(d){d!==du&&d.next===null&&(du===null?Vp=du=d:du=du.next=d),Bp=!0,Lv||(Lv=!0,t8())}function xm(d,m){if(!Fv&&Bp){Fv=!0;do for(var p=!1,w=Vp;w!==null;){if(d!==0){var C=w.pendingLanes;if(C===0)var M=0;else{var q=w.suspendedLanes,K=w.pingedLanes;M=(1<<31-bt(42|d)+1)-1,M&=C&~(q&~K),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(p=!0,HA(w,M))}else M=fs,M=At(w,w===sr?M:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(M&3)===0||Vt(w,M)||(p=!0,HA(w,M));w=w.next}while(p);Fv=!1}}function e8(){zA()}function zA(){Bp=Lv=!1;var d=0;Sc!==0&&(c8()&&(d=Sc),Sc=0);for(var m=$e(),p=null,w=Vp;w!==null;){var C=w.next,M=VA(w,m);M===0?(w.next=null,p===null?Vp=C:p.next=C,C===null&&(du=p)):(p=w,(d!==0||(M&3)!==0)&&(Bp=!0)),w=C}xm(d)}function VA(d,m){for(var p=d.suspendedLanes,w=d.pingedLanes,C=d.expirationTimes,M=d.pendingLanes&-62914561;0<M;){var q=31-bt(M),K=1<<q,ae=C[q];ae===-1?((K&p)===0||(K&w)!==0)&&(C[q]=ar(K,m)):ae<=m&&(d.expiredLanes|=K),M&=~K}if(m=sr,p=fs,p=At(d,d===m?p:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),w=d.callbackNode,p===0||d===m&&(Bs===2||Bs===9)||d.cancelPendingCommit!==null)return w!==null&&w!==null&&ke(w),d.callbackNode=null,d.callbackPriority=0;if((p&3)===0||Vt(d,p)){if(m=p&-p,m===d.callbackPriority)return m;switch(w!==null&&ke(w),ws(p)){case 2:case 8:p=De;break;case 32:p=Xe;break;case 268435456:p=vt;break;default:p=Xe}return w=BA.bind(null,d),p=ce(p,w),d.callbackPriority=m,d.callbackNode=p,m}return w!==null&&w!==null&&ke(w),d.callbackPriority=2,d.callbackNode=null,2}function BA(d,m){if(ca!==0&&ca!==5)return d.callbackNode=null,d.callbackPriority=0,null;var p=d.callbackNode;if(zp()&&d.callbackNode!==p)return null;var w=fs;return w=At(d,d===sr?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),w===0?null:(kA(d,w,m),VA(d,$e()),d.callbackNode!=null&&d.callbackNode===p?BA.bind(null,d):null)}function HA(d,m){if(zp())return null;kA(d,m,!0)}function t8(){u8(function(){(Vs&6)!==0?ce(Ye,e8):zA()})}function Uv(){return Sc===0&&(Sc=Fs()),Sc}function $A(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Rd(""+d)}function WA(d,m){var p=m.ownerDocument.createElement("input");return p.name=m.name,p.value=m.value,d.id&&p.setAttribute("form",d.id),m.parentNode.insertBefore(p,m),d=new FormData(d),p.parentNode.removeChild(p),d}function s8(d,m,p,w,C){if(m==="submit"&&p&&p.stateNode===C){var M=$A((C[Je]||null).action),q=w.submitter;q&&(m=(m=q[Je]||null)?$A(m.formAction):q.getAttribute("formAction"),m!==null&&(M=m,q=null));var K=new Id("action","action",null,w,C);d.push({event:K,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Sc!==0){var ae=q?WA(C,q):new FormData(C);nv(p,{pending:!0,data:ae,method:C.method,action:M},null,ae)}}else typeof M=="function"&&(K.preventDefault(),ae=q?WA(C,q):new FormData(C),nv(p,{pending:!0,data:ae,method:C.method,action:M},M,ae))},currentTarget:C}]})}}for(var zv=0;zv<ky.length;zv++){var Vv=ky[zv],r8=Vv.toLowerCase(),a8=Vv[0].toUpperCase()+Vv.slice(1);Wn(r8,"on"+a8)}Wn(kS,"onAnimationEnd"),Wn(SS,"onAnimationIteration"),Wn(_S,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(wF,"onTransitionRun"),Wn(NF,"onTransitionStart"),Wn(jF,"onTransitionCancel"),Wn(AS,"onTransitionEnd"),rn("onMouseEnter",["mouseout","mouseover"]),rn("onMouseLeave",["mouseout","mouseover"]),rn("onPointerEnter",["pointerout","pointerover"]),rn("onPointerLeave",["pointerout","pointerover"]),Ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bm));function YA(d,m){m=(m&4)!==0;for(var p=0;p<d.length;p++){var w=d[p],C=w.event;w=w.listeners;e:{var M=void 0;if(m)for(var q=w.length-1;0<=q;q--){var K=w[q],ae=K.instance,ye=K.currentTarget;if(K=K.listener,ae!==M&&C.isPropagationStopped())break e;M=K,C.currentTarget=ye;try{M(C)}catch(Me){Ep(Me)}C.currentTarget=null,M=ae}else for(q=0;q<w.length;q++){if(K=w[q],ae=K.instance,ye=K.currentTarget,K=K.listener,ae!==M&&C.isPropagationStopped())break e;M=K,C.currentTarget=ye;try{M(C)}catch(Me){Ep(Me)}C.currentTarget=null,M=ae}}}}function is(d,m){var p=m[Ae];p===void 0&&(p=m[Ae]=new Set);var w=d+"__bubble";p.has(w)||(qA(m,d,2,!1),p.add(w))}function Bv(d,m,p){var w=0;m&&(w|=4),qA(p,d,w,m)}var Hp="_reactListening"+Math.random().toString(36).slice(2);function Hv(d){if(!d[Hp]){d[Hp]=!0,wn.forEach(function(p){p!=="selectionchange"&&(n8.has(p)||Bv(p,!1,d),Bv(p,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[Hp]||(m[Hp]=!0,Bv("selectionchange",!1,m))}}function qA(d,m,p,w){switch(xC(m)){case 2:var C=R8;break;case 8:C=I8;break;default:C=rw}p=C.bind(null,m,p,d),C=void 0,!kn||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(C=!0),w?C!==void 0?d.addEventListener(m,p,{capture:!0,passive:C}):d.addEventListener(m,p,!0):C!==void 0?d.addEventListener(m,p,{passive:C}):d.addEventListener(m,p,!1)}function $v(d,m,p,w,C){var M=w;if((m&1)===0&&(m&2)===0&&w!==null)e:for(;;){if(w===null)return;var q=w.tag;if(q===3||q===4){var K=w.stateNode.containerInfo;if(K===C)break;if(q===4)for(q=w.return;q!==null;){var ae=q.tag;if((ae===3||ae===4)&&q.stateNode.containerInfo===C)return;q=q.return}for(;K!==null;){if(q=Rr(K),q===null)return;if(ae=q.tag,ae===5||ae===6||ae===26||ae===27){w=M=q;continue e}K=K.parentNode}}w=w.return}Wg(function(){var ye=M,Me=jn(p),He=[];e:{var we=CS.get(d);if(we!==void 0){var je=Id,Ot=d;switch(d){case"keypress":if(hi(p)===0)break e;case"keydown":case"keyup":je=Ud;break;case"focusin":Ot="focus",je=Od;break;case"focusout":Ot="blur",je=Od;break;case"beforeblur":case"afterblur":je=Od;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=py;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=Jg;break;case kS:case SS:case _S:je=Ld;break;case AS:je=tp;break;case"scroll":case"scrollend":je=Yg;break;case"wheel":je=zd;break;case"copy":case"cut":case"paste":je=Fd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Bh;break;case"toggle":case"beforetoggle":je=rp}var Rt=(m&4)!==0,Gs=!Rt&&(d==="scroll"||d==="scrollend"),fe=Rt?we!==null?we+"Capture":null:we;Rt=[];for(var oe=ye,pe;oe!==null;){var Le=oe;if(pe=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||pe===null||fe===null||(Le=ac(oe,fe),Le!=null&&Rt.push(ym(oe,Le,pe))),Gs)break;oe=oe.return}0<Rt.length&&(we=new je(we,Ot,null,p,Me),He.push({event:we,listeners:Rt}))}}if((m&7)===0){e:{if(we=d==="mouseover"||d==="pointerover",je=d==="mouseout"||d==="pointerout",we&&p!==Qi&&(Ot=p.relatedTarget||p.fromElement)&&(Rr(Ot)||Ot[te]))break e;if((je||we)&&(we=Me.window===Me?Me:(we=Me.ownerDocument)?we.defaultView||we.parentWindow:window,je?(Ot=p.relatedTarget||p.toElement,je=ye,Ot=Ot?Rr(Ot):null,Ot!==null&&(Gs=i(Ot),Rt=Ot.tag,Ot!==Gs||Rt!==5&&Rt!==27&&Rt!==6)&&(Ot=null)):(je=null,Ot=ye),je!==Ot)){if(Rt=Sn,Le="onMouseLeave",fe="onMouseEnter",oe="mouse",(d==="pointerout"||d==="pointerover")&&(Rt=Bh,Le="onPointerLeave",fe="onPointerEnter",oe="pointer"),Gs=je==null?we:Ca(je),pe=Ot==null?we:Ca(Ot),we=new Rt(Le,oe+"leave",je,p,Me),we.target=Gs,we.relatedTarget=pe,Le=null,Rr(Me)===ye&&(Rt=new Rt(fe,oe+"enter",Ot,p,Me),Rt.target=pe,Rt.relatedTarget=Gs,Le=Rt),Gs=Le,je&&Ot)t:{for(Rt=je,fe=Ot,oe=0,pe=Rt;pe;pe=uu(pe))oe++;for(pe=0,Le=fe;Le;Le=uu(Le))pe++;for(;0<oe-pe;)Rt=uu(Rt),oe--;for(;0<pe-oe;)fe=uu(fe),pe--;for(;oe--;){if(Rt===fe||fe!==null&&Rt===fe.alternate)break t;Rt=uu(Rt),fe=uu(fe)}Rt=null}else Rt=null;je!==null&&XA(He,we,je,Rt,!1),Ot!==null&&Gs!==null&&XA(He,Gs,Ot,Rt,!0)}}e:{if(we=ye?Ca(ye):window,je=we.nodeName&&we.nodeName.toLowerCase(),je==="select"||je==="input"&&we.type==="file")var xt=mS;else if(Wr(we))if(fS)xt=bF;else{xt=pF;var rs=gF}else je=we.nodeName,!je||je.toLowerCase()!=="input"||we.type!=="checkbox"&&we.type!=="radio"?ye&&Mh(ye.elementType)&&(xt=mS):xt=xF;if(xt&&(xt=xt(d,ye))){so(He,xt,p,Me);break e}rs&&rs(d,we,ye),d==="focusout"&&ye&&we.type==="number"&&ye.memoizedProps.value!=null&&Ho(we,"number",we.value)}switch(rs=ye?Ca(ye):window,d){case"focusin":(Wr(rs)||rs.contentEditable==="true")&&(Vd=rs,wy=ye,Wh=null);break;case"focusout":Wh=wy=Vd=null;break;case"mousedown":Ny=!0;break;case"contextmenu":case"mouseup":case"dragend":Ny=!1,NS(He,p,Me);break;case"selectionchange":if(vF)break;case"keydown":case"keyup":NS(He,p,Me)}var Nt;if(gi)e:{switch(d){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else hs?Ce(d,p)&&(It="onCompositionEnd"):d==="keydown"&&p.keyCode===229&&(It="onCompositionStart");It&&(W&&p.locale!=="ko"&&(hs||It!=="onCompositionStart"?It==="onCompositionEnd"&&hs&&(Nt=Lh()):(ui=Me,$o="value"in ui?ui.value:ui.textContent,hs=!0)),rs=$p(ye,It),0<rs.length&&(It=new zh(It,d,null,p,Me),He.push({event:It,listeners:rs}),Nt?It.data=Nt:(Nt=nt(p),Nt!==null&&(It.data=Nt)))),(Nt=U?$r(d,p):ms(d,p))&&(It=$p(ye,"onBeforeInput"),0<It.length&&(rs=new zh("onBeforeInput","beforeinput",null,p,Me),He.push({event:rs,listeners:It}),rs.data=Nt)),s8(He,d,ye,p,Me)}YA(He,m)})}function ym(d,m,p){return{instance:d,listener:m,currentTarget:p}}function $p(d,m){for(var p=m+"Capture",w=[];d!==null;){var C=d,M=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||M===null||(C=ac(d,p),C!=null&&w.unshift(ym(d,C,M)),C=ac(d,m),C!=null&&w.push(ym(d,C,M))),d.tag===3)return w;d=d.return}return[]}function uu(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function XA(d,m,p,w,C){for(var M=m._reactName,q=[];p!==null&&p!==w;){var K=p,ae=K.alternate,ye=K.stateNode;if(K=K.tag,ae!==null&&ae===w)break;K!==5&&K!==26&&K!==27||ye===null||(ae=ye,C?(ye=ac(p,M),ye!=null&&q.unshift(ym(p,ye,ae))):C||(ye=ac(p,M),ye!=null&&q.push(ym(p,ye,ae)))),p=p.return}q.length!==0&&d.push({event:m,listeners:q})}var i8=/\r\n?/g,o8=/\u0000|\uFFFD/g;function GA(d){return(typeof d=="string"?d:""+d).replace(i8,`
`).replace(o8,"")}function KA(d,m){return m=GA(m),GA(d)===m}function Wp(){}function Xs(d,m,p,w,C,M){switch(p){case"children":typeof w=="string"?m==="body"||m==="textarea"&&w===""||Nn(d,w):(typeof w=="number"||typeof w=="bigint")&&m!=="body"&&Nn(d,""+w);break;case"className":ot(d,"class",w);break;case"tabIndex":ot(d,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":ot(d,p,w);break;case"style":Dh(d,w,M);break;case"data":if(m!=="object"){ot(d,"data",w);break}case"src":case"href":if(w===""&&(m!=="a"||p!=="href")){d.removeAttribute(p);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){d.removeAttribute(p);break}w=Rd(""+w),d.setAttribute(p,w);break;case"action":case"formAction":if(typeof w=="function"){d.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(p==="formAction"?(m!=="input"&&Xs(d,m,"name",C.name,C,null),Xs(d,m,"formEncType",C.formEncType,C,null),Xs(d,m,"formMethod",C.formMethod,C,null),Xs(d,m,"formTarget",C.formTarget,C,null)):(Xs(d,m,"encType",C.encType,C,null),Xs(d,m,"method",C.method,C,null),Xs(d,m,"target",C.target,C,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){d.removeAttribute(p);break}w=Rd(""+w),d.setAttribute(p,w);break;case"onClick":w!=null&&(d.onclick=Wp);break;case"onScroll":w!=null&&is("scroll",d);break;case"onScrollEnd":w!=null&&is("scrollend",d);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(s(61));if(p=w.__html,p!=null){if(C.children!=null)throw Error(s(60));d.innerHTML=p}}break;case"multiple":d.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":d.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){d.removeAttribute("xlink:href");break}p=Rd(""+w),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(p,""+w):d.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(p,""):d.removeAttribute(p);break;case"capture":case"download":w===!0?d.setAttribute(p,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?d.setAttribute(p,w):d.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?d.setAttribute(p,w):d.removeAttribute(p);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?d.removeAttribute(p):d.setAttribute(p,w);break;case"popover":is("beforetoggle",d),is("toggle",d),qe(d,"popover",w);break;case"xlinkActuate":mt(d,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":mt(d,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":mt(d,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":mt(d,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":mt(d,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":mt(d,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":mt(d,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":mt(d,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":mt(d,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":qe(d,"is",w);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=fy.get(p)||p,qe(d,p,w))}}function Wv(d,m,p,w,C,M){switch(p){case"style":Dh(d,w,M);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(s(61));if(p=w.__html,p!=null){if(C.children!=null)throw Error(s(60));d.innerHTML=p}}break;case"children":typeof w=="string"?Nn(d,w):(typeof w=="number"||typeof w=="bigint")&&Nn(d,""+w);break;case"onScroll":w!=null&&is("scroll",d);break;case"onScrollEnd":w!=null&&is("scrollend",d);break;case"onClick":w!=null&&(d.onclick=Wp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gi.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(C=p.endsWith("Capture"),m=p.slice(2,C?p.length-7:void 0),M=d[Je]||null,M=M!=null?M[p]:null,typeof M=="function"&&d.removeEventListener(m,M,C),typeof w=="function")){typeof M!="function"&&M!==null&&(p in d?d[p]=null:d.hasAttribute(p)&&d.removeAttribute(p)),d.addEventListener(m,w,C);break e}p in d?d[p]=w:w===!0?d.setAttribute(p,""):qe(d,p,w)}}}function da(d,m,p){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":is("error",d),is("load",d);var w=!1,C=!1,M;for(M in p)if(p.hasOwnProperty(M)){var q=p[M];if(q!=null)switch(M){case"src":w=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,m));default:Xs(d,m,M,q,p,null)}}C&&Xs(d,m,"srcSet",p.srcSet,p,null),w&&Xs(d,m,"src",p.src,p,null);return;case"input":is("invalid",d);var K=M=q=C=null,ae=null,ye=null;for(w in p)if(p.hasOwnProperty(w)){var Me=p[w];if(Me!=null)switch(w){case"name":C=Me;break;case"type":q=Me;break;case"checked":ae=Me;break;case"defaultChecked":ye=Me;break;case"value":M=Me;break;case"defaultValue":K=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(s(137,m));break;default:Xs(d,m,w,Me,p,null)}}tc(d,M,K,ae,ye,q,C,!1),Pd(d);return;case"select":is("invalid",d),w=q=M=null;for(C in p)if(p.hasOwnProperty(C)&&(K=p[C],K!=null))switch(C){case"value":M=K;break;case"defaultValue":q=K;break;case"multiple":w=K;default:Xs(d,m,C,K,p,null)}m=M,p=q,d.multiple=!!w,m!=null?Ki(d,!!w,m,!1):p!=null&&Ki(d,!!w,p,!0);return;case"textarea":is("invalid",d),M=C=w=null;for(q in p)if(p.hasOwnProperty(q)&&(K=p[q],K!=null))switch(q){case"value":w=K;break;case"defaultValue":C=K;break;case"children":M=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(91));break;default:Xs(d,m,q,K,p,null)}sc(d,w,C,M),Pd(d);return;case"option":for(ae in p)if(p.hasOwnProperty(ae)&&(w=p[ae],w!=null))switch(ae){case"selected":d.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Xs(d,m,ae,w,p,null)}return;case"dialog":is("beforetoggle",d),is("toggle",d),is("cancel",d),is("close",d);break;case"iframe":case"object":is("load",d);break;case"video":case"audio":for(w=0;w<bm.length;w++)is(bm[w],d);break;case"image":is("error",d),is("load",d);break;case"details":is("toggle",d);break;case"embed":case"source":case"link":is("error",d),is("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in p)if(p.hasOwnProperty(ye)&&(w=p[ye],w!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,m));default:Xs(d,m,ye,w,p,null)}return;default:if(Mh(m)){for(Me in p)p.hasOwnProperty(Me)&&(w=p[Me],w!==void 0&&Wv(d,m,Me,w,p,void 0));return}}for(K in p)p.hasOwnProperty(K)&&(w=p[K],w!=null&&Xs(d,m,K,w,p,null))}function l8(d,m,p,w){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,M=null,q=null,K=null,ae=null,ye=null,Me=null;for(je in p){var He=p[je];if(p.hasOwnProperty(je)&&He!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":ae=He;default:w.hasOwnProperty(je)||Xs(d,m,je,null,w,He)}}for(var we in w){var je=w[we];if(He=p[we],w.hasOwnProperty(we)&&(je!=null||He!=null))switch(we){case"type":M=je;break;case"name":C=je;break;case"checked":ye=je;break;case"defaultChecked":Me=je;break;case"value":q=je;break;case"defaultValue":K=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(s(137,m));break;default:je!==He&&Xs(d,m,we,je,w,He)}}an(d,q,K,ae,ye,Me,M,C);return;case"select":je=q=K=we=null;for(M in p)if(ae=p[M],p.hasOwnProperty(M)&&ae!=null)switch(M){case"value":break;case"multiple":je=ae;default:w.hasOwnProperty(M)||Xs(d,m,M,null,w,ae)}for(C in w)if(M=w[C],ae=p[C],w.hasOwnProperty(C)&&(M!=null||ae!=null))switch(C){case"value":we=M;break;case"defaultValue":K=M;break;case"multiple":q=M;default:M!==ae&&Xs(d,m,C,M,w,ae)}m=K,p=q,w=je,we!=null?Ki(d,!!p,we,!1):!!w!=!!p&&(m!=null?Ki(d,!!p,m,!0):Ki(d,!!p,p?[]:"",!1));return;case"textarea":je=we=null;for(K in p)if(C=p[K],p.hasOwnProperty(K)&&C!=null&&!w.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:Xs(d,m,K,null,w,C)}for(q in w)if(C=w[q],M=p[q],w.hasOwnProperty(q)&&(C!=null||M!=null))switch(q){case"value":we=C;break;case"defaultValue":je=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:C!==M&&Xs(d,m,q,C,w,M)}Ys(d,we,je);return;case"option":for(var Ot in p)if(we=p[Ot],p.hasOwnProperty(Ot)&&we!=null&&!w.hasOwnProperty(Ot))switch(Ot){case"selected":d.selected=!1;break;default:Xs(d,m,Ot,null,w,we)}for(ae in w)if(we=w[ae],je=p[ae],w.hasOwnProperty(ae)&&we!==je&&(we!=null||je!=null))switch(ae){case"selected":d.selected=we&&typeof we!="function"&&typeof we!="symbol";break;default:Xs(d,m,ae,we,w,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in p)we=p[Rt],p.hasOwnProperty(Rt)&&we!=null&&!w.hasOwnProperty(Rt)&&Xs(d,m,Rt,null,w,we);for(ye in w)if(we=w[ye],je=p[ye],w.hasOwnProperty(ye)&&we!==je&&(we!=null||je!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(137,m));break;default:Xs(d,m,ye,we,w,je)}return;default:if(Mh(m)){for(var Gs in p)we=p[Gs],p.hasOwnProperty(Gs)&&we!==void 0&&!w.hasOwnProperty(Gs)&&Wv(d,m,Gs,void 0,w,we);for(Me in w)we=w[Me],je=p[Me],!w.hasOwnProperty(Me)||we===je||we===void 0&&je===void 0||Wv(d,m,Me,we,w,je);return}}for(var fe in p)we=p[fe],p.hasOwnProperty(fe)&&we!=null&&!w.hasOwnProperty(fe)&&Xs(d,m,fe,null,w,we);for(He in w)we=w[He],je=p[He],!w.hasOwnProperty(He)||we===je||we==null&&je==null||Xs(d,m,He,we,w,je)}var Yv=null,qv=null;function Yp(d){return d.nodeType===9?d:d.ownerDocument}function QA(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ZA(d,m){if(d===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&m==="foreignObject"?0:d}function Xv(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Gv=null;function c8(){var d=window.event;return d&&d.type==="popstate"?d===Gv?!1:(Gv=d,!0):(Gv=null,!1)}var JA=typeof setTimeout=="function"?setTimeout:void 0,d8=typeof clearTimeout=="function"?clearTimeout:void 0,eC=typeof Promise=="function"?Promise:void 0,u8=typeof queueMicrotask=="function"?queueMicrotask:typeof eC<"u"?function(d){return eC.resolve(null).then(d).catch(h8)}:JA;function h8(d){setTimeout(function(){throw d})}function il(d){return d==="head"}function tC(d,m){var p=m,w=0,C=0;do{var M=p.nextSibling;if(d.removeChild(p),M&&M.nodeType===8)if(p=M.data,p==="/$"){if(0<w&&8>w){p=w;var q=d.ownerDocument;if(p&1&&vm(q.documentElement),p&2&&vm(q.body),p&4)for(p=q.head,vm(p),q=p.firstChild;q;){var K=q.nextSibling,ae=q.nodeName;q[Ht]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&q.rel.toLowerCase()==="stylesheet"||p.removeChild(q),q=K}}if(C===0){d.removeChild(M),Cm(m);return}C--}else p==="$"||p==="$?"||p==="$!"?C++:w=p.charCodeAt(0)-48;else w=0;p=M}while(p);Cm(m)}function Kv(d){var m=d.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var p=m;switch(m=m.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Kv(p),Qt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}d.removeChild(p)}}function m8(d,m,p,w){for(;d.nodeType===1;){var C=p;if(d.nodeName.toLowerCase()!==m.toLowerCase()){if(!w&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(w){if(!d[Ht])switch(m){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(M=d.getAttribute("rel"),M==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(M!==C.rel||d.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||d.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||d.getAttribute("title")!==(C.title==null?null:C.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(M=d.getAttribute("src"),(M!==(C.src==null?null:C.src)||d.getAttribute("type")!==(C.type==null?null:C.type)||d.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&M&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(m==="input"&&d.type==="hidden"){var M=C.name==null?null:""+C.name;if(C.type==="hidden"&&d.getAttribute("name")===M)return d}else return d;if(d=qn(d.nextSibling),d===null)break}return null}function f8(d,m,p){if(m==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!p||(d=qn(d.nextSibling),d===null))return null;return d}function Qv(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function g8(d,m){var p=d.ownerDocument;if(d.data!=="$?"||p.readyState==="complete")m();else{var w=function(){m(),p.removeEventListener("DOMContentLoaded",w)};p.addEventListener("DOMContentLoaded",w),d._reactRetry=w}}function qn(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return d}var Zv=null;function sC(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var p=d.data;if(p==="$"||p==="$!"||p==="$?"){if(m===0)return d;m--}else p==="/$"&&m++}d=d.previousSibling}return null}function rC(d,m,p){switch(m=Yp(p),d){case"html":if(d=m.documentElement,!d)throw Error(s(452));return d;case"head":if(d=m.head,!d)throw Error(s(453));return d;case"body":if(d=m.body,!d)throw Error(s(454));return d;default:throw Error(s(451))}}function vm(d){for(var m=d.attributes;m.length;)d.removeAttributeNode(m[0]);Qt(d)}var Rn=new Map,aC=new Set;function qp(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var po=$.d;$.d={f:p8,r:x8,D:b8,C:y8,L:v8,m:w8,X:j8,S:N8,M:k8};function p8(){var d=po.f(),m=Fp();return d||m}function x8(d){var m=Ba(d);m!==null&&m.tag===5&&m.type==="form"?k_(m):po.r(d)}var hu=typeof document>"u"?null:document;function nC(d,m,p){var w=hu;if(w&&typeof m=="string"&&m){var C=Ir(m);C='link[rel="'+d+'"][href="'+C+'"]',typeof p=="string"&&(C+='[crossorigin="'+p+'"]'),aC.has(C)||(aC.add(C),d={rel:d,crossOrigin:p,href:m},w.querySelector(C)===null&&(m=w.createElement("link"),da(m,"link",d),Ut(m),w.head.appendChild(m)))}}function b8(d){po.D(d),nC("dns-prefetch",d,null)}function y8(d,m){po.C(d,m),nC("preconnect",d,m)}function v8(d,m,p){po.L(d,m,p);var w=hu;if(w&&d&&m){var C='link[rel="preload"][as="'+Ir(m)+'"]';m==="image"&&p&&p.imageSrcSet?(C+='[imagesrcset="'+Ir(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(C+='[imagesizes="'+Ir(p.imageSizes)+'"]')):C+='[href="'+Ir(d)+'"]';var M=C;switch(m){case"style":M=mu(d);break;case"script":M=fu(d)}Rn.has(M)||(d=h({rel:"preload",href:m==="image"&&p&&p.imageSrcSet?void 0:d,as:m},p),Rn.set(M,d),w.querySelector(C)!==null||m==="style"&&w.querySelector(wm(M))||m==="script"&&w.querySelector(Nm(M))||(m=w.createElement("link"),da(m,"link",d),Ut(m),w.head.appendChild(m)))}}function w8(d,m){po.m(d,m);var p=hu;if(p&&d){var w=m&&typeof m.as=="string"?m.as:"script",C='link[rel="modulepreload"][as="'+Ir(w)+'"][href="'+Ir(d)+'"]',M=C;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=fu(d)}if(!Rn.has(M)&&(d=h({rel:"modulepreload",href:d},m),Rn.set(M,d),p.querySelector(C)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Nm(M)))return}w=p.createElement("link"),da(w,"link",d),Ut(w),p.head.appendChild(w)}}}function N8(d,m,p){po.S(d,m,p);var w=hu;if(w&&d){var C=Hr(w).hoistableStyles,M=mu(d);m=m||"default";var q=C.get(M);if(!q){var K={loading:0,preload:null};if(q=w.querySelector(wm(M)))K.loading=5;else{d=h({rel:"stylesheet",href:d,"data-precedence":m},p),(p=Rn.get(M))&&Jv(d,p);var ae=q=w.createElement("link");Ut(ae),da(ae,"link",d),ae._p=new Promise(function(ye,Me){ae.onload=ye,ae.onerror=Me}),ae.addEventListener("load",function(){K.loading|=1}),ae.addEventListener("error",function(){K.loading|=2}),K.loading|=4,Xp(q,m,w)}q={type:"stylesheet",instance:q,count:1,state:K},C.set(M,q)}}}function j8(d,m){po.X(d,m);var p=hu;if(p&&d){var w=Hr(p).hoistableScripts,C=fu(d),M=w.get(C);M||(M=p.querySelector(Nm(C)),M||(d=h({src:d,async:!0},m),(m=Rn.get(C))&&ew(d,m),M=p.createElement("script"),Ut(M),da(M,"link",d),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},w.set(C,M))}}function k8(d,m){po.M(d,m);var p=hu;if(p&&d){var w=Hr(p).hoistableScripts,C=fu(d),M=w.get(C);M||(M=p.querySelector(Nm(C)),M||(d=h({src:d,async:!0,type:"module"},m),(m=Rn.get(C))&&ew(d,m),M=p.createElement("script"),Ut(M),da(M,"link",d),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},w.set(C,M))}}function iC(d,m,p,w){var C=(C=ue.current)?qp(C):null;if(!C)throw Error(s(446));switch(d){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(m=mu(p.href),p=Hr(C).hoistableStyles,w=p.get(m),w||(w={type:"style",instance:null,count:0,state:null},p.set(m,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){d=mu(p.href);var M=Hr(C).hoistableStyles,q=M.get(d);if(q||(C=C.ownerDocument||C,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(d,q),(M=C.querySelector(wm(d)))&&!M._p&&(q.instance=M,q.state.loading=5),Rn.has(d)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Rn.set(d,p),M||S8(C,d,p,q.state))),m&&w===null)throw Error(s(528,""));return q}if(m&&w!==null)throw Error(s(529,""));return null;case"script":return m=p.async,p=p.src,typeof p=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=fu(p),p=Hr(C).hoistableScripts,w=p.get(m),w||(w={type:"script",instance:null,count:0,state:null},p.set(m,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,d))}}function mu(d){return'href="'+Ir(d)+'"'}function wm(d){return'link[rel="stylesheet"]['+d+"]"}function oC(d){return h({},d,{"data-precedence":d.precedence,precedence:null})}function S8(d,m,p,w){d.querySelector('link[rel="preload"][as="style"]['+m+"]")?w.loading=1:(m=d.createElement("link"),w.preload=m,m.addEventListener("load",function(){return w.loading|=1}),m.addEventListener("error",function(){return w.loading|=2}),da(m,"link",p),Ut(m),d.head.appendChild(m))}function fu(d){return'[src="'+Ir(d)+'"]'}function Nm(d){return"script[async]"+d}function lC(d,m,p){if(m.count++,m.instance===null)switch(m.type){case"style":var w=d.querySelector('style[data-href~="'+Ir(p.href)+'"]');if(w)return m.instance=w,Ut(w),w;var C=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return w=(d.ownerDocument||d).createElement("style"),Ut(w),da(w,"style",C),Xp(w,p.precedence,d),m.instance=w;case"stylesheet":C=mu(p.href);var M=d.querySelector(wm(C));if(M)return m.state.loading|=4,m.instance=M,Ut(M),M;w=oC(p),(C=Rn.get(C))&&Jv(w,C),M=(d.ownerDocument||d).createElement("link"),Ut(M);var q=M;return q._p=new Promise(function(K,ae){q.onload=K,q.onerror=ae}),da(M,"link",w),m.state.loading|=4,Xp(M,p.precedence,d),m.instance=M;case"script":return M=fu(p.src),(C=d.querySelector(Nm(M)))?(m.instance=C,Ut(C),C):(w=p,(C=Rn.get(M))&&(w=h({},p),ew(w,C)),d=d.ownerDocument||d,C=d.createElement("script"),Ut(C),da(C,"link",w),d.head.appendChild(C),m.instance=C);case"void":return null;default:throw Error(s(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(w=m.instance,m.state.loading|=4,Xp(w,p.precedence,d));return m.instance}function Xp(d,m,p){for(var w=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=w.length?w[w.length-1]:null,M=C,q=0;q<w.length;q++){var K=w[q];if(K.dataset.precedence===m)M=K;else if(M!==C)break}M?M.parentNode.insertBefore(d,M.nextSibling):(m=p.nodeType===9?p.head:p,m.insertBefore(d,m.firstChild))}function Jv(d,m){d.crossOrigin==null&&(d.crossOrigin=m.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=m.referrerPolicy),d.title==null&&(d.title=m.title)}function ew(d,m){d.crossOrigin==null&&(d.crossOrigin=m.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=m.referrerPolicy),d.integrity==null&&(d.integrity=m.integrity)}var Gp=null;function cC(d,m,p){if(Gp===null){var w=new Map,C=Gp=new Map;C.set(p,w)}else C=Gp,w=C.get(p),w||(w=new Map,C.set(p,w));if(w.has(d))return w;for(w.set(d,null),p=p.getElementsByTagName(d),C=0;C<p.length;C++){var M=p[C];if(!(M[Ht]||M[Se]||d==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var q=M.getAttribute(m)||"";q=d+q;var K=w.get(q);K?K.push(M):w.set(q,[M])}}return w}function dC(d,m,p){d=d.ownerDocument||d,d.head.insertBefore(p,m==="title"?d.querySelector("head > title"):null)}function _8(d,m,p){if(p===1||m.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return d=m.disabled,typeof m.precedence=="string"&&d==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function uC(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var jm=null;function A8(){}function C8(d,m,p){if(jm===null)throw Error(s(475));var w=jm;if(m.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var C=mu(p.href),M=d.querySelector(wm(C));if(M){d=M._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(w.count++,w=Kp.bind(w),d.then(w,w)),m.state.loading|=4,m.instance=M,Ut(M);return}M=d.ownerDocument||d,p=oC(p),(C=Rn.get(C))&&Jv(p,C),M=M.createElement("link"),Ut(M);var q=M;q._p=new Promise(function(K,ae){q.onload=K,q.onerror=ae}),da(M,"link",p),m.instance=M}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(m,d),(d=m.state.preload)&&(m.state.loading&3)===0&&(w.count++,m=Kp.bind(w),d.addEventListener("load",m),d.addEventListener("error",m))}}function E8(){if(jm===null)throw Error(s(475));var d=jm;return d.stylesheets&&d.count===0&&tw(d,d.stylesheets),0<d.count?function(m){var p=setTimeout(function(){if(d.stylesheets&&tw(d,d.stylesheets),d.unsuspend){var w=d.unsuspend;d.unsuspend=null,w()}},6e4);return d.unsuspend=m,function(){d.unsuspend=null,clearTimeout(p)}}:null}function Kp(){if(this.count--,this.count===0){if(this.stylesheets)tw(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var Qp=null;function tw(d,m){d.stylesheets=null,d.unsuspend!==null&&(d.count++,Qp=new Map,m.forEach(T8,d),Qp=null,Kp.call(d))}function T8(d,m){if(!(m.state.loading&4)){var p=Qp.get(d);if(p)var w=p.get(null);else{p=new Map,Qp.set(d,p);for(var C=d.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<C.length;M++){var q=C[M];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(p.set(q.dataset.precedence,q),w=q)}w&&p.set(null,w)}C=m.instance,q=C.getAttribute("data-precedence"),M=p.get(q)||w,M===w&&p.set(null,C),p.set(q,C),this.count++,w=Kp.bind(this),C.addEventListener("load",w),C.addEventListener("error",w),M?M.parentNode.insertBefore(C,M.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(C,d.firstChild)),m.state.loading|=4}}var km={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function P8(d,m,p,w,C,M,q,K){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ss(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ss(0),this.hiddenUpdates=Ss(null),this.identifierPrefix=w,this.onUncaughtError=C,this.onCaughtError=M,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function hC(d,m,p,w,C,M,q,K,ae,ye,Me,He){return d=new P8(d,m,p,q,K,ae,ye,He),m=1,M===!0&&(m|=24),M=on(3,null,null,m),d.current=M,M.stateNode=d,m=Oy(),m.refCount++,d.pooledCache=m,m.refCount++,M.memoizedState={element:w,isDehydrated:p,cache:m},zy(M),d}function mC(d){return d?(d=Wd,d):Wd}function fC(d,m,p,w,C,M){C=mC(C),w.context===null?w.context=C:w.pendingContext=C,w=qo(m),w.payload={element:p},M=M===void 0?null:M,M!==null&&(w.callback=M),p=Xo(d,w,m),p!==null&&(hn(p,d,m),em(p,d,m))}function gC(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var p=d.retryLane;d.retryLane=p!==0&&p<m?p:m}}function sw(d,m){gC(d,m),(d=d.alternate)&&gC(d,m)}function pC(d){if(d.tag===13){var m=$d(d,67108864);m!==null&&hn(m,d,67108864),sw(d,67108864)}}var Zp=!0;function R8(d,m,p,w){var C=H.T;H.T=null;var M=$.p;try{$.p=2,rw(d,m,p,w)}finally{$.p=M,H.T=C}}function I8(d,m,p,w){var C=H.T;H.T=null;var M=$.p;try{$.p=8,rw(d,m,p,w)}finally{$.p=M,H.T=C}}function rw(d,m,p,w){if(Zp){var C=aw(w);if(C===null)$v(d,m,w,Jp,p),bC(d,w);else if(M8(C,d,m,p,w))w.stopPropagation();else if(bC(d,w),m&4&&-1<D8.indexOf(d)){for(;C!==null;){var M=Ba(C);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var q=Js(M.pendingLanes);if(q!==0){var K=M;for(K.pendingLanes|=2,K.entangledLanes|=2;q;){var ae=1<<31-bt(q);K.entanglements[1]|=ae,q&=~ae}wi(M),(Vs&6)===0&&(Op=$e()+500,xm(0))}}break;case 13:K=$d(M,2),K!==null&&hn(K,M,2),Fp(),sw(M,2)}if(M=aw(w),M===null&&$v(d,m,w,Jp,p),M===C)break;C=M}C!==null&&w.stopPropagation()}else $v(d,m,w,null,p)}}function aw(d){return d=jn(d),nw(d)}var Jp=null;function nw(d){if(Jp=null,d=Rr(d),d!==null){var m=i(d);if(m===null)d=null;else{var p=m.tag;if(p===13){if(d=o(m),d!==null)return d;d=null}else if(p===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null)}}return Jp=d,null}function xC(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tt()){case Ye:return 2;case De:return 8;case Xe:case st:return 32;case vt:return 268435456;default:return 32}default:return 32}}var iw=!1,ol=null,ll=null,cl=null,Sm=new Map,_m=new Map,dl=[],D8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bC(d,m){switch(d){case"focusin":case"focusout":ol=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":Sm.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":_m.delete(m.pointerId)}}function Am(d,m,p,w,C,M){return d===null||d.nativeEvent!==M?(d={blockedOn:m,domEventName:p,eventSystemFlags:w,nativeEvent:M,targetContainers:[C]},m!==null&&(m=Ba(m),m!==null&&pC(m)),d):(d.eventSystemFlags|=w,m=d.targetContainers,C!==null&&m.indexOf(C)===-1&&m.push(C),d)}function M8(d,m,p,w,C){switch(m){case"focusin":return ol=Am(ol,d,m,p,w,C),!0;case"dragenter":return ll=Am(ll,d,m,p,w,C),!0;case"mouseover":return cl=Am(cl,d,m,p,w,C),!0;case"pointerover":var M=C.pointerId;return Sm.set(M,Am(Sm.get(M)||null,d,m,p,w,C)),!0;case"gotpointercapture":return M=C.pointerId,_m.set(M,Am(_m.get(M)||null,d,m,p,w,C)),!0}return!1}function yC(d){var m=Rr(d.target);if(m!==null){var p=i(m);if(p!==null){if(m=p.tag,m===13){if(m=o(p),m!==null){d.blockedOn=m,be(d.priority,function(){if(p.tag===13){var w=un();w=vs(w);var C=$d(p,w);C!==null&&hn(C,p,w),sw(p,w)}});return}}else if(m===3&&p.stateNode.current.memoizedState.isDehydrated){d.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}d.blockedOn=null}function ex(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var p=aw(d.nativeEvent);if(p===null){p=d.nativeEvent;var w=new p.constructor(p.type,p);Qi=w,p.target.dispatchEvent(w),Qi=null}else return m=Ba(p),m!==null&&pC(m),d.blockedOn=p,!1;m.shift()}return!0}function vC(d,m,p){ex(d)&&p.delete(m)}function O8(){iw=!1,ol!==null&&ex(ol)&&(ol=null),ll!==null&&ex(ll)&&(ll=null),cl!==null&&ex(cl)&&(cl=null),Sm.forEach(vC),_m.forEach(vC)}function tx(d,m){d.blockedOn===m&&(d.blockedOn=null,iw||(iw=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,O8)))}var sx=null;function wC(d){sx!==d&&(sx=d,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sx===d&&(sx=null);for(var m=0;m<d.length;m+=3){var p=d[m],w=d[m+1],C=d[m+2];if(typeof w!="function"){if(nw(w||p)===null)continue;break}var M=Ba(p);M!==null&&(d.splice(m,3),m-=3,nv(M,{pending:!0,data:C,method:p.method,action:w},w,C))}}))}function Cm(d){function m(ae){return tx(ae,d)}ol!==null&&tx(ol,d),ll!==null&&tx(ll,d),cl!==null&&tx(cl,d),Sm.forEach(m),_m.forEach(m);for(var p=0;p<dl.length;p++){var w=dl[p];w.blockedOn===d&&(w.blockedOn=null)}for(;0<dl.length&&(p=dl[0],p.blockedOn===null);)yC(p),p.blockedOn===null&&dl.shift();if(p=(d.ownerDocument||d).$$reactFormReplay,p!=null)for(w=0;w<p.length;w+=3){var C=p[w],M=p[w+1],q=C[Je]||null;if(typeof M=="function")q||wC(p);else if(q){var K=null;if(M&&M.hasAttribute("formAction")){if(C=M,q=M[Je]||null)K=q.formAction;else if(nw(C)!==null)continue}else K=q.action;typeof K=="function"?p[w+1]=K:(p.splice(w,3),w-=3),wC(p)}}}function ow(d){this._internalRoot=d}rx.prototype.render=ow.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(s(409));var p=m.current,w=un();fC(p,w,d,m,null,null)},rx.prototype.unmount=ow.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;fC(d.current,2,null,d,null,null),Fp(),m[te]=null}};function rx(d){this._internalRoot=d}rx.prototype.unstable_scheduleHydration=function(d){if(d){var m=Ws();d={blockedOn:null,target:d,priority:m};for(var p=0;p<dl.length&&m!==0&&m<dl[p].priority;p++);dl.splice(p,0,d),p===0&&yC(d)}};var NC=e.version;if(NC!=="19.1.1")throw Error(s(527,NC,"19.1.1"));$.findDOMNode=function(d){var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(s(188)):(d=Object.keys(d).join(","),Error(s(268,d)));return d=c(m),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var L8={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ax=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ax.isDisabled&&ax.supportsFiber)try{wt=ax.inject(L8),Ge=ax}catch{}}return Tm.createRoot=function(d,m){if(!a(d))throw Error(s(299));var p=!1,w="",C=F_,M=U_,q=z_,K=null;return m!=null&&(m.unstable_strictMode===!0&&(p=!0),m.identifierPrefix!==void 0&&(w=m.identifierPrefix),m.onUncaughtError!==void 0&&(C=m.onUncaughtError),m.onCaughtError!==void 0&&(M=m.onCaughtError),m.onRecoverableError!==void 0&&(q=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(K=m.unstable_transitionCallbacks)),m=hC(d,1,!1,null,null,p,w,C,M,q,K,null),d[te]=m.current,Hv(d),new ow(m)},Tm.hydrateRoot=function(d,m,p){if(!a(d))throw Error(s(299));var w=!1,C="",M=F_,q=U_,K=z_,ae=null,ye=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onUncaughtError!==void 0&&(M=p.onUncaughtError),p.onCaughtError!==void 0&&(q=p.onCaughtError),p.onRecoverableError!==void 0&&(K=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ae=p.unstable_transitionCallbacks),p.formState!==void 0&&(ye=p.formState)),m=hC(d,1,!0,m,p??null,w,C,M,q,K,ae,ye),m.context=mC(null),p=m.current,w=un(),w=vs(w),C=qo(w),C.callback=null,Xo(p,C,w),p=w,m.current.lanes=p,Ts(m,p),wi(m),d[te]=m.current,Hv(d),new rx(m)},Tm.version="19.1.1",Tm}var RC;function X8(){if(RC)return dw.exports;RC=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dw.exports=q8(),dw.exports}var G8=X8();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var IC="popstate";function K8(r={}){function e(s,a){let{pathname:i,search:o,hash:l}=s.location;return D1("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:Cf(a)}return Z8(e,t,null,r)}function fr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function $i(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q8(){return Math.random().toString(36).substring(2,10)}function DC(r,e){return{usr:r.state,key:r.key,idx:e}}function D1(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?oh(e):e,state:t,key:e&&e.key||s||Q8()}}function Cf({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function oh(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function Z8(r,e,t,s={}){let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l="POP",c=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function f(){l="POP";let v=h(),N=v==null?null:v-u;u=v,c&&c({action:l,location:b.location,delta:N})}function g(v,N){l="PUSH";let k=D1(b.location,v,N);u=h()+1;let A=DC(k,u),R=b.createHref(k);try{o.pushState(A,"",R)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(R)}i&&c&&c({action:l,location:b.location,delta:1})}function x(v,N){l="REPLACE";let k=D1(b.location,v,N);u=h();let A=DC(k,u),R=b.createHref(k);o.replaceState(A,"",R),i&&c&&c({action:l,location:b.location,delta:0})}function y(v){return J8(v)}let b={get action(){return l},get location(){return r(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(IC,f),c=v,()=>{a.removeEventListener(IC,f),c=null}},createHref(v){return e(a,v)},createURL:y,encodeLocation(v){let N=y(v);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:g,replace:x,go(v){return o.go(v)}};return b}function J8(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),fr(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Cf(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function k4(r,e,t="/"){return eU(r,e,t,!1)}function eU(r,e,t,s){let a=typeof e=="string"?oh(e):e,i=Eo(a.pathname||"/",t);if(i==null)return null;let o=S4(r);tU(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=hU(i);l=dU(o[c],u,s)}return l}function S4(r,e=[],t=[],s=""){let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(fr(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let u=Ao([s,c.relativePath]),h=t.concat(c);i.children&&i.children.length>0&&(fr(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),S4(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:lU(u,i.index),routesMeta:h})};return r.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))a(i,o);else for(let l of _4(i.path))a(i,o,l)}),e}function _4(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=_4(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>r.startsWith("/")&&c===""?"/":c)}function tU(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:cU(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var sU=/^:[\w-]+$/,rU=3,aU=2,nU=1,iU=10,oU=-2,MC=r=>r==="*";function lU(r,e){let t=r.split("/"),s=t.length;return t.some(MC)&&(s+=oU),e&&(s+=aU),t.filter(a=>!MC(a)).reduce((a,i)=>a+(sU.test(i)?rU:i===""?nU:iU),s)}function cU(r,e){return r.length===e.length&&r.slice(0,-1).every((s,a)=>s===e[a])?r[r.length-1]-e[e.length-1]:0}function dU(r,e,t=!1){let{routesMeta:s}=r,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=v0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),g=c.route;if(!f&&u&&t&&!s[s.length-1].route.index&&(f=v0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Ao([i,f.pathname]),pathnameBase:pU(Ao([i,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(i=Ao([i,f.pathnameBase]))}return o}function v0(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=uU(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((u,{paramName:h,isOptional:f},g)=>{if(h==="*"){let y=l[g]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[g];return f&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:r}}function uU(r,e=!1,t=!0){$i(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function hU(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $i(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Eo(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function mU(r,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof r=="string"?oh(r):r;return{pathname:t?t.startsWith("/")?t:fU(t,e):e,search:xU(s),hash:bU(a)}}function fU(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function fw(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gU(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function A4(r){let e=gU(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function C4(r,e,t,s=!1){let a;typeof r=="string"?a=oh(r):(a={...r},fr(!a.pathname||!a.pathname.includes("?"),fw("?","pathname","search",a)),fr(!a.pathname||!a.pathname.includes("#"),fw("#","pathname","hash",a)),fr(!a.search||!a.search.includes("#"),fw("#","search","hash",a)));let i=r===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=t;else{let f=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;a.pathname=g.join("/")}l=f>=0?e[f]:"/"}let c=mU(a,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var Ao=r=>r.join("/").replace(/\/\/+/g,"/"),pU=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),xU=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,bU=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function yU(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var E4=["POST","PUT","PATCH","DELETE"];new Set(E4);var vU=["GET",...E4];new Set(vU);var lh=E.createContext(null);lh.displayName="DataRouter";var gb=E.createContext(null);gb.displayName="DataRouterState";E.createContext(!1);var T4=E.createContext({isTransitioning:!1});T4.displayName="ViewTransition";var wU=E.createContext(new Map);wU.displayName="Fetchers";var NU=E.createContext(null);NU.displayName="Await";var Yi=E.createContext(null);Yi.displayName="Navigation";var lg=E.createContext(null);lg.displayName="Location";var qi=E.createContext({outlet:null,matches:[],isDataRoute:!1});qi.displayName="Route";var bj=E.createContext(null);bj.displayName="RouteError";function jU(r,{relative:e}={}){fr(cg(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=E.useContext(Yi),{hash:a,pathname:i,search:o}=dg(r,{relative:e}),l=i;return t!=="/"&&(l=i==="/"?t:Ao([t,i])),s.createHref({pathname:l,search:o,hash:a})}function cg(){return E.useContext(lg)!=null}function Br(){return fr(cg(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(lg).location}var P4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function R4(r){E.useContext(Yi).static||E.useLayoutEffect(r)}function us(){let{isDataRoute:r}=E.useContext(qi);return r?OU():kU()}function kU(){fr(cg(),"useNavigate() may be used only in the context of a <Router> component.");let r=E.useContext(lh),{basename:e,navigator:t}=E.useContext(Yi),{matches:s}=E.useContext(qi),{pathname:a}=Br(),i=JSON.stringify(A4(s)),o=E.useRef(!1);return R4(()=>{o.current=!0}),E.useCallback((c,u={})=>{if($i(o.current,P4),!o.current)return;if(typeof c=="number"){t.go(c);return}let h=C4(c,JSON.parse(i),a,u.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ao([e,h.pathname])),(u.replace?t.replace:t.push)(h,u.state,u)},[e,t,i,a,r])}E.createContext(null);function Lo(){let{matches:r}=E.useContext(qi),e=r[r.length-1];return e?e.params:{}}function dg(r,{relative:e}={}){let{matches:t}=E.useContext(qi),{pathname:s}=Br(),a=JSON.stringify(A4(t));return E.useMemo(()=>C4(r,JSON.parse(a),s,e==="path"),[r,a,s,e])}function SU(r,e){return I4(r,e)}function I4(r,e,t,s){fr(cg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=E.useContext(Yi),{matches:i}=E.useContext(qi),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let N=h&&h.path||"";D4(c,!h||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let f=Br(),g;if(e){let N=typeof e=="string"?oh(e):e;fr(u==="/"||N.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${N.pathname}" was given in the \`location\` prop.`),g=N}else g=f;let x=g.pathname||"/",y=x;if(u!=="/"){let N=u.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=k4(r,{pathname:y});$i(h||b!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),$i(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=TU(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:Ao([u,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Ao([u,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,t,s);return e&&v?E.createElement(lg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},v):v}function _U(){let r=MU(),e=yU(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",r),o=E.createElement(E.Fragment,null,E.createElement("p",null,"💿 Hey developer 👋"),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:i},"ErrorBoundary")," or"," ",E.createElement("code",{style:i},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:a},t):null,o)}var AU=E.createElement(_U,null),CU=class extends E.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?E.createElement(qi.Provider,{value:this.props.routeContext},E.createElement(bj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function EU({routeContext:r,match:e,children:t}){let s=E.useContext(lh);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(qi.Provider,{value:r},t)}function TU(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,i=t?.errors;if(i!=null){let c=a.findIndex(u=>u.route.id&&i?.[u.route.id]!==void 0);fr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(t)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:f}=t,g=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||g){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,h)=>{let f,g=!1,x=null,y=null;t&&(f=i&&u.route.id?i[u.route.id]:void 0,x=u.route.errorElement||AU,o&&(l<0&&h===0?(D4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,y=null):l===h&&(g=!0,y=u.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,h+1)),v=()=>{let N;return f?N=x:g?N=y:u.route.Component?N=E.createElement(u.route.Component,null):u.route.element?N=u.route.element:N=c,E.createElement(EU,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:t!=null},children:N})};return t&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?E.createElement(CU,{location:t.location,revalidation:t.revalidation,component:x,error:f,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}function yj(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PU(r){let e=E.useContext(lh);return fr(e,yj(r)),e}function RU(r){let e=E.useContext(gb);return fr(e,yj(r)),e}function IU(r){let e=E.useContext(qi);return fr(e,yj(r)),e}function vj(r){let e=IU(r),t=e.matches[e.matches.length-1];return fr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function DU(){return vj("useRouteId")}function MU(){let r=E.useContext(bj),e=RU("useRouteError"),t=vj("useRouteError");return r!==void 0?r:e.errors?.[t]}function OU(){let{router:r}=PU("useNavigate"),e=vj("useNavigate"),t=E.useRef(!1);return R4(()=>{t.current=!0}),E.useCallback(async(a,i={})=>{$i(t.current,P4),t.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...i}))},[r,e])}var OC={};function D4(r,e,t){!e&&!OC[r]&&(OC[r]=!0,$i(!1,t))}E.memo(LU);function LU({routes:r,future:e,state:t}){return I4(r,void 0,t,e)}function at(r){fr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FU({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:i=!1}){fr(!cg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),l=E.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof t=="string"&&(t=oh(t));let{pathname:c="/",search:u="",hash:h="",state:f=null,key:g="default"}=t,x=E.useMemo(()=>{let y=Eo(c,o);return y==null?null:{location:{pathname:y,search:u,hash:h,state:f,key:g},navigationType:s}},[o,c,u,h,f,g,s]);return $i(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:E.createElement(Yi.Provider,{value:l},E.createElement(lg.Provider,{children:e,value:x}))}function UU({children:r,location:e}){return SU(M1(r),e)}function M1(r,e=[]){let t=[];return E.Children.forEach(r,(s,a)=>{if(!E.isValidElement(s))return;let i=[...e,a];if(s.type===E.Fragment){t.push.apply(t,M1(s.props.children,i));return}fr(s.type===at,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fr(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=M1(s.props.children,i)),t.push(o)}),t}var $x="get",Wx="application/x-www-form-urlencoded";function pb(r){return r!=null&&typeof r.tagName=="string"}function zU(r){return pb(r)&&r.tagName.toLowerCase()==="button"}function VU(r){return pb(r)&&r.tagName.toLowerCase()==="form"}function BU(r){return pb(r)&&r.tagName.toLowerCase()==="input"}function HU(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function $U(r,e){return r.button===0&&(!e||e==="_self")&&!HU(r)}var ix=null;function WU(){if(ix===null)try{new FormData(document.createElement("form"),0),ix=!1}catch{ix=!0}return ix}var YU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gw(r){return r!=null&&!YU.has(r)?($i(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wx}"`),null):r}function qU(r,e){let t,s,a,i,o;if(VU(r)){let l=r.getAttribute("action");s=l?Eo(l,e):null,t=r.getAttribute("method")||$x,a=gw(r.getAttribute("enctype"))||Wx,i=new FormData(r)}else if(zU(r)||BU(r)&&(r.type==="submit"||r.type==="image")){let l=r.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||l.getAttribute("action");if(s=c?Eo(c,e):null,t=r.getAttribute("formmethod")||l.getAttribute("method")||$x,a=gw(r.getAttribute("formenctype"))||gw(l.getAttribute("enctype"))||Wx,i=new FormData(l,r),!WU()){let{name:u,type:h,value:f}=r;if(h==="image"){let g=u?`${u}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else u&&i.append(u,f)}}else{if(pb(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=$x,s=null,a=Wx,o=r}return i&&a==="text/plain"&&(o=i,i=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wj(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function XU(r,e,t){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Eo(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function GU(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KU(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function QU(r,e,t){let s=await Promise.all(r.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await GU(i,t);return o.links?o.links():[]}return[]}));return tz(s.flat(1).filter(KU).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function LC(r,e,t,s,a,i){let o=(c,u)=>t[u]?c.route.id!==t[u].route.id:!0,l=(c,u)=>t[u].pathname!==c.pathname||t[u].route.path?.endsWith("*")&&t[u].params["*"]!==c.params["*"];return i==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?e.filter((c,u)=>{let h=s.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function ZU(r,e,{includeHydrateFallback:t}={}){return JU(r.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function JU(r){return[...new Set(r)]}function ez(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function tz(r,e){let t=new Set;return new Set(e),r.reduce((s,a)=>{let i=JSON.stringify(ez(a));return t.has(i)||(t.add(i),s.push({key:i,link:a})),s},[])}function M4(){let r=E.useContext(lh);return wj(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function sz(){let r=E.useContext(gb);return wj(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Nj=E.createContext(void 0);Nj.displayName="FrameworkContext";function O4(){let r=E.useContext(Nj);return wj(r,"You must render this element inside a <HydratedRouter> element"),r}function rz(r,e){let t=E.useContext(Nj),[s,a]=E.useState(!1),[i,o]=E.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:f}=e,g=E.useRef(null);E.useEffect(()=>{if(r==="render"&&o(!0),r==="viewport"){let b=N=>{N.forEach(k=>{o(k.isIntersecting)})},v=new IntersectionObserver(b,{threshold:.5});return g.current&&v.observe(g.current),()=>{v.disconnect()}}},[r]),E.useEffect(()=>{if(s){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[s]);let x=()=>{a(!0)},y=()=>{a(!1),o(!1)};return t?r!=="intent"?[i,g,{}]:[i,g,{onFocus:Pm(l,x),onBlur:Pm(c,y),onMouseEnter:Pm(u,x),onMouseLeave:Pm(h,y),onTouchStart:Pm(f,x)}]:[!1,g,{}]}function Pm(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function az({page:r,...e}){let{router:t}=M4(),s=E.useMemo(()=>k4(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?E.createElement(iz,{page:r,matches:s,...e}):null}function nz(r){let{manifest:e,routeModules:t}=O4(),[s,a]=E.useState([]);return E.useEffect(()=>{let i=!1;return QU(r,e,t).then(o=>{i||a(o)}),()=>{i=!0}},[r,e,t]),s}function iz({page:r,matches:e,...t}){let s=Br(),{manifest:a,routeModules:i}=O4(),{basename:o}=M4(),{loaderData:l,matches:c}=sz(),u=E.useMemo(()=>LC(r,e,c,a,s,"data"),[r,e,c,a,s]),h=E.useMemo(()=>LC(r,e,c,a,s,"assets"),[r,e,c,a,s]),f=E.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let y=new Set,b=!1;if(e.forEach(N=>{let k=a.routes[N.route.id];!k||!k.hasLoader||(!u.some(A=>A.route.id===N.route.id)&&N.route.id in l&&i[N.route.id]?.shouldRevalidate||k.hasClientLoader?b=!0:y.add(N.route.id))}),y.size===0)return[];let v=XU(r,o,"data");return b&&y.size>0&&v.searchParams.set("_routes",e.filter(N=>y.has(N.route.id)).map(N=>N.route.id).join(",")),[v.pathname+v.search]},[o,l,s,a,u,e,r,i]),g=E.useMemo(()=>ZU(h,a),[h,a]),x=nz(h);return E.createElement(E.Fragment,null,f.map(y=>E.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),g.map(y=>E.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),x.map(({key:y,link:b})=>E.createElement("link",{key:y,...b})))}function oz(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var L4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{L4&&(window.__reactRouterVersion="7.7.1")}catch{}function lz({basename:r,children:e,window:t}){let s=E.useRef();s.current==null&&(s.current=K8({window:t,v5Compat:!0}));let a=s.current,[i,o]=E.useState({action:a.action,location:a.location}),l=E.useCallback(c=>{E.startTransition(()=>o(c))},[o]);return E.useLayoutEffect(()=>a.listen(l),[a,l]),E.createElement(FU,{basename:r,children:e,location:i.location,navigationType:i.action,navigator:a})}var F4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,he=E.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f,...g},x){let{basename:y}=E.useContext(Yi),b=typeof u=="string"&&F4.test(u),v,N=!1;if(typeof u=="string"&&b&&(v=u,L4))try{let D=new URL(window.location.href),L=u.startsWith("//")?new URL(D.protocol+u):new URL(u),F=Eo(L.pathname,y);L.origin===D.origin&&F!=null?u=F+L.search+L.hash:N=!0}catch{$i(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=jU(u,{relative:a}),[A,R,_]=rz(s,g),I=hz(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:a,viewTransition:f});function P(D){e&&e(D),D.defaultPrevented||I(D)}let T=E.createElement("a",{...g,..._,href:v||k,onClick:N||i?e:P,ref:oz(x,R),target:c,"data-discover":!b&&t==="render"?"true":void 0});return A&&!b?E.createElement(E.Fragment,null,T,E.createElement(az,{page:k})):T});he.displayName="Link";var cz=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...u},h){let f=dg(o,{relative:u.relative}),g=Br(),x=E.useContext(gb),{navigator:y,basename:b}=E.useContext(Yi),v=x!=null&&xz(f)&&l===!0,N=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,k=g.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(k=k.toLowerCase(),A=A?A.toLowerCase():null,N=N.toLowerCase()),A&&b&&(A=Eo(A,b)||A);const R=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let _=k===N||!a&&k.startsWith(N)&&k.charAt(R)==="/",I=A!=null&&(A===N||!a&&A.startsWith(N)&&A.charAt(N.length)==="/"),P={isActive:_,isPending:I,isTransitioning:v},T=_?e:void 0,D;typeof s=="function"?D=s(P):D=[s,_?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(P):i;return E.createElement(he,{...u,"aria-current":T,className:D,ref:h,style:L,to:o,viewTransition:l},typeof c=="function"?c(P):c)});cz.displayName="NavLink";var dz=E.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:i,method:o=$x,action:l,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:f,...g},x)=>{let y=gz(),b=pz(l,{relative:u}),v=o.toLowerCase()==="get"?"get":"post",N=typeof l=="string"&&F4.test(l),k=A=>{if(c&&c(A),A.defaultPrevented)return;A.preventDefault();let R=A.nativeEvent.submitter,_=R?.getAttribute("formmethod")||o;y(R||A.currentTarget,{fetcherKey:e,method:_,navigate:t,replace:a,state:i,relative:u,preventScrollReset:h,viewTransition:f})};return E.createElement("form",{ref:x,method:v,action:b,onSubmit:s?c:k,...g,"data-discover":!N&&r==="render"?"true":void 0})});dz.displayName="Form";function uz(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U4(r){let e=E.useContext(lh);return fr(e,uz(r)),e}function hz(r,{target:e,replace:t,state:s,preventScrollReset:a,relative:i,viewTransition:o}={}){let l=us(),c=Br(),u=dg(r,{relative:i});return E.useCallback(h=>{if($U(h,e)){h.preventDefault();let f=t!==void 0?t:Cf(c)===Cf(u);l(r,{replace:f,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,u,t,s,e,r,a,i,o])}var mz=0,fz=()=>`__${String(++mz)}__`;function gz(){let{router:r}=U4("useSubmit"),{basename:e}=E.useContext(Yi),t=DU();return E.useCallback(async(s,a={})=>{let{action:i,method:o,encType:l,formData:c,body:u}=qU(s,e);if(a.navigate===!1){let h=a.fetcherKey||fz();await r.fetch(h,t,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await r.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,t])}function pz(r,{relative:e}={}){let{basename:t}=E.useContext(Yi),s=E.useContext(qi);fr(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i={...dg(r||".",{relative:e})},o=Br();if(r==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();i.search=h?`?${h}`:""}}return(!r||r===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Ao([t,i.pathname])),Cf(i)}function xz(r,{relative:e}={}){let t=E.useContext(T4);fr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=U4("useViewTransitionState"),a=dg(r,{relative:e});if(!t.isTransitioning)return!1;let i=Eo(t.currentLocation.pathname,s)||t.currentLocation.pathname,o=Eo(t.nextLocation.pathname,s)||t.nextLocation.pathname;return v0(a.pathname,o)!=null||v0(a.pathname,i)!=null}const bz="/assets/logo-Bi-0vyp2.png";function yz(){const r=()=>{const e="/agreement.pdf",t=document.createElement("a");t.href=e,t.download="FOREMADE_Vendor_Agreement.pdf",document.body.appendChild(t),t.click(),document.body.removeChild(t)};return n.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-serif text-gray-800",children:[n.jsx("header",{className:"pt-16 pb-8 text-center border-b border-gray-300",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("img",{src:bz,alt:"Formade logo",className:"h-16 mx-auto mb-4"}),n.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Vendor User Agreement"}),n.jsx("p",{className:"text-lg mb-2",children:"Workbay, 2nd Floor, Lagos City Mall, Onikan, TBS Lagos"}),n.jsxs("p",{className:"text-lg mb-2",children:["Contact:"," ",n.jsx("a",{href:"mailto:info@foremade.com",className:"underline hover:text-blue-600",children:"info@foremade.com"})]}),n.jsx("p",{className:"text-lg mb-4",children:"Tel: +234 9126866984, +44 7481841132 (WhatsApp)"}),n.jsx("p",{className:"text-lg",children:"Effective Date: _________________________"})]})}),n.jsxs("main",{className:"max-w-4xl mx-auto p-8 my-8 border border-gray-200",children:[n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"Introduction"}),n.jsx("p",{className:"text-justify",children:"Welcome to FOREMADE. This Vendor User Agreement (“Agreement”) governs your participation as a seller (“Vendor”, “You”, “Your”) on the FOREMADE Online Marketplace (“FOREMADE”, “Platform”, “We”, “Us”, “Our”). By registering and listing products on FOREMADE, you agree to be bound by the terms and conditions set forth below."})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"1. Purpose of the Platform"}),n.jsx("p",{className:"text-justify",children:"FOREMADE provides Vendors with a free, professional online platform to sell their products to buyers both locally and internationally. FOREMADE offers unmatched visibility, access to a growing customer base, and a seamless transaction experience."})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"2. Platform Usage Rights"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"Vendors are granted the right to list, market, and sell products on the FOREMADE marketplace."}),n.jsx("li",{children:"Vendors retain full ownership of their products but grant FOREMADE a non-exclusive, royalty-free license to display, market, and promote the products across the platform and its promotional channels."}),n.jsx("li",{children:"Vendors must provide accurate product descriptions, pricing, and images."})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"3. Free Access & Seller Costs"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"As of the effective date of this agreement, FOREMADE does not charge Vendors any listing fees or commissions to sell products on the platform."}),n.jsx("li",{children:"Visibility on FOREMADE is free of charge."}),n.jsx("li",{children:"FOREMADE reserves the right to introduce optional paid promotional services to Vendors for enhanced visibility."})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"4. Pricing, Taxes, and Shipping Structure"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"Vendors set their base product prices."}),n.jsx("li",{children:"FOREMADE may add applicable government taxes and shipping fees to the listed price for the buyer."}),n.jsx("li",{children:"Example: If you price an item at ₦200, the displayed price to the buyer may be ₦220 (which includes tax and delivery). You will always receive ₦200 per unit sold."}),n.jsx("li",{children:"Buyers, not Vendors, pay for delivery."}),n.jsx("li",{children:"FOREMADE manages shipping logistics to ensure professional delivery and compliance."}),n.jsx("li",{children:"FOREMADE may generate revenue from buyer protection fees and optional Vendor promotions."})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"5. Vendor Responsibilities"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"Maintain product quality and provide accurate product listings."}),n.jsx("li",{children:"Keep product prices competitive, ideally lower than your in-store prices, to attract more customers and stay ahead of competition."}),n.jsx("li",{children:"Comply with all applicable laws, including product safety, labelling, and intellectual property rights."})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"6. Prohibited Activities"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"Direct private interactions between Vendors and customers outside the FOREMADE platform are strictly prohibited to maintain professionalism and platform integrity."}),n.jsx("li",{children:"Personal deliveries by Vendors are not allowed. All items must pass through FOREMADE’s logistics system for quality control and tracking."}),n.jsx("li",{children:"Any attempt to bypass the platform’s payment or shipping process will result in immediate termination of your account."})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"7. Returns, Damages, and Loss"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"Refer to the FOREMADE Return Policy published on our website for details on customer returns."}),n.jsx("li",{children:"Any product lost or damaged while in the custody of FOREMADE will be replaced or reimbursed by FOREMADE."}),n.jsx("li",{children:"Products are inspected at collection to ensure compliance with the listing description."})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"8. Payment to Vendors"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"Payment for products sold will be processed and released upon the successful pickup of the item from the Vendor’s shop by FOREMADE’s logistics team."}),n.jsx("li",{children:"FOREMADE provides transparent statements of sales and payments to Vendors."})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"9. Transparency & Trust"}),n.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[n.jsx("li",{children:"FOREMADE is committed to operating with honesty, fairness, and full disclosure."}),n.jsx("li",{children:"We encourage open communication regarding your concerns and we are dedicated to building long-term partnerships with all Vendors."})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"10. Modifications to Agreement"}),n.jsx("p",{className:"text-justify",children:"FOREMADE may update this Agreement periodically. You will be notified of any significant changes, and continued use of the platform constitutes acceptance of the revised terms."})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"11. Termination"}),n.jsx("p",{className:"text-justify",children:"FOREMADE reserves the right to suspend or terminate any Vendor account found to be in violation of this Agreement or applicable laws."})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"12. Governing Law"}),n.jsx("p",{className:"text-justify",children:"This Agreement shall be governed and interpreted under the laws of the Federal Republic of Nigeria."})]}),n.jsxs("section",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-bold mb-3",children:"Acceptance"}),n.jsx("p",{className:"text-justify mb-4",children:"By registering and selling on FOREMADE, you acknowledge that you have read, understood, and agreed to all the terms of this Agreement."}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-300 pt-4",children:[n.jsxs("div",{children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Vendor’s Name:"})," _______________________________"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Position:"})," _____________________________________"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Business Name:"})," _______________________________"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Address:"})," _____________________________________"]})]}),n.jsxs("div",{children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Signature:"})," _____________________________"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Date:"})," ________________________________"]})]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("button",{onClick:r,className:"bg-slate-600 text-white px-4 py-2 rounded hover:bg-slate-800 transition duration-200",children:"Download Agreement"})})]}),n.jsxs("footer",{className:"border-t border-gray-300 p-6 text-center text-gray-800",children:[n.jsx("p",{children:"Workbay, 2nd Floor, Lagos City Mall, Onikan, TBS Lagos"}),n.jsxs("p",{children:["Contact:"," ",n.jsx("a",{href:"mailto:info@foremade.com",className:"underline hover:text-blue-600",children:"info@foremade.com"})]}),n.jsx("p",{children:"Tel: +234 9126866984, +44 7481841132 (WhatsApp)"}),n.jsx("p",{className:"mt-2",children:n.jsx(he,{to:"/seller/register",className:"underline hover:text-blue-600",children:"Back to Vendor Registration"})})]})]})}const vz=()=>n.jsx("div",{className:"min-h-screen bg-background-light py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-primary/10 rounded-full",children:n.jsx("i",{className:"bx bx-package text-5xl text-primary"})}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-primary mb-2",children:"FOREMADE Shipping Policy"}),n.jsx("p",{className:"text-secondary max-w-xl",children:"Learn about our shipping methods, fees, and delivery timeframes for FOREMADE Marketplace."})]}),n.jsxs("div",{className:"bg-background-light rounded-xl shadow-lg p-6 md:p-10 border border-border-light",children:[n.jsxs("p",{className:"mb-2 text-secondary",children:[n.jsx("strong",{children:"Last Updated:"})," July 5, 2024"]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"1. Shipping Methods"}),n.jsx("p",{className:"mb-4 text-secondary",children:"FOREMADE offers multiple shipping options depending on the location of the buyer and seller:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Local Delivery:"})," Available for buyers and sellers within the same country or region."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Standard Shipping:"})," Carried out through our partnered courier services with tracking provided."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Express Shipping:"})," Optional faster delivery for eligible items at an additional cost."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Pick-Up Options:"})," In some locations, buyers may choose to collect items directly from sellers or drop-off points."]})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"2. Shipping Fees"}),n.jsx("p",{className:"mb-4 text-secondary",children:"Shipping fees are automatically calculated at checkout based on item size, weight, and destination. Multi-item discounts may apply when purchasing several products from the same seller. Sellers are responsible for accurately entering item weight and dimensions to ensure correct fee calculation."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"3. Order Processing Time"}),n.jsxs("p",{className:"mb-4 text-secondary",children:["Sellers must ship items within ",n.jsx("strong",{children:"2 business days"})," of receiving an order. Failure to ship within the required time may lead to order cancellation and account penalties."]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"4. Delivery Timeframes"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Local Delivery:"})," 2–5 business days"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Domestic Standard Shipping:"})," 3–7 business days"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"International Shipping:"})," 7–21 business days (depending on destination and customs)"]})]}),n.jsx("p",{className:"mb-4 text-secondary",children:"Delivery times may vary based on the courier and unforeseen circumstances such as weather or strikes."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"5. Tracking & Confirmation"}),n.jsx("p",{className:"mb-4 text-secondary",children:"All shipped orders must include tracking information. Buyers will receive tracking updates and can monitor delivery progress through their FOREMADE account."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"6. Shipping Responsibility"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Sellers:"})," Responsible for packaging items securely and dispatching within the stated timeframe."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Buyers:"})," Responsible for providing a complete and accurate delivery address."]})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"7. Lost or Delayed Shipments"}),n.jsxs("p",{className:"mb-4 text-secondary",children:["If an item hasn’t arrived within the expected timeframe, buyers should contact the seller first via the platform. If unresolved, buyers can raise an issue within ",n.jsx("strong",{children:"7 days after the estimated delivery date"})," for further investigation and support."]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"8. International Shipping & Customs"}),n.jsx("p",{className:"mb-4 text-secondary",children:"International orders may be subject to customs fees, import duties, or taxes depending on the destination country. These charges are the responsibility of the buyer unless otherwise stated."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"9. Non-Delivery or Return to Sender"}),n.jsx("p",{className:"mb-4 text-secondary",children:"If an order is returned due to incorrect address or non-collection, the buyer may be responsible for re-shipping costs."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"10. Prohibited Items"}),n.jsxs("p",{className:"mb-4 text-secondary",children:["Items that violate FOREMADE's ",n.jsx(he,{to:"/terms-conditions",className:"policy-link",children:"Prohibited Products Policy"})," or applicable shipping laws will not be permitted."]}),n.jsxs("p",{className:"mb-4 text-secondary",children:["If you need help with your shipment, contact our support team via the ",n.jsx(he,{to:"/support",className:"policy-link",children:"Help Centre"})," on your dashboard."]})]})]})}),wz=()=>{};var FC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Nz=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const i=r[t++];e[s++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=r[t++],o=r[t++],l=r[t++],c=((a&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=r[t++],o=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},V4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const i=r[a],o=a+1<r.length,l=o?r[a+1]:0,c=a+2<r.length,u=c?r[a+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let g=(l&15)<<2|u>>6,x=u&63;c||(x=64,o||(g=64)),s.push(t[h],t[f],t[g],t[x])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(z4(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Nz(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const i=t[r.charAt(a++)],l=a<r.length?t[r.charAt(a)]:0;++a;const u=a<r.length?t[r.charAt(a)]:64;++a;const f=a<r.length?t[r.charAt(a)]:64;if(++a,i==null||l==null||u==null||f==null)throw new jz;const g=i<<2|l>>4;if(s.push(g),u!==64){const x=l<<4&240|u>>2;if(s.push(x),f!==64){const y=u<<6&192|f;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kz=function(r){const e=z4(r);return V4.encodeByteArray(e,!0)},w0=function(r){return kz(r).replace(/\./g,"")},B4=function(r){try{return V4.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z=()=>Sz().__FIREBASE_DEFAULTS__,Az=()=>{if(typeof process>"u"||typeof FC>"u")return;const r=FC.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Cz=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&B4(r[1]);return e&&JSON.parse(e)},xb=()=>{try{return wz()||_z()||Az()||Cz()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},H4=r=>{var e,t;return(t=(e=xb())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},$4=r=>{const e=H4(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},W4=()=>{var r;return(r=xb())===null||r===void 0?void 0:r.config},Y4=r=>{var e;return(e=xb())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jj(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,i=r.sub||r.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},r);return[w0(JSON.stringify(t)),w0(JSON.stringify(o)),""].join(".")}const rf={};function Tz(){const r={prod:[],emulator:[]};for(const e of Object.keys(rf))rf[e]?r.emulator.push(e):r.prod.push(e);return r}function Pz(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let UC=!1;function kj(r,e){if(typeof window>"u"||typeof document>"u"||!ql(window.location.host)||rf[r]===e||rf[r]||UC)return;rf[r]=e;function t(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=Tz().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{UC=!0,o()},g}function h(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){const g=Pz(s),x=t("text"),y=document.getElementById(x)||document.createElement("span"),b=t("learnmore"),v=document.getElementById(b)||document.createElement("a"),N=t("preprendIcon"),k=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const A=g.element;l(A),h(v,b);const R=u();c(k,N),A.append(k,y,v,R),document.body.appendChild(A)}i?(y.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Aa())}function Iz(){var r;const e=(r=xb())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Dz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mz(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Oz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lz(){const r=Aa();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Fz(){return!Iz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uz(){try{return typeof indexedDB=="object"}catch{return!1}}function zz(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz="FirebaseError";class Xi extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Vz,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ug.prototype.create)}}class ug{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?Bz(i,s):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Xi(a,l,s)}}function Bz(r,e){return r.replace(Hz,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const Hz=/\{\$([^}]+)}/g;function $z(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function To(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const i=r[a],o=e[a];if(zC(i)&&zC(o)){if(!To(i,o))return!1}else if(i!==o)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function zC(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ym(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,i]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(i)}}),e}function qm(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Wz(r,e){const t=new Yz(r,e);return t.subscribe.bind(t)}class Yz{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");qz(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=pw),a.error===void 0&&(a.error=pw),a.complete===void 0&&(a.complete=pw);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qz(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function pw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(r){return r&&r._delegate?r._delegate:r}class Pl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Ez;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e?.identifier),a=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kz(e))try{this.getOrInitializeService({instanceIdentifier:Ic})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:a});s.resolve(i)}catch{}}}}clearInstance(e=Ic){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ic){return this.instances.has(e)}getOptions(e=Ic){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),i=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Gz(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ic){return this.component?this.component.multipleInstances?e:Ic:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gz(r){return r===Ic?void 0:r}function Kz(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Xz(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ls;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ls||(ls={}));const Zz={debug:ls.DEBUG,verbose:ls.VERBOSE,info:ls.INFO,warn:ls.WARN,error:ls.ERROR,silent:ls.SILENT},Jz=ls.INFO,eV={[ls.DEBUG]:"log",[ls.VERBOSE]:"log",[ls.INFO]:"info",[ls.WARN]:"warn",[ls.ERROR]:"error"},tV=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=eV[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sj{constructor(e){this.name=e,this._logLevel=Jz,this._logHandler=tV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ls))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ls.DEBUG,...e),this._logHandler(this,ls.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ls.VERBOSE,...e),this._logHandler(this,ls.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ls.INFO,...e),this._logHandler(this,ls.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ls.WARN,...e),this._logHandler(this,ls.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ls.ERROR,...e),this._logHandler(this,ls.ERROR,...e)}}const sV=(r,e)=>e.some(t=>r instanceof t);let VC,BC;function rV(){return VC||(VC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aV(){return BC||(BC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X4=new WeakMap,O1=new WeakMap,G4=new WeakMap,xw=new WeakMap,_j=new WeakMap;function nV(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",i),r.removeEventListener("error",o)},i=()=>{t(kl(r.result)),a()},o=()=>{s(r.error),a()};r.addEventListener("success",i),r.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&X4.set(t,r)}).catch(()=>{}),_j.set(e,r),e}function iV(r){if(O1.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",o),r.removeEventListener("abort",o)},i=()=>{t(),a()},o=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",i),r.addEventListener("error",o),r.addEventListener("abort",o)});O1.set(r,e)}let L1={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return O1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||G4.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return kl(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function oV(r){L1=r(L1)}function lV(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(bw(this),e,...t);return G4.set(s,e.sort?e.sort():[e]),kl(s)}:aV().includes(r)?function(...e){return r.apply(bw(this),e),kl(X4.get(this))}:function(...e){return kl(r.apply(bw(this),e))}}function cV(r){return typeof r=="function"?lV(r):(r instanceof IDBTransaction&&iV(r),sV(r,rV())?new Proxy(r,L1):r)}function kl(r){if(r instanceof IDBRequest)return nV(r);if(xw.has(r))return xw.get(r);const e=cV(r);return e!==r&&(xw.set(r,e),_j.set(e,r)),e}const bw=r=>_j.get(r);function dV(r,e,{blocked:t,upgrade:s,blocking:a,terminated:i}={}){const o=indexedDB.open(r,e),l=kl(o);return s&&o.addEventListener("upgradeneeded",c=>{s(kl(o.result),c.oldVersion,c.newVersion,kl(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const uV=["get","getKey","getAll","getAllKeys","count"],hV=["put","add","delete","clear"],yw=new Map;function HC(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(yw.get(e))return yw.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=hV.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||uV.includes(t)))return;const i=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),a&&c.done]))[0]};return yw.set(e,i),i}oV(r=>({...r,get:(e,t,s)=>HC(e,t)||r.get(e,t,s),has:(e,t)=>!!HC(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fV(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function fV(r){const e=r.getComponent();return e?.type==="VERSION"}const F1="@firebase/app",$C="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Sj("@firebase/app"),gV="@firebase/app-compat",pV="@firebase/analytics-compat",xV="@firebase/analytics",bV="@firebase/app-check-compat",yV="@firebase/app-check",vV="@firebase/auth",wV="@firebase/auth-compat",NV="@firebase/database",jV="@firebase/data-connect",kV="@firebase/database-compat",SV="@firebase/functions",_V="@firebase/functions-compat",AV="@firebase/installations",CV="@firebase/installations-compat",EV="@firebase/messaging",TV="@firebase/messaging-compat",PV="@firebase/performance",RV="@firebase/performance-compat",IV="@firebase/remote-config",DV="@firebase/remote-config-compat",MV="@firebase/storage",OV="@firebase/storage-compat",LV="@firebase/firestore",FV="@firebase/ai",UV="@firebase/firestore-compat",zV="firebase",VV="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="[DEFAULT]",BV={[F1]:"fire-core",[gV]:"fire-core-compat",[xV]:"fire-analytics",[pV]:"fire-analytics-compat",[yV]:"fire-app-check",[bV]:"fire-app-check-compat",[vV]:"fire-auth",[wV]:"fire-auth-compat",[NV]:"fire-rtdb",[jV]:"fire-data-connect",[kV]:"fire-rtdb-compat",[SV]:"fire-fn",[_V]:"fire-fn-compat",[AV]:"fire-iid",[CV]:"fire-iid-compat",[EV]:"fire-fcm",[TV]:"fire-fcm-compat",[PV]:"fire-perf",[RV]:"fire-perf-compat",[IV]:"fire-rc",[DV]:"fire-rc-compat",[MV]:"fire-gcs",[OV]:"fire-gcs-compat",[LV]:"fire-fst",[UV]:"fire-fst-compat",[FV]:"fire-vertex","fire-js":"fire-js",[zV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map,HV=new Map,z1=new Map;function WC(r,e){try{r.container.addComponent(e)}catch(t){Po.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function nd(r){const e=r.name;if(z1.has(e))return Po.debug(`There were multiple attempts to register component ${e}.`),!1;z1.set(e,r);for(const t of N0.values())WC(t,r);for(const t of HV.values())WC(t,r);return!0}function bb(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ma(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sl=new ug("app","Firebase",$V);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Pl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=VV;function K4(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:U1,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Sl.create("bad-app-name",{appName:String(a)});if(t||(t=W4()),!t)throw Sl.create("no-options");const i=N0.get(a);if(i){if(To(t,i.options)&&To(s,i.config))return i;throw Sl.create("duplicate-app",{appName:a})}const o=new Qz(a);for(const c of z1.values())o.addComponent(c);const l=new WV(t,s,o);return N0.set(a,l),l}function Aj(r=U1){const e=N0.get(r);if(!e&&r===U1&&W4())return K4();if(!e)throw Sl.create("no-app",{appName:r});return e}function Pi(r,e,t){var s;let a=(s=BV[r])!==null&&s!==void 0?s:r;t&&(a+=`-${t}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${a}" with version "${e}":`];i&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Po.warn(l.join(" "));return}nd(new Pl(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="firebase-heartbeat-database",qV=1,Ef="firebase-heartbeat-store";let vw=null;function Q4(){return vw||(vw=dV(YV,qV,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ef)}catch(t){console.warn(t)}}}}).catch(r=>{throw Sl.create("idb-open",{originalErrorMessage:r.message})})),vw}async function XV(r){try{const t=(await Q4()).transaction(Ef),s=await t.objectStore(Ef).get(Z4(r));return await t.done,s}catch(e){if(e instanceof Xi)Po.warn(e.message);else{const t=Sl.create("idb-get",{originalErrorMessage:e?.message});Po.warn(t.message)}}}async function YC(r,e){try{const s=(await Q4()).transaction(Ef,"readwrite");await s.objectStore(Ef).put(e,Z4(r)),await s.done}catch(t){if(t instanceof Xi)Po.warn(t.message);else{const s=Sl.create("idb-set",{originalErrorMessage:t?.message});Po.warn(s.message)}}}function Z4(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=1024,KV=30;class QV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new JV(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qC();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>KV){const o=eB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Po.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qC(),{heartbeatsToSend:s,unsentEntries:a}=ZV(this._heartbeatsCache.heartbeats),i=w0(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Po.warn(t),""}}}function qC(){return new Date().toISOString().substring(0,10)}function ZV(r,e=GV){const t=[];let s=r.slice();for(const a of r){const i=t.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),XC(t)>e){i.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),XC(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class JV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uz()?zz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await XV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return YC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return YC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function XC(r){return w0(JSON.stringify({version:2,heartbeats:r})).length}function eB(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(r){nd(new Pl("platform-logger",e=>new mV(e),"PRIVATE")),nd(new Pl("heartbeat",e=>new QV(e),"PRIVATE")),Pi(F1,$C,r),Pi(F1,$C,"esm2017"),Pi("fire-js","")}tB("");var sB="firebase",rB="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi(sB,rB,"app");function Cj(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t}function J4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aB=J4,e3=new ug("auth","Firebase",J4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Sj("@firebase/auth");function nB(r,...e){j0.logLevel<=ls.WARN&&j0.warn(`Auth (${wd}): ${r}`,...e)}function Yx(r,...e){j0.logLevel<=ls.ERROR&&j0.error(`Auth (${wd}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(r,...e){throw Tj(r,...e)}function ti(r,...e){return Tj(r,...e)}function Ej(r,e,t){const s=Object.assign(Object.assign({},aB()),{[e]:t});return new ug("auth","Firebase",s).create(e,{appName:r.name})}function Ri(r){return Ej(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iB(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Vn(r,"argument-error"),Ej(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tj(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return e3.create(r,...e)}function kt(r,e,...t){if(!r)throw Tj(e,...t)}function wo(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Yx(e),new Error(e)}function Ro(r,e){r||wo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function oB(){return GC()==="http:"||GC()==="https:"}function GC(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oB()||Mz()||"connection"in navigator)?navigator.onLine:!0}function cB(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ro(t>e,"Short delay should be less than long delay!"),this.isMobile=Rz()||Oz()}get(){return lB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(r,e){Ro(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hB=new mg(3e4,6e4);function za(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function sn(r,e,t,s,a={}){return s3(r,a,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=hg(Object.assign({key:r.config.apiKey},o)).slice(1),c=await r._getAdditionalHeaders();c["Content-Type"]="application/json",r.languageCode&&(c["X-Firebase-Locale"]=r.languageCode);const u=Object.assign({method:e,headers:c},i);return Dz()||(u.referrerPolicy="no-referrer"),r.emulatorConfig&&ql(r.emulatorConfig.host)&&(u.credentials="include"),t3.fetch()(await r3(r,r.config.apiHost,t,l),u)})}async function s3(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},dB),e);try{const a=new fB(r),i=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xm(r,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xm(r,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Xm(r,"email-already-in-use",o);if(c==="USER_DISABLED")throw Xm(r,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ej(r,h,u);Vn(r,h)}}catch(a){if(a instanceof Xi)throw a;Vn(r,"network-request-failed",{message:String(a)})}}async function Xl(r,e,t,s,a={}){const i=await sn(r,e,t,s,a);return"mfaPendingCredential"in i&&Vn(r,"multi-factor-auth-required",{_serverResponse:i}),i}async function r3(r,e,t,s){const a=`${e}${t}?${s}`,i=r,o=i.config.emulator?Pj(r.config,a):`${r.config.apiScheme}://${a}`;return uB.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function mB(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ti(this.auth,"network-request-failed")),hB.get())})}}function Xm(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=ti(r,e,s);return a.customData._tokenResponse=t,a}function KC(r){return r!==void 0&&r.enterprise!==void 0}class a3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function n3(r,e){return sn(r,"GET","/v2/recaptchaConfig",za(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gB(r,e){return sn(r,"POST","/v1/accounts:delete",e)}async function k0(r,e){return sn(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(r,e=!1){return js(r).getIdToken(e)}async function pB(r,e=!1){const t=js(r),s=await t.getIdToken(e),a=Rj(s);kt(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i?.sign_in_provider;return{claims:a,token:s,authTime:af(ww(a.auth_time)),issuedAtTime:af(ww(a.iat)),expirationTime:af(ww(a.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function ww(r){return Number(r)*1e3}function Rj(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Yx("JWT malformed, contained fewer than 3 sections"),null;try{const a=B4(t);return a?JSON.parse(a):(Yx("Failed to decode base64 JWT payload"),null)}catch(a){return Yx("Caught error parsing JWT payload as JSON",a?.toString()),null}}function ZC(r){const e=Rj(r);return kt(e,"internal-error"),kt(typeof e.exp<"u","internal-error"),kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Xi&&xB(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function xB({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=af(this.lastLoginAt),this.creationTime=af(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S0(r){var e;const t=r.auth,s=await r.getIdToken(),a=await id(r,k0(t,{idToken:s}));kt(a?.users.length,t,"internal-error");const i=a.users[0];r._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?i3(i.providerUserInfo):[],l=vB(r.providerData,o),c=r.isAnonymous,u=!(r.email&&i.passwordHash)&&!l?.length,h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new B1(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(r,f)}async function yB(r){const e=js(r);await S0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vB(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function i3(r){return r.map(e=>{var{providerId:t}=e,s=Cj(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(r,e){const t=await s3(r,{},async()=>{const s=hg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=r.config,o=await r3(r,a,"/v1/token",`key=${i}`),l=await r._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return r.emulatorConfig&&ql(r.emulatorConfig.host)&&(c.credentials="include"),t3.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function NB(r,e){return sn(r,"POST","/v2/accounts:revokeToken",za(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){kt(e.idToken,"internal-error"),kt(typeof e.idToken<"u","internal-error"),kt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){kt(e.length!==0,"internal-error");const t=ZC(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:i}=await wB(e,t);this.updateTokensAndExpiration(s,a,Number(i))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:i}=t,o=new Du;return s&&(kt(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),a&&(kt(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(kt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Du,this.toJSON())}_performRefresh(){return wo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(r,e){kt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,i=Cj(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new B1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await id(this,this.stsTokenManager.getToken(this.auth,e));return kt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pB(this,e)}reload(){return yB(this)}_assign(e){this!==e&&(kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await S0(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ma(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await id(this,gB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,i,o,l,c,u,h;const f=(s=t.displayName)!==null&&s!==void 0?s:void 0,g=(a=t.email)!==null&&a!==void 0?a:void 0,x=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=t.photoURL)!==null&&o!==void 0?o:void 0,b=(l=t.tenantId)!==null&&l!==void 0?l:void 0,v=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,N=(u=t.createdAt)!==null&&u!==void 0?u:void 0,k=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:A,emailVerified:R,isAnonymous:_,providerData:I,stsTokenManager:P}=t;kt(A&&P,e,"internal-error");const T=Du.fromJSON(this.name,P);kt(typeof A=="string",e,"internal-error"),hl(f,e.name),hl(g,e.name),kt(typeof R=="boolean",e,"internal-error"),kt(typeof _=="boolean",e,"internal-error"),hl(x,e.name),hl(y,e.name),hl(b,e.name),hl(v,e.name),hl(N,e.name),hl(k,e.name);const D=new Qn({uid:A,auth:e,email:g,emailVerified:R,displayName:f,isAnonymous:_,photoURL:y,phoneNumber:x,tenantId:b,stsTokenManager:T,createdAt:N,lastLoginAt:k});return I&&Array.isArray(I)&&(D.providerData=I.map(L=>Object.assign({},L))),v&&(D._redirectEventId=v),D}static async _fromIdTokenResponse(e,t,s=!1){const a=new Du;a.updateFromServerResponse(t);const i=new Qn({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await S0(i),i}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];kt(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?i3(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!i?.length,l=new Du;l.updateFromIdToken(s);const c=new Qn({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new B1(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!i?.length};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new Map;function No(r){Ro(r instanceof Function,"Expected a class definition");let e=JC.get(r);return e?(Ro(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,JC.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}o3.type="NONE";const eE=o3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(r,e,t){return`firebase:${r}:${e}:${t}`}class Mu{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:i}=this.auth;this.fullUserKey=qx(this.userKey,a.apiKey,i),this.fullPersistenceKey=qx("persistence",a.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await k0(this.auth,{idToken:e}).catch(()=>{});return t?Qn._fromGetAccountInfoResponse(this.auth,t,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Mu(No(eE),e,s);const a=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=a[0]||No(eE);const o=qx(s,e.config.apiKey,e.name);let l=null;for(const u of t)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const g=await k0(e,{idToken:h}).catch(()=>{});if(!g)break;f=await Qn._fromGetAccountInfoResponse(e,g,h)}else f=Qn._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Mu(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Mu(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m3(e))return"Blackberry";if(f3(e))return"Webos";if(c3(e))return"Safari";if((e.includes("chrome/")||d3(e))&&!e.includes("edge/"))return"Chrome";if(h3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function l3(r=Aa()){return/firefox\//i.test(r)}function c3(r=Aa()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d3(r=Aa()){return/crios\//i.test(r)}function u3(r=Aa()){return/iemobile/i.test(r)}function h3(r=Aa()){return/android/i.test(r)}function m3(r=Aa()){return/blackberry/i.test(r)}function f3(r=Aa()){return/webos/i.test(r)}function Ij(r=Aa()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function jB(r=Aa()){var e;return Ij(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kB(){return Lz()&&document.documentMode===10}function g3(r=Aa()){return Ij(r)||h3(r)||f3(r)||m3(r)||/windows phone/i.test(r)||u3(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(r,e=[]){let t;switch(r){case"Browser":t=tE(Aa());break;case"Worker":t=`${tE(Aa())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wd}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _B(r,e={}){return sn(r,"GET","/v2/passwordPolicy",za(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=6;class CB{constructor(e){var t,s,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:AB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sE(this),this.idTokenSubscription=new sE(this),this.beforeStateQueue=new SB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=No(t)),this._initializationPromise=this.queue(async()=>{var s,a,i;if(!this._deleted&&(this.persistenceManager=await Mu.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await k0(this,{idToken:e}),s=await Qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ma(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=a?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(a=c.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await S0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ma(this.app))return Promise.reject(Ri(this));const t=e?js(e):null;return t&&kt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ma(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ma(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(No(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _B(this),t=new CB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ug("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await NB(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&No(e)||this._popupRedirectResolver;kt(t,this,"argument-error"),this.redirectPersistenceManager=await Mu.create(this,[No(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(kt(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,s,a);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Ma(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&nB(`Error while retrieving App Check token: ${t.error}`),t?.token}}function li(r){return js(r)}class sE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Wz(t=>this.observer=t)}get next(){return kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TB(r){yb=r}function x3(r){return yb.loadJS(r)}function PB(){return yb.recaptchaEnterpriseScript}function RB(){return yb.gapiScript}function IB(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class DB{constructor(){this.enterprise=new MB}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class MB{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const OB="recaptcha-enterprise",nf="NO_RECAPTCHA";class b3{constructor(e){this.type=OB,this.auth=li(e)}async verify(e="verify",t=!1){async function s(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{n3(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new a3(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(i,o,l){const c=window.grecaptcha;KC(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(nf)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!t&&KC(window.grecaptcha))a(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=PB();c.length!==0&&(c+=l),x3(c).then(()=>{a(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function Rm(r,e,t,s=!1,a=!1){const i=new b3(r);let o;if(a)o=nf;else try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Qc(r,e,t,s,a){var i,o;if(a==="EMAIL_PASSWORD_PROVIDER")if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Rm(r,e,t,t==="getOobCode");return s(r,l)}else return s(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Rm(r,e,t,t==="getOobCode");return s(r,c)}else return Promise.reject(l)});else if(a==="PHONE_PROVIDER")if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await Rm(r,e,t);return s(r,l).catch(async c=>{var u;if(((u=r._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const h=await Rm(r,e,t,!1,!0);return s(r,h)}return Promise.reject(c)})}else{const l=await Rm(r,e,t,!1,!0);return s(r,l)}else return Promise.reject(a+" provider is not supported.")}async function LB(r){const e=li(r),t=await n3(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new a3(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new b3(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(r,e){const t=bb(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),i=t.getOptions();if(To(i,e??{}))return a;Vn(a,"already-initialized")}return t.initialize({options:e})}function UB(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(No);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function zB(r,e,t){const s=li(r);kt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,i=y3(e),{host:o,port:l}=VB(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){kt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),kt(To(u,s.config.emulator)&&To(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,ql(o)?(jj(`${i}//${o}${c}`),kj("Auth",!0)):BB()}function y3(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function VB(r){const e=y3(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const i=a[1];return{host:i,port:rE(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:rE(o)}}}function rE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function BB(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wo("not implemented")}_getIdTokenResponse(e){return wo("not implemented")}_linkToIdToken(e,t){return wo("not implemented")}_getReauthenticationResolver(e){return wo("not implemented")}}async function HB(r,e){return sn(r,"POST","/v1/accounts:update",e)}async function $B(r,e){return sn(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(r,e){return Xl(r,"POST","/v1/accounts:signInWithPassword",za(r,e))}async function v3(r,e){return sn(r,"POST","/v1/accounts:sendOobCode",za(r,e))}async function YB(r,e){return v3(r,e)}async function qB(r,e){return v3(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(r,e){return Xl(r,"POST","/v1/accounts:signInWithEmailLink",za(r,e))}async function GB(r,e){return Xl(r,"POST","/v1/accounts:signInWithEmailLink",za(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends vb{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Tf(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Tf(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qc(e,t,"signInWithPassword",WB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return XB(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qc(e,s,"signUpPassword",$B,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return GB(e,{idToken:t,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(r,e){return Xl(r,"POST","/v1/accounts:signInWithIdp",za(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="http://localhost";class od extends vb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new od(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,i=Cj(t,["providerId","signInMethod"]);if(!s||!a)return null;const o=new od(s,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Ou(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ou(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ou(e,t)}buildRequest(){const e={requestUri:KB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hg(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(r,e){return sn(r,"POST","/v1/accounts:sendVerificationCode",za(r,e))}async function QB(r,e){return Xl(r,"POST","/v1/accounts:signInWithPhoneNumber",za(r,e))}async function ZB(r,e){const t=await Xl(r,"POST","/v1/accounts:signInWithPhoneNumber",za(r,e));if(t.temporaryProof)throw Xm(r,"account-exists-with-different-credential",t);return t}const JB={USER_NOT_FOUND:"user-not-found"};async function e7(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Xl(r,"POST","/v1/accounts:signInWithPhoneNumber",za(r,t),JB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends vb{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new of({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new of({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return QB(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return ZB(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return e7(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:a,temporaryProof:i}=e;return!s&&!t&&!a&&!i?null:new of({verificationId:t,verificationCode:s,phoneNumber:a,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s7(r){const e=Ym(qm(r)).link,t=e?Ym(qm(e)).deep_link_id:null,s=Ym(qm(r)).deep_link_id;return(s?Ym(qm(s)).link:null)||s||t||e||r}class Dj{constructor(e){var t,s,a,i,o,l;const c=Ym(qm(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(s=c.oobCode)!==null&&s!==void 0?s:null,f=t7((a=c.mode)!==null&&a!==void 0?a:null);kt(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=s7(e);try{return new Dj(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this.providerId=Gl.PROVIDER_ID}static credential(e,t){return Tf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Dj.parseLink(t);return kt(s,"argument-error"),Tf._fromEmailAndCode(e,s.code,s.tenantId)}}Gl.PROVIDER_ID="password";Gl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends Mj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends fg{constructor(){super("facebook.com")}static credential(e){return od._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends fg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return od._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ei.credential(t,s)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends fg{constructor(){super("github.com")}static credential(e){return od._fromParams({providerId:fl.PROVIDER_ID,signInMethod:fl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fl.credentialFromTaggedObject(e)}static credentialFromError(e){return fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fl.credential(e.oauthAccessToken)}catch{return null}}}fl.GITHUB_SIGN_IN_METHOD="github.com";fl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends fg{constructor(){super("twitter.com")}static credential(e,t){return od._fromParams({providerId:gl.PROVIDER_ID,signInMethod:gl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gl.credentialFromTaggedObject(e)}static credentialFromError(e){return gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return gl.credential(t,s)}catch{return null}}}gl.TWITTER_SIGN_IN_METHOD="twitter.com";gl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r7(r,e){return Xl(r,"POST","/v1/accounts:signUp",za(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const i=await Qn._fromIdTokenResponse(e,s,a),o=nE(s);return new ld({user:i,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=nE(s);return new ld({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function nE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends Xi{constructor(e,t,s,a){var i;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,_0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new _0(e,t,s,a)}}function w3(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?_0._fromErrorAndOperation(r,i,e,s):i})}async function a7(r,e,t=!1){const s=await id(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ld._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N3(r,e,t=!1){const{auth:s}=r;if(Ma(s.app))return Promise.reject(Ri(s));const a="reauthenticate";try{const i=await id(r,w3(s,a,e,r),t);kt(i.idToken,s,"internal-error");const o=Rj(i.idToken);kt(o,s,"internal-error");const{sub:l}=o;return kt(r.uid===l,s,"user-mismatch"),ld._forOperation(r,a,i)}catch(i){throw i?.code==="auth/user-not-found"&&Vn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(r,e,t=!1){if(Ma(r.app))return Promise.reject(Ri(r));const s="signIn",a=await w3(r,s,e),i=await ld._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(i.user),i}async function k3(r,e){return j3(li(r),e)}async function S3(r,e){return N3(js(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _3(r){const e=li(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function n7(r,e,t){const s=li(r);await Qc(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qB,"EMAIL_PASSWORD_PROVIDER")}async function A0(r,e,t){if(Ma(r.app))return Promise.reject(Ri(r));const s=li(r),o=await Qc(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",r7,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&_3(r),c}),l=await ld._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function i7(r,e,t){return Ma(r.app)?Promise.reject(Ri(r)):k3(js(r),Gl.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&_3(r),s})}async function o7(r,e){const t=js(r),a={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:i}=await YB(t.auth,a);i!==r.email&&await r.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l7(r,e){return sn(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pf(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=js(r),i={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await id(s,l7(s.auth,i));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const l=s.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function c7(r,e){return d7(js(r),null,e)}async function d7(r,e,t){const{auth:s}=r,i={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(i.password=t);const o=await id(r,HB(s,i));await r._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(r,e){return js(r).setPersistence(e)}function u7(r,e,t,s){return js(r).onIdTokenChanged(e,t,s)}function h7(r,e,t){return js(r).beforeAuthStateChanged(e,t)}function ai(r,e,t,s){return js(r).onAuthStateChanged(e,t,s)}async function m7(r){return js(r).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(r,e){return sn(r,"POST","/v2/accounts/mfaEnrollment:start",za(r,e))}const C0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(C0,"1"),this.storage.removeItem(C0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=1e3,g7=10;class E3 extends C3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);kB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,g7):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},f7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}E3.type="LOCAL";const T3=E3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3 extends C3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}P3.type="SESSION";const Oj=P3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new wb(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:i}=t.data,o=this.handlersMap[a];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const l=Array.from(o).map(async u=>u(t.origin,i)),c=await p7(l);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Lj("",20);a.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:a,onMessage(f){const g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function b7(r){Ii().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function y7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function v7(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function w7(){return R3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="firebaseLocalStorageDb",N7=1,E0="firebaseLocalStorage",D3="fbase_key";class gg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nb(r,e){return r.transaction([E0],e?"readwrite":"readonly").objectStore(E0)}function j7(){const r=indexedDB.deleteDatabase(I3);return new gg(r).toPromise()}function H1(){const r=indexedDB.open(I3,N7);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(E0,{keyPath:D3})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(E0)?e(s):(s.close(),await j7(),e(await H1()))})})}async function oE(r,e,t){const s=Nb(r,!0).put({[D3]:e,value:t});return new gg(s).toPromise()}async function k7(r,e){const t=Nb(r,!1).get(e),s=await new gg(t).toPromise();return s===void 0?null:s.value}function lE(r,e){const t=Nb(r,!0).delete(e);return new gg(t).toPromise()}const S7=800,_7=3;class M3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await H1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>_7)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return R3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wb._getInstance(w7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await y7(),!this.activeServiceWorker)return;this.sender=new x7(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||v7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await H1();return await oE(e,C0,"1"),await lE(e,C0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>oE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>k7(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=Nb(a,!1).getAll();return new gg(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M3.type="LOCAL";const A7=M3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(r,e){return sn(r,"POST","/v2/accounts/mfaSignIn:start",za(r,e))}new mg(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="recaptcha";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=of._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function E7(r,e,t){if(Ma(r.app))return Promise.reject(Ri(r));const s=li(r),a=await T7(s,e,js(t));return new C7(a,i=>k3(s,i))}async function T7(r,e,t){var s;if(!r._getRecaptchaConfig())try{await LB(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const i=a.session;if("phoneNumber"in a){kt(i.type==="enroll",r,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Qc(r,o,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===nf){kt(t?.type===Xx,h,"argument-error");const g=await Nw(h,f,t);return iE(h,g)}return iE(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{kt(i.type==="signin",r,"internal-error");const o=((s=a.multiFactorHint)===null||s===void 0?void 0:s.uid)||a.multiFactorUid;kt(o,r,"missing-multi-factor-info");const l={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Qc(r,l,"mfaSmsSignIn",async(f,g)=>{if(g.phoneSignInInfo.captchaResponse===nf){kt(t?.type===Xx,f,"argument-error");const x=await Nw(f,g,t);return cE(f,x)}return cE(f,g)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Qc(r,i,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===nf){kt(t?.type===Xx,u,"argument-error");const f=await Nw(u,h,t);return aE(u,f)}return aE(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{t?._reset()}}async function Nw(r,e,t){kt(t.type===Xx,r,"argument-error");const s=await t.verify();kt(typeof s=="string",r,"argument-error");const a=Object.assign({},e);if("phoneEnrollmentInfo"in a){const i=a.phoneEnrollmentInfo.phoneNumber,o=a.phoneEnrollmentInfo.captchaResponse,l=a.phoneEnrollmentInfo.clientType,c=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:s,captchaResponse:o,clientType:l,recaptchaVersion:c}}),a}else if("phoneSignInInfo"in a){const i=a.phoneSignInInfo.captchaResponse,o=a.phoneSignInInfo.clientType,l=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:i,clientType:o,recaptchaVersion:l}}),a}else return Object.assign(a,{recaptchaToken:s}),a}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(r,e){return e?No(e):(kt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj extends vb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ou(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ou(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ou(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function P7(r){return j3(r.auth,new Fj(r),r.bypassAuthState)}function R7(r){const{auth:e,user:t}=r;return kt(t,e,"internal-error"),N3(t,new Fj(r),r.bypassAuthState)}async function I7(r){const{auth:e,user:t}=r;return kt(t,e,"internal-error"),a7(t,new Fj(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,t,s,a,i=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P7;case"linkViaPopup":case"linkViaRedirect":return I7;case"reauthViaPopup":case"reauthViaRedirect":return R7;default:Vn(this.auth,"internal-error")}}resolve(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=new mg(2e3,1e4);async function $1(r,e,t){if(Ma(r.app))return Promise.reject(ti(r,"operation-not-supported-in-this-environment"));const s=li(r);iB(r,e,Mj);const a=O3(s,t);return new zc(s,"signInViaPopup",e,a).executeNotNull()}class zc extends L3{constructor(e,t,s,a,i){super(e,t,a,i),this.provider=s,this.authWindow=null,this.pollId=null,zc.currentPopupAction&&zc.currentPopupAction.cancel(),zc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return kt(e,this.auth,"internal-error"),e}async onExecution(){Ro(this.filter.length===1,"Popup operations only handle one event");const e=Lj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,D7.get())};e()}}zc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7="pendingRedirect",Gx=new Map;class O7 extends L3{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Gx.get(this.auth._key());if(!e){try{const s=await L7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Gx.set(this.auth._key(),e)}return this.bypassAuthState||Gx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L7(r,e){const t=z7(e),s=U7(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function F7(r,e){Gx.set(r._key(),e)}function U7(r){return No(r._redirectPersistence)}function z7(r){return qx(M7,r.config.apiKey,r.name)}async function V7(r,e,t=!1){if(Ma(r.app))return Promise.reject(Ri(r));const s=li(r),a=O3(s,e),o=await new O7(s,a,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7=600*1e3;class H7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!F3(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(ti(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B7&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function F3({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function $7(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F3(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W7(r,e={}){return sn(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q7=/^https?/;async function X7(r){if(r.config.emulator)return;const{authorizedDomains:e}=await W7(r);for(const t of e)try{if(G7(t))return}catch{}Vn(r,"unauthorized-domain")}function G7(r){const e=V1(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const o=new URL(r);return o.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!q7.test(t))return!1;if(Y7.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7=new mg(3e4,6e4);function uE(){const r=Ii().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Q7(r){return new Promise((e,t)=>{var s,a,i;function o(){uE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uE(),t(ti(r,"network-request-failed"))},timeout:K7.get()})}if(!((a=(s=Ii().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=Ii().gapi)===null||i===void 0)&&i.load)o();else{const l=IB("iframefcb");return Ii()[l]=()=>{gapi.load?o():t(ti(r,"network-request-failed"))},x3(`${RB()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw Kx=null,e})}let Kx=null;function Z7(r){return Kx=Kx||Q7(r),Kx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7=new mg(5e3,15e3),e9="__/auth/iframe",t9="emulator/auth/iframe",s9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a9(r){const e=r.config;kt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Pj(e,t9):`https://${r.config.authDomain}/${e9}`,s={apiKey:e.apiKey,appName:r.name,v:wd},a=r9.get(r.config.apiHost);a&&(s.eid=a);const i=r._getFrameworks();return i.length&&(s.fw=i.join(",")),`${t}?${hg(s).slice(1)}`}async function n9(r){const e=await Z7(r),t=Ii().gapi;return kt(t,r,"internal-error"),e.open({where:document.body,url:a9(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s9,dontclear:!0},s=>new Promise(async(a,i)=>{await s.restyle({setHideOnLeave:!1});const o=ti(r,"network-request-failed"),l=Ii().setTimeout(()=>{i(o)},J7.get());function c(){Ii().clearTimeout(l),a(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o9=500,l9=600,c9="_blank",d9="http://localhost";class hE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function u9(r,e,t,s=o9,a=l9){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c=Object.assign(Object.assign({},i9),{width:s.toString(),height:a.toString(),top:i,left:o}),u=Aa().toLowerCase();t&&(l=d3(u)?c9:t),l3(u)&&(e=e||d9,c.scrollbars="yes");const h=Object.entries(c).reduce((g,[x,y])=>`${g}${x}=${y},`,"");if(jB(u)&&l!=="_self")return h9(e||"",l),new hE(null);const f=window.open(e||"",l,h);kt(f,r,"popup-blocked");try{f.focus()}catch{}return new hE(f)}function h9(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9="__/auth/handler",f9="emulator/auth/handler",g9=encodeURIComponent("fac");async function mE(r,e,t,s,a,i){kt(r.config.authDomain,r,"auth-domain-config-required"),kt(r.config.apiKey,r,"invalid-api-key");const o={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:wd,eventId:a};if(e instanceof Mj){e.setDefaultLanguage(r.languageCode),o.providerId=e.providerId||"",$z(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof fg){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}r.tenantId&&(o.tid=r.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await r._getAppCheckToken(),u=c?`#${g9}=${encodeURIComponent(c)}`:"";return`${p9(r)}?${hg(l).slice(1)}${u}`}function p9({config:r}){return r.emulator?Pj(r,f9):`https://${r.authDomain}/${m9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="webStorageSupport";class x9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oj,this._completeRedirectFn=V7,this._overrideRedirectResult=F7}async _openPopup(e,t,s,a){var i;Ro((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await mE(e,t,s,V1(),a);return u9(e,o,Lj())}async _openRedirect(e,t,s,a){await this._originValidation(e);const i=await mE(e,t,s,V1(),a);return b7(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:i}=this.eventManagers[t];return a?Promise.resolve(a):(Ro(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await n9(e),s=new H7(e);return t.register("authEvent",a=>(kt(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jw,{type:jw},a=>{var i;const o=(i=a?.[0])===null||i===void 0?void 0:i[jw];o!==void 0&&t(!!o),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=X7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return g3()||c3()||Ij()}}const b9=x9;var fE="@firebase/auth",gE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function w9(r){nd(new Pl("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;kt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p3(r)},u=new EB(s,a,i,c);return UB(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),nd(new Pl("auth-internal",e=>{const t=li(e.getProvider("auth").getImmediate());return(s=>new y9(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pi(fE,gE,v9(r)),Pi(fE,gE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=300,j9=Y4("authIdTokenMaxAge")||N9;let pE=null;const k9=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>j9)return;const a=t?.token;pE!==a&&(pE=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function ch(r=Aj()){const e=bb(r,"auth");if(e.isInitialized())return e.getImmediate();const t=FB(r,{popupRedirectResolver:b9,persistence:[A7,T3,Oj]}),s=Y4("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=k9(i.toString());h7(t,o,()=>o(t.currentUser)),u7(t,l=>o(l))}}const a=H4("auth");return a&&zB(t,`http://${a}`),t}function S9(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}TB({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const i=ti("internal-error");i.customData=a,t(i)},s.type="text/javascript",s.charset="UTF-8",S9().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});w9("Browser");var xE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _l,U3;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,T){function D(){}D.prototype=T.prototype,P.D=T.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(L,F,z){for(var O=Array(arguments.length-2),V=2;V<arguments.length;V++)O[V-2]=arguments[V];return T.prototype[F].apply(L,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,T,D){D||(D=0);var L=Array(16);if(typeof T=="string")for(var F=0;16>F;++F)L[F]=T.charCodeAt(D++)|T.charCodeAt(D++)<<8|T.charCodeAt(D++)<<16|T.charCodeAt(D++)<<24;else for(F=0;16>F;++F)L[F]=T[D++]|T[D++]<<8|T[D++]<<16|T[D++]<<24;T=P.g[0],D=P.g[1],F=P.g[2];var z=P.g[3],O=T+(z^D&(F^z))+L[0]+3614090360&4294967295;T=D+(O<<7&4294967295|O>>>25),O=z+(F^T&(D^F))+L[1]+3905402710&4294967295,z=T+(O<<12&4294967295|O>>>20),O=F+(D^z&(T^D))+L[2]+606105819&4294967295,F=z+(O<<17&4294967295|O>>>15),O=D+(T^F&(z^T))+L[3]+3250441966&4294967295,D=F+(O<<22&4294967295|O>>>10),O=T+(z^D&(F^z))+L[4]+4118548399&4294967295,T=D+(O<<7&4294967295|O>>>25),O=z+(F^T&(D^F))+L[5]+1200080426&4294967295,z=T+(O<<12&4294967295|O>>>20),O=F+(D^z&(T^D))+L[6]+2821735955&4294967295,F=z+(O<<17&4294967295|O>>>15),O=D+(T^F&(z^T))+L[7]+4249261313&4294967295,D=F+(O<<22&4294967295|O>>>10),O=T+(z^D&(F^z))+L[8]+1770035416&4294967295,T=D+(O<<7&4294967295|O>>>25),O=z+(F^T&(D^F))+L[9]+2336552879&4294967295,z=T+(O<<12&4294967295|O>>>20),O=F+(D^z&(T^D))+L[10]+4294925233&4294967295,F=z+(O<<17&4294967295|O>>>15),O=D+(T^F&(z^T))+L[11]+2304563134&4294967295,D=F+(O<<22&4294967295|O>>>10),O=T+(z^D&(F^z))+L[12]+1804603682&4294967295,T=D+(O<<7&4294967295|O>>>25),O=z+(F^T&(D^F))+L[13]+4254626195&4294967295,z=T+(O<<12&4294967295|O>>>20),O=F+(D^z&(T^D))+L[14]+2792965006&4294967295,F=z+(O<<17&4294967295|O>>>15),O=D+(T^F&(z^T))+L[15]+1236535329&4294967295,D=F+(O<<22&4294967295|O>>>10),O=T+(F^z&(D^F))+L[1]+4129170786&4294967295,T=D+(O<<5&4294967295|O>>>27),O=z+(D^F&(T^D))+L[6]+3225465664&4294967295,z=T+(O<<9&4294967295|O>>>23),O=F+(T^D&(z^T))+L[11]+643717713&4294967295,F=z+(O<<14&4294967295|O>>>18),O=D+(z^T&(F^z))+L[0]+3921069994&4294967295,D=F+(O<<20&4294967295|O>>>12),O=T+(F^z&(D^F))+L[5]+3593408605&4294967295,T=D+(O<<5&4294967295|O>>>27),O=z+(D^F&(T^D))+L[10]+38016083&4294967295,z=T+(O<<9&4294967295|O>>>23),O=F+(T^D&(z^T))+L[15]+3634488961&4294967295,F=z+(O<<14&4294967295|O>>>18),O=D+(z^T&(F^z))+L[4]+3889429448&4294967295,D=F+(O<<20&4294967295|O>>>12),O=T+(F^z&(D^F))+L[9]+568446438&4294967295,T=D+(O<<5&4294967295|O>>>27),O=z+(D^F&(T^D))+L[14]+3275163606&4294967295,z=T+(O<<9&4294967295|O>>>23),O=F+(T^D&(z^T))+L[3]+4107603335&4294967295,F=z+(O<<14&4294967295|O>>>18),O=D+(z^T&(F^z))+L[8]+1163531501&4294967295,D=F+(O<<20&4294967295|O>>>12),O=T+(F^z&(D^F))+L[13]+2850285829&4294967295,T=D+(O<<5&4294967295|O>>>27),O=z+(D^F&(T^D))+L[2]+4243563512&4294967295,z=T+(O<<9&4294967295|O>>>23),O=F+(T^D&(z^T))+L[7]+1735328473&4294967295,F=z+(O<<14&4294967295|O>>>18),O=D+(z^T&(F^z))+L[12]+2368359562&4294967295,D=F+(O<<20&4294967295|O>>>12),O=T+(D^F^z)+L[5]+4294588738&4294967295,T=D+(O<<4&4294967295|O>>>28),O=z+(T^D^F)+L[8]+2272392833&4294967295,z=T+(O<<11&4294967295|O>>>21),O=F+(z^T^D)+L[11]+1839030562&4294967295,F=z+(O<<16&4294967295|O>>>16),O=D+(F^z^T)+L[14]+4259657740&4294967295,D=F+(O<<23&4294967295|O>>>9),O=T+(D^F^z)+L[1]+2763975236&4294967295,T=D+(O<<4&4294967295|O>>>28),O=z+(T^D^F)+L[4]+1272893353&4294967295,z=T+(O<<11&4294967295|O>>>21),O=F+(z^T^D)+L[7]+4139469664&4294967295,F=z+(O<<16&4294967295|O>>>16),O=D+(F^z^T)+L[10]+3200236656&4294967295,D=F+(O<<23&4294967295|O>>>9),O=T+(D^F^z)+L[13]+681279174&4294967295,T=D+(O<<4&4294967295|O>>>28),O=z+(T^D^F)+L[0]+3936430074&4294967295,z=T+(O<<11&4294967295|O>>>21),O=F+(z^T^D)+L[3]+3572445317&4294967295,F=z+(O<<16&4294967295|O>>>16),O=D+(F^z^T)+L[6]+76029189&4294967295,D=F+(O<<23&4294967295|O>>>9),O=T+(D^F^z)+L[9]+3654602809&4294967295,T=D+(O<<4&4294967295|O>>>28),O=z+(T^D^F)+L[12]+3873151461&4294967295,z=T+(O<<11&4294967295|O>>>21),O=F+(z^T^D)+L[15]+530742520&4294967295,F=z+(O<<16&4294967295|O>>>16),O=D+(F^z^T)+L[2]+3299628645&4294967295,D=F+(O<<23&4294967295|O>>>9),O=T+(F^(D|~z))+L[0]+4096336452&4294967295,T=D+(O<<6&4294967295|O>>>26),O=z+(D^(T|~F))+L[7]+1126891415&4294967295,z=T+(O<<10&4294967295|O>>>22),O=F+(T^(z|~D))+L[14]+2878612391&4294967295,F=z+(O<<15&4294967295|O>>>17),O=D+(z^(F|~T))+L[5]+4237533241&4294967295,D=F+(O<<21&4294967295|O>>>11),O=T+(F^(D|~z))+L[12]+1700485571&4294967295,T=D+(O<<6&4294967295|O>>>26),O=z+(D^(T|~F))+L[3]+2399980690&4294967295,z=T+(O<<10&4294967295|O>>>22),O=F+(T^(z|~D))+L[10]+4293915773&4294967295,F=z+(O<<15&4294967295|O>>>17),O=D+(z^(F|~T))+L[1]+2240044497&4294967295,D=F+(O<<21&4294967295|O>>>11),O=T+(F^(D|~z))+L[8]+1873313359&4294967295,T=D+(O<<6&4294967295|O>>>26),O=z+(D^(T|~F))+L[15]+4264355552&4294967295,z=T+(O<<10&4294967295|O>>>22),O=F+(T^(z|~D))+L[6]+2734768916&4294967295,F=z+(O<<15&4294967295|O>>>17),O=D+(z^(F|~T))+L[13]+1309151649&4294967295,D=F+(O<<21&4294967295|O>>>11),O=T+(F^(D|~z))+L[4]+4149444226&4294967295,T=D+(O<<6&4294967295|O>>>26),O=z+(D^(T|~F))+L[11]+3174756917&4294967295,z=T+(O<<10&4294967295|O>>>22),O=F+(T^(z|~D))+L[2]+718787259&4294967295,F=z+(O<<15&4294967295|O>>>17),O=D+(z^(F|~T))+L[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(F+(O<<21&4294967295|O>>>11))&4294967295,P.g[2]=P.g[2]+F&4294967295,P.g[3]=P.g[3]+z&4294967295}s.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var D=T-this.blockSize,L=this.B,F=this.h,z=0;z<T;){if(F==0)for(;z<=D;)a(this,P,z),z+=this.blockSize;if(typeof P=="string"){for(;z<T;)if(L[F++]=P.charCodeAt(z++),F==this.blockSize){a(this,L),F=0;break}}else for(;z<T;)if(L[F++]=P[z++],F==this.blockSize){a(this,L),F=0;break}}this.h=F,this.o+=T},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var D=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=D&255,D/=256;for(this.u(P),P=Array(16),T=D=0;4>T;++T)for(var L=0;32>L;L+=8)P[D++]=this.g[T]>>>L&255;return P};function i(P,T){var D=l;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=T(P)}function o(P,T){this.h=T;for(var D=[],L=!0,F=P.length-1;0<=F;F--){var z=P[F]|0;L&&z==T||(D[F]=z,L=!1)}this.g=D}var l={};function c(P){return-128<=P&&128>P?i(P,function(T){return new o([T|0],0>T?-1:0)}):new o([P|0],0>P?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return f;if(0>P)return v(u(-P));for(var T=[],D=1,L=0;P>=D;L++)T[L]=P/D|0,D*=4294967296;return new o(T,0)}function h(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return v(h(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=u(Math.pow(T,8)),L=f,F=0;F<P.length;F+=8){var z=Math.min(8,P.length-F),O=parseInt(P.substring(F,F+z),T);8>z?(z=u(Math.pow(T,z)),L=L.j(z).add(u(O))):(L=L.j(D),L=L.add(u(O)))}return L}var f=c(0),g=c(1),x=c(16777216);r=o.prototype,r.m=function(){if(b(this))return-v(this).m();for(var P=0,T=1,D=0;D<this.g.length;D++){var L=this.i(D);P+=(0<=L?L:4294967296+L)*T,T*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(y(this))return"0";if(b(this))return"-"+v(this).toString(P);for(var T=u(Math.pow(P,6)),D=this,L="";;){var F=R(D,T).g;D=N(D,F.j(T));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=F,y(D))return z+L;for(;6>z.length;)z="0"+z;L=z+L}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function y(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function b(P){return P.h==-1}r.l=function(P){return P=N(this,P),b(P)?-1:y(P)?0:1};function v(P){for(var T=P.g.length,D=[],L=0;L<T;L++)D[L]=~P.g[L];return new o(D,~P.h).add(g)}r.abs=function(){return b(this)?v(this):this},r.add=function(P){for(var T=Math.max(this.g.length,P.g.length),D=[],L=0,F=0;F<=T;F++){var z=L+(this.i(F)&65535)+(P.i(F)&65535),O=(z>>>16)+(this.i(F)>>>16)+(P.i(F)>>>16);L=O>>>16,z&=65535,O&=65535,D[F]=O<<16|z}return new o(D,D[D.length-1]&-2147483648?-1:0)};function N(P,T){return P.add(v(T))}r.j=function(P){if(y(this)||y(P))return f;if(b(this))return b(P)?v(this).j(v(P)):v(v(this).j(P));if(b(P))return v(this.j(v(P)));if(0>this.l(x)&&0>P.l(x))return u(this.m()*P.m());for(var T=this.g.length+P.g.length,D=[],L=0;L<2*T;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(var F=0;F<P.g.length;F++){var z=this.i(L)>>>16,O=this.i(L)&65535,V=P.i(F)>>>16,Y=P.i(F)&65535;D[2*L+2*F]+=O*Y,k(D,2*L+2*F),D[2*L+2*F+1]+=z*Y,k(D,2*L+2*F+1),D[2*L+2*F+1]+=O*V,k(D,2*L+2*F+1),D[2*L+2*F+2]+=z*V,k(D,2*L+2*F+2)}for(L=0;L<T;L++)D[L]=D[2*L+1]<<16|D[2*L];for(L=T;L<2*T;L++)D[L]=0;return new o(D,0)};function k(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function A(P,T){this.g=P,this.h=T}function R(P,T){if(y(T))throw Error("division by zero");if(y(P))return new A(f,f);if(b(P))return T=R(v(P),T),new A(v(T.g),v(T.h));if(b(T))return T=R(P,v(T)),new A(v(T.g),T.h);if(30<P.g.length){if(b(P)||b(T))throw Error("slowDivide_ only works with positive integers.");for(var D=g,L=T;0>=L.l(P);)D=_(D),L=_(L);var F=I(D,1),z=I(L,1);for(L=I(L,2),D=I(D,2);!y(L);){var O=z.add(L);0>=O.l(P)&&(F=F.add(D),z=O),L=I(L,1),D=I(D,1)}return T=N(P,F.j(T)),new A(F,T)}for(F=f;0<=P.l(T);){for(D=Math.max(1,Math.floor(P.m()/T.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),z=u(D),O=z.j(T);b(O)||0<O.l(P);)D-=L,z=u(D),O=z.j(T);y(z)&&(z=g),F=F.add(z),P=N(P,O)}return new A(F,P)}r.A=function(P){return R(this,P).h},r.and=function(P){for(var T=Math.max(this.g.length,P.g.length),D=[],L=0;L<T;L++)D[L]=this.i(L)&P.i(L);return new o(D,this.h&P.h)},r.or=function(P){for(var T=Math.max(this.g.length,P.g.length),D=[],L=0;L<T;L++)D[L]=this.i(L)|P.i(L);return new o(D,this.h|P.h)},r.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),D=[],L=0;L<T;L++)D[L]=this.i(L)^P.i(L);return new o(D,this.h^P.h)};function _(P){for(var T=P.g.length+1,D=[],L=0;L<T;L++)D[L]=P.i(L)<<1|P.i(L-1)>>>31;return new o(D,P.h)}function I(P,T){var D=T>>5;T%=32;for(var L=P.g.length-D,F=[],z=0;z<L;z++)F[z]=0<T?P.i(z+D)>>>T|P.i(z+D+1)<<32-T:P.i(z+D);return new o(F,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,U3=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,_l=o}).apply(typeof xE<"u"?xE:typeof self<"u"?self:typeof window<"u"?window:{});var ox=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z3,Gm,V3,Qx,W1,B3,H3,$3;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,U,W){return S==Array.prototype||S==Object.prototype||(S[U]=W.value),S};function t(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof ox=="object"&&ox];for(var U=0;U<S.length;++U){var W=S[U];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var s=t(this);function a(S,U){if(U)e:{var W=s;S=S.split(".");for(var Z=0;Z<S.length-1;Z++){var ge=S[Z];if(!(ge in W))break e;W=W[ge]}S=S[S.length-1],Z=W[S],U=U(Z),U!=Z&&U!=null&&e(W,S,{configurable:!0,writable:!0,value:U})}}function i(S,U){S instanceof String&&(S+="");var W=0,Z=!1,ge={next:function(){if(!Z&&W<S.length){var Ce=W++;return{value:U(Ce,S[Ce]),done:!1}}return Z=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}a("Array.prototype.values",function(S){return S||function(){return i(this,function(U,W){return W})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(S){var U=typeof S;return U=U!="object"?U:S?Array.isArray(S)?"array":U:"null",U=="array"||U=="object"&&typeof S.length=="number"}function u(S){var U=typeof S;return U=="object"&&S!=null||U=="function"}function h(S,U,W){return S.call.apply(S.bind,arguments)}function f(S,U,W){if(!S)throw Error();if(2<arguments.length){var Z=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,Z),S.apply(U,ge)}}return function(){return S.apply(U,arguments)}}function g(S,U,W){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function x(S,U){var W=Array.prototype.slice.call(arguments,1);return function(){var Z=W.slice();return Z.push.apply(Z,arguments),S.apply(this,Z)}}function y(S,U){function W(){}W.prototype=U.prototype,S.aa=U.prototype,S.prototype=new W,S.prototype.constructor=S,S.Qb=function(Z,ge,Ce){for(var nt=Array(arguments.length-2),hs=2;hs<arguments.length;hs++)nt[hs-2]=arguments[hs];return U.prototype[ge].apply(Z,nt)}}function b(S){const U=S.length;if(0<U){const W=Array(U);for(let Z=0;Z<U;Z++)W[Z]=S[Z];return W}return[]}function v(S,U){for(let W=1;W<arguments.length;W++){const Z=arguments[W];if(c(Z)){const ge=S.length||0,Ce=Z.length||0;S.length=ge+Ce;for(let nt=0;nt<Ce;nt++)S[ge+nt]=Z[nt]}else S.push(Z)}}class N{constructor(U,W){this.i=U,this.j=W,this.h=0,this.g=null}get(){let U;return 0<this.h?(this.h--,U=this.g,this.g=U.next,U.next=null):U=this.i(),U}}function k(S){return/^[\s\xa0]*$/.test(S)}function A(){var S=l.navigator;return S&&(S=S.userAgent)?S:""}function R(S){return R[" "](S),S}R[" "]=function(){};var _=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function I(S,U,W){for(const Z in S)U.call(W,S[Z],Z,S)}function P(S,U){for(const W in S)U.call(void 0,S[W],W,S)}function T(S){const U={};for(const W in S)U[W]=S[W];return U}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(S,U){let W,Z;for(let ge=1;ge<arguments.length;ge++){Z=arguments[ge];for(W in Z)S[W]=Z[W];for(let Ce=0;Ce<D.length;Ce++)W=D[Ce],Object.prototype.hasOwnProperty.call(Z,W)&&(S[W]=Z[W])}}function F(S){var U=1;S=S.split(":");const W=[];for(;0<U&&S.length;)W.push(S.shift()),U--;return S.length&&W.push(S.join(":")),W}function z(S){l.setTimeout(()=>{throw S},0)}function O(){var S=G;let U=null;return S.g&&(U=S.g,S.g=S.g.next,S.g||(S.h=null),U.next=null),U}class V{constructor(){this.h=this.g=null}add(U,W){const Z=Y.get();Z.set(U,W),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var Y=new N(()=>new H,S=>S.reset());class H{constructor(){this.next=this.g=this.h=null}set(U,W){this.h=U,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let $,X=!1,G=new V,B=()=>{const S=l.Promise.resolve(void 0);$=()=>{S.then(Q)}};var Q=()=>{for(var S;S=O();){try{S.h.call(S.g)}catch(W){z(W)}var U=Y;U.j(S),100>U.h&&(U.h++,S.next=U.g,U.g=S)}X=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(S,U){this.type=S,this.g=this.target=U,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var S=!1,U=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const W=()=>{};l.addEventListener("test",W,U),l.removeEventListener("test",W,U)}catch{}return S}();function Ee(S,U){if(se.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var W=this.type=S.type,Z=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=U,U=S.relatedTarget){if(_){e:{try{R(U.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(U=null)}}else W=="mouseover"?U=S.fromElement:W=="mouseout"&&(U=S.toElement);this.relatedTarget=U,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:ue[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&Ee.aa.h.call(this)}}y(Ee,se);var ue={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),Pe=0;function Ie(S,U,W,Z,ge){this.listener=S,this.proxy=null,this.src=U,this.type=W,this.capture=!!Z,this.ha=ge,this.key=++Pe,this.da=this.fa=!1}function ie(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function ze(S){this.src=S,this.g={},this.h=0}ze.prototype.add=function(S,U,W,Z,ge){var Ce=S.toString();S=this.g[Ce],S||(S=this.g[Ce]=[],this.h++);var nt=ce(S,U,Z,ge);return-1<nt?(U=S[nt],W||(U.fa=!1)):(U=new Ie(U,this.src,Ce,!!Z,ge),U.fa=W,S.push(U)),U};function Ve(S,U){var W=U.type;if(W in S.g){var Z=S.g[W],ge=Array.prototype.indexOf.call(Z,U,void 0),Ce;(Ce=0<=ge)&&Array.prototype.splice.call(Z,ge,1),Ce&&(ie(U),S.g[W].length==0&&(delete S.g[W],S.h--))}}function ce(S,U,W,Z){for(var ge=0;ge<S.length;++ge){var Ce=S[ge];if(!Ce.da&&Ce.listener==U&&Ce.capture==!!W&&Ce.ha==Z)return ge}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),Qe={};function me(S,U,W,Z,ge){if(Array.isArray(U)){for(var Ce=0;Ce<U.length;Ce++)me(S,U[Ce],W,Z,ge);return null}return W=as(W),S&&S[Oe]?S.K(U,W,u(Z)?!!Z.capture:!1,ge):$e(S,U,W,!1,Z,ge)}function $e(S,U,W,Z,ge,Ce){if(!U)throw Error("Invalid event type");var nt=u(ge)?!!ge.capture:!!ge,hs=vt(S);if(hs||(S[ke]=hs=new ze(S)),W=hs.add(U,W,Z,nt,Ce),W.proxy)return W;if(Z=tt(),W.proxy=Z,Z.src=S,Z.listener=W,S.addEventListener)le||(ge=nt),ge===void 0&&(ge=!1),S.addEventListener(U.toString(),Z,ge);else if(S.attachEvent)S.attachEvent(Xe(U.toString()),Z);else if(S.addListener&&S.removeListener)S.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return W}function tt(){function S(W){return U.call(S.src,S.listener,W)}const U=st;return S}function Ye(S,U,W,Z,ge){if(Array.isArray(U))for(var Ce=0;Ce<U.length;Ce++)Ye(S,U[Ce],W,Z,ge);else Z=u(Z)?!!Z.capture:!!Z,W=as(W),S&&S[Oe]?(S=S.i,U=String(U).toString(),U in S.g&&(Ce=S.g[U],W=ce(Ce,W,Z,ge),-1<W&&(ie(Ce[W]),Array.prototype.splice.call(Ce,W,1),Ce.length==0&&(delete S.g[U],S.h--)))):S&&(S=vt(S))&&(U=S.g[U.toString()],S=-1,U&&(S=ce(U,W,Z,ge)),(W=-1<S?U[S]:null)&&De(W))}function De(S){if(typeof S!="number"&&S&&!S.da){var U=S.src;if(U&&U[Oe])Ve(U.i,S);else{var W=S.type,Z=S.proxy;U.removeEventListener?U.removeEventListener(W,Z,S.capture):U.detachEvent?U.detachEvent(Xe(W),Z):U.addListener&&U.removeListener&&U.removeListener(Z),(W=vt(U))?(Ve(W,S),W.h==0&&(W.src=null,U[ke]=null)):ie(S)}}}function Xe(S){return S in Qe?Qe[S]:Qe[S]="on"+S}function st(S,U){if(S.da)S=!0;else{U=new Ee(U,this);var W=S.listener,Z=S.ha||S.src;S.fa&&De(S),S=W.call(Z,U)}return S}function vt(S){return S=S[ke],S instanceof ze?S:null}var Mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function as(S){return typeof S=="function"?S:(S[Mt]||(S[Mt]=function(U){return S.handleEvent(U)}),S[Mt])}function wt(){ee.call(this),this.i=new ze(this),this.M=this,this.F=null}y(wt,ee),wt.prototype[Oe]=!0,wt.prototype.removeEventListener=function(S,U,W,Z){Ye(this,S,U,W,Z)};function Ge(S,U){var W,Z=S.F;if(Z)for(W=[];Z;Z=Z.F)W.push(Z);if(S=S.M,Z=U.type||U,typeof U=="string")U=new se(U,S);else if(U instanceof se)U.target=U.target||S;else{var ge=U;U=new se(Z,S),L(U,ge)}if(ge=!0,W)for(var Ce=W.length-1;0<=Ce;Ce--){var nt=U.g=W[Ce];ge=Pt(nt,Z,!0,U)&&ge}if(nt=U.g=S,ge=Pt(nt,Z,!0,U)&&ge,ge=Pt(nt,Z,!1,U)&&ge,W)for(Ce=0;Ce<W.length;Ce++)nt=U.g=W[Ce],ge=Pt(nt,Z,!1,U)&&ge}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var S=this.i,U;for(U in S.g){for(var W=S.g[U],Z=0;Z<W.length;Z++)ie(W[Z]);delete S.g[U],S.h--}}this.F=null},wt.prototype.K=function(S,U,W,Z){return this.i.add(String(S),U,!1,W,Z)},wt.prototype.L=function(S,U,W,Z){return this.i.add(String(S),U,!0,W,Z)};function Pt(S,U,W,Z){if(U=S.i.g[String(U)],!U)return!0;U=U.concat();for(var ge=!0,Ce=0;Ce<U.length;++Ce){var nt=U[Ce];if(nt&&!nt.da&&nt.capture==W){var hs=nt.listener,$r=nt.ha||nt.src;nt.fa&&Ve(S.i,nt),ge=hs.call($r,Z)!==!1&&ge}}return ge&&!Z.defaultPrevented}function bt(S,U,W){if(typeof S=="function")W&&(S=g(S,W));else if(S&&typeof S.handleEvent=="function")S=g(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(U)?-1:l.setTimeout(S,U||0)}function qt(S){S.g=bt(()=>{S.g=null,S.i&&(S.i=!1,qt(S))},S.l);const U=S.h;S.h=null,S.m.apply(null,U)}class Ct extends ee{constructor(U,W){super(),this.m=U,this.l=W,this.h=null,this.i=!1,this.g=null}j(U){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(S){ee.call(this),this.h=S,this.g={}}y(Bt,ee);var Kt=[];function Xt(S){I(S.g,function(U,W){this.g.hasOwnProperty(W)&&De(U)},S),S.g={}}Bt.prototype.N=function(){Bt.aa.N.call(this),Xt(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Js=l.JSON.stringify,At=l.JSON.parse,Vt=class{stringify(S){return l.JSON.stringify(S,void 0)}parse(S){return l.JSON.parse(S,void 0)}};function ar(){}ar.prototype.h=null;function Fs(S){return S.h||(S.h=S.i())}function nr(){}var Ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ts(){se.call(this,"d")}y(Ts,se);function Us(){se.call(this,"c")}y(Us,se);var Ps={},Pr=null;function vs(){return Pr=Pr||new wt}Ps.La="serverreachability";function ws(S){se.call(this,Ps.La,S)}y(ws,se);function Ws(S){const U=vs();Ge(U,new ws(U))}Ps.STAT_EVENT="statevent";function be(S,U){se.call(this,Ps.STAT_EVENT,S),this.stat=U}y(be,se);function de(S){const U=vs();Ge(U,new be(U,S))}Ps.Ma="timingevent";function Se(S,U){se.call(this,Ps.Ma,S),this.size=U}y(Se,se);function Je(S,U){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){S()},U)}function te(){this.g=!0}te.prototype.xa=function(){this.g=!1};function Ae(S,U,W,Z,ge,Ce){S.info(function(){if(S.g)if(Ce)for(var nt="",hs=Ce.split("&"),$r=0;$r<hs.length;$r++){var ms=hs[$r].split("=");if(1<ms.length){var Jr=ms[0];ms=ms[1];var Wr=Jr.split("_");nt=2<=Wr.length&&Wr[1]=="type"?nt+(Jr+"="+ms+"&"):nt+(Jr+"=redacted&")}}else nt=null;else nt=Ce;return"XMLHTTP REQ ("+Z+") [attempt "+ge+"]: "+U+`
`+W+`
`+nt})}function Fe(S,U,W,Z,ge,Ce,nt){S.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+ge+"]: "+U+`
`+W+`
`+Ce+" "+nt})}function gt(S,U,W,Z){S.info(function(){return"XMLHTTP TEXT ("+U+"): "+Ht(S,W)+(Z?" "+Z:"")})}function pt(S,U){S.info(function(){return"TIMEOUT: "+U})}te.prototype.info=function(){};function Ht(S,U){if(!S.g)return U;if(!U)return null;try{var W=JSON.parse(U);if(W){for(S=0;S<W.length;S++)if(Array.isArray(W[S])){var Z=W[S];if(!(2>Z.length)){var ge=Z[1];if(Array.isArray(ge)&&!(1>ge.length)){var Ce=ge[0];if(Ce!="noop"&&Ce!="stop"&&Ce!="close")for(var nt=1;nt<ge.length;nt++)ge[nt]=""}}}}return Js(W)}catch{return U}}var Qt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ba;function Ca(){}y(Ca,ar),Ca.prototype.g=function(){return new XMLHttpRequest},Ca.prototype.i=function(){return{}},Ba=new Ca;function Hr(S,U,W,Z){this.j=S,this.i=U,this.l=W,this.R=Z||1,this.U=new Bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ut}function Ut(){this.i=null,this.g="",this.h=!1}var wn={},Gi={};function Ea(S,U,W){S.L=1,S.v=sc(an(U)),S.m=W,S.P=!0,rn(S,null)}function rn(S,U){S.F=Date.now(),re(S),S.A=an(S.v);var W=S.A,Z=S.R;Array.isArray(Z)||(Z=[String(Z)]),Oh(W.i,"t",Z),S.C=0,W=S.j.J,S.h=new Ut,S.g=tp(S.j,W?U:null,!S.m),0<S.O&&(S.M=new Ct(g(S.Y,S,S.g),S.O)),U=S.U,W=S.g,Z=S.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(Kt[0]=ge.toString()),ge=Kt);for(var Ce=0;Ce<ge.length;Ce++){var nt=me(W,ge[Ce],Z||U.handleEvent,!1,U.h||U);if(!nt)break;U.g[nt.key]=nt}U=S.H?T(S.H):{},S.m?(S.u||(S.u="POST"),U["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,U)):(S.u="GET",S.g.ea(S.A,S.u,null,U)),Ws(),Ae(S.i,S.u,S.A,S.l,S.R,S.m)}Hr.prototype.ca=function(S){S=S.target;const U=this.M;U&&Sn(S)==3?U.j():this.Y(S)},Hr.prototype.Y=function(S){try{if(S==this.g)e:{const Wr=Sn(this.g);var U=this.g.Ba();const so=this.g.Z();if(!(3>Wr)&&(Wr!=3||this.g&&(this.h.h||this.g.oa()||qg(this.g)))){this.J||Wr!=4||U==7||(U==8||0>=so?Ws(3):Ws(2)),qe(this);var W=this.g.Z();this.X=W;t:if(zo(this)){var Z=qg(this.g);S="";var ge=Z.length,Ce=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mt(this),ot(this);var nt="";break t}this.h.i=new l.TextDecoder}for(U=0;U<ge;U++)this.h.h=!0,S+=this.h.i.decode(Z[U],{stream:!(Ce&&U==ge-1)});Z.length=0,this.h.g+=S,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=W==200,Fe(this.i,this.u,this.A,this.l,this.R,Wr,W),this.o){if(this.T&&!this.K){t:{if(this.g){var hs,$r=this.g;if((hs=$r.g?$r.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(hs)){var ms=hs;break t}}ms=null}if(W=ms)gt(this.i,this.l,W,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_t(this,W);else{this.o=!1,this.s=3,de(12),mt(this),ot(this);break e}}if(this.P){W=!0;let oa;for(;!this.J&&this.C<nt.length;)if(oa=zs(this,nt),oa==Gi){Wr==4&&(this.s=4,de(14),W=!1),gt(this.i,this.l,null,"[Incomplete Response]");break}else if(oa==wn){this.s=4,de(15),gt(this.i,this.l,nt,"[Invalid Chunk]"),W=!1;break}else gt(this.i,this.l,oa,null),_t(this,oa);if(zo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wr!=4||nt.length!=0||this.h.h||(this.s=1,de(16),W=!1),this.o=this.o&&W,!W)gt(this.i,this.l,nt,"[Invalid Chunked Response]"),mt(this),ot(this);else if(0<nt.length&&!this.W){this.W=!0;var Jr=this.j;Jr.g==this&&Jr.ba&&!Jr.M&&(Jr.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),dc(Jr),Jr.M=!0,de(11))}}else gt(this.i,this.l,nt,null),_t(this,nt);Wr==4&&mt(this),this.o&&!this.J&&(Wr==4?Zg(this.j,this):(this.o=!1,re(this)))}else py(this.g),W==400&&0<nt.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),mt(this),ot(this)}}}catch{}finally{}};function zo(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function zs(S,U){var W=S.C,Z=U.indexOf(`
`,W);return Z==-1?Gi:(W=Number(U.substring(W,Z)),isNaN(W)?wn:(Z+=1,Z+W>U.length?Gi:(U=U.slice(Z,Z+W),S.C=Z+W,U)))}Hr.prototype.cancel=function(){this.J=!0,mt(this)};function re(S){S.S=Date.now()+S.I,Ue(S,S.I)}function Ue(S,U){if(S.B!=null)throw Error("WatchDog timer not null");S.B=Je(g(S.ba,S),U)}function qe(S){S.B&&(l.clearTimeout(S.B),S.B=null)}Hr.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(pt(this.i,this.A),this.L!=2&&(Ws(),de(17)),mt(this),this.s=2,ot(this)):Ue(this,this.S-S)};function ot(S){S.j.G==0||S.J||Zg(S.j,S)}function mt(S){qe(S);var U=S.M;U&&typeof U.ma=="function"&&U.ma(),S.M=null,Xt(S.U),S.g&&(U=S.g,S.g=null,U.abort(),U.ma())}function _t(S,U){try{var W=S.j;if(W.G!=0&&(W.g==S||Bo(W.h,S))){if(!S.K&&Bo(W.h,S)&&W.G==3){try{var Z=W.Da.g.parse(U)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var ge=Z;if(ge[0]==0){e:if(!W.u){if(W.g)if(W.g.F+3e3<S.F)Ud(W),Ld(W);else break e;Vh(W),de(18)}}else W.za=ge[1],0<W.za-W.T&&37500>ge[2]&&W.F&&W.v==0&&!W.C&&(W.C=Je(g(W.Za,W),6e3));if(1>=Vo(W.h)&&W.ca){try{W.ca()}catch{}W.ca=void 0}}else to(W,11)}else if((S.K||W.g==S)&&Ud(W),!k(U))for(ge=W.Da.g.parse(U),U=0;U<ge.length;U++){let ms=ge[U];if(W.T=ms[0],ms=ms[1],W.G==2)if(ms[0]=="c"){W.K=ms[1],W.ia=ms[2];const Jr=ms[3];Jr!=null&&(W.la=Jr,W.j.info("VER="+W.la));const Wr=ms[4];Wr!=null&&(W.Aa=Wr,W.j.info("SVER="+W.Aa));const so=ms[5];so!=null&&typeof so=="number"&&0<so&&(Z=1.5*so,W.L=Z,W.j.info("backChannelRequestTimeoutMs_="+Z)),Z=W;const oa=S.g;if(oa){const pi=oa.g?oa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var Ce=Z.h;Ce.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||(Ce.j=Ce.l,Ce.g=new Set,Ce.h&&(Td(Ce,Ce.h),Ce.h=null))}if(Z.D){const Hh=oa.g?oa.g.getResponseHeader("X-HTTP-Session-Id"):null;Hh&&(Z.ya=Hh,Ys(Z.I,Z.D,Hh))}}W.G=3,W.l&&W.l.ua(),W.ba&&(W.R=Date.now()-S.F,W.j.info("Handshake RTT: "+W.R+"ms")),Z=W;var nt=S;if(Z.qa=ep(Z,Z.J?Z.ia:null,Z.W),nt.K){Ta(Z.h,nt);var hs=nt,$r=Z.L;$r&&(hs.I=$r),hs.B&&(qe(hs),re(hs)),Z.g=nt}else Kg(Z);0<W.i.length&&Fd(W)}else ms[0]!="stop"&&ms[0]!="close"||to(W,7);else W.G==3&&(ms[0]=="stop"||ms[0]=="close"?ms[0]=="stop"?to(W,7):Uh(W):ms[0]!="noop"&&W.l&&W.l.ta(ms),W.v=0)}}Ws(4)}catch{}}var yt=class{constructor(S,U){this.g=S,this.map=U}};function _s(S){this.l=S||10,l.PerformanceNavigationTiming?(S=l.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hn(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Vo(S){return S.h?1:S.g?S.g.size:0}function Bo(S,U){return S.h?S.h==U:S.g?S.g.has(U):!1}function Td(S,U){S.g?S.g.add(U):S.h=U}function Ta(S,U){S.h&&S.h==U?S.h=null:S.g&&S.g.has(U)&&S.g.delete(U)}_s.prototype.cancel=function(){if(this.i=Rh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function Rh(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let U=S.i;for(const W of S.g.values())U=U.concat(W.D);return U}return b(S.i)}function hy(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(c(S)){for(var U=[],W=S.length,Z=0;Z<W;Z++)U.push(S[Z]);return U}U=[],W=0;for(Z in S)U[W++]=S[Z];return U}function Pd(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(c(S)||typeof S=="string"){var U=[];S=S.length;for(var W=0;W<S;W++)U.push(W);return U}U=[],W=0;for(const Z in S)U[W++]=Z;return U}}}function Ih(S,U){if(S.forEach&&typeof S.forEach=="function")S.forEach(U,void 0);else if(c(S)||typeof S=="string")Array.prototype.forEach.call(S,U,void 0);else for(var W=Pd(S),Z=hy(S),ge=Z.length,Ce=0;Ce<ge;Ce++)U.call(void 0,Z[Ce],W&&W[Ce],S)}var ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function my(S,U){if(S){S=S.split("&");for(var W=0;W<S.length;W++){var Z=S[W].indexOf("="),ge=null;if(0<=Z){var Ce=S[W].substring(0,Z);ge=S[W].substring(Z+1)}else Ce=S[W];U(Ce,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function Ir(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof Ir){this.h=S.h,tc(this,S.j),this.o=S.o,this.g=S.g,Ho(this,S.s),this.l=S.l;var U=S.i,W=new Qi;W.i=U.i,U.g&&(W.g=new Map(U.g),W.h=U.h),Ki(this,W),this.m=S.m}else S&&(U=String(S).match(ec))?(this.h=!1,tc(this,U[1]||"",!0),this.o=Nn(U[2]||""),this.g=Nn(U[3]||"",!0),Ho(this,U[4]),this.l=Nn(U[5]||"",!0),Ki(this,U[6]||"",!0),this.m=Nn(U[7]||"")):(this.h=!1,this.i=new Qi(null,this.h))}Ir.prototype.toString=function(){var S=[],U=this.j;U&&S.push(rc(U,Dh,!0),":");var W=this.g;return(W||U=="file")&&(S.push("//"),(U=this.o)&&S.push(rc(U,Dh,!0),"@"),S.push(encodeURIComponent(String(W)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),W=this.s,W!=null&&S.push(":",String(W))),(W=this.l)&&(this.g&&W.charAt(0)!="/"&&S.push("/"),S.push(rc(W,W.charAt(0)=="/"?fy:Mh,!0))),(W=this.i.toString())&&S.push("?",W),(W=this.m)&&S.push("#",rc(W,Rd)),S.join("")};function an(S){return new Ir(S)}function tc(S,U,W){S.j=W?Nn(U,!0):U,S.j&&(S.j=S.j.replace(/:$/,""))}function Ho(S,U){if(U){if(U=Number(U),isNaN(U)||0>U)throw Error("Bad port number "+U);S.s=U}else S.s=null}function Ki(S,U,W){U instanceof Qi?(S.i=U,Wg(S.i,S.h)):(W||(U=rc(U,gy)),S.i=new Qi(U,S.h))}function Ys(S,U,W){S.i.set(U,W)}function sc(S){return Ys(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function Nn(S,U){return S?U?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function rc(S,U,W){return typeof S=="string"?(S=encodeURI(S).replace(U,$g),W&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function $g(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Dh=/[#\/\?@]/g,Mh=/[#\?:]/g,fy=/[#\?]/g,gy=/[#\?@]/g,Rd=/#/g;function Qi(S,U){this.h=this.g=null,this.i=S||null,this.j=!!U}function jn(S){S.g||(S.g=new Map,S.h=0,S.i&&my(S.i,function(U,W){S.add(decodeURIComponent(U.replace(/\+/g," ")),W)}))}r=Qi.prototype,r.add=function(S,U){jn(this),this.i=null,S=di(this,S);var W=this.g.get(S);return W||this.g.set(S,W=[]),W.push(U),this.h+=1,this};function Zi(S,U){jn(S),U=di(S,U),S.g.has(U)&&(S.i=null,S.h-=S.g.get(U).length,S.g.delete(U))}function Ji(S,U){return jn(S),U=di(S,U),S.g.has(U)}r.forEach=function(S,U){jn(this),this.g.forEach(function(W,Z){W.forEach(function(ge){S.call(U,ge,Z,this)},this)},this)},r.na=function(){jn(this);const S=Array.from(this.g.values()),U=Array.from(this.g.keys()),W=[];for(let Z=0;Z<U.length;Z++){const ge=S[Z];for(let Ce=0;Ce<ge.length;Ce++)W.push(U[Z])}return W},r.V=function(S){jn(this);let U=[];if(typeof S=="string")Ji(this,S)&&(U=U.concat(this.g.get(di(this,S))));else{S=Array.from(this.g.values());for(let W=0;W<S.length;W++)U=U.concat(S[W])}return U},r.set=function(S,U){return jn(this),this.i=null,S=di(this,S),Ji(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[U]),this.h+=1,this},r.get=function(S,U){return S?(S=this.V(S),0<S.length?String(S[0]):U):U};function Oh(S,U,W){Zi(S,U),0<W.length&&(S.i=null,S.g.set(di(S,U),b(W)),S.h+=W.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],U=Array.from(this.g.keys());for(var W=0;W<U.length;W++){var Z=U[W];const Ce=encodeURIComponent(String(Z)),nt=this.V(Z);for(Z=0;Z<nt.length;Z++){var ge=Ce;nt[Z]!==""&&(ge+="="+encodeURIComponent(String(nt[Z]))),S.push(ge)}}return this.i=S.join("&")};function di(S,U){return U=String(U),S.j&&(U=U.toLowerCase()),U}function Wg(S,U){U&&!S.j&&(jn(S),S.i=null,S.g.forEach(function(W,Z){var ge=Z.toLowerCase();Z!=ge&&(Zi(this,Z),Oh(this,ge,W))},S)),S.j=U}function ac(S,U){const W=new te;if(l.Image){const Z=new Image;Z.onload=x(kn,W,"TestLoadImage: loaded",!0,U,Z),Z.onerror=x(kn,W,"TestLoadImage: error",!1,U,Z),Z.onabort=x(kn,W,"TestLoadImage: abort",!1,U,Z),Z.ontimeout=x(kn,W,"TestLoadImage: timeout",!1,U,Z),l.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=S}else U(!1)}function $n(S,U){const W=new te,Z=new AbortController,ge=setTimeout(()=>{Z.abort(),kn(W,"TestPingServer: timeout",!1,U)},1e4);fetch(S,{signal:Z.signal}).then(Ce=>{clearTimeout(ge),Ce.ok?kn(W,"TestPingServer: ok",!0,U):kn(W,"TestPingServer: server error",!1,U)}).catch(()=>{clearTimeout(ge),kn(W,"TestPingServer: error",!1,U)})}function kn(S,U,W,Z,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),Z(W)}catch{}}function nc(){this.g=new Vt}function ui(S,U,W){const Z=W||"";try{Ih(S,function(ge,Ce){let nt=ge;u(ge)&&(nt=Js(ge)),U.push(Z+Ce+"="+encodeURIComponent(nt))})}catch(ge){throw U.push(Z+"type="+encodeURIComponent("_badmap")),ge}}function $o(S){this.l=S.Ub||null,this.j=S.eb||!1}y($o,ar),$o.prototype.g=function(){return new eo(this.l,this.j)},$o.prototype.i=function(S){return function(){return S}}({});function eo(S,U){wt.call(this),this.D=S,this.o=U,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(eo,wt),r=eo.prototype,r.open=function(S,U){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=U,this.readyState=1,mi(this)},r.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const U={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(U.body=S),(this.D||l).fetch(new Request(this.A,U)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},r.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lh(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lh(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}r.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var U=S.value?S.value:new Uint8Array(0);(U=this.v.decode(U,{stream:!S.done}))&&(this.response=this.responseText+=U)}S.done?hi(this):mi(this),this.readyState==3&&Lh(this)}},r.Ra=function(S){this.g&&(this.response=this.responseText=S,hi(this))},r.Qa=function(S){this.g&&(this.response=S,hi(this))},r.ga=function(){this.g&&hi(this)};function hi(S){S.readyState=4,S.l=null,S.j=null,S.v=null,mi(S)}r.setRequestHeader=function(S,U){this.u.append(S,U)},r.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],U=this.h.entries();for(var W=U.next();!W.done;)W=W.value,S.push(W[0]+": "+W[1]),W=U.next();return S.join(`\r
`)};function mi(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function Fh(S){let U="";return I(S,function(W,Z){U+=Z,U+=":",U+=W,U+=`\r
`}),U}function Zr(S,U,W){e:{for(Z in W){var Z=!1;break e}Z=!0}Z||(W=Fh(W),typeof S=="string"?W!=null&&encodeURIComponent(String(W)):Ys(S,U,W))}function Rs(S){wt.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Rs,wt);var Id=/^https?$/i,ic=["POST","PUT"];r=Rs.prototype,r.Ha=function(S){this.J=S},r.ea=function(S,U,W,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);U=U?U.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ba.g(),this.v=this.o?Fs(this.o):Fs(Ba),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(U,String(S),!0),this.B=!1}catch(Ce){Yg(this,Ce);return}if(S=W||"",W=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var ge in Z)W.set(ge,Z[ge]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const Ce of Z.keys())W.set(Ce,Z.get(Ce));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(W.keys()).find(Ce=>Ce.toLowerCase()=="content-type"),ge=l.FormData&&S instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ic,U,void 0))||Z||ge||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ce,nt]of W)this.g.setRequestHeader(Ce,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oc(this),this.u=!0,this.g.send(S),this.u=!1}catch(Ce){Yg(this,Ce)}};function Yg(S,U){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=U,S.m=5,Dd(S),fi(S)}function Dd(S){S.A||(S.A=!0,Ge(S,"complete"),Ge(S,"error"))}r.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,Ge(this,"complete"),Ge(this,"abort"),fi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),Rs.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Md(this):this.bb())},r.bb=function(){Md(this)};function Md(S){if(S.h&&typeof o<"u"&&(!S.v[1]||Sn(S)!=4||S.Z()!=2)){if(S.u&&Sn(S)==4)bt(S.Ea,0,S);else if(Ge(S,"readystatechange"),Sn(S)==4){S.h=!1;try{const nt=S.Z();e:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var U=!0;break e;default:U=!1}var W;if(!(W=U)){var Z;if(Z=nt===0){var ge=String(S.D).match(ec)[1]||null;!ge&&l.self&&l.self.location&&(ge=l.self.location.protocol.slice(0,-1)),Z=!Id.test(ge?ge.toLowerCase():"")}W=Z}if(W)Ge(S,"complete"),Ge(S,"success");else{S.m=6;try{var Ce=2<Sn(S)?S.g.statusText:""}catch{Ce=""}S.l=Ce+" ["+S.Z()+"]",Dd(S)}}finally{fi(S)}}}}function fi(S,U){if(S.g){oc(S);const W=S.g,Z=S.v[0]?()=>{}:null;S.g=null,S.v=null,U||Ge(S,"ready");try{W.onreadystatechange=Z}catch{}}}function oc(S){S.I&&(l.clearTimeout(S.I),S.I=null)}r.isActive=function(){return!!this.g};function Sn(S){return S.g?S.g.readyState:0}r.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(S){if(this.g){var U=this.g.responseText;return S&&U.indexOf(S)==0&&(U=U.substring(S.length)),At(U)}};function qg(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function py(S){const U={};S=(S.g&&2<=Sn(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<S.length;Z++){if(k(S[Z]))continue;var W=F(S[Z]);const ge=W[0];if(W=W[1],typeof W!="string")continue;W=W.trim();const Ce=U[ge]||[];U[ge]=Ce,Ce.push(W)}P(U,function(Z){return Z.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lc(S,U,W){return W&&W.internalChannelParams&&W.internalChannelParams[S]||U}function Od(S){this.Aa=0,this.i=[],this.j=new te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lc("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lc("baseRetryDelayMs",5e3,S),this.cb=lc("retryDelaySeedMs",1e4,S),this.Wa=lc("forwardChannelMaxRetries",2,S),this.wa=lc("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new _s(S&&S.concurrentRequestLimit),this.Da=new nc,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Od.prototype,r.la=8,r.G=1,r.connect=function(S,U,W,Z){de(0),this.W=S,this.H=U||{},W&&Z!==void 0&&(this.H.OSID=W,this.H.OAID=Z),this.F=this.X,this.I=ep(this,null,this.W),Fd(this)};function Uh(S){if(Xg(S),S.G==3){var U=S.U++,W=an(S.I);if(Ys(W,"SID",S.K),Ys(W,"RID",U),Ys(W,"TYPE","terminate"),cc(S,W),U=new Hr(S,S.j,U),U.L=2,U.v=sc(an(W)),W=!1,l.navigator&&l.navigator.sendBeacon)try{W=l.navigator.sendBeacon(U.v.toString(),"")}catch{}!W&&l.Image&&(new Image().src=U.v,W=!0),W||(U.g=tp(U.j,null),U.g.ea(U.v)),U.F=Date.now(),re(U)}Jg(S)}function Ld(S){S.g&&(dc(S),S.g.cancel(),S.g=null)}function Xg(S){Ld(S),S.u&&(l.clearTimeout(S.u),S.u=null),Ud(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&l.clearTimeout(S.s),S.s=null)}function Fd(S){if(!Hn(S.h)&&!S.s){S.s=!0;var U=S.Ga;$||B(),X||($(),X=!0),G.add(U,S),S.B=0}}function xy(S,U){return Vo(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=U.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=Je(g(S.Ga,S,U),Bh(S,S.B)),S.B++,!0)}r.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const ge=new Hr(this,this.j,S);let Ce=this.o;if(this.S&&(Ce?(Ce=T(Ce),L(Ce,this.S)):Ce=this.S),this.m!==null||this.O||(ge.H=Ce,Ce=null),this.P)e:{for(var U=0,W=0;W<this.i.length;W++){t:{var Z=this.i[W];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(U+=Z,4096<U){U=W;break e}if(U===4096||W===this.i.length-1){U=W+1;break e}}U=1e3}else U=1e3;U=Gg(this,ge,U),W=an(this.I),Ys(W,"RID",S),Ys(W,"CVER",22),this.D&&Ys(W,"X-HTTP-Session-Id",this.D),cc(this,W),Ce&&(this.O?U="headers="+encodeURIComponent(String(Fh(Ce)))+"&"+U:this.m&&Zr(W,this.m,Ce)),Td(this.h,ge),this.Ua&&Ys(W,"TYPE","init"),this.P?(Ys(W,"$req",U),Ys(W,"SID","null"),ge.T=!0,Ea(ge,W,null)):Ea(ge,W,U),this.G=2}}else this.G==3&&(S?zh(this,S):this.i.length==0||Hn(this.h)||zh(this))};function zh(S,U){var W;U?W=U.l:W=S.U++;const Z=an(S.I);Ys(Z,"SID",S.K),Ys(Z,"RID",W),Ys(Z,"AID",S.T),cc(S,Z),S.m&&S.o&&Zr(Z,S.m,S.o),W=new Hr(S,S.j,W,S.B+1),S.m===null&&(W.H=S.o),U&&(S.i=U.D.concat(S.i)),U=Gg(S,W,1e3),W.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),Td(S.h,W),Ea(W,Z,U)}function cc(S,U){S.H&&I(S.H,function(W,Z){Ys(U,Z,W)}),S.l&&Ih({},function(W,Z){Ys(U,Z,W)})}function Gg(S,U,W){W=Math.min(S.i.length,W);var Z=S.l?g(S.l.Na,S.l,S):null;e:{var ge=S.i;let Ce=-1;for(;;){const nt=["count="+W];Ce==-1?0<W?(Ce=ge[0].g,nt.push("ofs="+Ce)):Ce=0:nt.push("ofs="+Ce);let hs=!0;for(let $r=0;$r<W;$r++){let ms=ge[$r].g;const Jr=ge[$r].map;if(ms-=Ce,0>ms)Ce=Math.max(0,ge[$r].g-100),hs=!1;else try{ui(Jr,nt,"req"+ms+"_")}catch{Z&&Z(Jr)}}if(hs){Z=nt.join("&");break e}}}return S=S.i.splice(0,W),U.D=S,Z}function Kg(S){if(!S.g&&!S.u){S.Y=1;var U=S.Fa;$||B(),X||($(),X=!0),G.add(U,S),S.v=0}}function Vh(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=Je(g(S.Fa,S),Bh(S,S.v)),S.v++,!0)}r.Fa=function(){if(this.u=null,Qg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=Je(g(this.ab,this),S)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),Ld(this),Qg(this))};function dc(S){S.A!=null&&(l.clearTimeout(S.A),S.A=null)}function Qg(S){S.g=new Hr(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var U=an(S.qa);Ys(U,"RID","rpc"),Ys(U,"SID",S.K),Ys(U,"AID",S.T),Ys(U,"CI",S.F?"0":"1"),!S.F&&S.ja&&Ys(U,"TO",S.ja),Ys(U,"TYPE","xmlhttp"),cc(S,U),S.m&&S.o&&Zr(U,S.m,S.o),S.L&&(S.g.I=S.L);var W=S.g;S=S.ia,W.L=1,W.v=sc(an(U)),W.m=null,W.P=!0,rn(W,S)}r.Za=function(){this.C!=null&&(this.C=null,Ld(this),Vh(this),de(19))};function Ud(S){S.C!=null&&(l.clearTimeout(S.C),S.C=null)}function Zg(S,U){var W=null;if(S.g==U){Ud(S),dc(S),S.g=null;var Z=2}else if(Bo(S.h,U))W=U.D,Ta(S.h,U),Z=1;else return;if(S.G!=0){if(U.o)if(Z==1){W=U.m?U.m.length:0,U=Date.now()-U.F;var ge=S.B;Z=vs(),Ge(Z,new Se(Z,W)),Fd(S)}else Kg(S);else if(ge=U.s,ge==3||ge==0&&0<U.X||!(Z==1&&xy(S,U)||Z==2&&Vh(S)))switch(W&&0<W.length&&(U=S.h,U.i=U.i.concat(W)),ge){case 1:to(S,5);break;case 4:to(S,10);break;case 3:to(S,6);break;default:to(S,2)}}}function Bh(S,U){let W=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(W*=2),W*U}function to(S,U){if(S.j.info("Error code "+U),U==2){var W=g(S.fb,S),Z=S.Xa;const ge=!Z;Z=new Ir(Z||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||tc(Z,"https"),sc(Z),ge?ac(Z.toString(),W):$n(Z.toString(),W)}else de(2);S.G=0,S.l&&S.l.sa(U),Jg(S),Xg(S)}r.fb=function(S){S?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Jg(S){if(S.G=0,S.ka=[],S.l){const U=Rh(S.h);(U.length!=0||S.i.length!=0)&&(v(S.ka,U),v(S.ka,S.i),S.h.i.length=0,b(S.i),S.i.length=0),S.l.ra()}}function ep(S,U,W){var Z=W instanceof Ir?an(W):new Ir(W);if(Z.g!="")U&&(Z.g=U+"."+Z.g),Ho(Z,Z.s);else{var ge=l.location;Z=ge.protocol,U=U?U+"."+ge.hostname:ge.hostname,ge=+ge.port;var Ce=new Ir(null);Z&&tc(Ce,Z),U&&(Ce.g=U),ge&&Ho(Ce,ge),W&&(Ce.l=W),Z=Ce}return W=S.D,U=S.ya,W&&U&&Ys(Z,W,U),Ys(Z,"VER",S.la),cc(S,Z),Z}function tp(S,U,W){if(U&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return U=S.Ca&&!S.pa?new Rs(new $o({eb:W})):new Rs(S.pa),U.Ha(S.J),U}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function sp(){}r=sp.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function zd(){}zd.prototype.g=function(S,U){return new Pa(S,U)};function Pa(S,U){wt.call(this),this.g=new Od(U),this.l=S,this.h=U&&U.messageUrlParams||null,S=U&&U.messageHeaders||null,U&&U.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=U&&U.initMessageHeaders||null,U&&U.messageContentType&&(S?S["X-WebChannel-Content-Type"]=U.messageContentType:S={"X-WebChannel-Content-Type":U.messageContentType}),U&&U.va&&(S?S["X-WebChannel-Client-Profile"]=U.va:S={"X-WebChannel-Client-Profile":U.va}),this.g.S=S,(S=U&&U.Sb)&&!k(S)&&(this.g.m=S),this.v=U&&U.supportsCrossDomainXhr||!1,this.u=U&&U.sendRawJson||!1,(U=U&&U.httpSessionIdParam)&&!k(U)&&(this.g.D=U,S=this.h,S!==null&&U in S&&(S=this.h,U in S&&delete S[U])),this.j=new gi(this)}y(Pa,wt),Pa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pa.prototype.close=function(){Uh(this.g)},Pa.prototype.o=function(S){var U=this.g;if(typeof S=="string"){var W={};W.__data__=S,S=W}else this.u&&(W={},W.__data__=Js(S),S=W);U.i.push(new yt(U.Ya++,S)),U.G==3&&Fd(U)},Pa.prototype.N=function(){this.g.l=null,delete this.j,Uh(this.g),delete this.g,Pa.aa.N.call(this)};function rp(S){Ts.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var U=S.__sm__;if(U){e:{for(const W in U){S=W;break e}S=void 0}(this.i=S)&&(S=this.i,U=U!==null&&S in U?U[S]:void 0),this.data=U}else this.data=S}y(rp,Ts);function ap(){Us.call(this),this.status=1}y(ap,Us);function gi(S){this.g=S}y(gi,sp),gi.prototype.ua=function(){Ge(this.g,"a")},gi.prototype.ta=function(S){Ge(this.g,new rp(S))},gi.prototype.sa=function(S){Ge(this.g,new ap)},gi.prototype.ra=function(){Ge(this.g,"b")},zd.prototype.createWebChannel=zd.prototype.g,Pa.prototype.send=Pa.prototype.o,Pa.prototype.open=Pa.prototype.m,Pa.prototype.close=Pa.prototype.close,$3=function(){return new zd},H3=function(){return vs()},B3=Ps,W1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qt.NO_ERROR=0,Qt.TIMEOUT=8,Qt.HTTP_ERROR=6,Qx=Qt,Rr.COMPLETE="complete",V3=Rr,nr.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Gm=nr,Rs.prototype.listenOnce=Rs.prototype.L,Rs.prototype.getLastError=Rs.prototype.Ka,Rs.prototype.getLastErrorCode=Rs.prototype.Ba,Rs.prototype.getStatus=Rs.prototype.Z,Rs.prototype.getResponseJson=Rs.prototype.Oa,Rs.prototype.getResponseText=Rs.prototype.oa,Rs.prototype.send=Rs.prototype.ea,Rs.prototype.setWithCredentials=Rs.prototype.Ha,z3=Rs}).apply(typeof ox<"u"?ox:typeof self<"u"?self:typeof window<"u"?window:{});const bE="@firebase/firestore",yE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Na.UNAUTHENTICATED=new Na(null),Na.GOOGLE_CREDENTIALS=new Na("google-credentials-uid"),Na.FIRST_PARTY=new Na("first-party-uid"),Na.MOCK_USER=new Na("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new Sj("@firebase/firestore");function Nu(){return cd.logLevel}function ht(r,...e){if(cd.logLevel<=ls.DEBUG){const t=e.map(Uj);cd.debug(`Firestore (${dh}): ${r}`,...t)}}function Io(r,...e){if(cd.logLevel<=ls.ERROR){const t=e.map(Uj);cd.error(`Firestore (${dh}): ${r}`,...t)}}function Rl(r,...e){if(cd.logLevel<=ls.WARN){const t=e.map(Uj);cd.warn(`Firestore (${dh}): ${r}`,...t)}}function Uj(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,W3(r,s,t)}function W3(r,e,t){let s=`FIRESTORE (${dh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Io(s),new Error(s)}function xs(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||W3(e,a,s)}function Ft(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Xi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Na.UNAUTHENTICATED))}shutdown(){}}class A9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class C9{constructor(e){this.t=e,this.currentUser=Na.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xs(this.o===void 0,42304);let s=this.i;const a=c=>this.i!==s?(s=this.i,t(c)):Promise.resolve();let i=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Di,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Di)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(xs(typeof s.accessToken=="string",31837,{l:s}),new Y3(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xs(e===null||typeof e=="string",2055,{h:e}),new Na(e)}}class E9{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Na.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class T9{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new E9(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Na.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P9{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ma(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xs(this.o===void 0,3512);const s=i=>{i.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ht("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const a=i=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xs(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=R9(40);for(let i=0;i<a.length;++i)s.length<20&&a[i]<t&&(s+=e.charAt(a[i]%62))}return s}}function es(r,e){return r<e?-1:r>e?1:0}function Y1(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return es(s,a);{const i=q3(),o=I9(i.encode(wE(r,t)),i.encode(wE(e,t)));return o!==0?o:es(s,a)}}t+=s>65535?2:1}return es(r.length,e.length)}function wE(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function I9(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return es(r[t],e[t]);return es(r.length,e.length)}function $u(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="__name__";class Ai{constructor(e,t,s){t===void 0?t=0:t>e.length&&Et(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Et(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const i=Ai.compareSegments(e.get(a),t.get(a));if(i!==0)return i}return es(e.length,t.length)}static compareSegments(e,t){const s=Ai.isNumericId(e),a=Ai.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):Y1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _l.fromString(e.substring(4,e.length-2))}}class Ks extends Ai{construct(e,t,s){return new Ks(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new lt(Re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Ks(t)}static emptyPath(){return new Ks([])}}const D9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fa extends Ai{construct(e,t,s){return new fa(e,t,s)}static isValidIdentifier(e){return D9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NE}static keyField(){return new fa([NE])}static fromServerFormat(e){const t=[];let s="",a=0;const i=()=>{if(s.length===0)throw new lt(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new lt(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new lt(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(s+=l,a++):(i(),a++)}if(i(),o)throw new lt(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fa(t)}static emptyPath(){return new fa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.path=e}static fromPath(e){return new St(Ks.fromString(e))}static fromName(e){return new St(Ks.fromString(e).popFirst(5))}static empty(){return new St(Ks.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ks.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ks.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new St(new Ks(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(r,e,t){if(!t)throw new lt(Re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function M9(r,e,t,s){if(e===!0&&s===!0)throw new lt(Re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function jE(r){if(!St.isDocumentKey(r))throw new lt(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function kE(r){if(St.isDocumentKey(r))throw new lt(Re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function G3(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function jb(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Et(12329,{type:typeof r})}function _a(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new lt(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jb(r);throw new lt(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function O9(r,e){if(e<=0)throw new lt(Re.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(r,e){const t={typeString:r};return e&&(t.value=e),t}function pg(r,e){if(!G3(r))throw new lt(Re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const o=r[s];if(a&&typeof o!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${s}' field to equal '${i.value}'`;break}}if(t)throw new lt(Re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=-62135596800,_E=1e6;class or{static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*_E);return new or(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new lt(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new lt(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<SE)throw new lt(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_E}_compareTo(e){return this.seconds===e.seconds?es(this.nanoseconds,e.nanoseconds):es(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:or._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pg(e,or._jsonSchema))return new or(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-SE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}or._jsonSchemaVersion="firestore/timestamp/1.0",or._jsonSchema={type:zr("string",or._jsonSchemaVersion),seconds:zr("number"),nanoseconds:zr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new or(0,0))}static max(){return new Dt(new or(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=-1;function L9(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Dt.fromTimestamp(s===1e9?new or(t+1,0):new or(t,s));return new Il(a,St.empty(),e)}function F9(r){return new Il(r.readTime,r.key,Rf)}class Il{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Il(Dt.min(),St.empty(),Rf)}static max(){return new Il(Dt.max(),St.empty(),Rf)}}function U9(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=St.comparator(r.documentKey,e.documentKey),t!==0?t:es(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uh(r){if(r.code!==Re.FAILED_PRECONDITION||r.message!==z9)throw r;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new We((s,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,a)},this.catchCallback=i=>{this.wrapFailure(t,i).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof We?t:We.resolve(t)}catch(t){return We.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):We.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):We.reject(t)}static resolve(e){return new We((t,s)=>{t(e)})}static reject(e){return new We((t,s)=>{s(e)})}static waitFor(e){return new We((t,s)=>{let a=0,i=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++i,o&&i===a&&t()},c=>s(c))}),o=!0,i===a&&t()})}static or(e){let t=We.resolve(!1);for(const s of e)t=t.next(a=>a?We.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,i)=>{s.push(t.call(this,a,i))}),this.waitFor(s)}static mapArray(e,t){return new We((s,a)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;t(e[u]).next(h=>{o[u]=h,++l,l===i&&s(o)},h=>a(h))}})}static doWhile(e,t){return new We((s,a)=>{const i=()=>{e()===!0?t().next(()=>{i()},a):s()};i()})}}function B9(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hh(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}kb.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=-1;function xg(r){return r==null}function T0(r){return r===0&&1/r==-1/0}function H9(r){return typeof r=="number"&&Number.isInteger(r)&&!T0(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="";function $9(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=AE(e)),e=W9(r.get(t),e);return AE(e)}function W9(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const i=r.charAt(a);switch(i){case"\0":t+="";break;case K3:t+="";break;default:t+=i}}return t}function AE(r){return r+K3+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Kl(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Q3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){this.comparator=e,this.root=t||ha.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ha.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ha.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lx(this.root,e,this.comparator,!1)}getReverseIterator(){return new lx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lx(this.root,e,this.comparator,!0)}}class lx{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?s(e.key,t):1,t&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ha{constructor(e,t,s,a,i){this.key=e,this.value=t,this.color=s??ha.RED,this.left=a??ha.EMPTY,this.right=i??ha.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,i){return new ha(e??this.key,t??this.value,s??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const i=s(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,t,s),null):i===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ha.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return ha.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ha.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ha.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Et(27949);return e+(this.isRed()?0:1)}}ha.EMPTY=null,ha.RED=!0,ha.BLACK=!1;ha.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(e,t,s,a,i){return this}insert(e,t,s){return new ha(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new EE(this.data.getIterator())}getIteratorFrom(e){return new EE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Kr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,i=s.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kr(this.comparator);return t.data=e,t}}class EE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(fa.comparator)}static empty(){return new pn([])}unionWith(e){let t=new Kr(fa.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $u(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Z3("Invalid base64 string: "+i):i}}(e);return new pa(t)}static fromUint8Array(e){const t=function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i}(e);return new pa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return es(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pa.EMPTY_BYTE_STRING=new pa("");const Y9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dl(r){if(xs(!!r,39018),typeof r=="string"){let e=0;const t=Y9.exec(r);if(xs(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ar(r.seconds),nanos:Ar(r.nanos)}}function Ar(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ml(r){return typeof r=="string"?pa.fromBase64String(r):pa.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="server_timestamp",eD="__type__",tD="__previous_value__",sD="__local_write_time__";function Bj(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[eD])===null||t===void 0?void 0:t.stringValue)===J3}function Sb(r){const e=r.mapValue.fields[tD];return Bj(e)?Sb(e):e}function If(r){const e=Dl(r.mapValue.fields[sD].timestampValue);return new or(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,t,s,a,i,o,l,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const P0="(default)";class Df{constructor(e,t){this.projectId=e,this.database=t||P0}static empty(){return new Df("","")}get isDefaultDatabase(){return this.database===P0}isEqual(e){return e instanceof Df&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="__type__",X9="__max__",cx={mapValue:{}},aD="__vector__",R0="value";function Ol(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bj(r)?4:K9(r)?9007199254740991:G9(r)?10:11:Et(28295,{value:r})}function Wi(r,e){if(r===e)return!0;const t=Ol(r);if(t!==Ol(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return If(r).isEqual(If(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=Dl(a.timestampValue),l=Dl(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(a,i){return Ml(a.bytesValue).isEqual(Ml(i.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,i){return Ar(a.geoPointValue.latitude)===Ar(i.geoPointValue.latitude)&&Ar(a.geoPointValue.longitude)===Ar(i.geoPointValue.longitude)}(r,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return Ar(a.integerValue)===Ar(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=Ar(a.doubleValue),l=Ar(i.doubleValue);return o===l?T0(o)===T0(l):isNaN(o)&&isNaN(l)}return!1}(r,e);case 9:return $u(r.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return function(a,i){const o=a.mapValue.fields||{},l=i.mapValue.fields||{};if(CE(o)!==CE(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Wi(o[c],l[c])))return!1;return!0}(r,e);default:return Et(52216,{left:r})}}function Mf(r,e){return(r.values||[]).find(t=>Wi(t,e))!==void 0}function Wu(r,e){if(r===e)return 0;const t=Ol(r),s=Ol(e);if(t!==s)return es(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return es(r.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ar(i.integerValue||i.doubleValue),c=Ar(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(r,e);case 3:return TE(r.timestampValue,e.timestampValue);case 4:return TE(If(r),If(e));case 5:return Y1(r.stringValue,e.stringValue);case 6:return function(i,o){const l=Ml(i),c=Ml(o);return l.compareTo(c)}(r.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=es(l[u],c[u]);if(h!==0)return h}return es(l.length,c.length)}(r.referenceValue,e.referenceValue);case 8:return function(i,o){const l=es(Ar(i.latitude),Ar(o.latitude));return l!==0?l:es(Ar(i.longitude),Ar(o.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return PE(r.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,h;const f=i.fields||{},g=o.fields||{},x=(l=f[R0])===null||l===void 0?void 0:l.arrayValue,y=(c=g[R0])===null||c===void 0?void 0:c.arrayValue,b=es(((u=x?.values)===null||u===void 0?void 0:u.length)||0,((h=y?.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:PE(x,y)}(r.mapValue,e.mapValue);case 11:return function(i,o){if(i===cx.mapValue&&o===cx.mapValue)return 0;if(i===cx.mapValue)return 1;if(o===cx.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const g=Y1(c[f],h[f]);if(g!==0)return g;const x=Wu(l[c[f]],u[h[f]]);if(x!==0)return x}return es(c.length,h.length)}(r.mapValue,e.mapValue);default:throw Et(23264,{le:t})}}function TE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return es(r,e);const t=Dl(r),s=Dl(e),a=es(t.seconds,s.seconds);return a!==0?a:es(t.nanos,s.nanos)}function PE(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const i=Wu(t[a],s[a]);if(i)return i}return es(t.length,s.length)}function Yu(r){return q1(r)}function q1(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Dl(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ml(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return St.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",a=!0;for(const i of t.values||[])a?a=!1:s+=",",s+=q1(i);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",i=!0;for(const o of s)i?i=!1:a+=",",a+=`${o}:${q1(t.fields[o])}`;return a+"}"}(r.mapValue):Et(61005,{value:r})}function Zx(r){switch(Ol(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sb(r);return e?16+Zx(e):16;case 5:return 2*r.stringValue.length;case 6:return Ml(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,i)=>a+Zx(i),0)}(r.arrayValue);case 10:case 11:return function(s){let a=0;return Kl(s.fields,(i,o)=>{a+=i.length+Zx(o)}),a}(r.mapValue);default:throw Et(13486,{value:r})}}function RE(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function X1(r){return!!r&&"integerValue"in r}function Hj(r){return!!r&&"arrayValue"in r}function IE(r){return!!r&&"nullValue"in r}function DE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Jx(r){return!!r&&"mapValue"in r}function G9(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[rD])===null||t===void 0?void 0:t.stringValue)===aD}function lf(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Kl(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=lf(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lf(r.arrayValue.values[t]);return e}return Object.assign({},r)}function K9(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===X9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.value=e}static empty(){return new Oa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Jx(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lf(t)}setAll(e){let t=fa.emptyPath(),s={},a=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,s,a),s={},a=[],t=l.popLast()}o?s[l.lastSegment()]=lf(o):a.push(l.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,s,a)}delete(e){const t=this.field(e.popLast());Jx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Jx(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Kl(t,(a,i)=>e[a]=i);for(const a of s)delete e[a]}clone(){return new Oa(lf(this.value))}}function nD(r){const e=[];return Kl(r.fields,(t,s)=>{const a=new fa([t]);if(Jx(s)){const i=nD(s.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t,s,a,i,o,l){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new aa(e,0,Dt.min(),Dt.min(),Dt.min(),Oa.empty(),0)}static newFoundDocument(e,t,s,a){return new aa(e,1,t,Dt.min(),s,a,0)}static newNoDocument(e,t){return new aa(e,2,t,Dt.min(),Dt.min(),Oa.empty(),0)}static newUnknownDocument(e,t){return new aa(e,3,t,Dt.min(),Dt.min(),Oa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof aa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new aa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t){this.position=e,this.inclusive=t}}function ME(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const i=e[a],o=r.position[a];if(i.field.isKeyField()?s=St.comparator(St.fromName(o.referenceValue),t.key):s=Wu(o,t.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function OE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Wi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q9(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{}class Fr extends iD{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new J9(e,t,s):t==="array-contains"?new sH(e,s):t==="in"?new rH(e,s):t==="not-in"?new aH(e,s):t==="array-contains-any"?new nH(e,s):new Fr(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new eH(e,s):new tH(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wu(t,this.value)):t!==null&&Ol(this.value)===Ol(t)&&this.matchesComparison(Wu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends iD{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new ni(e,t)}matches(e){return oD(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function oD(r){return r.op==="and"}function lD(r){return Z9(r)&&oD(r)}function Z9(r){for(const e of r.filters)if(e instanceof ni)return!1;return!0}function G1(r){if(r instanceof Fr)return r.field.canonicalString()+r.op.toString()+Yu(r.value);if(lD(r))return r.filters.map(e=>G1(e)).join(",");{const e=r.filters.map(t=>G1(t)).join(",");return`${r.op}(${e})`}}function cD(r,e){return r instanceof Fr?function(s,a){return a instanceof Fr&&s.op===a.op&&s.field.isEqual(a.field)&&Wi(s.value,a.value)}(r,e):r instanceof ni?function(s,a){return a instanceof ni&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((i,o,l)=>i&&cD(o,a.filters[l]),!0):!1}(r,e):void Et(19439)}function dD(r){return r instanceof Fr?function(t){return`${t.field.canonicalString()} ${t.op} ${Yu(t.value)}`}(r):r instanceof ni?function(t){return t.op.toString()+" {"+t.getFilters().map(dD).join(" ,")+"}"}(r):"Filter"}class J9 extends Fr{constructor(e,t,s){super(e,t,s),this.key=St.fromName(s.referenceValue)}matches(e){const t=St.comparator(e.key,this.key);return this.matchesComparison(t)}}class eH extends Fr{constructor(e,t){super(e,"in",t),this.keys=uD("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tH extends Fr{constructor(e,t){super(e,"not-in",t),this.keys=uD("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uD(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>St.fromName(s.referenceValue))}class sH extends Fr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hj(t)&&Mf(t.arrayValue,this.value)}}class rH extends Fr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Mf(this.value.arrayValue,t)}}class aH extends Fr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Mf(this.value.arrayValue,t)}}class nH extends Fr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hj(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Mf(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e,t=null,s=[],a=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=i,this.startAt=o,this.endAt=l,this.Pe=null}}function LE(r,e=null,t=[],s=[],a=null,i=null,o=null){return new iH(r,e,t,s,a,i,o)}function $j(r){const e=Ft(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>G1(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),xg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Yu(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Yu(s)).join(",")),e.Pe=t}return e.Pe}function Wj(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Q9(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!cD(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!OE(r.startAt,e.startAt)&&OE(r.endAt,e.endAt)}function K1(r){return St.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t=null,s=[],a=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function oH(r,e,t,s,a,i,o,l){return new mh(r,e,t,s,a,i,o,l)}function _b(r){return new mh(r)}function FE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function hD(r){return r.collectionGroup!==null}function cf(r){const e=Ft(r);if(e.Te===null){e.Te=[];const t=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Kr(fa.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Of(i,s))}),t.has(fa.keyField().canonicalString())||e.Te.push(new Of(fa.keyField(),s))}return e.Te}function Mi(r){const e=Ft(r);return e.Ie||(e.Ie=lH(e,cf(r))),e.Ie}function lH(r,e){if(r.limitType==="F")return LE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new Of(a.field,i)});const t=r.endAt?new I0(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new I0(r.startAt.position,r.startAt.inclusive):null;return LE(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Q1(r,e){const t=r.filters.concat([e]);return new mh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function D0(r,e,t){return new mh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ab(r,e){return Wj(Mi(r),Mi(e))&&r.limitType===e.limitType}function mD(r){return`${$j(Mi(r))}|lt:${r.limitType}`}function ju(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>dD(a)).join(", ")}]`),xg(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>Yu(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>Yu(a)).join(",")),`Target(${s})`}(Mi(r))}; limitType=${r.limitType})`}function Cb(r,e){return e.isFoundDocument()&&function(s,a){const i=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):St.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(r,e)&&function(s,a){for(const i of cf(s))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(r,e)&&function(s,a){for(const i of s.filters)if(!i.matches(a))return!1;return!0}(r,e)&&function(s,a){return!(s.startAt&&!function(o,l,c){const u=ME(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,cf(s),a)||s.endAt&&!function(o,l,c){const u=ME(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,cf(s),a))}(r,e)}function cH(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function fD(r){return(e,t)=>{let s=!1;for(const a of cf(r)){const i=dH(a,e,t);if(i!==0)return i;s=s||a.field.isKeyField()}return 0}}function dH(r,e,t){const s=r.field.isKeyField()?St.comparator(e.key,t.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Wu(c,u):Et(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Et(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,i]of s)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Kl(this.inner,(t,s)=>{for(const[a,i]of s)e(a,i)})}isEmpty(){return Q3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=new gr(St.comparator);function Do(){return uH}const gD=new gr(St.comparator);function Km(...r){let e=gD;for(const t of r)e=e.insert(t.key,t);return e}function pD(r){let e=gD;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Vc(){return df()}function xD(){return df()}function df(){return new Nd(r=>r.toString(),(r,e)=>r.isEqual(e))}const hH=new gr(St.comparator),mH=new Kr(St.comparator);function ds(...r){let e=mH;for(const t of r)e=e.add(t);return e}const fH=new Kr(es);function gH(){return fH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:T0(e)?"-0":e}}function bD(r){return{integerValue:""+r}}function pH(r,e){return H9(e)?bD(e):Yj(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this._=void 0}}function xH(r,e,t){return r instanceof Lf?function(a,i){const o={fields:{[eD]:{stringValue:J3},[sD]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&Bj(i)&&(i=Sb(i)),i&&(o.fields[tD]=i),{mapValue:o}}(t,e):r instanceof qu?vD(r,e):r instanceof Xu?wD(r,e):function(a,i){const o=yD(a,i),l=UE(o)+UE(a.Ee);return X1(o)&&X1(a.Ee)?bD(l):Yj(a.serializer,l)}(r,e)}function bH(r,e,t){return r instanceof qu?vD(r,e):r instanceof Xu?wD(r,e):t}function yD(r,e){return r instanceof M0?function(s){return X1(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Lf extends Eb{}class qu extends Eb{constructor(e){super(),this.elements=e}}function vD(r,e){const t=ND(e);for(const s of r.elements)t.some(a=>Wi(a,s))||t.push(s);return{arrayValue:{values:t}}}class Xu extends Eb{constructor(e){super(),this.elements=e}}function wD(r,e){let t=ND(e);for(const s of r.elements)t=t.filter(a=>!Wi(a,s));return{arrayValue:{values:t}}}class M0 extends Eb{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function UE(r){return Ar(r.integerValue||r.doubleValue)}function ND(r){return Hj(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,t){this.field=e,this.transform=t}}function yH(r,e){return r.field.isEqual(e.field)&&function(s,a){return s instanceof qu&&a instanceof qu||s instanceof Xu&&a instanceof Xu?$u(s.elements,a.elements,Wi):s instanceof M0&&a instanceof M0?Wi(s.Ee,a.Ee):s instanceof Lf&&a instanceof Lf}(r.transform,e.transform)}class vH{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function e0(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Tb{}function jD(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new yg(r.key,Ur.none()):new bg(r.key,r.data,Ur.none());{const t=r.data,s=Oa.empty();let a=new Kr(fa.comparator);for(let i of e.fields)if(!a.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?s.delete(i):s.set(i,o),a=a.add(i)}return new Ql(r.key,s,new pn(a.toArray()),Ur.none())}}function wH(r,e,t){r instanceof bg?function(a,i,o){const l=a.value.clone(),c=VE(a.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(r,e,t):r instanceof Ql?function(a,i,o){if(!e0(a.precondition,i))return void i.convertToUnknownDocument(o.version);const l=VE(a.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(kD(a)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(r,e,t):function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function uf(r,e,t,s){return r instanceof bg?function(i,o,l,c){if(!e0(i.precondition,o))return l;const u=i.value.clone(),h=BE(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ql?function(i,o,l,c){if(!e0(i.precondition,o))return l;const u=BE(i.fieldTransforms,c,o),h=o.data;return h.setAll(kD(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(r,e,t,s):function(i,o,l){return e0(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(r,e,t)}function NH(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),i=yD(s.transform,a||null);i!=null&&(t===null&&(t=Oa.empty()),t.set(s.field,i))}return t||null}function zE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&$u(s,a,(i,o)=>yH(i,o))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class bg extends Tb{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ql extends Tb{constructor(e,t,s,a,i=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kD(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function VE(r,e,t){const s=new Map;xs(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let a=0;a<t.length;a++){const i=r[a],o=i.transform,l=e.data.field(i.field);s.set(i.field,bH(o,l,t[a]))}return s}function BE(r,e,t){const s=new Map;for(const a of r){const i=a.transform,o=t.data.field(a.field);s.set(a.field,xH(i,o,e))}return s}class yg extends Tb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SD extends Tb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&wH(i,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=uf(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=uf(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=xD();return this.mutations.forEach(a=>{const i=e.get(a.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=t.has(a.key)?null:l;const c=jD(o,l);c!==null&&s.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(Dt.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ds())}isEqual(e){return this.batchId===e.batchId&&$u(this.mutations,e.mutations,(t,s)=>zE(t,s))&&$u(this.baseMutations,e.baseMutations,(t,s)=>zE(t,s))}}class Xj{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){xs(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let a=function(){return hH}();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,s[o].version);return new Xj(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or,gs;function _D(r){switch(r){case Re.OK:return Et(64938);case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0;default:return Et(15467,{code:r})}}function AD(r){if(r===void 0)return Io("GRPC error has no .code"),Re.UNKNOWN;switch(r){case Or.OK:return Re.OK;case Or.CANCELLED:return Re.CANCELLED;case Or.UNKNOWN:return Re.UNKNOWN;case Or.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case Or.INTERNAL:return Re.INTERNAL;case Or.UNAVAILABLE:return Re.UNAVAILABLE;case Or.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case Or.NOT_FOUND:return Re.NOT_FOUND;case Or.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case Or.ABORTED:return Re.ABORTED;case Or.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case Or.DATA_LOSS:return Re.DATA_LOSS;default:return Et(39323,{code:r})}}(gs=Or||(Or={}))[gs.OK=0]="OK",gs[gs.CANCELLED=1]="CANCELLED",gs[gs.UNKNOWN=2]="UNKNOWN",gs[gs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gs[gs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gs[gs.NOT_FOUND=5]="NOT_FOUND",gs[gs.ALREADY_EXISTS=6]="ALREADY_EXISTS",gs[gs.PERMISSION_DENIED=7]="PERMISSION_DENIED",gs[gs.UNAUTHENTICATED=16]="UNAUTHENTICATED",gs[gs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gs[gs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gs[gs.ABORTED=10]="ABORTED",gs[gs.OUT_OF_RANGE=11]="OUT_OF_RANGE",gs[gs.UNIMPLEMENTED=12]="UNIMPLEMENTED",gs[gs.INTERNAL=13]="INTERNAL",gs[gs.UNAVAILABLE=14]="UNAVAILABLE",gs[gs.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H=new _l([4294967295,4294967295],0);function HE(r){const e=q3().encode(r),t=new U3;return t.update(e),new Uint8Array(t.digest())}function $E(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new _l([t,s],0),new _l([a,i],0)]}class Gj{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Qm(`Invalid padding: ${t}`);if(s<0)throw new Qm(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Qm(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Qm(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=_l.fromNumber(this.fe)}pe(e,t,s){let a=e.add(t.multiply(_l.fromNumber(s)));return a.compare(_H)===1&&(a=new _l([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=HE(e),[s,a]=$E(t);for(let i=0;i<this.hashCount;i++){const o=this.pe(s,a,i);if(!this.ye(o))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Gj(i,a,t);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const t=HE(e),[s,a]=$E(t);for(let i=0;i<this.hashCount;i++){const o=this.pe(s,a,i);this.we(o)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Qm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t,s,a,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,vg.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Pb(Dt.min(),a,new gr(es),Do(),ds())}}class vg{constructor(e,t,s,a,i){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new vg(s,t,ds(),ds(),ds())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=a}}class CD{constructor(e,t){this.targetId=e,this.De=t}}class ED{constructor(e,t,s=pa.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class WE{constructor(){this.ve=0,this.Ce=YE(),this.Fe=pa.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ds(),t=ds(),s=ds();return this.Ce.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Et(38017,{changeType:i})}}),new vg(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=YE()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,xs(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class AH{constructor(e){this.We=e,this.Ge=new Map,this.ze=Do(),this.je=dx(),this.Je=dx(),this.He=new gr(es)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Et(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((s,a)=>{this.nt(a)&&t(a)})}it(e){const t=e.targetId,s=e.De.count,a=this.st(t);if(a){const i=a.target;if(K1(i))if(s===0){const o=new St(i.path);this.Xe(t,o,aa.newNoDocument(o,Dt.min()))}else xs(s===1,20013,{expectedCount:s});else{const o=this.ot(t);if(o!==s){const l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:i=0}=t;let o,l;try{o=Ml(s).toUint8Array()}catch(c){if(c instanceof Z3)return Rl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Gj(o,a,i)}catch(c){return Rl(c instanceof Qm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let a=0;return s.forEach(i=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(t,i,null),a++)}),a}Pt(e){const t=new Map;this.Ge.forEach((i,o)=>{const l=this.st(o);if(l){if(i.current&&K1(l.target)){const c=new St(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,aa.newNoDocument(c,e))}i.Ne&&(t.set(o,i.Le()),i.ke())}});let s=ds();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const a=new Pb(e,t,this.He,this.ze,s);return this.ze=Do(),this.je=dx(),this.Je=dx(),this.He=new gr(es),a}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new WE,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Kr(es),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Kr(es),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ht("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new WE),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function dx(){return new gr(St.comparator)}function YE(){return new gr(St.comparator)}const CH={asc:"ASCENDING",desc:"DESCENDING"},EH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TH={and:"AND",or:"OR"};class PH{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Z1(r,e){return r.useProto3Json||xg(e)?e:{value:e}}function O0(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TD(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function RH(r,e){return O0(r,e.toTimestamp())}function bn(r){return xs(!!r,49232),Dt.fromTimestamp(function(t){const s=Dl(t);return new or(s.seconds,s.nanos)}(r))}function Kj(r,e){return J1(r,e).canonicalString()}function J1(r,e){const t=function(a){return new Ks(["projects",a.projectId,"databases",a.database])}(r).child("documents");return e===void 0?t:t.child(e)}function PD(r){const e=Ks.fromString(r);return xs(LD(e),10190,{key:e.toString()}),e}function L0(r,e){return Kj(r.databaseId,e.path)}function hf(r,e){const t=PD(e);if(t.get(1)!==r.databaseId.projectId)throw new lt(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new lt(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new St(ID(t))}function RD(r,e){return Kj(r.databaseId,e)}function IH(r){const e=PD(r);return e.length===4?Ks.emptyPath():ID(e)}function eN(r){return new Ks(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function ID(r){return xs(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function qE(r,e,t){return{name:L0(r,e),fields:t.value.mapValue.fields}}function DH(r,e){return"found"in e?function(s,a){xs(!!a.found,43571),a.found.name,a.found.updateTime;const i=hf(s,a.found.name),o=bn(a.found.updateTime),l=a.found.createTime?bn(a.found.createTime):Dt.min(),c=new Oa({mapValue:{fields:a.found.fields}});return aa.newFoundDocument(i,o,l,c)}(r,e):"missing"in e?function(s,a){xs(!!a.missing,3894),xs(!!a.readTime,22933);const i=hf(s,a.missing),o=bn(a.readTime);return aa.newNoDocument(i,o)}(r,e):Et(7234,{result:e})}function MH(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Et(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(xs(h===void 0||typeof h=="string",58123),pa.fromBase64String(h||"")):(xs(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),pa.fromUint8Array(h||new Uint8Array))}(r,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?Re.UNKNOWN:AD(u.code);return new lt(h,u.message||"")}(o);t=new ED(s,a,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=hf(r,s.document.name),i=bn(s.document.updateTime),o=s.document.createTime?bn(s.document.createTime):Dt.min(),l=new Oa({mapValue:{fields:s.document.fields}}),c=aa.newFoundDocument(a,i,o,l),u=s.targetIds||[],h=s.removedTargetIds||[];t=new t0(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=hf(r,s.document),i=s.readTime?bn(s.readTime):Dt.min(),o=aa.newNoDocument(a,i),l=s.removedTargetIds||[];t=new t0([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=hf(r,s.document),i=s.removedTargetIds||[];t=new t0([],i,a,null)}else{if(!("filter"in e))return Et(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:i}=s,o=new SH(a,i),l=s.targetId;t=new CD(l,o)}}return t}function DD(r,e){let t;if(e instanceof bg)t={update:qE(r,e.key,e.value)};else if(e instanceof yg)t={delete:L0(r,e.key)};else if(e instanceof Ql)t={update:qE(r,e.key,e.data),updateMask:$H(e.fieldMask)};else{if(!(e instanceof SD))return Et(16599,{Rt:e.type});t={verify:L0(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Lf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof qu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof M0)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw Et(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:RH(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Et(27497)}(r,e.precondition)),t}function OH(r,e){return r&&r.length>0?(xs(e!==void 0,14353),r.map(t=>function(a,i){let o=a.updateTime?bn(a.updateTime):bn(i);return o.isEqual(Dt.min())&&(o=bn(i)),new vH(o,a.transformResults||[])}(t,e))):[]}function LH(r,e){return{documents:[RD(r,e.path)]}}function FH(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=RD(r,a);const i=function(u){if(u.length!==0)return OD(ni.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(g){return{field:ku(g.field),direction:VH(g.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=Z1(r,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:t,parent:a}}function UH(r){let e=IH(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){xs(s===1,65062);const h=t.from[0];h.allDescendants?a=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=function(f){const g=MD(f);return g instanceof ni&&lD(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(y){return new Of(Su(y.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(g))}(t.orderBy));let l=null;t.limit&&(l=function(f){let g;return g=typeof f=="object"?f.value:f,xg(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){const g=!!f.before,x=f.values||[];return new I0(x,g)}(t.startAt));let u=null;return t.endAt&&(u=function(f){const g=!f.before,x=f.values||[];return new I0(x,g)}(t.endAt)),oH(e,a,o,i,l,"F",c,u)}function zH(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MD(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Su(t.unaryFilter.field);return Fr.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Su(t.unaryFilter.field);return Fr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Su(t.unaryFilter.field);return Fr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Su(t.unaryFilter.field);return Fr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(r):r.fieldFilter!==void 0?function(t){return Fr.create(Su(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ni.create(t.compositeFilter.filters.map(s=>MD(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(t.compositeFilter.op))}(r):Et(30097,{filter:r})}function VH(r){return CH[r]}function BH(r){return EH[r]}function HH(r){return TH[r]}function ku(r){return{fieldPath:r.canonicalString()}}function Su(r){return fa.fromServerFormat(r.fieldPath)}function OD(r){return r instanceof Fr?function(t){if(t.op==="=="){if(DE(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NAN"}};if(IE(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(DE(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NOT_NAN"}};if(IE(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ku(t.field),op:BH(t.op),value:t.value}}}(r):r instanceof ni?function(t){const s=t.getFilters().map(a=>OD(a));return s.length===1?s[0]:{compositeFilter:{op:HH(t.op),filters:s}}}(r):Et(54877,{filter:r})}function $H(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function LD(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t,s,a,i=Dt.min(),o=Dt.min(),l=pa.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new bl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e){this.gt=e}}function YH(r){const e=UH({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?D0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(){this.Dn=new XH}addToCollectionParentIndex(e,t){return this.Dn.add(t),We.resolve()}getCollectionParents(e,t){return We.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return We.resolve()}deleteFieldIndex(e,t){return We.resolve()}deleteAllFieldIndexes(e){return We.resolve()}createTargetIndexes(e,t){return We.resolve()}getDocumentsMatchingTarget(e,t){return We.resolve(null)}getIndexType(e,t){return We.resolve(0)}getFieldIndexes(e,t){return We.resolve([])}getNextCollectionGroupToUpdate(e){return We.resolve(null)}getMinOffset(e,t){return We.resolve(Il.min())}getMinOffsetFromCollectionGroup(e,t){return We.resolve(Il.min())}updateCollectionGroup(e,t,s){return We.resolve()}updateIndexEntries(e,t){return We.resolve()}}class XH{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Kr(Ks.comparator),i=!a.has(s);return this.index[t]=a.add(s),i}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Kr(Ks.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FD=41943040;class Xa{static withCacheSize(e){return new Xa(e,Xa.DEFAULT_COLLECTION_PERCENTILE,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xa.DEFAULT_COLLECTION_PERCENTILE=10,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xa.DEFAULT=new Xa(FD,Xa.DEFAULT_COLLECTION_PERCENTILE,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xa.DISABLED=new Xa(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Gu(0)}static ur(){return new Gu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="LruGarbageCollector",GH=1048576;function KE([r,e],[t,s]){const a=es(r,t);return a===0?es(e,s):a}class KH{constructor(e){this.Tr=e,this.buffer=new Kr(KE),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();KE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QH{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ht(GE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hh(t)?ht(GE,"Ignoring IndexedDB error during garbage collection: ",t):await uh(t)}await this.Rr(3e5)})}}class ZH{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return We.resolve(kb.ue);const s=new KH(t);return this.Vr.forEachTarget(e,a=>s.Er(a.sequenceNumber)).next(()=>this.Vr.gr(e,a=>s.Er(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),We.resolve(XE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XE):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,a,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(s=f,l=Date.now(),this.removeTargets(e,s,t))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(u=Date.now(),Nu()<=ls.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),We.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:f})))}}function JH(r,e){return new ZH(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(){this.changes=new Nd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,aa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?We.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&uf(s.mutation,a,pn.empty(),or.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ds()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ds()){const a=Vc();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(i=>{let o=Km();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const s=Vc();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ds()))}populateOverlays(e,t,s){const a=[];return s.forEach(i=>{t.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,s,a){let i=Do();const o=df(),l=function(){return df()}();return t.forEach((c,u)=>{const h=s.get(u.key);a.has(u.key)&&(h===void 0||h.mutation instanceof Ql)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),uf(h.mutation,u,h.mutation.getFieldMask(),or.now())):o.set(u.key,pn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var f;return l.set(u,new t$(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,t){const s=df();let a=new gr((o,l)=>o-l),i=ds();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let h=s.get(c)||pn.empty();h=l.applyToLocalView(u,h),s.set(c,h);const f=(a.get(l.batchId)||ds()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=xD();h.forEach(g=>{if(!i.has(g)){const x=jD(t.get(g),s.get(g));x!==null&&f.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return We.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(o){return St.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-i.size):We.resolve(Vc());let l=Rf,c=i;return o.next(u=>We.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?We.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ds())).next(h=>({batchId:l,changes:pD(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new St(t)).next(s=>{let a=Km();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const i=t.collectionGroup;let o=Km();return this.indexManager.getCollectionParents(e,i).next(l=>We.forEach(l,c=>{const u=function(f,g){return new mh(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,a).next(h=>{h.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,s,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,i,a))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,aa.newInvalidDocument(h)))});let l=Km();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&uf(h.mutation,u,pn.empty(),or.now()),Cb(t,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return We.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(a){return{id:a.id,version:a.version,createTime:bn(a.createTime)}}(t)),We.resolve()}getNamedQuery(e,t){return We.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(a){return{name:a.name,query:YH(a.bundledQuery),readTime:bn(a.readTime)}}(t)),We.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(){this.overlays=new gr(St.comparator),this.kr=new Map}getOverlay(e,t){return We.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Vc();return We.forEach(t,a=>this.getOverlay(e,a).next(i=>{i!==null&&s.set(a,i)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,i)=>{this.wt(e,t,i)}),We.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.kr.get(s);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(s)),We.resolve()}getOverlaysForCollection(e,t,s){const a=Vc(),i=t.length+1,o=new St(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&a.set(c.getKey(),c)}return We.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let i=new gr((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=Vc(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Vc(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=a)););return We.resolve(l)}wt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const o=this.kr.get(a.largestBatchId).delete(s.key);this.kr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new kH(t,s));let i=this.kr.get(t);i===void 0&&(i=ds(),this.kr.set(t,i)),this.kr.set(t,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(){this.sessionToken=pa.EMPTY_BYTE_STRING}getSessionToken(e){return We.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,We.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.qr=new Kr(ra.Qr),this.$r=new Kr(ra.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new ra(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Wr(new ra(e,t))}Gr(e,t){e.forEach(s=>this.removeReference(s,t))}zr(e){const t=new St(new Ks([])),s=new ra(t,e),a=new ra(t,e+1),i=[];return this.$r.forEachInRange([s,a],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new St(new Ks([])),s=new ra(t,e),a=new ra(t,e+1);let i=ds();return this.$r.forEachInRange([s,a],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new ra(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class ra{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return St.comparator(e.key,t.key)||es(e.Hr,t.Hr)}static Ur(e,t){return es(e.Hr,t.Hr)||St.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Kr(ra.Qr)}checkEmpty(e){return We.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jH(i,t,s,a);this.mutationQueue.push(o);for(const l of a)this.Yr=this.Yr.add(new ra(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return We.resolve(o)}lookupMutationBatch(e,t){return We.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),i=a<0?0:a;return We.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return We.resolve(this.mutationQueue.length===0?Vj:this.er-1)}getAllMutationBatches(e){return We.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ra(t,0),a=new ra(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([s,a],o=>{const l=this.Zr(o.Hr);i.push(l)}),We.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Kr(es);return t.forEach(a=>{const i=new ra(a,0),o=new ra(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],l=>{s=s.add(l.Hr)})}),We.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let i=s;St.isDocumentKey(i)||(i=i.child(""));const o=new ra(new St(i),0);let l=new Kr(es);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Hr)),!0)},o),We.resolve(this.ei(l))}ei(e){const t=[];return e.forEach(s=>{const a=this.Zr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){xs(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return We.forEach(t.mutations,a=>{const i=new ra(a.key,t.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Yr=s})}rr(e){}containsKey(e,t){const s=new ra(t,0),a=this.Yr.firstAfterOrEqual(s);return We.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,We.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.ni=e,this.docs=function(){return new gr(St.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),i=a?a.size:0,o=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return We.resolve(s?s.document.mutableCopy():aa.newInvalidDocument(t))}getEntries(e,t){let s=Do();return t.forEach(a=>{const i=this.docs.get(a);s=s.insert(a,i?i.document.mutableCopy():aa.newInvalidDocument(a))}),We.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let i=Do();const o=t.path,l=new St(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||U9(F9(h),s)<=0||(a.has(h.key)||Cb(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return We.resolve(i)}getAllFromCollectionGroup(e,t,s,a){Et(9500)}ri(e,t){return We.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new l$(this)}getSize(e){return We.resolve(this.size)}}class l$ extends e${constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(s)}),We.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this.persistence=e,this.ii=new Nd(t=>$j(t),Wj),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.si=0,this.oi=new Qj,this.targetCount=0,this._i=Gu.ar()}forEachTarget(e,t){return this.ii.forEach((s,a)=>t(a)),We.resolve()}getLastRemoteSnapshotVersion(e){return We.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return We.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),We.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),We.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Gu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,We.resolve()}updateTargetData(e,t){return this.hr(t),We.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,We.resolve()}removeTargets(e,t,s){let a=0;const i=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=t&&s.get(l.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),We.waitFor(i).next(()=>a)}getTargetCount(e){return We.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return We.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),We.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const a=this.persistence.referenceDelegate,i=[];return a&&t.forEach(o=>{i.push(a.markPotentiallyOrphaned(e,o))}),We.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),We.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return We.resolve(s)}containsKey(e,t){return We.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,t){this.ai={},this.overlays={},this.ui=new kb(0),this.ci=!1,this.ci=!0,this.li=new n$,this.referenceDelegate=e(this),this.hi=new c$(this),this.indexManager=new qH,this.remoteDocumentCache=function(a){return new o$(a)}(s=>this.referenceDelegate.Pi(s)),this.serializer=new WH(t),this.Ti=new r$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new a$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new i$(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){ht("MemoryPersistence","Starting transaction:",e);const a=new d$(this.ui.next());return this.referenceDelegate.Ii(),s(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ei(e,t){return We.or(Object.values(this.ai).map(s=>()=>s.containsKey(e,t)))}}class d$ extends V9{constructor(e){super(),this.currentSequenceNumber=e}}class Zj{constructor(e){this.persistence=e,this.Ai=new Qj,this.Ri=null}static Vi(e){return new Zj(e)}get mi(){if(this.Ri)return this.Ri;throw Et(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),We.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),We.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),We.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(a=>this.mi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(i=>this.mi.add(i.toString()))}).next(()=>s.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.mi,s=>{const a=St.fromPath(s);return this.fi(e,a).next(i=>{i||t.removeEntry(a,Dt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return We.or([()=>We.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class F0{constructor(e,t){this.persistence=e,this.gi=new Nd(s=>$9(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=JH(this,t)}static Vi(e,t){return new F0(e,t)}Ii(){}di(e){return We.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}yr(e){let t=0;return this.gr(e,s=>{t++}).next(()=>t)}gr(e,t){return We.forEach(this.gi,(s,a)=>this.Sr(e,s,a).next(i=>i?We.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ri(e,o=>this.Sr(e,o,t).next(l=>{l||(s++,i.removeEntry(o,Dt.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),We.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),We.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),We.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),We.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zx(e.data.value)),t}Sr(e,t,s){return We.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return We.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=a}static Es(e,t){let s=ds(),a=ds();for(const i of t.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new Jj(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Fz()?8:B9(Aa())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,a){const i={result:null};return this.ps(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,t,a,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new u$;return this.ws(e,t,o).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,t,o,l.size)})}).next(()=>i.result)}Ss(e,t,s,a){return s.documentReadCount<this.Vs?(Nu()<=ls.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",ju(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),We.resolve()):(Nu()<=ls.DEBUG&&ht("QueryEngine","Query:",ju(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.fs*a?(Nu()<=ls.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",ju(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):We.resolve())}ps(e,t){if(FE(t))return We.resolve(null);let s=Mi(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=D0(t,null,"F"),s=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=ds(...i);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.bs(t,l);return this.Ds(t,u,o,c.readTime)?this.ps(e,D0(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,s,a){return FE(t)||a.isEqual(Dt.min())?We.resolve(null):this.gs.getDocuments(e,s).next(i=>{const o=this.bs(t,i);return this.Ds(t,o,s,a)?We.resolve(null):(Nu()<=ls.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ju(t)),this.vs(e,o,t,L9(a,Rf)).next(l=>l))})}bs(e,t){let s=new Kr(fD(e));return t.forEach((a,i)=>{Cb(e,i)&&(s=s.add(i))}),s}Ds(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}ws(e,t,s){return Nu()<=ls.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",ju(t)),this.gs.getDocumentsMatchingQuery(e,t,Il.min(),s)}vs(e,t,s,a){return this.gs.getDocumentsMatchingQuery(e,s,a).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="LocalStore",m$=3e8;class f${constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new gr(es),this.Ms=new Nd(i=>$j(i),Wj),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s$(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function g$(r,e,t,s){return new f$(r,e,t,s)}async function zD(r,e){const t=Ft(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(i=>(a=i,t.Ns(e),t.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=ds();for(const u of a){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(s,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:l}))})})}function p$(r,e){const t=Ft(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),i=t.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,g=f.keys();let x=We.resolve();return g.forEach(y=>{x=x.next(()=>h.getEntry(c,y)).next(b=>{const v=u.docVersions.get(y);xs(v!==null,48541),b.version.compareTo(v)<0&&(f.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),h.addEntry(b)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(t,s,e,i).next(()=>i.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=ds();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function VD(r){const e=Ft(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function x$(r,e){const t=Ft(r),s=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const l=[];e.targetChanges.forEach((h,f)=>{const g=a.get(f);if(!g)return;l.push(t.hi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>t.hi.addMatchingKeys(i,h.addedDocuments,f)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?x=x.withResumeToken(pa.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,s)),a=a.insert(f,x),function(b,v,N){return b.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=m$?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(g,x,h)&&l.push(t.hi.updateTargetData(i,x))});let c=Do(),u=ds();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(b$(i,o,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!s.isEqual(Dt.min())){const h=t.hi.getLastRemoteSnapshotVersion(i).next(f=>t.hi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return We.waitFor(l).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(t.Fs=a,i))}function b$(r,e,t){let s=ds(),a=ds();return t.forEach(i=>s=s.add(i)),e.getEntries(r,s).next(i=>{let o=Do();return t.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(Dt.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ht(ek,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:a}})}function y$(r,e){const t=Ft(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Vj),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function v$(r,e){const t=Ft(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.hi.getTargetData(s,e).next(i=>i?(a=i,We.resolve(a)):t.hi.allocateTargetId(s).next(o=>(a=new bl(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Fs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s})}async function tN(r,e,t){const s=Ft(r),a=s.Fs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!hh(o))throw o;ht(ek,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(a.target)}function QE(r,e,t){const s=Ft(r);let a=Dt.min(),i=ds();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Ft(c),g=f.Ms.get(h);return g!==void 0?We.resolve(f.Fs.get(g)):f.hi.getTargetData(u,h)}(s,o,Mi(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Cs.getDocumentsMatchingQuery(o,e,t?a:Dt.min(),t?i:ds())).next(l=>(w$(s,cH(e),l),{documents:l,qs:i})))}function w$(r,e,t){let s=r.xs.get(e)||Dt.min();t.forEach((a,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),r.xs.set(e,s)}class ZE{constructor(){this.activeTargetIds=gH()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N${constructor(){this.Fo=new ZE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ZE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="ConnectivityMonitor";class eT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ht(JE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ht(JE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ux=null;function sN(){return ux===null?ux=function(){return 268435456+Math.round(2147483648*Math.random())}():ux++,"0x"+ux.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="RestConnection",k$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S${get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.Ko=this.databaseId.database===P0?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,i){const o=sN(),l=this.Go(e,t.toUriEncodedString());ht(kw,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,a,i);const{host:u}=new URL(l),h=ql(u);return this.jo(e,l,c,s,h).then(f=>(ht(kw,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Rl(kw,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",s),f})}Jo(e,t,s,a,i,o){return this.Wo(e,t,s,a,i)}zo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,i)=>e[i]=a),s&&s.headers.forEach((a,i)=>e[i]=a)}Go(e,t){const s=k$[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="WebChannelConnection";class A$ extends S${constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,a,i){const o=sN();return new Promise((l,c)=>{const u=new z3;u.setWithCredentials(!0),u.listenOnce(V3.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qx.NO_ERROR:const f=u.getResponseJson();ht(va,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Qx.TIMEOUT:ht(va,`RPC '${e}' ${o} timed out`),c(new lt(Re.DEADLINE_EXCEEDED,"Request time out"));break;case Qx.HTTP_ERROR:const g=u.getStatus();if(ht(va,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x?.error;if(y&&y.status&&y.message){const b=function(N){const k=N.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(k)>=0?k:Re.UNKNOWN}(y.status);c(new lt(b,y.message))}else c(new lt(Re.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new lt(Re.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ht(va,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(a);ht(va,`RPC '${e}' ${o} sending request:`,a),u.send(t,"POST",h,s,15)})}P_(e,t,s){const a=sN(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$3(),l=H3(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,s),c.encodeInitMessageHeaders=!0;const h=i.join("");ht(va,`Creating RPC '${e}' stream ${a}: ${h}`,c);const f=o.createWebChannel(h,c);this.T_(f);let g=!1,x=!1;const y=new _$({Ho:v=>{x?ht(va,`Not sending because RPC '${e}' stream ${a} is closed:`,v):(g||(ht(va,`Opening RPC '${e}' stream ${a} transport.`),f.open(),g=!0),ht(va,`RPC '${e}' stream ${a} sending:`,v),f.send(v))},Yo:()=>f.close()}),b=(v,N,k)=>{v.listen(N,A=>{try{k(A)}catch(R){setTimeout(()=>{throw R},0)}})};return b(f,Gm.EventType.OPEN,()=>{x||(ht(va,`RPC '${e}' stream ${a} transport opened.`),y.s_())}),b(f,Gm.EventType.CLOSE,()=>{x||(x=!0,ht(va,`RPC '${e}' stream ${a} transport closed`),y.__(),this.I_(f))}),b(f,Gm.EventType.ERROR,v=>{x||(x=!0,Rl(va,`RPC '${e}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),y.__(new lt(Re.UNAVAILABLE,"The operation could not be completed")))}),b(f,Gm.EventType.MESSAGE,v=>{var N;if(!x){const k=v.data[0];xs(!!k,16349);const A=k,R=A?.error||((N=A[0])===null||N===void 0?void 0:N.error);if(R){ht(va,`RPC '${e}' stream ${a} received error:`,R);const _=R.status;let I=function(D){const L=Or[D];if(L!==void 0)return AD(L)}(_),P=R.message;I===void 0&&(I=Re.INTERNAL,P="Unknown error status: "+_+" with message "+R.message),x=!0,y.__(new lt(I,P)),f.close()}else ht(va,`RPC '${e}' stream ${a} received:`,k),y.a_(k)}}),b(l,B3.STAT_EVENT,v=>{v.stat===W1.PROXY?ht(va,`RPC '${e}' stream ${a} detected buffering proxy`):v.stat===W1.NOPROXY&&ht(va,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{y.o_()},0),y}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Sw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(r){return new PH(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t,s=1e3,a=1.5,i=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=a,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-s);a>0&&ht("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="PersistentStream";class BD{constructor(e,t,s,a,i,o,l,c){this.Fi=e,this.w_=s,this.S_=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tk(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Re.RESOURCE_EXHAUSTED?(Io(t.toString()),Io("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.b_===t&&this.W_(s,a)},s=>{e(()=>{const a=new lt(Re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(a)})})}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.e_(()=>{s(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{s(()=>this.G_(a))}),this.stream.onMessage(a=>{s(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ht(tT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ht(tT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class C$ extends BD{constructor(e,t,s,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,o),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=MH(this.serializer,e),s=function(i){if(!("targetChange"in i))return Dt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Dt.min():o.readTime?bn(o.readTime):Dt.min()}(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=eN(this.serializer),t.addTarget=function(i,o){let l;const c=o.target;if(l=K1(c)?{documents:LH(i,c)}:{query:FH(i,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=TD(i,o.resumeToken);const u=Z1(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Dt.min())>0){l.readTime=O0(i,o.snapshotVersion.toTimestamp());const u=Z1(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const s=zH(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=eN(this.serializer),t.removeTarget=e,this.k_(t)}}class E$ extends BD{constructor(e,t,s,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return xs(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xs(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){xs(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=OH(e.writeResults,e.commitTime),s=bn(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=eN(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>DD(this.serializer,s))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${}class P$ extends T${constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new lt(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,J1(t,s),a,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new lt(Re.UNKNOWN,i.toString())})}Jo(e,t,s,a,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,J1(t,s),a,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new lt(Re.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class R${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Io(t),this._a=!1):ht("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="RemoteStore";class I${constructor(e,t,s,a,i){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{s.enqueueAndForget(async()=>{jd(this)&&(ht(dd,"Restarting streams for network reachability change."),await async function(c){const u=Ft(c);u.Ia.add(4),await wg(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Ib(u)}(this))})}),this.Aa=new R$(s,a)}}async function Ib(r){if(jd(r))for(const e of r.da)await e(!0)}async function wg(r){for(const e of r.da)await e(!1)}function HD(r,e){const t=Ft(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),nk(t)?ak(t):fh(t).x_()&&rk(t,e))}function sk(r,e){const t=Ft(r),s=fh(t);t.Ta.delete(e),s.x_()&&$D(t,e),t.Ta.size===0&&(s.x_()?s.B_():jd(t)&&t.Aa.set("Unknown"))}function rk(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fh(r).H_(e)}function $D(r,e){r.Ra.$e(e),fh(r).Y_(e)}function ak(r){r.Ra=new AH({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),fh(r).start(),r.Aa.aa()}function nk(r){return jd(r)&&!fh(r).M_()&&r.Ta.size>0}function jd(r){return Ft(r).Ia.size===0}function WD(r){r.Ra=void 0}async function D$(r){r.Aa.set("Online")}async function M$(r){r.Ta.forEach((e,t)=>{rk(r,e)})}async function O$(r,e){WD(r),nk(r)?(r.Aa.la(e),ak(r)):r.Aa.set("Unknown")}async function L$(r,e,t){if(r.Aa.set("Online"),e instanceof ED&&e.state===2&&e.cause)try{await async function(a,i){const o=i.cause;for(const l of i.targetIds)a.Ta.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ta.delete(l),a.Ra.removeTarget(l))}(r,e)}catch(s){ht(dd,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await U0(r,s)}else if(e instanceof t0?r.Ra.Ye(e):e instanceof CD?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Dt.min()))try{const s=await VD(r.localStore);t.compareTo(s)>=0&&await function(i,o){const l=i.Ra.Pt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ta.get(u);h&&i.Ta.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ta.get(c);if(!h)return;i.Ta.set(c,h.withResumeToken(pa.EMPTY_BYTE_STRING,h.snapshotVersion)),$D(i,c);const f=new bl(h.target,c,u,h.sequenceNumber);rk(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(r,t)}catch(s){ht(dd,"Failed to raise snapshot:",s),await U0(r,s)}}async function U0(r,e,t){if(!hh(e))throw e;r.Ia.add(1),await wg(r),r.Aa.set("Offline"),t||(t=()=>VD(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ht(dd,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Ib(r)})}function YD(r,e){return e().catch(t=>U0(r,t,e))}async function Db(r){const e=Ft(r),t=Ll(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Vj;for(;F$(e);)try{const a=await y$(e.localStore,s);if(a===null){e.Pa.length===0&&t.B_();break}s=a.batchId,U$(e,a)}catch(a){await U0(e,a)}qD(e)&&XD(e)}function F$(r){return jd(r)&&r.Pa.length<10}function U$(r,e){r.Pa.push(e);const t=Ll(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function qD(r){return jd(r)&&!Ll(r).M_()&&r.Pa.length>0}function XD(r){Ll(r).start()}async function z$(r){Ll(r).na()}async function V$(r){const e=Ll(r);for(const t of r.Pa)e.X_(t.mutations)}async function B$(r,e,t){const s=r.Pa.shift(),a=Xj.from(s,e,t);await YD(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),await Db(r)}async function H$(r,e){e&&Ll(r).Z_&&await async function(s,a){if(function(o){return _D(o)&&o!==Re.ABORTED}(a.code)){const i=s.Pa.shift();Ll(s).N_(),await YD(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,a)),await Db(s)}}(r,e),qD(r)&&XD(r)}async function sT(r,e){const t=Ft(r);t.asyncQueue.verifyOperationInProgress(),ht(dd,"RemoteStore received new credentials");const s=jd(t);t.Ia.add(3),await wg(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Ib(t)}async function $$(r,e){const t=Ft(r);e?(t.Ia.delete(2),await Ib(t)):e||(t.Ia.add(2),await wg(t),t.Aa.set("Unknown"))}function fh(r){return r.Va||(r.Va=function(t,s,a){const i=Ft(t);return i.ia(),new C$(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(r.datastore,r.asyncQueue,{Zo:D$.bind(null,r),e_:M$.bind(null,r),n_:O$.bind(null,r),J_:L$.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),nk(r)?ak(r):r.Aa.set("Unknown")):(await r.Va.stop(),WD(r))})),r.Va}function Ll(r){return r.ma||(r.ma=function(t,s,a){const i=Ft(t);return i.ia(),new E$(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:z$.bind(null,r),n_:H$.bind(null,r),ea:V$.bind(null,r),ta:B$.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await Db(r)):(await r.ma.stop(),r.Pa.length>0&&(ht(dd,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t,s,a,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=i,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,i){const o=Date.now()+s,l=new ik(e,t,o,a,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ok(r,e){if(Io("AsyncQueue",`${e}: ${r}`),hh(r))return new lt(Re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{static emptySet(e){return new Lu(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||St.comparator(t.key,s.key):(t,s)=>St.comparator(t.key,s.key),this.keyedMap=Km(),this.sortedSet=new gr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,i=s.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Lu;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this.fa=new gr(St.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Et(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ku{constructor(e,t,s,a,i,o,l,c,u){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,s,a,i){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new Ku(e,t,Lu.emptySet(t),o,s,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ab(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Y${constructor(){this.queries=aT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const a=Ft(t),i=a.queries;a.queries=aT(),i.forEach((o,l)=>{for(const c of l.wa)c.onError(s)})})(this,new lt(Re.ABORTED,"Firestore shutting down"))}}function aT(){return new Nd(r=>mD(r),Ab)}async function lk(r,e){const t=Ft(r);let s=3;const a=e.query;let i=t.queries.get(a);i?!i.Sa()&&e.ba()&&(s=2):(i=new W$,s=e.ba()?0:1);try{switch(s){case 0:i.ya=await t.onListen(a,!0);break;case 1:i.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(o){const l=ok(o,`Initialization of query '${ju(e.query)}' failed`);return void e.onError(l)}t.queries.set(a,i),i.wa.push(e),e.va(t.onlineState),i.ya&&e.Ca(i.ya)&&dk(t)}async function ck(r,e){const t=Ft(r),s=e.query;let a=3;const i=t.queries.get(s);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?a=e.ba()?0:1:!i.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function q$(r,e){const t=Ft(r);let s=!1;for(const a of e){const i=a.query,o=t.queries.get(i);if(o){for(const l of o.wa)l.Ca(a)&&(s=!0);o.ya=a}}s&&dk(t)}function X$(r,e,t){const s=Ft(r),a=s.queries.get(e);if(a)for(const i of a.wa)i.onError(t);s.queries.delete(e)}function dk(r){r.Da.forEach(e=>{e.next()})}var rN,nT;(nT=rN||(rN={})).Fa="default",nT.Cache="cache";class uk{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Ku(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ku.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==rN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.key=e}}class KD{constructor(e){this.key=e}}class G${constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ds(),this.mutatedKeys=ds(),this.Xa=fD(e),this.eu=new Lu(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new rT,a=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((h,f)=>{const g=a.get(h),x=Cb(this.query,f)?f:null,y=!!g&&this.mutatedKeys.has(g.key),b=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let v=!1;g&&x?g.data.isEqual(x.data)?y!==b&&(s.track({type:3,doc:x}),v=!0):this.iu(g,x)||(s.track({type:2,doc:x}),v=!0,(c&&this.Xa(x,c)>0||u&&this.Xa(x,u)<0)&&(l=!0)):!g&&x?(s.track({type:0,doc:x}),v=!0):g&&!x&&(s.track({type:1,doc:g}),v=!0,(c||u)&&(l=!0)),v&&(x?(o=o.add(x),i=b?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{eu:o,ru:s,Ds:l,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,f)=>function(x,y){const b=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{At:v})}};return b(x)-b(y)}(h.type,f.type)||this.Xa(h.doc,f.doc)),this.su(s),a=a!=null&&a;const l=t&&!a?this.ou():[],c=this.Za.size===0&&this.current&&!a?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new Ku(this.query,e.eu,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new rT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ds(),this.eu.forEach(s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))});const t=[];return e.forEach(s=>{this.Za.has(s)||t.push(new KD(s))}),this.Za.forEach(s=>{e.has(s)||t.push(new GD(s))}),t}uu(e){this.Ha=e.qs,this.Za=ds();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ku.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const hk="SyncEngine";class K${constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Q${constructor(e){this.key=e,this.lu=!1}}class Z${constructor(e,t,s,a,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Nd(l=>mD(l),Ab),this.Tu=new Map,this.Iu=new Set,this.du=new gr(St.comparator),this.Eu=new Map,this.Au=new Qj,this.Ru={},this.Vu=new Map,this.mu=Gu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function J$(r,e,t=!0){const s=s6(r);let a;const i=s.Pu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.cu()):a=await QD(s,e,t,!0),a}async function eW(r,e){const t=s6(r);await QD(t,e,!0,!1)}async function QD(r,e,t,s){const a=await v$(r.localStore,Mi(e)),i=a.targetId,o=r.sharedClientState.addLocalQueryTarget(i,t);let l;return s&&(l=await tW(r,e,i,o==="current",a.resumeToken)),r.isPrimaryClient&&t&&HD(r.remoteStore,a),l}async function tW(r,e,t,s,a){r.gu=(f,g,x)=>async function(b,v,N,k){let A=v.view.nu(N);A.Ds&&(A=await QE(b.localStore,v.query,!1).then(({documents:P})=>v.view.nu(P,A)));const R=k&&k.targetChanges.get(v.targetId),_=k&&k.targetMismatches.get(v.targetId)!=null,I=v.view.applyChanges(A,b.isPrimaryClient,R,_);return oT(b,v.targetId,I._u),I.snapshot}(r,f,g,x);const i=await QE(r.localStore,e,!0),o=new G$(e,i.qs),l=o.nu(i.documents),c=vg.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),u=o.applyChanges(l,r.isPrimaryClient,c);oT(r,t,u._u);const h=new K$(e,t,o);return r.Pu.set(e,h),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),u.snapshot}async function sW(r,e,t){const s=Ft(r),a=s.Pu.get(e),i=s.Tu.get(a.targetId);if(i.length>1)return s.Tu.set(a.targetId,i.filter(o=>!Ab(o,e))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await tN(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&sk(s.remoteStore,a.targetId),aN(s,a.targetId)}).catch(uh)):(aN(s,a.targetId),await tN(s.localStore,a.targetId,!0))}async function rW(r,e){const t=Ft(r),s=t.Pu.get(e),a=t.Tu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),sk(t.remoteStore,s.targetId))}async function aW(r,e,t){const s=uW(r);try{const a=await function(o,l){const c=Ft(o),u=or.now(),h=l.reduce((x,y)=>x.add(y.key),ds());let f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let y=Do(),b=ds();return c.Os.getEntries(x,h).next(v=>{y=v,y.forEach((N,k)=>{k.isValidDocument()||(b=b.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,y)).next(v=>{f=v;const N=[];for(const k of l){const A=NH(k,f.get(k.key).overlayedDocument);A!=null&&N.push(new Ql(k.key,A,nD(A.value.mapValue),Ur.exists(!0)))}return c.mutationQueue.addMutationBatch(x,u,N,l)}).next(v=>{g=v;const N=v.applyToLocalDocumentSet(f,b);return c.documentOverlayCache.saveOverlays(x,v.batchId,N)})}).then(()=>({batchId:g.batchId,changes:pD(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new gr(es)),u=u.insert(l,c),o.Ru[o.currentUser.toKey()]=u}(s,a.batchId,t),await Ng(s,a.changes),await Db(s.remoteStore)}catch(a){const i=ok(a,"Failed to persist write");t.reject(i)}}async function ZD(r,e){const t=Ft(r);try{const s=await x$(t.localStore,e);e.targetChanges.forEach((a,i)=>{const o=t.Eu.get(i);o&&(xs(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.lu=!0:a.modifiedDocuments.size>0?xs(o.lu,14607):a.removedDocuments.size>0&&(xs(o.lu,42227),o.lu=!1))}),await Ng(t,s,e)}catch(s){await uh(s)}}function iT(r,e,t){const s=Ft(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Pu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=Ft(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const g of f.wa)g.va(l)&&(u=!0)}),u&&dk(c)}(s.eventManager,e),a.length&&s.hu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function nW(r,e,t){const s=Ft(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),i=a&&a.key;if(i){let o=new gr(St.comparator);o=o.insert(i,aa.newNoDocument(i,Dt.min()));const l=ds().add(i),c=new Pb(Dt.min(),new Map,new gr(es),o,l);await ZD(s,c),s.du=s.du.remove(i),s.Eu.delete(e),mk(s)}else await tN(s.localStore,e,!1).then(()=>aN(s,e,t)).catch(uh)}async function iW(r,e){const t=Ft(r),s=e.batch.batchId;try{const a=await p$(t.localStore,e);e6(t,s,null),JD(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ng(t,a)}catch(a){await uh(a)}}async function oW(r,e,t){const s=Ft(r);try{const a=await function(o,l){const c=Ft(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(xs(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(s.localStore,e);e6(s,e,t),JD(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ng(s,a)}catch(a){await uh(a)}}function JD(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function e6(r,e,t){const s=Ft(r);let a=s.Ru[s.currentUser.toKey()];if(a){const i=a.get(e);i&&(t?i.reject(t):i.resolve(),a=a.remove(e)),s.Ru[s.currentUser.toKey()]=a}}function aN(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Tu.get(e))r.Pu.delete(s),t&&r.hu.pu(s,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(s=>{r.Au.containsKey(s)||t6(r,s)})}function t6(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(sk(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),mk(r))}function oT(r,e,t){for(const s of t)s instanceof GD?(r.Au.addReference(s.key,e),lW(r,s)):s instanceof KD?(ht(hk,"Document no longer in limbo: "+s.key),r.Au.removeReference(s.key,e),r.Au.containsKey(s.key)||t6(r,s.key)):Et(19791,{yu:s})}function lW(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Iu.has(s)||(ht(hk,"New document in limbo: "+t),r.Iu.add(s),mk(r))}function mk(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new St(Ks.fromString(e)),s=r.mu.next();r.Eu.set(s,new Q$(t)),r.du=r.du.insert(t,s),HD(r.remoteStore,new bl(Mi(_b(t.path)),s,"TargetPurposeLimboResolution",kb.ue))}}async function Ng(r,e,t){const s=Ft(r),a=[],i=[],o=[];s.Pu.isEmpty()||(s.Pu.forEach((l,c)=>{o.push(s.gu(c,e,t).then(u=>{var h;if((u||t)&&s.isPrimaryClient){const f=u?!u.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=Jj.Es(c.targetId,u);i.push(f)}}))}),await Promise.all(o),s.hu.J_(a),await async function(c,u){const h=Ft(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>We.forEach(u,g=>We.forEach(g.Is,x=>h.persistence.referenceDelegate.addReference(f,g.targetId,x)).next(()=>We.forEach(g.ds,x=>h.persistence.referenceDelegate.removeReference(f,g.targetId,x)))))}catch(f){if(!hh(f))throw f;ht(ek,"Failed to update sequence numbers: "+f)}for(const f of u){const g=f.targetId;if(!f.fromCache){const x=h.Fs.get(g),y=x.snapshotVersion,b=x.withLastLimboFreeSnapshotVersion(y);h.Fs=h.Fs.insert(g,b)}}}(s.localStore,i))}async function cW(r,e){const t=Ft(r);if(!t.currentUser.isEqual(e)){ht(hk,"User change. New user:",e.toKey());const s=await zD(t.localStore,e);t.currentUser=e,function(i,o){i.Vu.forEach(l=>{l.forEach(c=>{c.reject(new lt(Re.CANCELLED,o))})}),i.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ng(t,s.Bs)}}function dW(r,e){const t=Ft(r),s=t.Eu.get(e);if(s&&s.lu)return ds().add(s.key);{let a=ds();const i=t.Tu.get(e);if(!i)return a;for(const o of i){const l=t.Pu.get(o);a=a.unionWith(l.view.tu)}return a}}function s6(r){const e=Ft(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nW.bind(null,e),e.hu.J_=q$.bind(null,e.eventManager),e.hu.pu=X$.bind(null,e.eventManager),e}function uW(r){const e=Ft(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oW.bind(null,e),e}class z0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rb(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return g$(this.persistence,new h$,e.initialUser,this.serializer)}Du(e){return new UD(Zj.Vi,this.serializer)}bu(e){return new N$}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}z0.provider={build:()=>new z0};class hW extends z0{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){xs(this.persistence.referenceDelegate instanceof F0,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new QH(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Xa.withCacheSize(this.cacheSizeBytes):Xa.DEFAULT;return new UD(s=>F0.Vi(s,t),this.serializer)}}class nN{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>iT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=cW.bind(null,this.syncEngine),await $$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Y$}()}createDatastore(e){const t=Rb(e.databaseInfo.databaseId),s=function(i){return new A$(i)}(e.databaseInfo);return function(i,o,l,c){return new P$(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,i,o,l){return new I$(s,a,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,t=>iT(this.syncEngine,t,0),function(){return eT.C()?new eT:new j$}())}createSyncEngine(e,t){return function(a,i,o,l,c,u,h){const f=new Z$(a,i,o,l,c,u);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const i=Ft(a);ht(dd,"RemoteStore shutting down."),i.Ia.add(5),await wg(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}nN.provider={build:()=>new nN};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Io("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new lt(Re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,i){const o=Ft(a),l={documents:i.map(f=>L0(o.serializer,f))},c=await o.Jo("BatchGetDocuments",o.serializer.databaseId,Ks.emptyPath(),l,i.length),u=new Map;c.forEach(f=>{const g=DH(o.serializer,f);u.set(g.key.toString(),g)});const h=[];return i.forEach(f=>{const g=u.get(f.toString());xs(!!g,55234,{key:f}),h.push(g)}),h}(this.datastore,e);return t.forEach(s=>this.recordVersion(s)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new yg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,s)=>{const a=St.fromPath(s);this.mutations.push(new SD(a,this.precondition(a)))}),await async function(s,a){const i=Ft(s),o={writes:a.map(l=>DD(i.serializer,l))};await i.Wo("Commit",i.serializer.databaseId,Ks.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Et(50498,{Wu:e.constructor.name});t=Dt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new lt(Re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Ur.exists(!1):Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new lt(Re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e,t,s,a,i){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=i,this.Gu=s.maxAttempts,this.F_=new tk(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new mW(this.datastore),t=this.Ju(e);t&&t.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(a=>{this.Hu(a)}))}).catch(s=>{this.Hu(s)})})}Ju(e){try{const t=this.updateFunction(e);return!xg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!_D(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="FirestoreClient";class gW{constructor(e,t,s,a,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Na.UNAUTHENTICATED,this.clientId=zj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ht(Fl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ht(Fl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ok(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function _w(r,e){r.asyncQueue.verifyOperationInProgress(),ht(Fl,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async a=>{s.isEqual(a)||(await zD(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>{Rl("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{ht("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{Rl("Terminating Firestore due to IndexedDb database deletion failed",a)})}),r._offlineComponents=e}async function lT(r,e){r.asyncQueue.verifyOperationInProgress();const t=await pW(r);ht(Fl,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>sT(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,a)=>sT(e.remoteStore,a)),r._onlineComponents=e}async function pW(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ht(Fl,"Using user provided OfflineComponentProvider");try{await _w(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Re.FAILED_PRECONDITION||a.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Rl("Error using user provided cache. Falling back to memory cache: "+t),await _w(r,new z0)}}else ht(Fl,"Using default OfflineComponentProvider"),await _w(r,new hW(void 0));return r._offlineComponents}async function gk(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ht(Fl,"Using user provided OnlineComponentProvider"),await lT(r,r._uninitializedComponentsProvider._online)):(ht(Fl,"Using default OnlineComponentProvider"),await lT(r,new nN))),r._onlineComponents}function xW(r){return gk(r).then(e=>e.syncEngine)}function bW(r){return gk(r).then(e=>e.datastore)}async function V0(r){const e=await gk(r),t=e.eventManager;return t.onListen=J$.bind(null,e.syncEngine),t.onUnlisten=sW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rW.bind(null,e.syncEngine),t}function yW(r,e,t={}){const s=new Di;return r.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new fk({next:g=>{h.Ou(),o.enqueueAndForget(()=>ck(i,f));const x=g.docs.has(l);!x&&g.fromCache?u.reject(new lt(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&c&&c.source==="server"?u.reject(new lt(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new uk(_b(l.path),h,{includeMetadataChanges:!0,ka:!0});return lk(i,f)}(await V0(r),r.asyncQueue,e,t,s)),s.promise}function vW(r,e,t={}){const s=new Di;return r.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new fk({next:g=>{h.Ou(),o.enqueueAndForget(()=>ck(i,f)),g.fromCache&&c.source==="server"?u.reject(new lt(Re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new uk(l,h,{includeMetadataChanges:!0,ka:!0});return lk(i,f)}(await V0(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="firestore.googleapis.com",dT=!0;class uT{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new lt(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a6,this.ssl=dT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:dT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GH)throw new lt(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r6((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new lt(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new lt(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new lt(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mb{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new lt(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new _9;switch(s.type){case"firstParty":return new T9(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new lt(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=cT.get(t);s&&(ht("ComponentProvider","Removing Datastore"),cT.delete(t),s.terminate())}(this),Promise.resolve()}}function wW(r,e,t,s={}){var a;r=_a(r,Mb);const i=ql(e),o=r._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:r._getEmulatorOptions()}),c=`${e}:${t}`;i&&(jj(`https://${c}`),kj("Firestore",!0)),o.host!==a6&&o.host!==c&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:s});if(!To(u,l)&&(r._setSettings(u),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=Na.MOCK_USER;else{h=q4(s.mockUserToken,(a=r._app)===null||a===void 0?void 0:a.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new lt(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Na(g)}r._authCredentials=new A9(new Y3(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class mr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Al(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mr(this.firestore,e,this._key)}toJSON(){return{type:mr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(pg(t,mr._jsonSchema))return new mr(e,s||null,new St(Ks.fromString(t.referencePath)))}}mr._jsonSchemaVersion="firestore/documentReference/1.0",mr._jsonSchema={type:zr("string",mr._jsonSchemaVersion),referencePath:zr("string")};class Al extends Fo{constructor(e,t,s){super(e,t,_b(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mr(this.firestore,null,new St(e))}withConverter(e){return new Al(this.firestore,e,this._path)}}function _e(r,e,...t){if(r=js(r),X3("collection","path",e),r instanceof Mb){const s=Ks.fromString(e,...t);return kE(s),new Al(r,null,s)}{if(!(r instanceof mr||r instanceof Al))throw new lt(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ks.fromString(e,...t));return kE(s),new Al(r.firestore,null,s)}}function Ne(r,e,...t){if(r=js(r),arguments.length===1&&(e=zj.newId()),X3("doc","path",e),r instanceof Mb){const s=Ks.fromString(e,...t);return jE(s),new mr(r,null,new St(s))}{if(!(r instanceof mr||r instanceof Al))throw new lt(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ks.fromString(e,...t));return jE(s),new mr(r.firestore,r instanceof Al?r.converter:null,new St(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="AsyncQueue";class mT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tk(this,"async_queue_retry"),this.oc=()=>{const s=Sw();s&&ht(hT,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Sw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Sw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Di;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!hh(e))throw e;ht(hT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,Io("INTERNAL UNHANDLED ERROR: ",fT(s)),s}).then(s=>(this.nc=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=ik.createAndSchedule(this,e,t,s,i=>this.lc(i));return this.ec.push(a),a}ac(){this.tc&&Et(47125,{hc:fT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function fT(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const i of s)if(i in a&&typeof a[i]=="function")return!0;return!1}(r,["next","error","complete"])}class ii extends Mb{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new mT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mT(e),this._firestoreClient=void 0,await e}}}function NW(r,e){const t=typeof r=="object"?r:Aj(),s=typeof r=="string"?r:P0,a=bb(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const i=$4("firestore");i&&wW(a,...i)}return a}function gh(r){if(r._terminated)throw new lt(Re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||jW(r),r._firestoreClient}function jW(r){var e,t,s;const a=r._freezeSettings(),i=function(l,c,u,h){return new q9(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,r6(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,a);r._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),r._firestoreClient=new gW(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gn(pa.fromBase64String(e))}catch(t){throw new lt(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gn(pa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pg(e,gn._jsonSchema))return gn.fromBase64String(e.bytes)}}gn._jsonSchemaVersion="firestore/bytes/1.0",gn._jsonSchema={type:zr("string",gn._jsonSchemaVersion),bytes:zr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new lt(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new lt(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new lt(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return es(this._lat,e._lat)||es(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(pg(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:zr("string",Oi._jsonSchemaVersion),latitude:zr("number"),longitude:zr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pg(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Li(e.vectorValues);throw new lt(Re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:zr("string",Li._jsonSchemaVersion),vectorValues:zr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW=/^__.*__$/;class SW{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms):new bg(e,this.data,t,this.fieldTransforms)}}class n6{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function i6(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ec:r})}}class Ob{constructor(e,t,s,a,i,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ob(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.fc(e),a}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:s,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return B0(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(i6(this.Ec)&&kW.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class _W{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Rb(e)}Dc(e,t,s,a=!1){return new Ob({Ec:e,methodName:t,bc:s,path:fa.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bh(r){const e=r._freezeSettings(),t=Rb(r._databaseId);return new _W(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Lb(r,e,t,s,a,i={}){const o=r.Dc(i.merge||i.mergeFields?2:0,e,t,a);wk("Data must be an object, but it was:",o,s);const l=l6(s,o);let c,u;if(i.merge)c=new pn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const g=iN(e,f,t);if(!o.contains(g))throw new lt(Re.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);d6(h,g)||h.push(g)}c=new pn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new SW(new Oa(l),c,u)}class Fb extends xh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fb}}function o6(r,e,t){return new Ob({Ec:3,bc:e.settings.bc,methodName:r._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class pk extends xh{_toFieldTransform(e){return new qj(e.path,new Lf)}isEqual(e){return e instanceof pk}}class xk extends xh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=o6(this,e,!0),s=this.vc.map(i=>kd(i,t)),a=new qu(s);return new qj(e.path,a)}isEqual(e){return e instanceof xk&&To(this.vc,e.vc)}}class bk extends xh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=o6(this,e,!0),s=this.vc.map(i=>kd(i,t)),a=new Xu(s);return new qj(e.path,a)}isEqual(e){return e instanceof bk&&To(this.vc,e.vc)}}function yk(r,e,t,s){const a=r.Dc(1,e,t);wk("Data must be an object, but it was:",a,s);const i=[],o=Oa.empty();Kl(s,(c,u)=>{const h=Nk(e,c,t);u=js(u);const f=a.gc(h);if(u instanceof Fb)i.push(h);else{const g=kd(u,f);g!=null&&(i.push(h),o.set(h,g))}});const l=new pn(i);return new n6(o,l,a.fieldTransforms)}function vk(r,e,t,s,a,i){const o=r.Dc(1,e,t),l=[iN(e,s,t)],c=[a];if(i.length%2!=0)throw new lt(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(iN(e,i[g])),c.push(i[g+1]);const u=[],h=Oa.empty();for(let g=l.length-1;g>=0;--g)if(!d6(u,l[g])){const x=l[g];let y=c[g];y=js(y);const b=o.gc(x);if(y instanceof Fb)u.push(x);else{const v=kd(y,b);v!=null&&(u.push(x),h.set(x,v))}}const f=new pn(u);return new n6(h,f,o.fieldTransforms)}function AW(r,e,t,s=!1){return kd(t,r.Dc(s?4:3,e))}function kd(r,e){if(c6(r=js(r)))return wk("Unsupported field value:",e,r),l6(r,e);if(r instanceof xh)return function(s,a){if(!i6(a.Ec))throw a.wc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(s,a){const i=[];let o=0;for(const l of s){let c=kd(l,a.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(r,e)}return function(s,a){if((s=js(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return pH(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=or.fromDate(s);return{timestampValue:O0(a.serializer,i)}}if(s instanceof or){const i=new or(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:O0(a.serializer,i)}}if(s instanceof Oi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof gn)return{bytesValue:TD(a.serializer,s._byteString)};if(s instanceof mr){const i=a.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw a.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Kj(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Li)return function(o,l){return{mapValue:{fields:{[rD]:{stringValue:aD},[R0]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.wc("VectorValues must only contain numeric values.");return Yj(l.serializer,u)})}}}}}}(s,a);throw a.wc(`Unsupported field value: ${jb(s)}`)}(r,e)}function l6(r,e){const t={};return Q3(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kl(r,(s,a)=>{const i=kd(a,e.Vc(s));i!=null&&(t[s]=i)}),{mapValue:{fields:t}}}function c6(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof or||r instanceof Oi||r instanceof gn||r instanceof mr||r instanceof xh||r instanceof Li)}function wk(r,e,t){if(!c6(t)||!G3(t)){const s=jb(t);throw s==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+s)}}function iN(r,e,t){if((e=js(e))instanceof ph)return e._internalPath;if(typeof e=="string")return Nk(r,e);throw B0("Field path arguments must be of type string or ",r,!1,void 0,t)}const CW=new RegExp("[~\\*/\\[\\]]");function Nk(r,e,t){if(e.search(CW)>=0)throw B0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ph(...e.split("."))._internalPath}catch{throw B0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function B0(r,e,t,s,a){const i=s&&!s.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${a}`),c+=")"),new lt(Re.INVALID_ARGUMENT,l+r+c)}function d6(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t,s,a,i){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ub("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class EW extends H0{data(){return super.data()}}function Ub(r,e){return typeof e=="string"?Nk(r,e):e instanceof ph?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new lt(Re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jk{}class kk extends jk{}function ft(r,e,...t){let s=[];e instanceof jk&&s.push(e),s=s.concat(t),function(i){const o=i.filter(c=>c instanceof Sk).length,l=i.filter(c=>c instanceof zb).length;if(o>1||o>0&&l>0)throw new lt(Re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class zb extends kk{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new zb(e,t,s)}_apply(e){const t=this._parse(e);return m6(e._query,t),new Fo(e.firestore,e.converter,Q1(e._query,t))}_parse(e){const t=bh(e.firestore);return function(i,o,l,c,u,h,f){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new lt(Re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xT(f,h);const y=[];for(const b of f)y.push(pT(c,i,b));g={arrayValue:{values:y}}}else g=pT(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xT(f,h),g=AW(l,o,f,h==="in"||h==="not-in");return Fr.create(u,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rt(r,e,t){const s=e,a=Ub("where",r);return zb._create(a,s,t)}class Sk extends jk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sk(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:ni.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,i){let o=a;const l=i.getFlattenedFilters();for(const c of l)m6(o,c),o=Q1(o,c)}(e._query,t),new Fo(e.firestore,e.converter,Q1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _k extends kk{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _k(e,t)}_apply(e){const t=function(a,i,o){if(a.startAt!==null)throw new lt(Re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new lt(Re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Of(i,o)}(e._query,this._field,this._direction);return new Fo(e.firestore,e.converter,function(a,i){const o=a.explicitOrderBy.concat([i]);return new mh(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function jg(r,e="asc"){const t=e,s=Ub("orderBy",r);return _k._create(s,t)}class Ak extends kk{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ak(e,t,s)}_apply(e){return new Fo(e.firestore,e.converter,D0(e._query,this._limit,this._limitType))}}function h6(r){return O9("limit",r),Ak._create("limit",r,"F")}function pT(r,e,t){if(typeof(t=js(t))=="string"){if(t==="")throw new lt(Re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hD(e)&&t.indexOf("/")!==-1)throw new lt(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ks.fromString(t));if(!St.isDocumentKey(s))throw new lt(Re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return RE(r,new St(s))}if(t instanceof mr)return RE(r,t._key);throw new lt(Re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jb(t)}.`)}function xT(r,e){if(!Array.isArray(r)||r.length===0)throw new lt(Re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m6(r,e){const t=function(a,i){for(const o of a)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new lt(Re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new lt(Re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class f6{convertValue(e,t="none"){switch(Ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Kl(e,(a,i)=>{s[a]=this.convertValue(i,t)}),s}convertVectorValue(e){var t,s,a;const i=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[R0].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(o=>Ar(o.doubleValue));return new Li(i)}convertGeoPoint(e){return new Oi(Ar(e.latitude),Ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Sb(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(If(e));default:return null}}convertTimestamp(e){const t=Dl(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ks.fromString(e);xs(LD(s),9688,{name:e});const a=new Df(s.get(1),s.get(3)),i=new St(s.popFirst(5));return a.isEqual(t)||Io(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class TW extends f6{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,t)}}class Au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cl extends H0{constructor(e,t,s,a,i,o){super(e,t,s,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new s0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ub("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(Re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Cl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Cl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cl._jsonSchema={type:zr("string",Cl._jsonSchemaVersion),bundleSource:zr("string","DocumentSnapshot"),bundleName:zr("string"),bundle:zr("string")};class s0 extends Cl{data(e={}){return super.data(e)}}class Zc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Au(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new s0(this._firestore,this._userDataWriter,s.key,s,new Au(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new lt(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new s0(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Au(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new s0(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Au(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:PW(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(Re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zj.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PW(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(r){r=_a(r,mr);const e=_a(r.firestore,ii);return yW(gh(e),r._key).then(t=>g6(e,r,t))}Zc._jsonSchemaVersion="firestore/querySnapshot/1.0",Zc._jsonSchema={type:zr("string",Zc._jsonSchemaVersion),bundleSource:zr("string","QuerySnapshot"),bundleName:zr("string"),bundle:zr("string")};class Bb extends f6{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,t)}}function Ke(r){r=_a(r,Fo);const e=_a(r.firestore,ii),t=gh(e),s=new Bb(e);return u6(r._query),vW(t,r._query).then(a=>new Zc(e,s,r,a))}function Gt(r,e,t){r=_a(r,mr);const s=_a(r.firestore,ii),a=Vb(r.converter,e,t);return kg(s,[Lb(bh(s),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Ur.none())])}function Qr(r,e,t,...s){r=_a(r,mr);const a=_a(r.firestore,ii),i=bh(a);let o;return o=typeof(e=js(e))=="string"||e instanceof ph?vk(i,"updateDoc",r._key,e,t,s):yk(i,"updateDoc",r._key,e),kg(a,[o.toMutation(r._key,Ur.exists(!0))])}function na(r){return kg(_a(r.firestore,ii),[new yg(r._key,Ur.none())])}function Za(r,e){const t=_a(r.firestore,ii),s=Ne(r),a=Vb(r.converter,e);return kg(t,[Lb(bh(r.firestore),"addDoc",s._key,a,r.converter!==null,{}).toMutation(s._key,Ur.exists(!1))]).then(()=>s)}function os(r,...e){var t,s,a;r=js(r);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gT(e[o])||(i=e[o++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gT(e[o])){const f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(s=f.error)===null||s===void 0?void 0:s.bind(f),e[o+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,h;if(r instanceof mr)u=_a(r.firestore,ii),h=_b(r._key.path),c={next:f=>{e[o]&&e[o](g6(u,r,f))},error:e[o+1],complete:e[o+2]};else{const f=_a(r,Fo);u=_a(f.firestore,ii),h=f._query;const g=new Bb(u);c={next:x=>{e[o]&&e[o](new Zc(u,g,f,x))},error:e[o+1],complete:e[o+2]},u6(r._query)}return function(g,x,y,b){const v=new fk(b),N=new uk(x,v,y);return g.asyncQueue.enqueueAndForget(async()=>lk(await V0(g),N)),()=>{v.Ou(),g.asyncQueue.enqueueAndForget(async()=>ck(await V0(g),N))}}(gh(u),h,l,c)}function kg(r,e){return function(s,a){const i=new Di;return s.asyncQueue.enqueueAndForget(async()=>aW(await xW(s),a,i)),i.promise}(gh(r),e)}function g6(r,e,t){const s=t.docs.get(e._key),a=new Bb(r);return new Cl(r,a,e._key,s,new Au(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RW={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bh(e)}set(e,t,s){this._verifyNotCommitted();const a=yl(e,this._firestore),i=Vb(a.converter,t,s),o=Lb(this._dataReader,"WriteBatch.set",a._key,i,a.converter!==null,s);return this._mutations.push(o.toMutation(a._key,Ur.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const i=yl(e,this._firestore);let o;return o=typeof(t=js(t))=="string"||t instanceof ph?vk(this._dataReader,"WriteBatch.update",i._key,t,s,a):yk(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(o.toMutation(i._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yl(e,this._firestore);return this._mutations=this._mutations.concat(new yg(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new lt(Re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yl(r,e){if((r=js(r)).firestore!==e)throw new lt(Re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bh(e)}get(e){const t=yl(e,this._firestore),s=new TW(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return Et(24041);const i=a[0];if(i.isFoundDocument())return new H0(this._firestore,s,i.key,i,t.converter);if(i.isNoDocument())return new H0(this._firestore,s,t._key,null,t.converter);throw Et(18433,{doc:i})})}set(e,t,s){const a=yl(e,this._firestore),i=Vb(a.converter,t,s),o=Lb(this._dataReader,"Transaction.set",a._key,i,a.converter!==null,s);return this._transaction.set(a._key,o),this}update(e,t,s,...a){const i=yl(e,this._firestore);let o;return o=typeof(t=js(t))=="string"||t instanceof ph?vk(this._dataReader,"Transaction.update",i._key,t,s,a):yk(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,o),this}delete(e){const t=yl(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW extends DW{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yl(e,this._firestore),s=new Bb(this._firestore);return super.get(e).then(a=>new Cl(this._firestore,s,t._key,a._document,new Au(!1,!1),t.converter))}}function OW(r,e,t){r=_a(r,ii);const s=Object.assign(Object.assign({},RW),t);return function(i){if(i.maxAttempts<1)throw new lt(Re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(i,o,l){const c=new Di;return i.asyncQueue.enqueueAndForget(async()=>{const u=await bW(i);new fW(i.asyncQueue,u,l,o,c).zu()}),c.promise}(gh(r),a=>e(new MW(r,a)),s)}function Ti(){return new pk("serverTimestamp")}function LW(...r){return new xk("arrayUnion",r)}function FW(...r){return new bk("arrayRemove",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(r){return gh(r=_a(r,ii)),new IW(r,e=>kg(r,e))}(function(e,t=!0){(function(a){dh=a})(wd),nd(new Pl("firestore",(s,{instanceIdentifier:a,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new ii(new C9(s.getProvider("auth-internal")),new P9(o,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new lt(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Df(u.options.projectId,h)}(o,a),o);return i=Object.assign({useFetchStreams:t},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Pi(bE,yE,e),Pi(bE,yE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="firebasestorage.googleapis.com",x6="storageBucket",UW=120*1e3,zW=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Xi{constructor(e,t,s=0){super(Aw(e),`Firebase Storage: ${t} (${Aw(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Aw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nr||(Nr={}));function Aw(r){return"storage/"+r}function Ck(){const r="An unknown error occurred, please check the error payload for server response.";return new jr(Nr.UNKNOWN,r)}function VW(r){return new jr(Nr.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function BW(r){return new jr(Nr.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HW(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new jr(Nr.UNAUTHENTICATED,r)}function $W(){return new jr(Nr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WW(r){return new jr(Nr.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function YW(){return new jr(Nr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qW(){return new jr(Nr.CANCELED,"User canceled the upload/download.")}function XW(r){return new jr(Nr.INVALID_URL,"Invalid URL '"+r+"'.")}function GW(r){return new jr(Nr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function KW(){return new jr(Nr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+x6+"' property when initializing the app?")}function QW(){return new jr(Nr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZW(){return new jr(Nr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JW(r){return new jr(Nr.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function oN(r){return new jr(Nr.INVALID_ARGUMENT,r)}function b6(){return new jr(Nr.APP_DELETED,"The Firebase app was deleted.")}function eY(r){return new jr(Nr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mf(r,e){return new jr(Nr.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Im(r){throw new jr(Nr.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=xn.makeFromUrl(e,t)}catch{return new xn(e,"")}if(s.path==="")return s;throw GW(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function u(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${f}/${h}/b/${a}/o${g}`,"i"),y={bucket:1,path:3},b=t===p6?"(?:storage.googleapis.com|storage.cloud.google.com)":t,v="([^?#]*)",N=new RegExp(`^https?://${b}/${a}/${v}`,"i"),A=[{regex:l,indices:c,postModify:i},{regex:x,indices:y,postModify:u},{regex:N,indices:{bucket:1,path:2},postModify:u}];for(let R=0;R<A.length;R++){const _=A[R],I=_.regex.exec(e);if(I){const P=I[_.indices.bucket];let T=I[_.indices.path];T||(T=""),s=new xn(P,T),_.postModify(s);break}}if(s==null)throw XW(e);return s}}class tY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sY(r,e,t){let s=1,a=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function h(...v){u||(u=!0,e.apply(null,v))}function f(v){a=setTimeout(()=>{a=null,r(x,c())},v)}function g(){i&&clearTimeout(i)}function x(v,...N){if(u){g();return}if(v){g(),h.call(null,v,...N);return}if(c()||o){g(),h.call(null,v,...N);return}s<64&&(s*=2);let A;l===1?(l=2,A=0):A=(s+Math.random())*1e3,f(A)}let y=!1;function b(v){y||(y=!0,g(),!u&&(a!==null?(v||(l=2),clearTimeout(a),f(0)):v||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,b(!0)},t),b}function rY(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aY(r){return r!==void 0}function nY(r){return typeof r=="object"&&!Array.isArray(r)}function Ek(r){return typeof r=="string"||r instanceof String}function bT(r){return Tk()&&r instanceof Blob}function Tk(){return typeof Blob<"u"}function yT(r,e,t,s){if(s<e)throw oN(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>t)throw oN(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(r,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${r}`}function y6(r){const e=encodeURIComponent;let t="?";for(const s in r)if(r.hasOwnProperty(s)){const a=e(s)+"="+e(r[s]);t=t+a+"&"}return t=t.slice(0,-1),t}var Jc;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Jc||(Jc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iY(r,e){const t=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,i=e.indexOf(r)!==-1;return t||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(e,t,s,a,i,o,l,c,u,h,f,g=!0,x=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=g,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,b)=>{this.resolve_=y,this.reject_=b,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new hx(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Jc.NO_ERROR,c=i.getStatus();if(!l||iY(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Jc.ABORT;s(!1,new hx(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;s(!0,new hx(u,i))})},t=(s,a)=>{const i=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());aY(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=Ck();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?b6():qW();o(c)}else{const c=YW();o(c)}};this.canceled_?t(!1,new hx(!1,null,!0)):this.backoffId_=sY(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hx{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function lY(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function cY(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dY(r,e){e&&(r["X-Firebase-GMPID"]=e)}function uY(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function hY(r,e,t,s,a,i,o=!0,l=!1){const c=y6(r.urlParams),u=r.url+c,h=Object.assign({},r.headers);return dY(h,e),lY(h,t),cY(h,i),uY(h,s),new oY(u,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fY(...r){const e=mY();if(e!==void 0){const t=new e;for(let s=0;s<r.length;s++)t.append(r[s]);return t.getBlob()}else{if(Tk())return new Blob(r);throw new jr(Nr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gY(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pY(r){if(typeof atob>"u")throw JW("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cw{constructor(e,t){this.data=e,this.contentType=t||null}}function v6(r,e){switch(r){case Zn.RAW:return new Cw(w6(e));case Zn.BASE64:case Zn.BASE64URL:return new Cw(N6(r,e));case Zn.DATA_URL:return new Cw(bY(e),yY(e))}throw Ck()}function w6(r){const e=[];for(let t=0;t<r.length;t++){let s=r.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=s,o=r.charCodeAt(++t);s=65536|(i&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function xY(r){let e;try{e=decodeURIComponent(r)}catch{throw mf(Zn.DATA_URL,"Malformed data URL.")}return w6(e)}function N6(r,e){switch(r){case Zn.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw mf(r,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Zn.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw mf(r,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=pY(e)}catch(a){throw a.message.includes("polyfill")?a:mf(r,"Invalid character found")}const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}class j6{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw mf(Zn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=vY(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function bY(r){const e=new j6(r);return e.base64?N6(Zn.BASE64,e.rest):xY(e.rest)}function yY(r){return new j6(r).contentType}function vY(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t){let s=0,a="";bT(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(bT(this.data_)){const s=this.data_,a=gY(s,e,t);return a===null?null:new pl(a)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new pl(s,!0)}}static getBlob(...e){if(Tk()){const t=e.map(s=>s instanceof pl?s.data_:s);return new pl(fY.apply(null,t))}else{const t=e.map(o=>Ek(o)?v6(Zn.RAW,o).data:o.data_);let s=0;t.forEach(o=>{s+=o.byteLength});const a=new Uint8Array(s);let i=0;return t.forEach(o=>{for(let l=0;l<o.length;l++)a[i++]=o[l]}),new pl(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(r){let e;try{e=JSON.parse(r)}catch{return null}return nY(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wY(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function NY(r,e){const t=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?t:r+"/"+t}function S6(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jY(r,e){return e}class Ia{constructor(e,t,s,a){this.server=e,this.local=t||e,this.writable=!!s,this.xform=a||jY}}let mx=null;function kY(r){return!Ek(r)||r.length<2?r:S6(r)}function _6(){if(mx)return mx;const r=[];r.push(new Ia("bucket")),r.push(new Ia("generation")),r.push(new Ia("metageneration")),r.push(new Ia("name","fullPath",!0));function e(i,o){return kY(o)}const t=new Ia("name");t.xform=e,r.push(t);function s(i,o){return o!==void 0?Number(o):o}const a=new Ia("size");return a.xform=s,r.push(a),r.push(new Ia("timeCreated")),r.push(new Ia("updated")),r.push(new Ia("md5Hash",null,!0)),r.push(new Ia("cacheControl",null,!0)),r.push(new Ia("contentDisposition",null,!0)),r.push(new Ia("contentEncoding",null,!0)),r.push(new Ia("contentLanguage",null,!0)),r.push(new Ia("contentType",null,!0)),r.push(new Ia("metadata","customMetadata",!0)),mx=r,mx}function SY(r,e){function t(){const s=r.bucket,a=r.fullPath,i=new xn(s,a);return e._makeStorageReference(i)}Object.defineProperty(r,"ref",{get:t})}function _Y(r,e,t){const s={};s.type="file";const a=t.length;for(let i=0;i<a;i++){const o=t[i];s[o.local]=o.xform(s,e[o.server])}return SY(s,r),s}function A6(r,e,t){const s=k6(e);return s===null?null:_Y(r,s,t)}function AY(r,e,t,s){const a=k6(e);if(a===null||!Ek(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=r.bucket,f=r.fullPath,g="/b/"+o(h)+"/o/"+o(f),x=Pk(g,t,s),y=y6({alt:"media",token:u});return x+y})[0]}function CY(r,e){const t={},s=e.length;for(let a=0;a<s;a++){const i=e[a];i.writable&&(t[i.server]=r[i.local])}return JSON.stringify(t)}class C6{constructor(e,t,s,a){this.url=e,this.method=t,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(r){if(!r)throw Ck()}function EY(r,e){function t(s,a){const i=A6(r,a,e);return E6(i!==null),i}return t}function TY(r,e){function t(s,a){const i=A6(r,a,e);return E6(i!==null),AY(i,a,r.host,r._protocol)}return t}function T6(r){function e(t,s){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=$W():a=HW():t.getStatus()===402?a=BW(r.bucket):t.getStatus()===403?a=WW(r.path):a=s,a.status=t.getStatus(),a.serverResponse=s.serverResponse,a}return e}function PY(r){const e=T6(r);function t(s,a){let i=e(s,a);return s.getStatus()===404&&(i=VW(r.path)),i.serverResponse=a.serverResponse,i}return t}function RY(r,e,t){const s=e.fullServerUrl(),a=Pk(s,r.host,r._protocol),i="GET",o=r.maxOperationRetryTime,l=new C6(a,i,TY(r,t),o);return l.errorHandler=PY(e),l}function IY(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function DY(r,e,t){const s=Object.assign({},t);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=IY(null,e)),s}function MY(r,e,t,s,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let A="";for(let R=0;R<2;R++)A=A+Math.random().toString().slice(2);return A}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=DY(e,s,a),h=CY(u,t),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,g=`\r
--`+c+"--",x=pl.getBlob(f,s,g);if(x===null)throw QW();const y={name:u.fullPath},b=Pk(i,r.host,r._protocol),v="POST",N=r.maxUploadRetryTime,k=new C6(b,v,EY(r,t),N);return k.urlParams=y,k.headers=o,k.body=x.uploadData(),k.errorHandler=T6(e),k}class OY{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,a,i){if(this.sent_)throw Im("cannot .send() more than once");if(ql(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Im("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Im("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Im("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Im("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LY extends OY{initXhr(){this.xhr_.responseType="text"}}function P6(){return new LY}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this._service=e,t instanceof xn?this._location=t:this._location=xn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ud(e,t)}get root(){const e=new xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return S6(this._location.path)}get storage(){return this._service}get parent(){const e=wY(this._location.path);if(e===null)return null;const t=new xn(this._location.bucket,e);return new ud(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw eY(e)}}function FY(r,e,t){r._throwIfRoot("uploadBytes");const s=MY(r.storage,r._location,_6(),new pl(e,!0),t);return r.storage.makeRequestWithTokens(s,P6).then(a=>({metadata:a,ref:r}))}function UY(r,e,t=Zn.RAW,s){r._throwIfRoot("uploadString");const a=v6(t,e),i=Object.assign({},s);return i.contentType==null&&a.contentType!=null&&(i.contentType=a.contentType),FY(r,a.data,i)}function zY(r){r._throwIfRoot("getDownloadURL");const e=RY(r.storage,r._location,_6());return r.storage.makeRequestWithTokens(e,P6).then(t=>{if(t===null)throw ZW();return t})}function VY(r,e){const t=NY(r._location.path,e),s=new xn(r._location.bucket,t);return new ud(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BY(r){return/^[A-Za-z]+:\/\//.test(r)}function HY(r,e){return new ud(r,e)}function R6(r,e){if(r instanceof Rk){const t=r;if(t._bucket==null)throw KW();const s=new ud(t,t._bucket);return e!=null?R6(s,e):s}else return e!==void 0?VY(r,e):r}function $Y(r,e){if(e&&BY(e)){if(r instanceof Rk)return HY(r,e);throw oN("To use ref(service, url), the first argument must be a Storage instance.")}else return R6(r,e)}function vT(r,e){const t=e?.[x6];return t==null?null:xn.makeFromBucketSpec(t,r)}function WY(r,e,t,s={}){r.host=`${e}:${t}`;const a=ql(e);a&&(jj(`https://${r.host}/b`),kj("Storage",!0)),r._isUsingEmulator=!0,r._protocol=a?"https":"http";const{mockUserToken:i}=s;i&&(r._overrideAuthToken=typeof i=="string"?i:q4(i,r.app.options.projectId))}class Rk{constructor(e,t,s,a,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=p6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UW,this._maxUploadRetryTime=zW,this._requests=new Set,a!=null?this._bucket=xn.makeFromBucketSpec(a,this._host):this._bucket=vT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xn.makeFromBucketSpec(this._url,e):this._bucket=vT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ma(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ud(this,e)}_makeRequest(e,t,s,a,i=!0){if(this._deleted)return new tY(b6());{const o=hY(e,this._appId,s,a,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,a).getPromise()}}const wT="@firebase/storage",NT="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="storage";function jT(r,e,t,s){return r=js(r),UY(r,e,t,s)}function kT(r){return r=js(r),zY(r)}function ST(r,e){return r=js(r),$Y(r,e)}function YY(r=Aj(),e){r=js(r);const s=bb(r,I6).getImmediate({identifier:e}),a=$4("storage");return a&&qY(s,...a),s}function qY(r,e,t,s={}){WY(r,e,t,s)}function XY(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new Rk(t,s,a,e,wd)}function GY(){nd(new Pl(I6,XY,"PUBLIC").setMultipleInstances(!0)),Pi(wT,NT,""),Pi(wT,NT,"esm2017")}GY();let ve,J,lN;try{const r=K4({apiKey:"AIzaSyCRWR2Z2xlmcGBSVHEbbkIm9nL_qpTGSno",authDomain:"foremade-backend.firebaseapp.com",projectId:"foremade-backend",storageBucket:"foremade-backend.firebasestorage.app",messagingSenderId:"957543574407",appId:"1:957543574407:web:315572254cc0ba6b80c122"});ve=ch(r),J=NW(r),lN=YY(r),A3(ve,T3).then(()=>console.log("User auth persistence set to local")).catch(e=>console.error("Error setting user auth persistence:",e)),console.log("Firebase initialized successfully for users")}catch(r){throw console.error("Firebase initialization error for users:",r),new Error("Failed to initialize Firebase for users. Check your configuration.")}const D6=E.createContext(),hd=()=>{const r=E.useContext(D6);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},KY=({children:r})=>{const[e,t]=E.useState(null),[s,a]=E.useState(null),[i,o]=E.useState(!0);E.useEffect(()=>{console.log("Setting up auth provider");const c=ai(ve,async u=>{if(console.log("Auth state changed in context:",u?.uid),t(u),o(!1),u)try{const h=await it(Ne(J,"users",u.uid));h.exists()?a(h.data()):a(null)}catch(h){console.error("Error fetching user profile:",h),a(null)}else a(null)});return()=>{console.log("Cleaning up auth provider"),c()}},[]);const l={user:e,userProfile:s,loading:i,isAuthenticated:!!e};return n.jsx(D6.Provider,{value:l,children:!i&&r})};function M6(r,e){return function(){return r.apply(e,arguments)}}const{toString:QY}=Object.prototype,{getPrototypeOf:Ik}=Object,{iterator:Hb,toStringTag:O6}=Symbol,$b=(r=>e=>{const t=QY.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ci=r=>(r=r.toLowerCase(),e=>$b(e)===r),Wb=r=>e=>typeof e===r,{isArray:yh}=Array,Ff=Wb("undefined");function Sg(r){return r!==null&&!Ff(r)&&r.constructor!==null&&!Ff(r.constructor)&&Ja(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const L6=ci("ArrayBuffer");function ZY(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&L6(r.buffer),e}const JY=Wb("string"),Ja=Wb("function"),F6=Wb("number"),_g=r=>r!==null&&typeof r=="object",eq=r=>r===!0||r===!1,r0=r=>{if($b(r)!=="object")return!1;const e=Ik(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(O6 in r)&&!(Hb in r)},tq=r=>{if(!_g(r)||Sg(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},sq=ci("Date"),rq=ci("File"),aq=ci("Blob"),nq=ci("FileList"),iq=r=>_g(r)&&Ja(r.pipe),oq=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Ja(r.append)&&((e=$b(r))==="formdata"||e==="object"&&Ja(r.toString)&&r.toString()==="[object FormData]"))},lq=ci("URLSearchParams"),[cq,dq,uq,hq]=["ReadableStream","Request","Response","Headers"].map(ci),mq=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ag(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let s,a;if(typeof r!="object"&&(r=[r]),yh(r))for(s=0,a=r.length;s<a;s++)e.call(null,r[s],s,r);else{if(Sg(r))return;const i=t?Object.getOwnPropertyNames(r):Object.keys(r),o=i.length;let l;for(s=0;s<o;s++)l=i[s],e.call(null,r[l],l,r)}}function U6(r,e){if(Sg(r))return null;e=e.toLowerCase();const t=Object.keys(r);let s=t.length,a;for(;s-- >0;)if(a=t[s],e===a.toLowerCase())return a;return null}const Bc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,z6=r=>!Ff(r)&&r!==Bc;function cN(){const{caseless:r}=z6(this)&&this||{},e={},t=(s,a)=>{const i=r&&U6(e,a)||a;r0(e[i])&&r0(s)?e[i]=cN(e[i],s):r0(s)?e[i]=cN({},s):yh(s)?e[i]=s.slice():e[i]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Ag(arguments[s],t);return e}const fq=(r,e,t,{allOwnKeys:s}={})=>(Ag(e,(a,i)=>{t&&Ja(a)?r[i]=M6(a,t):r[i]=a},{allOwnKeys:s}),r),gq=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),pq=(r,e,t,s)=>{r.prototype=Object.create(e.prototype,s),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},xq=(r,e,t,s)=>{let a,i,o;const l={};if(e=e||{},r==null)return e;do{for(a=Object.getOwnPropertyNames(r),i=a.length;i-- >0;)o=a[i],(!s||s(o,r,e))&&!l[o]&&(e[o]=r[o],l[o]=!0);r=t!==!1&&Ik(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},bq=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const s=r.indexOf(e,t);return s!==-1&&s===t},yq=r=>{if(!r)return null;if(yh(r))return r;let e=r.length;if(!F6(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},vq=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Ik(Uint8Array)),wq=(r,e)=>{const s=(r&&r[Hb]).call(r);let a;for(;(a=s.next())&&!a.done;){const i=a.value;e.call(r,i[0],i[1])}},Nq=(r,e)=>{let t;const s=[];for(;(t=r.exec(e))!==null;)s.push(t);return s},jq=ci("HTMLFormElement"),kq=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,a){return s.toUpperCase()+a}),_T=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),Sq=ci("RegExp"),V6=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),s={};Ag(t,(a,i)=>{let o;(o=e(a,i,r))!==!1&&(s[i]=o||a)}),Object.defineProperties(r,s)},_q=r=>{V6(r,(e,t)=>{if(Ja(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=r[t];if(Ja(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Aq=(r,e)=>{const t={},s=a=>{a.forEach(i=>{t[i]=!0})};return yh(r)?s(r):s(String(r).split(e)),t},Cq=()=>{},Eq=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function Tq(r){return!!(r&&Ja(r.append)&&r[O6]==="FormData"&&r[Hb])}const Pq=r=>{const e=new Array(10),t=(s,a)=>{if(_g(s)){if(e.indexOf(s)>=0)return;if(Sg(s))return s;if(!("toJSON"in s)){e[a]=s;const i=yh(s)?[]:{};return Ag(s,(o,l)=>{const c=t(o,a+1);!Ff(c)&&(i[l]=c)}),e[a]=void 0,i}}return s};return t(r,0)},Rq=ci("AsyncFunction"),Iq=r=>r&&(_g(r)||Ja(r))&&Ja(r.then)&&Ja(r.catch),B6=((r,e)=>r?setImmediate:e?((t,s)=>(Bc.addEventListener("message",({source:a,data:i})=>{a===Bc&&i===t&&s.length&&s.shift()()},!1),a=>{s.push(a),Bc.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ja(Bc.postMessage)),Dq=typeof queueMicrotask<"u"?queueMicrotask.bind(Bc):typeof process<"u"&&process.nextTick||B6,Mq=r=>r!=null&&Ja(r[Hb]),Te={isArray:yh,isArrayBuffer:L6,isBuffer:Sg,isFormData:oq,isArrayBufferView:ZY,isString:JY,isNumber:F6,isBoolean:eq,isObject:_g,isPlainObject:r0,isEmptyObject:tq,isReadableStream:cq,isRequest:dq,isResponse:uq,isHeaders:hq,isUndefined:Ff,isDate:sq,isFile:rq,isBlob:aq,isRegExp:Sq,isFunction:Ja,isStream:iq,isURLSearchParams:lq,isTypedArray:vq,isFileList:nq,forEach:Ag,merge:cN,extend:fq,trim:mq,stripBOM:gq,inherits:pq,toFlatObject:xq,kindOf:$b,kindOfTest:ci,endsWith:bq,toArray:yq,forEachEntry:wq,matchAll:Nq,isHTMLForm:jq,hasOwnProperty:_T,hasOwnProp:_T,reduceDescriptors:V6,freezeMethods:_q,toObjectSet:Aq,toCamelCase:kq,noop:Cq,toFiniteNumber:Eq,findKey:U6,global:Bc,isContextDefined:z6,isSpecCompliantForm:Tq,toJSONObject:Pq,isAsyncFn:Rq,isThenable:Iq,setImmediate:B6,asap:Dq,isIterable:Mq};function $t(r,e,t,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}Te.inherits($t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const H6=$t.prototype,$6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{$6[r]={value:r}});Object.defineProperties($t,$6);Object.defineProperty(H6,"isAxiosError",{value:!0});$t.from=(r,e,t,s,a,i)=>{const o=Object.create(H6);return Te.toFlatObject(r,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),$t.call(o,r.message,e,t,s,a),o.cause=r,o.name=r.name,i&&Object.assign(o,i),o};const Oq=null;function dN(r){return Te.isPlainObject(r)||Te.isArray(r)}function W6(r){return Te.endsWith(r,"[]")?r.slice(0,-2):r}function AT(r,e,t){return r?r.concat(e).map(function(a,i){return a=W6(a),!t&&i?"["+a+"]":a}).join(t?".":""):e}function Lq(r){return Te.isArray(r)&&!r.some(dN)}const Fq=Te.toFlatObject(Te,{},null,function(e){return/^is[A-Z]/.test(e)});function Yb(r,e,t){if(!Te.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=Te.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,v){return!Te.isUndefined(v[b])});const s=t.metaTokens,a=t.visitor||h,i=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(e);if(!Te.isFunction(a))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(Te.isDate(y))return y.toISOString();if(Te.isBoolean(y))return y.toString();if(!c&&Te.isBlob(y))throw new $t("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(y)||Te.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,b,v){let N=y;if(y&&!v&&typeof y=="object"){if(Te.endsWith(b,"{}"))b=s?b:b.slice(0,-2),y=JSON.stringify(y);else if(Te.isArray(y)&&Lq(y)||(Te.isFileList(y)||Te.endsWith(b,"[]"))&&(N=Te.toArray(y)))return b=W6(b),N.forEach(function(A,R){!(Te.isUndefined(A)||A===null)&&e.append(o===!0?AT([b],R,i):o===null?b:b+"[]",u(A))}),!1}return dN(y)?!0:(e.append(AT(v,b,i),u(y)),!1)}const f=[],g=Object.assign(Fq,{defaultVisitor:h,convertValue:u,isVisitable:dN});function x(y,b){if(!Te.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(y),Te.forEach(y,function(N,k){(!(Te.isUndefined(N)||N===null)&&a.call(e,N,Te.isString(k)?k.trim():k,b,g))===!0&&x(N,b?b.concat(k):[k])}),f.pop()}}if(!Te.isObject(r))throw new TypeError("data must be an object");return x(r),e}function CT(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Dk(r,e){this._pairs=[],r&&Yb(r,this,e)}const Y6=Dk.prototype;Y6.append=function(e,t){this._pairs.push([e,t])};Y6.toString=function(e){const t=e?function(s){return e.call(this,s,CT)}:CT;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function Uq(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function q6(r,e,t){if(!e)return r;const s=t&&t.encode||Uq;Te.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let i;if(a?i=a(e,t):i=Te.isURLSearchParams(e)?e.toString():new Dk(e,t).toString(s),i){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+i}return r}class ET{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Te.forEach(this.handlers,function(s){s!==null&&e(s)})}}const X6={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zq=typeof URLSearchParams<"u"?URLSearchParams:Dk,Vq=typeof FormData<"u"?FormData:null,Bq=typeof Blob<"u"?Blob:null,Hq={isBrowser:!0,classes:{URLSearchParams:zq,FormData:Vq,Blob:Bq},protocols:["http","https","file","blob","url","data"]},Mk=typeof window<"u"&&typeof document<"u",uN=typeof navigator=="object"&&navigator||void 0,$q=Mk&&(!uN||["ReactNative","NativeScript","NS"].indexOf(uN.product)<0),Wq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Yq=Mk&&window.location.href||"http://localhost",qq=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mk,hasStandardBrowserEnv:$q,hasStandardBrowserWebWorkerEnv:Wq,navigator:uN,origin:Yq},Symbol.toStringTag,{value:"Module"})),ja={...qq,...Hq};function Xq(r,e){return Yb(r,new ja.classes.URLSearchParams,{visitor:function(t,s,a,i){return ja.isNode&&Te.isBuffer(t)?(this.append(s,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Gq(r){return Te.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Kq(r){const e={},t=Object.keys(r);let s;const a=t.length;let i;for(s=0;s<a;s++)i=t[s],e[i]=r[i];return e}function G6(r){function e(t,s,a,i){let o=t[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=t.length;return o=!o&&Te.isArray(a)?a.length:o,c?(Te.hasOwnProp(a,o)?a[o]=[a[o],s]:a[o]=s,!l):((!a[o]||!Te.isObject(a[o]))&&(a[o]=[]),e(t,s,a[o],i)&&Te.isArray(a[o])&&(a[o]=Kq(a[o])),!l)}if(Te.isFormData(r)&&Te.isFunction(r.entries)){const t={};return Te.forEachEntry(r,(s,a)=>{e(Gq(s),a,t,0)}),t}return null}function Qq(r,e,t){if(Te.isString(r))try{return(e||JSON.parse)(r),Te.trim(r)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(r)}const Cg={transitional:X6,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",a=s.indexOf("application/json")>-1,i=Te.isObject(e);if(i&&Te.isHTMLForm(e)&&(e=new FormData(e)),Te.isFormData(e))return a?JSON.stringify(G6(e)):e;if(Te.isArrayBuffer(e)||Te.isBuffer(e)||Te.isStream(e)||Te.isFile(e)||Te.isBlob(e)||Te.isReadableStream(e))return e;if(Te.isArrayBufferView(e))return e.buffer;if(Te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Xq(e,this.formSerializer).toString();if((l=Te.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Yb(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||a?(t.setContentType("application/json",!1),Qq(e)):e}],transformResponse:[function(e){const t=this.transitional||Cg.transitional,s=t&&t.forcedJSONParsing,a=this.responseType==="json";if(Te.isResponse(e)||Te.isReadableStream(e))return e;if(e&&Te.isString(e)&&(s&&!this.responseType||a)){const o=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?$t.from(l,$t.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ja.classes.FormData,Blob:ja.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],r=>{Cg.headers[r]={}});const Zq=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jq=r=>{const e={};let t,s,a;return r&&r.split(`
`).forEach(function(o){a=o.indexOf(":"),t=o.substring(0,a).trim().toLowerCase(),s=o.substring(a+1).trim(),!(!t||e[t]&&Zq[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},TT=Symbol("internals");function Dm(r){return r&&String(r).trim().toLowerCase()}function a0(r){return r===!1||r==null?r:Te.isArray(r)?r.map(a0):String(r)}function eX(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(r);)e[s[1]]=s[2];return e}const tX=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Ew(r,e,t,s,a){if(Te.isFunction(s))return s.call(this,e,t);if(a&&(e=t),!!Te.isString(e)){if(Te.isString(s))return e.indexOf(s)!==-1;if(Te.isRegExp(s))return s.test(e)}}function sX(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function rX(r,e){const t=Te.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(r,s+t,{value:function(a,i,o){return this[s].call(this,e,a,i,o)},configurable:!0})})}let en=class{constructor(e){e&&this.set(e)}set(e,t,s){const a=this;function i(l,c,u){const h=Dm(c);if(!h)throw new Error("header name must be a non-empty string");const f=Te.findKey(a,h);(!f||a[f]===void 0||u===!0||u===void 0&&a[f]!==!1)&&(a[f||c]=a0(l))}const o=(l,c)=>Te.forEach(l,(u,h)=>i(u,h,c));if(Te.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Te.isString(e)&&(e=e.trim())&&!tX(e))o(Jq(e),t);else if(Te.isObject(e)&&Te.isIterable(e)){let l={},c,u;for(const h of e){if(!Te.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?Te.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,t)}else e!=null&&i(t,e,s);return this}get(e,t){if(e=Dm(e),e){const s=Te.findKey(this,e);if(s){const a=this[s];if(!t)return a;if(t===!0)return eX(a);if(Te.isFunction(t))return t.call(this,a,s);if(Te.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Dm(e),e){const s=Te.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||Ew(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let a=!1;function i(o){if(o=Dm(o),o){const l=Te.findKey(s,o);l&&(!t||Ew(s,s[l],l,t))&&(delete s[l],a=!0)}}return Te.isArray(e)?e.forEach(i):i(e),a}clear(e){const t=Object.keys(this);let s=t.length,a=!1;for(;s--;){const i=t[s];(!e||Ew(this,this[i],i,e,!0))&&(delete this[i],a=!0)}return a}normalize(e){const t=this,s={};return Te.forEach(this,(a,i)=>{const o=Te.findKey(s,i);if(o){t[o]=a0(a),delete t[i];return}const l=e?sX(i):String(i).trim();l!==i&&delete t[i],t[l]=a0(a),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Te.forEach(this,(s,a)=>{s!=null&&s!==!1&&(t[a]=e&&Te.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(a=>s.set(a)),s}static accessor(e){const s=(this[TT]=this[TT]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=Dm(o);s[l]||(rX(a,o),s[l]=!0)}return Te.isArray(e)?e.forEach(i):i(e),this}};en.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(en.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(s){this[t]=s}}});Te.freezeMethods(en);function Tw(r,e){const t=this||Cg,s=e||t,a=en.from(s.headers);let i=s.data;return Te.forEach(r,function(l){i=l.call(t,i,a.normalize(),e?e.status:void 0)}),a.normalize(),i}function K6(r){return!!(r&&r.__CANCEL__)}function vh(r,e,t){$t.call(this,r??"canceled",$t.ERR_CANCELED,e,t),this.name="CanceledError"}Te.inherits(vh,$t,{__CANCEL__:!0});function Q6(r,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?r(t):e(new $t("Request failed with status code "+t.status,[$t.ERR_BAD_REQUEST,$t.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function aX(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function nX(r,e){r=r||10;const t=new Array(r),s=new Array(r);let a=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=s[i];o||(o=u),t[a]=c,s[a]=u;let f=i,g=0;for(;f!==a;)g+=t[f++],f=f%r;if(a=(a+1)%r,a===i&&(i=(i+1)%r),u-o<e)return;const x=h&&u-h;return x?Math.round(g*1e3/x):void 0}}function iX(r,e){let t=0,s=1e3/e,a,i;const o=(u,h=Date.now())=>{t=h,a=null,i&&(clearTimeout(i),i=null),r(...u)};return[(...u)=>{const h=Date.now(),f=h-t;f>=s?o(u,h):(a=u,i||(i=setTimeout(()=>{i=null,o(a)},s-f)))},()=>a&&o(a)]}const $0=(r,e,t=3)=>{let s=0;const a=nX(50,250);return iX(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=a(c),h=o<=l;s=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};r(f)},t)},PT=(r,e)=>{const t=r!=null;return[s=>e[0]({lengthComputable:t,total:r,loaded:s}),e[1]]},RT=r=>(...e)=>Te.asap(()=>r(...e)),oX=ja.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,ja.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(ja.origin),ja.navigator&&/(msie|trident)/i.test(ja.navigator.userAgent)):()=>!0,lX=ja.hasStandardBrowserEnv?{write(r,e,t,s,a,i){const o=[r+"="+encodeURIComponent(e)];Te.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Te.isString(s)&&o.push("path="+s),Te.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function cX(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function dX(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function Z6(r,e,t){let s=!cX(e);return r&&(s||t==!1)?dX(r,e):e}const IT=r=>r instanceof en?{...r}:r;function md(r,e){e=e||{};const t={};function s(u,h,f,g){return Te.isPlainObject(u)&&Te.isPlainObject(h)?Te.merge.call({caseless:g},u,h):Te.isPlainObject(h)?Te.merge({},h):Te.isArray(h)?h.slice():h}function a(u,h,f,g){if(Te.isUndefined(h)){if(!Te.isUndefined(u))return s(void 0,u,f,g)}else return s(u,h,f,g)}function i(u,h){if(!Te.isUndefined(h))return s(void 0,h)}function o(u,h){if(Te.isUndefined(h)){if(!Te.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function l(u,h,f){if(f in e)return s(u,h);if(f in r)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,f)=>a(IT(u),IT(h),f,!0)};return Te.forEach(Object.keys({...r,...e}),function(h){const f=c[h]||a,g=f(r[h],e[h],h);Te.isUndefined(g)&&f!==l||(t[h]=g)}),t}const J6=r=>{const e=md({},r);let{data:t,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=e;e.headers=o=en.from(o),e.url=q6(Z6(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Te.isFormData(t)){if(ja.hasStandardBrowserEnv||ja.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...h]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(ja.hasStandardBrowserEnv&&(s&&Te.isFunction(s)&&(s=s(e)),s||s!==!1&&oX(e.url))){const u=a&&i&&lX.read(i);u&&o.set(a,u)}return e},uX=typeof XMLHttpRequest<"u",hX=uX&&function(r){return new Promise(function(t,s){const a=J6(r);let i=a.data;const o=en.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,h,f,g,x,y;function b(){x&&x(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let v=new XMLHttpRequest;v.open(a.method.toUpperCase(),a.url,!0),v.timeout=a.timeout;function N(){if(!v)return;const A=en.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),_={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:A,config:r,request:v};Q6(function(P){t(P),b()},function(P){s(P),b()},_),v=null}"onloadend"in v?v.onloadend=N:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(N)},v.onabort=function(){v&&(s(new $t("Request aborted",$t.ECONNABORTED,r,v)),v=null)},v.onerror=function(){s(new $t("Network Error",$t.ERR_NETWORK,r,v)),v=null},v.ontimeout=function(){let R=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const _=a.transitional||X6;a.timeoutErrorMessage&&(R=a.timeoutErrorMessage),s(new $t(R,_.clarifyTimeoutError?$t.ETIMEDOUT:$t.ECONNABORTED,r,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&Te.forEach(o.toJSON(),function(R,_){v.setRequestHeader(_,R)}),Te.isUndefined(a.withCredentials)||(v.withCredentials=!!a.withCredentials),l&&l!=="json"&&(v.responseType=a.responseType),u&&([g,y]=$0(u,!0),v.addEventListener("progress",g)),c&&v.upload&&([f,x]=$0(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(h=A=>{v&&(s(!A||A.type?new vh(null,r,v):A),v.abort(),v=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const k=aX(a.url);if(k&&ja.protocols.indexOf(k)===-1){s(new $t("Unsupported protocol "+k+":",$t.ERR_BAD_REQUEST,r));return}v.send(i||null)})},mX=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let s=new AbortController,a;const i=function(u){if(!a){a=!0,l();const h=u instanceof Error?u:this.reason;s.abort(h instanceof $t?h:new vh(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new $t(`timeout ${e} of ms exceeded`,$t.ETIMEDOUT))},e);const l=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),r=null)};r.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>Te.asap(l),c}},fX=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let s=0,a;for(;s<t;)a=s+e,yield r.slice(s,a),s=a},gX=async function*(r,e){for await(const t of pX(r))yield*fX(t,e)},pX=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},DT=(r,e,t,s)=>{const a=gX(r,e);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await a.next();if(u){l(),c.close();return}let f=h.byteLength;if(t){let g=i+=f;t(g)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},qb=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",eM=qb&&typeof ReadableStream=="function",xX=qb&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),tM=(r,...e)=>{try{return!!r(...e)}catch{return!1}},bX=eM&&tM(()=>{let r=!1;const e=new Request(ja.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),MT=64*1024,hN=eM&&tM(()=>Te.isReadableStream(new Response("").body)),W0={stream:hN&&(r=>r.body)};qb&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!W0[e]&&(W0[e]=Te.isFunction(r[e])?t=>t[e]():(t,s)=>{throw new $t(`Response type '${e}' is not supported`,$t.ERR_NOT_SUPPORT,s)})})})(new Response);const yX=async r=>{if(r==null)return 0;if(Te.isBlob(r))return r.size;if(Te.isSpecCompliantForm(r))return(await new Request(ja.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(r)||Te.isArrayBuffer(r))return r.byteLength;if(Te.isURLSearchParams(r)&&(r=r+""),Te.isString(r))return(await xX(r)).byteLength},vX=async(r,e)=>{const t=Te.toFiniteNumber(r.getContentLength());return t??yX(e)},wX=qb&&(async r=>{let{url:e,method:t,data:s,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:h,withCredentials:f="same-origin",fetchOptions:g}=J6(r);u=u?(u+"").toLowerCase():"text";let x=mX([a,i&&i.toAbortSignal()],o),y;const b=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let v;try{if(c&&bX&&t!=="get"&&t!=="head"&&(v=await vX(h,s))!==0){let _=new Request(e,{method:"POST",body:s,duplex:"half"}),I;if(Te.isFormData(s)&&(I=_.headers.get("content-type"))&&h.setContentType(I),_.body){const[P,T]=PT(v,$0(RT(c)));s=DT(_.body,MT,P,T)}}Te.isString(f)||(f=f?"include":"omit");const N="credentials"in Request.prototype;y=new Request(e,{...g,signal:x,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:s,duplex:"half",credentials:N?f:void 0});let k=await fetch(y,g);const A=hN&&(u==="stream"||u==="response");if(hN&&(l||A&&b)){const _={};["status","statusText","headers"].forEach(D=>{_[D]=k[D]});const I=Te.toFiniteNumber(k.headers.get("content-length")),[P,T]=l&&PT(I,$0(RT(l),!0))||[];k=new Response(DT(k.body,MT,P,()=>{T&&T(),b&&b()}),_)}u=u||"text";let R=await W0[Te.findKey(W0,u)||"text"](k,r);return!A&&b&&b(),await new Promise((_,I)=>{Q6(_,I,{data:R,headers:en.from(k.headers),status:k.status,statusText:k.statusText,config:r,request:y})})}catch(N){throw b&&b(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new $t("Network Error",$t.ERR_NETWORK,r,y),{cause:N.cause||N}):$t.from(N,N&&N.code,r,y)}}),mN={http:Oq,xhr:hX,fetch:wX};Te.forEach(mN,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const OT=r=>`- ${r}`,NX=r=>Te.isFunction(r)||r===null||r===!1,sM={getAdapter:r=>{r=Te.isArray(r)?r:[r];const{length:e}=r;let t,s;const a={};for(let i=0;i<e;i++){t=r[i];let o;if(s=t,!NX(t)&&(s=mN[(o=String(t)).toLowerCase()],s===void 0))throw new $t(`Unknown adapter '${o}'`);if(s)break;a[o||"#"+i]=s}if(!s){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(OT).join(`
`):" "+OT(i[0]):"as no adapter specified";throw new $t("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:mN};function Pw(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new vh(null,r)}function LT(r){return Pw(r),r.headers=en.from(r.headers),r.data=Tw.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),sM.getAdapter(r.adapter||Cg.adapter)(r).then(function(s){return Pw(r),s.data=Tw.call(r,r.transformResponse,s),s.headers=en.from(s.headers),s},function(s){return K6(s)||(Pw(r),s&&s.response&&(s.response.data=Tw.call(r,r.transformResponse,s.response),s.response.headers=en.from(s.response.headers))),Promise.reject(s)})}const rM="1.11.0",Xb={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Xb[r]=function(s){return typeof s===r||"a"+(e<1?"n ":" ")+r}});const FT={};Xb.transitional=function(e,t,s){function a(i,o){return"[Axios v"+rM+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(e===!1)throw new $t(a(o," has been removed"+(t?" in "+t:"")),$t.ERR_DEPRECATED);return t&&!FT[o]&&(FT[o]=!0,console.warn(a(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,o,l):!0}};Xb.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function jX(r,e,t){if(typeof r!="object")throw new $t("options must be an object",$t.ERR_BAD_OPTION_VALUE);const s=Object.keys(r);let a=s.length;for(;a-- >0;){const i=s[a],o=e[i];if(o){const l=r[i],c=l===void 0||o(l,i,r);if(c!==!0)throw new $t("option "+i+" must be "+c,$t.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new $t("Unknown option "+i,$t.ERR_BAD_OPTION)}}const n0={assertOptions:jX,validators:Xb},Ni=n0.validators;let ed=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ET,response:new ET}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=md(this.defaults,t);const{transitional:s,paramsSerializer:a,headers:i}=t;s!==void 0&&n0.assertOptions(s,{silentJSONParsing:Ni.transitional(Ni.boolean),forcedJSONParsing:Ni.transitional(Ni.boolean),clarifyTimeoutError:Ni.transitional(Ni.boolean)},!1),a!=null&&(Te.isFunction(a)?t.paramsSerializer={serialize:a}:n0.assertOptions(a,{encode:Ni.function,serialize:Ni.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),n0.assertOptions(t,{baseUrl:Ni.spelling("baseURL"),withXsrfToken:Ni.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Te.merge(i.common,i[t.method]);i&&Te.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),t.headers=en.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(c=c&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let h,f=0,g;if(!c){const y=[LT.bind(this),void 0];for(y.unshift(...l),y.push(...u),g=y.length,h=Promise.resolve(t);f<g;)h=h.then(y[f++],y[f++]);return h}g=l.length;let x=t;for(f=0;f<g;){const y=l[f++],b=l[f++];try{x=y(x)}catch(v){b.call(this,v);break}}try{h=LT.call(this,x)}catch(y){return Promise.reject(y)}for(f=0,g=u.length;f<g;)h=h.then(u[f++],u[f++]);return h}getUri(e){e=md(this.defaults,e);const t=Z6(e.baseURL,e.url,e.allowAbsoluteUrls);return q6(t,e.params,e.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(e){ed.prototype[e]=function(t,s){return this.request(md(s||{},{method:e,url:t,data:(s||{}).data}))}});Te.forEach(["post","put","patch"],function(e){function t(s){return function(i,o,l){return this.request(md(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ed.prototype[e]=t(),ed.prototype[e+"Form"]=t(!0)});let kX=class aM{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(a);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,l){s.reason||(s.reason=new vh(i,o,l),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new aM(function(a){e=a}),cancel:e}}};function SX(r){return function(t){return r.apply(null,t)}}function _X(r){return Te.isObject(r)&&r.isAxiosError===!0}const fN={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fN).forEach(([r,e])=>{fN[e]=r});function nM(r){const e=new ed(r),t=M6(ed.prototype.request,e);return Te.extend(t,ed.prototype,e,{allOwnKeys:!0}),Te.extend(t,e,null,{allOwnKeys:!0}),t.create=function(a){return nM(md(r,a))},t}const ss=nM(Cg);ss.Axios=ed;ss.CanceledError=vh;ss.CancelToken=kX;ss.isCancel=K6;ss.VERSION=rM;ss.toFormData=Yb;ss.AxiosError=$t;ss.Cancel=ss.CanceledError;ss.all=function(e){return Promise.all(e)};ss.spread=SX;ss.isAxiosError=_X;ss.mergeConfig=md;ss.AxiosHeaders=en;ss.formToJSON=r=>G6(Te.isHTMLForm(r)?new FormData(r):r);ss.getAdapter=sM.getAdapter;ss.HttpStatusCode=fN;ss.default=ss;const{Axios:ehe,AxiosError:the,CanceledError:she,isCancel:rhe,CancelToken:ahe,VERSION:nhe,all:ihe,Cancel:ohe,isAxiosError:lhe,spread:che,toFormData:dhe,AxiosHeaders:uhe,HttpStatusCode:hhe,formToJSON:mhe,getAdapter:fhe,mergeConfig:ghe}=ss,iM=E.createContext(),Eg=()=>E.useContext(iM),AX=({children:r})=>{const[e,t]=E.useState("USD"),[s,a]=E.useState({NGN:1,USD:62e-5,GBP:48e-5,JPY:.099,GHS:.0096,EUR:58e-5}),[i,o]=E.useState([{code:"USD",label:"$ USD"},{code:"NGN",label:"₦ NGN"},{code:"GBP",label:"£ GBP"},{code:"JPY",label:"¥ JPY"},{code:"GHS",label:"₵ GHS"},{code:"EUR",label:"€ EUR"},{code:"CAD",label:"$ CAD"},{code:"AUD",label:"$ AUD"},{code:"CNY",label:"¥ CNY"},{code:"INR",label:"₹ INR"}]),[l,c]=E.useState(!0);E.useEffect(()=>{(async()=>{let g="US",x="USD";console.log("Starting currency detection via IP...");try{g=(await ss.get("https://ipapi.co/json/",{timeout:5e3})).data.country_code?.toUpperCase()||"US",console.log("Country from IP:",g)}catch(b){console.error("IP geolocation error:",b.message)}x={NG:"NGN",GB:"GBP",US:"USD",JP:"JPY",GH:"GHS",DE:"EUR",FR:"EUR",IT:"EUR",ES:"EUR",CA:"CAD",AU:"AUD",CN:"CNY",IN:"INR",BR:"BRL",ZA:"ZAR",KE:"KES",MX:"MXN",RU:"RUB",SG:"SGD",AE:"AED",SA:"SAR",KR:"KRW",NZ:"NZD",CH:"CHF",SE:"SEK",NO:"NOK",DK:"DKK",EG:"EGP",TR:"TRY"}[g]||"USD",console.log("Set currency to:",x),t(x);try{console.log("Fetching exchange rates...");const b=Ne(J,"currencyRates","latest"),v=await it(b);if(v.exists()&&v.data().updatedAt?.toDate()>new Date(Date.now()-864e5))a(v.data().rates),o(v.data().availableCurrencies||i),console.log("Loaded rates from Firestore:",v.data().rates);else{const k=(await ss.get("https://v6.exchangerate-api.com/v6/YOUR_API_KEY/latest/NGN",{timeout:5e3})).data.conversion_rates,A=Object.keys(k).sort().map(R=>({code:R,label:new Intl.NumberFormat("en-US",{style:"currency",currency:R}).format(0).replace(/[0-9.,]/g,"")+` ${R}`}));await Gt(b,{base:"NGN",rates:k,availableCurrencies:A,updatedAt:Ti()}),a(k),o(A),console.log("Fetched rates from API:",k)}}catch(b){console.error("Exchange rate fetch error:",b.message),a({NGN:1,USD:62e-5,GBP:48e-5,JPY:.099,GHS:.0096,EUR:58e-5})}finally{c(!1),console.log("Currency detection complete")}})()},[]);const u=f=>{if(!s[e])return console.warn(`Rate not found for ${e}, using NGN`),new Intl.NumberFormat("en-US",{style:"currency",currency:"NGN"}).format(f);const g=f*s[e];return new Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(g)},h=f=>{s[f]?(console.log("Changing currency to:",f),t(f)):console.warn(`No rate for ${f}`)};return n.jsx(iM.Provider,{value:{currency:e,rates:s,convertPrice:u,changeCurrency:h,loading:l,availableCurrencies:i},children:r})};function CX(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}CX(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Ok=r=>typeof r=="number"&&!isNaN(r),Uf=r=>typeof r=="string",oM=r=>typeof r=="function",EX=r=>Uf(r)||Ok(r),TX=r=>E.isValidElement(r)||Uf(r)||oM(r)||Ok(r),PX=1,lM=()=>`${PX++}`,Fi=new Map,gN=[],UT=new Set,cM=()=>Fi.size>0,RX=(r,{containerId:e})=>{var t;return(t=Fi.get(e||1))==null?void 0:t.toasts.get(r)};function IX(r,e){var t;if(e)return!!((t=Fi.get(e))!=null&&t.isToastActive(r));let s=!1;return Fi.forEach(a=>{a.isToastActive(r)&&(s=!0)}),s}function DX(r){if(!cM()){gN=gN.filter(e=>r!=null&&e.options.toastId!==r);return}if(r==null||EX(r))Fi.forEach(e=>{e.removeToast(r)});else if(r&&("containerId"in r||"id"in r)){let e=Fi.get(r.containerId);e?e.removeToast(r.id):Fi.forEach(t=>{t.removeToast(r.id)})}}var MX=(r={})=>{Fi.forEach(e=>{e.props.limit&&(!r.containerId||e.id===r.containerId)&&e.clearQueue()})};function OX(r,e){TX(r)&&(cM()||gN.push({content:r,options:e}),Fi.forEach(t=>{t.buildToast(r,e)}))}function dM(r,e){Fi.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(r,e?.id)})}function LX(r){return UT.add(r),()=>{UT.delete(r)}}function FX(r){return r&&(Uf(r.toastId)||Ok(r.toastId))?r.toastId:lM()}function Tg(r,e){return OX(r,e),e.toastId}function Gb(r,e){return{...e,type:e&&e.type||r,toastId:FX(e)}}function Kb(r){return(e,t)=>Tg(e,Gb(r,t))}function xe(r,e){return Tg(r,Gb("default",e))}xe.loading=(r,e)=>Tg(r,Gb("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function UX(r,{pending:e,error:t,success:s},a){let i;e&&(i=Uf(e)?xe.loading(e,a):xe.loading(e.render,{...a,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,h,f)=>{if(h==null){xe.dismiss(i);return}let g={type:u,...o,...a,data:f},x=Uf(h)?{render:h}:h;return i?xe.update(i,{...g,...x}):xe(x.render,{...g,...x}),f},c=oM(r)?r():r;return c.then(u=>l("success",s,u)).catch(u=>l("error",t,u)),c}xe.promise=UX;xe.success=Kb("success");xe.info=Kb("info");xe.error=Kb("error");xe.warning=Kb("warning");xe.warn=xe.warning;xe.dark=(r,e)=>Tg(r,Gb("default",{theme:"dark",...e}));function zX(r){DX(r)}xe.dismiss=zX;xe.clearWaitingQueue=MX;xe.isActive=IX;xe.update=(r,e={})=>{let t=RX(r,e);if(t){let{props:s,content:a}=t,i={delay:100,...s,...e,toastId:e.toastId||r,updateId:lM()};i.toastId!==r&&(i.staleId=r);let o=i.render||a;delete i.render,Tg(o,i)}};xe.done=r=>{xe.update(r,{progress:1})};xe.onChange=LX;xe.play=r=>dM(!0,r);xe.pause=r=>dM(!1,r);const ff=async(r,e,t=null)=>{if(!r||e<=0)throw new Error("Invalid cart item data");try{const s=Ne(J,"products",r),a=await it(s);if(!a.exists())throw new Error("Product not found");const i=a.data();if(i.stock<e)throw new Error(`Only ${i.stock} units available`);const o=await Ui(t),l=o.find(u=>u.productId===r);let c;if(l){const u=l.quantity+e;if(u>i.stock)throw new Error(`Cannot add more than ${i.stock} units`);c=o.map(h=>h.productId===r?{...h,quantity:u}:h)}else c=[...o,{productId:r,quantity:e,product:{name:i.name,price:i.price,image:i.imageUrl,stock:i.stock,sellerId:i.sellerId||"default-seller-id"}}];await fd(c,t),xe.success("Added to cart")}catch(s){throw console.error("Error adding to cart:",s),xe.error(s.message),s}},Ui=async(r=null)=>{const e=r?`userCart_${r}`:"guestCart";let t=[];try{const s=localStorage.getItem(e);s&&(t=JSON.parse(s),Array.isArray(t)||(console.warn("Invalid cart format, resetting:",t),t=[]));const a=[];for(const i of t){if(!i.productId||i.quantity<=0){console.warn("Invalid cart item:",i);continue}try{const o=Ne(J,"products",i.productId),l=await it(o);if(l.exists()){const c=l.data();a.push({...i,product:{name:c.name,price:c.price,image:c.imageUrl,stock:c.stock,sellerId:c.sellerId||"default-seller-id"}})}else console.warn(`Product not found for ID: ${i.productId}`),xe.error(`Removed unavailable product (ID: ${i.productId}) from cart`)}catch(o){console.error(`Error validating product ${i.productId}:`,o),xe.error(`Error validating product (ID: ${i.productId})`)}}return a.length<t.length&&await fd(a,r),a}catch(s){return console.error("Error fetching cart:",s),xe.error("Failed to fetch cart"),[]}},zT=async(r=null)=>{try{return(await Ui(r)).reduce((t,s)=>t+s.quantity,0)}catch(e){return console.error("Error getting cart item count:",e),0}},fd=async(r,e=null)=>{const t=e?`userCart_${e}`:"guestCart";try{localStorage.setItem(t,JSON.stringify(r)),window.dispatchEvent(new Event("cartUpdated"))}catch(s){throw console.error("Error updating cart:",s),xe.error("Failed to update cart"),s}},Qb=async(r=null)=>{try{await fd([],r),xe.success("Cart cleared")}catch(e){throw console.error("Error clearing cart:",e),xe.error("Failed to clear cart"),e}},VX=async r=>{if(!r)throw new Error("Please log in to checkout");const e=await Ui(r);if(e.length===0)throw new Error("Cart is empty");try{for(const s of e){const a=Ne(J,"products",s.productId),i=await it(a);if(!i.exists())throw new Error(`Product ${s.productId} no longer available`);const o=i.data();if(o.stock<s.quantity)throw new Error(`Insufficient stock for ${o.name}`)}const t=_e(J,"orders");await Za(t,{userId:r,items:e,total:e.reduce((s,a)=>s+a.product.price*a.quantity,0),createdAt:new Date().toISOString(),status:"pending"}),await Qb(r),xe.success("Order placed successfully")}catch(t){throw console.error("Checkout error:",t),xe.error(t.message),t}},BX=async r=>{try{const e=await Ui(null);if(e.length===0)return;const s=[...await Ui(r)];for(const a of e){const i=s.find(o=>o.productId===a.productId);if(i){i.quantity+=a.quantity;try{const o=Ne(J,"products",i.productId),l=await it(o);if(l.exists()){const c=l.data();i.quantity>c.stock&&(i.quantity=c.stock,xe.warn(`Adjusted quantity for ${c.name} to available stock`))}}catch(o){console.error(`Error validating product ${i.productId}:`,o),xe.error(`Error validating product (ID: ${i.productId})`)}}else s.push(a)}await fd(s,r),await Qb(null),xe.success("Guest cart merged with your account")}catch(e){console.error("Error merging guest cart:",e),xe.error("Failed to merge guest cart")}},VT="/assets/foremade-Bxu0VQA7.png";function BT(){const[r,e]=E.useState(!1);E.useEffect(()=>{const s=localStorage.getItem("userData");s||localStorage.removeItem("freeShippingDismissed"),!localStorage.getItem("freeShippingDismissed")&&!s&&e(!0)},[]);const t=()=>{e(!1),localStorage.setItem("freeShippingDismissed","true")};return r?n.jsx("div",{className:"relative p-[1px] bg-[#eb9325]",children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("p",{className:"text-white text-md max-md:text-sm m-1 max-md:m-0 text-center py-2",children:"Up to 30% off when you buy multiple items | Free shipping Nationwide!"}),n.jsx("button",{onClick:t,className:"absolute right-2 top-1/2 -translate-y-1/2 text-white hover:text-gray-200",title:"Dismiss","aria-label":"Dismiss free shipping banner",children:n.jsx("i",{className:"bx bx-x text-xl"})})]})}):null}const HX=()=>{const r=Br(),e=us(),[t,s]=E.useState(""),[a,i]=E.useState([]),[o,l]=E.useState(!1),[c,u]=E.useState(!1),[h,f]=E.useState(null),[g,x]=E.useState(0),[y,b]=E.useState([]),[v,N]=E.useState(null),[k,A]=E.useState(null),[R,_]=E.useState(0),[I,P]=E.useState(!1),[T,D]=E.useState(!1),[L,F]=E.useState(!1),[z,O]=E.useState(!1),[V,Y]=E.useState([]),H="3rem",$=Ie=>Ie.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");E.useEffect(()=>{const Ie=os(_e(J,"categories"),ie=>{const ze=ie.docs.map(Ve=>Ve.id).sort();Y(ze)},ie=>{console.error("Error fetching categories:",ie),xe.error("Failed to load categories")});return()=>Ie()},[]);const X=V.slice(0,8),G=V.slice(8),B=Ie=>`/category/${$(Ie)}`,Q=r.pathname!=="/";E.useEffect(()=>{const Ie=ve.onAuthStateChanged(async ie=>{N(ie);try{const ze=await zT(ie?.uid);if(x(ze),ie)try{const Ve=localStorage.getItem("userData");Ve&&A(JSON.parse(Ve))}catch(Ve){console.error("Error parsing userData:",Ve),xe.error("Failed to load user profile")}else A(null),_(0),b([]),localStorage.removeItem("userData")}catch(ze){console.error("Error in auth state:",ze),xe.error("Failed to initialize session")}});return()=>Ie()},[]),E.useEffect(()=>{v&&(async()=>{try{const ie=ft(_e(J,"notifications"),rt("userId","==",v.uid),rt("read","==",!1)),ze=await Ke(ie);_(ze.size)}catch(ie){console.error("Error fetching notifications:",ie),xe.error("Failed to load notifications")}})()},[v]),E.useEffect(()=>{const Ie=()=>{try{const Ve=localStorage.getItem("favorites");b(Ve?JSON.parse(Ve):[])}catch(Ve){console.error("Error loading favorites:",Ve),xe.error("Failed to sync favorites")}};Ie();const ie=async()=>{try{const Ve=await zT(v?.uid);x(Ve)}catch(Ve){console.error("Error updating cart:",Ve),xe.error("Failed to update cart")}},ze=Ve=>{Ve.key==="favorites"&&Ie()};return window.addEventListener("cartUpdated",ie),window.addEventListener("storage",ze),()=>{window.removeEventListener("cartUpdated",ie),window.removeEventListener("storage",ze)}},[v]);const ee=()=>k&&k.name?k.name.split(" ")[0]||"User":v?v.displayName?.split(" ")[0]||"User":"Guest",se=async Ie=>{const ie=Ie.target.value;if(s(ie),ie.trim()===""){i([]),l(!1);return}u(!0);try{const ze=ft(_e(J,"products"),rt("status","==","approved")),ce=(await Ke(ze)).docs.map(ke=>({id:ke.id,...ke.data()})).filter(ke=>ke.name.toLowerCase().includes(ie.toLowerCase()));i(ce),l(!0)}catch(ze){console.error("Error searching:",ze),f("Failed to search."),xe.error("Search failed")}finally{u(!1)}},le=()=>{t.trim()!==""&&a.length>0&&l(!0)},Ee=()=>{setTimeout(()=>l(!1),200)},ue=()=>{F(!L)},Oe=()=>{O(!z)},Pe=()=>{setTimeout(()=>F(!1),200)};return h?n.jsxs("div",{className:"p-4 text-red-600",children:["Error: ",h]}):n.jsxs("header",{className:"w-full",children:[n.jsx("div",{className:"bg-[#112639] hidden sm:flex text-white w-full py-0 h-9.5 items-center",children:n.jsxs("div",{className:"p-2 flex w-full h-full items-center justify-between",children:[" ",n.jsxs("div",{className:"flex items-center h-full pl-4",children:[" ",n.jsx(he,{to:"/",children:n.jsx("img",{src:VT,className:"h-10 w-auto",alt:"Foremade"})}),n.jsxs("nav",{className:"flex items-center ml-2 mt-1",children:[n.jsx(he,{to:"/products",className:"hover:text-gray-100 hover:underline transition-all px-2",children:"Shop"}),n.jsx(he,{to:"/products-upload",className:"hover:text-gray-100 hover:underline transition-all px-2",children:"Sell"}),n.jsx(he,{to:"/smile",className:"hover:text-gray-100 hover:underline transition-all px-2",children:"Smile"})]})]}),n.jsxs("div",{className:"flex items-center gap-4 pr-4",children:[" ",v?n.jsxs(he,{to:"/profile",className:"hover:text-gray-300 text-sm whitespace-nowrap",children:["Hi, ",ee()]}):n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(he,{to:"/login",className:"hover:text-gray-300 text-sm whitespace-nowrap",children:"Login"}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx(he,{to:"/register",className:"hover:text-gray-300 text-sm whitespace-nowrap",children:"Sign Up"})]}),n.jsxs(he,{to:"/notifications",className:"relative flex items-center justify-center",children:[n.jsx("i",{className:"bx bx-bell text-xl"}),R>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:R})]}),n.jsxs(he,{to:"/cart",className:"relative flex items-center justify-center",children:[n.jsx("i",{className:"bx bx-cart-alt text-xl text-white"}),g>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:g})]}),n.jsx(he,{to:"/search",className:"lg:hidden",children:n.jsx("i",{className:"bx bx-search text-xl"})})]})]})}),n.jsx("div",{className:"hidden sm:block bg-[#eb9325] h-2 w-full"}),n.jsxs("div",{className:"sm:hidden bg-[#112639] text-white p-2 py-3 w-full flex items-center fixed top-0 left-0 right-0 z-40 overflow-x-hidden",style:{paddingTop:"env(safe-area-inset-top)"},children:[n.jsx("div",{className:"flex items-center min-w-0",children:n.jsx(he,{to:"/",children:n.jsx("img",{src:VT,className:"h-9",alt:"Foremade"})})}),n.jsx("div",{className:"flex-1 min-w-0"}),n.jsxs("div",{className:"flex mt-4 items-center justify-end flex-1 min-w-0",children:[n.jsxs(he,{to:"/cart",className:"relative flex items-center justify-center",children:[n.jsx("i",{className:"bx bx-cart-alt text-xl text-white"}),g>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:g})]}),n.jsx("button",{onClick:()=>P(!0),className:"ml-4 mr-4 flex items-center justify-center focus:outline-none",children:n.jsx("i",{className:"bx bx-menu text-2xl"})})]})]}),n.jsx("div",{className:"sm:hidden",style:{height:`calc(${H} + env(safe-area-inset-top))`,minHeight:"3rem"}}),n.jsxs("div",{className:"block sm:hidden",children:[n.jsx("div",{className:"block sm:hidden bg-[#eb9325] h-2 w-full -mt-16 mb-14"}),n.jsx(BT,{})]}),n.jsxs("div",{className:"block sm:hidden px-2 mt-2",children:[n.jsxs("div",{className:"relative w-full",children:[n.jsx("input",{type:"text",placeholder:"Search for electronics, accessories...",className:"w-full p-2 pl-8 border border-gray-400 rounded-md text-black placeholder-gray-600 focus:outline-none text-xs",value:t,onChange:se,onFocus:le,onBlur:Ee}),o&&n.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:c?n.jsx("div",{className:"p-2 text-xs text-gray-600",children:"Loading..."}):a.length>0?a.map(Ie=>n.jsxs(he,{to:`/product/${Ie.id}`,className:"flex items-center p-2 hover:bg-gray-100",onClick:()=>{l(!1),s("")},children:[n.jsx("img",{src:Ie.imageUrls&&Ie.imageUrls[0]?.startsWith("https://")?Ie.imageUrls[0]:"https://via.placeholder.com/40?text=Image+Not+Found",alt:Ie.name,className:"w-8 h-8 object-cover rounded mr-2 flex-shrink-0",onError:ie=>{ie.target.src="https://via.placeholder.com/40?text=Image+Not+Found"}}),n.jsx("span",{className:"text-xs text-gray-800",children:Ie.name})]},Ie.id)):n.jsx("div",{className:"p-2 text-xs text-gray-600",children:"No results found"})})]}),n.jsx("div",{className:"flex overflow-x-auto gap-2 text-xs text-gray-700 py-2",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:V.map(Ie=>n.jsx(he,{to:B(Ie),className:"hover:text-blue-600 bg-gray-100 rounded-full px-3 py-1 whitespace-nowrap flex-shrink-0",children:Ie},Ie))})]}),n.jsx("div",{className:"hidden sm:block",children:n.jsx(BT,{})}),n.jsx("div",{className:"hidden sm:block",children:n.jsx("div",{className:"container mx-auto px-2 sm:px-4 py-1 sm:py-4",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsxs("div",{className:"relative w-full",children:[n.jsx("input",{type:"text",placeholder:"Search Foremade",className:"placeholder-slate-400 w-full p-2 pl-8 border border-gray-400 rounded-md text-black focus:outline-none text-xs sm:text-base",value:t,onChange:se,onFocus:le,onBlur:Ee}),n.jsx("i",{className:"bx bx-search absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-600 text-sm sm:text-base"}),o&&n.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-80 overflow-y-auto",children:c?n.jsx("div",{className:"p-2 text-xs sm:text-base text-gray-600",children:"Loading..."}):a.length>0?a.map(Ie=>n.jsxs(he,{to:`/product/${Ie.id}`,className:"flex items-center p-2 hover:bg-gray-100",onClick:()=>{l(!1),s("")},children:[n.jsx("img",{src:Ie.imageUrls&&Ie.imageUrls[0]?.startsWith("https://")?Ie.imageUrls[0]:"https://via.placeholder.com/40?text=Image+Not+Found",alt:Ie.name,className:"w-8 sm:w-10 h-8 sm:h-10 object-cover rounded mr-2",onError:ie=>{ie.target.src="https://via.placeholder.com/40?text=Image+Not+Found"}}),n.jsx("span",{className:"text-xs sm:text-base text-gray-800",children:Ie.name})]},Ie.id)):n.jsx("div",{className:"p-2 text-xs sm:text-base text-gray-600",children:"No results found"})})]}),n.jsx("div",{className:"w-full mt-2 sm:mt-4",children:n.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-700 flex-wrap",children:[X.map(Ie=>n.jsx(he,{to:B(Ie),className:"hover:text-blue-600 whitespace-nowrap",children:Ie},Ie)),V.length>8&&n.jsxs("div",{className:"relative",onMouseLeave:Pe,children:[n.jsxs("button",{onClick:ue,className:"hover:text-blue-600 focus:outline-none whitespace-nowrap",children:["More ",n.jsx("i",{className:"bx bx-chevron-down"})]}),L&&n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-[60%] mt-1 w-72 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] max-h-80 overflow-y-auto",children:G.map(Ie=>n.jsx(he,{to:B(Ie),className:"block px-4 py-2 text-gray-800 hover:bg-gray-100 text-sm",onClick:()=>F(!1),children:Ie},Ie))})]})]})})]})})}),Q&&n.jsx("div",{className:"w-full flex justify-start mt-2 px-2 sm:px-4",children:n.jsxs("button",{onClick:()=>{window.history.length>2?e(-1):e("/")},className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-200 text-blue-700 text-sm font-medium focus:outline-none","aria-label":"Go back",children:[n.jsx("i",{className:"bx bx-arrow-back text-xl"}),n.jsx("span",{className:"sm:inline",children:"Return"})]})}),n.jsxs("nav",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center py-2 z-40",children:[n.jsxs(he,{to:"/",className:`flex flex-col items-center ${r.pathname==="/"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-home-alt text-2xl"}),n.jsx("span",{className:"text-xs",children:"Home"})]}),n.jsxs(he,{to:"/search",className:`flex flex-col items-center ${r.pathname==="/search"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-search text-2xl"}),n.jsx("span",{className:"text-xs",children:"Search"})]}),n.jsxs(he,{to:"/products-upload",className:`flex flex-col items-center ${r.pathname==="/products-upload"?"text-blue-600":"text-orange-500"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bxs-plus-circle text-2xl"}),n.jsx("span",{className:"text-xs",children:"Sell"})]}),n.jsxs(he,{to:"/notifications",className:`flex flex-col items-center relative ${r.pathname==="/notifications"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-bell text-2xl"}),R>0&&n.jsx("span",{className:"absolute top-0 right-2 bg-red-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:R}),n.jsx("span",{className:"text-xs",children:"Inbox"})]}),n.jsxs(he,{to:"/profile",className:`flex flex-col items-center ${r.pathname==="/profile"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-user text-2xl"}),n.jsx("span",{className:"text-xs",children:"You"})]})]}),n.jsxs("div",{className:"sm:hidden",children:[n.jsx("div",{className:"fixed top-0 left-0 h-full bg-[#f8d7b0] w-full transform transition-transform duration-300 ease-in-out z-50 overflow-y-auto max-h-screen",style:{transform:I?"translateX(0)":"translateX(-100%)"},children:n.jsxs("div",{className:"p-4",children:[n.jsx("button",{onClick:()=>P(!1),className:"mb-4",children:n.jsx("i",{className:"bx bx-x text-2xl text-[#112040]"})}),n.jsxs("div",{className:"flex flex-col space-y-3",children:[n.jsxs("div",{className:"flex justify-center gap-2 w-full mb-4",children:[n.jsx(he,{to:"/products",className:"bg-white/80 text-[#112040] hover:text-amber-500 text-base py-3 px-4 rounded-lg border border-[#112040]/20 font-semibold shadow-sm hover:bg-white transition-all",onClick:()=>P(!1),children:"Shop"}),n.jsx(he,{to:"/products-upload",className:"bg-white/80 text-[#112040] hover:text-amber-500 text-base py-3 px-4 rounded-lg border border-[#112040]/20 font-semibold shadow-sm hover:bg-white transition-all",onClick:()=>P(!1),children:"Sell"}),n.jsx(he,{to:"/smile",className:"bg-white/80 text-[#112040] hover:text-amber-500 text-base py-3 px-4 rounded-lg border border-[#112040]/20 font-semibold shadow-sm hover:bg-white transition-all",onClick:()=>P(!1),children:"Smile"})]}),!v&&n.jsxs("div",{className:"flex items-center justify-center mt-6 bg-[#112040] text-white px-4 py-3 rounded-lg text-sm hover:bg-[#112040]/80",children:[n.jsx(he,{to:"/login",className:"mx-2",onClick:()=>P(!1),children:"Log in"}),n.jsx("span",{className:"mx-1",children:"|"}),n.jsx(he,{to:"/register",className:"mx-2",onClick:()=>P(!1),children:"Sign up"})]}),v&&n.jsx(he,{to:"/profile",className:"mt-6 bg-[#112040] text-white px-4 py-3 rounded-lg text-sm hover:bg-[#112040]/80 text-center",onClick:()=>P(!1),children:"My Profile"}),n.jsxs("div",{className:"space-y-1",children:[V.slice(0,8).map(Ie=>n.jsx(he,{to:B(Ie),className:"text-[#112040] hover:text-amber-500 text-sm py-2 border-b border-[#112040]/10 block",onClick:()=>P(!1),children:Ie},Ie)),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:Oe,className:"text-[#112040] hover:text-amber-500 text-sm py-2 border-b border-[#112040]/10 w-full text-left flex items-center justify-between",children:["More ",n.jsx("i",{className:"bx bx-chevron-down"})]}),z&&n.jsxs("div",{className:"mt-2 space-y-1 z-100",children:[console.log("Mobile More Dropdown Open:",z,"Categories:",V.slice(8)),V.slice(8).map(Ie=>n.jsx(he,{to:B(Ie),className:"text-[#112040] hover:text-amber-500 text-sm py-2 pl-4 border-b border-[#112040]/10 block",onClick:()=>{P(!1),O(!1)},children:Ie},Ie))]})]})]})]})]})}),I&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>P(!1)})]})]})},Lk=E.createContext({});function Fk(r){const e=E.useRef(null);return e.current===null&&(e.current=r()),e.current}const Uk=typeof window<"u",uM=Uk?E.useLayoutEffect:E.useEffect,Zb=E.createContext(null);function zk(r,e){r.indexOf(e)===-1&&r.push(e)}function Vk(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const Mo=(r,e,t)=>t>e?e:t<r?r:t;let Bk=()=>{};const Oo={},hM=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function mM(r){return typeof r=="object"&&r!==null}const fM=r=>/^0[^.\s]+$/u.test(r);function Hk(r){let e;return()=>(e===void 0&&(e=r()),e)}const Un=r=>r,$X=(r,e)=>t=>e(r(t)),Pg=(...r)=>r.reduce($X),zf=(r,e,t)=>{const s=e-r;return s===0?1:(t-r)/s};class $k{constructor(){this.subscriptions=[]}add(e){return zk(this.subscriptions,e),()=>Vk(this.subscriptions,e)}notify(e,t,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,t,s);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zi=r=>r*1e3,Vi=r=>r/1e3;function gM(r,e){return e?r*(1e3/e):0}const pM=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,WX=1e-7,YX=12;function qX(r,e,t,s,a){let i,o,l=0;do o=e+(t-e)/2,i=pM(o,s,a)-r,i>0?t=o:e=o;while(Math.abs(i)>WX&&++l<YX);return o}function Rg(r,e,t,s){if(r===e&&t===s)return Un;const a=i=>qX(i,0,1,r,t);return i=>i===0||i===1?i:pM(a(i),e,s)}const xM=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,bM=r=>e=>1-r(1-e),yM=Rg(.33,1.53,.69,.99),Wk=bM(yM),vM=xM(Wk),wM=r=>(r*=2)<1?.5*Wk(r):.5*(2-Math.pow(2,-10*(r-1))),Yk=r=>1-Math.sin(Math.acos(r)),NM=bM(Yk),jM=xM(Yk),XX=Rg(.42,0,1,1),GX=Rg(0,0,.58,1),kM=Rg(.42,0,.58,1),KX=r=>Array.isArray(r)&&typeof r[0]!="number",SM=r=>Array.isArray(r)&&typeof r[0]=="number",QX={linear:Un,easeIn:XX,easeInOut:kM,easeOut:GX,circIn:Yk,circInOut:jM,circOut:NM,backIn:Wk,backInOut:vM,backOut:yM,anticipate:wM},ZX=r=>typeof r=="string",HT=r=>{if(SM(r)){Bk(r.length===4);const[e,t,s,a]=r;return Rg(e,t,s,a)}else if(ZX(r))return QX[r];return r},fx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function JX(r,e){let t=new Set,s=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(u.schedule(h),r()),h(l)}const u={schedule:(h,f=!1,g=!1)=>{const y=g&&a?t:s;return f&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{s.delete(h),o.delete(h)},process:h=>{if(l=h,a){i=!0;return}a=!0,[t,s]=[s,t],t.forEach(c),t.clear(),a=!1,i&&(i=!1,u.process(h))}};return u}const eG=40;function _M(r,e){let t=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>t=!0,o=fx.reduce((A,R)=>(A[R]=JX(i),A),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:h,update:f,preRender:g,render:x,postRender:y}=o,b=()=>{const A=Oo.useManualTiming?a.timestamp:performance.now();t=!1,Oo.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(A-a.timestamp,eG),1)),a.timestamp=A,a.isProcessing=!0,l.process(a),c.process(a),u.process(a),h.process(a),f.process(a),g.process(a),x.process(a),y.process(a),a.isProcessing=!1,t&&e&&(s=!1,r(b))},v=()=>{t=!0,s=!0,a.isProcessing||r(b)};return{schedule:fx.reduce((A,R)=>{const _=o[R];return A[R]=(I,P=!1,T=!1)=>(t||v(),_.schedule(I,P,T)),A},{}),cancel:A=>{for(let R=0;R<fx.length;R++)o[fx[R]].cancel(A)},state:a,steps:o}}const{schedule:dr,cancel:Ul,state:ua,steps:Rw}=_M(typeof requestAnimationFrame<"u"?requestAnimationFrame:Un,!0);let i0;function tG(){i0=void 0}const Ka={now:()=>(i0===void 0&&Ka.set(ua.isProcessing||Oo.useManualTiming?ua.timestamp:performance.now()),i0),set:r=>{i0=r,queueMicrotask(tG)}},AM=r=>e=>typeof e=="string"&&e.startsWith(r),qk=AM("--"),sG=AM("var(--"),Xk=r=>sG(r)?rG.test(r.split("/*")[0].trim()):!1,rG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,wh={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Vf={...wh,transform:r=>Mo(0,1,r)},gx={...wh,default:1},gf=r=>Math.round(r*1e5)/1e5,Gk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function aG(r){return r==null}const nG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Kk=(r,e)=>t=>!!(typeof t=="string"&&nG.test(t)&&t.startsWith(r)||e&&!aG(t)&&Object.prototype.hasOwnProperty.call(t,e)),CM=(r,e,t)=>s=>{if(typeof s!="string")return s;const[a,i,o,l]=s.match(Gk);return{[r]:parseFloat(a),[e]:parseFloat(i),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},iG=r=>Mo(0,255,r),Iw={...wh,transform:r=>Math.round(iG(r))},Hc={test:Kk("rgb","red"),parse:CM("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:s=1})=>"rgba("+Iw.transform(r)+", "+Iw.transform(e)+", "+Iw.transform(t)+", "+gf(Vf.transform(s))+")"};function oG(r){let e="",t="",s="",a="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),s=r.substring(5,7),a=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),s=r.substring(3,4),a=r.substring(4,5),e+=e,t+=t,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const pN={test:Kk("#"),parse:oG,transform:Hc.transform},Ig=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),ml=Ig("deg"),Bi=Ig("%"),Lt=Ig("px"),lG=Ig("vh"),cG=Ig("vw"),$T={...Bi,parse:r=>Bi.parse(r)/100,transform:r=>Bi.transform(r*100)},Cu={test:Kk("hsl","hue"),parse:CM("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(r)+", "+Bi.transform(gf(e))+", "+Bi.transform(gf(t))+", "+gf(Vf.transform(s))+")"},Lr={test:r=>Hc.test(r)||pN.test(r)||Cu.test(r),parse:r=>Hc.test(r)?Hc.parse(r):Cu.test(r)?Cu.parse(r):pN.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Hc.transform(r):Cu.transform(r),getAnimatableNone:r=>{const e=Lr.parse(r);return e.alpha=0,Lr.transform(e)}},dG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uG(r){return isNaN(r)&&typeof r=="string"&&(r.match(Gk)?.length||0)+(r.match(dG)?.length||0)>0}const EM="number",TM="color",hG="var",mG="var(",WT="${}",fG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bf(r){const e=r.toString(),t=[],s={color:[],number:[],var:[]},a=[];let i=0;const l=e.replace(fG,c=>(Lr.test(c)?(s.color.push(i),a.push(TM),t.push(Lr.parse(c))):c.startsWith(mG)?(s.var.push(i),a.push(hG),t.push(c)):(s.number.push(i),a.push(EM),t.push(parseFloat(c))),++i,WT)).split(WT);return{values:t,split:l,indexes:s,types:a}}function PM(r){return Bf(r).values}function RM(r){const{split:e,types:t}=Bf(r),s=e.length;return a=>{let i="";for(let o=0;o<s;o++)if(i+=e[o],a[o]!==void 0){const l=t[o];l===EM?i+=gf(a[o]):l===TM?i+=Lr.transform(a[o]):i+=a[o]}return i}}const gG=r=>typeof r=="number"?0:Lr.test(r)?Lr.getAnimatableNone(r):r;function pG(r){const e=PM(r);return RM(r)(e.map(gG))}const zl={test:uG,parse:PM,createTransformer:RM,getAnimatableNone:pG};function Dw(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function xG({hue:r,saturation:e,lightness:t,alpha:s}){r/=360,e/=100,t/=100;let a=0,i=0,o=0;if(!e)a=i=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;a=Dw(c,l,r+1/3),i=Dw(c,l,r),o=Dw(c,l,r-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}function Y0(r,e){return t=>t>0?e:r}const hr=(r,e,t)=>r+(e-r)*t,Mw=(r,e,t)=>{const s=r*r,a=t*(e*e-s)+s;return a<0?0:Math.sqrt(a)},bG=[pN,Hc,Cu],yG=r=>bG.find(e=>e.test(r));function YT(r){const e=yG(r);if(!e)return!1;let t=e.parse(r);return e===Cu&&(t=xG(t)),t}const qT=(r,e)=>{const t=YT(r),s=YT(e);if(!t||!s)return Y0(r,e);const a={...t};return i=>(a.red=Mw(t.red,s.red,i),a.green=Mw(t.green,s.green,i),a.blue=Mw(t.blue,s.blue,i),a.alpha=hr(t.alpha,s.alpha,i),Hc.transform(a))},xN=new Set(["none","hidden"]);function vG(r,e){return xN.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function wG(r,e){return t=>hr(r,e,t)}function Qk(r){return typeof r=="number"?wG:typeof r=="string"?Xk(r)?Y0:Lr.test(r)?qT:kG:Array.isArray(r)?IM:typeof r=="object"?Lr.test(r)?qT:NG:Y0}function IM(r,e){const t=[...r],s=t.length,a=r.map((i,o)=>Qk(i)(i,e[o]));return i=>{for(let o=0;o<s;o++)t[o]=a[o](i);return t}}function NG(r,e){const t={...r,...e},s={};for(const a in t)r[a]!==void 0&&e[a]!==void 0&&(s[a]=Qk(r[a])(r[a],e[a]));return a=>{for(const i in s)t[i]=s[i](a);return t}}function jG(r,e){const t=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const i=e.types[a],o=r.indexes[i][s[i]],l=r.values[o]??0;t[a]=l,s[i]++}return t}const kG=(r,e)=>{const t=zl.createTransformer(e),s=Bf(r),a=Bf(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?xN.has(r)&&!a.values.length||xN.has(e)&&!s.values.length?vG(r,e):Pg(IM(jG(s,a),a.values),t):Y0(r,e)};function DM(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?hr(r,e,t):Qk(r)(r,e)}const SG=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>dr.update(e,t),stop:()=>Ul(e),now:()=>ua.isProcessing?ua.timestamp:Ka.now()}},MM=(r,e,t=10)=>{let s="";const a=Math.max(Math.round(e/t),2);for(let i=0;i<a;i++)s+=Math.round(r(i/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},q0=2e4;function Zk(r){let e=0;const t=50;let s=r.next(e);for(;!s.done&&e<q0;)e+=t,s=r.next(e);return e>=q0?1/0:e}function _G(r,e=100,t){const s=t({...r,keyframes:[0,e]}),a=Math.min(Zk(s),q0);return{type:"keyframes",ease:i=>s.next(a*i).value/e,duration:Vi(a)}}const AG=5;function OM(r,e,t){const s=Math.max(e-AG,0);return gM(t-r(s),e-s)}const br={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ow=.001;function CG({duration:r=br.duration,bounce:e=br.bounce,velocity:t=br.velocity,mass:s=br.mass}){let a,i,o=1-e;o=Mo(br.minDamping,br.maxDamping,o),r=Mo(br.minDuration,br.maxDuration,Vi(r)),o<1?(a=u=>{const h=u*o,f=h*r,g=h-t,x=bN(u,o),y=Math.exp(-f);return Ow-g/x*y},i=u=>{const f=u*o*r,g=f*t+t,x=Math.pow(o,2)*Math.pow(u,2)*r,y=Math.exp(-f),b=bN(Math.pow(u,2),o);return(-a(u)+Ow>0?-1:1)*((g-x)*y)/b}):(a=u=>{const h=Math.exp(-u*r),f=(u-t)*r+1;return-Ow+h*f},i=u=>{const h=Math.exp(-u*r),f=(t-u)*(r*r);return h*f});const l=5/r,c=TG(a,i,l);if(r=zi(r),isNaN(c))return{stiffness:br.stiffness,damping:br.damping,duration:r};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:r}}}const EG=12;function TG(r,e,t){let s=t;for(let a=1;a<EG;a++)s=s-r(s)/e(s);return s}function bN(r,e){return r*Math.sqrt(1-e*e)}const PG=["duration","bounce"],RG=["stiffness","damping","mass"];function XT(r,e){return e.some(t=>r[t]!==void 0)}function IG(r){let e={velocity:br.velocity,stiffness:br.stiffness,damping:br.damping,mass:br.mass,isResolvedFromDuration:!1,...r};if(!XT(r,RG)&&XT(r,PG))if(r.visualDuration){const t=r.visualDuration,s=2*Math.PI/(t*1.2),a=s*s,i=2*Mo(.05,1,1-(r.bounce||0))*Math.sqrt(a);e={...e,mass:br.mass,stiffness:a,damping:i}}else{const t=CG(r);e={...e,...t,mass:br.mass},e.isResolvedFromDuration=!0}return e}function X0(r=br.visualDuration,e=br.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:s,restDelta:a}=t;const i=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:h,duration:f,velocity:g,isResolvedFromDuration:x}=IG({...t,velocity:-Vi(t.velocity||0)}),y=g||0,b=u/(2*Math.sqrt(c*h)),v=o-i,N=Vi(Math.sqrt(c/h)),k=Math.abs(v)<5;s||(s=k?br.restSpeed.granular:br.restSpeed.default),a||(a=k?br.restDelta.granular:br.restDelta.default);let A;if(b<1){const _=bN(N,b);A=I=>{const P=Math.exp(-b*N*I);return o-P*((y+b*N*v)/_*Math.sin(_*I)+v*Math.cos(_*I))}}else if(b===1)A=_=>o-Math.exp(-N*_)*(v+(y+N*v)*_);else{const _=N*Math.sqrt(b*b-1);A=I=>{const P=Math.exp(-b*N*I),T=Math.min(_*I,300);return o-P*((y+b*N*v)*Math.sinh(T)+_*v*Math.cosh(T))/_}}const R={calculatedDuration:x&&f||null,next:_=>{const I=A(_);if(x)l.done=_>=f;else{let P=_===0?y:0;b<1&&(P=_===0?zi(y):OM(A,_,I));const T=Math.abs(P)<=s,D=Math.abs(o-I)<=a;l.done=T&&D}return l.value=l.done?o:I,l},toString:()=>{const _=Math.min(Zk(R),q0),I=MM(P=>R.next(_*P).value,_,30);return _+"ms "+I},toTransition:()=>{}};return R}X0.applyToOptions=r=>{const e=_G(r,100,X0);return r.ease=e.ease,r.duration=zi(e.duration),r.type="keyframes",r};function yN({keyframes:r,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}){const f=r[0],g={done:!1,value:f},x=T=>l!==void 0&&T<l||c!==void 0&&T>c,y=T=>l===void 0?c:c===void 0||Math.abs(l-T)<Math.abs(c-T)?l:c;let b=t*e;const v=f+b,N=o===void 0?v:o(v);N!==v&&(b=N-f);const k=T=>-b*Math.exp(-T/s),A=T=>N+k(T),R=T=>{const D=k(T),L=A(T);g.done=Math.abs(D)<=u,g.value=g.done?N:L};let _,I;const P=T=>{x(g.value)&&(_=T,I=X0({keyframes:[g.value,y(g.value)],velocity:OM(A,T,g.value),damping:a,stiffness:i,restDelta:u,restSpeed:h}))};return P(0),{calculatedDuration:null,next:T=>{let D=!1;return!I&&_===void 0&&(D=!0,R(T),P(T)),_!==void 0&&T>=_?I.next(T-_):(!D&&R(T),g)}}}function DG(r,e,t){const s=[],a=t||Oo.mix||DM,i=r.length-1;for(let o=0;o<i;o++){let l=a(r[o],r[o+1]);if(e){const c=Array.isArray(e)?e[o]||Un:e;l=Pg(c,l)}s.push(l)}return s}function MG(r,e,{clamp:t=!0,ease:s,mixer:a}={}){const i=r.length;if(Bk(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=r[0]===r[1];r[0]>r[i-1]&&(r=[...r].reverse(),e=[...e].reverse());const l=DG(e,s,a),c=l.length,u=h=>{if(o&&h<r[0])return e[0];let f=0;if(c>1)for(;f<r.length-2&&!(h<r[f+1]);f++);const g=zf(r[f],r[f+1],h);return l[f](g)};return t?h=>u(Mo(r[0],r[i-1],h)):u}function OG(r,e){const t=r[r.length-1];for(let s=1;s<=e;s++){const a=zf(0,e,s);r.push(hr(t,1,a))}}function LG(r){const e=[0];return OG(e,r.length-1),e}function FG(r,e){return r.map(t=>t*e)}function UG(r,e){return r.map(()=>e||kM).splice(0,r.length-1)}function pf({duration:r=300,keyframes:e,times:t,ease:s="easeInOut"}){const a=KX(s)?s.map(HT):HT(s),i={done:!1,value:e[0]},o=FG(t&&t.length===e.length?t:LG(e),r),l=MG(o,e,{ease:Array.isArray(a)?a:UG(e,a)});return{calculatedDuration:r,next:c=>(i.value=l(c),i.done=c>=r,i)}}const zG=r=>r!==null;function Jk(r,{repeat:e,repeatType:t="loop"},s,a=1){const i=r.filter(zG),l=a<0||e&&t!=="loop"&&e%2===1?0:i.length-1;return!l||s===void 0?i[l]:s}const VG={decay:yN,inertia:yN,tween:pf,keyframes:pf,spring:X0};function LM(r){typeof r.type=="string"&&(r.type=VG[r.type])}class e2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const BG=r=>r/100;class t2 extends e2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Ka.now()&&this.tick(Ka.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;LM(e);const{type:t=pf,repeat:s=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=t||pf;c!==pf&&typeof l[0]!="number"&&(this.mixKeyframes=Pg(BG,DM(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Zk(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return s.next(0);const{delay:u=0,keyframes:h,repeat:f,repeatType:g,repeatDelay:x,type:y,onUpdate:b,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const N=this.currentTime-u*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?N<0:N>a;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let A=this.currentTime,R=s;if(f){const T=Math.min(this.currentTime,a)/l;let D=Math.floor(T),L=T%1;!L&&T>=1&&(L=1),L===1&&D--,D=Math.min(D,f+1),!!(D%2)&&(g==="reverse"?(L=1-L,x&&(L-=x/l)):g==="mirror"&&(R=o)),A=Mo(0,1,L)*l}const _=k?{done:!1,value:h[0]}:R.next(A);i&&(_.value=i(_.value));let{done:I}=_;!k&&c!==null&&(I=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return P&&y!==yN&&(_.value=Jk(h,this.options,v,this.speed)),b&&b(_.value),P&&this.finish(),_}then(e,t){return this.finished.then(e,t)}get duration(){return Vi(this.calculatedDuration)}get time(){return Vi(this.currentTime)}set time(e){e=zi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ka.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Vi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=SG,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ka.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function HG(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const $c=r=>r*180/Math.PI,vN=r=>{const e=$c(Math.atan2(r[1],r[0]));return wN(e)},$G={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:vN,rotateZ:vN,skewX:r=>$c(Math.atan(r[1])),skewY:r=>$c(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},wN=r=>(r=r%360,r<0&&(r+=360),r),GT=vN,KT=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),QT=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),WG={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:KT,scaleY:QT,scale:r=>(KT(r)+QT(r))/2,rotateX:r=>wN($c(Math.atan2(r[6],r[5]))),rotateY:r=>wN($c(Math.atan2(-r[2],r[0]))),rotateZ:GT,rotate:GT,skewX:r=>$c(Math.atan(r[4])),skewY:r=>$c(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function NN(r){return r.includes("scale")?1:0}function jN(r,e){if(!r||r==="none")return NN(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(t)s=WG,a=t;else{const l=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=$G,a=l}if(!a)return NN(e);const i=s[e],o=a[1].split(",").map(qG);return typeof i=="function"?i(o):o[i]}const YG=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return jN(t,e)};function qG(r){return parseFloat(r.trim())}const Nh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jh=new Set(Nh),ZT=r=>r===wh||r===Lt,XG=new Set(["x","y","z"]),GG=Nh.filter(r=>!XG.has(r));function KG(r){const e=[];return GG.forEach(t=>{const s=r.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const td={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>jN(e,"x"),y:(r,{transform:e})=>jN(e,"y")};td.translateX=td.x;td.translateY=td.y;const sd=new Set;let kN=!1,SN=!1,_N=!1;function FM(){if(SN){const r=Array.from(sd).filter(s=>s.needsMeasurement),e=new Set(r.map(s=>s.element)),t=new Map;e.forEach(s=>{const a=KG(s);a.length&&(t.set(s,a),s.render())}),r.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=t.get(s);a&&a.forEach(([i,o])=>{s.getValue(i)?.set(o)})}),r.forEach(s=>s.measureEndState()),r.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}SN=!1,kN=!1,sd.forEach(r=>r.complete(_N)),sd.clear()}function UM(){sd.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(SN=!0)})}function QG(){_N=!0,UM(),FM(),_N=!1}class s2{constructor(e,t,s,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(sd.add(this),kN||(kN=!0,dr.read(UM),dr.resolveKeyframes(FM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:a}=this;if(e[0]===null){const i=a?.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&t){const l=s.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),a&&i===void 0&&a.set(e[0])}HG(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),sd.delete(this)}cancel(){this.state==="scheduled"&&(sd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ZG=r=>r.startsWith("--");function JG(r,e,t){ZG(e)?r.style.setProperty(e,t):r.style[e]=t}const eK=Hk(()=>window.ScrollTimeline!==void 0),tK={};function sK(r,e){const t=Hk(r);return()=>tK[e]??t()}const zM=sK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zm=([r,e,t,s])=>`cubic-bezier(${r}, ${e}, ${t}, ${s})`,JT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zm([0,.65,.55,1]),circOut:Zm([.55,0,1,.45]),backIn:Zm([.31,.01,.66,-.59]),backOut:Zm([.33,1.53,.69,.99])};function VM(r,e){if(r)return typeof r=="function"?zM()?MM(r,e):"ease-out":SM(r)?Zm(r):Array.isArray(r)?r.map(t=>VM(t,e)||JT.easeOut):JT[r]}function rK(r,e,t,{delay:s=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const h={[e]:t};c&&(h.offset=c);const f=VM(l,a);Array.isArray(f)&&(h.easing=f);const g={delay:s,duration:a,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),r.animate(h,g)}function BM(r){return typeof r=="function"&&"applyToOptions"in r}function aK({type:r,...e}){return BM(r)&&zM()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class nK extends e2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,Bk(typeof e.type!="string");const u=aK(e);this.animation=rK(t,s,a,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=Jk(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):JG(t,s,h),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Vi(Number(e))}get time(){return Vi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=zi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&eK()?(this.animation.timeline=e,Un):t(this)}}const HM={anticipate:wM,backInOut:vM,circInOut:jM};function iK(r){return r in HM}function oK(r){typeof r.ease=="string"&&iK(r.ease)&&(r.ease=HM[r.ease])}const eP=10;class lK extends nK{constructor(e){oK(e),LM(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:a,element:i,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new t2({...o,autoplay:!1}),c=zi(this.finishedTime??this.time);t.setWithVelocity(l.sample(c-eP).value,l.sample(c).value,eP),l.stop()}}const tP=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(zl.test(r)||r==="0")&&!r.startsWith("url("));function cK(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function dK(r,e,t,s){const a=r[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const i=r[r.length-1],o=tP(a,e),l=tP(i,e);return!o||!l?!1:cK(r)||(t==="spring"||BM(t))&&s}function AN(r){r.duration=0,r.type}const uK=new Set(["opacity","clipPath","filter","transform"]),hK=Hk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function mK(r){const{motionValue:e,name:t,repeatDelay:s,repeatType:a,damping:i,type:o}=r;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return hK()&&t&&uK.has(t)&&(t!=="transform"||!u)&&!c&&!s&&a!=="mirror"&&i!==0&&o!=="inertia"}const fK=40;class gK extends e2{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:h,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ka.now();const g={autoplay:e,delay:t,type:s,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:h,...f},x=h?.KeyframeResolver||s2;this.keyframeResolver=new x(l,(y,b,v)=>this.onKeyframesResolved(y,b,g,!v),c,u,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:h}=s;this.resolvedAt=Ka.now(),dK(e,i,o,l)||((Oo.instantAnimations||!c)&&h?.(Jk(e,s,t)),e[0]=e[e.length-1],AN(s),s.repeat=0);const g={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>fK?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},x=!u&&mK(g)?new lK({...g,element:g.motionValue.owner.current}):new t2(g);x.finished.then(()=>this.notifyFinished()).catch(Un),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),QG()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const pK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xK(r){const e=pK.exec(r);if(!e)return[,];const[,t,s,a]=e;return[`--${t??s}`,a]}function $M(r,e,t=1){const[s,a]=xK(r);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const o=i.trim();return hM(o)?parseFloat(o):o}return Xk(a)?$M(a,e,t+1):a}function r2(r,e){return r?.[e]??r?.default??r}const WM=new Set(["width","height","top","left","right","bottom",...Nh]),bK={test:r=>r==="auto",parse:r=>r},YM=r=>e=>e.test(r),qM=[wh,Lt,Bi,ml,cG,lG,bK],sP=r=>qM.find(YM(r));function yK(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||fM(r):!0}const vK=new Set(["brightness","contrast","saturate","opacity"]);function wK(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[s]=t.match(Gk)||[];if(!s)return r;const a=t.replace(s,"");let i=vK.has(e)?1:0;return s!==t&&(i*=100),e+"("+i+a+")"}const NK=/\b([a-z-]*)\(.*?\)/gu,CN={...zl,getAnimatableNone:r=>{const e=r.match(NK);return e?e.map(wK).join(" "):r}},rP={...wh,transform:Math.round},jK={rotate:ml,rotateX:ml,rotateY:ml,rotateZ:ml,scale:gx,scaleX:gx,scaleY:gx,scaleZ:gx,skew:ml,skewX:ml,skewY:ml,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:Vf,originX:$T,originY:$T,originZ:Lt},a2={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,backgroundPositionX:Lt,backgroundPositionY:Lt,...jK,zIndex:rP,fillOpacity:Vf,strokeOpacity:Vf,numOctaves:rP},kK={...a2,color:Lr,backgroundColor:Lr,outlineColor:Lr,fill:Lr,stroke:Lr,borderColor:Lr,borderTopColor:Lr,borderRightColor:Lr,borderBottomColor:Lr,borderLeftColor:Lr,filter:CN,WebkitFilter:CN},XM=r=>kK[r];function GM(r,e){let t=XM(r);return t!==CN&&(t=zl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const SK=new Set(["auto","none","0"]);function _K(r,e,t){let s=0,a;for(;s<r.length&&!a;){const i=r[s];typeof i=="string"&&!SK.has(i)&&Bf(i).values.length&&(a=r[s]),s++}if(a&&t)for(const i of e)r[i]=GM(t,a)}class AK extends s2{constructor(e,t,s,a,i){super(e,t,s,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),Xk(u))){const h=$M(u,t.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!WM.has(s)||e.length!==2)return;const[a,i]=e,o=sP(a),l=sP(i);if(o!==l)if(ZT(o)&&ZT(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else td[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let a=0;a<e.length;a++)(e[a]===null||yK(e[a]))&&s.push(a);s.length&&_K(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=td[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const a=t[t.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const a=e.getValue(t);a&&a.jump(this.measuredOrigin,!1);const i=s.length-1,o=s[i];s[i]=td[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function CK(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let s=document;const a=t?.[r]??s.querySelectorAll(r);return a?Array.from(a):[]}return Array.from(r)}const KM=(r,e)=>e&&typeof r=="number"?e.transform(r):r;function QM(r){return mM(r)&&"offsetHeight"in r}const aP=30,EK=r=>!isNaN(parseFloat(r));class TK{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const a=Ka.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ka.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=EK(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new $k);const s=this.events[e].add(t);return e==="change"?()=>{s(),dr.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ka.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>aP)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,aP);return gM(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qu(r,e){return new TK(r,e)}const{schedule:n2}=_M(queueMicrotask,!1),Xn={x:!1,y:!1};function ZM(){return Xn.x||Xn.y}function PK(r){return r==="x"||r==="y"?Xn[r]?null:(Xn[r]=!0,()=>{Xn[r]=!1}):Xn.x||Xn.y?null:(Xn.x=Xn.y=!0,()=>{Xn.x=Xn.y=!1})}function JM(r,e){const t=CK(r),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[t,a,()=>s.abort()]}function nP(r){return!(r.pointerType==="touch"||ZM())}function RK(r,e,t={}){const[s,a,i]=JM(r,t),o=l=>{if(!nP(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const h=f=>{nP(f)&&(u(f),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,a)};return s.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const e5=(r,e)=>e?r===e?!0:e5(r,e.parentElement):!1,i2=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,IK=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function DK(r){return IK.has(r.tagName)||r.tabIndex!==-1}const o0=new WeakSet;function iP(r){return e=>{e.key==="Enter"&&r(e)}}function Lw(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const MK=(r,e)=>{const t=r.currentTarget;if(!t)return;const s=iP(()=>{if(o0.has(t))return;Lw(t,"down");const a=iP(()=>{Lw(t,"up")}),i=()=>Lw(t,"cancel");t.addEventListener("keyup",a,e),t.addEventListener("blur",i,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function oP(r){return i2(r)&&!ZM()}function OK(r,e,t={}){const[s,a,i]=JM(r,t),o=l=>{const c=l.currentTarget;if(!oP(l))return;o0.add(c);const u=e(c,l),h=(x,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),o0.has(c)&&o0.delete(c),oP(x)&&typeof u=="function"&&u(x,{success:y})},f=x=>{h(x,c===window||c===document||t.useGlobalTarget||e5(c,x.target))},g=x=>{h(x,!1)};window.addEventListener("pointerup",f,a),window.addEventListener("pointercancel",g,a)};return s.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),QM(l)&&(l.addEventListener("focus",u=>MK(u,a)),!DK(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function t5(r){return mM(r)&&"ownerSVGElement"in r}function LK(r){return t5(r)&&r.tagName==="svg"}const ka=r=>!!(r&&r.getVelocity),FK=[...qM,Lr,zl],UK=r=>FK.find(YM(r)),o2=E.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class zK extends E.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,a=QM(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function VK({children:r,isPresent:e,anchorX:t,root:s}){const a=E.useId(),i=E.useRef(null),o=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=E.useContext(o2);return E.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:f,right:g}=o.current;if(e||!i.current||!c||!u)return;const x=t==="left"?`left: ${f}`:`right: ${g}`;i.current.dataset.motionPopId=a;const y=document.createElement("style");l&&(y.nonce=l);const b=s??document.head;return b.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(y)&&b.removeChild(y)}},[e]),n.jsx(zK,{isPresent:e,childRef:i,sizeRef:o,children:E.cloneElement(r,{ref:i})})}const BK=({children:r,initial:e,isPresent:t,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const u=Fk(HK),h=E.useId();let f=!0,g=E.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:t,custom:a,onExitComplete:x=>{u.set(x,!0);for(const y of u.values())if(!y)return;s&&s()},register:x=>(u.set(x,!1),()=>u.delete(x))}),[t,u,s]);return i&&f&&(g={...g}),E.useMemo(()=>{u.forEach((x,y)=>u.set(y,!1))},[t]),E.useEffect(()=>{!t&&!u.size&&s&&s()},[t]),o==="popLayout"&&(r=n.jsx(VK,{isPresent:t,anchorX:l,root:c,children:r})),n.jsx(Zb.Provider,{value:g,children:r})};function HK(){return new Map}function s5(r=!0){const e=E.useContext(Zb);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:a}=e,i=E.useId();E.useEffect(()=>{if(r)return a(i)},[r]);const o=E.useCallback(()=>r&&s&&s(i),[i,s,r]);return!t&&s?[!1,o]:[!0]}const px=r=>r.key||"";function lP(r){const e=[];return E.Children.forEach(r,t=>{E.isValidElement(t)&&e.push(t)}),e}const tn=({children:r,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,h]=s5(o),f=E.useMemo(()=>lP(r),[r]),g=o&&!u?[]:f.map(px),x=E.useRef(!0),y=E.useRef(f),b=Fk(()=>new Map),[v,N]=E.useState(f),[k,A]=E.useState(f);uM(()=>{x.current=!1,y.current=f;for(let I=0;I<k.length;I++){const P=px(k[I]);g.includes(P)?b.delete(P):b.get(P)!==!0&&b.set(P,!1)}},[k,g.length,g.join("-")]);const R=[];if(f!==v){let I=[...f];for(let P=0;P<k.length;P++){const T=k[P],D=px(T);g.includes(D)||(I.splice(P,0,T),R.push(T))}return i==="wait"&&R.length&&(I=R),A(lP(I)),N(f),null}const{forceRender:_}=E.useContext(Lk);return n.jsx(n.Fragment,{children:k.map(I=>{const P=px(I),T=o&&!u?!1:f===k||g.includes(P),D=()=>{if(b.has(P))b.set(P,!0);else return;let L=!0;b.forEach(F=>{F||(L=!1)}),L&&(_?.(),A(y.current),o&&h?.(),s&&s())};return n.jsx(BK,{isPresent:T,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:a,mode:i,root:c,onExitComplete:T?void 0:D,anchorX:l,children:I},P)})})},r5=E.createContext({strict:!1}),cP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zu={};for(const r in cP)Zu[r]={isEnabled:e=>cP[r].some(t=>!!e[t])};function $K(r){for(const e in r)Zu[e]={...Zu[e],...r[e]}}const WK=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function G0(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||WK.has(r)}let a5=r=>!G0(r);function YK(r){typeof r=="function"&&(a5=e=>e.startsWith("on")?!G0(e):r(e))}try{YK(require("@emotion/is-prop-valid").default)}catch{}function qK(r,e,t){const s={};for(const a in r)a==="values"&&typeof r.values=="object"||(a5(a)||t===!0&&G0(a)||!e&&!G0(a)||r.draggable&&a.startsWith("onDrag"))&&(s[a]=r[a]);return s}const Jb=E.createContext({});function ey(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function Hf(r){return typeof r=="string"||Array.isArray(r)}const l2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],c2=["initial",...l2];function ty(r){return ey(r.animate)||c2.some(e=>Hf(r[e]))}function n5(r){return!!(ty(r)||r.variants)}function XK(r,e){if(ty(r)){const{initial:t,animate:s}=r;return{initial:t===!1||Hf(t)?t:void 0,animate:Hf(s)?s:void 0}}return r.inherit!==!1?e:{}}function GK(r){const{initial:e,animate:t}=XK(r,E.useContext(Jb));return E.useMemo(()=>({initial:e,animate:t}),[dP(e),dP(t)])}function dP(r){return Array.isArray(r)?r.join(" "):r}const $f={};function KK(r){for(const e in r)$f[e]=r[e],qk(e)&&($f[e].isCSSVariable=!0)}function i5(r,{layout:e,layoutId:t}){return jh.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!$f[r]||r==="opacity")}const QK={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ZK=Nh.length;function JK(r,e,t){let s="",a=!0;for(let i=0;i<ZK;i++){const o=Nh[i],l=r[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const u=KM(l,a2[o]);if(!c){a=!1;const h=QK[o]||o;s+=`${h}(${u}) `}t&&(e[o]=u)}}return s=s.trim(),t?s=t(e,a?"":s):a&&(s="none"),s}function d2(r,e,t){const{style:s,vars:a,transformOrigin:i}=r;let o=!1,l=!1;for(const c in e){const u=e[c];if(jh.has(c)){o=!0;continue}else if(qk(c)){a[c]=u;continue}else{const h=KM(u,a2[c]);c.startsWith("origin")?(l=!0,i[c]=h):s[c]=h}}if(e.transform||(o||t?s.transform=JK(e,r.transform,t):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:h=0}=i;s.transformOrigin=`${c} ${u} ${h}`}}const u2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function o5(r,e,t){for(const s in e)!ka(e[s])&&!i5(s,t)&&(r[s]=e[s])}function eQ({transformTemplate:r},e){return E.useMemo(()=>{const t=u2();return d2(t,e,r),Object.assign({},t.vars,t.style)},[e])}function tQ(r,e){const t=r.style||{},s={};return o5(s,t,r),Object.assign(s,eQ(r,e)),s}function sQ(r,e){const t={},s=tQ(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=s,t}const rQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},aQ={offset:"strokeDashoffset",array:"strokeDasharray"};function nQ(r,e,t=1,s=0,a=!0){r.pathLength=1;const i=a?rQ:aQ;r[i.offset]=Lt.transform(-s);const o=Lt.transform(e),l=Lt.transform(t);r[i.array]=`${o} ${l}`}function l5(r,{attrX:e,attrY:t,attrScale:s,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},c,u,h){if(d2(r,l,u),c){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:f,style:g}=r;f.transform&&(g.transform=f.transform,delete f.transform),(g.transform||f.transformOrigin)&&(g.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),s!==void 0&&(f.scale=s),a!==void 0&&nQ(f,a,i,o,!1)}const c5=()=>({...u2(),attrs:{}}),d5=r=>typeof r=="string"&&r.toLowerCase()==="svg";function iQ(r,e,t,s){const a=E.useMemo(()=>{const i=c5();return l5(i,e,d5(s),r.transformTemplate,r.style),{...i.attrs,style:{...i.style}}},[e]);if(r.style){const i={};o5(i,r.style,r),a.style={...i,...a.style}}return a}const oQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function h2(r){return typeof r!="string"||r.includes("-")?!1:!!(oQ.indexOf(r)>-1||/[A-Z]/u.test(r))}function lQ(r,e,t,{latestValues:s},a,i=!1){const l=(h2(r)?iQ:sQ)(e,s,a,r),c=qK(e,typeof r=="string",i),u=r!==E.Fragment?{...c,...l,ref:t}:{},{children:h}=e,f=E.useMemo(()=>ka(h)?h.get():h,[h]);return E.createElement(r,{...u,children:f})}function uP(r){const e=[{},{}];return r?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function m2(r,e,t,s){if(typeof e=="function"){const[a,i]=uP(s);e=e(t!==void 0?t:r.custom,a,i)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[a,i]=uP(s);e=e(t!==void 0?t:r.custom,a,i)}return e}function l0(r){return ka(r)?r.get():r}function cQ({scrapeMotionValuesFromProps:r,createRenderState:e},t,s,a){return{latestValues:dQ(t,s,a,r),renderState:e()}}function dQ(r,e,t,s){const a={},i=s(r,{});for(const g in i)a[g]=l0(i[g]);let{initial:o,animate:l}=r;const c=ty(r),u=n5(r);e&&u&&!c&&r.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const f=h?l:o;if(f&&typeof f!="boolean"&&!ey(f)){const g=Array.isArray(f)?f:[f];for(let x=0;x<g.length;x++){const y=m2(r,g[x]);if(y){const{transitionEnd:b,transition:v,...N}=y;for(const k in N){let A=N[k];if(Array.isArray(A)){const R=h?A.length-1:0;A=A[R]}A!==null&&(a[k]=A)}for(const k in b)a[k]=b[k]}}}return a}const u5=r=>(e,t)=>{const s=E.useContext(Jb),a=E.useContext(Zb),i=()=>cQ(r,e,s,a);return t?i():Fk(i)};function f2(r,e,t){const{style:s}=r,a={};for(const i in s)(ka(s[i])||e.style&&ka(e.style[i])||i5(i,r)||t?.getValue(i)?.liveStyle!==void 0)&&(a[i]=s[i]);return a}const uQ=u5({scrapeMotionValuesFromProps:f2,createRenderState:u2});function h5(r,e,t){const s=f2(r,e,t);for(const a in r)if(ka(r[a])||ka(e[a])){const i=Nh.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[i]=r[a]}return s}const hQ=u5({scrapeMotionValuesFromProps:h5,createRenderState:c5}),mQ=Symbol.for("motionComponentSymbol");function Eu(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function fQ(r,e,t){return E.useCallback(s=>{s&&r.onMount&&r.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):Eu(t)&&(t.current=s))},[e])}const g2=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),gQ="framerAppearId",m5="data-"+g2(gQ),f5=E.createContext({});function pQ(r,e,t,s,a){const{visualElement:i}=E.useContext(Jb),o=E.useContext(r5),l=E.useContext(Zb),c=E.useContext(o2).reducedMotion,u=E.useRef(null);s=s||o.renderer,!u.current&&s&&(u.current=s(r,{visualState:e,parent:i,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=u.current,f=E.useContext(f5);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&xQ(u.current,t,a,f);const g=E.useRef(!1);E.useInsertionEffect(()=>{h&&g.current&&h.update(t,l)});const x=t[m5],y=E.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return uM(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),y.current&&h.animationState&&h.animationState.animateChanges())}),E.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),y.current=!1),h.enteringChildren=void 0)}),h}function xQ(r,e,t,s){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:h}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:g5(r.parent)),r.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&Eu(l),visualElement:r,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:h,layoutScroll:c,layoutRoot:u})}function g5(r){if(r)return r.options.allowProjection!==!1?r.projection:g5(r.parent)}function Fw(r,{forwardMotionProps:e=!1}={},t,s){t&&$K(t);const a=h2(r)?hQ:uQ;function i(l,c){let u;const h={...E.useContext(o2),...l,layoutId:bQ(l)},{isStatic:f}=h,g=GK(l),x=a(l,f);if(!f&&Uk){yQ();const y=vQ(h);u=y.MeasureLayout,g.visualElement=pQ(r,x,h,s,y.ProjectionNode)}return n.jsxs(Jb.Provider,{value:g,children:[u&&g.visualElement?n.jsx(u,{visualElement:g.visualElement,...h}):null,lQ(r,l,fQ(x,g.visualElement,c),x,f,e)]})}i.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const o=E.forwardRef(i);return o[mQ]=r,o}function bQ({layoutId:r}){const e=E.useContext(Lk).id;return e&&r!==void 0?e+"-"+r:r}function yQ(r,e){E.useContext(r5).strict}function vQ(r){const{drag:e,layout:t}=Zu;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e?.isEnabled(r)||t?.isEnabled(r)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function wQ(r,e){if(typeof Proxy>"u")return Fw;const t=new Map,s=(i,o)=>Fw(i,o,r,e),a=(i,o)=>s(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?s:(t.has(o)||t.set(o,Fw(o,void 0,r,e)),t.get(o))})}function p5({top:r,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:r,max:s}}}function NQ({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function jQ(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),s=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function Uw(r){return r===void 0||r===1}function EN({scale:r,scaleX:e,scaleY:t}){return!Uw(r)||!Uw(e)||!Uw(t)}function Dc(r){return EN(r)||x5(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function x5(r){return hP(r.x)||hP(r.y)}function hP(r){return r&&r!=="0%"}function K0(r,e,t){const s=r-t,a=e*s;return t+a}function mP(r,e,t,s,a){return a!==void 0&&(r=K0(r,a,s)),K0(r,t,s)+e}function TN(r,e=0,t=1,s,a){r.min=mP(r.min,e,t,s,a),r.max=mP(r.max,e,t,s,a)}function b5(r,{x:e,y:t}){TN(r.x,e.translate,e.scale,e.originPoint),TN(r.y,t.translate,t.scale,t.originPoint)}const fP=.999999999999,gP=1.0000000000001;function kQ(r,e,t,s=!1){const a=t.length;if(!a)return;e.x=e.y=1;let i,o;for(let l=0;l<a;l++){i=t[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Pu(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,b5(r,o)),s&&Dc(i.latestValues)&&Pu(r,i.latestValues))}e.x<gP&&e.x>fP&&(e.x=1),e.y<gP&&e.y>fP&&(e.y=1)}function Tu(r,e){r.min=r.min+e,r.max=r.max+e}function pP(r,e,t,s,a=.5){const i=hr(r.min,r.max,a);TN(r,e,t,i,s)}function Pu(r,e){pP(r.x,e.x,e.scaleX,e.scale,e.originX),pP(r.y,e.y,e.scaleY,e.scale,e.originY)}function y5(r,e){return p5(jQ(r.getBoundingClientRect(),e))}function SQ(r,e,t){const s=y5(r,t),{scroll:a}=e;return a&&(Tu(s.x,a.offset.x),Tu(s.y,a.offset.y)),s}const xP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ru=()=>({x:xP(),y:xP()}),bP=()=>({min:0,max:0}),_r=()=>({x:bP(),y:bP()}),PN={current:null},v5={current:!1};function _Q(){if(v5.current=!0,!!Uk)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>PN.current=r.matches;r.addEventListener("change",e),e()}else PN.current=!1}const AQ=new WeakMap;function CQ(r,e,t){for(const s in e){const a=e[s],i=t[s];if(ka(a))r.addValue(s,a);else if(ka(i))r.addValue(s,Qu(a,{owner:r}));else if(i!==a)if(r.hasValue(s)){const o=r.getValue(s);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=r.getStaticValue(s);r.addValue(s,Qu(o!==void 0?o:a,{owner:r}))}}for(const s in t)e[s]===void 0&&r.removeValue(s);return e}const yP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class EQ{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=s2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Ka.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,dr.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=ty(t),this.isVariantNode=n5(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const g in f){const x=f[g];c[g]!==void 0&&ka(x)&&x.set(c[g])}}mount(e){this.current=e,AQ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),v5.current||_Q(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:PN.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ul(this.notifyUpdate),Ul(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=jh.has(e);s&&this.onBindTransform&&this.onBindTransform();const a=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&dr.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{a(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zu){const t=Zu[e];if(!t)continue;const{isEnabled:s,Feature:a}=t;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_r()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<yP.length;s++){const a=yP[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=e[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=CQ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=Qu(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(hM(s)||fM(s))?s=parseFloat(s):!UK(s)&&zl.test(t)&&(s=GM(e,t)),this.setBaseTarget(e,ka(s)?s.get():s)),ka(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const i=m2(this.props,t,this.presenceContext?.custom);i&&(s=i[e])}if(t&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!ka(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new $k),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){n2.render(this.render)}}class w5 extends EQ{constructor(){super(...arguments),this.KeyframeResolver=AK}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ka(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function N5(r,{style:e,vars:t},s,a){const i=r.style;let o;for(o in e)i[o]=e[o];a?.applyProjectionStyles(i,s);for(o in t)i.setProperty(o,t[o])}function TQ(r){return window.getComputedStyle(r)}class PQ extends w5{constructor(){super(...arguments),this.type="html",this.renderInstance=N5}readValueFromInstance(e,t){if(jh.has(t))return this.projection?.isProjecting?NN(t):YG(e,t);{const s=TQ(e),a=(qk(t)?s.getPropertyValue(t):s[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return y5(e,t)}build(e,t,s){d2(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return f2(e,t,s)}}const j5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RQ(r,e,t,s){N5(r,e,void 0,s);for(const a in e.attrs)r.setAttribute(j5.has(a)?a:g2(a),e.attrs[a])}class IQ extends w5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_r}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(jh.has(t)){const s=XM(t);return s&&s.default||0}return t=j5.has(t)?t:g2(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return h5(e,t,s)}build(e,t,s){l5(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,a){RQ(e,t,s,a)}mount(e){this.isSVGTag=d5(e.tagName),super.mount(e)}}const DQ=(r,e)=>h2(r)?new IQ(e):new PQ(e,{allowProjection:r!==E.Fragment});function Fu(r,e,t){const s=r.getProps();return m2(s,e,t!==void 0?t:s.custom,r)}const RN=r=>Array.isArray(r);function MQ(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,Qu(t))}function OQ(r){return RN(r)?r[r.length-1]||0:r}function LQ(r,e){const t=Fu(r,e);let{transitionEnd:s={},transition:a={},...i}=t||{};i={...i,...s};for(const o in i){const l=OQ(i[o]);MQ(r,o,l)}}function FQ(r){return!!(ka(r)&&r.add)}function IN(r,e){const t=r.getValue("willChange");if(FQ(t))return t.add(e);if(!t&&Oo.WillChange){const s=new Oo.WillChange("auto");r.addValue("willChange",s),s.add(e)}}function k5(r){return r.props[m5]}const UQ=r=>r!==null;function zQ(r,{repeat:e,repeatType:t="loop"},s){const a=r.filter(UQ),i=e&&t!=="loop"&&e%2===1?0:a.length-1;return a[i]}const VQ={type:"spring",stiffness:500,damping:25,restSpeed:10},BQ=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),HQ={type:"keyframes",duration:.8},$Q={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WQ=(r,{keyframes:e})=>e.length>2?HQ:jh.has(r)?r.startsWith("scale")?BQ(e[1]):VQ:$Q;function YQ({when:r,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const p2=(r,e,t,s={},a,i)=>o=>{const l=r2(s,r)||{},c=l.delay||s.delay||0;let{elapsed:u=0}=s;u=u-zi(c);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:g=>{e.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:r,motionValue:e,element:i?void 0:a};YQ(l)||Object.assign(h,WQ(r,h)),h.duration&&(h.duration=zi(h.duration)),h.repeatDelay&&(h.repeatDelay=zi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(AN(h),h.delay===0&&(f=!0)),(Oo.instantAnimations||Oo.skipAnimations)&&(f=!0,AN(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,f&&!i&&e.get()!==void 0){const g=zQ(h.keyframes,l);if(g!==void 0){dr.update(()=>{h.onUpdate(g),h.onComplete()});return}}return l.isSync?new t2(h):new gK(h)};function qQ({protectedKeys:r,needsAnimating:e},t){const s=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function S5(r,e,{delay:t=0,transitionOverride:s,type:a}={}){let{transition:i=r.getDefaultTransition(),transitionEnd:o,...l}=e;s&&(i=s);const c=[],u=a&&r.animationState&&r.animationState.getState()[a];for(const h in l){const f=r.getValue(h,r.latestValues[h]??null),g=l[h];if(g===void 0||u&&qQ(u,h))continue;const x={delay:t,...r2(i||{},h)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(g)&&g===y&&!x.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const N=k5(r);if(N){const k=window.MotionHandoffAnimation(N,h,dr);k!==null&&(x.startTime=k,b=!0)}}IN(r,h),f.start(p2(h,f,g,r.shouldReduceMotion&&WM.has(h)?{type:!1}:x,r,b));const v=f.animation;v&&c.push(v)}return o&&Promise.all(c).then(()=>{dr.update(()=>{o&&LQ(r,o)})}),c}function _5(r,e,t,s=0,a=1){const i=Array.from(r).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),o=r.size,l=(o-1)*s;return typeof t=="function"?t(i,o):a===1?i*s:l-i*s}function DN(r,e,t={}){const s=Fu(r,e,t.type==="exit"?r.presenceContext?.custom:void 0);let{transition:a=r.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(a=t.transitionOverride);const i=s?()=>Promise.all(S5(r,s,t)):()=>Promise.resolve(),o=r.variantChildren&&r.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=a;return XQ(r,e,c,u,h,f,t)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(t.delay)])}function XQ(r,e,t=0,s=0,a=0,i=1,o){const l=[];for(const c of r.variantChildren)c.notify("AnimationStart",e),l.push(DN(c,e,{...o,delay:t+(typeof s=="function"?0:s)+_5(r.variantChildren,c,s,a,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function GQ(r,e,t={}){r.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(i=>DN(r,i,t));s=Promise.all(a)}else if(typeof e=="string")s=DN(r,e,t);else{const a=typeof e=="function"?Fu(r,e,t.custom):e;s=Promise.all(S5(r,a,t))}return s.then(()=>{r.notify("AnimationComplete",e)})}function A5(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let s=0;s<t;s++)if(e[s]!==r[s])return!1;return!0}const KQ=c2.length;function C5(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?C5(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<KQ;t++){const s=c2[t],a=r.props[s];(Hf(a)||a===!1)&&(e[s]=a)}return e}const QQ=[...l2].reverse(),ZQ=l2.length;function JQ(r){return e=>Promise.all(e.map(({animation:t,options:s})=>GQ(r,t,s)))}function eZ(r){let e=JQ(r),t=vP(),s=!0;const a=c=>(u,h)=>{const f=Fu(r,h,c==="exit"?r.presenceContext?.custom:void 0);if(f){const{transition:g,transitionEnd:x,...y}=f;u={...u,...y,...x}}return u};function i(c){e=c(r)}function o(c){const{props:u}=r,h=C5(r.parent)||{},f=[],g=new Set;let x={},y=1/0;for(let v=0;v<ZQ;v++){const N=QQ[v],k=t[N],A=u[N]!==void 0?u[N]:h[N],R=Hf(A),_=N===c?k.isActive:null;_===!1&&(y=v);let I=A===h[N]&&A!==u[N]&&R;if(I&&s&&r.manuallyAnimateOnMount&&(I=!1),k.protectedKeys={...x},!k.isActive&&_===null||!A&&!k.prevProp||ey(A)||typeof A=="boolean")continue;const P=tZ(k.prevProp,A);let T=P||N===c&&k.isActive&&!I&&R||v>y&&R,D=!1;const L=Array.isArray(A)?A:[A];let F=L.reduce(a(N),{});_===!1&&(F={});const{prevResolvedValues:z={}}=k,O={...z,...F},V=$=>{T=!0,g.has($)&&(D=!0,g.delete($)),k.needsAnimating[$]=!0;const X=r.getValue($);X&&(X.liveStyle=!1)};for(const $ in O){const X=F[$],G=z[$];if(x.hasOwnProperty($))continue;let B=!1;RN(X)&&RN(G)?B=!A5(X,G):B=X!==G,B?X!=null?V($):g.add($):X!==void 0&&g.has($)?V($):k.protectedKeys[$]=!0}k.prevProp=A,k.prevResolvedValues=F,k.isActive&&(x={...x,...F}),s&&r.blockInitialAnimation&&(T=!1);const Y=I&&P;T&&(!Y||D)&&f.push(...L.map($=>{const X={type:N};if(typeof $=="string"&&s&&!Y&&r.manuallyAnimateOnMount&&r.parent){const{parent:G}=r,B=Fu(G,$);if(G.enteringChildren&&B){const{delayChildren:Q}=B.transition||{};X.delay=_5(G.enteringChildren,r,Q)}}return{animation:$,options:X}}))}if(g.size){const v={};if(typeof u.initial!="boolean"){const N=Fu(r,Array.isArray(u.initial)?u.initial[0]:u.initial);N&&N.transition&&(v.transition=N.transition)}g.forEach(N=>{const k=r.getBaseTarget(N),A=r.getValue(N);A&&(A.liveStyle=!0),v[N]=k??null}),f.push({animation:v})}let b=!!f.length;return s&&(u.initial===!1||u.initial===u.animate)&&!r.manuallyAnimateOnMount&&(b=!1),s=!1,b?e(f):Promise.resolve()}function l(c,u){if(t[c].isActive===u)return Promise.resolve();r.variantChildren?.forEach(f=>f.animationState?.setActive(c,u)),t[c].isActive=u;const h=o(c);for(const f in t)t[f].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>t,reset:()=>{t=vP(),s=!0}}}function tZ(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!A5(e,r):!1}function _c(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vP(){return{animate:_c(!0),whileInView:_c(),whileHover:_c(),whileTap:_c(),whileDrag:_c(),whileFocus:_c(),exit:_c()}}class Zl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class sZ extends Zl{constructor(e){super(e),e.animationState||(e.animationState=eZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ey(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let rZ=0;class aZ extends Zl{constructor(){super(...arguments),this.id=rZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);t&&!e&&a.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const nZ={animation:{Feature:sZ},exit:{Feature:aZ}};function Wf(r,e,t,s={passive:!0}){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t)}function Dg(r){return{point:{x:r.pageX,y:r.pageY}}}const iZ=r=>e=>i2(e)&&r(e,Dg(e));function xf(r,e,t,s){return Wf(r,e,iZ(t),s)}const E5=1e-4,oZ=1-E5,lZ=1+E5,T5=.01,cZ=0-T5,dZ=0+T5;function Fa(r){return r.max-r.min}function uZ(r,e,t){return Math.abs(r-e)<=t}function wP(r,e,t,s=.5){r.origin=s,r.originPoint=hr(e.min,e.max,r.origin),r.scale=Fa(t)/Fa(e),r.translate=hr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=oZ&&r.scale<=lZ||isNaN(r.scale))&&(r.scale=1),(r.translate>=cZ&&r.translate<=dZ||isNaN(r.translate))&&(r.translate=0)}function bf(r,e,t,s){wP(r.x,e.x,t.x,s?s.originX:void 0),wP(r.y,e.y,t.y,s?s.originY:void 0)}function NP(r,e,t){r.min=t.min+e.min,r.max=r.min+Fa(e)}function hZ(r,e,t){NP(r.x,e.x,t.x),NP(r.y,e.y,t.y)}function jP(r,e,t){r.min=e.min-t.min,r.max=r.min+Fa(e)}function yf(r,e,t){jP(r.x,e.x,t.x),jP(r.y,e.y,t.y)}function On(r){return[r("x"),r("y")]}const P5=({current:r})=>r?r.ownerDocument.defaultView:null,kP=(r,e)=>Math.abs(r-e);function mZ(r,e){const t=kP(r.x,e.x),s=kP(r.y,e.y);return Math.sqrt(t**2+s**2)}class R5{constructor(e,t,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Vw(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,y=mZ(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!y)return;const{point:b}=g,{timestamp:v}=ua;this.history.push({...b,timestamp:v});const{onStart:N,onMove:k}=this.handlers;x||(N&&N(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=zw(x,this.transformPagePoint),dr.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:y,onSessionEnd:b,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Vw(g.type==="pointercancel"?this.lastMoveEventInfo:zw(x,this.transformPagePoint),this.history);this.startEvent&&y&&y(g,N),b&&b(g,N)},!i2(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=a||window;const l=Dg(e),c=zw(l,this.transformPagePoint),{point:u}=c,{timestamp:h}=ua;this.history=[{...u,timestamp:h}];const{onSessionStart:f}=t;f&&f(e,Vw(c,this.history)),this.removeListeners=Pg(xf(this.contextWindow,"pointermove",this.handlePointerMove),xf(this.contextWindow,"pointerup",this.handlePointerUp),xf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ul(this.updatePoint)}}function zw(r,e){return e?{point:e(r.point)}:r}function SP(r,e){return{x:r.x-e.x,y:r.y-e.y}}function Vw({point:r},e){return{point:r,delta:SP(r,I5(e)),offset:SP(r,fZ(e)),velocity:gZ(e,.1)}}function fZ(r){return r[0]}function I5(r){return r[r.length-1]}function gZ(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,s=null;const a=I5(r);for(;t>=0&&(s=r[t],!(a.timestamp-s.timestamp>zi(e)));)t--;if(!s)return{x:0,y:0};const i=Vi(a.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-s.x)/i,y:(a.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function pZ(r,{min:e,max:t},s){return e!==void 0&&r<e?r=s?hr(e,r,s.min):Math.max(r,e):t!==void 0&&r>t&&(r=s?hr(t,r,s.max):Math.min(r,t)),r}function _P(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function xZ(r,{top:e,left:t,bottom:s,right:a}){return{x:_P(r.x,t,a),y:_P(r.y,e,s)}}function AP(r,e){let t=e.min-r.min,s=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,s]=[s,t]),{min:t,max:s}}function bZ(r,e){return{x:AP(r.x,e.x),y:AP(r.y,e.y)}}function yZ(r,e){let t=.5;const s=Fa(r),a=Fa(e);return a>s?t=zf(e.min,e.max-s,r.min):s>a&&(t=zf(r.min,r.max-a,e.min)),Mo(0,1,t)}function vZ(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const MN=.35;function wZ(r=MN){return r===!1?r=0:r===!0&&(r=MN),{x:CP(r,"left","right"),y:CP(r,"top","bottom")}}function CP(r,e,t){return{min:EP(r,e),max:EP(r,t)}}function EP(r,e){return typeof r=="number"?r:r[e]||0}const NZ=new WeakMap;class jZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_r(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Dg(f).point)},o=(f,g)=>{const{drag:x,dragPropagation:y,onDragStart:b}=this.getProps();if(x&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=PK(x),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),On(N=>{let k=this.getAxisMotionValue(N).get()||0;if(Bi.test(k)){const{projection:A}=this.visualElement;if(A&&A.layout){const R=A.layout.layoutBox[N];R&&(k=Fa(R)*(parseFloat(k)/100))}}this.originPoint[N]=k}),b&&dr.postRender(()=>b(f,g)),IN(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g;const{dragPropagation:x,dragDirectionLock:y,onDirectionLock:b,onDrag:v}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:N}=g;if(y&&this.currentDirection===null){this.currentDirection=kZ(N),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,N),this.updateAxis("y",g.point,N),this.visualElement.render(),v&&v(f,g)},c=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g,this.stop(f,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>On(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new R5(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:s,contextWindow:P5(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,a=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!s)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&dr.postRender(()=>l(s,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:a}=this.getProps();if(!s||!xx(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=pZ(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&Eu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=xZ(s.layoutBox,e):this.constraints=!1,this.elastic=wZ(t),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&On(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=vZ(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Eu(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=SQ(s,a.root,this.visualElement.getTransformPagePoint());let o=bZ(a.layout.layoutBox,i);if(t){const l=t(NQ(o));this.hasMutatedConstraints=!!l,l&&(o=p5(l))}return o}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=On(h=>{if(!xx(h,t,this.currentDirection))return;let f=c&&c[h]||{};o&&(f={min:0,max:0});const g=a?200:1e6,x=a?40:1e7,y={type:"inertia",velocity:s?e[h]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,y)});return Promise.all(u).then(l)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return IN(this.visualElement,e),s.start(p2(e,s,0,t,this.visualElement,!1))}stopAnimation(){On(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){On(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[t];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){On(t=>{const{drag:s}=this.getProps();if(!xx(t,s,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(t);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[t];i.set(e[t]-hr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Eu(t)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};On(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=yZ({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),On(o=>{if(!xx(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(hr(c,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;NZ.set(this.visualElement,this);const e=this.visualElement.current,t=xf(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Eu(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),dr.read(s);const o=Wf(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(On(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),t(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=MN,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function xx(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function kZ(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class SZ extends Zl{constructor(e){super(e),this.removeGroupControls=Un,this.removeListeners=Un,this.controls=new jZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Un}unmount(){this.removeGroupControls(),this.removeListeners()}}const TP=r=>(e,t)=>{r&&dr.postRender(()=>r(e,t))};class _Z extends Zl{constructor(){super(...arguments),this.removePointerDownListener=Un}onPointerDown(e){this.session=new R5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:P5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:TP(e),onStart:TP(t),onMove:s,onEnd:(i,o)=>{delete this.session,a&&dr.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=xf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const c0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PP(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const Mm={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(Lt.test(r))r=parseFloat(r);else return r;const t=PP(r,e.target.x),s=PP(r,e.target.y);return`${t}% ${s}%`}},AZ={correct:(r,{treeScale:e,projectionDelta:t})=>{const s=r,a=zl.parse(r);if(a.length>5)return s;const i=zl.createTransformer(r),o=typeof a[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;a[0+o]/=l,a[1+o]/=c;const u=hr(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),i(a)}};let Bw=!1;class CZ extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:a}=this.props,{projection:i}=e;KK(EZ),i&&(t.group&&t.group.add(i),s&&s.register&&a&&s.register(i),Bw&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),c0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:a,isPresent:i}=this.props,{projection:o}=s;return o&&(o.isPresent=i,Bw=!0,a||e.layoutDependency!==t||t===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||dr.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),n2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:a}=e;Bw=!0,a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function D5(r){const[e,t]=s5(),s=E.useContext(Lk);return n.jsx(CZ,{...r,layoutGroup:s,switchLayoutGroup:E.useContext(f5),isPresent:e,safeToRemove:t})}const EZ={borderRadius:{...Mm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mm,borderTopRightRadius:Mm,borderBottomLeftRadius:Mm,borderBottomRightRadius:Mm,boxShadow:AZ};function TZ(r,e,t){const s=ka(r)?r:Qu(r);return s.start(p2("",s,e,t)),s.animation}const PZ=(r,e)=>r.depth-e.depth;class RZ{constructor(){this.children=[],this.isDirty=!1}add(e){zk(this.children,e),this.isDirty=!0}remove(e){Vk(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PZ),this.isDirty=!1,this.children.forEach(e)}}function IZ(r,e){const t=Ka.now(),s=({timestamp:a})=>{const i=a-t;i>=e&&(Ul(s),r(i-e))};return dr.setup(s,!0),()=>Ul(s)}const M5=["TopLeft","TopRight","BottomLeft","BottomRight"],DZ=M5.length,RP=r=>typeof r=="string"?parseFloat(r):r,IP=r=>typeof r=="number"||Lt.test(r);function MZ(r,e,t,s,a,i){a?(r.opacity=hr(0,t.opacity??1,OZ(s)),r.opacityExit=hr(e.opacity??1,0,LZ(s))):i&&(r.opacity=hr(e.opacity??1,t.opacity??1,s));for(let o=0;o<DZ;o++){const l=`border${M5[o]}Radius`;let c=DP(e,l),u=DP(t,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||IP(c)===IP(u)?(r[l]=Math.max(hr(RP(c),RP(u),s),0),(Bi.test(u)||Bi.test(c))&&(r[l]+="%")):r[l]=u}(e.rotate||t.rotate)&&(r.rotate=hr(e.rotate||0,t.rotate||0,s))}function DP(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const OZ=O5(0,.5,NM),LZ=O5(.5,.95,Un);function O5(r,e,t){return s=>s<r?0:s>e?1:t(zf(r,e,s))}function MP(r,e){r.min=e.min,r.max=e.max}function In(r,e){MP(r.x,e.x),MP(r.y,e.y)}function OP(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function LP(r,e,t,s,a){return r-=e,r=K0(r,1/t,s),a!==void 0&&(r=K0(r,1/a,s)),r}function FZ(r,e=0,t=1,s=.5,a,i=r,o=r){if(Bi.test(e)&&(e=parseFloat(e),e=hr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=hr(i.min,i.max,s);r===i&&(l-=e),r.min=LP(r.min,e,t,l,a),r.max=LP(r.max,e,t,l,a)}function FP(r,e,[t,s,a],i,o){FZ(r,e[t],e[s],e[a],e.scale,i,o)}const UZ=["x","scaleX","originX"],zZ=["y","scaleY","originY"];function UP(r,e,t,s){FP(r.x,e,UZ,t?t.x:void 0,s?s.x:void 0),FP(r.y,e,zZ,t?t.y:void 0,s?s.y:void 0)}function zP(r){return r.translate===0&&r.scale===1}function L5(r){return zP(r.x)&&zP(r.y)}function VP(r,e){return r.min===e.min&&r.max===e.max}function VZ(r,e){return VP(r.x,e.x)&&VP(r.y,e.y)}function BP(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function F5(r,e){return BP(r.x,e.x)&&BP(r.y,e.y)}function HP(r){return Fa(r.x)/Fa(r.y)}function $P(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class BZ{constructor(){this.members=[]}add(e){zk(this.members,e),e.scheduleRender()}remove(e){if(Vk(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(a=>e===a);if(t===0)return!1;let s;for(let a=t;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HZ(r,e,t){let s="";const a=r.x.translate/e.x,i=r.y.translate/e.y,o=t?.z||0;if((a||i||o)&&(s=`translate3d(${a}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:g,skewX:x,skewY:y}=t;u&&(s=`perspective(${u}px) ${s}`),h&&(s+=`rotate(${h}deg) `),f&&(s+=`rotateX(${f}deg) `),g&&(s+=`rotateY(${g}deg) `),x&&(s+=`skewX(${x}deg) `),y&&(s+=`skewY(${y}deg) `)}const l=r.x.scale*e.x,c=r.y.scale*e.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const Hw=["","X","Y","Z"],$Z=1e3;let WZ=0;function $w(r,e,t,s){const{latestValues:a}=e;a[r]&&(t[r]=a[r],e.setStaticValue(r,0),s&&(s[r]=0))}function U5(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=k5(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:a,layoutId:i}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",dr,!(a||i))}const{parent:s}=r;s&&!s.hasCheckedOptimisedAppear&&U5(s)}function z5({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(o={},l=e?.()){this.id=WZ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XZ),this.nodes.forEach(ZZ),this.nodes.forEach(JZ),this.nodes.forEach(GZ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new RZ)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $k),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=t5(o)&&!LK(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),r){let h,f=0;const g=()=>this.root.updateBlockedByResize=!1;dr.read(()=>{f=window.innerWidth}),r(o,()=>{const x=window.innerWidth;x!==f&&(f=x,this.root.updateBlockedByResize=!0,h&&h(),h=IZ(g,250),c0.hasAnimatedSinceResize&&(c0.hasAnimatedSinceResize=!1,this.nodes.forEach(qP)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||aJ,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=u.getProps(),N=!this.targetLayout||!F5(this.targetLayout,x),k=!f&&g;if(this.options.layoutRoot||this.resumeFrom||k||f&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...r2(y,"layout"),onPlay:b,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(h,k)}else f||qP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ul(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eJ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&U5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WP);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(YP);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QZ),this.nodes.forEach(YZ),this.nodes.forEach(qZ)):this.nodes.forEach(YP),this.clearAllSnapshots();const l=Ka.now();ua.delta=Mo(0,1e3/60,l-ua.timestamp),ua.timestamp=l,ua.isProcessing=!0,Rw.update.process(ua),Rw.preRender.process(ua),Rw.render.process(ua),ua.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,n2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KZ),this.sharedNodes.forEach(tJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,dr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){dr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fa(this.snapshot.measuredBox.x)&&!Fa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_r(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!L5(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Dc(this.latestValues)||h)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),nJ(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return _r();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(iJ))){const{scroll:u}=this.root;u&&(Tu(l.x,u.offset.x),Tu(l.y,u.offset.y))}return l}removeElementScroll(o){const l=_r();if(In(l,o),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&In(l,o),Tu(l.x,h.offset.x),Tu(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=_r();In(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Pu(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Dc(h.latestValues)&&Pu(c,h.latestValues)}return Dc(this.latestValues)&&Pu(c,this.latestValues),c}removeTransform(o){const l=_r();In(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Dc(u.latestValues))continue;EN(u.latestValues)&&u.updateSnapshot();const h=_r(),f=u.measurePageBox();In(h,f),UP(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Dc(this.latestValues)&&UP(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ua.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=ua.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_r(),this.relativeTargetOrigin=_r(),yf(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=_r(),this.targetWithTransforms=_r()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):In(this.target,this.layout.layoutBox),b5(this.target,this.targetDelta)):In(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_r(),this.relativeTargetOrigin=_r(),yf(this.relativeTargetOrigin,this.target,g.target),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||EN(this.parent.latestValues)||x5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ua.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;In(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;kQ(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=_r());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OP(this.prevProjectionDelta.x,this.projectionDelta.x),OP(this.prevProjectionDelta.y,this.projectionDelta.y)),bf(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!$P(this.projectionDelta.x,this.prevProjectionDelta.x)||!$P(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ru(),this.projectionDelta=Ru(),this.projectionDeltaWithTransform=Ru()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},f=Ru();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=_r(),x=c?c.source:void 0,y=this.layout?this.layout.source:void 0,b=x!==y,v=this.getStack(),N=!v||v.members.length<=1,k=!!(b&&!N&&this.options.crossfade===!0&&!this.path.some(rJ));this.animationProgress=0;let A;this.mixTargetDelta=R=>{const _=R/1e3;XP(f.x,o.x,_),XP(f.y,o.y,_),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yf(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sJ(this.relativeTarget,this.relativeTargetOrigin,g,_),A&&VZ(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=_r()),In(A,this.relativeTarget)),b&&(this.animationValues=h,MZ(h,u,this.latestValues,_,k,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ul(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=dr.update(()=>{c0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Qu(0)),this.currentAnimation=TZ(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($Z),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&V5(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||_r();const f=Fa(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const g=Fa(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+g}In(l,c),Pu(l,h),bf(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new BZ),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&$w("z",o,u,this.animationValues);for(let h=0;h<Hw.length;h++)$w(`rotate${Hw[h]}`,o,u,this.animationValues),$w(`skew${Hw[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=l0(l?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=l0(l?.pointerEvents)||""),this.hasProjected&&!Dc(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=HZ(this.projectionDeltaWithTransform,this.treeScale,h);c&&(f=c(h,f)),o.transform=f;const{x:g,y:x}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in $f){if(h[y]===void 0)continue;const{correct:b,applyTo:v,isCSSVariable:N}=$f[y],k=f==="none"?h[y]:b(h[y],u);if(v){const A=v.length;for(let R=0;R<A;R++)o[v[R]]=k}else N?this.options.visualElement.renderState.vars[y]=k:o[y]=k}this.options.layoutId&&(o.pointerEvents=u===this?l0(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(WP),this.root.sharedNodes.clear()}}}function YZ(r){r.updateLayout()}function qZ(r){const e=r.resumeFrom?.snapshot||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=r.layout,{animationType:a}=r.options,i=e.source!==r.layout.source;a==="size"?On(h=>{const f=i?e.measuredBox[h]:e.layoutBox[h],g=Fa(f);f.min=t[h].min,f.max=f.min+g}):V5(a,e.layoutBox,t)&&On(h=>{const f=i?e.measuredBox[h]:e.layoutBox[h],g=Fa(t[h]);f.max=f.min+g,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[h].max=r.relativeTarget[h].min+g)});const o=Ru();bf(o,t,e.layoutBox);const l=Ru();i?bf(l,r.applyTransform(s,!0),e.measuredBox):bf(l,t,e.layoutBox);const c=!L5(o);let u=!1;if(!r.resumeFrom){const h=r.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const x=_r();yf(x,e.layoutBox,f.layoutBox);const y=_r();yf(y,t,g.layoutBox),F5(x,y)||(u=!0),h.options.layoutRoot&&(r.relativeTarget=y,r.relativeTargetOrigin=x,r.relativeParent=h)}}}r.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(r.isLead()){const{onExitComplete:t}=r.options;t&&t()}r.options.transition=void 0}function XZ(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function GZ(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function KZ(r){r.clearSnapshot()}function WP(r){r.clearMeasurements()}function YP(r){r.isLayoutDirty=!1}function QZ(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function qP(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function ZZ(r){r.resolveTargetDelta()}function JZ(r){r.calcProjection()}function eJ(r){r.resetSkewAndRotation()}function tJ(r){r.removeLeadSnapshot()}function XP(r,e,t){r.translate=hr(e.translate,0,t),r.scale=hr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function GP(r,e,t,s){r.min=hr(e.min,t.min,s),r.max=hr(e.max,t.max,s)}function sJ(r,e,t,s){GP(r.x,e.x,t.x,s),GP(r.y,e.y,t.y,s)}function rJ(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const aJ={duration:.45,ease:[.4,0,.1,1]},KP=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),QP=KP("applewebkit/")&&!KP("chrome/")?Math.round:Un;function ZP(r){r.min=QP(r.min),r.max=QP(r.max)}function nJ(r){ZP(r.x),ZP(r.y)}function V5(r,e,t){return r==="position"||r==="preserve-aspect"&&!uZ(HP(e),HP(t),.2)}function iJ(r){return r!==r.root&&r.scroll?.wasRoot}const oJ=z5({attachResizeListener:(r,e)=>Wf(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ww={current:void 0},B5=z5({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Ww.current){const r=new oJ({});r.mount(window),r.setOptions({layoutScroll:!0}),Ww.current=r}return Ww.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),lJ={pan:{Feature:_Z},drag:{Feature:SZ,ProjectionNode:B5,MeasureLayout:D5}};function JP(r,e,t){const{props:s}=r;r.animationState&&s.whileHover&&r.animationState.setActive("whileHover",t==="Start");const a="onHover"+t,i=s[a];i&&dr.postRender(()=>i(e,Dg(e)))}class cJ extends Zl{mount(){const{current:e}=this.node;e&&(this.unmount=RK(e,(t,s)=>(JP(this.node,s,"Start"),a=>JP(this.node,a,"End"))))}unmount(){}}class dJ extends Zl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Pg(Wf(this.node.current,"focus",()=>this.onFocus()),Wf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eR(r,e,t){const{props:s}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&s.whileTap&&r.animationState.setActive("whileTap",t==="Start");const a="onTap"+(t==="End"?"":t),i=s[a];i&&dr.postRender(()=>i(e,Dg(e)))}class uJ extends Zl{mount(){const{current:e}=this.node;e&&(this.unmount=OK(e,(t,s)=>(eR(this.node,s,"Start"),(a,{success:i})=>eR(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ON=new WeakMap,Yw=new WeakMap,hJ=r=>{const e=ON.get(r.target);e&&e(r)},mJ=r=>{r.forEach(hJ)};function fJ({root:r,...e}){const t=r||document;Yw.has(t)||Yw.set(t,{});const s=Yw.get(t),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(mJ,{root:r,...e})),s[a]}function gJ(r,e,t){const s=fJ(e);return ON.set(r,t),s.observe(r),()=>{ON.delete(r),s.unobserve(r)}}const pJ={some:0,all:1};class xJ extends Zl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:a="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:pJ[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),g=u?h:f;g&&g(c)};return gJ(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(bJ(e,t))&&this.startObserver()}unmount(){}}function bJ({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const yJ={inView:{Feature:xJ},tap:{Feature:uJ},focus:{Feature:dJ},hover:{Feature:cJ}},vJ={layout:{ProjectionNode:B5,MeasureLayout:D5}},wJ={...nZ,...yJ,...lJ,...vJ},Ze=wQ(wJ,DQ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jJ=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),tR=r=>{const e=jJ(r);return e.charAt(0).toUpperCase()+e.slice(1)},H5=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),kJ=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=E.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>E.createElement("svg",{ref:c,...SJ,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:H5("lucide",a),...!i&&!kJ(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,h])=>E.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(r,e)=>{const t=E.forwardRef(({className:s,...a},i)=>E.createElement(_J,{ref:i,iconNode:e,className:H5(`lucide-${NJ(tR(r))}`,`lucide-${r}`,s),...a}));return t.displayName=tR(r),t};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Yf=ut("arrow-right",AJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],$5=ut("award",CJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],TJ=ut("badge-dollar-sign",EJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],RJ=ut("bell",PJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],DJ=ut("building",IJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],OJ=ut("calculator",MJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M18 22v-8",key:"su0gjh"}],["path",{d:"M21 11.343V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9",key:"1exg90"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],FJ=ut("calendar-arrow-up",LJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],zJ=ut("calendar-check-2",UJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],sR=ut("camera",VJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],HJ=ut("chart-no-axes-column",BJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],WJ=ut("chart-pie",$J);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qJ=ut("check",YJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],GJ=ut("chevron-down",XJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rR=ut("chevron-left",KJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vf=ut("chevron-right",QJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],LN=ut("circle-alert",ZJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],eee=ut("circle-arrow-down",JJ);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Gn=ut("circle-check-big",tee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Mg=ut("circle-check",see);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ree=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],aee=ut("circle-help",ree);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],qf=ut("circle-plus",nee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Uu=ut("circle-x",iee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],lee=ut("dollar-sign",oee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],aR=ut("eye-off",cee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nR=ut("eye",dee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uee=[["path",{d:"M2 3v18",key:"pzttux"}],["rect",{width:"12",height:"18",x:"6",y:"3",rx:"2",key:"btr8bg"}],["path",{d:"M22 3v18",key:"6jf3v"}]],hee=ut("gallery-horizontal",uee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],fee=ut("globe",mee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"4oyue0"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]],pee=ut("heart-handshake",gee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],W5=ut("heart",xee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],FN=ut("house",bee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Wc=ut("image",yee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_u=ut("info",vee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Y5=ut("lightbulb",wee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nee=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],q5=ut("list",Nee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],bx=ut("loader",jee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kee=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],X5=ut("lock",kee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const See=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_ee=ut("log-out",See);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aee=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Cee=ut("map",Aee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],G5=ut("menu",Eee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tee=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],Pee=ut("message-square-plus",Tee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ree=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Iee=ut("message-square",Ree);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dee=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Mee=ut("moon",Dee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oee=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],gd=ut("package",Oee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lee=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],UN=ut("palette",Lee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fee=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ju=ut("pen",Fee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uee=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],zee=ut("phone",Uee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],x2=ut("plus",Vee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bee=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],b2=ut("refresh-cw",Bee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hee=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],K5=ut("rocket",Hee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ee=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],zN=ut("ruler",$ee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wee=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Yee=ut("save",Wee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qee=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y2=ut("settings",qee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xee=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Q5=ut("shield-check",Xee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gee=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],iR=ut("shield",Gee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kee=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],d0=ut("shopping-bag",Kee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qee=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Zee=ut("shopping-cart",Qee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ete=ut("smile",Jee);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tte=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ste=ut("square-check-big",tte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rte=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],ate=ut("store",rte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ite=ut("sun",nte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ote=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],lte=ut("tag",ote);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],dte=ut("target",cte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Z5=ut("trash-2",ute);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Xf=ut("trending-up",hte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],J5=ut("upload",mte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],gte=ut("user-round-check",fte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pte=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vl=ut("user",pte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xte=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],eO=ut("users",xte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],yte=ut("video",bte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],zu=ut("wallet",vte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yc=ut("x",wte);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nte=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],jte=ut("zap",Nte);function tO(){const{currency:r,changeCurrency:e,loading:t,availableCurrencies:s=[]}=Eg(),a=[{code:"USD",label:"USD"},{code:"NGN",label:"NGN"},{code:"GBP",label:"GBP"},{code:"JPY",label:"JPY"},{code:"GHS",label:"GHS"},{code:"EUR",label:"EUR"},{code:"CAD",label:"CAD"},{code:"AUD",label:"AUD"},{code:"CNY",label:"CNY"},{code:"INR",label:"INR"}];return n.jsxs("div",{className:"flex items-center",children:[n.jsx(fee,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"}),t?n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Loading..."}):n.jsx("select",{value:r,onChange:i=>e(i.target.value),className:"rounded-md bg-gray-100 dark:bg-gray-700 text-xs text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-1 focus:ring-blue-500","aria-label":"Select currency",children:(s.length>0?s:a).map(i=>n.jsx("option",{value:i.code,children:i.code},i.code))})]})}const kte=()=>{const[r,e]=E.useState(null),t=[{name:"Help & Support",path:"/support"},{name:"FAQ",path:"/support?tab=faq"}];return n.jsx("div",{className:"bg-gray-100 py-2 border-b border-gray-200 mt-16 sm:mt-8 md:mt-4 lg:mt-0 -mb-8 lg:mb-0",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex justify-end items-center text-[10px] sm:text-xs md:text-sm",children:[t.map((s,a)=>n.jsx("div",{className:"ml-4 first:ml-0 relative",children:n.jsx(he,{to:s.path,className:"text-gray-600 hover:text-blue-600 transition-colors duration-200",onMouseEnter:()=>e(a),onMouseLeave:()=>e(null),children:s.name})},a)),n.jsx("div",{className:"ml-6 flex items-center text-gray-600",children:n.jsxs(he,{to:"/sell",className:"flex items-center hover:text-blue-600 transition-colors duration-200",children:[n.jsx(ate,{className:"w-4 h-4 mr-1"}),n.jsx("span",{children:"Sell on Foremade"})]})}),n.jsx("div",{className:"ml-4 flex items-center",children:n.jsx(tO,{})})]})})})},Ste="/assets/nglogo-qvrtZOMI.png",_te="/assets/uklogo-CgNCKquW.png",Ate=()=>{const[r,e]=E.useState(null),[t,s]=E.useState(null),[a,i]=E.useState(""),o=["Television & Accessories","Drinks & Beverages","Game & Console","Home & Living","Perfumes & Fragrances","Vehicles & Transport","Computers & Laptops"],l=g=>g.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),c=[{name:"twitter",icon:"bx bxl-twitter",color:"text-blue-400",url:"https://twitter.com"},{name:"instagram",icon:"bx bxl-instagram",color:"text-pink-400",url:"https://instagram.com"},{name:"facebook",icon:"bx bxl-facebook",color:"text-blue-600",url:"https://facebook.com"}],u=[{icon:"bxs-truck",title:"Fast Shipping",description:"Fast shipping all across the country"},{icon:"bx-check-shield",title:"Authentic Products",description:"100% Authentic products"},{icon:"bx-lock-alt",title:"100% Secure Payment",description:"We Ensure Secure Transactions"},{icon:"bx-headphone",title:"24/7 Support Center",description:"We Ensure Quality Support"}],h={account:[{name:"My Profile",url:"/profile"},{name:"My Orders",url:"/orders"},{name:"My Wishlist",url:"/favorites"}],about:[{name:"About Us",url:"/about"},{name:"Support",url:"/support"}]},f=g=>{g.preventDefault(),alert(`Thanks for subscribing with ${a}!`),i("")};return n.jsxs("footer",{className:"bg-white mt-16",children:[n.jsx("div",{className:"bg-gray-50 py-3 border-t border-b border-gray-200",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center text-xs text-gray-600",children:u.map((g,x)=>n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("i",{className:`bx ${g.icon} text-base mb-1 text-blue-500`}),n.jsx("p",{className:"font-semibold text-xs",children:g.title}),n.jsx("p",{className:"text-xs",children:g.description})]},x))})})}),n.jsx("div",{className:"bg-white text-gray-800 py-6",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex flex-wrap flex-row justify-between",children:[n.jsxs("div",{className:"w-full md:w-auto mb-6 md:mb-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[n.jsx("span",{className:"text-lg font-bold",children:"Foremade"}),n.jsx("i",{className:"bx bx-chevron-up text-blue-500 rotate-45"})]}),n.jsxs("div",{className:"flex space-x-4 items-center mb-4",children:[c.map((g,x)=>n.jsx("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:`text-lg ${r===g.name?g.color:"text-gray-600"}`,onMouseEnter:()=>e(g.name),onMouseLeave:()=>e(null),children:n.jsx("i",{className:g.icon})},x)),n.jsxs("div",{className:"relative group ml-2",children:[n.jsxs("button",{className:"hover:text-blue-600 flex items-center",children:[n.jsx("img",{src:_te,alt:"UK flag",className:"h-4"}),n.jsx("i",{className:"bx bx-chevron-down ml-1"})]}),n.jsx("div",{className:"absolute hidden group-hover:block bg-white z-10 w-36 rounded-md shadow-xl border border-gray-200",children:n.jsx("span",{className:"block px-3 py-1 text-xs hover:bg-gray-100 cursor-pointer",children:n.jsx("img",{src:Ste,alt:"NG flag",className:"h-4"})})})]})]}),n.jsxs("div",{className:"mb-4 md:max-w-xs",children:[n.jsx("h3",{className:"text-xs font-semibold mb-2",children:"Subscribe to our newsletter"}),n.jsxs("form",{onSubmit:f,className:"flex",children:[n.jsx("input",{type:"email",value:a,onChange:g=>i(g.target.value),placeholder:"Your email",className:"flex-1 p-1 border border-gray-300 rounded-l-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-xs",required:!0}),n.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-2 py-1 rounded-r-md hover:bg-blue-600 text-xs",children:n.jsx("i",{className:"bx bx-envelope"})})]})]})]}),n.jsxs("div",{className:"flex flex-wrap w-full md:w-auto justify-between",children:[n.jsxs("div",{className:"w-1/3 pr-2",children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Categories"}),n.jsxs("ul",{className:"space-y-1 text-xs",children:[o.slice(0,8).map((g,x)=>n.jsx("li",{children:n.jsx(he,{to:`/category/${l(g)}`,className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>s(`category-${x}`),onMouseLeave:()=>s(null),children:g})},x)),o.length>8&&n.jsx("li",{children:n.jsx(he,{to:"/products",className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>s("more-categories"),onMouseLeave:()=>s(null),children:"More Categories..."})})]})]}),n.jsxs("div",{className:"w-1/3 px-2",children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Account"}),n.jsx("ul",{className:"space-y-1 text-xs",children:h.account.map((g,x)=>n.jsx("li",{children:n.jsx(he,{to:g.url,className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>s(`account-${x}`),onMouseLeave:()=>s(null),children:g.name})},x))})]}),n.jsxs("div",{className:"w-1/3 pl-2",children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"About"}),n.jsxs("ul",{className:"space-y-1 text-xs",children:[h.about.map((g,x)=>n.jsx("li",{children:n.jsx(he,{to:g.url,className:"text-gray-600 hover:text-blue-500 transition-colors",onMouseEnter:()=>s(`about-${x}`),onMouseLeave:()=>s(null),children:g.name})},x)),n.jsx("li",{children:n.jsx(he,{to:"/buyer-protection-policy",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Buyer Protection Policy"})}),n.jsx("li",{children:n.jsx(he,{to:"/refund-policy",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Refund Policy"})}),n.jsx("li",{children:n.jsx(he,{to:"/terms-conditions",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Terms & Conditions"})}),n.jsx("li",{children:n.jsx(he,{to:"/seller-agreement",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Seller Agreement"})}),n.jsx("li",{children:n.jsx(he,{to:"/shipping-policy",className:"text-gray-600 hover:text-blue-500 transition-colors",children:"Shipping Policy"})})]})]})]})]}),n.jsx("div",{className:"mt-6 text-center text-xs text-gray-400",children:n.jsxs("p",{children:["© ",new Date().getFullYear()," Foremade, Inc. All rights reserved."]})})]})})]})},yx={quote:"“I always find what I need on Foremade, and the delivery is super fast. Highly recommended!”",name:"Okafor C., Abuja",avatar:"https://randomuser.me/api/portraits/men/59.jpg"};function Cte(){const r=[{image:"https://pngimg.com/uploads/vacuum_cleaner/vacuum_cleaner_PNG3.png",text:"Smart Shopping, Better Living",tagline:"Premium Products",description:"Discover curated collections from verified sellers worldwide",features:[{icon:"bx bx-certification",text:"Quality Assured",desc:"Verified products"},{icon:"bx bx-package",text:"Fast Delivery",desc:"Global shipping"}],button:"Explore Now",secondaryButton:"View Deals",link:"/products"},{image:"https://pngimg.com/uploads/tv/tv_PNG39223.png",text:"Premium Electronics",tagline:"Tech Essentials",description:"Find the latest tech from trusted sellers",features:[{icon:"bx bx-check-shield",text:"Warranty Assured",desc:"Extended coverage"},{icon:"bx bx-credit-card",text:"Easy Payment",desc:"Multiple options"}],button:"Browse Electronics",secondaryButton:"View Brands",link:"/category/electronics"}],[e,t]=E.useState(0),[s,a]=E.useState(!0);E.useEffect(()=>{if(!s)return;const o=setInterval(()=>{t(l=>(l+1)%r.length)},6e3);return()=>clearInterval(o)},[e,r.length,s]);const i=o=>{t(o),a(!1),setTimeout(()=>a(!0),1e4)};return n.jsxs("div",{className:"relative overflow-hidden my-4 mx-2 sm:mx-4 lg:mx-6 rounded-2xl border border-blue-800/30 h-[240px] xs:h-[260px] sm:h-[320px] lg:h-[440px] shadow-xl",children:[n.jsxs("div",{className:"absolute inset-0 z-0",children:[n.jsx(Ze.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-700 via-blue-400/60 to-amber-200 animate-gradient-x",initial:{opacity:0},animate:{opacity:.7},transition:{duration:1}}),n.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 sm:opacity-30 transition-all duration-700 scale-110",style:{backgroundImage:`url(${r[e].image})`}}),n.jsx("div",{className:"absolute inset-0 backdrop-blur-md"})]}),n.jsx(Ze.div,{className:"relative z-10 h-full flex items-center w-full",children:n.jsxs("div",{className:"w-full mx-auto px-3 xs:px-4 sm:px-8 lg:px-16 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-8 sm:gap-10 py-6 sm:py-10 flex-wrap",children:[n.jsxs("div",{className:"max-w-2xl w-full space-y-4 sm:space-y-6",children:[n.jsx(Ze.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"inline-flex items-center h-7 px-4 rounded-full bg-gradient-to-r from-blue-600/30 to-blue-400/20 border border-blue-500/30 mb-1",children:n.jsx("span",{className:"text-xs font-medium text-blue-100 tracking-wide",children:r[e].tagline})}),n.jsx(Ze.h2,{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold leading-tight text-white drop-shadow-lg",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:r[e].text}),n.jsx(Ze.p,{className:"hidden sm:block text-base sm:text-lg text-white/90 max-w-lg mt-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:r[e].description}),n.jsx("div",{className:"flex gap-3 mt-4",children:n.jsx(he,{to:r[e].link,className:"px-6 py-2 rounded-lg font-bold bg-gradient-to-r from-blue-600 to-blue-400 text-white shadow-lg hover:from-blue-400 hover:to-blue-600 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-400 animate-pulse",children:r[e].button})})]}),n.jsxs(Ze.div,{className:"hidden sm:flex flex-col items-center justify-center bg-white/30 backdrop-blur-lg rounded-2xl p-6 shadow-lg max-w-xs ml-0 sm:ml-8 mt-8 sm:mt-0 border border-blue-100/30",initial:{opacity:0,x:30},animate:{opacity:1,x:0},children:[n.jsx("img",{src:yx.avatar,alt:yx.name,className:"w-16 h-16 rounded-full border-4 border-blue-300 shadow mb-3"}),n.jsx("p",{className:"text-base text-gray-900 font-medium italic mb-2 text-center",children:yx.quote}),n.jsx("span",{className:"text-xs text-gray-700 font-semibold",children:yx.name})]})]})}),n.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-2 z-20",children:r.map((o,l)=>n.jsx("button",{onClick:()=>i(l),className:"group","aria-label":`Go to slide ${l+1}`,children:n.jsx("span",{className:`block w-3 h-3 rounded-full transition-all duration-200 ${e===l?"bg-blue-400 scale-125 shadow-lg shadow-blue-400/50":"bg-white/40 group-hover:bg-white/60 group-hover:scale-105"}`})},l))})]})}const Ete=()=>{const[r,e]=E.useState(!1);E.useEffect(()=>{localStorage.getItem("cookiesAccepted")||e(!0)},[]);const t=()=>{localStorage.setItem("cookiesAccepted","true"),e(!1)};return r?n.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-8 md:right-8 bg-white shadow-lg rounded-lg p-4 z-50 border border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 max-w-7xl mx-auto",children:[n.jsx("div",{className:"flex-1 text-gray-600 text-sm md:text-base",children:"We use cookies to improve your experience on our site. By using our site, you accept our use of cookies."}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("a",{href:"/cookie-policy",className:"text-[#112d4e] hover:text-[#112d4e] text-sm font-medium hover:underline",children:"Learn more"}),n.jsx("button",{onClick:t,className:"bg-[#112d4e] hover:bg-[#112d4e] text-white font-medium px-6 py-2 rounded-md transition-colors duration-200 text-sm",children:"Accept"})]})]})}):null},Tte=()=>{const[r,e]=E.useState({width:window.innerWidth,height:window.innerHeight});return E.useEffect(()=>{const t=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),r},Pte=()=>{const[r,e]=E.useState([]),[t,s]=E.useState(0),[a,i]=E.useState(null),{width:o}=Tte();E.useEffect(()=>{(async()=>{try{const f=(await Ke(_e(J,"carouselSlides"))).docs.map(g=>({id:g.id,...g.data()}));e(f)}catch(h){console.error("Error fetching slides:",h)}})()},[]),E.useEffect(()=>{if(r.length===0)return;const u=setInterval(()=>{i(t),s(h=>(h+1)%r.length)},5e3);return()=>clearInterval(u)},[t,r.length]);const l=u=>o<640?u.mobile:o<1024?u.tablet:u.desktop,c=u=>{if(u.mediaType==="video")return!0;const h=l(u);return h&&(h.endsWith(".mp4")||h.endsWith(".webm"))};return r.length===0?n.jsx("div",{className:"relative h-[310px] sm:h-[310px] md:h-[310px] lg:h-[400px] w-full overflow-hidden",children:n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"w-full h-full bg-gray-200 animate-pulse"})})}):n.jsx("div",{className:"relative h-[300px] sm:h-[400px] md:h-[300px] lg:h-[500px] w-full overflow-hidden",children:r.map((u,h)=>n.jsx("div",{className:`absolute inset-0 transition-all duration-1000 ease-in-out ${h===t?"opacity-100 transform translate-x-0":h===a?"opacity-0 transform -translate-x-10":"opacity-0 transform translate-x-10"}`,children:c(u)?n.jsx("video",{src:l(u),alt:u.alt||`Slide ${u.id}`,className:"w-full h-full object-cover object-center sm:object-[50%_50%]",style:{objectPosition:"center 35%"},autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:f=>{console.warn("Video load error:",{slideId:u.id,url:l(u)}),console.log(f)}}):n.jsx("img",{src:l(u),alt:u.alt||`Slide ${u.id}`,className:"w-full h-full object-cover object-center sm:object-[50%_50%]",style:{objectPosition:"center 35%"},loading:"lazy",onError:f=>{console.warn("Image load error:",{slideId:u.id,url:l(u)}),console.log(f)}})},u.id))})},sO=({type:r="default",count:e=1})=>{const t=()=>{switch(r){case"featuredProduct":case"recommended":return n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 animate-pulse",children:[...Array(e)].map((s,a)=>n.jsxs("div",{className:"w-full h-64 bg-gray-200 rounded-lg",children:[n.jsx("div",{className:"w-full h-48 bg-gray-300 rounded-t-lg"}),n.jsxs("div",{className:"p-2",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},a))});case"productDetail":return n.jsx("div",{className:"animate-pulse",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-3",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"order-1",children:[n.jsx("div",{className:"w-full h-96 bg-gray-200 rounded-lg"}),n.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto scrollbar-hide",children:[...Array(4)].map((s,a)=>n.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-lg"},a))})]}),n.jsx("div",{className:"order-2 space-y-4",children:n.jsxs("div",{className:"product-info-card",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[...Array(1)].map((s,a)=>n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"},a))}),n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),n.jsxs("div",{className:"price-section",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[...Array(1)].map((s,a)=>n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/5"},a))}),n.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/2 mb-4"}),n.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"h-10 bg-gray-200 rounded w-2/3 mb-4"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"h-12 bg-gray-200 rounded w-2/3"}),n.jsx("div",{className:"h-12 bg-gray-200 rounded w-1/6"})]})]})}),n.jsxs("div",{className:"order-3 md:order-2 lg:order-3 product-info-card mt-6",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"})]}),n.jsxs("div",{className:"order-4 lg:order-5 product-info-card",style:{marginBottom:"2rem"},children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),n.jsx("div",{className:"h-16 bg-gray-200 rounded w-full mb-2"})]})]})}),n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"sticky top-4 space-y-6",children:[n.jsxs("div",{className:"product-info-card",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),n.jsx("div",{className:"space-y-4",children:[...Array(4)].map((s,a)=>n.jsxs("div",{className:"h-20 bg-gray-200 rounded-lg flex",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-lg mr-2"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},a))})]}),n.jsxs("div",{className:"product-info-card",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),n.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,a)=>n.jsxs("div",{className:"h-16 bg-gray-200 rounded-lg flex",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-lg mr-2"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},a))})]})]})})]})});case"categories":return n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 animate-pulse",children:[n.jsx("div",{className:"sm:col-span-2 h-40 bg-gray-200 rounded-lg"}),n.jsx("div",{className:"h-40 bg-gray-200 rounded-lg"}),n.jsx("div",{className:"h-40 bg-gray-200 rounded-lg"}),n.jsx("div",{className:"h-40 bg-gray-200 rounded-lg max-md:hidden"}),n.jsx("div",{className:"h-40 bg-gray-200 rounded-lg max-md:hidden"})]});default:return n.jsx("div",{className:"w-80 sm:w-full h-40 bg-gray-200 rounded-lg animate-pulse",children:n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/4 mb-4"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-md"}),n.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-md"})]})]})})}};return n.jsx("div",{className:r==="default"?"flex gap-4 overflow-x-auto":"",children:[...Array(r==="featuredProduct"||r==="recommended"||r==="productDetail"||r==="categories"?1:e)].map((s,a)=>n.jsx("div",{className:r==="default"?"flex-shrink-0":"",children:t()},a))})},Rte="/assets/go-KqmyPzJd.jpg",Ite=()=>{const[r,e]=E.useState(!0);return E.useEffect(()=>{const t=setTimeout(()=>{e(!1)},1500);return()=>clearTimeout(t)},[]),r?n.jsxs("section",{className:"container mx-auto px-4 py-8",children:[n.jsx("h2",{className:"text-lg sm:text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Top Categories"}),n.jsx(sO,{type:"categories"})]}):n.jsxs("section",{className:"container mx-auto px-4 py-8",children:[n.jsx("h2",{className:"text-lg sm:text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Top Categories"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 ",children:[n.jsxs("div",{className:"p-5 md:col-span-2 bg-gradient-to-br from-[#D1FAE5] to-[#A7F3D0] rounded-2xl sm:p-3 text-gray-900 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white rounded-full"}),n.jsx("div",{className:"absolute top-1/2 -left-8 w-16 h-16 bg-white rounded-full"}),n.jsx("div",{className:"absolute -bottom-6 right-1/3 w-20 h-20 bg-white rounded-full"})]}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-1",children:"ForemadeGo"}),n.jsx("p",{className:"text-teal-100 text-xs sm:text-sm font-medium",children:"Lightning Fast • Ultra Secure"})]}),n.jsx("div",{className:"hidden sm:block",children:n.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuMiIvPgo8cGF0aCBkPSJNMjAgMjVIMzVMMzAgMzVIMjBWMjVaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",alt:"Delivery",className:"w-8 h-8"})})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 mb-2 items-stretch",children:[n.jsxs("div",{className:"flex flex-col justify-center flex-1 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 bg-white/30 backdrop-blur-sm rounded-xl p-2",children:[n.jsx("div",{className:"bg-white/40 rounded-full p-1",children:n.jsx(jte,{className:"w-4 h-4 text-teal-500"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-xs text-gray-800",children:"Integrated with Foremade"}),n.jsx("p",{className:"text-teal-600 text-xs",children:"Get your orders in record time"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 bg-white/30 backdrop-blur-sm rounded-xl p-2",children:[n.jsx("div",{className:"bg-white/40 rounded-full p-1",children:n.jsx(iR,{className:"w-4 h-4 text-teal-500"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-xs text-gray-800",children:"100% Secure"}),n.jsx("p",{className:"text-teal-600 text-xs",children:"Your packages, guaranteed safe"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-2 flex items-center justify-center gap-12 mt-2",children:[n.jsx("h3",{className:"text-teal-700 text-xs font-semibold mb-0",children:"Get Delivery in Minutes"}),n.jsxs("a",{href:"https://foremadego.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-teal-400 to-teal-600 hover:from-teal-500 hover:to-teal-700 text-white px-4 py-2 rounded-lg font-semibold transition-all duration-300 shadow-md text-[10px]",children:["Track your orders here",n.jsx(Yf,{className:"w-3.5 h-3.5"})]})]})]}),n.jsx("div",{className:"flex flex-col items-center justify-center flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-56 h-56 sm:w-64 sm:h-64 rounded-2xl overflow-hidden shadow-xl border-4 border-white/40",children:n.jsx("img",{src:Rte,alt:"Happy ForemadeGo delivery person on motorcycle",className:"w-full h-full object-cover"})}),n.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-200 text-teal-700 px-2 py-0.5 rounded-full text-[0.65rem] font-bold shadow-lg",children:"#1 Rated"})]})})]}),n.jsxs("div",{className:"text-center mt-1 flex items-center justify-center gap-2",children:[n.jsx(K5,{className:"w-4 h-4 text-teal-400",title:"Speed"}),n.jsx(iR,{className:"w-4 h-4 text-teal-400",title:"Security"}),n.jsx(ete,{className:"w-4 h-4 text-teal-400",title:"Satisfaction Guaranteed"})]})]})]}),n.jsxs("div",{className:"md:col-span-1 bg-[#E0F4FF] text-black rounded-lg p-4 sm:p-6 flex flex-col sm:flex-row max-md:items-center items-left justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-2",children:"Cut the Price, Not the Features"}),n.jsx("p",{className:"text-sm sm:text-xs mb-4",children:"Get the latest phones at 20% off"}),n.jsx("a",{href:"/electronics",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Buy Now"})]}),n.jsx("div",{className:"mt-4 sm:mt-0 sm:self-start",children:n.jsx("img",{src:"https://pngimg.com/uploads/iphone16/small/iphone16_PNG6.png",alt:"Phone",className:"w-20 h-40"})})]}),n.jsxs("div",{className:"bg-[#EDE9FE] text-black rounded-lg p-4 sm:p-6 flex sm:flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-2",children:"Style Meets Function"}),n.jsx("a",{href:"/electronics",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Shop Now"})]}),n.jsx("div",{className:"mt-4 sm:mt-0",children:n.jsx("img",{src:"https://pngimg.com/uploads/laptop/small/laptop_PNG101763.png",alt:"Laptop",className:"w-24 sm:w-28 h-auto"})})]}),n.jsxs("div",{className:"bg-[#FFE5E5] text-black rounded-lg p-4 sm:p-6 flex sm:flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-2",children:"Capture the Magic Around"}),n.jsx("a",{href:"/electronics",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Shop Now"})]}),n.jsx("div",{className:"mt-4 sm:mt-0",children:n.jsx("img",{src:"https://pngimg.com/uploads/camera_lens/small/camera_lens_PNG4.png",alt:"Camera",className:"w-20 sm:w-24 h-auto"})})]}),n.jsxs("div",{className:"bg-[#E0F4FF] text-black rounded-lg p-4 sm:p-6 flex flex-col sm:flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-2",children:"Health & Wellness"}),n.jsx("a",{href:"/health-beauty",className:"bg-gray-800 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm sm:text-xs inline-block",children:"Shop Now"})]}),n.jsx("div",{className:"mt-4 sm:mt-0",children:n.jsx("img",{src:"https://pngimg.com/uploads/pills/small/pills_PNG16492.png",alt:"Bottle",className:"w-20 sm:w-24 h-auto"})})]})]})]})},vx={quote:"“Foremade helped me turn my side hustle into a real business. The dashboard and support are world-class!”",name:"Sarah M., London",avatar:"https://randomuser.me/api/portraits/women/44.jpg"};function Dte(){const r=[{image:"https://pngimg.com/uploads/fan/fan_PNG14457.png",text:"Start Your Business Journey",tagline:"Empowering Entrepreneurs",description:"Join our marketplace and transform your passion into profit",features:[{icon:"bx bx-chart",text:"Analytics Dashboard",desc:"Track your growth"},{icon:"bx bx-shield-plus",text:"Secure Payments",desc:"Protected transactions"}],button:"Start Selling",secondaryButton:"Learn More",link:"/sell"},{image:"https://pngimg.com/uploads/laptop/laptop_PNG101773.png",text:"Grow Your Business",tagline:"Scale Globally",description:"Reach millions of potential customers worldwide",features:[{icon:"bx bx-globe",text:"Global Reach",desc:"Worldwide audience"},{icon:"bx bx-trending-up",text:"Growth Tools",desc:"Marketing suite"}],button:"Learn More",secondaryButton:"View Features",link:"/pro-seller-guide"}],[e,t]=E.useState(0),[s,a]=E.useState(!0);E.useEffect(()=>{if(!s)return;const o=setInterval(()=>{t(l=>(l+1)%r.length)},6e3);return()=>clearInterval(o)},[e,r.length,s]);const i=o=>{t(o),a(!1),setTimeout(()=>a(!0),1e4)};return n.jsxs("div",{className:"relative overflow-hidden my-4 mx-2 sm:mx-4 lg:mx-6 rounded-2xl border border-neutral-800/30 h-[240px] xs:h-[260px] sm:h-[320px] lg:h-[440px] shadow-xl",children:[n.jsxs("div",{className:"absolute inset-0 z-0",children:[n.jsx(Ze.div,{className:"absolute inset-0 bg-gradient-to-br from-amber-600 via-orange-400/60 to-blue-900 animate-gradient-x",initial:{opacity:0},animate:{opacity:.7},transition:{duration:1}}),n.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 sm:opacity-30 transition-all duration-700 scale-110",style:{backgroundImage:`url(${r[e].image})`}}),n.jsx("div",{className:"absolute inset-0 backdrop-blur-md"})]}),n.jsx(Ze.div,{className:"relative z-10 h-full flex items-center w-full",children:n.jsxs("div",{className:"w-full mx-auto px-3 xs:px-4 sm:px-8 lg:px-16 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-8 sm:gap-10 py-6 sm:py-10 flex-wrap",children:[n.jsxs("div",{className:"max-w-2xl w-full space-y-4 sm:space-y-6",children:[n.jsx(Ze.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"inline-flex items-center h-7 px-4 rounded-full bg-gradient-to-r from-amber-600/30 to-orange-400/20 border border-amber-500/30 mb-1",children:n.jsx("span",{className:"text-xs font-medium text-amber-100 tracking-wide",children:r[e].tagline})}),n.jsx(Ze.h2,{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold leading-tight text-white drop-shadow-lg",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:r[e].text}),n.jsx(Ze.p,{className:"hidden sm:block text-base sm:text-lg text-white/90 max-w-lg mt-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:r[e].description}),n.jsx("div",{className:"flex gap-3 mt-4",children:n.jsx(he,{to:r[e].link,className:"px-6 py-2 rounded-lg font-bold bg-gradient-to-r from-amber-500 to-orange-400 text-white shadow-lg hover:from-orange-400 hover:to-amber-500 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-amber-400 animate-pulse",children:r[e].button})})]}),n.jsxs(Ze.div,{className:"hidden sm:flex flex-col items-center justify-center bg-white/30 backdrop-blur-lg rounded-2xl p-6 shadow-lg max-w-xs ml-0 sm:ml-8 mt-8 sm:mt-0 border border-amber-100/30",initial:{opacity:0,x:30},animate:{opacity:1,x:0},children:[n.jsx("img",{src:vx.avatar,alt:vx.name,className:"w-16 h-16 rounded-full border-4 border-amber-300 shadow mb-3"}),n.jsx("p",{className:"text-base text-gray-900 font-medium italic mb-2 text-center",children:vx.quote}),n.jsx("span",{className:"text-xs text-gray-700 font-semibold",children:vx.name})]})]})}),n.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-2 z-20",children:r.map((o,l)=>n.jsx("button",{onClick:()=>i(l),className:"group","aria-label":`Go to slide ${l+1}`,children:n.jsx("span",{className:`block w-3 h-3 rounded-full transition-all duration-200 ${e===l?"bg-amber-400 scale-125 shadow-lg shadow-amber-400/50":"bg-white/40 group-hover:bg-white/60 group-hover:scale-105"}`})},l))})]})}function lr({price:r}){const{convertPrice:e,loading:t}=Eg();return n.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:t?"...":e(r)})}const Ds="/assets/placeholder-ZIgPw8SE.png",Vr=({product:r,dailyDeals:e=[],selectedColor:t="",selectedSize:s="",selectedVariant:a=null,onClick:i,isFavorite:o=!1,toggleFavorite:l,cardClassName:c="",imageClassName:u="",priceClassName:h="",nameClassName:f=""})=>{const[g,x]=E.useState(o),[y,b]=E.useState(0),[v,N]=E.useState(""),[k,A]=E.useState(!1),[R,_]=E.useState(null),[I,P]=E.useState({buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),[T,D]=E.useState(!1);let L={...r,stock:Number(r.stock)||0};if(Array.isArray(e)&&r.id){const B=e.find(Q=>Q.productId===r.id&&Q.discount&&(!Q.endDate||new Date(Q.endDate)>new Date)&&(!Q.startDate||new Date(Q.startDate)<=new Date));B&&(L.isDailyDeal=!0,L.discountPercentage=Number((B.discount*100).toFixed(2))||0)}const F=Array.isArray(L.variants)&&L.variants.length>0,z=Number(a?.price||r.price)||0;E.useEffect(()=>{(async()=>{try{const se=Ne(J,"feeConfigurations","categoryFees"),le=await it(se);le.exists()&&_(le.data())}catch(se){console.error("Error fetching fee configurations:",se)}})(),(async()=>{if(L.sellerId)try{const Ee=(await Ke(_e(J,"proSellers"))).docs.map(ue=>ue.data()).some(ue=>ue.userId===L.sellerId);D(Ee)}catch(se){console.error("Error checking pro seller status:",se),D(!1)}})();let ee=Ds;a?.imageUrls?.length>0?ee=a.imageUrls.find(le=>typeof le=="string"&&le.startsWith("https://"))||a.imageUrls[0]||Ds:F&&L.variants[0]?.imageUrls?ee=L.variants[0].imageUrls.find(le=>typeof le=="string"&&le.startsWith("https://"))||L.variants[0].imageUrls[0]||Ds:Array.isArray(L.imageUrls)&&L.imageUrls.length>0?ee=L.imageUrls.find(le=>typeof le=="string"&&le.startsWith("https://"))||L.imageUrls[0]||Ds:L.imageUrl&&typeof L.imageUrl=="string"&&L.imageUrl.startsWith("https://")?ee=L.imageUrl:console.warn(`Product ${L.id} has no valid imageUrl or imageUrls`),N(ee),A(!1)},[L.id,L.imageUrls,L.imageUrl,L.variants,a]),E.useEffect(()=>{(async()=>{if(!r||!r.id){x(!1),b(0);return}try{const Q=Ne(J,"products",r.id),ee=await it(Q);if(ee.exists()){const se=ee.data(),le=ve.currentUser?.uid;x(le&&Array.isArray(se.favoritedBy)&&se.favoritedBy.includes(le)||o),b(se.favoriteCount||0)}else x(!1),b(0)}catch(Q){console.error("Error fetching favorite status:",Q)}})()},[r.id,o]),E.useEffect(()=>{if(R&&L.category&&z>0){const B=R[L.category]||{buyerProtectionRate:.08,handlingRate:.2},Q=z*B.buyerProtectionRate,ee=z*B.handlingRate,se=z+Q+ee;P({buyerProtectionFee:Q,handlingFee:ee,totalEstimatedPrice:se,sellerEarnings:z})}},[R,L.category,z]);const O=z,V=I.totalEstimatedPrice,Y=L.isDailyDeal?Math.round(V*(1-L.discountPercentage/100)):V,H=async B=>{if(B.preventDefault(),B.stopPropagation(),l)l();else{const Q=ve.currentUser?.uid;if(!Q||!r?.id){xe.error("Please sign in to favorite a product.");return}try{const ee=Ne(J,"products",r.id),se=await it(ee);if(!se.exists()){xe.error("Product not found.");return}const le=se.data(),Ee=le.favoriteCount||0,ue=le.favoritedBy||[];if(g)await Qr(ee,{favoritedBy:FW(Q),favoriteCount:Math.max(0,Ee-1)}),x(!1),b(Math.max(0,Ee-1)),xe.success("Removed from favorites!");else{if(ue.includes(Q)){xe.info("You have already favorited this product.");return}await Qr(ee,{favoritedBy:LW(Q),favoriteCount:Ee+1}),x(!0),b(Ee+1),xe.success("Added to favorites!")}}catch(ee){console.error("Error updating favorite:",ee),xe.error("Failed to update favorite. Try again!")}}},$=(B,Q=35)=>!B||typeof B!="string"?"No name available":B.length>Q?B.substring(0,Q)+"...":B,X=F?[...new Set(L.variants.map(B=>B.color).filter(Boolean))]:[],G=F?[...new Set(L.variants.map(B=>B.size).filter(Boolean))]:[];return n.jsxs(he,{to:`/product/${L.id}`,onClick:i,className:`bg-white rounded-lg shadow-sm hover:shadow-md transition duration-300 flex flex-col min-w-0 overflow-hidden ${c}`,tabIndex:0,"aria-label":L.name,children:[n.jsxs("div",{className:`relative h-[200px] overflow-hidden rounded-t-lg min-w-0 ${u}`,children:[n.jsx("img",{src:k?Ds:v,alt:L.name||"Product Image",className:"w-full h-full object-cover max-w-full max-h-full",onError:B=>{k||(console.error("Image load error for product:",L.id,L.name,{imageUrl:v,attemptedUrl:B.target.src}),A(!0),N(Ds))},loading:"lazy",fetchPriority:"low"}),n.jsxs("button",{onClick:H,className:"absolute top-2 right-2 p-1.5 flex items-center justify-evenly bg-white/70 backdrop-blur-sm rounded-full hover:bg-white transition-colors","aria-label":g?"Remove from favorites":"Add to favorites",children:[n.jsx(W5,{className:`w-5 h-5 ${g?"text-gray-600 fill-gray-600":"text-gray-600"}`}),n.jsx("p",{className:"mx-1 text-sm",children:y})]}),L.isDailyDeal&&n.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-1.5 xs:px-2 py-0.5 xs:py-1 rounded-full text-[10px] xs:text-xs font-bold",children:[L.discountPercentage,"% OFF"]})]}),n.jsxs("div",{className:"flex flex-col justify-between flex-grow p-3 min-w-0 overflow-hidden",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:`mb-1 break-words line-clamp-2 min-h-[48px] ${f}`,title:L.name,style:{fontSize:"15px",fontWeight:600,color:"#222",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:[$(L.name),L.name&&L.name.length<35&&n.jsx("span",{style:{visibility:"hidden"},children:" ".repeat(40)})]}),L.stock<=2&&L.stock>0&&n.jsx("span",{className:"inline-block border border-red-500 text-red-500 text-xs font-semibold px-[5px] py-[2px] rounded-full",children:"Almost Gone"}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[L.condition&&n.jsx("p",{style:{fontSize:"13px",color:"#222",fontWeight:500},className:"mb-2",children:n.jsx("span",{children:L.condition})}),T&&n.jsx("div",{className:"p-[5px] flex items-center justify-center bg-gray-100 rounded-full",children:n.jsx(Q5,{className:"w-4 h-4 text-green-500"})})]}),F&&(X.length>0||G.length>0)&&n.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mb-2 text-xs text-gray-600",children:[X.length>0&&n.jsxs("span",{className:"flex items-center",children:[n.jsx(UN,{size:14,className:"mr-1 text-gray-500"}),X.length," Color",X.length>1?"s":""]}),G.length>0&&n.jsxs("span",{className:"flex items-center",children:[n.jsx(zN,{size:14,className:"mr-1 text-gray-500"}),G.length," Size",G.length>1?"s":""]})]})]}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsx("span",{className:`text-[16px] font-medium text-[#222] flex items-center gap-0.5rem ${h}`,children:n.jsx(lr,{price:L.isDailyDeal?Y:V,currency:L.currency||localStorage.getItem("currency")||"USD"})})}),L.isDailyDeal&&n.jsx("span",{className:"text-gray-400 line-through text-[10px]",style:{fontSize:"10px"},children:n.jsx(lr,{price:O,currency:L.currency||localStorage.getItem("currency")||"USD"})})]})]})]})};function rO(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null),[o,l]=E.useState([]),c=["foremade fashion","smart watches","drinks & categories","health & beauty","game & fun","computers & accessories"],u=h=>{let f=[...h];for(let g=f.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[f[g],f[x]]=[f[x],f[g]]}return f};return E.useEffect(()=>{Ke(_e(J,"dailyDeals")).then(h=>{l(h.docs.map(f=>({id:f.id,...f.data()})))})},[]),E.useEffect(()=>{(async()=>{try{s(!0),i(null);const f=ft(_e(J,"products"),rt("status","==","approved"),rt("category","in",c)),x=(await Ke(f)).docs.map(b=>({id:b.id,...b.data()}));console.log("All fetched products (Featured):",x);const y=x.filter(b=>(b.stock||0)<10?(console.warn("Filtered out product with low stock:",{id:b.id,name:b.name,stock:b.stock}),!1):!0);if(console.log("Fetched products (Featured - After Filter):",y),y.length===0){console.warn("No products passed the filters (Featured). Relaxing stock filter...");const b=u(x).slice(0,8);console.log("Products with relaxed stock filter (Featured):",b),e(b)}else{const b=u(y).slice(0,8);e(b)}}catch(f){console.error("Error loading featured products:",{message:f.message,code:f.code}),i("Failed to load featured products.")}finally{s(!1)}})()},[]),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1",children:a?n.jsx("p",{className:"text-red-600 col-span-full text-center",children:a}):t?n.jsx(n.Fragment,{children:[...Array(5)].map((h,f)=>n.jsx("div",{className:"min-w-[200px] h-[300px] bg-gray-200 animate-pulse rounded-lg"},f))}):r.length===0?n.jsx("p",{className:"text-gray-600 col-span-full text-center",children:"No Product Found"}):r.map(h=>n.jsx(Vr,{product:h,dailyDeals:o},h.id))})}function aO(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null),[o,l]=E.useState([]),c=u=>{let h=[...u];for(let f=h.length-1;f>0;f--){const g=Math.floor(Math.random()*(f+1));[h[f],h[g]]=[h[g],h[f]]}return h};return E.useEffect(()=>{Ke(_e(J,"dailyDeals")).then(u=>{l(u.docs.map(h=>({id:h.id,...h.data()})))})},[]),E.useEffect(()=>{(async()=>{try{s(!0),i(null);const h=ft(_e(J,"products"),rt("status","==","approved")),g=(await Ke(h)).docs.map(y=>({id:y.id,...y.data()}));console.log("All fetched products (Best Selling - Raw Firestore Data):",g);const x=g.filter(y=>{if(y.variants&&y.variants.length>0){const b=y.variants.reduce((v,N)=>v+(N.stock||0),0);if(b<10)return console.warn("Filtered out variant product with low total stock:",{id:y.id,name:y.name,totalStock:b}),!1}else if((y.stock||0)<10)return console.warn("Filtered out single-variant product with low stock:",{id:y.id,name:y.name,stock:y.stock}),!1;return!0}).sort((y,b)=>(b.rating||0)-(y.rating||0));if(console.log("Fetched products (Best Selling - After Filter):",x),x.length===0){console.warn("No products passed the filters (Best Selling). Relaxing stock filter...");const y=c(g.sort((b,v)=>(v.rating||0)-(b.rating||0))).slice(0,8);console.log("Products with relaxed stock filter (Best Selling):",y),e(y)}else{const y=c(x).slice(0,8);e(y)}}catch(h){console.error("Error loading best-selling products:",{message:h.message,code:h.code}),i("Failed to load best-selling products.")}finally{s(!1)}})()},[]),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-1",children:a?n.jsx("p",{className:"text-red-600 col-span-full text-center",children:a}):t?n.jsx(n.Fragment,{children:[...Array(5)].map((u,h)=>n.jsx("div",{className:"min-w-[200px] h-[300px] bg-gray-200 animate-pulse rounded-lg"},h))}):r.length===0?n.jsx("p",{className:"text-gray-600 col-span-full text-center",children:"No best-selling products found."}):r.map(u=>n.jsx(Vr,{product:u,dailyDeals:o},u.id))})}function Mte(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null),[o,l]=E.useState([]);return E.useEffect(()=>{Ke(_e(J,"dailyDeals")).then(c=>{l(c.docs.map(u=>({id:u.id,...u.data()})))})},[]),E.useEffect(()=>{(async()=>{try{s(!0),i(null);const u=ft(_e(J,"products"),jg("createdAt","desc")),f=(await Ke(u)).docs.map(x=>({id:x.id,...x.data()}));console.log("All fetched products (Latest):",f);const g=f.filter(x=>{if(x.variants&&x.variants.length>0){const y=x.variants.reduce((b,v)=>b+(v.stock||0),0);if(y<10)return console.warn("Filtered out variant product with low total stock:",{id:x.id,name:x.name,totalStock:y}),!1}else if((x.stock||0)<10)return console.warn("Filtered out single-variant product with low stock:",{id:x.id,name:x.name,stock:x.stock}),!1;return!0});if(console.log("Fetched products (Latest - After Filter):",g),g.length===0){console.warn("No products passed the filters (Latest). Relaxing stock filter...");const x=f;console.log("Products with relaxed stock filter (Latest):",x),e(x.slice(0,8))}else e(g.slice(0,8))}catch(u){console.error("Error loading latest products:",{message:u.message,code:u.code}),i("Failed to load latest products.")}finally{s(!1)}})()},[]),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1",children:a?n.jsx("p",{className:"text-red-600 col-span-full text-center",children:a}):t?n.jsx(n.Fragment,{children:[...Array(5)].map((c,u)=>n.jsx("div",{className:"min-w-[200px] h-[300px] bg-gray-200 animate-pulse rounded-lg"},u))}):r.length===0?n.jsx("p",{className:"text-gray-600 col-span-full text-center",children:"No Latest Products Found"}):r.map(c=>n.jsx(Vr,{product:c,dailyDeals:o},c.id))})}const Ote=()=>{const[r,e]=E.useState("featured");return n.jsxs("section",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex flex-col items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg text-center sm:text-xl md:text-2xl font-bold text-gray-800 mb-4",children:"Recommended For You"}),n.jsxs("div",{className:"hidden sm:flex items-center justify-center gap-4 sm:gap-6 mb-10",children:[n.jsx("button",{className:`text-sm ${r==="featured"?"text-blue-600 font-semibold":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("featured"),children:"Featured Products"}),n.jsx("button",{className:`text-sm ${r==="bestSelling"?"text-blue-600 font-semibold":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("bestSelling"),children:"Best Selling"}),n.jsx("button",{className:`text-sm ${r==="latest"?"text-blue-600 font-semibold":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("latest"),children:"Latest Products"}),n.jsx(he,{to:"/products",className:"text-blue-600 text-sm hover:underline",children:"View All"})]}),n.jsxs("div",{className:"flex sm:hidden items-center justify-center gap-4 mb-10",children:[n.jsx("button",{className:`text-xl ${r==="featured"?"text-blue-600":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("featured"),children:n.jsx("i",{className:"bx bx-star"})}),n.jsx("button",{className:`text-xl ${r==="bestSelling"?"text-blue-600":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("bestSelling"),children:n.jsx("i",{className:"bx bxs-hot"})}),n.jsx("button",{className:`text-xl ${r==="latest"?"text-blue-600":"text-gray-600"} hover:text-blue-600`,onClick:()=>e("latest"),children:n.jsx("i",{className:"bx bx-time"})}),n.jsx(he,{to:"/products",className:"text-blue-600 text-xl hover:text-blue-600",children:n.jsx("i",{className:"bx bx-right-arrow-alt"})})]})]}),r==="featured"&&n.jsx(rO,{}),r==="bestSelling"&&n.jsx(aO,{}),r==="latest"&&n.jsx(Mte,{})]})};function Lte(){const[r,e]=E.useState([]),[t,s]=E.useState([]),[a,i]=E.useState(!0),[o,l]=E.useState(null),c=E.useRef(null),u="Fashion",h=["foremade fashion","clothing","accessories","footwear","jewelry","bags & wallets"],f=b=>{let v=[...b];for(let N=v.length-1;N>0;N--){const k=Math.floor(Math.random()*(N+1));[v[N],v[k]]=[v[k],v[N]]}return v},g=async()=>{try{i(!0),l(null);const b=ft(_e(J,"trendingItems"),rt("category","==",u)),N=(await Ke(b)).docs.map(A=>A.data());let k=[];if(N.length>0){const A=N.map(async R=>{const _=await it(Ne(J,"products",R.productId));return _.exists()?{id:_.id,..._.data()}:null});k=(await Promise.all(A)).filter(R=>R&&R.status==="approved").slice(0,10),console.log("Admin-selected trending Fashion products:",k)}if(k.length<10){console.warn("No or insufficient admin-selected trending items for Fashion. Using fallback...");const A=ft(_e(J,"products"),rt("status","==","approved"),rt("category","in",h)),_=(await Ke(A)).docs.map(P=>({id:P.id,...P.data()}));console.log("All fetched products (Trending Fashion):",_);const I=_.filter(P=>(P.stock||0)>=10).sort((P,T)=>(T.rating||0)-(P.rating||0));if(console.log(`Fetched ${u} products:`,I),I.length===0){console.warn("No products passed the filters (Trending Fashion). Relaxing stock filter...");const P=f(_.sort((T,D)=>(D.rating||0)-(T.rating||0))).slice(0,10);console.log("Products with relaxed stock filter (Trending Fashion):",P),e(P)}else{const P=[...k,...I].slice(0,10),T=f(P);e(T)}}else e(f(k))}catch(b){console.error("Error loading products:",{message:b.message,code:b.code}),l("Failed to load products."),xe.error("Failed to load trending products.")}finally{i(!1)}};E.useEffect(()=>{g(),Ke(_e(J,"dailyDeals")).then(b=>{s(b.docs.map(v=>({id:v.id,...v.data()})))})},[]);const x=()=>{c.current&&c.current.scrollBy({left:-240,behavior:"smooth"})},y=()=>{c.current&&c.current.scrollBy({left:240,behavior:"smooth"})};return a?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",u]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"})]})]}),n.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[...Array(7)].map((b,v)=>n.jsx("div",{className:"flex-shrink-0 w-60 mr-4",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},v))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",u]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(he,{to:"/trending-fashions",className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"}),n.jsx("button",{onClick:x,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:n.jsx("i",{className:"bx bx-chevron-left text-xl text-gray-600"})}),n.jsx("button",{onClick:y,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:n.jsx("i",{className:"bx bx-chevron-right text-xl text-gray-600"})})]})]}),n.jsx("div",{ref:c,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory",children:r.length===0?n.jsxs("p",{className:"text-gray-600 p-4",children:["No ",u," products found."]}):r.map(b=>n.jsx("div",{className:"flex-shrink-0 w-60 mr-4 snap-start",children:n.jsx(Vr,{product:b,dailyDeals:t})},b.id))})]})})}function Fte(){const[r,e]=E.useState([]),[t,s]=E.useState([]),[a,i]=E.useState(!0),[o,l]=E.useState(null),c=E.useRef(null),u="Gadgets",h=["tablet & phones","computers & accessories","electronics","smart watches","game & fun"],f=b=>{let v=[...b];for(let N=v.length-1;N>0;N--){const k=Math.floor(Math.random()*(N+1));[v[N],v[k]]=[v[k],v[N]]}return v},g=async()=>{try{i(!0),l(null);const b=ft(_e(J,"trendingItems"),rt("category","==",u)),N=(await Ke(b)).docs.map(A=>A.data());let k=[];if(N.length>0){const A=N.map(async R=>{const _=await it(Ne(J,"products",R.productId));return _.exists()?{id:_.id,..._.data()}:null});k=(await Promise.all(A)).filter(R=>R&&R.status==="approved").slice(0,10),console.log("Admin-selected trending Gadgets products:",k)}if(k.length<10){console.warn("No or insufficient admin-selected trending items for Gadgets. Using fallback...");const A=ft(_e(J,"products"),rt("status","==","approved"),rt("category","in",h)),_=(await Ke(A)).docs.map(P=>({id:P.id,...P.data()}));console.log("All fetched products (Gadgets):",_);const I=_.filter(P=>(P.stock||0)>=10).sort((P,T)=>(T.rating||0)-(P.rating||0));if(console.log(`Fetched ${u} products:`,I),I.length===0){console.warn("No products passed the filters (Gadgets). Relaxing stock filter...");const P=f(_.sort((T,D)=>(D.rating||0)-(T.rating||0))).slice(0,10);console.log("Products with relaxed stock filter (Gadgets):",P),e(P)}else{const P=[...k,...I].slice(0,10),T=f(P);e(T)}}else e(f(k))}catch(b){console.error(`Error loading ${u} products:`,{message:b.message,code:b.code}),l(`Failed to load ${u} products.`),xe.error("Failed to load trending products.")}finally{i(!1)}};E.useEffect(()=>{g(),Ke(_e(J,"dailyDeals")).then(b=>{s(b.docs.map(v=>({id:v.id,...v.data()})))})},[]);const x=()=>{c.current&&c.current.scrollBy({left:-240,behavior:"smooth"})},y=()=>{c.current&&c.current.scrollBy({left:240,behavior:"smooth"})};return a?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",u]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 sm:hidden"})]})]}),n.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[...Array(7)].map((b,v)=>n.jsx("div",{className:"flex-shrink-0 w-60 mr-4",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},v))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending in ",u]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(he,{to:"/trending-gadgets",className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"}),n.jsx("button",{onClick:x,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:n.jsx("i",{className:"bx bx-chevron-left text-xl text-gray-600"})}),n.jsx("button",{onClick:y,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300",children:n.jsx("i",{className:"bx bx-chevron-right text-xl text-gray-600"})})]})]}),n.jsx("div",{ref:c,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory",children:r.length===0?n.jsxs("p",{className:"text-gray-600 p-4",children:["No trending ",u," products found."]}):r.map(b=>n.jsx("div",{className:"flex-shrink-0 w-60 mr-4 snap-start",children:n.jsx(Vr,{product:b,dailyDeals:t})},b.id))})]})})}const Ute=()=>{const r=us(),e=Br();return window.scrollTo(0,0),E.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e.pathname]),n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-purple-600 via-indigo-600 to-purple-700 py-6 px-4 sm:py-8 sm:px-6 lg:px-8 my-4 sm:my-6 rounded-xl sm:rounded-2xl mx-2 sm:mx-4 shadow-lg",children:[n.jsxs("div",{className:"absolute inset-0 opacity-10",children:[n.jsx("div",{className:"absolute top-0 left-0 w-48 sm:w-72 h-48 sm:h-72 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),n.jsx("div",{className:"absolute top-0 right-0 w-48 sm:w-72 h-48 sm:h-72 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),n.jsx("div",{className:"absolute -bottom-8 left-20 w-48 sm:w-72 h-48 sm:h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"})]}),n.jsx("div",{className:"absolute top-8 left-8 w-1.5 h-1.5 bg-purple-200 rounded-full animate-ping opacity-50"}),n.jsx("div",{className:"absolute top-16 right-12 w-1 h-1 bg-indigo-200 rounded-full animate-ping opacity-50 animation-delay-1000"}),n.jsx("div",{className:"absolute bottom-12 left-16 w-1 h-1 bg-purple-200 rounded-full animate-ping opacity-50 animation-delay-3000"}),n.jsx("div",{className:"relative max-w-6xl mx-auto",children:n.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6 sm:gap-8",children:[n.jsxs("div",{className:"flex-1 text-center lg:text-left",children:[n.jsx("div",{className:"mb-3 sm:mb-4",children:n.jsxs("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-2 text-white leading-tight flex flex-wrap items-center justify-center lg:justify-start",children:[n.jsx("i",{className:"bx bx-rocket text-xl sm:text-2xl text-purple-200 mr-2 sm:mr-3"}),n.jsx("span",{className:"whitespace-nowrap",children:"Foremade Youth"}),n.jsx("span",{className:"ml-2 bg-gradient-to-r from-purple-200 to-indigo-200 bg-clip-text text-transparent whitespace-nowrap",children:"Empowerment Hub"})]})}),n.jsxs("p",{className:"text-sm sm:text-base md:text-lg mb-4 sm:mb-6 text-purple-100 leading-relaxed px-2 sm:px-0",children:["Join our community of young creators and entrepreneurs. Get funding, mentorship, and a ",n.jsx("span",{className:"font-medium text-purple-200",children:"free platform"})," to showcase your talents."]}),n.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start gap-2 sm:gap-4 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 bg-white bg-opacity-5 px-3 py-1 rounded-full backdrop-blur-sm text-xs sm:text-sm",children:[n.jsx("i",{className:"bx bx-dollar-circle text-purple-200"}),n.jsx("span",{className:"text-white font-medium",children:"Funding"})]}),n.jsxs("div",{className:"flex items-center space-x-2 bg-white bg-opacity-5 px-3 py-1 rounded-full backdrop-blur-sm text-xs sm:text-sm",children:[n.jsx("i",{className:"bx bx-user-voice text-purple-200"}),n.jsx("span",{className:"text-white font-medium",children:"Mentorship"})]}),n.jsxs("div",{className:"flex items-center space-x-2 bg-white bg-opacity-5 px-3 py-1 rounded-full backdrop-blur-sm text-xs sm:text-sm",children:[n.jsx("i",{className:"bx bx-devices text-purple-200"}),n.jsx("span",{className:"text-white font-medium",children:"Free Platform"})]})]})]}),n.jsxs("div",{className:"flex flex-col w-full sm:w-auto sm:flex-row lg:flex-col gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>r("/empowerment-hub"),className:"w-full sm:w-auto group inline-flex items-center justify-center px-4 sm:px-6 py-2 sm:py-3 text-sm sm:text-base font-medium rounded-full text-white border border-purple-200 hover:bg-white hover:text-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-200 focus:ring-opacity-50 transition-all duration-200 transform hover:scale-105 backdrop-blur-sm whitespace-nowrap",children:[n.jsx("i",{className:"bx bx-info-circle mr-2"}),n.jsx("span",{children:"Learn More"}),n.jsx("i",{className:"bx bx-chevron-right ml-1 group-hover:translate-x-1 transition-transform duration-200"})]}),n.jsxs("div",{className:"flex items-center justify-center lg:justify-start mt-2 text-xs text-purple-200",children:[n.jsx("i",{className:"bx bx-group mr-1"}),n.jsx("span",{children:"1000+ members"}),n.jsx("div",{className:"flex ml-2",children:[...Array(5)].map((t,s)=>n.jsx("i",{className:"bx bxs-star text-purple-200 text-xs"},s))}),n.jsx("span",{className:"ml-1",children:"4.9"})]})]})]})})]})},oR=async(r,e=3,t=1e3)=>{for(let s=1;s<=e;s++)try{return await r()}catch(a){if(s===e)throw a;const i=t*Math.pow(2,s-1);console.warn(`Retry ${s}/${e} after ${i}ms due to: ${a.message}`),await new Promise(o=>setTimeout(o,i))}},lR="https://via.placeholder.com/200?text=No+Image",zte=()=>{const{convertPrice:r}=Eg(),[e,t]=E.useState([]),[s,a]=E.useState(!0),[i,o]=E.useState(null),l=E.useRef(null),[c,u]=E.useState({hours:0,minutes:0,seconds:0});E.useEffect(()=>{const g=()=>{const y=new Date,b=new Date;b.setHours(23,59,59,999);const v=b-y,N=Math.floor(v/(1e3*60*60)),k=Math.floor(v%(1e3*60*60)/(1e3*60)),A=Math.floor(v%(1e3*60)/1e3);u({hours:N,minutes:k,seconds:A})};g();const x=setInterval(g,1e3);return()=>clearInterval(x)},[]),E.useEffect(()=>{(async()=>{try{a(!0),o(null);const y=(await oR(()=>Ke(_e(J,"dailyDeals")))).docs.map(N=>({id:N.id,...N.data()}));console.log("Raw deals:",y);const b=y.filter(N=>new Date(N.endDate)>new Date&&new Date(N.startDate)<=new Date);console.log("Valid deals:",b);const v=await Promise.all(b.map(async N=>{const k=await oR(()=>it(Ne(J,"products",N.productId))),A=k.exists()?k.data():{};console.log(`Product for deal ${N.id}:`,A);const R=Array.isArray(A.imageUrls)&&A.imageUrls.length>0?A.imageUrls.find(P=>typeof P=="string"&&P.startsWith("https://res.cloudinary.com/"))||lR:A.imageUrl&&typeof A.imageUrl=="string"&&A.imageUrl.startsWith("https://res.cloudinary.com/")?A.imageUrl:lR;console.log(`Image for deal ${N.id}:`,R);const _=Number(A.price)||0,I=Number((N.discount*100).toFixed(2))||0;return{id:N.id,productId:N.productId,productName:A.name||"Unnamed Product",price:_,discountPercentage:I,imageUrl:R,description:A.description||"No description available",condition:A.condition||"",isDailyDeal:!0}}));console.log("Final deal products:",v),t(v)}catch(x){console.error("Error loading daily deals:",{message:x.message,stack:x.stack}),o("Failed to load daily deals. Please try again later.")}finally{a(!1)}})()},[r]);const h=()=>{l.current&&l.current.scrollBy({left:-240,behavior:"smooth"})},f=()=>{l.current&&l.current.scrollBy({left:240,behavior:"smooth"})};return s?n.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[n.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),n.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"}),n.jsxs("div",{className:"flex ml-2 xs:ml-3 space-x-1 xs:space-x-2",children:[n.jsx("div",{className:"h-5 xs:h-6 bg-gray-200 rounded w-8 xs:w-10 animate-pulse"}),n.jsx("span",{children:":"}),n.jsx("div",{className:"h-5 xs:h-6 bg-gray-200 rounded w-8 xs:w-10 animate-pulse"}),n.jsx("span",{children:":"}),n.jsx("div",{className:"h-5 xs:h-6 bg-gray-200 rounded w-8 xs:w-10 animate-pulse"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[n.jsx("div",{className:"h-4 xs:h-5 bg-gray-200 rounded w-12 xs:w-16 animate-pulse"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-6 w-6 xs:h-8 xs:w-8 animate-pulse"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-6 w-6 xs:h-8 xs:w-8 animate-pulse"})]})]}),n.jsx("div",{className:"flex overflow-x-auto scrollbar-hide gap-3 xs:gap-4",children:[...Array(7)].map((g,x)=>n.jsx("div",{className:"flex-shrink-0 w-[140px] xs:w-[180px] sm:w-[200px] md:w-[220px]",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-[200px] xs:h-[240px] sm:h-[260px] w-full animate-pulse"})},x))})]})}):i?n.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsx("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:n.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[n.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),n.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"})]})}),n.jsxs("p",{className:"text-red-600 text-sm xs:text-base p-3 xs:p-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-error-circle"}),i]})]})}):n.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[n.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),n.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"}),n.jsxs("div",{className:"ml-2 xs:ml-3 flex items-center space-x-1",children:[n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-1.5 xs:px-2 py-0.5 xs:py-1 rounded text-xs xs:text-sm font-mono",children:String(c.hours).padStart(2,"0")}),n.jsx("span",{className:"text-yellow-800",children:":"}),n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-1.5 xs:px-2 py-0.5 xs:py-1 rounded text-xs xs:text-sm font-mono",children:String(c.minutes).padStart(2,"0")}),n.jsx("span",{className:"text-yellow-800",children:":"}),n.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-1.5 xs:px-2 py-0.5 xs:py-1 rounded text-xs xs:text-sm font-mono",children:String(c.seconds).padStart(2,"0")})]})]}),n.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[n.jsx(he,{to:"/daily-deals",className:"text-blue-600 text-xs xs:text-sm hover:text-blue-800",children:"See All"}),n.jsx("button",{onClick:h,className:"bg-yellow-200 rounded-full p-1 hover:bg-yellow-300","aria-label":"Scroll left",children:n.jsx("i",{className:"bx bx-chevron-left text-lg xs:text-xl text-yellow-700"})}),n.jsx("button",{onClick:f,className:"bg-yellow-200 rounded-full p-1 hover:bg-yellow-300","aria-label":"Scroll right",children:n.jsx("i",{className:"bx bx-chevron-right text-lg xs:text-xl text-yellow-700"})})]})]}),n.jsx("div",{ref:l,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory gap-3 xs:gap-4",children:e.length===0?n.jsxs("p",{className:"text-gray-600 text-sm xs:text-base p-3 xs:p-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-info-circle"}),"No deals available right now. Check back later for hot offers! 🔥"]}):e.slice(0,8).map(g=>n.jsx("div",{className:"flex-shrink-0 w-[200px] sm:w-[280px] md:w-[220px] snap-start",children:n.jsxs("div",{className:"relative",children:[n.jsx(Vr,{product:{id:g.productId,name:g.productName,price:g.price,imageUrl:g.imageUrl,condition:g.condition,category:g.category||"default",variants:g.variants||[],stock:g.stock||0,sellerId:g.sellerId||"",currency:localStorage.getItem("currency")||"USD",isDailyDeal:g.isDailyDeal,discountPercentage:g.discountPercentage}}),g.isDailyDeal&&n.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-1.5 xs:px-2 py-0.5 xs:py-1 rounded-full text-[10px] xs:text-xs font-bold",children:[g.discountPercentage,"% OFF"]})]})},g.id))})]})})};function Vte(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null),[o,l]=E.useState([]),c=E.useRef(null);E.useEffect(()=>{Ke(_e(J,"dailyDeals")).then(g=>{l(g.docs.map(x=>({id:x.id,...x.data()})))})},[]),E.useEffect(()=>{(async()=>{try{s(!0),i(null);const x=ve.currentUser?.uid,y=JSON.parse(localStorage.getItem("recentlyViewed")||"[]");let b=[];if(x)try{const v=Ne(J,"users",x),N=await it(v);if(N.exists()&&N.data().recentlyViewed){const A=N.data().recentlyViewed.slice(0,10).map(async _=>{const I=Ne(J,"products",_),P=await it(I);return P.exists()&&P.data().status==="approved"?{id:P.id,...P.data()}:null});b=(await Promise.all(A)).filter(_=>_!==null)}}catch(v){console.error("Error fetching user recently viewed:",v),b=[]}if(b.length===0&&y.length>0){const v=y.map(async k=>{const A=Ne(J,"products",k),R=await it(A);return R.exists()&&R.data().status==="approved"?{id:R.id,...R.data()}:null});b=(await Promise.all(v)).filter(k=>k!==null)}if(b.length===0){const v=ft(_e(J,"products"),rt("status","==","approved"),rt("rating",">=",4));b=(await Ke(v)).docs.map(k=>({id:k.id,...k.data()})).slice(0,10),console.log("No recently viewed products, showing recommendations instead")}e(b)}catch(x){console.error("Error loading recently viewed products:",{message:x.message,code:x.code}),i("Failed to load recently viewed products.")}finally{s(!1)}})()},[]);const u=()=>{c.current&&c.current.scrollBy({left:-240,behavior:"smooth"})},h=()=>{c.current&&c.current.scrollBy({left:240,behavior:"smooth"})},f=r.length>0?"Recently Viewed":"Recommended For You";return t?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:f}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16 animate-pulse"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 animate-pulse"}),n.jsx("div",{className:"bg-gray-200 rounded-full p-1 h-8 w-8 animate-pulse"})]})]}),n.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[...Array(7)].map((g,x)=>n.jsxs("div",{className:"flex-shrink-0 w-48 mr-4",children:[n.jsx("div",{className:"bg-gray-200 rounded-lg h-48 w-full animate-pulse"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mt-2 animate-pulse"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mt-1 animate-pulse"})]},x))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:`bx ${f==="Recently Viewed"?"bx-history":"bx-bulb"} text-blue-600 text-xl mr-2`}),n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:f})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(he,{to:"/products",className:"text-blue-600 text-sm hover:text-blue-800",children:"See All"}),n.jsx("button",{onClick:u,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300","aria-label":"Scroll left",children:n.jsx("i",{className:"bx bx-chevron-left text-xl text-gray-600"})}),n.jsx("button",{onClick:h,className:"bg-gray-200 rounded-full p-1 hover:bg-gray-300","aria-label":"Scroll right",children:n.jsx("i",{className:"bx bx-chevron-right text-xl text-gray-600"})})]})]}),n.jsx("div",{ref:c,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory pb-4",children:r.length===0?n.jsx("p",{className:"text-gray-600 p-4",children:"No products to display."}):r.map(g=>n.jsx("div",{className:"flex-shrink-0 w-48 mr-4 snap-start",children:n.jsx(Vr,{product:g,dailyDeals:o})},g.id))})]})})}const Bte=()=>{const[r,e]=E.useState(""),[t,s]=E.useState(!1),a=async o=>{if(o.preventDefault(),!r||!r.includes("@")){xe.error("Please enter a valid email address");return}try{s(!0),await Za(_e(J,"newsletter_subscribers"),{email:r,subscribedAt:new Date,active:!0}),xe.success("Thanks for subscribing!"),e(""),localStorage.setItem("newsletter_subscribed","true")}catch(l){console.error("Newsletter subscription error:",l),xe.error("Failed to subscribe. Please try again.")}finally{s(!1)}},i=localStorage.getItem("newsletter_subscribed")==="true";return n.jsx("div",{className:"bg-gray-100 py-6 sm:py-8 w-full overflow-hidden mb-8 sm:mb-12 lg:mb-16",children:n.jsx("div",{className:"container mx-auto px-4 max-w-7xl",children:n.jsxs("div",{className:"max-w-xl mx-auto text-center",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2",children:"Stay Connected"}),n.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 px-2",children:i?"Thanks for subscribing! You'll receive our best deals and updates.":"Subscribe to our newsletter for exclusive deals and updates"}),!i&&n.jsxs("form",{onSubmit:a,className:"flex flex-col sm:flex-row gap-2 sm:gap-0 max-w-md mx-auto mb-8 sm:mb-12 px-4",children:[n.jsx("input",{type:"email",value:r,onChange:o=>e(o.target.value),placeholder:"Your email address",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md sm:rounded-l-md sm:rounded-r-none focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",disabled:t,required:!0}),n.jsx("button",{type:"submit",className:`${t?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded-md sm:rounded-l-none sm:rounded-r-md transition-colors whitespace-nowrap w-full sm:w-auto`,disabled:t,children:t?n.jsxs("span",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-loader-alt animate-spin mr-2"}),"Subscribing..."]}):"Subscribe"})]}),i&&n.jsx("button",{onClick:()=>{localStorage.removeItem("newsletter_subscribed"),window.location.reload()},className:"text-blue-600 hover:text-blue-800 underline text-sm mt-2",children:"Change your email preferences"})]})})})},Hte=r=>r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),$te={Shoes:"footwear",Fashion:"clothing",Phones:"Computers",Laptops:"Computers",Gaming:"game-console",Kitchen:"home-living"},Wte=r=>`/category/${$te[r]||Hte(r)}`,Yte=["Shoes","Fashion","Phones","Laptops","Watches","Gaming","Kitchen","Electronics"],qte={Shoes:"https://banner2.cleanpng.com/20180406/wow/kisspng-shoe-jumpman-sneakers-air-jordan-teal-jordan-5ac6ff9c2fcfe2.7959868915229910041959.jpg",Fashion:"https://pngimg.com/uploads/dress_shirt/dress_shirt_PNG8088.png",Phones:"https://banner2.cleanpng.com/20240415/cv/transparent-apple-logo-person-holding-iphone-11-pro-max661df755177ea1.73458741.webp",Laptops:"https://banner2.cleanpng.com/lnd/20240424/uxz/transparent-rainbow-open-laptop-with-rainbow-gradient-background-image662945f170dc49.58708681.webp",Watches:"https://banner2.cleanpng.com/20180202/lie/av2ldq3r4.webp",Gaming:"https://banner2.cleanpng.com/lnd/20240424/jfa/aav33rgh3.webp",Kitchen:"https://banner2.cleanpng.com/20180809/atv/kisspng-ferm-living-asymmetric-cutting-board-ferm-living-b-5b6c3d78edff15.1714747115338202809749.jpg",Electronics:"https://banner2.cleanpng.com/20180131/jgw/av1z4nree.webp"},cR=["from-red-500/10 to-red-500/5","from-blue-500/10 to-blue-500/5","from-green-500/10 to-green-500/5","from-yellow-500/10 to-yellow-500/5","from-purple-500/10 to-purple-500/5","from-pink-500/10 to-pink-500/5","from-indigo-500/10 to-indigo-500/5","from-orange-500/10 to-orange-500/5"],dR=["hover:bg-red-500/10","hover:bg-blue-500/10","hover:bg-green-500/10","hover:bg-yellow-500/10","hover:bg-purple-500/10","hover:bg-pink-500/10","hover:bg-indigo-500/10","hover:bg-orange-500/10"],Xte=()=>{const[r,e]=E.useState(null);return n.jsxs("div",{className:"container mx-auto px-4 py-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Shop by Category"}),n.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4",children:Yte.map((t,s)=>n.jsxs(he,{to:Wte(t),className:"text-center group",onMouseEnter:()=>e(s),onMouseLeave:()=>e(null),children:[n.jsxs(Ze.div,{className:`rounded-lg overflow-hidden relative bg-gradient-to-b ${cR[s%cR.length]} ${dR[s%dR.length]} transition-all duration-300 h-20 w-full flex items-center justify-center group-hover:shadow-md`,initial:{y:0},animate:{y:r===s?-5:0,scale:r===s?1.05:1},transition:{type:"spring",stiffness:300,damping:15},children:[n.jsx(Ze.img,{src:qte[t]||"https://via.placeholder.com/48",alt:t,className:"w-12 h-12 object-contain",animate:{scale:r===s?1.1:1,rotate:r===s?5:0},transition:{type:"spring",stiffness:200,damping:10}}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"})]}),n.jsx(Ze.p,{className:"text-xs md:text-sm text-gray-800 mt-2 font-medium",animate:{fontWeight:r===s?600:500,color:r===s?"#3B82F6":"#1F2937"},children:t})]},t))})]})},Gte=()=>{const[r,e]=E.useState(!1),[t,s]=E.useState([]),[a,i]=E.useState({}),[o,l]=E.useState({}),[c,u]=E.useState("");return E.useEffect(()=>{localStorage.getItem("hasVisitedBefore")||(e(!0),localStorage.setItem("hasVisitedBefore","true"))},[]),E.useEffect(()=>{const h=os(_e(J,"categories"),x=>{console.log("🏷️ CATEGORIES SNAPSHOT:"),console.log("Categories docs count:",x.docs.length),x.docs.forEach((b,v)=>{console.log(`Category ${v+1}:`,{id:b.id,data:b.data()})});const y=x.docs.map(b=>b.data().name);console.log("Extracted category names:",y),s(y)}),f=os(_e(J,"customSubcategories"),x=>{console.log("🔖 CUSTOM SUBCATEGORIES SNAPSHOT:"),console.log("CustomSubcategories docs count:",x.docs.length);const y={};x.forEach((b,v)=>{console.log(`CustomSubcategory ${v+1}:`,{id:b.id,data:b.data(),subcategories:b.data().subcategories||[]}),y[b.id]=b.data().subcategories||[]}),console.log("Final customSubcategories structure:",y),i(y)}),g=os(_e(J,"customSubSubcategories"),x=>{console.log("🏗️ CUSTOM SUB-SUBCATEGORIES SNAPSHOT:"),console.log("CustomSubSubcategories docs count:",x.docs.length);const y={};x.forEach((b,v)=>{console.log(`CustomSubSubcategory ${v+1}:`,{id:b.id,data:b.data()});const N=b.id;y[N]={},Object.entries(b.data()).forEach(([k,A])=>{console.log(`  └─ ${k}:`,A),y[N][k]=A})}),console.log("Final customSubSubcategories structure:",y),l(y)});return()=>{h(),f(),g()}},[]),E.useEffect(()=>{console.log("📊 STATE UPDATE - Categories:",t)},[t]),E.useEffect(()=>{console.log("📊 STATE UPDATE - CustomSubcategories:",a)},[a]),E.useEffect(()=>{console.log("📊 STATE UPDATE - CustomSubSubcategories:",o)},[o]),n.jsxs("div",{className:"home-main-container bg-background-light",children:[n.jsx(Ete,{}),r&&n.jsx("div",{className:"welcome-banner",children:n.jsxs("div",{className:"container mx-auto flex items-center justify-between px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-primary text-base sm:text-lg",children:"Welcome to Foremade!"}),n.jsx("p",{className:"text-sm sm:text-base text-secondary",children:"Discover amazing deals from trusted sellers"})]}),n.jsx("button",{onClick:()=>e(!1),className:"text-primary hover:text-primary-dark",children:n.jsx("i",{className:"bx bx-x text-xl sm:text-2xl"})})]})}),n.jsx(Pte,{}),n.jsx(Xte,{}),n.jsx(Ote,{}),n.jsx(zte,{}),n.jsx(Fte,{}),n.jsx(Lte,{}),n.jsx(Ite,{}),n.jsx(Vte,{}),n.jsx(Ute,{}),n.jsx(Cte,{}),n.jsx("div",{className:"my-8 px-2 sm:px-4 lg:px-8",children:n.jsx(rO,{})}),n.jsx(Dte,{}),n.jsx(Bte,{}),n.jsx("div",{className:"footer-bar py-6 sm:py-8 bg-background-light border-t border-gray-200",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl",children:n.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-4 text-xs sm:text-sm md:text-base text-secondary",children:[n.jsx(he,{to:"/user-agreement",className:"footer-link px-3 py-2 hover:text-primary transition-colors min-w-[100px] text-center",children:"User Agreement"}),n.jsx(he,{to:"/privacy-policy",className:"footer-link px-3 py-2 hover:text-primary transition-colors min-w-[100px] text-center",children:"Privacy Policy"}),n.jsx("span",{className:"footer-separator hidden sm:inline",children:"|"}),n.jsx(he,{to:"/terms-conditions",className:"footer-link px-3 py-2 hover:text-primary transition-colors min-w-[100px] text-center",children:"Terms & Conditions"}),n.jsx("span",{className:"footer-separator hidden sm:inline",children:"|"})]})})})]})},Kte=()=>{const[r,e]=E.useState([]),[t,s]=E.useState([]),[a,i]=E.useState([]),[o,l]=E.useState(!0),c=h=>{let f=[...h];for(let g=f.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[f[g],f[x]]=[f[x],f[g]]}return f};E.useEffect(()=>{(async()=>{try{const g=(await Ke(_e(J,"products"))).docs.map(b=>({id:b.id,...b.data()}));e(g),i(c(g));const y=(await Ke(_e(J,"dailyDeals"))).docs.map(b=>({id:b.id,...b.data()}));s(y)}catch(f){console.error("Error fetching data:",f)}finally{l(!1)}})()},[]);const u=({count:h})=>n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:Array.from({length:h}).map((f,g)=>n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 h-[300px] flex flex-col animate-pulse",children:[n.jsx("div",{className:"h-[200px] bg-gray-200 rounded-t-lg"}),n.jsxs("div",{className:"p-3 flex flex-col flex-grow",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded mt-auto"})]})]},g))});return n.jsx("div",{className:"container mx-auto px-4 py-8",children:o?n.jsx(u,{count:8}):a.length===0?n.jsxs("div",{className:"text-center col-span-full py-12",role:"alert","aria-label":"No products found",children:[n.jsx("p",{className:"text-gray-600 text-lg",children:"No products available."}),n.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Please check back later."})]}):n.jsx("div",{children:n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-4",role:"grid","aria-label":"Product list",children:a.map(h=>n.jsx(Vr,{product:h,dailyDeals:t},h.id))})})})};var qw,uR;function Qte(){if(uR)return qw;uR=1;var r="Expected a function",e=NaN,t="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof nx=="object"&&nx&&nx.Object===Object&&nx,u=typeof self=="object"&&self&&self.Object===Object&&self,h=c||u||Function("return this")(),f=Object.prototype,g=f.toString,x=Math.max,y=Math.min,b=function(){return h.Date.now()};function v(_,I,P){var T,D,L,F,z,O,V=0,Y=!1,H=!1,$=!0;if(typeof _!="function")throw new TypeError(r);I=R(I)||0,N(P)&&(Y=!!P.leading,H="maxWait"in P,L=H?x(R(P.maxWait)||0,I):L,$="trailing"in P?!!P.trailing:$);function X(Oe){var Pe=T,Ie=D;return T=D=void 0,V=Oe,F=_.apply(Ie,Pe),F}function G(Oe){return V=Oe,z=setTimeout(ee,I),Y?X(Oe):F}function B(Oe){var Pe=Oe-O,Ie=Oe-V,ie=I-Pe;return H?y(ie,L-Ie):ie}function Q(Oe){var Pe=Oe-O,Ie=Oe-V;return O===void 0||Pe>=I||Pe<0||H&&Ie>=L}function ee(){var Oe=b();if(Q(Oe))return se(Oe);z=setTimeout(ee,B(Oe))}function se(Oe){return z=void 0,$&&T?X(Oe):(T=D=void 0,F)}function le(){z!==void 0&&clearTimeout(z),V=0,T=O=D=z=void 0}function Ee(){return z===void 0?F:se(b())}function ue(){var Oe=b(),Pe=Q(Oe);if(T=arguments,D=this,O=Oe,Pe){if(z===void 0)return G(O);if(H)return z=setTimeout(ee,I),X(O)}return z===void 0&&(z=setTimeout(ee,I)),F}return ue.cancel=le,ue.flush=Ee,ue}function N(_){var I=typeof _;return!!_&&(I=="object"||I=="function")}function k(_){return!!_&&typeof _=="object"}function A(_){return typeof _=="symbol"||k(_)&&g.call(_)==t}function R(_){if(typeof _=="number")return _;if(A(_))return e;if(N(_)){var I=typeof _.valueOf=="function"?_.valueOf():_;_=N(I)?I+"":I}if(typeof _!="string")return _===0?_:+_;_=_.replace(s,"");var P=i.test(_);return P||o.test(_)?l(_.slice(2),P?2:8):a.test(_)?e:+_}return qw=v,qw}var Zte=Qte();const Sd=mb(Zte),Jte=({onFilterChange:r})=>{const[e,t]=E.useState([0,1e5]),[s,a]=E.useState([]),[i,o]=E.useState("default"),[l,c]=E.useState(""),[u,h]=E.useState([]),[f,g]=E.useState(!0),[x,y]=E.useState(!1);E.useEffect(()=>{(async()=>{try{g(!0);const P=(await Ke(_e(J,"categories"))).docs.map(T=>({id:T.id,name:T.data().name||"Unnamed Category"}));h(P)}catch(I){console.error("Error fetching categories:",I)}finally{g(!1)}})()},[]);const b=E.useCallback(Sd(_=>{console.log("Applying filters:",{priceRange:e,selectedCategories:s,sortOption:i,searchTerm:_,status:"approved"}),r({priceRange:e,selectedCategories:s,sortOption:i,searchTerm:_,status:"approved"})},300),[e,s,i]),v=_=>{const I=_.target.value;c(I),b(I)},N=_=>{const[I,P]=_;I>P||(t(_),console.log("Price range updated:",_),r({priceRange:_,selectedCategories:s,sortOption:i,searchTerm:l,status:"approved"}))},k=_=>{const I=s.includes(_)?s.filter(P=>P!==_):[...s,_];a(I),console.log("Selected categories updated:",I),r({priceRange:e,selectedCategories:I,sortOption:i,searchTerm:l,status:"approved"})},A=_=>{const I=_.target.value;o(I),console.log("Sort option updated:",I),r({priceRange:e,selectedCategories:s,sortOption:I,searchTerm:l,status:"approved"})},R=()=>{t([0,1e5]),a([]),o("default"),c(""),console.log("Filters cleared"),r({priceRange:[0,1e5],selectedCategories:[],sortOption:"default",searchTerm:"",status:"approved"})};return n.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm md:sticky md:top-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filters"}),n.jsx("button",{onClick:R,className:"text-sm text-blue-600 hover:text-blue-800 transition","aria-label":"Clear all filters",children:"Clear All"})]}),n.jsx("div",{className:"mb-6",children:n.jsx("input",{type:"text",placeholder:"Search products...",value:l,onChange:v,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm","aria-label":"Search products"})}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price Range: ",n.jsx(lr,{price:e[0]})," - ",n.jsx(lr,{price:e[1]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("input",{type:"range",min:"0",max:"100000",value:e[0],onChange:_=>N([parseInt(_.target.value),e[1]]),className:"w-full accent-blue-500","aria-label":"Minimum price"}),n.jsx("input",{type:"range",min:"0",max:"100000",value:e[1],onChange:_=>N([e[0],parseInt(_.target.value)]),className:"w-full accent-blue-500","aria-label":"Maximum price"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Categories"}),n.jsx("button",{className:"md:hidden text-blue-600 text-sm",onClick:()=>y(!x),"aria-label":x?"Collapse categories":"Expand categories",children:x?"Hide":"Show"})]}),n.jsx("div",{className:`text-sm ${x?"block":"hidden md:block"}`,children:f?n.jsxs("div",{className:"animate-pulse space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}):u.length===0?n.jsx("p",{className:"text-gray-500",children:"No categories available"}):u.map(_=>n.jsxs("label",{className:"flex items-center space-x-2 py-1 hover:bg-gray-100 rounded px-2 transition",children:[n.jsx("input",{type:"checkbox",value:_.name,checked:s.includes(_.name),onChange:()=>k(_.name),className:"accent-blue-500","aria-label":`Select ${_.name} category`}),n.jsx("span",{className:"text-gray-700",children:_.name})]},_.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),n.jsxs("select",{value:i,onChange:A,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm","aria-label":"Sort products",children:[n.jsx("option",{value:"default",children:"Default"}),n.jsx("option",{value:"price-low-high",children:"Price: Low to High"}),n.jsx("option",{value:"price-high-low",children:"Price: High to Low"}),n.jsx("option",{value:"alpha-asc",children:"Alphabetical: A-Z"}),n.jsx("option",{value:"alpha-desc",children:"Alphabetical: Z-A"})]})]})]})},ese=()=>{const[r,e]=E.useState([]),[t,s]=E.useState([]),[a,i]=E.useState([]),[o,l]=E.useState(!0),[c,u]=E.useState(null),h=E.useMemo(()=>({"tablet & phones":1,"health & beauty":2,"foremade fashion":3,electronics:4,"baby products":5,"computers & accessories":6,"game & fun":7,"drinks & categories":8,"home & kitchen":9,"smart watches":10,uncategorized:11}),[]),f=x=>{let y=[...x];for(let b=y.length-1;b>0;b--){const v=Math.floor(Math.random()*(b+1));[y[b],y[v]]=[y[v],y[b]]}return y};E.useEffect(()=>{(async()=>{try{l(!0);const y=ft(_e(J,"products"),rt("status","==","approved")),b=await Ke(y);console.log("Total products fetched from Firestore:",b.docs.length);const v=b.docs.map(N=>{const k=N.data();let A=null;if(Array.isArray(k.variants)&&k.variants.length>0&&k.variants[0]?.imageUrls){const T=k.variants[0].imageUrls.find(D=>typeof D=="string"&&D.trim()&&D.startsWith("https://"));A=T||k.variants[0].imageUrls[0]||null,console.log(`Variant image check for ${N.id}:`,{firstValidUrl:T,allUrls:k.variants[0].imageUrls})}else if(Array.isArray(k.imageUrls)&&k.imageUrls.length>0){const T=k.imageUrls.find(D=>typeof D=="string"&&D.trim()&&D.startsWith("https://"));A=T||k.imageUrls[0]||null,console.log(`Product image check for ${N.id}:`,{firstValidUrl:T,allUrls:k.imageUrls})}else k.imageUrl&&typeof k.imageUrl=="string"&&k.imageUrl.startsWith("https://")?(A=k.imageUrl,console.log(`Single imageUrl check for ${N.id}:`,k.imageUrl)):console.warn(`Product ${N.id} has no valid imageUrl or imageUrls`,{id:N.id,name:k.name,imageUrl:k.imageUrl,imageUrls:k.imageUrls,variants:k.variants});let R=k.price||0,_=k.price||0,I=Array.isArray(k.variants)&&k.variants.length>0;if(I){const T=k.variants.map(D=>D.price||0);R=Math.min(...T),_=Math.max(...T)}const P=I?k.variants.reduce((T,D)=>T+(D.stock||0),0):k.stock||0;return P<10?(console.warn(`Product ${N.id} filtered out due to low stock:`,{name:k.name,totalStock:P}),null):{id:N.id,name:k.name||"Unknown Product",description:k.description||"",price:I?R:k.price||0,minPrice:I?R:null,maxPrice:I?_:null,stock:P,category:k.category||"uncategorized",categoryId:h[k.category?.toLowerCase()]||11,colors:k.colors||[],sizes:k.sizes||[],condition:k.condition||"New",imageUrl:A,variants:k.variants||[],sellerId:k.sellerId||"",seller:k.seller||{name:k.sellerName||"Unknown Seller",id:k.sellerId||""},rating:k.rating||0,reviews:k.reviews||[],status:k.status||"pending",bumpExpiry:k.bumpExpiry||null}}).filter(N=>N!==null&&N.id);console.log("Fetched approved products with sufficient stock:",v),v.length===0&&(console.warn("No approved products with sufficient stock found. Check Firestore data."),u("No approved products available at the moment.")),e(v),s(f(v))}catch(y){console.error("Error fetching products:",y),u("Failed to load products. Please try again.")}finally{l(!1)}})(),Ke(_e(J,"dailyDeals")).then(y=>{i(y.docs.map(b=>({id:b.id,...b.data()})))})},[h]);const g=E.useCallback(({priceRange:x,selectedCategories:y,sortOption:b,searchTerm:v,status:N})=>{let k=[...r].filter(A=>A!==null);k=k.filter(A=>(A.minPrice!==null?A.minPrice:A.price)>=x[0]&&(A.maxPrice!==null?A.maxPrice:A.price)<=x[1]),y.length>0&&(k=k.filter(A=>y.includes(A.categoryId))),v&&(k=k.filter(A=>A.name.toLowerCase().includes(v.toLowerCase()))),b==="price-low-high"?k.sort((A,R)=>(A.minPrice||A.price)-(R.minPrice||R.price)):b==="price-high-low"?k.sort((A,R)=>(R.minPrice||R.price)-(A.minPrice||A.price)):b==="alpha-asc"?k.sort((A,R)=>A.name.localeCompare(R.name)):b==="alpha-desc"?k.sort((A,R)=>R.name.localeCompare(R.name)):k.sort((A,R)=>{const _=A.bumpExpiry?new Date(A.bumpExpiry):null,I=R.bumpExpiry?new Date(R.bumpExpiry):null;return _&&I?I-_:_?-1:I?1:0}),console.log("Updated filtered products:",k),s(f(k))},[r]);return c?n.jsx("div",{className:"container mx-auto p-4",children:n.jsx("p",{className:"text-red-600 text-center",children:c})}):n.jsxs("div",{className:"mb-10 rounded-lg mx-auto p-3",children:[n.jsx("div",{className:"flex-col",children:n.jsx("h2",{className:"text-2xl font-bold mb-4 m-4",children:"Shop All Products"})}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"w-full rounded-lg border md:w-1/4",children:n.jsx(Jte,{onFilterChange:g,categoryMap:h})}),n.jsx("div",{className:"w-full rounded-lg border",children:n.jsx(Kte,{products:t,dailyDeals:a})})]})]})},eh={seller:{orderConfirmation:"Your order has been confirmed and will ship soon!",shippingUpdate:"Your order has been shipped. Tracking ID: [TRACKING_ID].",issueResponse:"We’re sorry for the inconvenience. Please share more details so we can assist you.",refundProcessed:"Your refund has been processed and will reflect in 3-5 business days.",productInquiry:"Thank you for your inquiry! Can you specify which product details you need?",deliveryDelay:"We apologize for the delay. Your order is expected to arrive by [DATE].",outOfStock:"The item is currently out of stock. We’ll notify you when it’s available.",orderReceived:"We’ve received your order and are processing it now.",paymentIssue:"There was an issue with your payment. Please verify your payment details.",productDamaged:"Please send us images of the damaged product so we can process a replacement.",thankYou:"Thank you for shopping with us! Let us know if you need further assistance.",customRequest:"We’ve noted your custom request. We’ll get back to you shortly."},buyer:{orderStatus:"Can you provide an update on my order status?",shippingQuery:"When will my order be shipped?",productQuestion:"Can you share more details about the product?",returnRequest:"I’d like to request a return for my order.",paymentIssue:"I’m having trouble with the payment. Can you assist?",deliveryIssue:"My order hasn’t arrived yet. Can you check on it?",productDamage:"The product I received is damaged. How can I proceed?",refundStatus:"Can you confirm the status of my refund?",cancelOrder:"I’d like to cancel my order. Is that possible?",sizeIssue:"The product doesn’t fit. Can I exchange it?",qualityConcern:"I’m not satisfied with the product quality. Can we discuss this?",customRequest:"I have a special request regarding my order. Can you help?"}},nO=({role:r,onSelect:e,selectedTemplate:t})=>n.jsx("div",{className:"relative",children:n.jsxs("select",{value:t,onChange:s=>e(s.target.value),className:"w-full p-2 rounded-lg bg-gray-100 text-gray-800 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition","aria-label":"Select a message template",children:[n.jsx("option",{value:"",children:"Select a message template"}),Object.keys(eh[r]||{}).map(s=>n.jsx("option",{value:s,children:eh[r][s]},s))]})}),si=()=>n.jsx("div",{className:"flex justify-center items-center h-48",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500"})}),hR=(r,e)=>{const t=[r,e].filter(l=>l?.trim()),s=t[0]?.slice(0,4).toLowerCase()||"user",a=t[1]?.slice(0,3).toLowerCase()||"",i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return(s+a).replace(/[^a-z0-9]/g,"")+i};function _d(){const[r,e]=E.useState({firstName:"",lastName:"",username:"guest",email:"",profileImage:localStorage.getItem("profileImage")||null}),t="https://via.placeholder.com/150?text=Profile";E.useEffect(()=>{const a=ve.onAuthStateChanged(async l=>{if(!l){e({firstName:"",lastName:"",username:"guest",email:"",profileImage:null});return}try{const c=Ne(J,"users",l.uid),u=os(c,h=>{if(h.exists()){const f=h.data();e(g=>({...g,firstName:f.firstName||"",lastName:f.lastName||"",username:f.username||hR(f.firstName||"",f.lastName||""),email:l.email||""}))}});return()=>u()}catch(c){console.error("Error fetching sidebar data:",c)}}),i=()=>{e(l=>({...l,profileImage:localStorage.getItem("profileImage")||null}))},o=()=>{const l=JSON.parse(localStorage.getItem("userData"));l&&e(c=>({...c,firstName:l.firstName||c.firstName,lastName:l.lastName||c.lastName,username:l.username||hR(l.firstName||"",l.lastName||""),email:l.email||c.email}))};return window.addEventListener("profileImageUpdated",i),window.addEventListener("userDataUpdated",o),()=>{a(),window.removeEventListener("profileImageUpdated",i),window.removeEventListener("userDataUpdated",o)}},[]);const s=()=>r.profileImage?n.jsx("img",{src:r.profileImage,alt:"Profile",className:"w-full h-full object-cover",onError:()=>{e(a=>({...a,profileImage:t}))}}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-white text-lg font-bold uppercase rounded-full",children:r.email[0]||"?"});return n.jsxs("div",{className:"md:w-1/4 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-100 dark:border-black",children:[n.jsxs("div",{className:"flex flex-col items-center mb-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto flex items-center justify-center overflow-hidden hover:bg-gray-300 transition-colors duration-300",children:s()}),n.jsxs("h3",{className:"mt-2 text-lg font-semibold text-gray-800 dark:text-gray-200",children:[r.firstName," ",r.lastName||""]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:r.username})]}),n.jsxs("nav",{className:"flex flex-col space-y-2",children:[n.jsxs(he,{to:"/profile",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-blue-800 p-2 rounded-lg transition-colors duration-300",children:[n.jsx(Vl,{className:"w-6 h-6 text-black dark:text-white"}),n.jsx("span",{children:"Profile"})]}),n.jsxs(he,{to:"/orders",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-800 p-2 rounded-lg transition-colors duration-300",children:[n.jsx(gd,{className:"w-6 h-6 text-black dark:text-white"}),n.jsx("span",{children:"Orders"})]}),n.jsxs(he,{to:"/order-tracking",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-800 p-2 rounded-lg transition-colors duration-300",children:[n.jsx(zJ,{className:"w-6 h-6 text-black dark:text-white"}),n.jsx("span",{children:"Track Orders"})]}),n.jsxs(he,{to:"/favorites",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-red-800 p-2 rounded-lg transition-colors duration-300",children:[n.jsx(W5,{className:"w-6 h-6 text-black dark:text-white"}),n.jsx("span",{children:"Favorites"})]}),n.jsxs(he,{to:"/address",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-purple-100 dark:hover:bg-purple-800 p-2 rounded-lg transition-colors duration-300",children:[n.jsx(Cee,{className:"w-6 h-6 text-black dark:text-white"}),n.jsx("span",{children:"Addresses"})]}),n.jsxs(he,{to:"/setting",className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:bg-orange-100 dark:hover:bg-orange-800 p-2 rounded-lg transition-colors duration-300",children:[n.jsx(y2,{className:"w-6 h-6 text-black dark:text-white"}),n.jsx("span",{children:"Settings"})]})]})]})}function tse(r){if(r.length===0)return!1;const e=r[r.length-1];return/photo|image|picture|show|damage|send us|share/i.test(e.text)}const sse=()=>{const{orderId:r}=Lo(),{state:e}=Br(),t=us(),[s,a]=E.useState([]),[i,o]=E.useState(""),[l,c]=E.useState(null),[u,h]=E.useState(null),[f,g]=E.useState(!1),[x,y]=E.useState(!1),[b,v]=E.useState({name:"Seller",avatar:null}),[N,k]=E.useState(!1),[A,R]=E.useState(!0),_=E.useRef(null),I=E.useRef(null);E.useEffect(()=>{(async()=>{if(!ve.currentUser){xe.error("Please sign in to access chat."),t("/login"),R(!1);return}if(!r||!e?.sellerId||!e?.productName||e?.role!=="buyer"){xe.error("Invalid chat request."),t("/orders"),R(!1);return}try{const V=Ne(J,"orders",r),Y=await it(V);if(!Y.exists()||Y.data().userId!==ve.currentUser.uid){xe.error("Invalid order or unauthorized access."),t("/orders"),R(!1);return}const H=Ne(J,"users",e.sellerId),$=await it(H),X=$.exists()?$.data():{};v({name:X.displayName||"Seller",avatar:X.avatar||"https://ui-avatars.com/api/?name=S&background=3b82f6&color=fff&size=40"}),k(!0);const G=ft(_e(J,"chats"),rt("orderId","==",r),rt("userId","==",ve.currentUser.uid),rt("sellerId","==",e.sellerId)),B=await Ke(G);let Q;if(B.empty){const ue=Math.random().toString(36).substr(2,9);Q=`${r}-${ue}`,await Za(_e(J,"chats"),{chatId:Q,orderId:r,userId:ve.currentUser.uid,sellerId:e.sellerId,productId:Y.data().items[0]?.productId||"",createdAt:new Date,lastMessage:"",lastMessageTime:new Date,typing:{}})}else Q=B.docs[0].id;const ee=ft(_e(J,"chats",Q,"messages"),jg("timestamp","asc")),se=os(ee,ue=>{const Oe=ue.docs.map(Pe=>({id:Pe.id,...Pe.data()}));a(Oe),R(!1)},ue=>{console.error("Error fetching messages:",ue.message),xe.error("Failed to load messages."),R(!1)}),le=Ne(J,"chats",Q),Ee=os(le,ue=>{const Oe=ue.data();y(Oe?.typing?.[e.sellerId]||!1)},ue=>{console.error("Error fetching typing status:",ue.message)});return()=>{se(),Ee()}}catch(V){console.error("Error validating chat:",V.message),xe.error("Failed to load chat."),t("/orders"),R(!1)}})()},[r,e,t]);const P=()=>{I.current?.scrollIntoView({behavior:"smooth"})};E.useEffect(()=>{P()},[s]);const T=O=>{const V=O.target.files[0];if(V){if(!V.type.startsWith("image/")){xe.error("Please select an image file");return}if(V.size>5*1024*1024){xe.error("Image size should be less than 5MB");return}c(V);const Y=new FileReader;Y.onload=H=>h(H.target.result),Y.readAsDataURL(V)}},D=async()=>{if(!i){xe.error("Please select a message template.");return}try{g(!0);const O=ft(_e(J,"chats"),rt("orderId","==",r),rt("userId","==",ve.currentUser.uid),rt("sellerId","==",e.sellerId)),V=await Ke(O);if(V.empty){xe.error("Chat not found.");return}const Y=V.docs[0].id;await Za(_e(J,"chats",Y,"messages"),{senderId:ve.currentUser.uid,text:eh.buyer[i],image:null,timestamp:new Date,status:"delivered"}),await Qr(Ne(J,"chats",Y),{lastMessage:eh.buyer[i],lastMessageTime:new Date,[`typing.${ve.currentUser.uid}`]:!1}),o("")}catch(O){console.error("Error sending message:",O.message),xe.error("Failed to send message.")}finally{g(!1)}},L=async()=>{if(!(!l||!u))try{g(!0);const O=ft(_e(J,"chats"),rt("orderId","==",r),rt("userId","==",ve.currentUser.uid),rt("sellerId","==",e.sellerId)),V=await Ke(O);if(V.empty){xe.error("Chat not found.");return}const Y=V.docs[0].id;await Za(_e(J,"chats",Y,"messages"),{senderId:ve.currentUser.uid,text:"",image:u,timestamp:new Date,status:"delivered"}),await Qr(Ne(J,"chats",Y),{lastMessage:"Image sent",lastMessageTime:new Date,[`typing.${ve.currentUser.uid}`]:!1}),c(null),h(null),_.current&&(_.current.value="")}catch(O){console.error("Error sending image:",O.message),xe.error("Failed to send image.")}finally{g(!1)}},F=async()=>{if(N)try{const O=ft(_e(J,"chats"),rt("orderId","==",r),rt("userId","==",ve.currentUser.uid),rt("sellerId","==",e.sellerId)),V=await Ke(O);if(!V.empty){const Y=V.docs[0].id;await Qr(Ne(J,"chats",Y),{[`typing.${ve.currentUser.uid}`]:!0})}}catch(O){console.error("Error updating typing status:",O.message)}},z=O=>{if(!O)return"";try{return(O.toDate?O.toDate():new Date(O)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}};return A?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(si,{}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading chat..."})]}):N?n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-700",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx(_d,{}),n.jsxs(Ze.div,{className:"md:w-3/4 flex flex-col bg-white rounded-lg shadow-md overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-green-600 text-white border-b border-gray-200",children:[n.jsx("img",{src:b.avatar,alt:"Seller",className:"w-10 h-10 rounded-full border-2 border-white"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-lg",children:b.name}),n.jsxs("div",{className:"text-xs text-green-100",children:["Product: ",e?.productName||"Unknown"]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-100",children:[n.jsxs(tn,{children:[s.map(O=>n.jsx(Ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2},className:`flex ${O.senderId===ve.currentUser.uid?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 shadow-sm relative ${O.senderId===ve.currentUser.uid?"bg-green-500 text-white rounded-br-none":"bg-white text-gray-800 rounded-bl-none"}`,children:[O.text&&n.jsx("div",{className:"text-sm",children:O.text}),O.image&&n.jsx("img",{src:O.image,alt:"chat-img",className:"max-w-[150px] sm:max-w-[200px] rounded-md border border-gray-200 mb-1"}),n.jsx("div",{className:"flex items-center justify-end gap-1 text-xs mt-1",children:n.jsx("span",{className:O.senderId===ve.currentUser.uid?"text-green-100":"text-gray-500",children:z(O.timestamp)})}),n.jsx("div",{className:`absolute bottom-0 ${O.senderId===ve.currentUser.uid?"right-[-6px]":"left-[-6px]"} w-0 h-0 border-t-[6px] border-t-transparent ${O.senderId===ve.currentUser.uid?"border-l-[6px] border-l-green-500":"border-r-[6px] border-r-white"} border-b-[6px] border-b-transparent`})]})},O.id)),(f||x)&&n.jsx(Ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-start",children:n.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),n.jsx("div",{ref:I})]}),n.jsxs("div",{className:"bg-white px-4 py-3 border-t border-gray-200",children:[n.jsx("div",{className:"mb-3",children:n.jsx(nO,{role:"buyer",onSelect:o,selectedTemplate:i,className:"w-full p-2 rounded-full bg-gray-100 text-gray-800 border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition"})}),l&&u&&n.jsx(Ze.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-3 p-2 bg-gray-100 rounded-lg border border-gray-200",children:n.jsx("img",{src:u,alt:"preview",className:"max-w-[80px] max-h-[80px] rounded-md"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-gray-100 rounded-full p-2",children:[tse(s)&&n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:T,className:"hidden",id:"image-upload"}),n.jsx(Ze.label,{htmlFor:"image-upload",whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-gray-600 p-1 cursor-pointer hover:text-green-600",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.586-6.586M12 3v6m0 0v6m0-6h6m-6 0H6"})})})]}),i?n.jsx(Ze.button,{onClick:D,disabled:f,whileHover:{scale:1.05},whileTap:{scale:.95},className:`ml-auto p-2 rounded-full ${f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,onMouseDown:F,children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}):n.jsx(Ze.button,{onClick:()=>t("/support"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"ml-auto p-2 rounded-full bg-orange-500 text-white hover:bg-orange-600",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636A9 9 0 1121 12h-3m-6 6v3m-6-3h-3m6-6H3m6-6V3"})})})]}),l&&u&&n.jsx(Ze.button,{onClick:L,disabled:f,whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-full ${f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})]})]})}):null},kh="/assets/logi-DGW4y32z.png",mR=async(r,e={})=>{const t=JSON.parse(localStorage.getItem("userData"))||{},a=ch().currentUser,i=a?a.email:t.email||"",o={...e.headers,"x-user-email":i},l=await fetch(r,{...e,headers:o});return console.log("Fetch response status:",l.status),console.log("Fetch headers sent:",o),l},wx=r=>{switch(r.code){case"auth/invalid-credential":return"Incorrect email or password.";case"auth/wrong-password":return"Wrong password. Please try again.";case"auth/user-not-found":return"No account found with this email.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/user-disabled":return"This account is not available.";case"auth/too-many-requests":return"Too many attempts. Please try again.";case"auth/otp-not-verified":return"Please verify your email with the code sent to you.";default:return"Something went wrong. Please try again."}};function rse(){const[r,e]=E.useState(""),[t,s]=E.useState(""),[a,i]=E.useState(!1),[o,l]=E.useState(""),[c,u]=E.useState(""),[h,f]=E.useState(""),[g,x]=E.useState(!1),[y,b]=E.useState(!1),[v,N]=E.useState(!1),k=us(),{state:A}=Br(),R="https://foremade-backend.onrender.com",_=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F),I=async F=>{if(!F)return;const z=localStorage.getItem("lastLogin"),O=localStorage.getItem("inactiveEmailSent");if(!z||O==="true")return;const V=new Date(z),H=(new Date().getTime()-V.getTime())/(1e3*60*60*24);if(H>=14&&H<=21)try{const $=await fetch(`${R}/api/send-inactive-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:F.email,name:F.displayName||null})}),X=await $.json();$.ok?(console.log("Inactive user email triggered:",X.message),localStorage.setItem("inactiveEmailSent","true")):console.error("Failed to trigger inactive email:",X.error)}catch($){console.error("Error triggering inactive email:",$.message)}};E.useEffect(()=>{const F=localStorage.getItem("socialEmail")||A?.email||"";F&&(e(F),u("Use Google Sign-In for this account."));const z=ve.onAuthStateChanged(O=>{O&&I(O)});return()=>z()},[]);const P=async F=>{try{const z=Ne(J,"users",F.uid),O=await it(z);let V;if(O.exists())V=O.data();else{const G=F.displayName||"",[B,Q]=G.split(" ").length>1?G.split(" "):[G,""];V={uid:F.uid,email:F.email,firstName:B||F.email.split("@")[0],lastName:Q||"",username:F.email.split("@")[0].toLowerCase().replace(/[^a-z0-9]/g,"")+Math.floor(Math.random()*1e3),phoneNumber:F.phoneNumber||"",role:"standard"},await Gt(z,V,{merge:!0})}const Y=await QC(F),H=await mR(`${R}/authenticate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({email:F.email})}),$=await H.json();if(!H.ok)throw new Error($.error||"Server authentication failed");V.role=$.role||"standard",localStorage.setItem("userData",JSON.stringify(V)),localStorage.removeItem("socialEmail"),localStorage.setItem("lastLogin",new Date().toISOString()),localStorage.removeItem("inactiveEmailSent");const X=V.firstName||V.name?.split(" ")[0]||"User";f(`Welcome, ${X}!`),setTimeout(()=>{b(!1),N(!1),k($.redirectUrl||"/",{state:{fromValidNavigation:!0}})},2e3)}catch(z){console.error("Social login error:",z.message,z.code),l(wx(z)||"Social login failed. Please check your connection or try again."),b(!1),N(!1)}},T=async F=>{F.preventDefault(),l(""),u(""),f(""),x(!0);let z=!1;const O=r.trim(),V=t.trim();if(O?_(O)||(l("Please enter a valid email address."),z=!0):(l("Email is required."),z=!0),!V&&!c.includes("Google Sign-In")&&(u("Password is required."),z=!0),z){x(!1);return}try{await A3(ve,Oj);const H=(await i7(ve,O,V)).user;let $={uid:H.uid,email:O,role:"standard"};const X=await QC(H),G=await mR(`${R}/authenticate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({email:O})}),B=await G.json();if(!G.ok)throw new Error(B.error||"Server error");$.role=B.role||"standard";const Q=Ne(J,"users",H.uid),ee=await it(Q);ee.exists()?$={...ee.data(),...$,role:B.role||"standard"}:await Gt(Q,$),localStorage.setItem("userData",JSON.stringify($)),localStorage.setItem("lastLogin",new Date().toISOString()),localStorage.removeItem("inactiveEmailSent");const se=$.firstName||$.name?.split(" ")[0]||"User";f(`Welcome, ${se}!`),setTimeout(()=>{x(!1),k(B.redirectUrl||"/",{state:{fromValidNavigation:!0}})},2e3)}catch(Y){console.error("Login error:",Y.message,Y.code),x(!1);const H=Y.message?"Something went wrong. Please try again.":wx(Y);H.includes("email")||H.includes("account")||H.includes("valid")?l(H):u(H)}},D=async()=>{l(""),u(""),f(""),b(!0);const F=new Ei;F.setCustomParameters({prompt:"select_account"});try{const z=await $1(ve,F);await P(z.user)}catch(z){console.error("Google sign-in error:",z.message,z.code),b(!1),l(wx(z)||"Google sign-in failed. Please check your connection or try again.")}},L=async()=>{l(""),u(""),f(""),N(!0);const F=new Ci;F.setCustomParameters({display:"popup"});try{const z=await $1(ve,F);await P(z.user)}catch(z){console.error("Facebook sign-in error:",z.message,z.code),N(!1),l(wx(z)||"Facebook sign-in failed. Please check your connection or try again.")}};return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"w-full h-screen flex",children:[n.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://images.pexels.com/photos/7621356/pexels-photo-7621356.jpeg?auto=compress&cs=tinysrgb&w=600')"},children:n.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 flex flex-col justify-center items-center text-white p-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-4 flex items-center",children:["Welcome to ",n.jsx("img",{src:kh,alt:"Logo",className:"h-20 ml-2"})]}),n.jsx("p",{className:"text-lg text-center",children:"Join our community for buyers and sellers!"})]})}),n.jsxs("div",{className:"w-full md:w-1/2 h-full p-9 flex flex-col justify-center bg-white",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Sign In"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Don’t have an account?"," ",n.jsx(he,{to:"/register",className:"text-blue-600 hover:underline",children:"Sign Up"})]}),n.jsxs("form",{onSubmit:T,className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"email",id:"email",value:r,onChange:F=>e(F.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${o?"border-red-500":h?"border-green-500":"border-gray-300"}`,autoComplete:"email",required:!0}),n.jsx("label",{htmlFor:"email",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${r?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Email"}),o&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:o})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:a?"text":"password",id:"password",value:t,onChange:F=>s(F.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${c?"border-red-500":h?"border-green-500":"border-gray-300"}`,autoComplete:"current-password",required:!0,disabled:c.includes("Google Sign-In")}),n.jsx("label",{htmlFor:"password",className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${t||c.includes("Google Sign-In")?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Password"}),n.jsx("span",{className:"absolute right-3 top-3 text-gray-500 cursor-pointer",onClick:()=>i(!a),style:{display:c.includes("Google Sign-In")?"none":"block"},children:n.jsx("i",{className:`bx ${a?"bx-hide":"bx-show"} text-xl`})}),c&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:c})]}),h&&n.jsx("p",{className:"text-green-600 text-xs mt-1",children:h}),n.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",disabled:g||c.includes("Google Sign-In"),children:g?"Logging in...":"Sign In"})]}),n.jsx("p",{className:"text-gray-600 mt-2",children:n.jsx(he,{to:"/recover-password",className:"hover:underline hover:text-blue-700",children:"Forgot Password?"})}),n.jsxs("div",{className:"mt-5 text-center",children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"Or continue with"}),n.jsxs("div",{className:"flex justify-center space-x-4",children:[n.jsxs("button",{onClick:D,className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:y,children:[n.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5 mr-2"}),y?"Processing...":"Google"]}),n.jsxs("button",{onClick:L,className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:v,children:[n.jsx("img",{src:"https://www.facebook.com/favicon.ico",alt:"Facebook",className:"w-5 h-5 mr-2"}),v?"Processing...":"Facebook"]})]})]})]})]})})}const ase=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),fR=r=>{const e=r.length>=6,t=/[a-zA-Z]/.test(r),s=/[0-9]/.test(r),a=/[_@!+=#$%^&*()[\]{}|;:,.<>?~`/-]/.test(r);return{isValid:e&&t&&s&&a,score:(e?25:0)+(t?25:0)+(s?25:0)+(a?25:0),errors:[!e&&"Password needs 6+ characters.",!t&&"Password needs a letter.",!s&&"Password needs a number.",!a&&"Password needs a special character (e.g., _, @, !)."].filter(Boolean)}},Xw=(r,e)=>{const t=[r,e].filter(l=>l?.trim()),s=t[0]?.slice(0,4).toLowerCase()||"user",a=t[1]?.slice(0,3).toLowerCase()||"",i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return(s+a).replace(/[^a-z0-9]/g,"")+i},nse=r=>r.trim()?/^\+\d{7,15}$/.test(r):!0,Gw=r=>{const e=new Date(r),t=new Date;let s=t.getFullYear()-e.getFullYear();const a=t.getMonth()-e.getMonth();return(a<0||a===0&&t.getDate()<e.getDate())&&s--,s},Kw="https://foremade-backend.onrender.com";function ise(){const[r,e]=E.useState(""),[t,s]=E.useState(""),[a,i]=E.useState(""),[o,l]=E.useState(""),[c,u]=E.useState(""),[h,f]=E.useState(""),[g,x]=E.useState(""),[y,b]=E.useState(!1),[v,N]=E.useState(""),[k,A]=E.useState(""),[R,_]=E.useState(""),[I,P]=E.useState(""),[T,D]=E.useState(""),[L,F]=E.useState(""),[z,O]=E.useState(""),[V,Y]=E.useState(""),[H,$]=E.useState(!1),[X,G]=E.useState(!1),[B,Q]=E.useState(0),[ee,se]=E.useState(!1),[le,Ee]=E.useState(!1),[ue,Oe]=E.useState(!1),Pe=us(),[Ie,ie]=E.useState(!1),[ze,Ve]=E.useState(0);E.useEffect(()=>{const De=fR(o);Ve(De.score),!De.isValid&&o?P(De.errors[0]):P("")},[o]),E.useEffect(()=>{ie(!0)},[]);const ce=async De=>{if(De.preventDefault(),N(""),A(""),_(""),P(""),D(""),F(""),O(""),Y(""),$(!0),B>=9){_("Too many attempts. Please try again later."),$(!1);return}let Xe=!1;if(r.trim()||(N("First name is required."),Xe=!0),t.trim()||(A("Last name is required."),Xe=!0),ase(a)||(_("Please enter a valid email address."),Xe=!0),!o)P("Password is required."),Xe=!0;else{const st=fR(o);st.isValid||(P(st.errors[0]),Xe=!0)}if(c&&!nse(c)&&(D("Invalid phone number (e.g., +1234567890)."),Xe=!0),h?Gw(h)<18&&(O("You must be at least 18 years old to register."),Xe=!0):(O("Date of Birth is required."),Xe=!0),Xe){$(!1),Q(st=>st+1);return}try{const st=Xw(r,t),Mt=(await A0(ve,a,o)).user;await Pf(Mt,{displayName:st});const as={email:Mt.email,name:`${r} ${t}`,username:st,address:"",phoneNumber:c||"",createdAt:new Date().toISOString(),uid:Mt.uid,profileImage:null,role:"standard",dob:h};await Gt(Ne(J,"users",Mt.uid),as);const Ge=await(await fetch(`${Kw}/send-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})})).json();Ge.success?(Y("Account created! Check your email for a verification code."),G(!0),localStorage.setItem("userData",JSON.stringify(as))):_(Ge.error||"Something went wrong. Please try again.")}catch(st){console.error("Registration error:",st.message,st.code),_(st.message.includes("email")?"This email is already in use or invalid. Try another.":"Registration failed. Please check your connection or try again.")}finally{$(!1)}},ke=async De=>{let Xe;De==="google"?(Xe=new Ei,se(!0)):De==="facebook"&&(Xe=new Ci,Ee(!0));try{const vt=(await $1(ve,Xe)).user,[Mt,...as]=vt.displayName?.split(" ")||[vt.email.split("@")[0],""],wt=as.join(" ");let Ge=null;if(vt.birthDate&&(Ge=Gw(vt.birthDate)),Ge===null||Ge<18){Oe(!0);return}const Pt=Xw(Mt,wt);await Pf(vt,{displayName:Pt});const bt={email:vt.email,name:`${Mt} ${wt}`,username:Pt,address:"",phoneNumber:vt.phoneNumber||"",createdAt:new Date().toISOString(),uid:vt.uid,profileImage:vt.photoURL||null,role:"standard",dob:vt.birthDate||""};await Gt(Ne(J,"users",vt.uid),bt,{merge:!0}),localStorage.setItem("userData",JSON.stringify(bt)),Y("Account created successfully with "+De+"! Redirecting..."),setTimeout(()=>Pe("/"),2e3)}catch(st){console.error("Social login error:",st.message,st.code),st.code==="auth/popup-blocked"?_("Popup was blocked by your browser. Please allow popups for this site and try again."):st.code==="auth/unauthorized-domain"?_("This domain is not authorized. Please add foremade.vercel.app to Firebase Authorized Domains."):_("Social signup failed. Please check your connection or try again.")}finally{se(!1),Ee(!1)}},Qe=async De=>{if(De.preventDefault(),O(""),Gw(h)<18){O("You must be at least 18 years old to register.");return}const st=ve.currentUser;if(!st){_("User session expired. Please try signing in again."),Oe(!1);return}const[vt,...Mt]=st.displayName?.split(" ")||[st.email.split("@")[0],""],as=Mt.join(" "),wt=Xw(vt,as),Ge={email:st.email,name:`${vt} ${as}`,username:wt,address:"",phoneNumber:st.phoneNumber||"",createdAt:new Date().toISOString(),uid:st.uid,profileImage:st.photoURL||null,role:"standard",dob:h};await Gt(Ne(J,"users",st.uid),Ge,{merge:!0}),localStorage.setItem("userData",JSON.stringify(Ge)),Y("Account created successfully! Redirecting..."),Oe(!1),setTimeout(()=>Pe("/"),2e3)},me=async()=>{$(!0);try{const Xe=await(await fetch(`${Kw}/resend-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})})).json();Xe.success?Y("New verification code sent to your email."):_(Xe.error||"Failed to send code. Please try again.")}catch(De){console.error("Resend OTP error:",De.message),_("Unable to send code. Check your network and try again.")}finally{$(!1)}},$e=async De=>{if(De.preventDefault(),F(""),Y(""),$(!0),!g.trim()){F("Please enter the verification code."),$(!1);return}try{const st=await(await fetch(`${Kw}/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,otp:g})})).json();st.success?(Y("Email verified! You can log in now."),await o7(ve.currentUser),G(!1),setTimeout(()=>{Pe("/login")},2e3)):F(st.error||"Invalid or expired code. Please try again.")}catch(Xe){console.error("Verify OTP error:",Xe.message),F("Verification failed. Check your connection and try again.")}finally{$(!1)}},tt=()=>{ie(!1)},Ye=()=>{Pe("/pro-seller-form")};return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"w-full h-screen flex",children:[n.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://i.pinimg.com/736x/f2/8c/a4/f28ca4118a46e68b6871946e65ab5665.jpg')"},children:n.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 flex flex-col justify-center items-center text-white p-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-4 flex items-center",children:["Join ",n.jsx("img",{src:kh,alt:"Formade logo",className:"h-20 ml-2"})]}),n.jsx("p",{className:"text-lg text-center",children:"Join our community for buyers and sellers!"})]})}),n.jsxs("div",{className:"w-full md:w-1/2 h-full p-9 flex flex-col justify-center bg-white relative",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Sign Up"})}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Already have an account? ",n.jsx(he,{to:"/login",className:"text-blue-600 hover:underline",children:"Sign In"})]}),n.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[n.jsxs("div",{className:"flex space-x-4 mb-4",children:[n.jsxs("div",{className:"relative w-1/2",children:[n.jsx("input",{type:"text",value:r,onChange:De=>e(De.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${v?"border-red-500":V?"border-green-500":"border-gray-300"}`,autoComplete:"given-name",required:!0}),n.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${r?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"First Name"}),v&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:v})]}),n.jsxs("div",{className:"relative w-1/2",children:[n.jsx("input",{type:"text",value:t,onChange:De=>s(De.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${k?"border-red-500":V?"border-green-500":"border-gray-300"}`,autoComplete:"family-name",required:!0}),n.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${t?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Last Name"}),k&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:k})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"email",value:a,onChange:De=>i(De.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${R?"border-red-500":V?"border-green-500":"border-gray-300"}`,autoComplete:"email",required:!0}),n.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${a?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Email"}),R&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:R})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"tel",value:c,onChange:De=>u(De.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${T?"border-red-500":V?"border-green-500":"border-gray-300"}`,autoComplete:"tel"}),n.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${c?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Phone Number"}),T&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:T})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:h,onChange:De=>f(De.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${z?"border-red-500":V?"border-green-500":"border-gray-300"}`,max:new Date().toISOString().split("T")[0],required:!0}),n.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${h?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Date of Birth"}),z&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:z})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:y?"text":"password",value:o,onChange:De=>l(De.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${I?"border-red-500":V?"border-green-500":"border-gray-300"}`,autoComplete:"new-password",required:!0}),n.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${o?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Password"}),n.jsx("span",{className:"absolute right-3 top-3 text-gray-500 cursor-pointer",onClick:()=>b(!y),children:n.jsx("i",{className:`bx ${y?"bx-hide":"bx-show"} text-xl`})})]}),o&&n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Password Strength"}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ease-out ${ze>=75?"bg-green-500":ze>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${ze}%`}})}),n.jsx("p",{className:"text-xs mt-1",children:ze>=75?"Strong":ze>=50?"Medium":"Weak"})]}),I&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:I}),V&&n.jsx("p",{className:"text-green-600 text-xs mb-4",children:V}),n.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",disabled:H,children:H?"Registering...":"Sign Up"})]}),n.jsxs("div",{className:"mt-6 text-center",children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"Or continue with"}),n.jsxs("div",{className:"flex justify-center space-x-4",children:[n.jsxs("button",{onClick:()=>ke("google"),className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:ee,children:[n.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 h-5 mr-2"}),ee?"Processing...":"Google"]}),n.jsxs("button",{onClick:()=>ke("facebook"),className:"bg-white border border-gray-300 p-[17px] max-md:p-2 text-sm rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors",disabled:le,children:[n.jsx("img",{src:"https://www.facebook.com/favicon.ico",alt:"Facebook",className:"w-5 h-5 mr-2"}),le?"Processing...":"Facebook"]})]})]}),X&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"m-4 bg-white p-6 rounded-lg w-full max-w-md animate-slide-up",children:[n.jsxs("div",{className:"flex items-center justify-between mb-5",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Verify Your Email"}),n.jsx("button",{onClick:()=>G(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx("i",{className:"bx bx-x text-[24px]"})})]}),n.jsxs("p",{className:"text-gray-600 mb-4 text-sm text-center",children:["Enter the 6-digit code sent to your email ",a,"."]}),n.jsxs("form",{onSubmit:$e,className:"space-y-4",children:[n.jsx("div",{className:"flex justify-between gap-2",children:[0,1,2,3,4,5].map(De=>n.jsx("input",{type:"text",maxLength:"1",value:g[De]||"",onChange:Xe=>{const st=g.split("");st[De]=Xe.target.value,x(st.join("")),Xe.target.value&&De<5&&document.getElementsByTagName("input")[De+1].focus()},onKeyDown:Xe=>{Xe.key==="Backspace"&&!g[De]&&De>0&&document.getElementsByTagName("input")[De-1].focus()},className:"w-12 h-12 text-center border rounded-lg focus:border-blue-500 focus:outline-none text-2xl font-medium",required:!0},De))}),L&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:L}),n.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",disabled:H,children:H?"Verifying...":"Verify Code"}),n.jsxs("p",{className:"text-center text-gray-600 mt-2 text-sm",children:["Didn’t receive a code?"," ",n.jsx("button",{onClick:me,className:"text-blue-600 hover:underline",disabled:H,children:"Resend"})]}),V&&n.jsx("p",{className:"text-center text-green-600 text-xs mt-2",children:V})]})]})}),ue&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"m-4 bg-white p-6 rounded-lg w-full max-w-md animate-slide-up",children:[n.jsxs("div",{className:"flex items-center justify-between mb-5",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Verify Your Age"}),n.jsx("button",{onClick:()=>Oe(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx("i",{className:"bx bx-x text-[24px]"})})]}),n.jsx("p",{className:"text-gray-600 mb-4 text-sm text-center",children:"Please enter your Date of Birth to confirm you are 18 or older."}),n.jsxs("form",{onSubmit:Qe,className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:h,onChange:De=>f(De.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 ${z?"border-red-500":"border-gray-300"}`,max:new Date().toISOString().split("T")[0],required:!0}),n.jsx("label",{className:`absolute left-3 top-3 text-gray-500 transition-all duration-300 transform origin-left pointer-events-none ${h?"-translate-y-6 scale-75 text-blue-500 bg-white px-1":""}`,children:"Date of Birth"}),z&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:z})]}),n.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",disabled:H,children:H?"Verifying...":"Submit"})]})]})}),Ie&&n.jsxs(Ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center","aria-modal":"true",role:"dialog",children:[n.jsx(Ze.div,{initial:{opacity:0},animate:{opacity:.6},exit:{opacity:0},className:"absolute inset-0 bg-black"}),n.jsxs(Ze.div,{initial:{y:40,scale:.95,opacity:0},animate:{y:0,scale:1,opacity:1},exit:{y:40,scale:.95,opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"relative bg-white rounded-2xl shadow-2xl max-w-lg w-full mx-4 p-6",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsx(gte,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Choose Your Option"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Merchant or Standard user"})]})]}),n.jsx("button",{onClick:()=>ie(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Close account type selection",children:n.jsx("i",{className:"bx bx-x text-2xl"})})]}),n.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs(Ze.button,{whileHover:{scale:1.03},whileTap:{scale:.98},onClick:tt,className:"flex flex-col items-center justify-center p-4 border rounded-lg bg-gray-800 text-white hover:shadow-lg transition-shadow w-full h-32",children:[n.jsx("span",{className:"text-lg font-medium",children:"ALL USERS"}),n.jsx("span",{className:"text-sm mt-1",children:"Sign Up. Sell / Buy"})]}),n.jsxs(Ze.button,{whileHover:{scale:1.03},whileTap:{scale:.98},onClick:Ye,className:"flex flex-col items-center justify-center p-4 border rounded-lg bg-orange-500 text-white hover:shadow-lg transition-shadow w-full h-32",children:[n.jsx("span",{className:"text-lg font-medium",children:"MERCHANT"}),n.jsx("span",{className:"text-sm mt-1",children:"Sign Up / Pro Seller Benefits Included"}),n.jsx("span",{className:"text-xs mt-1",children:"Registered Businesses only"})]})]}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx("button",{onClick:()=>ie(!1),className:"text-blue-600 hover:underline text-sm",children:"Or continue with"})})]})]})]})]})})}const Co=({alerts:r,removeAlert:e})=>n.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`flex items-center p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-0 opacity-100 ${t.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"} animate-slide-in`,onClick:()=>e(t.id),role:"alert",children:[n.jsx("i",{className:`bx ${t.type==="success"?"bx-check-circle":"bx-error-circle"} text-xl mr-2`}),n.jsx("span",{children:t.message}),n.jsx("button",{className:"ml-auto text-white hover:text-gray-200","aria-label":"Close alert",children:n.jsx("i",{className:"bx bx-x text-xl"})})]},t.id))}),Bl=()=>{const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="success",o=3e3)=>{const l=Date.now().toString();e(c=>[...c,{id:l,message:a,type:i}]),o&&setTimeout(()=>{e(c=>c.filter(u=>u.id!==l))},o)},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}},ose=({productId:r,isIconOnly:e=!1,customClass:t=""})=>{const[s,a]=E.useState(!1),{alerts:i,addAlert:o}=Bl(),{setAlerts:l}=Bl(),c=async()=>{if(!r){o("Invalid product ID","error",3e3);return}a(!0);try{await ff(r,1,ve.currentUser?.uid),o("Added to cart!","success",3e3)}catch(h){console.error("Error adding to cart:",h),o(h.message||"Failed to add to cart","error",3e3)}finally{a(!1)}};let u=e?`${t} focus:outline-none`:`rounded-full px-2 py-1 text-white focus:outline-none ml-2 transition-all duration-200 ${s?"bg-gray-300 cursor-not-allowed":"bg-[#000] hover:bg-blue-950"}`;return n.jsxs("div",{className:"",children:[n.jsx("button",{onClick:c,disabled:s,className:u,"aria-label":"Add to cart",children:n.jsx("i",{className:`bx bx-cart-add text-2xl ${s?"opacity-50":""}`})}),n.jsx(Co,{alerts:i,removeAlert:h=>l(i.filter(f=>f.id!==h))})]})},lse=()=>{const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null),o=["tablet & phones","health & beauty","foremade fashion","electronics","baby products","computers & accessories","game & fun","drinks & categories","home & kitchen","smart watches"];return E.useEffect(()=>{(async()=>{s(!0),i(null);try{const u=o.sort(()=>.5-Math.random()).slice(0,Math.floor(Math.random()*3)+3).map(async x=>{const y=ft(_e(J,"products"),rt("category","==",x),h6(4));return(await Ke(y)).docs.map(v=>{const N=v.data();let k=N.imageUrl&&typeof N.imageUrl=="string"&&N.imageUrl.startsWith("https://")?N.imageUrl:Array.isArray(N.imageUrls)&&N.imageUrls[0]&&typeof N.imageUrls[0]=="string"&&N.imageUrls[0].startsWith("https://")?N.imageUrls[0]:"/images/placeholder.jpg";return{id:v.id,name:N.name||"Unnamed Product",price:N.price||0,stock:N.stock||0,category:N.category||"uncategorized",imageUrl:k,rating:N.rating||Math.random()*2+3,colors:N.colors||[],sizes:N.category?.trim().toLowerCase()==="foremade fashion"?N.sizes||[]:[],condition:N.condition||"New",sellerId:N.sellerId||""}})}),g=(await Promise.all(u)).flat().filter(x=>x.imageUrl&&typeof x.imageUrl=="string"&&(x.imageUrl.startsWith("https://")||x.imageUrl==="/images/placeholder.jpg")?!0:(console.warn("Filtered out product with invalid imageUrl:",{id:x.id,name:x.name,imageUrl:x.imageUrl}),!1)).sort(()=>.5-Math.random()).slice(0,12);console.log("Fetched and normalized products:",g),e(g),g.length===0&&i("No products available at the moment.")}catch(c){console.error("Error fetching products:",{message:c.message,code:c.code}),i("Failed to load products. Please try again."),xe.error("Failed to load products")}finally{s(!1)}})()},[]),t?n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})}):a?n.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[n.jsx("i",{className:"bx bx-error-circle text-8xl text-red-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-6 text-center",children:a}),n.jsxs(he,{to:"/",className:"mt-8 inline-flex items-center text-blue-600 hover:underline text-lg",children:[n.jsx("i",{className:"bx bx-home-alt mr-2"}),"Back to Home"]})]}):n.jsxs("div",{className:"container mx-auto px-4 py-12",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Discover More Products"}),n.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Shop sell, smile, check out these great products!"}),r.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh]",children:[n.jsx("i",{className:"bx bx-cart text-8xl text-gray-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-6 text-center",children:"No Products Available"}),n.jsx("p",{className:"text-gray-600 mt-2 text-center",children:"Our catalog is empty. Come back soon!"}),n.jsxs(he,{to:"/",className:"mt-8 inline-flex items-center text-blue-600 hover:underline text-lg",children:[n.jsx("i",{className:"bx bx-home-alt mr-2"}),"Back to Home"]})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:r.map(l=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm transition-shadow duration-300",children:[n.jsx(he,{to:`/product/${l.id}`,children:n.jsx("img",{src:l.imageUrl||"/images/placeholder.jpg",alt:l.name||"Product",className:"w-full h-48 object-cover rounded-t-lg",onError:c=>{c.target.src!=="/images/placeholder.jpg"&&(console.warn("Image load error, falling back to placeholder:",{productId:l.id,imageUrl:l.imageUrl,name:l.name}),c.target.src="/images/placeholder.jpg")},onLoad:()=>{console.log("Product image loaded:",{productId:l.id,imageUrl:l.imageUrl,name:l.name})}})}),n.jsxs("div",{className:"p-4",children:[n.jsx(he,{to:`/product/${l.id}`,children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate hover:text-blue-600",children:l.name})}),n.jsxs("p",{className:"text-gray-600 mt-2 text-xl font-bold",children:["₦",l.price.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsx("div",{className:"mt-4",children:n.jsx(ose,{productId:l.id,stock:l.stock,className:"w-full bg-slate-600 text-black py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center"})})]})]},l.id))})]})},Qw=(r,e)=>{let t;return(...s)=>{clearTimeout(t),t=setTimeout(()=>r(...s),e)}},Zw={red:"#DC2626",blue:"#2563EB",green:"#22C55E",yellow:"#E0B912",orange:"#F59E42",purple:"#A21CAF",pink:"#EC4899",black:"#222222",white:"#F0F0F0",silver:"#E5E7EB",gold:"#FFD700",brown:"#A0522D",gray:"#9CA3AF",grey:"#9CA3AF",beige:"#F5F5DC",teal:"#14B8A6",navy:"#1E3A8A",olive:"#808000",maroon:"#800000",cyan:"#06B6D4",magenta:"#D946EF",lime:"#84CC16",coral:"#FB7185",indigo:"#6366F1",violet:"#8B5CF6"},cse=()=>{const[r,e]=E.useState([]),[t,s]=E.useState(null),[a,i]=E.useState(""),[o,l]=E.useState([]),[c,u]=E.useState([]),[h,f]=E.useState(!0),[g,x]=E.useState(1),[y,b]=E.useState([]),[v,N]=E.useState(!1),[k,A]=E.useState(0),[R,_]=E.useState(""),[I,P]=E.useState(!1),[T,D]=E.useState(!1),[L,F]=E.useState(""),[z,O]=E.useState(0),[V,Y]=E.useState("right"),[H,$]=E.useState(!1),[X,G]=E.useState(!1),[B,Q]=E.useState(0),[ee,se]=E.useState(""),[le,Ee]=E.useState(""),[ue,Oe]=E.useState(null),[Pe,Ie]=E.useState(null),[ie,ze]=E.useState(null),[Ve,ce]=E.useState({buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),[ke,Qe]=E.useState(25e3),[me,$e]=E.useState(!1),{alerts:tt,addAlert:Ye,removeAlert:De}=Bl(),{id:Xe}=Lo(),st=us(),vt=Br(),Mt={new:"bg-amber-100 text-amber-800 border-amber-300",sale:"bg-emerald-100 text-emerald-800 border-emerald-300",trending:"bg-blue-100 text-blue-800 border-blue-300",default:"bg-gray-100 text-gray-800 border-gray-300"},as=["foremade fashion","clothing","shoes","accessories"];E.useEffect(()=>{(async()=>{try{const Ae=Ne(J,"settings","minimumPurchase"),Fe=await it(Ae);Fe.exists()&&Qe(Fe.data().amount||25e3)}catch(Ae){console.error("Error fetching minimum purchase:",Ae),Ye("Failed to fetch minimum purchase amount.","error",3e3)}})()},[Ye]),E.useEffect(()=>{(async()=>{try{const Ae=await Ke(_e(J,"dailyDeals"));e(Ae.docs.map(Fe=>({id:Fe.id,...Fe.data()})))}catch(Ae){console.error("Error fetching daily deals:",Ae)}})()},[]),E.useEffect(()=>{(async()=>{try{const Ae=Ne(J,"feeConfigurations","categoryFees"),Fe=await it(Ae);Fe.exists()&&ze(Fe.data())}catch(Ae){console.error("Error fetching fee configurations:",Ae)}})()},[]),E.useEffect(()=>{if(ie&&t?.category&&(ue?.price||t?.price)>0){const te=ue?.price||t.price,Ae=ie[t.category]||{buyerProtectionRate:.08,handlingRate:.2},Fe=te*Ae.buyerProtectionRate,gt=te*Ae.handlingRate,pt=te+Fe+gt;ce({buyerProtectionFee:Fe,handlingFee:gt,totalEstimatedPrice:pt,sellerEarnings:te})}},[ie,t?.category,ue?.price,t?.price]);const wt=te=>{if(!te||typeof te!="string")return"";const Fe=te.replace(/<[^>]+>/g,"").split(`
`);let gt=!1,pt=Fe.map(Ht=>{if(Ht=Ht.trim(),!Ht)return null;if(Ht=Ht.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),Ht=Ht.replace(/__(.*?)__/g,"<strong>$1</strong>"),Ht.startsWith("- ")||Ht.startsWith("* ")){const Qt=Ht.substring(2).trim();return gt?`<li class="mb-1">${Qt}</li>`:(gt=!0,`<ul class="list-disc ml-4"><li class="mb-1">${Qt}</li>`)}return gt?(gt=!1,`</ul><p class="mb-2">${Ht}</p>`):`<p class="mb-2">${Ht}</p>`}).filter(Boolean).join("");return gt&&(pt+="</ul>"),pt},Ge=E.useCallback(Qw(async te=>{if(!te){b([]);return}try{const Ae=ft(_e(J,"favorites"),rt("userId","==",te.uid)),gt=(await Ke(Ae)).docs.map(pt=>pt.data().productId);b(gt)}catch(Ae){console.error("Error fetching favorites:",Ae),Ye("Failed to load favorites.","error",3e3)}},500),[Ye]);E.useEffect(()=>{const te=ve.onAuthStateChanged(Ae=>{Ge(Ae)});return()=>te()},[Ge]),E.useEffect(()=>{window.scrollTo(0,0),f(!0),(async()=>{try{if(!Xe||typeof Xe!="string"||Xe.trim()===""||Xe.includes("/"))throw new Error("Invalid product ID");const Ae=Ne(J,"products",Xe),[Fe,gt]=await Promise.all([it(Ae),Ke(_e(J,"dailyDeals"))]);if(!Fe.exists())throw new Error("Product not found");const pt=Fe.data();if(pt.status!=="approved")throw new Error("Product not approved");let Ht="",Qt=[];if(pt.sellerId){const zs=Ne(J,"users",pt.sellerId),[re,Ue]=await Promise.all([it(zs),Ke(_e(J,`products/${Xe}/reviews`))]);if(re.exists()){const qe=re.data();Ht=qe.location?`${qe.location.city||""}, ${qe.location.state||""}, ${qe.location.country||""}`.trim().replace(/, ,/g,","):""}Qt=Ue.docs.map(qe=>{const ot=qe.data();let mt=ot.userName||"Anonymous";return typeof mt=="object"&&mt.name&&(mt=mt.name),{id:qe.id,...ot,userName:mt}})}i(Ht);let Rr=Array.isArray(pt.imageUrls)?pt.imageUrls:pt.imageUrl&&typeof pt.imageUrl=="string"?[pt.imageUrl]:["https://via.placeholder.com/600"],Ba=Array.isArray(pt.videoUrls)?pt.videoUrls:[];(Rr.length===0||!Rr[0])&&(Rr=["https://via.placeholder.com/600"]);const Ca=pt.category?.trim().toLowerCase()||"uncategorized",Hr=as.includes(Ca),Ut={id:Fe.id,name:pt.name||"Unnamed Product",description:pt.description||"",price:pt.price||0,stock:pt.stock||0,category:Ca,colors:pt.colors||[],sizes:Hr?pt.sizes||[]:[],condition:pt.condition||"New",imageUrls:Rr,videoUrls:Ba,tags:pt.tags||[],seller:pt.seller||{name:"Unknown Seller",id:pt.sellerId||""},sellerId:pt.sellerId||"",rating:pt.rating||Math.random()*2+3,reviews:Qt,status:pt.status||"pending",variants:pt.variants||[]},wn=gt.docs.map(zs=>({id:zs.id,...zs.data()})).find(zs=>zs.productId===Xe&&new Date(zs.endDate)>new Date&&new Date(zs.startDate)<=new Date);if(wn?(G(!0),Q((wn.discount*100).toFixed(2))):(G(!1),Q(0)),s(Ut),F(Ut.imageUrls[0]),O(0),Ut.colors.length>0&&se(Ut.colors[0]),Ut.sizes.length>0&&Ee(Ut.sizes[0]),Ut.variants.length>0){const zs=Ut.variants.find(re=>re.stock>0)||Ut.variants[0];Oe(zs),Ie(zs),se(zs.color),Ee(zs.size)}(()=>{const zs=JSON.parse(localStorage.getItem("recentSearches")||"[]"),re=Ut.variants.length&&ue?{color:ue.color,size:ue.size,price:ue.price,imageUrl:ue.imageUrls?.[0]||Ut.imageUrls[0]}:null,qe=[{id:Ut.id,name:Ut.name,imageUrl:re?.imageUrl||Ut.imageUrls[0],price:re?.price||Ut.price||0,category:Ut.category,status:Ut.status,variant:re},...zs.filter(ot=>ot.id!==Xe)].slice(0,5);localStorage.setItem("recentSearches",JSON.stringify(qe))})();const Ea=ft(_e(J,"products"),rt("category","==",Ut.category)),zo=(await Ke(Ea)).docs.map(zs=>{const re=zs.data();if(re.status!=="approved")return null;let Ue=re.variants&&re.variants.length>0&&re.variants[0]?.imageUrls?.[0]?re.variants[0].imageUrls[0]:re.imageUrl&&typeof re.imageUrl=="string"?re.imageUrl:Array.isArray(re.imageUrls)&&re.imageUrls[0]?re.imageUrls[0]:"https://via.placeholder.com/600";if(zs.id===Xe)return null;const qe=re.category?.trim().toLowerCase()||"uncategorized",ot=as.includes(qe);return{id:zs.id,name:re.name||"Unnamed Product",price:re.price||0,stock:re.stock||0,category:qe,colors:re.colors||[],sizes:ot?re.sizes||[]:[],condition:re.condition||"New",imageUrl:Ue,tags:re.tags||[],seller:re.seller||{name:"Unknown Seller",id:re.sellerId||""},rating:re.rating||Math.random()*2+3,status:re.status||"pending"}}).filter(zs=>zs&&zs.imageUrl);l(zo.slice(0,4))}catch(Ae){console.error("Error loading product:",Ae),s(null),l([]),Ye(Ae.message||"Failed to load product.","error",3e3),(Ae.message.includes("Product not found")||Ae.message.includes("Invalid product ID")||Ae.message.includes("Product not approved"))&&setTimeout(()=>{st("/products")},2e3)}finally{f(!1)}})()},[Xe,st]),E.useEffect(()=>{try{const Ae=JSON.parse(localStorage.getItem("recentSearches")||"[]").filter(Fe=>Fe&&Fe.id&&Fe.name).map(Fe=>({...Fe,imageUrl:Fe.variant?.imageUrl||Fe.imageUrl||"https://via.placeholder.com/600",price:typeof(Fe.variant?.price??Fe.price)=="number"&&!isNaN(Fe.variant?.price??Fe.price)?Fe.variant?.price??Fe.price:0}));u(Ae)}catch(te){console.error("Error loading recent searches:",te),u([])}},[]),E.useEffect(()=>{if(!t)return;const te=t.variants.length?ue||{imageUrls:[]}:null,Ae=t.variants.length?te.imageUrls.map(Fe=>({type:"image",url:Fe})).filter(Fe=>Fe.url):t.imageUrls.map(Fe=>({type:"image",url:Fe})).filter(Fe=>Fe.url);if(!Ae.length){F("https://via.placeholder.com/600"),O(0);return}F(Ae[0].url),O(0)},[t,ue]),E.useEffect(()=>{if(!t)return;const te=t.variants.length?ue||{imageUrls:[]}:null,Ae=t.variants.length?te.imageUrls.map(Fe=>({type:"image",url:Fe})).filter(Fe=>Fe.url):t.imageUrls.map(Fe=>({type:"image",url:Fe})).filter(Fe=>Fe.url);Ae.length>0?F(Ae[z]?.url||"https://via.placeholder.com/600"):F("https://via.placeholder.com/600")},[z,t,ue]);const Pt=async()=>{if(t)try{if(g>(ue?.stock||t.stock)){Ye(`Cannot add more than ${ue?.stock||t.stock} units of ${t.name}`,"error",3e3),x((ue?.stock||t.stock)>0?ue?.stock||t.stock:1);return}await ff(t.id,g,ve.currentUser?.uid,ee,le),Ye(`${t.name} added to cart!`,"success",3e3),x(1)}catch(te){console.error("Error adding to cart:",te),Ye("Failed to add to cart","error",3e3)}},bt=()=>{const Ae=(ue?.price||t.price)*g,Fe=Ae>1e4?.1:.02;return Math.round(Ae*Fe)},qt=async()=>{if(!t)return;if(g>(ue?.stock||t.stock)){Ye(`Cannot purchase more than ${ue?.stock||t.stock} units of ${t.name}`,"error",3e3),x((ue?.stock||t.stock)>0?ue?.stock||t.stock:1);return}const te=Ve.totalEstimatedPrice*g;if((X?Math.round(te*(1-B/100)):te)<ke){$e(!0);return}try{await ff(t.id,g,ve.currentUser?.uid,ee,le),setTimeout(()=>{st(`/checkout?productId=${t.id}&quantity=${g}&color=${encodeURIComponent(ee||"")}&size=${encodeURIComponent(le||"")}`)},100)}catch(Fe){console.error("Error adding to cart:",Fe),Ye("Failed to add to cart","error",3e3)}},Ct=async()=>{try{await ff(t.id,g,ve.currentUser?.uid,ee,le);const te=bt();setTimeout(()=>{st(`/checkout?productId=${t.id}&quantity=${g}&color=${encodeURIComponent(ee||"")}&size=${encodeURIComponent(le||"")}&additionalShippingFee=${te}`)},100)}catch(te){console.error("Error adding to cart:",te),Ye("Failed to add to cart","error",3e3)}finally{$e(!1)}},Bt=()=>{$e(!1),Ye("Purchase cancelled.","info",3e3)},Kt=te=>{st(`/product/${te}`,{state:{from:vt.pathname}})},Xt=async()=>{if(!t){Ye("No product selected","error",3e3);return}if(!ve.currentUser){Ye("Please log in to manage favorites","error",3e3);return}try{const te=_e(J,"favorites"),Ae=ft(te,rt("userId","==",ve.currentUser.uid),rt("productId","==",t.id)),Fe=await Ke(Ae);if(Fe.empty)await Za(te,{userId:ve.currentUser.uid,productId:t.id,createdAt:Ti()}),b(gt=>[...gt,t.id]),Ye("Added to favorites!","success",3e3);else{for(const gt of Fe.docs)gt.data().userId===ve.currentUser.uid&&await na(gt.ref);b(gt=>gt.filter(pt=>pt!==t.id)),Ye("Removed from favorites","success",3e3)}}catch(te){console.error("Error toggling favorite:",te),Ye("Failed to update favorites.","error",3e3)}},Js=async te=>{if(te.preventDefault(),!ve.currentUser){Ye("Please log in to submit a review","error",3e3);return}if(k<1||k>5){Ye("Please select a valid rating (1-5)","error",3e3);return}if(!R.trim()){Ye("Please enter a review comment","error",3e3);return}try{let Ae;try{const pt=localStorage.getItem("userData");Ae=pt?JSON.parse(pt).name||"Anonymous":ve.currentUser.displayName||"Anonymous"}catch{Ae=ve.currentUser.displayName||"Anonymous"}await Za(_e(J,`products/${Xe}/reviews`),{userId:ve.currentUser.uid,userName:Ae,rating:k,comment:R,date:Ti()}),Ye("Review submitted successfully!","success",3e3),A(0),_(""),D(!1);const gt=(await Ke(_e(J,`products/${Xe}/reviews`))).docs.map(pt=>{const Ht=pt.data();let Qt=Ht.userName||"Anonymous";return typeof Qt=="object"&&Qt.name&&(Qt=Qt.name),{id:pt.id,...Ht,userName:Qt}});s(pt=>({...pt,reviews:gt}))}catch(Ae){console.error("Error submitting review:",Ae),Ye("Failed to submit review","error",3e3)}},At=E.useCallback(Qw((te,Ae)=>{typeof te=="string"&&(te.startsWith("https://res.cloudinary.com/")||te.includes(".mp4"))&&(Y(Ae>z?"right":"left"),F(te),O(Ae),$(te.includes(".mp4")))},300),[z]),Vt=E.useCallback(Qw((te,Ae)=>{if(!t?.variants)return;const Fe=t.variants.find(gt=>gt.color===te&&gt.size===Ae);if(!Fe){Ye("Selected variant combination is unavailable.","error",3e3),ar();return}if(Fe.stock<=0){Ye("Selected variant is out of stock.","error",3e3),ar();return}Ie(ue),Oe(Fe),se(te),Ee(Ae),s(gt=>({...gt,price:Fe.price,stock:Fe.stock,imageUrls:Fe.imageUrls&&Fe.imageUrls.length>0?Fe.imageUrls:gt.imageUrls})),F(Fe.imageUrls&&Fe.imageUrls.length>0?Fe.imageUrls[0]:t.imageUrls[0]),O(0),x(1),Ye("Variant selected successfully!","success",3e3)},300),[t,ue,Ye]),ar=()=>{Pe&&(Oe(Pe),se(Pe.color),Ee(Pe.size),s(te=>({...te,price:Pe.price,stock:Pe.stock,imageUrls:Pe.imageUrls&&Pe.imageUrls.length>0?Pe.imageUrls:te.imageUrls})),F(Pe.imageUrls&&Pe.imageUrls.length>0?Pe.imageUrls[0]:t.imageUrls[0]),O(0),x(1))},Fs=(te,Ae)=>{const Fe=t?.variants?.find(gt=>gt.color===te&&gt.size===Ae);return Fe&&Fe.stock>0},nr=te=>!te||te.includes("via.placeholder.com")||te==="https://via.placeholder.com/600"?"/fallback-image.png":te;if(h)return n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx(sO,{type:"productDetail",count:1}),n.jsx(Co,{alerts:tt,removeAlert:De})]});if(!t)return n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-[#333333]",children:"Product not found or not approved."}),n.jsx(he,{to:"/products",className:"text-[#112d4e] hover:underline",children:"Back to Products"}),n.jsx(Co,{alerts:tt,removeAlert:De})]});const Ss=150,Ts=5,Us=t.description.length>Ss?`${t.description.substring(0,Ss)}...`:t.description,Ps=t.description.length>Ss,Pr=I?t.reviews:t.reviews?.slice(0,Ts),vs=t.variants.length?ue||{imageUrls:[]}:null,ws=t.variants.length?vs.imageUrls.map(te=>({type:"image",url:te})).filter(te=>te.url):t.imageUrls.map(te=>({type:"image",url:te})).filter(te=>te.url),be=(ue?.price||t.price)*g,de=Ve.totalEstimatedPrice*g,Se=X?Math.round(de*(1-B/100)):de,Je=t.reviews&&t.reviews.length>0?(t.reviews.reduce((te,Ae)=>te+Ae.rating,0)/t.reviews.length).toFixed(1):t.rating.toFixed(1);return n.jsxs("div",{className:"mb-[140px] container mx-auto px-4 py-6 md:py-8 relative",children:[n.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
          @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          .slide-in-right { animation: slideInRight 0.3s ease-out; }
          .slide-in-left { animation: slideInLeft 0.3s ease-out; }
          .main-media-container {
            position: relative;
            width: 100%;
            padding-top: 100%;
            overflow: hidden;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          }
          .main-media-container img, .main-media-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
          }
          .main-media-container:hover img, .main-media-container:hover video {
            transform: scale(1.05);
          }
          .thumbnail {
            transition: all 0.2s ease;
          }
          .thumbnail:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
          }
          .sticky-cart {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #F0F0F0;
            padding: 1rem;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
            z-index: 50;
          }
          .formatted-description strong {
            font-weight: 600;
          }
          .formatted-description ul {
            list-style: disc;
            margin-left: 1.5rem;
            margin-bottom: 0.5rem;
          }
          .formatted-description li {
            margin-bottom: 0.25rem;
          }
          .product-info-card {
            background: #F0F0F0;
            border: 1px solid #CCCCCC;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
          }
        //   .product-info-card:hover {
        //     transform: translateY(-2px);
        //     box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        //   }
          .price-section {
            background: #f0f0f0;
            border: 1px solid #cccccc;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
            color: #F0F0F0;
          }
          .selection-option {
            transition: all 0.2s ease;
            cursor: pointer;
          }
          .selection-option:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
          }
          .selection-option.selected {
            border-color: #E0B912;
            background-color: #E0B912;
            color: #333333;
            box-shadow: 0 0 0 2px rgba(224, 185, 18, 0.2);
          }
          .selection-option.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: #CCCCCC;
            border-color: #CCCCCC;
          }
          .info-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            padding: 0.375rem 0.75rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
            background: #F0F0F0;
            color: #333333;
            border: 1px solid #CCCCCC;
          }
          .info-badge:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          }
          .quantity-controls {
            display: flex;
            align-items: center;
            border: 1px solid #CCCCCC;
            border-radius: 0.5rem;
            overflow: hidden;
            background: #F0F0F0;
            max-width: 120px;
          }
          .quantity-controls button {
            background: #F0F0F0;
            border: none;
            padding: 0.5rem 0.75rem;
            transition: all 0.2s ease;
            cursor: pointer;
            color: #333333;
          }
          .quantity-controls button:hover {
            background: #112d4e;
            color: #F0F0F0;
          }
          .quantity-controls input {
            border: none;
            text-align: center;
            width: 3rem;
            padding: 0.5rem;
            background: #F0F0F0;
            color: #333333;
          }
          .quantity-controls input:focus {
            outline: none;
            box-shadow: inset 0 0 0 2px #E0B912;
          }
          .favorite-button {
            transition: all 0.3s ease;
            color: #333333;
          }
          .favorite-button:hover {
            transform: scale(1.2);
          }
          .favorite-button.active {
            transform: scale(1.1);
            color: gray;
          }
          .back-icon {
            transition: all 0.3s ease;
            color: #333333;
          }
          .back-icon:hover {
            transform: scale(1.2);
          }
          /* Modal Animation Styles */
          @keyframes modalFadeIn {
            from {
              opacity: 0;
              transform: scale(0.8);
            }
            to {
              opacity: 1;
              transform: scale(1);
            }
          }
          .modal-enter {
            animation: modalFadeIn 0.3s ease-out forwards;
          }
          @keyframes modalBackdropFadeIn {
            from {
              opacity: 0;
            }
            to {
              opacity: 0.5;
            }
          }
          .backdrop-enter {
            animation: modalBackdropFadeIn 0.3s ease-out forwards;
          }
        `}),me&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 transition-opacity duration-300 animate-fade",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full animate-scale-in",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-info-circle text-blue-500"}),"Shipping Fee Notice"]}),n.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Your purchase of"," ",n.jsx(lr,{price:Se,currency:t.currency||localStorage.getItem("currency")||"NGN"})," ","is below the minimum purchase amount of"," ",n.jsx(lr,{price:ke,currency:t.currency||localStorage.getItem("currency")||"NGN"}),". You will incur an additional shipping fee of"," ",n.jsx(lr,{price:bt(),currency:t.currency||localStorage.getItem("currency")||"NGN"}),". Would you like to proceed?"]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:Ct,className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition transform hover:scale-105",children:"Proceed"}),n.jsx("button",{onClick:Bt,className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-100 transition transform hover:scale-105",children:"Cancel"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-3",children:n.jsxs("div",{className:"sticky top-0 bg-white z-10",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-col-3 gap-6 animate-fadeIn",children:[n.jsxs("div",{className:"order-1",children:[n.jsx("div",{className:"relative main-media-container",children:ws.length>0&&ws[z].type==="image"?n.jsx("img",{src:nr(ws[z].url),alt:`${t.name} ${t.variants.length?`variant ${t.variants.findIndex(te=>te===ue)+1}`:""} image`,className:V==="right"?"slide-in-right":"slide-in-left",onError:te=>{te.target.onerror=null,te.target.src="/fallback-image.png"}}):ws.length>0&&ws[z].type==="video"?n.jsx("video",{src:ws[z].url,controls:!0,autoPlay:H,className:V==="right"?"slide-in-right":"slide-in-left",children:"Your browser does not support the video tag."}):n.jsx("img",{src:"/fallback-image.png",alt:"Placeholder Image",className:"animate-fadeIn"})}),ws.length>1&&n.jsx("div",{className:"flex justify-center space-x-2 mt-4 overflow-x-auto pb-2",children:ws.map((te,Ae)=>n.jsx("div",{className:`w-20 h-20 flex-shrink-0 cursor-pointer rounded-md overflow-hidden border-2 ${z===Ae?"border-[#112d4e]":"border-transparent"} thumbnail`,onClick:()=>At(te.url,Ae),children:te.type==="image"?n.jsx("img",{src:nr(te.url),alt:`Thumbnail ${Ae+1}`,className:"w-full h-full object-cover",onError:Fe=>{Fe.target.onerror=null,Fe.target.src="/fallback-image.png"}}):n.jsx("video",{src:te.url,className:"w-full h-full object-cover",children:"Your browser does not support the video tag."})},Ae))})]}),n.jsxs("div",{className:"order-2 md:order-2 product-info-card",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("button",{onClick:()=>st(-1),className:"flex items-center text-[#333333] hover:text-[#112d4e] back-icon mr-3","aria-label":"Back to previous page",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("h1",{className:"text-3xl font-bold text-[#333333] flex-grow",children:t.name}),n.jsx("button",{onClick:Xt,className:`favorite-button p-2 rounded-full ${y.includes(t.id)?"active text-[#DC2626]":"text-[#333333] hover:text-[#DC2626]"}`,"aria-label":y.includes(t.id)?"Remove from favorites":"Add to favorites",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})})]}),n.jsxs("div",{className:"price-section text-white text-center",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center",children:[n.jsx("p",{className:"text-2xl font-extrabold mb-2 sm:mb-0",children:n.jsx(lr,{price:Se,currency:t.currency||localStorage.getItem("currency")||"USD"})}),X&&n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm line-through text-black opacity-80",children:n.jsx(lr,{price:be,currency:t.currency||localStorage.getItem("currency")||"USD"})}),n.jsxs("p",{className:"text-lg font-semibold text-[#E0B912]",children:[B,"% OFF!"]})]})]}),n.jsx("p",{className:"text-sm mt-1 text-[#F0F0F0] opacity-90",children:"Total price (inclusive of fees)"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[n.jsxs("span",{className:"info-badge",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-[#112d4e]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.329 1.14l1.519 4.674c.3.921-.755 1.688-1.539 1.14l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.543-1.838-.219-1.539-1.14l1.519-4.674a1 1 0 00-.329-1.14l-3.976-2.888c-.784-.57-.381-1.81.588-1.81h4.915a1 1 0 00.95-.69l1.519-4.674z"})}),Je," (",t.reviews.length," reviews)"]}),n.jsxs("span",{className:"info-badge",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-[#112d4e]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.001 12.001 0 002.92 12c0 2.843.614 5.518 1.697 7.918l-.666 1.055c-.247.391.077.917.555.917h16.486c.478 0 .802-.526.555-.917l-.666-1.055c1.083-2.4 1.697-5.075 1.697-7.918a12.001 12.001 0 00-3.079-8.056z"})}),t.condition]}),n.jsxs(he,{to:`/seller/${t.sellerId}`,className:"info-badge hover:bg-gray-200",children:[n.jsx("i",{className:"ri-store-line"}),"Seller: ",t.seller.name]})]}),t.variants.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"font-semibold text-lg text-[#333333] mb-2",children:"Variants:"}),t.colors.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{className:"text-sm text-[#333333] mb-1",children:["Color:"," ",n.jsx("span",{className:"font-medium text-[#112d4e]",children:ee||"N/A"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:t.colors.map(te=>{const Ae=t.sizes.length>0?t.sizes.some(Fe=>Fs(te,Fe)):Fs(te,le);return n.jsx("button",{onClick:()=>Ae&&Vt(te,le),className:`selection-option p-2 rounded-lg border-2 flex items-center justify-center min-w-[32px] min-h-[32px] ${ee===te?"selected":Ae?"border-[#CCCCCC] bg-[#F0F0F0] text-[#333333] hover:bg-[#E0B912] hover:text-[#333333]":"disabled"}`,style:{backgroundColor:Zw[te.toLowerCase()]||te,borderColor:ee===te?"#E0B912":"#CCCCCC",color:te.toLowerCase()==="white"||te.toLowerCase()==="silver"||Zw[te.toLowerCase()]==="#F0F0F0"?"#333333":"#F0F0F0"},disabled:!Ae,"aria-label":`Select color ${te}`,title:Ae?te:"Color unavailable or out of stock",children:ee!==te&&(te.toLowerCase()==="white"||te.toLowerCase()==="silver")?n.jsx("div",{className:"w-5 h-5 rounded-full border border-gray-400",style:{backgroundColor:Zw[te.toLowerCase()]||te}}):null},te)})})]}),t.sizes.length>0&&n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-[#333333] mb-1",children:["Size:"," ",n.jsx("span",{className:"font-medium text-[#112d4e]",children:le||"N/A"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:t.sizes.map(te=>{const Ae=Fs(ee,te);return n.jsx("button",{onClick:()=>Ae&&Vt(ee,te),className:`selection-option px-4 py-2 rounded-lg border-2 ${le===te?"selected":Ae?"border-[#CCCCCC] bg-[#F0F0F0] text-[#333333] hover:bg-[#E0B912] hover:text-[#333333]":"disabled"}`,disabled:!Ae,"aria-label":`Select size ${te}`,title:Ae?te:"Size unavailable or out of stock",children:te},te)})})]}),t.variants.length>0&&!ue&&n.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Please select a valid variant combination."})]}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("p",{className:"text-sm font-semibold text-[#333333]",children:"Quantity:"}),n.jsxs("div",{className:"quantity-controls",children:[n.jsx("button",{onClick:()=>x(te=>Math.max(1,te-1)),"aria-label":"Decrease quantity",children:"-"}),n.jsx("input",{type:"number",value:g,onChange:te=>x(Math.max(1,parseInt(te.target.value)||1)),className:"no-arrows",min:"1",max:ue?.stock||t.stock,"aria-label":"Product quantity"}),n.jsx("button",{onClick:()=>x(te=>Math.min(te+1,ue?.stock||t.stock)),disabled:g>=(ue?.stock||t.stock),"aria-label":"Increase quantity",children:"+"})]})]}),n.jsxs("p",{className:`text-sm font-semibold ${(ue?.stock||t.stock)>0?"text-[#112d4e]":"text-[#DC2626]"}`,children:["Stock: ",ue?.stock||t.stock," units"]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[n.jsx("button",{onClick:Pt,disabled:!t.stock||g>t.stock,className:"flex-1 px-6 py-3 rounded-lg bg-[#ffffff] text-[#333333] font-semibold hover:bg-[#cccccc] focus:outline-none focus:ring-2 focus:ring-[#E0B912] focus:ring-offset-2 transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to Cart"}),n.jsx("button",{onClick:qt,disabled:!t.stock||g>t.stock,className:"flex-1 px-6 py-3 rounded-lg bg-[#112d4e] text-[#F0F0F0] font-semibold hover:bg-[#007F8B] focus:outline-none focus:ring-2 focus:ring-[#112d4e] focus:ring-offset-2 transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",children:"Pay Now"})]})]})]}),n.jsxs("div",{className:"product-info-card mt-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-[#333333] mb-4",children:"Description"}),n.jsx("div",{className:"text-[#555555] leading-relaxed formatted-description",dangerouslySetInnerHTML:{__html:wt(v?t.description:Us)}}),Ps&&n.jsx("button",{onClick:()=>N(!v),className:"text-[#112d4e] hover:underline mt-2 text-sm",children:v?"Show Less":"Read More"}),n.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.tags.map((te,Ae)=>{const Fe=Mt[te.toLowerCase()]||Mt.default;return n.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${Fe}`,children:te},Ae)})})]}),n.jsxs("div",{className:"product-info-card mt-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-[#333333] mb-4",children:["Customer Reviews (",t.reviews.length,")"]}),t.reviews.length===0?n.jsx("p",{className:"text-[#555555]",children:"No reviews yet. Be the first!"}):n.jsxs("div",{className:"space-y-4",children:[Pr.map(te=>n.jsxs("div",{className:"border-b border-[#CCCCCC] pb-4 last:border-b-0",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx("p",{className:"font-semibold text-[#333333]",children:te.userName}),n.jsx("span",{className:"ml-3 text-sm text-[#8D8D8D]",children:new Date(te.date?.toDate()).toLocaleDateString()})]}),n.jsxs("div",{className:"flex items-center mb-2",children:[[...Array(5)].map((Ae,Fe)=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${Fe<te.rating?"text-[#E0B912]":"text-[#CCCCCC]"}`,viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.329 1.14l1.07 3.292c.3.921-.755 1.688-1.539 1.14l-2.8-2.034a1 1 0 00-1.176 0l-2.8 2.034c-.783.543-1.838-.219-1.539-1.14l1.07-3.292a1 1 0 00-.329-1.14l-2.8-2.034c-.784-.57-.381-1.81.588-1.81h3.462a1 1 0 00.95-.69l1.07-3.292z"})},Fe)),n.jsx("span",{className:"ml-2 text-sm font-medium text-[#333333]",children:te.rating.toFixed(1)})]}),n.jsx("p",{className:"text-[#555555]",children:te.comment})]},te.id)),t.reviews.length>Ts&&n.jsx("button",{onClick:()=>P(!I),className:"text-[#112d4e] hover:underline mt-4 text-sm",children:I?"Show Less Reviews":"Show All Reviews"})]}),n.jsx("button",{onClick:()=>D(!T),className:"mt-6 px-4 py-2 bg-[#E0B912] text-[#333333] font-semibold rounded-lg hover:bg-[#FACC15] focus:outline-none focus:ring-2 focus:ring-[#E0B912] focus:ring-offset-2 transition duration-200 ease-in-out",children:T?"Cancel Review":"Write a Review"}),T&&n.jsxs("form",{onSubmit:Js,className:"mt-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"rating",className:"block text-sm font-medium text-[#333333] mb-2",children:"Rating:"}),n.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(te=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-8 w-8 cursor-pointer ${te<=k?"text-[#E0B912]":"text-[#CCCCCC]"}`,viewBox:"0 0 20 20",fill:"currentColor",onClick:()=>A(te),"aria-label":`Rate ${te} stars`,children:n.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.329 1.14l1.07 3.292c.3.921-.755 1.688-1.539 1.14l-2.8-2.034a1 1 0 00-1.176 0l-2.8 2.034c-.783.543-1.838-.219-1.539-1.14l1.07-3.292a1 1 0 00-.329-1.14l-2.8-2.034c-.784-.57-.381-1.81.588-1.81h3.462a1 1 0 00.95-.69l1.07-3.292z"})},te))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-[#333333] mb-2",children:"Comment:"}),n.jsx("textarea",{id:"comment",className:"w-full p-3 border border-[#CCCCCC] rounded-lg focus:ring-[#E0B912] focus:border-[#E0B912] outline-none text-[#333333] bg-[#F0F0F0]",rows:"4",value:R,onChange:te=>_(te.target.value),placeholder:"Share your thoughts on this product..."})]}),n.jsx("button",{type:"submit",className:"px-6 py-3 bg-[#112d4e] text-[#F0F0F0] font-semibold rounded-lg hover:bg-[#007F8B] focus:outline-none focus:ring-2 focus:ring-[#112d4e] focus:ring-offset-2 transition duration-200 ease-in-out",children:"Submit Review"})]})]})]})}),n.jsxs("div",{className:"lg:col-span-1",children:[o.length>0&&n.jsxs("div",{className:"product-info-card mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-[#333333] mb-4",children:"Similar Products"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-1 gap-4",children:o.map(te=>{const Ae=Array.isArray(te.variants)&&te.variants.length>0;let Fe=te.price,gt=te.price;if(Ae){const Qt=te.variants.map(Rr=>Rr.price).filter(Boolean);Fe=Math.min(...Qt),gt=Math.max(...Qt)}const pt=Ae?[...new Set(te.variants.map(Qt=>Qt.color).filter(Boolean))]:[],Ht=Ae?[...new Set(te.variants.map(Qt=>Qt.size).filter(Boolean))]:[];return n.jsxs("div",{className:"relative",children:[n.jsx(Vr,{product:te,dailyDeals:r,selectedColor:te.selectedColor||te.color||te.colors&&te.colors[0]||"",selectedSize:te.selectedSize||te.size||te.sizes&&te.sizes[0]||"",selectedVariant:te.selectedVariant||te.variants&&te.variants[0]||null,onClick:()=>Kt(te.id),isFavorite:y.includes(te.id),toggleFavorite:Xt,cardClassName:"h-[300px]",imageClassName:"!rounded-md h-[900px]",priceClassName:"!text-[#112d4e] h-[400px]",nameClassName:"!text-[#333333]",minPrice:Fe,maxPrice:gt,hasVariants:Ae}),Ae&&n.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-600",children:[pt.length>0&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(UN,{size:14}),pt.length," Color",pt.length>1?"s":""]}),Ht.length>0&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(zN,{size:14}),Ht.length," Size",Ht.length>1?"s":""]})]})]},te.id)})})]}),c.length>0&&n.jsxs("div",{className:"product-info-card",children:[n.jsx("h2",{className:"text-xl font-bold text-[#333333] mb-4",children:"Recently Viewed"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-1 gap-4",children:c.map(te=>{const Ae=Array.isArray(te.variants)&&te.variants.length>0;let Fe=te.price,gt=te.price;if(Ae){const Qt=te.variants.map(Rr=>Rr.price).filter(Boolean);Fe=Math.min(...Qt),gt=Math.max(...Qt)}const pt=Ae?[...new Set(te.variants.map(Qt=>Qt.color).filter(Boolean))]:[],Ht=Ae?[...new Set(te.variants.map(Qt=>Qt.size).filter(Boolean))]:[];return n.jsxs("div",{className:"relative",children:[n.jsx(Vr,{product:te,dailyDeals:r,selectedColor:te.selectedColor||te.color||te.colors&&te.colors[0]||"",selectedSize:te.selectedSize||te.size||te.sizes&&te.sizes[0]||"",selectedVariant:te.selectedVariant||te.variants&&te.variants[0]||null,onClick:()=>Kt(te.id),isFavorite:y.includes(te.id),toggleFavorite:Xt,cardClassName:"h-[300px]",imageClassName:"!rounded-md h-[900px]",priceClassName:"!text-[#112d4e] h-[400px]",nameClassName:"!text-[#333333]",minPrice:Fe,maxPrice:gt,hasVariants:Ae}),Ae&&n.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-600",children:[pt.length>0&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(UN,{size:14}),pt.length," Color",pt.length>1?"s":""]}),Ht.length>0&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(zN,{size:14}),Ht.length," Size",Ht.length>1?"s":""]})]})]},te.id)})})]})]})]}),n.jsx(Co,{alerts:tt,removeAlert:De})]})};function dse(){const[r,e]=E.useState(""),[t,s]=E.useState(""),[a,i]=E.useState(""),[o,l]=E.useState(""),[c,u]=E.useState(""),[h,f]=E.useState(!1),[g,x]=E.useState(null),y=us(),b=A=>/^\+?[1-9]\d{1,14}$/.test(A),v=async A=>{if(A.preventDefault(),s(""),i(""),u(""),!r.trim()){s("Phone number is required.");return}if(!b(r)){s("Please enter a valid phone number (e.g., +1234567890).");return}const R=ch();if(!R){s("Firebase Authentication not initialized.");return}try{const _=r.startsWith("+")?r:`+${r}`,I=await E7(R,_);x(I),f(!0),i("OTP sent to your phone number.")}catch(_){console.error("Error sending OTP:",_),s(k(_))}},N=async A=>{if(A.preventDefault(),u(""),!o){u("Please enter the OTP.");return}try{const _=(await g.confirm(o)).user;console.log("Phone number verified for user:",_.uid),localStorage.setItem("userPhone",r),i("Phone number verified successfully! Redirecting to login..."),setTimeout(()=>y("/login"),2e3)}catch(R){console.error("Error verifying OTP:",R),u(k(R))}},k=A=>{switch(A.code){case"auth/invalid-verification-code":return"Invalid OTP. Please try again.";case"auth/code-expired":return"OTP has expired. Please request a new one.";case"auth/invalid-phone-number":return"Invalid phone number format.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";default:return"An error occurred. Please try again."}};return n.jsx("div",{className:"container mx-auto px-4 py-8 bg-gray-100 text-gray-800",children:n.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Add Your Phone Number"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Please provide your phone number to proceed. Already have an account?"," ",n.jsx(he,{to:"/login",className:"text-blue-600 hover:underline",children:"Skip to Login"})]}),n.jsxs("form",{onSubmit:v,children:[n.jsxs("div",{className:"mb-4 relative",children:[n.jsx("input",{type:"tel",id:"phone",value:r,onChange:A=>e(A.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 peer ${t?"border-red-500":a?"border-green-500":"border-gray-300"}`,autoComplete:"tel"}),n.jsx("label",{htmlFor:"phone",className:"absolute left-3 -top-2 text-gray-500 text-xs bg-white px-1 transition-all duration-300 transform origin-left",children:"Phone Number"}),t&&n.jsx("p",{className:"text-red-600 text-[10px] mt-1",children:t})]}),h&&n.jsxs("div",{className:"mb-4 relative",children:[n.jsx("input",{type:"text",id:"otp",value:o,onChange:A=>l(A.target.value),className:`w-full p-3 border rounded-lg transition-all duration-300 peer ${c?"border-red-500":"border-gray-300"}`,autoComplete:"one-time-code"}),n.jsx("label",{htmlFor:"otp",className:"absolute left-3 -top-2 text-gray-500 text-xs bg-white px-1 transition-all duration-300 transform origin-left",children:"OTP"}),c&&n.jsx("p",{className:"text-red-600 text-[10px] mt-1",children:c}),n.jsx("button",{type:"button",onClick:N,className:"mt-2 bg-blue-900 text-white p-2 rounded-lg hover:bg-blue-800 transition duration-200",children:"Verify OTP"})]}),!h&&n.jsx("button",{type:"submit",className:"w-full bg-blue-900 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200",children:"Submit"}),a&&n.jsx("p",{className:"text-green-600 text-[10px] mb-4",children:a})]})]})})}const use="/assets/empty-cart-zEVFI3ed.svg",hse=({item:r,updateCartQuantity:e,removeFromCart:t})=>{const{convertPrice:s}=Eg(),[a,i]=E.useState(Ds),[o,l]=E.useState(null),[c,u]=E.useState({buyerProtectionRate:.08,handlingRate:.2}),[h,f]=E.useState(!1),[g,x]=E.useState(0),[y,b]=E.useState(!1),v=(P,T=1,D=0)=>{const L=D>0?P*D/100:0;return(P-L)*(1+c.buyerProtectionRate+c.handlingRate)*T};E.useEffect(()=>{const P=async()=>{try{const D=Ne(J,"feeConfigurations","categoryFees"),L=await it(D);if(L.exists()){const F=L.data(),z=o?.category||"default";u(F[z]||{buyerProtectionRate:.08,handlingRate:.2})}}catch(D){console.error("Error fetching fee config:",D)}},T=async()=>{if(!r||!r.productId){console.warn("Invalid cart item data:",r),l(null),i(Ds);return}try{const D=Ne(J,"products",r.productId),L=await it(D);if(L.exists()){const F=L.data();l({id:L.id,name:F.name||"Unnamed Product",price:Number(F.price)||0,stock:Number(F.stock)||0,category:F.category?.trim().toLowerCase()||"uncategorized",imageUrls:F.imageUrls||[]});const z=Array.isArray(F.imageUrls)?F.imageUrls.filter(Y=>typeof Y=="string"&&Y.startsWith("https://res.cloudinary.com/")):F.imageUrl&&typeof F.imageUrl=="string"&&F.imageUrl.startsWith("https://res.cloudinary.com/")?[F.imageUrl]:[];i(z.length>0?z[0]:Ds);const V=(await Ke(_e(J,"dailyDeals"))).docs.map(Y=>({id:Y.id,...Y.data()})).find(Y=>Y.productId===r.productId&&new Date(Y.endDate)>new Date&&new Date(Y.startDate)<=new Date);V?(f(!0),x(Number((V.discount*100).toFixed(2)))):(f(!1),x(0))}else console.warn(`Product ${r.productId} not found in Firestore.`),l(null),i(Ds)}catch(D){console.error("Product fetch error for cart item:",r.productId,":",D),l(null),i(Ds)}};P(),T()},[r]);const N=()=>{if(r.quantity<o.stock){const P=r.quantity+1;console.log("Incrementing quantity:",{productId:r.productId,newQuantity:P}),e(r.productId,P)}},k=()=>{if(r.quantity>1){const P=r.quantity-1;console.log("Decrementing quantity:",{productId:r.productId,newQuantity:P}),e(r.productId,P)}};if(!r||!r.productId||!o)return n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 rounded-lg",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:n.jsx("span",{className:"text-gray-500 text-xs",children:"Image N/A"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Product Not Found"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Item ID: ",r?.productId||"Unknown"]}),n.jsx("p",{className:"text-xs text-red-600",children:"This product is no longer available."})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{onClick:()=>t(r?.productId),className:"text-red-500 hover:text-red-700","aria-label":"Remove unavailable product from cart",children:n.jsx("i",{className:"bx bx-trash text-xl"})})})]});const A=o.stock===0,R=v(o.price,r.quantity,h?g:0);typeof r.variant?.price=="number"?r.variant.price:typeof r.price=="number"?r.price:o.price;const _=r.variant?.imageUrl&&typeof r.variant.imageUrl=="string"&&r.variant.imageUrl.startsWith("https://res.cloudinary.com/")?r.variant.imageUrl:r.variants?.length>0&&r.variants[0]?.imageUrls?.length>0&&r.variants[0].imageUrls[0].startsWith("https://res.cloudinary.com/")?r.variants[0].imageUrls[0]:a,I=(P,T=8)=>{const D=P.split(" ");return D.length>T?D.slice(0,T).join(" ")+"…":P};return n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 rounded-lg",children:[n.jsx(he,{to:`/product/${o.id}`,children:n.jsxs("div",{className:"relative w-16 h-16",children:[y&&n.jsx("div",{className:"absolute bottom-0 left-0 bg-red-600 text-white text-xs px-1 rounded",children:"Image Failed"}),n.jsx("img",{src:_,alt:o.name,className:"w-16 h-16 object-cover rounded",onError:P=>{y||(console.error("CartItem image load error:",{productId:r.productId,imageUrl:_}),b(!0),P.target.src=Ds)},onLoad:()=>{console.log("CartItem image loaded successfully:",{productId:r.productId,imageUrl:_,name:o.name}),b(!1)},loading:"lazy"})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(he,{to:`/product/${o.id}`,children:n.jsx("h3",{className:"text-sm font-bold text-gray-800",children:I(o.name)})}),h&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs text-blue-600 font-medium",children:n.jsx(lr,{price:R})}),n.jsx("p",{className:"text-xs text-gray-500 line-through",children:n.jsx(lr,{price:v(o.price,r.quantity,0)})})]}),!h&&n.jsx("p",{className:"text-xs text-gray-600",children:n.jsx(lr,{price:R})}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Stock:"," ",n.jsx("span",{className:A?"text-red-600":"text-green-600",children:A?"Out of stock":`${o.stock} units available`})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden",children:[n.jsx("button",{onClick:k,className:`px-1 py-1 text-gray-600 hover:bg-gray-200 transition ${r.quantity<=1||A?"opacity-50 cursor-not-allowed":""}`,disabled:r.quantity<=1||A,"aria-label":`Decrease quantity of ${o.name}`,children:n.jsx("i",{className:"bx bx-minus"})}),n.jsx("span",{className:"px-3 py-1 text-gray-800 font-medium",children:r.quantity}),n.jsx("button",{onClick:N,className:`px-1 py-1 text-gray-600 hover:bg-gray-200 transition ${r.quantity>=o.stock||A?"opacity-50 cursor-not-allowed":""}`,disabled:r.quantity>=o.stock||A,"aria-label":`Increase quantity of ${o.name}`,children:n.jsx("i",{className:"bx bx-plus"})})]}),n.jsx("button",{onClick:()=>{console.log("Removing item:",{productId:r.productId,name:o.name}),t(r.productId)},className:"text-red-500 hover:text-red-700","aria-label":`Remove ${o.name} from cart`,children:n.jsx("i",{className:"bx bx-trash text-xl"})})]})]})},mse=({totalPrice:r,cartItems:e,clearCart:t})=>{const{convertPrice:s}=Eg(),a=us(),[i,o]=E.useState({buyerProtectionRate:.08,handlingRate:.2}),[l,c]=E.useState(25e3);E.useEffect(()=>{const k=async()=>{try{const _=Ne(J,"feeConfigurations","categoryFees"),I=await it(_);if(I.exists()){const D=I.data(),L=e[0]?.product?.category||"default";o(D[L]||{buyerProtectionRate:.08,handlingRate:.2})}const P=Ne(J,"settings","minimumPurchase"),T=await it(P);T.exists()&&c(T.data().amount||25e3)}catch(_){console.error("Error fetching configs:",_)}},A=async()=>{try{return(await Ke(_e(J,"dailyDeals"))).docs.map(P=>({id:P.id,...P.data()})).filter(P=>new Date(P.endDate)>new Date&&new Date(P.startDate)<=new Date)}catch(_){return console.error("Error fetching daily deals:",_),[]}},R=async()=>{const _=await A();e.forEach(I=>{const P=_.find(T=>T.productId===I.product.id);P?(I.isDailyDeal=!0,I.discountPercentage=(P.discount*100).toFixed(2)):(I.isDailyDeal=!1,I.discountPercentage=0)})};e.length>0&&R(),k()},[e]);const u=(k,A=1,R=0)=>{const _=R>0?k*R/100:0;return(k-_)*(1+i.buyerProtectionRate+i.handlingRate)*A},h=e.reduce((k,A)=>k+u(A.product.price||0,A.quantity||1,A.discountPercentage||0),0),f=e.some(k=>k.quantity>(k.product?.stock||0)),g=e.length===0,x=e.reduce((k,A)=>k+(A.quantity||0),0),y=h<l,v=h+0,N=()=>{if(y){alert(`Minimum purchase amount is ₦${l.toLocaleString("en-NG")} to checkout.`);return}if(x>20){alert("Maximum basket size is 20 items.");return}a("/checkout")};return n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg shadow-sm",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Summary"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.map((k,A)=>k.isDailyDeal&&n.jsxs("div",{className:"flex justify-between text-xs text-green-600",children:[n.jsxs("span",{children:["Discount on ",k.product.name]}),n.jsxs("span",{children:["-",n.jsx(lr,{price:k.product.price*k.discountPercentage/100*k.quantity})]})]},A)),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal"}),n.jsx("span",{children:n.jsx(lr,{price:h})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Shipping"}),n.jsx("span",{className:"text-green-600 font-semibold",children:"FREE"})]}),n.jsxs("div",{className:"flex justify-between font-bold text-gray-800 border-t pt-2",children:[n.jsx("span",{children:"Grand Total"}),n.jsx("span",{children:n.jsx(lr,{price:v})})]})]}),y&&n.jsxs("p",{className:"text-red-600 text-xs mt-2 bg-red-50 p-2 rounded",children:["❌ Minimum purchase amount is ",n.jsx(lr,{price:l})," to checkout."]}),x>20&&n.jsx("p",{className:"text-red-600 text-xs mt-2 bg-red-50 p-2 rounded",children:"❌ Maximum basket size is 20 items."}),n.jsxs("div",{className:"mt-4 flex gap-3",children:[n.jsx("button",{onClick:N,className:`flex-1 px-6 py-2 rounded-lg text-white transition ${g||f||y||x>20?"bg-gray-400 cursor-not-allowed":"bg-[#112d4e] hover:bg-[#112d4e]"}`,disabled:g||f||y||x>20,children:"Checkout"}),n.jsx("button",{onClick:t,className:`px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition ${g?"opacity-50 cursor-not-allowed":""}`,disabled:g,children:"Clear Cart"})]})]})},fse=()=>{const r=us(),[e,t]=E.useState([]),[s,a]=E.useState(null),[i,o]=E.useState(!0),[l,c]=E.useState(null),[u,h]=E.useState(0),[f,g]=E.useState([]);E.useEffect(()=>{const A=()=>{h(window.scrollY)};return window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)},[]),E.useEffect(()=>{(async()=>{try{if(e.length===0){g([]);return}const R=[...new Set(e.map(P=>P.product.category).filter(Boolean))];if(R.length===0){g([]);return}const _=e.map(P=>P.productId),I=[];for(const P of R){const T=ft(_e(J,"products"),rt("category","==",P),h6(4-I.length));if((await Ke(T)).forEach(L=>{const F=L.data();if(!_.includes(L.id)){const z=Array.isArray(F.imageUrls)&&F.imageUrls[0]&&typeof F.imageUrls[0]=="string"&&F.imageUrls[0].startsWith("https://")?F.imageUrls[0]:F.imageUrl&&typeof F.imageUrl=="string"&&F.imageUrl.startsWith("https://")?F.imageUrl:Ds;I.push({id:L.id,name:F.name||"Unnamed Product",price:Number(F.price)||0,imageUrl:z,stock:Number(F.stock)||0})}}),I.length>=4)break}g(I.slice(0,4))}catch(R){console.error("Error fetching recommended products:",R),g([])}})()},[e]),E.useEffect(()=>{const A=ve.onAuthStateChanged(async _=>{a(_);try{o(!0),c(null);let I=[];_?(await BX(_.uid),I=await Ui(_.uid)):I=await Ui(),console.log("Raw cart items from getCart:",I);const P=I.map(T=>{if(!T.product)return console.warn("Cart item missing product data:",{productId:T.productId,quantity:T.quantity}),null;const{product:D}=T;let L=D.imageUrl&&typeof D.imageUrl=="string"&&D.imageUrl.startsWith("https://")?D.imageUrl:Array.isArray(D.imageUrls)&&D.imageUrls[0]&&typeof D.imageUrls[0]=="string"&&D.imageUrls[0].startsWith("https://")?D.imageUrls[0]:Ds;return{...T,product:{id:D.id||T.productId,name:D.name||"Unnamed Product",price:Number(D.price)||0,stock:Number(D.stock)||0,category:D.category||"uncategorized",imageUrl:L,rating:D.rating||Math.random()*2+3,colors:D.colors||[],sizes:D.sizes||[],condition:D.condition||"New",sellerId:D.sellerId||""}}}).filter(T=>T?T.product.imageUrl&&typeof T.product.imageUrl=="string"&&(T.product.imageUrl.startsWith("https://")||T.product.imageUrl===Ds)?!0:(console.warn("Filtered out cart item with invalid imageUrl:",{productId:T.productId,name:T.product.name,imageUrl:T.product.imageUrl}),!1):(console.warn("Filtered out invalid cart item"),!1));console.log("Normalized cart items:",P),t(P),P.length===0&&c("Your cart is empty.")}catch(I){console.error("Error loading cart:",{message:I.message,code:I.code}),c("Failed to load cart. Please try again."),t([]),xe.error("Failed to load cart")}finally{o(!1)}}),R=async()=>{try{const _=await Ui(s?.uid);console.log("Raw cart items from handleCartUpdate:",_);const I=_.map(P=>{if(!P.product)return console.warn("Cart item missing product data:",{productId:P.productId,quantity:P.quantity}),null;const{product:T}=P;let D=T.imageUrl&&typeof T.imageUrl=="string"&&T.imageUrl.startsWith("https://")?T.imageUrl:Array.isArray(T.imageUrls)&&T.imageUrls[0]&&typeof T.imageUrls[0]=="string"&&T.imageUrls[0].startsWith("https://")?T.imageUrls[0]:Ds;return{...P,product:{id:T.id||P.productId,name:T.name||"Unnamed Product",price:Number(T.price)||0,stock:Number(T.stock)||0,category:T.category||"uncategorized",imageUrl:D,rating:T.rating||Math.random()*2+3,colors:T.colors||[],sizes:T.sizes||[],condition:T.condition||"New",sellerId:T.sellerId||""}}}).filter(P=>P?P.product.imageUrl&&typeof P.product.imageUrl=="string"&&(P.product.imageUrl.startsWith("https://")||P.product.imageUrl===Ds)?!0:(console.warn("Filtered out cart item with invalid imageUrl:",{productId:P.productId,name:P.product.name,imageUrl:P.product.imageUrl}),!1):!1);t(I),I.length===0?c("Your cart is empty."):c(null)}catch(_){console.error("Error updating cart:",{message:_.message,code:_.code}),c("Failed to update cart."),xe.error("Failed to update cart")}};return window.addEventListener("cartUpdated",R),()=>{A(),window.removeEventListener("cartUpdated",R)}},[s]);const x=async(A,R)=>{if(!(R<1))try{const _=e.find(P=>P.productId===A);if(_&&_.product&&R>_.product.stock){xe.error(`Cannot add more than ${_.product.stock} units of ${_.product.name}`);return}const I=e.map(P=>P.productId===A?{...P,quantity:R}:P);await fd(I,s?.uid),t(I),xe.success("Quantity updated")}catch(_){console.error("Error updating quantity:",{message:_.message,code:_.code}),xe.error("Failed to update quantity")}},y=async A=>{try{const R=e.filter(_=>_.productId!==A);await fd(R,s?.uid),t(R),xe.success("Item removed from cart"),R.length===0&&c("Your cart is empty.")}catch(R){console.error("Error removing item:",{message:R.message,code:R.code}),xe.error("Failed to remove item")}},b=async()=>{try{await Qb(s?.uid),t([]),c("Your cart is empty."),xe.success("Cart cleared successfully")}catch(A){console.error("Error clearing cart:",{message:A.message,code:A.code}),xe.error("Failed to clear cart")}},v=async()=>{if(!s){xe.error("Please log in to checkout"),r("/login");return}try{await VX(s.uid),xe.success("Order placed successfully!"),r("/orders")}catch(A){console.error("Error during checkout:",{message:A.message,code:A.code}),xe.error(A.message||"Checkout failed")}},N=async A=>{try{const R=e.find(T=>T.productId===A.id),_=R?R.quantity+1:1;if(_>A.stock){xe.error(`Cannot add more than ${A.stock} units of ${A.name}`);return}const I={productId:A.id,quantity:_,product:{id:A.id,name:A.name,price:A.price,stock:A.stock,category:A.category||"uncategorized",imageUrl:A.imageUrl}},P=R?e.map(T=>T.productId===A.id?{...T,quantity:_}:T):[...e,I];await ff(I,s?.uid),t(P),xe.success(`${A.name} added to cart`)}catch(R){console.error("Error adding to cart:",R),xe.error("Failed to add item to cart")}},k=e.reduce((A,R)=>A+(R.product?.price||0)*R.quantity,0);return i?n.jsxs("div",{className:"p-4 text-gray-600 text-center",children:[n.jsx(si,{}),"Loading..."]}):n.jsxs("div",{className:"mb-10 container mx-auto px-4 py-8 min-h-screen",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Your Cart"}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[n.jsxs("div",{className:"lg:w-2/3",children:[l&&e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("img",{src:use,alt:"Empty Cart",className:"h-[420px] m-3",onError:A=>{console.warn("Failed to load empty cart image:",A.target.src),A.target.src=Ds}}),n.jsxs("p",{className:"text-gray-600 m-3 text-md",children:[l,n.jsx(he,{to:"/products",className:"underline text-blue-500 ml-1",children:"Shop Now"})]})]}):n.jsx("div",{className:"space-y-4",children:e.map(A=>n.jsx(hse,{item:A,updateCartQuantity:x,removeFromCart:y},A.productId))}),f.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Customers Also Viewed"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map(A=>n.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm hover:shadow-md transition",children:[n.jsxs(he,{to:`/product/${A.id}`,children:[n.jsx("img",{src:A.imageUrl,alt:A.name,className:"w-full h-40 object-cover rounded mb-2",onError:R=>{console.warn("Failed to load recommended product image:",A.imageUrl),R.target.src=Ds}}),n.jsx("h3",{className:"text-sm font-semibold text-gray-800 truncate",children:A.name})]}),n.jsx("p",{className:"text-xs text-gray-600",children:n.jsx(lr,{price:A.price})}),n.jsx("button",{onClick:()=>N(A),className:`mt-2 w-full px-4 py-2 text-sm text-white rounded-lg transition ${A.stock===0?"bg-gray-400 cursor-not-allowed":"bg-[#112d4e] hover:bg-[#0f2a44]"}`,disabled:A.stock===0,children:A.stock===0?"Out of Stock":"Add to Cart"})]},A.id))})]})]}),n.jsx("div",{className:"lg:w-1/3",children:n.jsx(mse,{totalPrice:k,handleCheckout:v,cartItems:e,clearCart:b,isFixed:u>200})})]})]})};function gse(){const[r,e]=E.useState(!0),[t,s]=E.useState(""),[a,i]=E.useState(!1),[o,l]=E.useState(null),[c,u]=E.useState([]),[h,f]=E.useState([]),g=5;E.useEffect(()=>{const y=ve.onAuthStateChanged(async b=>{if(e(!0),!b){console.log("No authenticated user"),s("Please sign in to view your wishlist."),i(!0),u([]),f([]),e(!1);return}try{console.log("Fetching data for user:",b.uid);const v=localStorage.getItem("userData");let N={};v&&(N=JSON.parse(v)),l({email:b.email||"test@example.com",name:b.displayName||"User",profileImage:N.profileImage||null,createdAt:N.createdAt||null,address:N.address||"Not provided",uid:b.uid}),console.log("Querying favorites for user:",b.uid);const k=ft(_e(J,"favorites"),rt("userId","==",b.uid)),R=(await Ke(k)).docs.map(P=>(console.log("Favorite doc:",P.id,P.data()),{id:P.id,...P.data()}));u(R);const _=R.map(async P=>{const T=await it(Ne(J,"products",P.productId));if(T.exists()){const D=T.data();return{id:T.id,name:D.name,description:D.description||"",price:D.price,stock:D.stock||0,category:D.category?.trim().toLowerCase()||"",colors:D.colors||[],sizes:D.category?.trim().toLowerCase()==="foremade fashion"?D.sizes||[]:[],condition:D.condition||"",imageUrls:D.imageUrls||[],seller:D.seller||{name:"Unknown Seller"},rating:D.rating||Math.random()*2+3}}return console.warn("Product not found for favorite:",P.productId),null}),I=(await Promise.all(_)).filter(P=>P!==null);f(I)}catch(v){console.error("Error fetching favorites:",v.code,v.message,v.stack),s("Failed to load wishlist: "+(v.message||"Unknown error"))}finally{e(!1)}});return()=>y()},[]);const x=async(y,b)=>{if(!ve.currentUser){s("Please sign in to manage your wishlist."),i(!0);return}try{console.log("Removing favorite:",y,"for user:",ve.currentUser.uid);const v=await it(Ne(J,"favorites",y));if(!v.exists()){console.warn("Favorite not found:",y);return}if(v.data().userId!==ve.currentUser.uid){console.error("Cannot delete favorite with mismatched userId:",v.data()),s("Permission denied: Cannot remove this favorite.");return}await na(Ne(J,"favorites",y)),u(N=>N.filter(k=>k.id!==y)),f(N=>N.filter(k=>k.id!==b)),console.log("Removed favorite:",y)}catch(v){console.error("Error removing favorite:",v.code,v.message,v.stack),s("Failed to remove item from wishlist: "+(v.message||"Unknown error"))}};return r?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(si,{}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]}):t?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600",children:t}),a?n.jsx(he,{to:"/login",className:"text-blue-600 hover:underline",children:"Go to Login"}):n.jsx("button",{onClick:()=>{s(""),e(!0)},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]}):n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsx(_d,{userData:o,orderCount:g,wishlistCount:c.length}),n.jsx("div",{className:"md:w-3/4",children:n.jsxs("div",{className:"rounded-lg p-6  bg-gray-100",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsx("h3",{className:"text-lg font-semibold",children:"Favorites"})}),h.length===0?n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-block p-4 rounded-full mb-2 bg-gray-100",children:n.jsx("span",{className:"text-2xl",children:n.jsx(pee,{})})}),n.jsx("p",{className:"text-gray-400",children:"No items in your wish list!"})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-4",children:h.map(y=>n.jsxs("div",{className:"relative",children:[n.jsx(Vr,{product:{...y,imageUrl:y.imageUrls[0]||""}}),n.jsx("button",{onClick:()=>{const b=c.find(v=>v.productId===y.id);b&&x(b.id,y.id)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",title:"Remove from Wishlist",children:n.jsx("i",{className:"bx bx-x"})})]},y.id))})]})})]})})}function pse(){const[r,e]=E.useState(!0),[t,s]=E.useState(""),[a,i]=E.useState(!1),[o,l]=E.useState(null),[c,u]=E.useState(localStorage.getItem("profileImage")||"https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"),h=3,f=0,[g,x]=E.useState(null);E.useEffect(()=>{const b=ve.onAuthStateChanged(async N=>{if(e(!0),!N){s("Please sign in to view your profile."),i(!0),e(!1);return}try{const k=Ne(J,"users",N.uid),A=os(k,R=>{if(R.exists()){const _=R.data(),I=_.addresses||[];l({email:N.email||"test@example.com",username:_.username||N.displayName||"emmachi789",name:_.name||N.displayName||"Emmanuel Chinecherem",createdAt:_.createdAt||"2025-05-04T23:28:48.857Z",address:I[0]?.street?`${I[0].street}, ${I[0].city}, ${I[0].state}, ${I[0].postalCode}, ${I[0].country}`:"Not provided",country:_.country||"Nigeria",phone:_.phone||"+234-8052975966",uid:N.uid})}else s("User profile not found.")});return e(!1),()=>A()}catch(k){k.code==="permission-denied"?(s("You do not have permission to view this profile."),i(!0)):s("Failed to load profile. Please try again."),e(!1)}}),v=()=>{u(localStorage.getItem("profileImage")||"https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg")};return window.addEventListener("profileImageUpdated",v),()=>{b(),window.removeEventListener("profileImageUpdated",v)}},[]);const y=b=>{if(!b)return"Not available";try{return new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(v){return console.error("Error formatting date:",v),"Invalid date"}};return r?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(si,{}),n.jsx("p",{className:"text-gray-600 mt-4",children:"Loading your profile..."})]}):t?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:t}),a?n.jsx(he,{to:"/login",className:"text-blue-600 hover:underline inline-block",children:"Go to Login"}):n.jsx("button",{onClick:()=>{s(""),e(!0)},className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 shadow-md",children:"Retry"})]}):o?n.jsx("div",{className:"container mx-auto px-4 py-8 text-primary-color",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsx(_d,{}),n.jsxs("div",{className:"md:w-3/4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[n.jsx("div",{className:"rounded-lg p-4 text-center bg-gradient-to-br from-background-light to-white border border-border-light cursor-pointer",children:n.jsxs(he,{to:"/orders",className:"block",children:[n.jsx("i",{className:"bx bx-package text-2xl text-secondary-color mb-2"}),n.jsx("p",{className:"text-primary-color/60",children:"Orders"}),n.jsx("p",{className:"text-lg font-semibold text-primary-color",children:"9"})]})}),n.jsx("div",{className:"rounded-lg p-4 text-center bg-gradient-to-br from-background-light to-white border border-border-light cursor-pointer",children:n.jsxs(he,{to:"/favorites",className:"block",children:[n.jsx("i",{className:"bx bx-heart text-2xl text-secondary-color mb-2"}),n.jsx("p",{className:"text-primary-color/60",children:"Wish List"}),n.jsx("p",{className:"text-lg font-semibold text-primary-color",children:h})]})}),n.jsxs("div",{className:"rounded-lg p-4 text-center bg-gradient-to-br from-background-light to-white border border-border-light cursor-pointer",children:[n.jsx("i",{className:"bx bx-star text-2xl text-accent-color mb-2"}),n.jsx("p",{className:"text-primary-color/60",children:"Loyalty Points"}),n.jsxs("p",{className:"text-lg font-semibold text-primary-color",children:[f," ",n.jsx("i",{className:"bx bx-star text-accent-color"})]})]})]}),n.jsxs("div",{className:"rounded-lg p-6 mb-6 bg-background-light border border-border-light shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-primary-color",children:"Personal Details"}),n.jsxs(he,{to:"/setting",className:"flex items-center px-4 py-2 rounded-lg bg-accent-color/10 text-accent-color hover:bg-accent-color/20 transition duration-200",children:[n.jsx("i",{className:"bx bx-edit mr-1"})," Edit Profile"]})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-24 h-24 bg-background-light rounded-full flex items-center justify-center overflow-hidden border-2 border-secondary-color shadow-lg",children:n.jsx("img",{src:c,alt:"Profile",className:"w-full h-full object-cover",onError:b=>{b.target.src="https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"}})}),n.jsxs("div",{className:"ml-2",children:[n.jsx("h2",{className:"text-xl font-bold text-primary-color",children:o.name}),n.jsxs("p",{className:"text-primary-color/60",children:["Member since ",y(o.createdAt)]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{label:"Username",value:o.username},{label:"First Name",value:o.name.split(" ")[0]},{label:"Last Name",value:o.name.split(" ").slice(1).join(" ")||"-"},{label:"Email",value:o.email,icon:"bx-check-circle",iconColor:"text-secondary-color"},{label:"Country",value:o.country},{label:"Phone",value:o.phone},{label:"Date Joined",value:y(o.createdAt)},{label:"Address",value:o.address}].map((b,v)=>n.jsx("div",{className:"group",children:n.jsxs("div",{className:"p-3 rounded-lg bg-background-light border border-border-light",children:[n.jsx("p",{className:"text-primary-color/60 text-sm",children:b.label}),n.jsxs("p",{className:"font-semibold text-primary-color flex items-center",children:[b.value,b.icon&&n.jsx("i",{className:`bx ${b.icon} ml-2 ${b.iconColor}`})]})]})},v))})]}),n.jsxs("div",{className:"rounded-lg p-6 mb-6 bg-background-light border border-border-light shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-primary-color",children:"User Address"}),n.jsxs(he,{to:"/setting",className:"flex items-center px-4 py-2 rounded-lg bg-accent-color/10 text-accent-color hover:bg-accent-color/20 transition duration-200",children:[n.jsx("i",{className:"bx bx-map mr-1"})," Update Address"]})]}),n.jsx("div",{className:"p-4 bg-background-light rounded-lg border border-border-light",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("i",{className:"bx bx-map-pin text-secondary-color mr-2 text-xl mt-1"}),n.jsx("p",{className:"font-semibold text-primary-color",children:o.address})]})})]})]})]})}):n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:"User data not available."}),n.jsx("button",{onClick:()=>e(!0),className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 shadow-md",children:"Retry"})]})}var iO="basil",xse=function(e){return e===3?"v3":e},oO="https://js.stripe.com",bse="".concat(oO,"/").concat(iO,"/stripe.js"),yse=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,vse=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var wse=function(e){return yse.test(e)||vse.test(e)},Nse=function(){for(var e=document.querySelectorAll('script[src^="'.concat(oO,'"]')),t=0;t<e.length;t++){var s=e[t];if(wse(s.src))return s}return null},gR=function(e){var t="",s=document.createElement("script");s.src="".concat(bse).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(s),s},jse=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.7.0",startTime:t})},Om=null,Nx=null,jx=null,kse=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Sse=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},_se=function(e){return Om!==null?Om:(Om=new Promise(function(t,s){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var a=Nse();if(!(a&&e)){if(!a)a=gR(e);else if(a&&jx!==null&&Nx!==null){var i;a.removeEventListener("load",jx),a.removeEventListener("error",Nx),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=gR(e)}}jx=Sse(t,s),Nx=kse(s),a.addEventListener("load",jx),a.addEventListener("error",Nx)}catch(o){s(o);return}}),Om.catch(function(t){return Om=null,Promise.reject(t)}))},Ase=function(e,t,s){if(e===null)return null;var a=t[0],i=a.match(/^pk_test/),o=xse(e.version),l=iO;i&&o!==l&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.7.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,t);return jse(c,s),c},Lm,lO=!1,cO=function(){return Lm||(Lm=_se(null).catch(function(e){return Lm=null,Promise.reject(e)}),Lm)};Promise.resolve().then(function(){return cO()}).catch(function(r){lO||console.warn(r)});var Cse=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];lO=!0;var a=Date.now();return cO().then(function(i){return Ase(i,t,a)})},Jw={exports:{}},e1,pR;function Ese(){if(pR)return e1;pR=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return e1=r,e1}var t1,xR;function Tse(){if(xR)return t1;xR=1;var r=Ese();function e(){}function t(){}return t.resetWarningCache=e,t1=function(){function s(o,l,c,u,h,f){if(f!==r){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function a(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},t1}var bR;function dO(){return bR||(bR=1,Jw.exports=Tse()()),Jw.exports}var Pse=dO();const Jt=mb(Pse);function yR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function vR(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yR(Object(t),!0).forEach(function(s){uO(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yR(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function u0(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u0=function(e){return typeof e}:u0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0(r)}function uO(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Rse(r,e){if(r==null)return{};var t={},s=Object.keys(r),a,i;for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function Ise(r,e){if(r==null)return{};var t=Rse(r,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function hO(r,e){return Dse(r)||Mse(r,e)||Ose(r,e)||Lse()}function Dse(r){if(Array.isArray(r))return r}function Mse(r,e){var t=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(t!=null){var s=[],a=!0,i=!1,o,l;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(s.push(o.value),!(e&&s.length===e));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw l}}return s}}function Ose(r,e){if(r){if(typeof r=="string")return wR(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wR(r,e)}}function wR(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=r[t];return s}function Lse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mn=function(e,t,s){var a=!!s,i=cs.useRef(s);cs.useEffect(function(){i.current=s},[s]),cs.useEffect(function(){if(!a||!e)return function(){};var o=function(){i.current&&i.current.apply(i,arguments)};return e.on(t,o),function(){e.off(t,o)}},[a,t,e,i])},VN=function(e){var t=cs.useRef(e);return cs.useEffect(function(){t.current=e},[e]),t.current},th=function(e){return e!==null&&u0(e)==="object"},Fse=function(e){return th(e)&&typeof e.then=="function"},Use=function(e){return th(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},NR="[object Object]",zse=function r(e,t){if(!th(e)||!th(t))return e===t;var s=Array.isArray(e),a=Array.isArray(t);if(s!==a)return!1;var i=Object.prototype.toString.call(e)===NR,o=Object.prototype.toString.call(t)===NR;if(i!==o)return!1;if(!i&&!s)return e===t;var l=Object.keys(e),c=Object.keys(t);if(l.length!==c.length)return!1;for(var u={},h=0;h<l.length;h+=1)u[l[h]]=!0;for(var f=0;f<c.length;f+=1)u[c[f]]=!0;var g=Object.keys(u);if(g.length!==l.length)return!1;var x=e,y=t,b=function(N){return r(x[N],y[N])};return g.every(b)},mO=function(e,t,s){return th(e)?Object.keys(e).reduce(function(a,i){var o=!th(t)||!zse(e[i],t[i]);return s.includes(i)?(o&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),a):o?vR(vR({},a||{}),{},uO({},i,e[i])):a},null):null},fO="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",jR=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fO;if(e===null||Use(e))return e;throw new Error(t)},Vse=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fO;if(Fse(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(a){return jR(a,t)})};var s=jR(e,t);return s===null?{tag:"empty"}:{tag:"sync",stripe:s}},Bse=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"3.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},sy=cs.createContext(null);sy.displayName="ElementsContext";var gO=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},pO=function(e){var t=e.stripe,s=e.options,a=e.children,i=cs.useMemo(function(){return Vse(t)},[t]),o=cs.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(s):null}}),l=hO(o,2),c=l[0],u=l[1];cs.useEffect(function(){var g=!0,x=function(b){u(function(v){return v.stripe?v:{stripe:b,elements:b.elements(s)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(y){y&&g&&x(y)}):i.tag==="sync"&&!c.stripe&&x(i.stripe),function(){g=!1}},[i,c,s]);var h=VN(t);cs.useEffect(function(){h!==null&&h!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[h,t]);var f=VN(s);return cs.useEffect(function(){if(c.elements){var g=mO(s,f,["clientSecret","fonts"]);g&&c.elements.update(g)}},[s,f,c.elements]),cs.useEffect(function(){Bse(c.stripe)},[c.stripe]),cs.createElement(sy.Provider,{value:c},a)};pO.propTypes={stripe:Jt.any,options:Jt.object};var Hse=function(e){var t=cs.useContext(sy);return gO(t,e)},$se=function(){var e=Hse("calls useElements()"),t=e.elements;return t};Jt.func.isRequired;var xO=cs.createContext(null);xO.displayName="CheckoutSdkContext";var Wse=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},Yse=cs.createContext(null);Yse.displayName="CheckoutContext";Jt.any,Jt.shape({fetchClientSecret:Jt.func.isRequired,elementsOptions:Jt.object}).isRequired;var BN=function(e){var t=cs.useContext(xO),s=cs.useContext(sy);if(t&&s)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?Wse(t,e):gO(s,e)},qse=["mode"],Xse=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Er=function(e,t){var s="".concat(Xse(e),"Element"),a=function(c){var u=c.id,h=c.className,f=c.options,g=f===void 0?{}:f,x=c.onBlur,y=c.onFocus,b=c.onReady,v=c.onChange,N=c.onEscape,k=c.onClick,A=c.onLoadError,R=c.onLoaderStart,_=c.onNetworksChange,I=c.onConfirm,P=c.onCancel,T=c.onShippingAddressChange,D=c.onShippingRateChange,L=BN("mounts <".concat(s,">")),F="elements"in L?L.elements:null,z="checkoutSdk"in L?L.checkoutSdk:null,O=cs.useState(null),V=hO(O,2),Y=V[0],H=V[1],$=cs.useRef(null),X=cs.useRef(null);mn(Y,"blur",x),mn(Y,"focus",y),mn(Y,"escape",N),mn(Y,"click",k),mn(Y,"loaderror",A),mn(Y,"loaderstart",R),mn(Y,"networkschange",_),mn(Y,"confirm",I),mn(Y,"cancel",P),mn(Y,"shippingaddresschange",T),mn(Y,"shippingratechange",D),mn(Y,"change",v);var G;b&&(e==="expressCheckout"?G=b:G=function(){b(Y)}),mn(Y,"ready",G),cs.useLayoutEffect(function(){if($.current===null&&X.current!==null&&(F||z)){var Q=null;if(z)switch(e){case"payment":Q=z.createPaymentElement(g);break;case"address":if("mode"in g){var ee=g.mode,se=Ise(g,qse);if(ee==="shipping")Q=z.createShippingAddressElement(se);else if(ee==="billing")Q=z.createBillingAddressElement(se);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Q=z.createExpressCheckoutElement(g);break;case"currencySelector":Q=z.createCurrencySelectorElement();break;case"taxId":Q=z.createTaxIdElement(g);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else F&&(Q=F.create(e,g));$.current=Q,H(Q),Q&&Q.mount(X.current)}},[F,z,g]);var B=VN(g);return cs.useEffect(function(){if($.current){var Q=mO(g,B,["paymentRequest"]);Q&&"update"in $.current&&$.current.update(Q)}},[g,B]),cs.useLayoutEffect(function(){return function(){if($.current&&typeof $.current.destroy=="function")try{$.current.destroy(),$.current=null}catch{}}},[]),cs.createElement("div",{id:u,className:h,ref:X})},i=function(c){BN("mounts <".concat(s,">"));var u=c.id,h=c.className;return cs.createElement("div",{id:u,className:h})},o=t?i:a;return o.propTypes={id:Jt.string,className:Jt.string,onChange:Jt.func,onBlur:Jt.func,onFocus:Jt.func,onReady:Jt.func,onEscape:Jt.func,onClick:Jt.func,onLoadError:Jt.func,onLoaderStart:Jt.func,onNetworksChange:Jt.func,onConfirm:Jt.func,onCancel:Jt.func,onShippingAddressChange:Jt.func,onShippingRateChange:Jt.func,options:Jt.object},o.displayName=s,o.__elementType=e,o},Tr=typeof window>"u",Gse=cs.createContext(null);Gse.displayName="EmbeddedCheckoutProviderContext";var Kse=function(){var e=BN("calls useStripe()"),t=e.stripe;return t};Er("auBankAccount",Tr);var kR=Er("card",Tr);Er("cardNumber",Tr);Er("cardExpiry",Tr);Er("cardCvc",Tr);Er("fpxBank",Tr);Er("iban",Tr);Er("idealBank",Tr);Er("p24Bank",Tr);Er("epsBank",Tr);Er("payment",Tr);Er("expressCheckout",Tr);Er("currencySelector",Tr);Er("paymentRequestButton",Tr);Er("linkAuthentication",Tr);Er("address",Tr);Er("shippingAddress",Tr);Er("paymentMethodMessaging",Tr);Er("affirmMessage",Tr);Er("afterpayClearpayMessage",Tr);Er("taxId",Tr);const bO=({email:r,amount:e,onSuccess:t,onClose:s,disabled:a,buttonText:i,className:o,iconClass:l,sellerId:c,handlingFee:u,buyerProtectionFee:h})=>{const[f,g]=E.useState(!1),[x,y]=E.useState(!1);E.useEffect(()=>{const v=document.createElement("script");return v.src="https://js.paystack.co/v1/inline.js",v.async=!0,v.onload=()=>y(!0),v.onerror=()=>{xe.error("Failed to load Paystack script."),y(!1)},document.body.appendChild(v),()=>{document.body.removeChild(v)}},[]);const b=async()=>{if(!x||!window.PaystackPop){xe.error("Paystack not loaded.");return}if(!r||!e||e<=0||!c){xe.error("Valid email, amount, and seller ID required.");return}g(!0);try{const v="https://foremade-backend.onrender.com",N=Math.round(e),k={amount:N,email:r,currency:"NGN",metadata:{userId:ve.currentUser?.uid||"anonymous",orderId:`order-${Date.now()}`,sellerId:c,handlingFee:u||0,buyerProtectionFee:h||0}};console.log("Sending payload to backend:",k);const{data:A}=await ss.post(`${v}/initiate-paystack-payment`,k);console.log("Backend response:",A),window.PaystackPop.setup({key:"pk_live_80ce5e6562afd9418a07b2fd2f1a261dbb62a9bd",email:r,amount:N,currency:"NGN",ref:A.reference,callback:_=>{console.log("Paystack callback:",_),t(_),g(!1)},onClose:()=>{console.log("Paystack iframe closed"),s(),g(!1)}}).openIframe()}catch(v){console.error("Paystack payment error:",{message:v.message,code:v.code,response:v.response?.data});const N=v.code==="ERR_NETWORK"?"Cannot connect to server. Ensure backend is running.":v.response?.data?.error||v.response?.data?.message||"Payment failed. Please try again.";xe.error(N),g(!1)}};return n.jsxs("button",{onClick:b,disabled:a||f||!x,className:`paystack-button ${o}`,children:[l&&n.jsx("i",{className:l}),f?"Processing...":i]})},Qse="/assets/card-B58Cq-kn.png",Zse={background:"#22c55e",color:"#fff",fontWeight:"bold",borderRadius:"8px",padding:"16px"},Jse=Cse("pk_test_51RJwNCPGKISqnQ1eXrTZH37wa2iPeGUasDwW90TOXdW5TU6LBvoGYdPxBdDTPDoVagtZZwu6VVAPRPMMD8Jp92bW001oXpiLHO"),SR=(r,e=5e3)=>new Promise(t=>{const s=new Image;s.src=r,s.onload=()=>t(!0),s.onerror=()=>t(!1),setTimeout(()=>t(!1),e)}),ere=()=>n.jsx("div",{className:"flex justify-between mb-8",children:["Cart","Shipping","Payment","Confirmation"].map((r,e)=>n.jsxs("div",{className:"flex-1 text-center",children:[n.jsx("div",{className:`w-8 h-8 mx-auto rounded-full flex items-center justify-center ${e<2?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:e+1}),n.jsx("p",{className:"text-sm mt-2 text-gray-600",children:r})]},r))}),tre=({isOpen:r,onConfirm:e,onCancel:t})=>r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Order"}),n.jsx("i",{className:"bx bx-loader bx-spin text-3xl"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to place this order and clear your cart?"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:e,className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Confirm"}),n.jsx("button",{onClick:t,className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-100 transition",children:"Cancel"})]})]})}),sre=({totalPrice:r,formData:e,onSuccess:t,onCancel:s,currency:a,setIsProcessing:i})=>{const o=Kse(),l=$se(),[c,u]=E.useState(!1),h=async f=>{if(f.preventDefault(),!o||!l){xe.error("Stripe not loaded. Please try again.",{position:"top-right",autoClose:3e3});return}u(!0),i(!0);try{const g=Math.round(r*100),x="https://foremade-backend.onrender.com";let y=3,b=null;for(;y>0;)try{const{data:v}=await ss.post(`${x}/create-payment-intent`,{amount:g,currency:a.toLowerCase(),metadata:{userId:ve.currentUser?.uid||"anonymous",orderId:`order-${Date.now()}`}},{timeout:15e3}),{error:N,paymentIntent:k}=await o.confirmCardPayment(v.clientSecret,{payment_method:{card:l.getElement(kR),billing_details:{name:e.name,email:e.email,phone:e.phone,address:{line1:e.address,city:e.city,postal_code:e.postalCode,country:a==="GBP"?"GB":"NG"}}}});if(N){xe.error(N.message,{position:"top-right",autoClose:3e3});return}if(k.status==="succeeded"){await t(k),u(!1),i(!1);return}}catch(v){if(b=v,y--,v.code!=="ECONNABORTED"||y===0)throw v;xe.warn(`Retrying payment (${y} attempts left)...`,{position:"top-right",autoClose:2e3}),await new Promise(N=>setTimeout(N,2e3))}throw b||new Error("Payment failed after retries.")}catch(g){console.error("Stripe payment error:",{message:g.message,code:g.code,response:g.response?.data}),console.log("Logging to Sentry:",g),xe.error(g.code==="ECONNABORTED"?"Payment timed out. Please try again or check your connection.":g.message||"Payment failed. Try again.",{position:"top-right",autoClose:3e3}),u(!1),i(!1)}};return n.jsxs("form",{onSubmit:h,className:"mt-6 space-y-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Details"}),n.jsx(kR,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",disabled:c||!o||!l,className:`flex-1 py-3 px-4 rounded-lg text-white text-sm font-medium transition duration-200 shadow transform hover:scale-105 ${c||!o||!l?"bg-gray-400 cursor-not-allowed":"bg-[#112d4e] hover:bg-[#0e2740]"}`,"aria-label":"Checkout",children:c?"Processing...":`Pay ${a} ${r.toLocaleString("en-US",{minimumFractionDigits:2})}`}),n.jsx("button",{type:"button",onClick:s,disabled:c,className:"px-4 py-3 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition text-sm disabled:opacity-50 transform hover:scale-105","aria-label":"Cancel Payment",children:"Cancel"})]})]})},rre=()=>{const r=us(),e=Br(),[t,s]=E.useState([]),[a,i]=E.useState([]),[o,l]=E.useState(!0),[c,u]=E.useState(!1),[h,f]=E.useState(()=>{const me=localStorage.getItem("checkoutFormData");return me?JSON.parse(me):{name:"",email:"",address:"",city:"",postalCode:"",country:"Nigeria",phone:"",saveInfo:!1}}),[g,x]=E.useState({}),[y,b]=E.useState({}),[v,N]=E.useState({}),[k,A]=E.useState({}),[R,_]=E.useState(!1),[I,P]=E.useState(!1),[T,D]=E.useState(!1),[L,F]=E.useState(null),[z,O]=E.useState(25e3),V=E.useRef(null),Y=!1,H=new URLSearchParams(e.search),$=parseFloat(H.get("additionalShippingFee"))||0;E.useEffect(()=>{localStorage.setItem("checkoutFormData",JSON.stringify(h))},[h]),E.useEffect(()=>{const me=async()=>{try{l(!0);const De=ve.currentUser,Xe=Ne(J,"settings","minimumPurchase"),st=await it(Xe);st.exists()&&O(st.data().amount||25e3);const vt=Ne(J,"feeConfigurations","categoryFees"),Mt=await it(vt);N(Mt.exists()?Mt.data():{});const Ge=(await Ke(_e(J,"dailyDeals"))).docs.map(Ct=>({id:Ct.id,...Ct.data()})).filter(Ct=>new Date(Ct.endDate)>new Date&&new Date(Ct.startDate)<=new Date);i(Ge);const Pt=await Ui(De?.uid);console.log("Loaded cart items:",JSON.stringify(Pt,null,2));const qt=(await Promise.all(Pt.map(async Ct=>{if(!Ct.productId||!Ct.product)return console.warn("Invalid cart item:",Ct),null;const Bt=Ct.product||{};let Kt=[];Array.isArray(Bt.imageUrls)?Kt=Bt.imageUrls.filter(be=>typeof be=="string"&&be.match(/^https?:\/\/.+/i)):Bt.imageUrl&&typeof Bt.imageUrl=="string"&&Bt.imageUrl.match(/^https?:\/\/.+/i)&&(Kt=[Bt.imageUrl]);const Xt=await Promise.all(Kt.map(be=>SR(be)));let Js=Kt.filter((be,de)=>Xt[de]);Js.length===0&&(Js=[Ds],b(be=>({...be,[Ct.productId]:!0})),console.warn("No valid imageUrls for product:",Bt.name||"Unknown","Using placeholder"));const At=Ne(J,"products",Ct.productId),Vt=await it(At),ar=Vt.exists()&&Vt.data().category||"default",Fs=Vt.exists()?Vt.data().sellerId:"default-seller-id",nr=Vt.exists()&&Vt.data().stock||10,Ss=v[ar]||{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2},Ts=Bt.price||0,Us=Ge.find(be=>be.productId===Ct.productId),Ps=Us?Number((Us.discount*100).toFixed(2)):0,Pr=Ps?Ts*(1-Us.discount):Ts,vs=Pr*Ss.buyerProtectionRate,ws=Pr*Ss.handlingRate,Ws=Pr+vs+ws;return{...Ct,product:{...Bt,imageUrls:Js,category:ar,sellerId:Fs,totalPrice:Ws,stock:nr,isDailyDeal:!!Us,discountPercentage:Ps},currentImage:Js[0],slideDirection:"right"}}))).filter(Ct=>Ct!==null);if(s(qt),x(qt.reduce((Ct,Bt)=>({...Ct,[Bt.productId]:!0}),{})),De){const Ct=Ne(J,"users",De.uid),Bt=await it(Ct);if(Bt.exists()){const Kt=Bt.data();f(Xt=>({...Xt,name:Kt.name||De.displayName||Xt.name,email:Kt.email||De.email||Xt.email,address:Kt.address||Xt.address,city:Kt.city||Xt.city,postalCode:Kt.postalCode||Xt.postalCode,country:Kt.country||Xt.country,phone:Kt.phone||Xt.phone}))}}}catch(De){console.error("Error loading cart, deals, or user data:",De),console.log("Logging to Sentry:",De),s([]),xe.error("Failed to load data.",{position:"top-right",autoClose:3e3})}finally{l(!1)}},$e=async()=>{try{const De=ve.currentUser,Xe=await Ui(De?.uid),st=Ne(J,"feeConfigurations","categoryFees"),vt=await it(st),Mt=vt.exists()?vt.data():{},Ge=(await Ke(_e(J,"dailyDeals"))).docs.map(qt=>({id:qt.id,...qt.data()})).filter(qt=>new Date(qt.endDate)>new Date&&new Date(qt.startDate)<=new Date),bt=(await Promise.all(Xe.map(async qt=>{if(!qt.productId||!qt.product)return console.warn("Invalid cart item:",qt),null;const Ct=qt.product||{};let Bt=[];Array.isArray(Ct.imageUrls)?Bt=Ct.imageUrls.filter(Ws=>typeof Ws=="string"&&Ws.match(/^https?:\/\/.+/i)):Ct.imageUrl&&typeof Ct.imageUrl=="string"&&Ct.imageUrl.match(/^https?:\/\/.+/i)&&(Bt=[Ct.imageUrl]);const Kt=await Promise.all(Bt.map(Ws=>SR(Ws)));let Xt=Bt.filter((Ws,be)=>Kt[be]);Xt.length===0&&(Xt=[Ds],b(Ws=>({...Ws,[qt.productId]:!0})),console.warn("No valid imageUrls for product:",Ct.name||"Unknown","Using placeholder"));const Js=Ne(J,"products",qt.productId),At=await it(Js),Vt=At.exists()&&At.data().category||"default",ar=At.exists()?At.data().sellerId:"default-seller-id",Fs=At.exists()&&At.data().stock||10,nr=Mt[Vt]||{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2},Ss=Ct.price||0,Ts=Ge.find(Ws=>Ws.productId===qt.productId),Us=Ts?Number((Ts.discount*100).toFixed(2)):0,Ps=Us?Ss*(1-Ts.discount):Ss,Pr=Ps*nr.buyerProtectionRate,vs=Ps*nr.handlingRate,ws=Ps+Pr+vs;return{...qt,product:{...Ct,imageUrls:Xt,category:Vt,sellerId:ar,totalPrice:ws,stock:Fs,isDailyDeal:!!Ts,discountPercentage:Us},currentImage:Xt[0],slideDirection:"right"}}))).filter(qt=>qt!==null);s(bt),x(bt.reduce((qt,Ct)=>({...qt,[Ct.productId]:!0}),{}))}catch(De){console.error("Error updating cart:",De),console.log("Logging to Sentry:",De),xe.error("Failed to update cart.",{position:"top-right",autoClose:3e3})}},tt=()=>{clearTimeout(L);const De=setTimeout(()=>{xe.warn("Session inactive. Please refresh or log in again.",{position:"top-right",autoClose:5e3}),r("/login")},1800*1e3);F(De)};window.addEventListener("cartUpdated",$e),window.addEventListener("mousemove",tt),window.addEventListener("keydown",tt);const Ye=ve.onAuthStateChanged(De=>{u(!!De),me(),tt()});return()=>{Ye(),window.removeEventListener("cartUpdated",$e),window.removeEventListener("mousemove",tt),window.removeEventListener("keydown",tt),clearTimeout(L)}},[]);const X=async(me,$e)=>{try{const tt=ve.currentUser,Ye=t.map(De=>De.productId===me?{...De,quantity:Math.max(1,Math.min($e,De.product.stock||10))}:De);await fd(tt?.uid,Ye),s(Ye),xe.info("Quantity updated.",{position:"top-right",autoClose:2e3})}catch(tt){console.error("Error updating quantity:",tt),console.log("Logging to Sentry:",tt),xe.error("Failed to update quantity.",{position:"top-right",autoClose:3e3})}},G=t.reduce((me,$e)=>me+($e.quantity||0),0),B=t.reduce((me,$e)=>me+($e.product?.totalPrice||0)*($e.quantity||0),0),Q=t.length===1&&$>0?$:B<z?500:0,ee=B<z,se=h.country==="United Kingdom"?"GBP":"NGN",le=48e-5,Ee=se==="GBP"?(B+Q)*le:B+Q;E.useEffect(()=>{console.log("Subtotal NGN:",B.toLocaleString("en-NG",{minimumFractionDigits:2})),console.log("Additional Shipping Fee:",Q.toLocaleString("en-NG",{minimumFractionDigits:2})),console.log("Total Amount:",Ee.toLocaleString("en-NG",{minimumFractionDigits:2}),"(",se,")")},[B,Q,Ee,se]);const ue=me=>{const{name:$e,value:tt,type:Ye,checked:De}=me.target;f(Xe=>({...Xe,[$e]:Ye==="checkbox"?De:tt})),A(Xe=>({...Xe,[$e]:""})),$e==="country"&&tt!==h.country&&xe.info(`Currency will change to ${tt==="United Kingdom"?"GBP":"NGN"}.`,{position:"top-right",autoClose:3e3})},Oe=()=>{const me={},{name:$e,email:tt,address:Ye,city:De,postalCode:Xe,country:st,phone:vt}=h;return $e||(me.name="Full name is required."),tt?/\S+@\S+\.\S+/.test(tt)||(me.email="Invalid email address."):me.email="Email is required.",vt||(me.phone="Phone number is required."),Ye||(me.address="Address is required."),De||(me.city="City is required."),Xe||(me.postalCode="Postal code is required."),["Nigeria","United Kingdom"].includes(st)||(me.country="Select Nigeria or United Kingdom."),{isValid:Object.keys(me).length===0,errors:me}},Pe=E.useMemo(()=>Oe(),[h]),Ie=async me=>{try{P(!0);const $e="https://foremade-backend.onrender.com",tt={orderId:me.paymentId||`fallback-${Date.now()}`,email:me.shippingDetails?.email||h.email,items:(me.items||[]).map(Xe=>({productId:Xe.productId||"unknown",quantity:Xe.quantity||1,price:Xe.price||0,name:Xe.name||"Unknown Product",sellerId:Xe.sellerId||"unknown",imageUrls:Array.isArray(Xe.imageUrls)?Xe.imageUrls:[Ds],isDailyDeal:Xe.isDailyDeal||!1,discountPercentage:Xe.discountPercentage||0})),total:me.totalAmount||0,currency:me.currency||se,shippingDetails:{name:me.shippingDetails?.name||h.name||"Unknown",address:me.shippingDetails?.address||h.address||"Unknown",city:me.shippingDetails?.city||h.city||"",postalCode:me.shippingDetails?.postalCode||h.postalCode||"",country:me.shippingDetails?.country||h.country||"",phone:me.shippingDetails?.phone||h.phone||""}};if(!tt.email||!/\S+@\S+\.\S+/.test(tt.email))throw new Error("Invalid or missing email address");if(!tt.items.length)throw new Error("No items provided");let Ye=2,De=null;for(;Ye>0;)try{const Xe=await ss.post(`${$e}/send-order-confirmation`,tt,{timeout:1e4});console.log("Order confirmation email sent successfully:",Xe.data);return}catch(Xe){if(De=Xe,Ye--,Ye===0||Xe.response?.status!==400)throw Xe;console.warn(`Retrying email send (${Ye} attempts left)...`),await new Promise(st=>setTimeout(st,2e3))}throw De||new Error("Failed to send email after retries")}catch($e){console.error("Error sending order confirmation email:",{message:$e.message,status:$e.response?.status,responseData:$e.response?.data,stack:$e.stack}),console.log("Logging to Sentry:",$e),xe.warn("Order placed successfully, but failed to send confirmation email. Please check your email later.",{position:"top-right",autoClose:5e3})}finally{P(!1)}},ie=async(me,$e,tt,Ye)=>{try{P(!0);const De="https://foremade-backend.onrender.com";for(const[Xe,st]of Object.entries(me)){const vt=$e.find(bt=>bt.includes(Xe))||`order-${Date.now()}-${Xe}`,Mt=st.reduce((bt,qt)=>bt+(qt.product?.totalPrice||0)*(qt.quantity||0),0),as=tt==="GBP"?(Mt+Q)*le:Mt+Q,wt={orderId:vt,sellerId:Xe,items:st.map(bt=>({productId:bt.productId||"unknown",quantity:bt.quantity||1,price:bt.product?.totalPrice||0,name:bt.product?.name||"Unknown Product",imageUrls:Array.isArray(bt.product?.imageUrls)?bt.product.imageUrls:[Ds],isDailyDeal:bt.product?.isDailyDeal||!1,discountPercentage:bt.product?.discountPercentage||0})),total:as,currency:tt,shippingDetails:{name:Ye.name||"Unknown",address:Ye.address||"Unknown",city:Ye.city||"",postalCode:Ye.postalCode||"",country:Ye.country||"",phone:Ye.phone||""}};console.log("Sending seller notification email with payload:",{orderId:vt,sellerId:Xe,items:wt.items,total:as,currency:tt,shippingDetails:wt.shippingDetails});let Ge=2,Pt=null;for(;Ge>0;)try{const bt=await ss.post(`${De}/send-seller-order-notification`,wt,{timeout:1e4});console.log(`Seller notification email sent successfully for seller ${Xe}:`,bt.data);break}catch(bt){if(Pt=bt,Ge--,Ge===0||bt.response?.status!==400)throw bt;console.warn(`Retrying seller email send for ${Xe} (${Ge} attempts left)...`),await new Promise(qt=>setTimeout(qt,2e3))}if(Ge===0)throw Pt||new Error(`Failed to send seller email for ${Xe} after retries`)}}catch(De){console.error("Error sending seller notification emails:",{message:De.message,status:De.response?.status,responseData:De.response?.data,stack:De.stack}),console.log("Logging to Sentry:",De),xe.warn("Order placed successfully, but failed to notify some sellers. They may receive notifications later.",{position:"top-right",autoClose:5e3})}finally{P(!1)}},ze=E.useCallback(async me=>{try{if(t.length===0){xe.error("Cart is empty.",{position:"top-right",autoClose:3e3});return}const $e=Oe();if(!$e.isValid){A($e.errors),xe.error("Please fix form errors.",{position:"top-right",autoClose:3e3}),V.current.scrollIntoView({behavior:"smooth"});return}console.log("Payment data:",me),(!me||!me.id&&!me.reference)&&(console.warn("Invalid payment data:",me),console.log("Logging to Sentry:",new Error("Invalid payment data received")));const tt=ve.currentUser?.uid||"anonymous",Ye=`order-${Date.now()}`,De=h.country==="United Kingdom"?"Stripe":"Paystack",Xe=me?.id||me?.reference||`fallback-${Ye}`,st={};t.forEach(Ge=>{const Pt=Ge.product?.sellerId||"default-seller-id";st[Pt]||(st[Pt]=[]),st[Pt].push(Ge)});let vt=null;const Mt=[],as=[];await OW(J,async Ge=>{const Pt=t.map(At=>Ne(J,"products",At.productId)),bt=await Promise.all(Pt.map(At=>Ge.get(At))),qt=[];bt.forEach((At,Vt)=>{if(!At.exists()){console.warn(`Product ${t[Vt].productId} does not exist. Skipping stock update.`);return}const ar=At.data().stock||0,Fs=t[Vt].quantity||0,nr=ar-Fs;if(nr<0)throw new Error(`Insufficient stock for product ${t[Vt].productId} (${t[Vt].product?.name||"Unknown"})`);qt.push({ref:Pt[Vt],newStock:nr})});const Ct=Object.keys(st).map(At=>Ne(J,"wallets",At)),Kt=(await Promise.all(Ct.map(At=>Ge.get(At)))).map((At,Vt)=>({ref:Ct[Vt],exists:At.exists(),data:At.exists()?At.data():null,sellerId:Object.keys(st)[Vt]}));console.log("Seller wallets before update:",Kt.map(At=>({sellerId:At.sellerId,exists:At.exists,pendingBalance:At.data?.pendingBalance||0,availableBalance:At.data?.availableBalance||0})));const Xt=[];Kt.forEach(({ref:At,exists:Vt,data:ar,sellerId:Fs})=>{const nr=st[Fs],Ss=nr.reduce((vs,ws)=>vs+(ws.product?.totalPrice||0)*(ws.quantity||0),0),Ts=se==="GBP"?(Ss+Q)*le:Ss+Q,Us={id:Ye,userId:tt,sellerId:Fs,items:nr.map(vs=>({productId:vs.productId||"unknown",quantity:vs.quantity||0,price:vs.product?.totalPrice||0,name:vs.product?.name||"Unknown",sellerId:vs.product?.sellerId||Fs,imageUrls:vs.product?.imageUrls||[Ds],isDailyDeal:vs.product?.isDailyDeal||!1,discountPercentage:vs.product?.discountPercentage||0})),totalAmount:Ts,date:new Date().toISOString(),createdAt:Ti(),shippingDetails:h,status:"pending-approval",paymentGateway:De,paymentId:Xe,currency:se},Ps=`${Ye}-${Fs}`;Xt.push({order:Us,orderId:Ps}),as.push(Ps);const Pr=(Vt&&ar?.pendingBalance||0)+Ts;Mt.push({sellerId:Fs,amount:Ts}),Ge.set(At,{availableBalance:Vt&&ar?.availableBalance||0,pendingBalance:Pr,updatedAt:Ti(),...Vt?{}:{createdAt:Ti()}},{merge:!0}),console.log(`Updated wallet for seller ${Fs}:`,{pendingBalance:Pr,availableBalance:Vt&&ar?.availableBalance||0})}),Xt.forEach(({order:At,orderId:Vt})=>{const ar=Ne(J,"orders",Vt);try{Ge.set(ar,At)}catch(Fs){throw console.error(`Error saving order ${Vt}:`,Fs),Fs}vt=At}),qt.forEach(({ref:At,newStock:Vt})=>{Ge.update(At,{stock:Vt})});const Js=Xt.map(({order:At})=>Za(_e(J,"transactions"),{userId:At.sellerId,type:"Sale",description:`Sale from order ${At.id}`,amount:At.totalAmount,date:new Date().toISOString().split("T")[0],status:"Pending",createdAt:Ti(),reference:At.paymentId}));await Promise.all(Js)});const wt=await Promise.all(Mt.map(async({sellerId:Ge})=>{const Pt=Ne(J,"wallets",Ge),bt=await it(Pt);return{sellerId:Ge,exists:bt.exists(),data:bt.exists()?bt.data():null}}));if(console.log("Seller wallets after update:",wt),ve.currentUser&&h.saveInfo){const Ge=Ne(J,"users",ve.currentUser.uid);await Gt(Ge,h,{merge:!0})}vt&&as.length>0&&await Ie({...vt,paymentId:as[0],items:t.map(Ge=>({productId:Ge.productId||"unknown",quantity:Ge.quantity||0,price:Ge.product?.totalPrice||0,name:Ge.product?.name||"Unknown",sellerId:Ge.product?.sellerId||"unknown",imageUrls:Ge.product?.imageUrls||[Ds],isDailyDeal:Ge.product?.isDailyDeal||!1,discountPercentage:Ge.product?.discountPercentage||0}))}),await ie(st,as,se,h),await Qb(ve.currentUser?.uid),s([]),xe.success(n.jsxs("div",{children:[n.jsx("strong",{children:"Payment Successful!"}),n.jsx("p",{children:"Your order has been placed. Check your email for confirmation."})]}),{position:"top-right",autoClose:5e3,style:Zse,icon:n.jsx("i",{className:"bx bx-check-circle text-blue-500 text-xl"})}),r("/order-confirmation",{state:{order:{...vt,items:t}}})}catch($e){console.error("Checkout error:",$e),console.log("Logging to Sentry:",$e),xe.error($e.message||"Failed to place order. Please try again.",{position:"top-right",autoClose:3e3})}finally{D(!1)}},[t,h,se,r,G,Y,Q]),Ve=()=>{xe.info("Payment cancelled.",{position:"top-right",autoClose:3e3}),D(!1)},ce=(me,$e,tt,Ye)=>{s(De=>De.map(Xe=>Xe.productId===me?{...Xe,currentImage:$e,slideDirection:tt>Ye?"right":"left"}:Xe)),console.log("Cart item image updated:",{itemId:me,url:$e,direction:tt>Ye?"right":"left"})},ke=(me,$e)=>{x(tt=>({...tt,[me]:$e?tt[me]:!1})),b(tt=>({...tt,[me]:!1})),console.log(`Image ${$e?"thumbnail":"main"} loaded for productId: ${me}`)},Qe=(me,$e)=>{console.error(`Image load error for productId: ${$e}`,{imageUrl:me.target.src,productId:$e}),x(tt=>({...tt,[$e]:!1})),b(tt=>({...tt,[$e]:!0})),me.target.src=Ds};return o?n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx(si,{}),n.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Loading..."})]})}):n.jsxs("div",{className:"container mx-auto px-4 py-8 relative mb-20",children:[(R||I)&&n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-40",children:[n.jsx(si,{}),n.jsx("p",{className:"text-white ml-4",children:I?"Sending confirmation email...":"Processing payment..."})]}),n.jsx("style",{children:`
          @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          .slide-in-right { animation: slideInRight 0.3s ease-in-out forwards; }
          .slide-in-left { animation: slideInLeft 0.3s ease-in-out forwards; }
          .image-zoom:hover { transform: scale(1.05); transition: transform 0.3s ease; }
        `}),n.jsx(ere,{}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-cart text-blue-600"}),"Checkout"]}),n.jsxs(he,{to:"/cart",className:"text-blue-600 hover:underline text-sm flex items-center gap-1","aria-label":"Back to Cart",children:[n.jsx("i",{className:"bx bx-arrow-back"}),"Back to Cart"]})]}),t.length===0?n.jsx("div",{className:"text-center",children:n.jsxs("p",{className:"text-gray-600 mb-4",children:["Your cart is empty."," ",n.jsx(he,{to:"/products",className:"text-blue-600 hover:underline",children:"Continue shopping"})]})}):n.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[n.jsxs("div",{className:"flex-1 bg-white p-6 rounded-lg shadow-md",ref:V,children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-home text-blue-600"}),"Shipping Details"]}),n.jsxs("form",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Full Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-user absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"name",name:"name",value:h.name,onChange:ue,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${k.name?"border-red-500":"border-gray-300"}`,required:!0,disabled:o,"aria-invalid":!!k.name,"aria-describedby":k.name?"name-error":void 0})]}),k.name&&n.jsx("p",{id:"name-error",className:"text-red-600 text-xs mt-1",children:k.name})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-envelope absolute left-3 top支0 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",id:"email",name:"email",value:h.email,onChange:ue,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${k.email?"border-red-500":"border-gray-300"}`,required:!0,disabled:o,"aria-invalid":!!k.email,"aria-describedby":k.email?"email-error":void 0})]}),k.email&&n.jsx("p",{id:"email-error",className:"text-red-600 text-xs mt-1",children:k.email})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Phone ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-phone absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"phone",name:"phone",value:h.phone,onChange:ue,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${k.phone?"border-red-500":"border-gray-300"}`,required:!0,disabled:o,"aria-invalid":!!k.phone,"aria-describedby":k.phone?"phone-error":void 0})]}),k.phone&&n.jsx("p",{id:"phone-error",className:"text-red-600 text-xs mt-1",children:k.phone})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Address ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-map absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"address",name:"address",value:h.address,onChange:ue,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${k.address?"border-red-500":"border-gray-300"}`,required:!0,disabled:o,"aria-invalid":!!k.address,"aria-describedby":k.address?"address-error":void 0})]}),k.address&&n.jsx("p",{id:"address-error",className:"text-red-600 text-xs mt-1",children:k.address})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"city",className:"text-sm font-medium text-gray-700 flex items-center gap-1",children:["City ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-city absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"city",name:"city",value:h.city,onChange:ue,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${k.city?"border-red-500":"border-gray-300"}`,required:!0,disabled:o,"aria-invalid":!!k.city,"aria-describedby":k.city?"city-error":void 0})]}),k.city&&n.jsx("p",{id:"city-error",className:"text-red-600 text-xs mt-1",children:k.city})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Postal Code ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-mail-send absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:h.postalCode,onChange:ue,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${k.postalCode?"border-red-500":"border-gray-300"}`,required:!0,disabled:o,"aria-invalid":!!k.postalCode,"aria-describedby":k.postalCode?"postalcode-error":void 0})]}),k.postalCode&&n.jsx("p",{id:"postalcode-error",className:"text-red-600 text-xs mt-1",children:k.postalCode})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 items-center gap-1",children:["Country ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-world absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsxs("select",{id:"country",name:"country",value:h.country,onChange:ue,className:`mt-1 w-full p-3 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 ${k.country?"border-red-500":"border-gray-300"}`,required:!0,disabled:o,"aria-invalid":!!k.country,"aria-describedby":k.country?"country-error":void 0,children:[n.jsx("option",{value:"",children:"Select a country"}),n.jsx("option",{value:"Nigeria",children:"Nigeria"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"})]})]}),k.country&&n.jsx("p",{id:"country-error",className:"text-red-600 text-xs mt-1",children:k.country})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"saveInfo",name:"saveInfo",checked:h.saveInfo,onChange:ue,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:o}),n.jsx("label",{htmlFor:"saveInfo",className:"ml-2 text-sm text-gray-600",children:"Save shipping information for future purchases"})]})]}),n.jsxs("div",{className:"mt-8",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-package text-blue-600"}),"Cart Items",n.jsxs("span",{className:"ml-2 text-xs text-gray-500 cursor-help relative group","aria-label":"Prices include buyer protection and handling fees.",children:[n.jsx("i",{className:"bx bx-info-circle"}),n.jsx("span",{className:"absolute hidden group-hover:block bg-gray-800 text-white text-xs rounded-lg p-2 -top-10 left-0 w-48 z-10",children:"Prices Overview."})]})]}),t.map(me=>n.jsxs("div",{className:"flex items-start gap-4 mb-4 border-b pb-4",children:[n.jsxs("div",{className:"w-24 h-24 relative overflow-hidden rounded-lg image-zoom",children:[g[me.productId]&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200",children:n.jsx(si,{size:"small"})}),n.jsx("img",{src:me.currentImage||Ds,alt:me.product?.name||"Product Image",className:`absolute w-full h-full object-cover ${me.slideDirection==="right"?"slide-in-right":"slide-in-left"} ${g[me.productId]||y[me.productId]?"opacity-50":"opacity-100"}`,onLoad:()=>ke(me.productId,!1),onError:$e=>Qe($e,me.productId),loading:"lazy","aria-label":`Image for ${me.product?.name||"Unknown Product"}`}),y[me.productId]&&n.jsx("div",{className:"absolute bottom-0 left-0 bg-red-600 text-white text-xs px-1 rounded",children:"Image Failed"}),me.product?.isDailyDeal&&n.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-1.5 py-0.5 rounded-full text-[10px] font-bold",children:[me.product.discountPercentage,"% OFF"]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-800",children:me.product?.name||"Unknown"}),n.jsx("p",{className:"text-sm text-gray-600",children:n.jsx(lr,{price:(me.product?.totalPrice||0)*(me.quantity||0),currency:se})}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("label",{htmlFor:`quantity-${me.productId}`,className:"text-sm text-gray-600",children:"Qty:"}),n.jsx("input",{type:"number",id:`quantity-${me.productId}`,value:me.quantity||1,onChange:$e=>X(me.productId,parseInt($e.target.value)),min:"1",max:me.product?.stock||10,className:"w-16 p-1 border rounded-lg focus:ring-2 focus:ring-blue-500","aria-label":`Quantity for ${me.product?.name||"Unknown"}`})]}),me.product?.imageUrls?.length>1&&n.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto",children:me.product.imageUrls.map(($e,tt)=>n.jsx("img",{src:$e,alt:`${me.product?.name||"Unknown"} ${tt+1}`,className:`w-10 h-10 object-cover rounded border cursor-pointer ${me.currentImage===$e?"border-blue-500 border-2":"border-gray-300"} ${g[me.productId]||y[me.productId]?"opacity-50":"opacity-100"}`,onClick:()=>ce(me.productId,$e,tt,me.product.imageUrls.indexOf(me.currentImage)),onLoad:()=>ke(me.productId,!0),onError:Ye=>Qe(Ye,me.productId),loading:"lazy"},`${me.productId}-${tt}`))})]})]},me.productId))]})]}),n.jsx("div",{className:"w-full lg:w-1/3",children:n.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md sticky top-4",children:[n.jsx("img",{src:Qse,alt:"Accepted payment cards",className:"mb-6 w-auto h-8"}),n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-receipt text-blue-600"}),"Order Summary"]}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Total Items"}),n.jsx("span",{children:G})]}),t.map(me=>n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"truncate w-2/3",children:[me.product?.name||"Unknown"," (x",me.quantity||0,")"]}),n.jsxs("span",{children:[n.jsx(lr,{price:(me.product?.totalPrice||0)*(me.quantity||0),currency:se}),me.product?.isDailyDeal&&n.jsxs("span",{className:"text-red-600 text-[10px] ml-2",children:[me.product.discountPercentage,"% OFF"]})]})]},me.productId)),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal"}),n.jsx("span",{children:n.jsx(lr,{price:B,currency:se})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Additional Shipping Fee"}),n.jsx("span",{children:n.jsx(lr,{price:Q,currency:se})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Shipping"}),n.jsx("span",{className:"text-green-600 font-semibold bg-green-100 px-2 py-1 rounded-full",children:"Free"})]}),n.jsxs("div",{className:"flex justify-between font-bold text-gray-800 border-t pt-2",children:[n.jsx("span",{children:"Grand Total"}),n.jsx("span",{children:n.jsx(lr,{price:Ee,currency:se})})]})]}),ee&&n.jsxs("p",{className:"text-yellow-600 text-xs mt-2 bg-yellow-50 p-2 rounded",children:["⚠️ Note: Total is below the recommended minimum of ₦",z.toLocaleString("en-NG"),"."]}),n.jsxs("div",{className:"mt-6 border-t pt-4",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-home text-blue-600"}),"Shipping Information"]}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",h.name||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",h.email||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",h.phone||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Address:"})," ",h.address||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"City:"})," ",h.city||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Postal Code:"})," ",h.postalCode||"Not provided"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Country:"})," ",h.country||"Not provided"]})]})]}),c&&Pe.isValid&&t.length>0&&n.jsxs("div",{className:"mt-6",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-credit-card text-blue-600"}),"Payment Details"]}),h.country==="United Kingdom"?n.jsx(pO,{stripe:Jse,children:n.jsx(sre,{totalPrice:Ee,formData:h,onSuccess:me=>D(!0),onCancel:Ve,currency:se,setIsProcessing:_})}):h.country==="Nigeria"?n.jsx(bO,{email:h.email,amount:Ee*100,onSuccess:me=>D(!0),onClose:Ve,disabled:!Pe.isValid||t.length===0||o,buttonText:"Complete Purchase",className:`w-full py-3 px-4 rounded-lg text-white text-sm font-medium transition duration-200 shadow transform hover:scale-105 ${!Pe.isValid||t.length===0||o?"bg-gray-400 cursor-not-allowed":"bg-[#112d4e] hover:bg-[#0e2740]"}`,iconClass:"bx bx-cart mr-2",sellerId:t[0]?.product?.sellerId||"default-seller-id"}):n.jsx("p",{className:"text-red-600 text-sm",children:"Please select a valid country."})]}),!c&&n.jsxs("div",{className:"mt-4 text-sm text-red-600",children:["Please"," ",n.jsx(he,{to:"/login",className:"text-blue-600 hover:underline",children:"log in"})," ","to proceed with payment."]})]})})]}),n.jsx(tre,{isOpen:T,onConfirm:ze,onCancel:Ve}),Y]})},are=()=>{const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null),o=us();E.useEffect(()=>{const h=async()=>{try{if(!ve.currentUser){i("Please sign in to view your orders."),s(!1);return}const g=ft(_e(J,"orders"),rt("userId","==",ve.currentUser.uid)),x=await Ke(g),y=await Promise.all(x.docs.map(async b=>{const v=b.data(),N=Array.isArray(v.items)?v.items:[],k=v.total||0,A=v.paymentId||`TRK-${b.id.slice(0,8)}`;let R={sellerId:null,displayName:"Unknown Seller",avatar:null};if(N.length>0&&N[0].productId)try{const _=Ne(J,"products",N[0].productId),I=await it(_);if(I.exists()){const T=I.data().sellerId;if(T){const D=Ne(J,"users",T),L=await it(D);if(L.exists()){const F=L.data();R={sellerId:T,displayName:F.displayName||"Unknown Seller",avatar:F.avatar||"https://ui-avatars.com/api/?name=S&background=3b82f6&color=fff&size=40"}}}}}catch(_){console.error("Error fetching seller data:",_.message)}return{orderId:b.id,trackingId:A,total:k,date:v.date||new Date().toISOString(),items:N,seller:R}}));e(y)}catch(g){i(`Failed to load orders: ${g.message}`)}finally{s(!1)}},f=ve.onAuthStateChanged(g=>{g?h():(i("Please sign in to view your orders."),s(!1))});return()=>f()},[]);const l=h=>`₦${h.toLocaleString("en-NG",{minimumFractionDigits:2})}`,c=h=>{o(`/chat/${h.orderId}`,{state:{sellerId:h.seller.sellerId,productName:h.items[0]?.name||"Product",orderId:h.orderId,role:"buyer"}})},u=h=>{try{return new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown Date"}};return t?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(si,{}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading orders..."})]}):a?n.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:n.jsxs(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[n.jsx("p",{className:"text-red-600 dark:text-red-400 text-lg font-medium",children:a}),n.jsx(he,{to:"/login",className:"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-500 font-medium underline transition",children:"Go to Login"})]})}):n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx(_d,{}),n.jsx(Ze.div,{className:"md:w-3/4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Your Orders"}),r.length===0?n.jsxs(Ze.p,{initial:{opacity:0},animate:{opacity:1},className:"text-gray-600 dark:text-gray-400",children:["No orders found."," ",n.jsx(he,{to:"/products",className:"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-500 font-medium underline",children:"Start shopping"})]}):n.jsx("div",{className:"space-y-4",children:n.jsx(tn,{children:r.map(h=>n.jsxs(Ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"bg-white dark:bg-gray-700 rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:h.seller.avatar,alt:"Seller",className:"w-10 h-10 rounded-full border border-gray-200 dark:border-gray-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Seller"}),n.jsxs("h2",{className:"text-xs text-gray-800 dark:text-gray-100",children:["Order #",h.orderId]})]})]}),n.jsx(Ze.button,{onClick:()=>c(h),whileHover:{scale:1.02},whileTap:{scale:.95},className:"mt-2 sm:mt-0 px-4 py-2 bg-gray-800 text-white rounded-full text-sm font-medium hover:bg-gray-600 dark:bg-amber-500 dark:hover:bg-amber-600 transition",children:"Chat with Seller"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Tracking ID: ",h.trackingId]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Date: ",u(h.date)]})]}),n.jsx("div",{className:"space-y-2",children:h.items.map((f,g)=>n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300",children:[n.jsxs("span",{children:[f.name," x",f.quantity]}),n.jsx("span",{children:l(f.price*f.quantity)})]},g))})]},h.orderId))})})]})})]})})};function nre(){const[r,e]=E.useState(!0),[t,s]=E.useState(""),[a,i]=E.useState(!1),[o,l]=E.useState(null),[c,u]=E.useState([]),[h,f]=E.useState({street:"",city:"",state:"",country:"",postalCode:""}),[g,x]=E.useState({}),[y,b]=E.useState(null),[v,N]=E.useState(0),[k]=E.useState(3),A="orderHistory_1",R=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,_=()=>{try{const F=localStorage.getItem(A);return F?JSON.parse(F).length:0}catch(F){return console.error("Error getting order count:",F),0}};E.useEffect(()=>{const F=ve.onAuthStateChanged(async O=>{try{if(console.log("Auth state changed at:",new Date().toISOString()),!O){console.log("No user found, redirecting to login"),s("Please sign in to manage your addresses."),i(!0),e(!1);return}console.log("User authenticated, UID:",O.uid);const V=localStorage.getItem("userData");let Y={};if(V)try{Y=JSON.parse(V),(typeof Y.name!="string"||Y.name.includes("{"))&&(console.warn("Corrupted name field:",Y.name),Y.name="Emmanuel Chinecherem"),typeof Y.username!="string"&&(Y.username="emmaChi")}catch(B){console.error("Error parsing userData:",B),Y={}}console.log("Fetching Firestore data for UID:",O.uid);const H=Ne(J,"users",O.uid),$=await it(H);if(!$.exists()){console.warn("User document not found in Firestore:",O.uid),s("User profile not found."),e(!1);return}const X=$.data();console.log("Firestore data fetched:",X);const G=X.addresses||Y.addresses||[];l({email:O.email||"test@example.com",username:Y.username||O.displayName||"emmaChi",name:Y.name||O.displayName||"Emmanuel Chinecherem",profileImage:Y.profileImage||null,createdAt:Y.createdAt||"2025-05-04T23:28:48.857Z",address:Y.address||(G[0]?.street?`${G[0].street}, ${G[0].city}, ${G[0].state}, ${G[0].postalCode}, ${G[0].country}`:"Not provided"),addresses:G,uid:O.uid}),u(G),N(_())}catch(V){console.error("Error in useEffect:",V.message,V.stack),s("Failed to load addresses. Please try again.")}finally{console.log("Setting loading to false at:",new Date().toISOString()),e(!1)}},O=>{console.error("Auth state error:",O),s("Authentication error. Please try again."),e(!1)}),z=()=>N(_());return window.addEventListener("orderPlaced",z),()=>{console.log("Cleaning up useEffect"),F(),window.removeEventListener("orderPlaced",z)}},[]);const I=()=>{const F={};return h.street.trim()||(F.street="Street is required."),h.city.trim()||(F.city="City is required."),h.state.trim()||(F.state="State is required."),h.country.trim()||(F.country="Country is required."),h.postalCode.trim()||(F.postalCode="Postal code is required."),F},P=F=>{const{name:z,value:O}=F.target;f(V=>({...V,[z]:O})),x(V=>({...V,[z]:""}))},T=async F=>{F.preventDefault();const z=I();if(Object.keys(z).length>0){x(z);return}try{e(!0);const O={id:y||R(),street:h.street,city:h.city,state:h.state,country:h.country,postalCode:h.postalCode};let V;y?V=c.map($=>$.id===y?O:$):V=[...c,O];const Y=Ne(J,"users",o.uid);await Gt(Y,{addresses:V,address:V[0]?`${V[0].street}, ${V[0].city}, ${V[0].state}, ${V[0].postalCode}, ${V[0].country}`:"Not provided"},{merge:!0});const H={...o,addresses:V,address:V[0]?`${V[0].street}, ${V[0].city}, ${V[0].state}, ${V[0].postalCode}, ${V[0].country}`:"Not provided"};localStorage.setItem("userData",JSON.stringify(H)),u(V),l(H),f({street:"",city:"",state:"",country:"",postalCode:""}),x({}),b(null)}catch(O){console.error("Error saving address:",O),s("Failed to save address. Please try again.")}finally{e(!1)}},D=F=>{f({street:F.street,city:F.city,state:F.state,country:F.country,postalCode:F.postalCode}),b(F.id)},L=async F=>{try{e(!0);const z=c.filter(Y=>Y.id!==F),O=Ne(J,"users",o.uid);await Gt(O,{addresses:z,address:z[0]?`${z[0].street}, ${z[0].city}, ${z[0].state}, ${z[0].postalCode}, ${z[0].country}`:"Not provided"},{merge:!0});const V={...o,addresses:z,address:z[0]?`${z[0].street}, ${z[0].city}, ${z[0].state}, ${z[0].postalCode}, ${z[0].country}`:"Not provided"};localStorage.setItem("userData",JSON.stringify(V)),u(z),l(V)}catch(z){console.error("Error deleting address:",z),s("Failed to delete address. Please try again.")}finally{e(!1)}};return r?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(si,{}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4",children:"Loading..."})]}):t?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:t}),a?n.jsx(he,{to:"/login",className:"text-blue-600 hover:underline",children:"Go to Login"}):n.jsx("button",{onClick:()=>s(""),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]}):n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-700",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsx(_d,{userData:o,orderCount:v,wishlistCount:k}),n.jsxs("div",{className:"md:w-3/4",children:[n.jsxs("div",{className:"rounded-lg p-6 mb-6 border border-gray-300 dark:border-gray-300",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Personal Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-300",children:"Username"}),n.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:o.username})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-300",children:"First Name"}),n.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:o.name.split(" ")[0]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-300",children:"Last Name"}),n.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:o.name.split(" ").slice(1).join(" ")||"-"})]})]})]}),n.jsxs("div",{className:"rounded-lg p-6 mb-6 border border-gray-300 dark:border-gray-300",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:y?"Edit Address":"Add New Address"}),n.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"Street"}),n.jsx("input",{type:"text",name:"street",value:h.street,onChange:P,className:`w-full p-3 border rounded-lg ${g.street?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),g.street&&n.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:g.street})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"City"}),n.jsx("input",{type:"text",name:"city",value:h.city,onChange:P,className:`w-full p-3 border rounded-lg ${g.city?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),g.city&&n.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:g.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"State"}),n.jsx("input",{type:"text",name:"state",value:h.state,onChange:P,className:`w-full p-3 border rounded-lg ${g.state?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),g.state&&n.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:g.state})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"Country"}),n.jsx("input",{type:"text",name:"country",value:h.country,onChange:P,className:`w-full p-3 border rounded-lg ${g.country?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),g.country&&n.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:g.country})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-500 dark:text-gray-300",children:"Postal Code"}),n.jsx("input",{type:"text",name:"postalCode",value:h.postalCode,onChange:P,className:`w-full p-3 border rounded-lg ${g.postalCode?"border-red-500":"border-gray-300 dark:border-gray-300"}`}),g.postalCode&&n.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:g.postalCode})]}),n.jsxs("div",{className:"col-span-1 md:col-span-2",children:[n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",disabled:r,children:y?"Update Address":"Add Address"}),y&&n.jsx("button",{type:"button",onClick:()=>{f({street:"",city:"",state:"",country:"",postalCode:""}),b(null),x({})},className:"ml-2 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]}),n.jsxs("div",{className:"rounded-lg p-6 border border-gray-300 dark:border-gray-300",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Saved Addresses"}),c.length===0?n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-block p-4 rounded-full mb-2 bg-gray-100",children:n.jsx("i",{className:"bx bx-map text-2xl"})}),n.jsx("p",{className:"text-gray-400 dark:text-gray-300",children:"No addresses found!"})]}):n.jsx("div",{className:"space-y-4",children:c.map(F=>n.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:F.street}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[F.city,", ",F.state,", ",F.postalCode,", ",F.country]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>D(F),className:"text-blue-500 hover:text-blue-700",children:n.jsx("i",{className:"bx bx-edit text-lg"})}),n.jsx("button",{onClick:()=>L(F.id),className:"text-red-500 hover:text-red-700",children:n.jsx("i",{className:"bx bx-trash text-lg"})})]})]},F.id))})]})]})]})})}function ire(){const[r,e]=E.useState(!0),[t,s]=E.useState(""),[a,i]=E.useState({name:"",username:"",email:"",country:"",phone:"",address:""}),[o,l]=E.useState(localStorage.getItem("profileImage")||null),[c,u]=E.useState(""),[h,f]=E.useState(""),[g,x]=E.useState(""),[y,b]=E.useState(""),[v,N]=E.useState(!1),[k,A]=E.useState(!1),[R,_]=E.useState(!0),[I,P]=E.useState(localStorage.getItem("theme")||"light"),T=us(),D="https://via.placeholder.com/150?text=Profile";E.useEffect(()=>{const $=ve.onAuthStateChanged(async X=>{if(e(!0),!X){s("Please sign in to edit your profile."),l(null),e(!1);return}try{const G=Ne(J,"users",X.uid),B=await it(G);if(!B.exists()){s("User profile not found."),e(!1);return}const Q=B.data(),ee=Q.addresses||[],se=ee[0]?.street?`${ee[0].street}, ${ee[0].city}, ${ee[0].state}, ${ee[0].postalCode}, ${ee[0].country}`:"Not provided";i({name:Q.name||X.displayName||"Emmanuel Chinecherem",username:Q.username||"emmachi789",email:X.email||"",country:Q.country||"",phone:Q.phoneNumber||"Not provided",address:se})}catch(G){s("Failed to load profile data."),console.error("Error loading profile:",G)}finally{e(!1)}});return document.documentElement.classList.toggle("dark",I==="dark"),()=>$()},[I]);const L=$=>{const{name:X,value:G}=$.target;i(B=>({...B,[X]:G}))},F=$=>{const X=$.target.files[0];if(X){if(!X.type.startsWith("image/")){u("Please upload a valid image file.");return}if(X.size>5*1024*1024){u("Image size must be less than 5MB.");return}u(""),e(!0);try{const G=new FileReader;G.onload=()=>{const B=G.result;l(B),localStorage.setItem("profileImage",B),window.dispatchEvent(new Event("profileImageUpdated")),xe.success("Profile image updated successfully!")},G.readAsDataURL(X)}catch(G){console.error("Error processing image:",G),u("Failed to process image. Please try again.")}finally{e(!1)}}},z=async()=>{b("");const $=ve.currentUser;if(!$){b("Please sign in to change your password.");return}if(!h||!g){b("Please fill in both current and new password fields.");return}if(g.length<6){b("New password must be at least 6 characters long.");return}if(!/[A-Z]/.test(g)||!/[0-9]/.test(g)){b("New password must contain at least one uppercase letter and one number.");return}e(!0);try{const X=Gl.credential($.email,h);await S3($,X),await c7($,g),f(""),x(""),xe.success("Password updated successfully!")}catch(X){console.error("Error changing password:",X),X.code==="auth/wrong-password"?b("Current password is incorrect."):X.code==="auth/requires-recent-login"?(b("Please log out and log in again to change your password."),T("/login")):b("Failed to change password. Please try again.")}finally{e(!1)}},O=async()=>{const $=ve.currentUser;if(!$){s("Please sign in to save changes.");return}e(!0);try{const X=a.address.split(", "),G=X.length===5?{street:X[0],city:X[1],state:X[2],postalCode:X[3],country:X[4]}:{street:a.address,city:"",state:"",postalCode:"",country:a.country};await Qr(Ne(J,"users",$.uid),{name:a.name,username:a.username,country:a.country,phoneNumber:a.phone==="Not provided"?"":a.phone,addresses:[G]}),localStorage.setItem("userData",JSON.stringify(a)),window.dispatchEvent(new Event("userDataUpdated")),xe.success("Profile updated successfully!")}catch(X){console.error("Error saving profile:",X),s("Failed to save profile. Please try again.")}finally{e(!1)}},V=async()=>{e(!0);try{await ve.signOut(),localStorage.removeItem("userData"),localStorage.removeItem("profileImage"),l(null),window.dispatchEvent(new Event("profileImageUpdated")),T("/login"),xe.success("Logged out successfully!")}catch($){console.error("Error logging out:",$),s("Failed to log out. Please try again.")}finally{e(!1)}},Y=()=>{const $=I==="light"?"dark":"light";P($),localStorage.setItem("theme",$),document.documentElement.setAttribute("data-theme",$)},H=()=>o?n.jsx("img",{src:o,alt:"Profile",className:"w-full h-full object-cover",onError:()=>l(D)}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-white text-2xl font-bold uppercase",children:a.email[0]||"?"});return r?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(si,{}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4",children:"Loading..."})]}):t?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:t}),n.jsx("button",{onClick:()=>s(""),className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600 transition-colors",children:"Retry"})]}):n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-700",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsx(_d,{}),n.jsxs("div",{className:"md:w-3/4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800 dark:text-gray-200",children:"Settings"}),n.jsxs("div",{className:"rounded-lg p-6 dark:bg-gray-800 shadow-md border border-gray-100 dark:border-black",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[n.jsx(Vl,{size:20})," Profile Picture"]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden shadow hover:bg-gray-300 transition-colors duration-300",children:H()}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("label",{className:"cursor-pointer text-blue-600 hover:text-blue-400 flex items-center gap-1",children:[n.jsx(J5,{size:16})," Choose Image",n.jsx("input",{type:"file",accept:"image/*",onChange:F,className:"hidden"})]}),c&&n.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:c})]})]}),n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[n.jsx(Vl,{size:20})," Personal Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:a.name,onChange:L,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Username"}),n.jsx("input",{type:"text",name:"username",value:a.username,onChange:L,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your username"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:a.email,onChange:L,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-400",disabled:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Country"}),n.jsx("input",{type:"text",name:"country",value:a.country,onChange:L,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your country"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Phone"}),n.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:L,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your phone number"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:a.address,onChange:L,className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter your address"})]})]}),n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[n.jsx(X5,{size:20})," Security"]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:v?"text":"password",value:h,onChange:$=>f($.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter current password"}),n.jsx("button",{onClick:()=>N(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-300",children:v?n.jsx(aR,{size:16}):n.jsx(nR,{size:16})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:k?"text":"password",value:g,onChange:$=>x($.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-black rounded-lg dark:bg-gray-700 dark:text-gray-200",placeholder:"Enter new password"}),n.jsx("button",{onClick:()=>A(!k),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-300",children:k?n.jsx(aR,{size:16}):n.jsx(nR,{size:16})})]})]})]}),y&&n.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:y}),n.jsx("button",{onClick:z,className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600 transition-colors",children:"Change Password"})]}),n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[n.jsx(y2,{size:20})," Preferences"]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Email Notifications"}),n.jsx("input",{type:"checkbox",checked:R,onChange:()=>_(!R),className:"h-5 w-5 text-blue-600 dark:bg-gray-700"})]}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsx("label",{className:"text-gray-500 dark:text-gray-300",children:"Theme"}),n.jsxs("button",{onClick:Y,className:"px-6 py-2 bg-gray-200 dark:bg-gray-600 rounded-lg shadow hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:[I==="light"?n.jsx(Mee,{size:16,className:"inline mr-1"}):n.jsx(ite,{size:16,className:"inline mr-1"}),I==="light"?"Switch to Dark":"Switch to Light"]})]})]}),n.jsx("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-gray-200"}),n.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[n.jsxs("button",{onClick:V,className:"px-3 py-2 bg-gray-900 text-white rounded-lg shadow-md hover:bg-red-900 transition-colors flex items-center gap-1",children:[n.jsx(_ee,{size:16})," Log Out"]}),n.jsxs(he,{to:"/profile",className:"px-6 py-2 bg-gray-300 text-gray-800 rounded-lg shadow-md hover:bg-gray-400 transition-colors dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 flex items-center gap-1",children:[n.jsx(Yc,{size:16})," Cancel"]}),n.jsxs("button",{onClick:O,className:"px-3 py-2 bg-gray-700 text-white rounded-lg shadow-md hover:bg-gray-800 transition-colors flex items-center gap-1",children:[n.jsx(Yee,{size:16})," Save Changes"]})]}),t&&n.jsx("p",{className:"text-red-600 dark:text-red-400 mt-2",children:t})]})]})]})})}function ore({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-gray-200 hover:text-white",children:"✕"})]},t.id))})}function lre(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function cre(){const{alerts:r,addAlert:e,removeAlert:t}=lre(),[s,a]=E.useState(null),[i,o]=E.useState(!0),l=Br();return E.useEffect(()=>{(async()=>{try{let h=new URLSearchParams(l.search).get("orderId")||l.state?.order?.id;if(console.log("Attempting to fetch order with ID:",h),!h){console.warn("No orderId provided in query params or state"),e("Order not found. Please check your link or contact support.","error"),o(!1);return}if(!h.startsWith("order-")){console.warn("Invalid orderId format:",h),e("Invalid order ID. Please contact support.","error"),o(!1);return}let f=null,g=3;for(;g>0;)try{const x=Ne(J,"orders",h),y=await it(x);if(y.exists()){f={id:y.id,...y.data()},console.log("Order found:",f);break}console.warn(`Order ${h} not found on attempt ${4-g}`),g--,g>0&&await new Promise(b=>setTimeout(b,1e3))}catch(x){if(console.error("Firestore fetch error:",x),g--,g===0)throw x;await new Promise(y=>setTimeout(y,1e3))}if(!f&&h.includes("-")){const x=h.split("-").slice(0,2).join("-");console.log("Trying base orderId:",x);const y=ft(_e(J,"orders"),rt("id","==",x)),b=await Ke(y);if(!b.empty){const v=b.docs[0];f={id:v.id,...v.data()},console.log("Found order with base ID:",f),h=v.id}}if(!f&&l.state?.order&&(console.log("Using state.order as fallback:",l.state.order),f={...l.state.order,id:h},e("Order loaded from session. Some details may be incomplete.","info")),!f){console.error("No order data found for ID:",h),e("Order not found. Please contact support at support@foremade.com.","error"),o(!1);return}a(f)}catch(u){console.error("Error fetching order:",{message:u.message,stack:u.stack}),e("Failed to load order. Please try again or contact support.","error")}finally{o(!1)}})()},[l,e]),i?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:n.jsxs("div",{className:"flex gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})}):s?n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 py-8",children:[n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-check-circle text-green-500"}),"Order Confirmation"]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:["Order #",s.id]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Thank you for your purchase! Your order has been successfully placed."}),n.jsx("div",{className:"space-y-4",children:s.items.map((c,u)=>n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[n.jsx("img",{src:c.imageUrls?.[0]||"https://via.placeholder.com/150",alt:c.name||"Product",className:"w-16 h-16 object-cover rounded",onError:h=>{h.target.src="https://via.placeholder.com/150"}}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-bold text-gray-800 dark:text-gray-100",children:c.name||"Unknown Product"}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Quantity: ",c.quantity||1]}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Price: ",s.currency==="gbp"?"£":"₦",((c.price||0)*(c.quantity||1)).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]},u))}),n.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-600 pt-4",children:[n.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-300",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{children:[s.currency==="gbp"?"£":"₦",(s.totalAmount||s.total||0).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),n.jsxs("div",{className:"flex justify-between font-semibold text-gray-800 dark:text-gray-100 mt-2",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:[s.currency==="gbp"?"£":"₦",(s.totalAmount||s.total||0).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Shipping Details"}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[s.shippingDetails?.name||"Not provided",n.jsx("br",{}),s.shippingDetails?.address||"Not provided",n.jsx("br",{}),s.shippingDetails?.city||"",s.shippingDetails?.city&&s.shippingDetails?.postalCode?", ":"",s.shippingDetails?.postalCode||"",n.jsx("br",{}),s.shippingDetails?.country||"Not provided",n.jsx("br",{}),n.jsx("strong",{children:"Email:"})," ",s.shippingDetails?.email||"Not provided",n.jsx("br",{}),n.jsx("strong",{children:"Phone:"})," ",s.shippingDetails?.phone||"Not provided"]})]})]})]}),n.jsx(ore,{alerts:r,removeAlert:t})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:n.jsxs("div",{className:"text-center text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-error-circle text-4xl text-red-500 mb-2"}),n.jsxs("p",{children:["Order not found. Please contact ",n.jsx("a",{href:"mailto:support@foremade.com",className:"text-blue-600 hover:underline",children:"support@foremade.com"}),"."]})]})})}function Es(){const[r,e]=E.useState(!1),[t,s]=E.useState(""),a=()=>{e(!r)},i=E.useCallback(Sd(u=>{s(u)},300),[]),o=u=>{i(u.target.value)},c=[{to:"/dashboard",label:"Dashboard",icon:FN,category:"Dashboard"},{to:"/sellers/orders",label:"Orders",icon:Zee,category:"Order Management"},{to:"/sellers/products",label:"Products List",icon:q5,category:"Product Management"},{to:"/products-gallery",label:"Products Gallery",icon:Wc,category:"Product Management"},{to:"/products-upload",label:"Upload Products",icon:J5,category:"Product Management"},{to:"/product-bump",label:"Product Bump",icon:gd,category:"Product Management"},{to:"/pro-seller-analytics",label:"Pro Analytics",icon:Xf,category:"Product Management"},{to:"/pro-seller-guide",label:"Pro Seller",icon:$5,category:"Registering with us"},{to:"/seller-onboarding",label:"Standard Seller",icon:ste,category:"Registering with us"},{to:"/smile",label:"Wallet",icon:zu,category:"Your wallet"},{to:"/seller-transactions",label:"Transactions",icon:Xf,category:"Your wallet"},{to:"/seller-chat",label:"Chats",icon:Iee,category:"Chat"}].filter(u=>u.label.toLowerCase().includes(t.toLowerCase()));return n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 text-black bg-blue-900 rounded-lg hover:bg-blue-900 transition",onClick:a,"aria-label":"Open sidebar",children:n.jsx(G5,{className:"w-6 h-6"})}),n.jsxs("div",{className:`fixed inset-y-0 left-0 w-64 bg-gradient-to-b from-gray-900 to-gray-800 text-white flex flex-col z-50 md:w-64 md:flex md:flex-col transition-transform duration-300 transform ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 max-h-[calc(100vh)] overflow-y-auto`,children:[n.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[n.jsx(he,{to:"/",onClick:()=>e(!1),"aria-label":"Foremade homepage",children:n.jsx("img",{src:kh,alt:"Foremade logo",className:"w-32"})}),n.jsx("button",{className:"md:hidden p-2 text-gray-300 hover:text-white",onClick:a,"aria-label":"Close sidebar",children:n.jsx(Yc,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"p-4 sticky top-0 bg-gray-800 z-10",children:n.jsx("input",{type:"text",placeholder:"Search menu...",onChange:o,className:"w-full p-2 rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm","aria-label":"Search menu items"})}),n.jsx("nav",{className:"flex-1 p-2 space-y-3",children:t&&c.length===0?n.jsx("p",{className:"text-gray-400 text-sm px-2",children:"No menu items found"}):n.jsxs(n.Fragment,{children:[c.some(u=>u.category==="Dashboard")&&n.jsxs(he,{to:"/dashboard",onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg bg-gray-700 text-white font-semibold hover:bg-gray-600 transition","aria-label":"Dashboard",children:[n.jsx(FN,{className:"w-5 h-5 mr-2"}),"Dashboard"]}),c.some(u=>u.category==="Order Management")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Order Management"}),c.filter(u=>u.category==="Order Management").map(u=>n.jsxs(he,{to:u.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":u.label,children:[n.jsx(u.icon,{className:"w-5 h-5 mr-2"}),u.label]},u.to))]}),c.some(u=>u.category==="Product Management")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Product Management"}),c.filter(u=>u.category==="Product Management").map(u=>n.jsxs(he,{to:u.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":u.label,children:[n.jsx(u.icon,{className:"w-5 h-5 mr-2"}),u.label]},u.to))]}),c.some(u=>u.category==="Registering with us")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Registering with us"}),c.filter(u=>u.category==="Registering with us").map(u=>n.jsxs(he,{to:u.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":u.label,children:[n.jsx(u.icon,{className:"w-5 h-5 mr-2"}),u.label]},u.to))]}),c.some(u=>u.category==="Your wallet")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Your wallet"}),c.filter(u=>u.category==="Your wallet").map(u=>n.jsxs(he,{to:u.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":u.label,children:[n.jsx(u.icon,{className:"w-5 h-5 mr-2"}),u.label]},u.to))]}),c.some(u=>u.category==="Chat")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs uppercase text-gray-400 px-2 mb-2",children:"Chat"}),c.filter(u=>u.category==="Chat").map(u=>n.jsxs(he,{to:u.to,onClick:()=>e(!1),className:"flex items-center p-2 rounded-lg text-gray-200 hover:bg-gray-700 transition","aria-label":u.label,children:[n.jsx(u.icon,{className:"w-5 h-5 mr-2"}),u.label]},u.to))]})]})})]}),r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:a,"aria-hidden":"true"})]})}function dre(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(""),[o,l]=E.useState(null),c=us();E.useEffect(()=>{const g=ai(ve,async x=>{if(x)try{console.log("Starting orders fetch for seller at:",new Date().toISOString()),console.log("Authenticated seller UID:",x.uid);const y=_e(J,"products"),b=await Ke(y);console.log("Products snapshot received, count:",b.docs.length);const v=b.docs.map(_=>({id:_.id,..._.data()})).filter(_=>_.sellerId===x.uid);if(console.log("Seller products fetched, count:",v.length),v.length===0){console.log("No products found for this seller."),e([]),s(!1);return}const N=v.map(_=>_.id);console.log("Seller product IDs:",N);const k=_e(J,"orders"),A=await Ke(k);console.log("Orders snapshot received, count:",A.docs.length);const R=A.docs.map(_=>({id:_.id,..._.data(),total:Array.isArray(_.data().items)?_.data().items.filter(I=>N.includes(I.productId)).reduce((I,P)=>I+(P.price||0)*(P.quantity||0),0):0})).filter(_=>_.items.some(I=>N.includes(I.productId))).map(_=>{const P=(Array.isArray(_.items)?_.items:[]).filter(T=>N.includes(T.productId));return{..._,items:P.map(T=>({productId:T.productId,name:T.name||"Unknown",quantity:T.quantity||0,price:T.price||0,sellerId:T.sellerId}))}}).sort((_,I)=>{const P=_.createdAt?.toDate()||new Date(0);return(I.createdAt?.toDate()||new Date(0))-P});console.log("Filtered orders for seller, count:",R.length),e(R)}catch(y){console.error("Firestore fetch error:",{code:y.code,message:y.message,stack:y.stack}),i(`Failed to fetch user orders: ${y.message}.`)}else console.warn("No seller authenticated"),i("Please log in to view user orders."),c("/seller/login");s(!1)},x=>{console.error("Auth state error:",{code:x.code,message:x.message,stack:x.stack}),i("Authentication error: "+x.message),s(!1)});return()=>g()},[c]);const u=g=>{l(o===g?null:g)},h=g=>g?(g.toDate?g.toDate():new Date(g)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",f=(g,x)=>new Intl.NumberFormat("en-US",{style:"currency",currency:x||"NGN"}).format(g||0);return t?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):a?n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx(Es,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6 font-serif",children:n.jsxs("div",{className:"max-w-4xl mx-auto bg-red-100 border-l-4 border-red-500 p-4 rounded-lg animate-fade-in",children:[n.jsx("p",{className:"text-red-700",children:a}),n.jsx("p",{className:"mt-2",children:n.jsx(he,{to:"/seller/login",className:"text-blue-600 hover:underline",children:"Return to Login"})})]})})]}):n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx(Es,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-4",children:n.jsxs("div",{className:"max-w-8xl mx-auto bg-white border border-gray-200 rounded-xl shadow-sm p-8 bg-gradient-to-br from-gray-50 to-white",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Your Orders"})}),r.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-gray-600 text-lg",children:"No orders found."}),n.jsx("p",{className:"mt-2",children:n.jsx(he,{to:"/products-upload",className:"text-blue-600 hover:underline",children:"Upload products to start receiving orders"})})]}):n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full text-left border-collapse hidden md:table",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Order ID"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Customer"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Date"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Total"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Status"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700",children:"Details"})]})}),n.jsx("tbody",{children:r.map(g=>n.jsxs(cs.Fragment,{children:[n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[n.jsx("td",{className:"p-3 text-sm",children:g.orderId||g.id}),n.jsx("td",{className:"p-3 text-sm",children:g.shippingDetails?.name||"N/A"}),n.jsx("td",{className:"p-3 text-sm",children:h(g.createdAt)}),n.jsx("td",{className:"p-3 text-sm",children:f(g.total,g.currency)}),n.jsx("td",{className:"p-3 text-sm",children:n.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Placed"})}),n.jsx("td",{className:"p-3 text-sm",children:n.jsx("button",{onClick:()=>u(g.id),className:"text-blue-600 hover:underline",children:o===g.id?"Hide":"Show"})})]}),o===g.id&&n.jsx("tr",{children:n.jsx("td",{colSpan:"6",className:"p-3 bg-gray-50",children:n.jsxs("div",{className:"pl-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Items"}),g.items&&g.items.length>0?n.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-600",children:g.items.map((x,y)=>n.jsxs("li",{children:[x.name," x",x.quantity," - ",f(x.price*x.quantity,g.currency)]},y))}):n.jsx("p",{className:"text-sm text-gray-600",children:"No items"})]})})})]},g.id))})]}),n.jsx("div",{className:"md:hidden space-y-4",children:r.map(g=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 hover:bg-gray-100",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Order ID:"}),n.jsx("span",{className:"text-sm",children:g.orderId||g.id})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Customer:"}),n.jsx("span",{className:"text-sm",children:g.shippingDetails?.name||"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Date:"}),n.jsx("span",{className:"text-sm",children:h(g.createdAt)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Total:"}),n.jsx("span",{className:"text-sm",children:f(g.total,g.currency)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Status:"}),n.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Placed"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Details:"}),n.jsx("button",{onClick:()=>u(g.id),className:"text-blue-600 hover:underline text-sm",children:o===g.id?"Hide":"Show"})]}),o===g.id&&n.jsxs("div",{className:"mt-2",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Items"}),g.items&&g.items.length>0?n.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-600",children:g.items.map((x,y)=>n.jsxs("li",{children:[x.name," x",x.quantity," - ",f(x.price*x.quantity,g.currency)]},y))}):n.jsx("p",{className:"text-sm text-gray-600",children:"No items"})]})]})},g.id))})]})]})})]})}function ure(){return n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx(Es,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 flex flex-col p-6",children:n.jsx("div",{className:"",children:n.jsx("p",{children:" Seller Settings"})})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Og(r){return r+.5|0}const vl=(r,e,t)=>Math.max(Math.min(r,t),e);function Jm(r){return vl(Og(r*2.55),0,255)}function El(r){return vl(Og(r*255),0,255)}function vo(r){return vl(Og(r/2.55)/100,0,1)}function _R(r){return vl(Og(r*100),0,100)}const Dn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},HN=[..."0123456789ABCDEF"],hre=r=>HN[r&15],mre=r=>HN[(r&240)>>4]+HN[r&15],kx=r=>(r&240)>>4===(r&15),fre=r=>kx(r.r)&&kx(r.g)&&kx(r.b)&&kx(r.a);function gre(r){var e=r.length,t;return r[0]==="#"&&(e===4||e===5?t={r:255&Dn[r[1]]*17,g:255&Dn[r[2]]*17,b:255&Dn[r[3]]*17,a:e===5?Dn[r[4]]*17:255}:(e===7||e===9)&&(t={r:Dn[r[1]]<<4|Dn[r[2]],g:Dn[r[3]]<<4|Dn[r[4]],b:Dn[r[5]]<<4|Dn[r[6]],a:e===9?Dn[r[7]]<<4|Dn[r[8]]:255})),t}const pre=(r,e)=>r<255?e(r):"";function xre(r){var e=fre(r)?hre:mre;return r?"#"+e(r.r)+e(r.g)+e(r.b)+pre(r.a,e):void 0}const bre=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yO(r,e,t){const s=e*Math.min(t,1-t),a=(i,o=(i+r/30)%12)=>t-s*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function yre(r,e,t){const s=(a,i=(a+r/60)%6)=>t-t*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function vre(r,e,t){const s=yO(r,1,.5);let a;for(e+t>1&&(a=1/(e+t),e*=a,t*=a),a=0;a<3;a++)s[a]*=1-e-t,s[a]+=e;return s}function wre(r,e,t,s,a){return r===a?(e-t)/s+(e<t?6:0):e===a?(t-r)/s+2:(r-e)/s+4}function v2(r){const t=r.r/255,s=r.g/255,a=r.b/255,i=Math.max(t,s,a),o=Math.min(t,s,a),l=(i+o)/2;let c,u,h;return i!==o&&(h=i-o,u=l>.5?h/(2-i-o):h/(i+o),c=wre(t,s,a,h,i),c=c*60+.5),[c|0,u||0,l]}function w2(r,e,t,s){return(Array.isArray(e)?r(e[0],e[1],e[2]):r(e,t,s)).map(El)}function N2(r,e,t){return w2(yO,r,e,t)}function Nre(r,e,t){return w2(vre,r,e,t)}function jre(r,e,t){return w2(yre,r,e,t)}function vO(r){return(r%360+360)%360}function kre(r){const e=bre.exec(r);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?Jm(+e[5]):El(+e[5]));const a=vO(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=Nre(a,i,o):e[1]==="hsv"?s=jre(a,i,o):s=N2(a,i,o),{r:s[0],g:s[1],b:s[2],a:t}}function Sre(r,e){var t=v2(r);t[0]=vO(t[0]+e),t=N2(t),r.r=t[0],r.g=t[1],r.b=t[2]}function _re(r){if(!r)return;const e=v2(r),t=e[0],s=_R(e[1]),a=_R(e[2]);return r.a<255?`hsla(${t}, ${s}%, ${a}%, ${vo(r.a)})`:`hsl(${t}, ${s}%, ${a}%)`}const AR={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},CR={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Are(){const r={},e=Object.keys(CR),t=Object.keys(AR);let s,a,i,o,l;for(s=0;s<e.length;s++){for(o=l=e[s],a=0;a<t.length;a++)i=t[a],l=l.replace(i,AR[i]);i=parseInt(CR[o],16),r[l]=[i>>16&255,i>>8&255,i&255]}return r}let Sx;function Cre(r){Sx||(Sx=Are(),Sx.transparent=[0,0,0,0]);const e=Sx[r.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Ere=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Tre(r){const e=Ere.exec(r);let t=255,s,a,i;if(e){if(e[7]!==s){const o=+e[7];t=e[8]?Jm(o):vl(o*255,0,255)}return s=+e[1],a=+e[3],i=+e[5],s=255&(e[2]?Jm(s):vl(s,0,255)),a=255&(e[4]?Jm(a):vl(a,0,255)),i=255&(e[6]?Jm(i):vl(i,0,255)),{r:s,g:a,b:i,a:t}}}function Pre(r){return r&&(r.a<255?`rgba(${r.r}, ${r.g}, ${r.b}, ${vo(r.a)})`:`rgb(${r.r}, ${r.g}, ${r.b})`)}const s1=r=>r<=.0031308?r*12.92:Math.pow(r,1/2.4)*1.055-.055,pu=r=>r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4);function Rre(r,e,t){const s=pu(vo(r.r)),a=pu(vo(r.g)),i=pu(vo(r.b));return{r:El(s1(s+t*(pu(vo(e.r))-s))),g:El(s1(a+t*(pu(vo(e.g))-a))),b:El(s1(i+t*(pu(vo(e.b))-i))),a:r.a+t*(e.a-r.a)}}function _x(r,e,t){if(r){let s=v2(r);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=N2(s),r.r=s[0],r.g=s[1],r.b=s[2]}}function wO(r,e){return r&&Object.assign(e||{},r)}function ER(r){var e={r:0,g:0,b:0,a:255};return Array.isArray(r)?r.length>=3&&(e={r:r[0],g:r[1],b:r[2],a:255},r.length>3&&(e.a=El(r[3]))):(e=wO(r,{r:0,g:0,b:0,a:1}),e.a=El(e.a)),e}function Ire(r){return r.charAt(0)==="r"?Tre(r):kre(r)}class Gf{constructor(e){if(e instanceof Gf)return e;const t=typeof e;let s;t==="object"?s=ER(e):t==="string"&&(s=gre(e)||Cre(e)||Ire(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=wO(this._rgb);return e&&(e.a=vo(e.a)),e}set rgb(e){this._rgb=ER(e)}rgbString(){return this._valid?Pre(this._rgb):void 0}hexString(){return this._valid?xre(this._rgb):void 0}hslString(){return this._valid?_re(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,a=e.rgb;let i;const o=t===i?.5:t,l=2*o-1,c=s.a-a.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,s.r=255&u*s.r+i*a.r+.5,s.g=255&u*s.g+i*a.g+.5,s.b=255&u*s.b+i*a.b+.5,s.a=o*s.a+(1-o)*a.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=Rre(this._rgb,e._rgb,t)),this}clone(){return new Gf(this.rgb)}alpha(e){return this._rgb.a=El(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Og(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return _x(this._rgb,2,e),this}darken(e){return _x(this._rgb,2,-e),this}saturate(e){return _x(this._rgb,1,e),this}desaturate(e){return _x(this._rgb,1,-e),this}rotate(e){return Sre(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function xo(){}const Dre=(()=>{let r=0;return()=>r++})();function Ms(r){return r==null}function ia(r){if(Array.isArray&&Array.isArray(r))return!0;const e=Object.prototype.toString.call(r);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ns(r){return r!==null&&Object.prototype.toString.call(r)==="[object Object]"}function Bn(r){return(typeof r=="number"||r instanceof Number)&&isFinite(+r)}function ji(r,e){return Bn(r)?r:e}function ts(r,e){return typeof r>"u"?e:r}const Mre=(r,e)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100:+r/e,NO=(r,e)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100*e:+r;function ir(r,e,t){if(r&&typeof r.call=="function")return r.apply(t,e)}function $s(r,e,t,s){let a,i,o;if(ia(r))for(i=r.length,a=0;a<i;a++)e.call(t,r[a],a);else if(Ns(r))for(o=Object.keys(r),i=o.length,a=0;a<i;a++)e.call(t,r[o[a]],o[a])}function Q0(r,e){let t,s,a,i;if(!r||!e||r.length!==e.length)return!1;for(t=0,s=r.length;t<s;++t)if(a=r[t],i=e[t],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function Z0(r){if(ia(r))return r.map(Z0);if(Ns(r)){const e=Object.create(null),t=Object.keys(r),s=t.length;let a=0;for(;a<s;++a)e[t[a]]=Z0(r[t[a]]);return e}return r}function jO(r){return["__proto__","prototype","constructor"].indexOf(r)===-1}function Ore(r,e,t,s){if(!jO(r))return;const a=e[r],i=t[r];Ns(a)&&Ns(i)?Kf(a,i,s):e[r]=Z0(i)}function Kf(r,e,t){const s=ia(e)?e:[e],a=s.length;if(!Ns(r))return r;t=t||{};const i=t.merger||Ore;let o;for(let l=0;l<a;++l){if(o=s[l],!Ns(o))continue;const c=Object.keys(o);for(let u=0,h=c.length;u<h;++u)i(c[u],r,o,t)}return r}function wf(r,e){return Kf(r,e,{merger:Lre})}function Lre(r,e,t){if(!jO(r))return;const s=e[r],a=t[r];Ns(s)&&Ns(a)?wf(s,a):Object.prototype.hasOwnProperty.call(e,r)||(e[r]=Z0(a))}const TR={"":r=>r,x:r=>r.x,y:r=>r.y};function Fre(r){const e=r.split("."),t=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function Ure(r){const e=Fre(r);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function pd(r,e){return(TR[e]||(TR[e]=Ure(e)))(r)}function j2(r){return r.charAt(0).toUpperCase()+r.slice(1)}const Qf=r=>typeof r<"u",Hl=r=>typeof r=="function",PR=(r,e)=>{if(r.size!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0};function zre(r){return r.type==="mouseup"||r.type==="click"||r.type==="contextmenu"}const tr=Math.PI,yr=2*tr,Vre=yr+tr,J0=Number.POSITIVE_INFINITY,Bre=tr/180,Xr=tr/2,Ac=tr/4,RR=tr*2/3,kO=Math.log10,Hi=Math.sign;function Nf(r,e,t){return Math.abs(r-e)<t}function IR(r){const e=Math.round(r);r=Nf(r,e,r/1e3)?e:r;const t=Math.pow(10,Math.floor(kO(r))),s=r/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function Hre(r){const e=[],t=Math.sqrt(r);let s;for(s=1;s<t;s++)r%s===0&&(e.push(s),e.push(r/s));return t===(t|0)&&e.push(t),e.sort((a,i)=>a-i).pop(),e}function $re(r){return typeof r=="symbol"||typeof r=="object"&&r!==null&&!(Symbol.toPrimitive in r||"toString"in r||"valueOf"in r)}function Zf(r){return!$re(r)&&!isNaN(parseFloat(r))&&isFinite(r)}function Wre(r,e){const t=Math.round(r);return t-e<=r&&t+e>=r}function Yre(r,e,t){let s,a,i;for(s=0,a=r.length;s<a;s++)i=r[s][t],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function jo(r){return r*(tr/180)}function qre(r){return r*(180/tr)}function DR(r){if(!Bn(r))return;let e=1,t=0;for(;Math.round(r*e)/e!==r;)e*=10,t++;return t}function SO(r,e){const t=e.x-r.x,s=e.y-r.y,a=Math.sqrt(t*t+s*s);let i=Math.atan2(s,t);return i<-.5*tr&&(i+=yr),{angle:i,distance:a}}function $N(r,e){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function Xre(r,e){return(r-e+Vre)%yr-tr}function Kn(r){return(r%yr+yr)%yr}function Jf(r,e,t,s){const a=Kn(r),i=Kn(e),o=Kn(t),l=Kn(i-a),c=Kn(o-a),u=Kn(a-i),h=Kn(a-o);return a===i||a===o||s&&i===o||l>c&&u<h}function Sa(r,e,t){return Math.max(e,Math.min(t,r))}function Gre(r){return Sa(r,-32768,32767)}function wl(r,e,t,s=1e-6){return r>=Math.min(e,t)-s&&r<=Math.max(e,t)+s}function k2(r,e,t){t=t||(o=>r[o]<e);let s=r.length-1,a=0,i;for(;s-a>1;)i=a+s>>1,t(i)?a=i:s=i;return{lo:a,hi:s}}const qc=(r,e,t,s)=>k2(r,t,s?a=>{const i=r[a][e];return i<t||i===t&&r[a+1][e]===t}:a=>r[a][e]<t),Kre=(r,e,t)=>k2(r,t,s=>r[s][e]>=t);function Qre(r,e,t){let s=0,a=r.length;for(;s<a&&r[s]<e;)s++;for(;a>s&&r[a-1]>t;)a--;return s>0||a<r.length?r.slice(s,a):r}const _O=["push","pop","shift","splice","unshift"];function Zre(r,e){if(r._chartjs){r._chartjs.listeners.push(e);return}Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),_O.forEach(t=>{const s="_onData"+j2(t),a=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...i){const o=a.apply(this,i);return r._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function MR(r,e){const t=r._chartjs;if(!t)return;const s=t.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(_O.forEach(i=>{delete r[i]}),delete r._chartjs)}function AO(r){const e=new Set(r);return e.size===r.length?r:Array.from(e)}const CO=function(){return typeof window>"u"?function(r){return r()}:window.requestAnimationFrame}();function EO(r,e){let t=[],s=!1;return function(...a){t=a,s||(s=!0,CO.call(window,()=>{s=!1,r.apply(e,t)}))}}function Jre(r,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(r,e,s)):r.apply(this,s),e}}const TO=r=>r==="start"?"left":r==="end"?"right":"center",fn=(r,e,t)=>r==="start"?e:r==="end"?t:(e+t)/2,eae=(r,e,t,s)=>r===(s?"left":"right")?t:r==="center"?(e+t)/2:e;function tae(r,e,t){const s=e.length;let a=0,i=s;if(r._sorted){const{iScale:o,vScale:l,_parsed:c}=r,u=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null,h=o.axis,{min:f,max:g,minDefined:x,maxDefined:y}=o.getUserBounds();if(x){if(a=Math.min(qc(c,h,f).lo,t?s:qc(e,h,o.getPixelForValue(f)).lo),u){const b=c.slice(0,a+1).reverse().findIndex(v=>!Ms(v[l.axis]));a-=Math.max(0,b)}a=Sa(a,0,s-1)}if(y){let b=Math.max(qc(c,o.axis,g,!0).hi+1,t?0:qc(e,h,o.getPixelForValue(g),!0).hi+1);if(u){const v=c.slice(b-1).findIndex(N=>!Ms(N[l.axis]));b+=Math.max(0,v)}i=Sa(b,a,s)-a}else i=s-a}return{start:a,count:i}}function sae(r){const{xScale:e,yScale:t,_scaleRanges:s}=r,a={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return r._scaleRanges=a,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,a),i}const Ax=r=>r===0||r===1,OR=(r,e,t)=>-(Math.pow(2,10*(r-=1))*Math.sin((r-e)*yr/t)),LR=(r,e,t)=>Math.pow(2,-10*r)*Math.sin((r-e)*yr/t)+1,jf={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>-r*(r-2),easeInOutQuad:r=>(r/=.5)<1?.5*r*r:-.5*(--r*(r-2)-1),easeInCubic:r=>r*r*r,easeOutCubic:r=>(r-=1)*r*r+1,easeInOutCubic:r=>(r/=.5)<1?.5*r*r*r:.5*((r-=2)*r*r+2),easeInQuart:r=>r*r*r*r,easeOutQuart:r=>-((r-=1)*r*r*r-1),easeInOutQuart:r=>(r/=.5)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2),easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>(r-=1)*r*r*r*r+1,easeInOutQuint:r=>(r/=.5)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2),easeInSine:r=>-Math.cos(r*Xr)+1,easeOutSine:r=>Math.sin(r*Xr),easeInOutSine:r=>-.5*(Math.cos(tr*r)-1),easeInExpo:r=>r===0?0:Math.pow(2,10*(r-1)),easeOutExpo:r=>r===1?1:-Math.pow(2,-10*r)+1,easeInOutExpo:r=>Ax(r)?r:r<.5?.5*Math.pow(2,10*(r*2-1)):.5*(-Math.pow(2,-10*(r*2-1))+2),easeInCirc:r=>r>=1?r:-(Math.sqrt(1-r*r)-1),easeOutCirc:r=>Math.sqrt(1-(r-=1)*r),easeInOutCirc:r=>(r/=.5)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1),easeInElastic:r=>Ax(r)?r:OR(r,.075,.3),easeOutElastic:r=>Ax(r)?r:LR(r,.075,.3),easeInOutElastic(r){return Ax(r)?r:r<.5?.5*OR(r*2,.1125,.45):.5+.5*LR(r*2-1,.1125,.45)},easeInBack(r){return r*r*((1.70158+1)*r-1.70158)},easeOutBack(r){return(r-=1)*r*((1.70158+1)*r+1.70158)+1},easeInOutBack(r){let e=1.70158;return(r/=.5)<1?.5*(r*r*(((e*=1.525)+1)*r-e)):.5*((r-=2)*r*(((e*=1.525)+1)*r+e)+2)},easeInBounce:r=>1-jf.easeOutBounce(1-r),easeOutBounce(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},easeInOutBounce:r=>r<.5?jf.easeInBounce(r*2)*.5:jf.easeOutBounce(r*2-1)*.5+.5};function S2(r){if(r&&typeof r=="object"){const e=r.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function FR(r){return S2(r)?r:new Gf(r)}function r1(r){return S2(r)?r:new Gf(r).saturate(.5).darken(.1).hexString()}const rae=["x","y","borderWidth","radius","tension"],aae=["color","borderColor","backgroundColor"];function nae(r){r.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),r.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),r.set("animations",{colors:{type:"color",properties:aae},numbers:{type:"number",properties:rae}}),r.describe("animations",{_fallback:"animation"}),r.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function iae(r){r.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const UR=new Map;function oae(r,e){e=e||{};const t=r+JSON.stringify(e);let s=UR.get(t);return s||(s=new Intl.NumberFormat(r,e),UR.set(t,s)),s}function _2(r,e,t){return oae(e,t).format(r)}const lae={values(r){return ia(r)?r:""+r},numeric(r,e,t){if(r===0)return"0";const s=this.chart.options.locale;let a,i=r;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(a="scientific"),i=cae(r,t)}const o=kO(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:a,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),_2(r,s,c)}};function cae(r,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&r!==Math.floor(r)&&(t=r-Math.floor(r)),t}var PO={formatters:lae};function dae(r){r.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:PO.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),r.route("scale.ticks","color","","color"),r.route("scale.grid","color","","borderColor"),r.route("scale.border","color","","borderColor"),r.route("scale.title","color","","color"),r.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),r.describe("scales",{_fallback:"scale"}),r.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const xd=Object.create(null),WN=Object.create(null);function kf(r,e){if(!e)return r;const t=e.split(".");for(let s=0,a=t.length;s<a;++s){const i=t[s];r=r[i]||(r[i]=Object.create(null))}return r}function a1(r,e,t){return typeof e=="string"?Kf(kf(r,e),t):Kf(kf(r,""),e)}class uae{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>r1(a.backgroundColor),this.hoverBorderColor=(s,a)=>r1(a.borderColor),this.hoverColor=(s,a)=>r1(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return a1(this,e,t)}get(e){return kf(this,e)}describe(e,t){return a1(WN,e,t)}override(e,t){return a1(xd,e,t)}route(e,t,s,a){const i=kf(this,e),o=kf(this,s),l="_"+t;Object.defineProperties(i,{[l]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],u=o[a];return Ns(c)?Object.assign({},u,c):ts(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var Cr=new uae({_scriptable:r=>!r.startsWith("on"),_indexable:r=>r!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nae,iae,dae]);function hae(r){return!r||Ms(r.size)||Ms(r.family)?null:(r.style?r.style+" ":"")+(r.weight?r.weight+" ":"")+r.size+"px "+r.family}function zR(r,e,t,s,a){let i=e[a];return i||(i=e[a]=r.measureText(a).width,t.push(a)),i>s&&(s=i),s}function Cc(r,e,t){const s=r.currentDevicePixelRatio,a=t!==0?Math.max(t/2,.5):0;return Math.round((e-a)*s)/s+a}function VR(r,e){!e&&!r||(e=e||r.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,r.width,r.height),e.restore())}function YN(r,e,t,s){RO(r,e,t,s,null)}function RO(r,e,t,s,a){let i,o,l,c,u,h,f,g;const x=e.pointStyle,y=e.rotation,b=e.radius;let v=(y||0)*Bre;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){r.save(),r.translate(t,s),r.rotate(v),r.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),r.restore();return}if(!(isNaN(b)||b<=0)){switch(r.beginPath(),x){default:a?r.ellipse(t,s,a/2,b,0,0,yr):r.arc(t,s,b,0,yr),r.closePath();break;case"triangle":h=a?a/2:b,r.moveTo(t+Math.sin(v)*h,s-Math.cos(v)*b),v+=RR,r.lineTo(t+Math.sin(v)*h,s-Math.cos(v)*b),v+=RR,r.lineTo(t+Math.sin(v)*h,s-Math.cos(v)*b),r.closePath();break;case"rectRounded":u=b*.516,c=b-u,o=Math.cos(v+Ac)*c,f=Math.cos(v+Ac)*(a?a/2-u:c),l=Math.sin(v+Ac)*c,g=Math.sin(v+Ac)*(a?a/2-u:c),r.arc(t-f,s-l,u,v-tr,v-Xr),r.arc(t+g,s-o,u,v-Xr,v),r.arc(t+f,s+l,u,v,v+Xr),r.arc(t-g,s+o,u,v+Xr,v+tr),r.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*b,h=a?a/2:c,r.rect(t-h,s-c,2*h,2*c);break}v+=Ac;case"rectRot":f=Math.cos(v)*(a?a/2:b),o=Math.cos(v)*b,l=Math.sin(v)*b,g=Math.sin(v)*(a?a/2:b),r.moveTo(t-f,s-l),r.lineTo(t+g,s-o),r.lineTo(t+f,s+l),r.lineTo(t-g,s+o),r.closePath();break;case"crossRot":v+=Ac;case"cross":f=Math.cos(v)*(a?a/2:b),o=Math.cos(v)*b,l=Math.sin(v)*b,g=Math.sin(v)*(a?a/2:b),r.moveTo(t-f,s-l),r.lineTo(t+f,s+l),r.moveTo(t+g,s-o),r.lineTo(t-g,s+o);break;case"star":f=Math.cos(v)*(a?a/2:b),o=Math.cos(v)*b,l=Math.sin(v)*b,g=Math.sin(v)*(a?a/2:b),r.moveTo(t-f,s-l),r.lineTo(t+f,s+l),r.moveTo(t+g,s-o),r.lineTo(t-g,s+o),v+=Ac,f=Math.cos(v)*(a?a/2:b),o=Math.cos(v)*b,l=Math.sin(v)*b,g=Math.sin(v)*(a?a/2:b),r.moveTo(t-f,s-l),r.lineTo(t+f,s+l),r.moveTo(t+g,s-o),r.lineTo(t-g,s+o);break;case"line":o=a?a/2:Math.cos(v)*b,l=Math.sin(v)*b,r.moveTo(t-o,s-l),r.lineTo(t+o,s+l);break;case"dash":r.moveTo(t,s),r.lineTo(t+Math.cos(v)*(a?a/2:b),s+Math.sin(v)*b);break;case!1:r.closePath();break}r.fill(),e.borderWidth>0&&r.stroke()}}function eg(r,e,t){return t=t||.5,!e||r&&r.x>e.left-t&&r.x<e.right+t&&r.y>e.top-t&&r.y<e.bottom+t}function A2(r,e){r.save(),r.beginPath(),r.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),r.clip()}function C2(r){r.restore()}function mae(r,e,t,s,a){if(!e)return r.lineTo(t.x,t.y);if(a==="middle"){const i=(e.x+t.x)/2;r.lineTo(i,e.y),r.lineTo(i,t.y)}else a==="after"!=!!s?r.lineTo(e.x,t.y):r.lineTo(t.x,e.y);r.lineTo(t.x,t.y)}function fae(r,e,t,s){if(!e)return r.lineTo(t.x,t.y);r.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function gae(r,e){e.translation&&r.translate(e.translation[0],e.translation[1]),Ms(e.rotation)||r.rotate(e.rotation),e.color&&(r.fillStyle=e.color),e.textAlign&&(r.textAlign=e.textAlign),e.textBaseline&&(r.textBaseline=e.textBaseline)}function pae(r,e,t,s,a){if(a.strikethrough||a.underline){const i=r.measureText(s),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=t-i.actualBoundingBoxAscent,u=t+i.actualBoundingBoxDescent,h=a.strikethrough?(c+u)/2:u;r.strokeStyle=r.fillStyle,r.beginPath(),r.lineWidth=a.decorationWidth||2,r.moveTo(o,h),r.lineTo(l,h),r.stroke()}}function xae(r,e){const t=r.fillStyle;r.fillStyle=e.color,r.fillRect(e.left,e.top,e.width,e.height),r.fillStyle=t}function eb(r,e,t,s,a,i={}){const o=ia(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(r.save(),r.font=a.string,gae(r,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&xae(r,i.backdrop),l&&(i.strokeColor&&(r.strokeStyle=i.strokeColor),Ms(i.strokeWidth)||(r.lineWidth=i.strokeWidth),r.strokeText(u,t,s,i.maxWidth)),r.fillText(u,t,s,i.maxWidth),pae(r,t,s,u,i),s+=Number(a.lineHeight);r.restore()}function tb(r,e){const{x:t,y:s,w:a,h:i,radius:o}=e;r.arc(t+o.topLeft,s+o.topLeft,o.topLeft,1.5*tr,tr,!0),r.lineTo(t,s+i-o.bottomLeft),r.arc(t+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,tr,Xr,!0),r.lineTo(t+a-o.bottomRight,s+i),r.arc(t+a-o.bottomRight,s+i-o.bottomRight,o.bottomRight,Xr,0,!0),r.lineTo(t+a,s+o.topRight),r.arc(t+a-o.topRight,s+o.topRight,o.topRight,0,-Xr,!0),r.lineTo(t+o.topLeft,s)}const bae=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,yae=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function vae(r,e){const t=(""+r).match(bae);if(!t||t[1]==="normal")return e*1.2;switch(r=+t[2],t[3]){case"px":return r;case"%":r/=100;break}return e*r}const wae=r=>+r||0;function E2(r,e){const t={},s=Ns(e),a=s?Object.keys(e):e,i=Ns(r)?s?o=>ts(r[o],r[e[o]]):o=>r[o]:()=>r;for(const o of a)t[o]=wae(i(o));return t}function IO(r){return E2(r,{top:"y",right:"x",bottom:"y",left:"x"})}function Vu(r){return E2(r,["topLeft","topRight","bottomLeft","bottomRight"])}function oi(r){const e=IO(r);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Qa(r,e){r=r||{},e=e||Cr.font;let t=ts(r.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=ts(r.style,e.style);s&&!(""+s).match(yae)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:ts(r.family,e.family),lineHeight:vae(ts(r.lineHeight,e.lineHeight),t),size:t,style:s,weight:ts(r.weight,e.weight),string:""};return a.string=hae(a),a}function Cx(r,e,t,s){let a,i,o;for(a=0,i=r.length;a<i;++a)if(o=r[a],o!==void 0&&o!==void 0)return o}function Nae(r,e,t){const{min:s,max:a}=r,i=NO(e,(a-s)/2),o=(l,c)=>t&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(a,i)}}function Ad(r,e){return Object.assign(Object.create(r),e)}function T2(r,e=[""],t,s,a=()=>r[0]){const i=t||r;typeof s>"u"&&(s=LO("_fallback",r));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:r,_rootScopes:i,_fallback:s,_getTarget:a,override:l=>T2([l,...r],e,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete r[0][c],!0},get(l,c){return MO(l,c,()=>Tae(c,e,r,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(r[0])},has(l,c){return HR(l).includes(c)},ownKeys(l){return HR(l)},set(l,c,u){const h=l._storage||(l._storage=a());return l[c]=h[c]=u,delete l._keys,!0}})}function sh(r,e,t,s){const a={_cacheable:!1,_proxy:r,_context:e,_subProxy:t,_stack:new Set,_descriptors:DO(r,s),setContext:i=>sh(r,i,t,s),override:i=>sh(r.override(i),e,t,s)};return new Proxy(a,{deleteProperty(i,o){return delete i[o],delete r[o],!0},get(i,o,l){return MO(i,o,()=>kae(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(r,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(r,o)},getPrototypeOf(){return Reflect.getPrototypeOf(r)},has(i,o){return Reflect.has(r,o)},ownKeys(){return Reflect.ownKeys(r)},set(i,o,l){return r[o]=l,delete i[o],!0}})}function DO(r,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=r;return{allKeys:a,scriptable:t,indexable:s,isScriptable:Hl(t)?t:()=>t,isIndexable:Hl(s)?s:()=>s}}const jae=(r,e)=>r?r+j2(e):e,P2=(r,e)=>Ns(e)&&r!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function MO(r,e,t){if(Object.prototype.hasOwnProperty.call(r,e)||e==="constructor")return r[e];const s=t();return r[e]=s,s}function kae(r,e,t){const{_proxy:s,_context:a,_subProxy:i,_descriptors:o}=r;let l=s[e];return Hl(l)&&o.isScriptable(e)&&(l=Sae(e,l,r,t)),ia(l)&&l.length&&(l=_ae(e,l,r,o.isIndexable)),P2(e,l)&&(l=sh(l,a,i&&i[e],o)),l}function Sae(r,e,t,s){const{_proxy:a,_context:i,_subProxy:o,_stack:l}=t;if(l.has(r))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+r);l.add(r);let c=e(i,o||s);return l.delete(r),P2(r,c)&&(c=R2(a._scopes,a,r,c)),c}function _ae(r,e,t,s){const{_proxy:a,_context:i,_subProxy:o,_descriptors:l}=t;if(typeof i.index<"u"&&s(r))return e[i.index%e.length];if(Ns(e[0])){const c=e,u=a._scopes.filter(h=>h!==c);e=[];for(const h of c){const f=R2(u,a,r,h);e.push(sh(f,i,o&&o[r],l))}}return e}function OO(r,e,t){return Hl(r)?r(e,t):r}const Aae=(r,e)=>r===!0?e:typeof r=="string"?pd(e,r):void 0;function Cae(r,e,t,s,a){for(const i of e){const o=Aae(t,i);if(o){r.add(o);const l=OO(o._fallback,t,a);if(typeof l<"u"&&l!==t&&l!==s)return l}else if(o===!1&&typeof s<"u"&&t!==s)return null}return!1}function R2(r,e,t,s){const a=e._rootScopes,i=OO(e._fallback,t,s),o=[...r,...a],l=new Set;l.add(s);let c=BR(l,o,t,i||t,s);return c===null||typeof i<"u"&&i!==t&&(c=BR(l,o,i,c,s),c===null)?!1:T2(Array.from(l),[""],a,i,()=>Eae(e,t,s))}function BR(r,e,t,s,a){for(;t;)t=Cae(r,e,t,s,a);return t}function Eae(r,e,t){const s=r._getTarget();e in s||(s[e]={});const a=s[e];return ia(a)&&Ns(t)?t:a||{}}function Tae(r,e,t,s){let a;for(const i of e)if(a=LO(jae(i,r),t),typeof a<"u")return P2(r,a)?R2(t,s,r,a):a}function LO(r,e){for(const t of e){if(!t)continue;const s=t[r];if(typeof s<"u")return s}}function HR(r){let e=r._keys;return e||(e=r._keys=Pae(r._scopes)),e}function Pae(r){const e=new Set;for(const t of r)for(const s of Object.keys(t).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}const Rae=Number.EPSILON||1e-14,rh=(r,e)=>e<r.length&&!r[e].skip&&r[e],FO=r=>r==="x"?"y":"x";function Iae(r,e,t,s){const a=r.skip?e:r,i=e,o=t.skip?e:t,l=$N(i,a),c=$N(o,i);let u=l/(l+c),h=c/(l+c);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const f=s*u,g=s*h;return{previous:{x:i.x-f*(o.x-a.x),y:i.y-f*(o.y-a.y)},next:{x:i.x+g*(o.x-a.x),y:i.y+g*(o.y-a.y)}}}function Dae(r,e,t){const s=r.length;let a,i,o,l,c,u=rh(r,0);for(let h=0;h<s-1;++h)if(c=u,u=rh(r,h+1),!(!c||!u)){if(Nf(e[h],0,Rae)){t[h]=t[h+1]=0;continue}a=t[h]/e[h],i=t[h+1]/e[h],l=Math.pow(a,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),t[h]=a*o*e[h],t[h+1]=i*o*e[h])}}function Mae(r,e,t="x"){const s=FO(t),a=r.length;let i,o,l,c=rh(r,0);for(let u=0;u<a;++u){if(o=l,l=c,c=rh(r,u+1),!l)continue;const h=l[t],f=l[s];o&&(i=(h-o[t])/3,l[`cp1${t}`]=h-i,l[`cp1${s}`]=f-i*e[u]),c&&(i=(c[t]-h)/3,l[`cp2${t}`]=h+i,l[`cp2${s}`]=f+i*e[u])}}function Oae(r,e="x"){const t=FO(e),s=r.length,a=Array(s).fill(0),i=Array(s);let o,l,c,u=rh(r,0);for(o=0;o<s;++o)if(l=c,c=u,u=rh(r,o+1),!!c){if(u){const h=u[e]-c[e];a[o]=h!==0?(u[t]-c[t])/h:0}i[o]=l?u?Hi(a[o-1])!==Hi(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}Dae(r,a,i),Mae(r,i,e)}function Ex(r,e,t){return Math.max(Math.min(r,t),e)}function Lae(r,e){let t,s,a,i,o,l=eg(r[0],e);for(t=0,s=r.length;t<s;++t)o=i,i=l,l=t<s-1&&eg(r[t+1],e),i&&(a=r[t],o&&(a.cp1x=Ex(a.cp1x,e.left,e.right),a.cp1y=Ex(a.cp1y,e.top,e.bottom)),l&&(a.cp2x=Ex(a.cp2x,e.left,e.right),a.cp2y=Ex(a.cp2y,e.top,e.bottom)))}function Fae(r,e,t,s,a){let i,o,l,c;if(e.spanGaps&&(r=r.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Oae(r,a);else{let u=s?r[r.length-1]:r[0];for(i=0,o=r.length;i<o;++i)l=r[i],c=Iae(u,l,r[Math.min(i+1,o-(s?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&Lae(r,t)}function I2(){return typeof window<"u"&&typeof document<"u"}function D2(r){let e=r.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function sb(r,e,t){let s;return typeof r=="string"?(s=parseInt(r,10),r.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=r,s}const ry=r=>r.ownerDocument.defaultView.getComputedStyle(r,null);function Uae(r,e){return ry(r).getPropertyValue(e)}const zae=["top","right","bottom","left"];function rd(r,e,t){const s={};t=t?"-"+t:"";for(let a=0;a<4;a++){const i=zae[a];s[i]=parseFloat(r[e+"-"+i+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Vae=(r,e,t)=>(r>0||e>0)&&(!t||!t.shadowRoot);function Bae(r,e){const t=r.touches,s=t&&t.length?t[0]:r,{offsetX:a,offsetY:i}=s;let o=!1,l,c;if(Vae(a,i,r.target))l=a,c=i;else{const u=e.getBoundingClientRect();l=s.clientX-u.left,c=s.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function Mc(r,e){if("native"in r)return r;const{canvas:t,currentDevicePixelRatio:s}=e,a=ry(t),i=a.boxSizing==="border-box",o=rd(a,"padding"),l=rd(a,"border","width"),{x:c,y:u,box:h}=Bae(r,t),f=o.left+(h&&l.left),g=o.top+(h&&l.top);let{width:x,height:y}=e;return i&&(x-=o.width+l.width,y-=o.height+l.height),{x:Math.round((c-f)/x*t.width/s),y:Math.round((u-g)/y*t.height/s)}}function Hae(r,e,t){let s,a;if(e===void 0||t===void 0){const i=r&&D2(r);if(!i)e=r.clientWidth,t=r.clientHeight;else{const o=i.getBoundingClientRect(),l=ry(i),c=rd(l,"border","width"),u=rd(l,"padding");e=o.width-u.width-c.width,t=o.height-u.height-c.height,s=sb(l.maxWidth,i,"clientWidth"),a=sb(l.maxHeight,i,"clientHeight")}}return{width:e,height:t,maxWidth:s||J0,maxHeight:a||J0}}const Tx=r=>Math.round(r*10)/10;function $ae(r,e,t,s){const a=ry(r),i=rd(a,"margin"),o=sb(a.maxWidth,r,"clientWidth")||J0,l=sb(a.maxHeight,r,"clientHeight")||J0,c=Hae(r,e,t);let{width:u,height:h}=c;if(a.boxSizing==="content-box"){const g=rd(a,"border","width"),x=rd(a,"padding");u-=x.width+g.width,h-=x.height+g.height}return u=Math.max(0,u-i.width),h=Math.max(0,s?u/s:h-i.height),u=Tx(Math.min(u,o,c.maxWidth)),h=Tx(Math.min(h,l,c.maxHeight)),u&&!h&&(h=Tx(u/2)),(e!==void 0||t!==void 0)&&s&&c.height&&h>c.height&&(h=c.height,u=Tx(Math.floor(h*s))),{width:u,height:h}}function $R(r,e,t){const s=e||1,a=Math.floor(r.height*s),i=Math.floor(r.width*s);r.height=Math.floor(r.height),r.width=Math.floor(r.width);const o=r.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${r.height}px`,o.style.width=`${r.width}px`),r.currentDevicePixelRatio!==s||o.height!==a||o.width!==i?(r.currentDevicePixelRatio=s,o.height=a,o.width=i,r.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Wae=function(){let r=!1;try{const e={get passive(){return r=!0,!1}};I2()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return r}();function WR(r,e){const t=Uae(r,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Oc(r,e,t,s){return{x:r.x+t*(e.x-r.x),y:r.y+t*(e.y-r.y)}}function Yae(r,e,t,s){return{x:r.x+t*(e.x-r.x),y:s==="middle"?t<.5?r.y:e.y:s==="after"?t<1?r.y:e.y:t>0?e.y:r.y}}function qae(r,e,t,s){const a={x:r.cp2x,y:r.cp2y},i={x:e.cp1x,y:e.cp1y},o=Oc(r,a,t),l=Oc(a,i,t),c=Oc(i,e,t),u=Oc(o,l,t),h=Oc(l,c,t);return Oc(u,h,t)}const Xae=function(r,e){return{x(t){return r+r+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},Gae=function(){return{x(r){return r},setWidth(r){},textAlign(r){return r},xPlus(r,e){return r+e},leftForLtr(r,e){return r}}};function Bu(r,e,t){return r?Xae(e,t):Gae()}function UO(r,e){let t,s;(e==="ltr"||e==="rtl")&&(t=r.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),r.prevTextDirection=s)}function zO(r,e){e!==void 0&&(delete r.prevTextDirection,r.canvas.style.setProperty("direction",e[0],e[1]))}function VO(r){return r==="angle"?{between:Jf,compare:Xre,normalize:Kn}:{between:wl,compare:(e,t)=>e-t,normalize:e=>e}}function YR({start:r,end:e,count:t,loop:s,style:a}){return{start:r%t,end:e%t,loop:s&&(e-r+1)%t===0,style:a}}function Kae(r,e,t){const{property:s,start:a,end:i}=t,{between:o,normalize:l}=VO(s),c=e.length;let{start:u,end:h,loop:f}=r,g,x;if(f){for(u+=c,h+=c,g=0,x=c;g<x&&o(l(e[u%c][s]),a,i);++g)u--,h--;u%=c,h%=c}return h<u&&(h+=c),{start:u,end:h,loop:f,style:r.style}}function Qae(r,e,t){if(!t)return[r];const{property:s,start:a,end:i}=t,o=e.length,{compare:l,between:c,normalize:u}=VO(s),{start:h,end:f,loop:g,style:x}=Kae(r,e,t),y=[];let b=!1,v=null,N,k,A;const R=()=>c(a,A,N)&&l(a,A)!==0,_=()=>l(i,N)===0||c(i,A,N),I=()=>b||R(),P=()=>!b||_();for(let T=h,D=h;T<=f;++T)k=e[T%o],!k.skip&&(N=u(k[s]),N!==A&&(b=c(N,a,i),v===null&&I()&&(v=l(N,a)===0?T:D),v!==null&&P()&&(y.push(YR({start:v,end:T,loop:g,count:o,style:x})),v=null),D=T,A=N));return v!==null&&y.push(YR({start:v,end:f,loop:g,count:o,style:x})),y}function Zae(r,e){const t=[],s=r.segments;for(let a=0;a<s.length;a++){const i=Qae(s[a],r.points,e);i.length&&t.push(...i)}return t}function Jae(r,e,t,s){let a=0,i=e-1;if(t&&!s)for(;a<e&&!r[a].skip;)a++;for(;a<e&&r[a].skip;)a++;for(a%=e,t&&(i+=a);i>a&&r[i%e].skip;)i--;return i%=e,{start:a,end:i}}function ene(r,e,t,s){const a=r.length,i=[];let o=e,l=r[e],c;for(c=e+1;c<=t;++c){const u=r[c%a];u.skip||u.stop?l.skip||(s=!1,i.push({start:e%a,end:(c-1)%a,loop:s}),e=o=u.stop?c:null):(o=c,l.skip&&(e=c)),l=u}return o!==null&&i.push({start:e%a,end:o%a,loop:s}),i}function tne(r,e){const t=r.points,s=r.options.spanGaps,a=t.length;if(!a)return[];const i=!!r._loop,{start:o,end:l}=Jae(t,a,i,s);if(s===!0)return qR(r,[{start:o,end:l,loop:i}],t,e);const c=l<o?l+a:l,u=!!r._fullLoop&&o===0&&l===a-1;return qR(r,ene(t,o,c,u),t,e)}function qR(r,e,t,s){return!s||!s.setContext||!t?e:sne(r,e,t,s)}function sne(r,e,t,s){const a=r._chart.getContext(),i=XR(r.options),{_datasetIndex:o,options:{spanGaps:l}}=r,c=t.length,u=[];let h=i,f=e[0].start,g=f;function x(y,b,v,N){const k=l?-1:1;if(y!==b){for(y+=c;t[y%c].skip;)y-=k;for(;t[b%c].skip;)b+=k;y%c!==b%c&&(u.push({start:y%c,end:b%c,loop:v,style:N}),h=N,f=b%c)}}for(const y of e){f=l?f:y.start;let b=t[f%c],v;for(g=f+1;g<=y.end;g++){const N=t[g%c];v=XR(s.setContext(Ad(a,{type:"segment",p0:b,p1:N,p0DataIndex:(g-1)%c,p1DataIndex:g%c,datasetIndex:o}))),rne(v,h)&&x(f,g-1,y.loop,h),b=N,h=v}f<g-1&&x(f,g-1,y.loop,h)}return u}function XR(r){return{backgroundColor:r.backgroundColor,borderCapStyle:r.borderCapStyle,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderJoinStyle:r.borderJoinStyle,borderWidth:r.borderWidth,borderColor:r.borderColor}}function rne(r,e){if(!e)return!1;const t=[],s=function(a,i){return S2(i)?(t.includes(i)||t.push(i),t.indexOf(i)):i};return JSON.stringify(r,s)!==JSON.stringify(e,s)}function Px(r,e,t){return r.options.clip?r[t]:e[t]}function ane(r,e){const{xScale:t,yScale:s}=r;return t&&s?{left:Px(t,e,"left"),right:Px(t,e,"right"),top:Px(s,e,"top"),bottom:Px(s,e,"bottom")}:e}function nne(r,e){const t=e._clip;if(t.disabled)return!1;const s=ane(e,r.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?r.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?r.height:s.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class ine{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,a){const i=t.listeners[a],o=t.duration;i.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(s-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=CO.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(a.draw(),this._notify(a,s,e,"progress")),i.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),t+=i.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var bo=new ine;const GR="transparent",one={boolean(r,e,t){return t>.5?e:r},color(r,e,t){const s=FR(r||GR),a=s.valid&&FR(e||GR);return a&&a.valid?a.mix(s,t).hexString():e},number(r,e,t){return r+(e-r)*t}};class lne{constructor(e,t,s,a){const i=t[s];a=Cx([e.to,a,i,e.from]);const o=Cx([e.from,i,a]);this._active=!0,this._fn=e.fn||one[e.type||typeof o],this._easing=jf[e.easing]||jf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const a=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Cx([e.to,t,a,e.from]),this._from=Cx([e.from,a,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,a=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||t<s),!this._active){this._target[a]=l,this._notify(!0);return}if(t<0){this._target[a]=i;return}c=t/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[a]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][t]()}}class BO{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ns(e))return;const t=Object.keys(Cr.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const i=e[a];if(!Ns(i))return;const o={};for(const l of t)o[l]=i[l];(ia(i.properties)&&i.properties||[a]).forEach(l=>{(l===a||!s.has(l))&&s.set(l,o)})})}_animateOptions(e,t){const s=t.options,a=dne(e,s);if(!a)return[];const i=this._createAnimations(a,s);return s.$shared&&cne(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,t){const s=this._properties,a=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){a.push(...this._animateOptions(e,t));continue}const h=t[u];let f=i[u];const g=s.get(u);if(f)if(g&&f.active()){f.update(g,h,l);continue}else f.cancel();if(!g||!g.duration){e[u]=h;continue}i[u]=f=new lne(g,e,u,h),a.push(f)}return a}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return bo.add(this._chart,s),!0}}function cne(r,e){const t=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const i=r[s[a]];i&&i.active()&&t.push(i.wait())}return Promise.all(t)}function dne(r,e){if(!e)return;let t=r.options;if(!t){r.options=e;return}return t.$shared&&(r.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function KR(r,e){const t=r&&r.options||{},s=t.reverse,a=t.min===void 0?e:0,i=t.max===void 0?e:0;return{start:s?i:a,end:s?a:i}}function une(r,e,t){if(t===!1)return!1;const s=KR(r,t),a=KR(e,t);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function hne(r){let e,t,s,a;return Ns(r)?(e=r.top,t=r.right,s=r.bottom,a=r.left):e=t=s=a=r,{top:e,right:t,bottom:s,left:a,disabled:r===!1}}function HO(r,e){const t=[],s=r._getSortedDatasetMetas(e);let a,i;for(a=0,i=s.length;a<i;++a)t.push(s[a].index);return t}function QR(r,e,t,s={}){const a=r.keys,i=s.mode==="single";let o,l,c,u;if(e===null)return;let h=!1;for(o=0,l=a.length;o<l;++o){if(c=+a[o],c===t){if(h=!0,s.all)continue;break}u=r.values[c],Bn(u)&&(i||e===0||Hi(e)===Hi(u))&&(e+=u)}return!h&&!s.all?0:e}function mne(r,e){const{iScale:t,vScale:s}=e,a=t.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(r),l=new Array(o.length);let c,u,h;for(c=0,u=o.length;c<u;++c)h=o[c],l[c]={[a]:h,[i]:r[h]};return l}function n1(r,e){const t=r&&r.options.stacked;return t||t===void 0&&e.stack!==void 0}function fne(r,e,t){return`${r.id}.${e.id}.${t.stack||t.type}`}function gne(r){const{min:e,max:t,minDefined:s,maxDefined:a}=r.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?t:Number.POSITIVE_INFINITY}}function pne(r,e,t){const s=r[e]||(r[e]={});return s[t]||(s[t]={})}function ZR(r,e,t,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const i=r[a.index];if(t&&i>0||!t&&i<0)return a.index}return null}function JR(r,e){const{chart:t,_cachedMeta:s}=r,a=t._stacks||(t._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,u=o.axis,h=fne(i,o,s),f=e.length;let g;for(let x=0;x<f;++x){const y=e[x],{[c]:b,[u]:v}=y,N=y._stacks||(y._stacks={});g=N[u]=pne(a,h,b),g[l]=v,g._top=ZR(g,o,!0,s.type),g._bottom=ZR(g,o,!1,s.type);const k=g._visualValues||(g._visualValues={});k[l]=v}}function i1(r,e){const t=r.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function xne(r,e){return Ad(r,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function bne(r,e,t){return Ad(r,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Fm(r,e){const t=r.controller.index,s=r.vScale&&r.vScale.axis;if(s){e=e||r._parsed;for(const a of e){const i=a._stacks;if(!i||i[s]===void 0||i[s][t]===void 0)return;delete i[s][t],i[s]._visualValues!==void 0&&i[s]._visualValues[t]!==void 0&&delete i[s]._visualValues[t]}}}const o1=r=>r==="reset"||r==="none",eI=(r,e)=>e?r:Object.assign({},r),yne=(r,e,t)=>r&&!e.hidden&&e._stacked&&{keys:HO(t,!0),values:null};class ay{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=n1(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Fm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),a=(f,g,x,y)=>f==="x"?g:f==="r"?y:x,i=t.xAxisID=ts(s.xAxisID,i1(e,"x")),o=t.yAxisID=ts(s.yAxisID,i1(e,"y")),l=t.rAxisID=ts(s.rAxisID,i1(e,"r")),c=t.indexAxis,u=t.iAxisID=a(c,i,o,l),h=t.vAxisID=a(c,o,i,l);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&MR(this._data,this),e._stacked&&Fm(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Ns(t)){const a=this._cachedMeta;this._data=mne(t,a)}else if(s!==t){if(s){MR(s,this);const a=this._cachedMeta;Fm(a),a._parsed=[]}t&&Object.isExtensible(t)&&Zre(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const i=t._stacked;t._stacked=n1(t.vScale,t),t.stack!==s.stack&&(a=!0,Fm(t),t.stack=s.stack),this._resyncElements(e),(a||i!==t._stacked)&&(JR(this,t._parsed),t._stacked=n1(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:a}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=e===0&&t===a.length?!0:s._sorted,u=e>0&&s._parsed[e-1],h,f,g;if(this._parsing===!1)s._parsed=a,s._sorted=!0,g=a;else{ia(a[e])?g=this.parseArrayData(s,a,e,t):Ns(a[e])?g=this.parseObjectData(s,a,e,t):g=this.parsePrimitiveData(s,a,e,t);const x=()=>f[l]===null||u&&f[l]<u[l];for(h=0;h<t;++h)s._parsed[h+e]=f=g[h],c&&(x()&&(c=!1),u=f);s._sorted=c}o&&JR(this,g)}parsePrimitiveData(e,t,s,a){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,u=i.getLabels(),h=i===o,f=new Array(a);let g,x,y;for(g=0,x=a;g<x;++g)y=g+s,f[g]={[l]:h||i.parse(u[y],y),[c]:o.parse(t[y],y)};return f}parseArrayData(e,t,s,a){const{xScale:i,yScale:o}=e,l=new Array(a);let c,u,h,f;for(c=0,u=a;c<u;++c)h=c+s,f=t[h],l[c]={x:i.parse(f[0],h),y:o.parse(f[1],h)};return l}parseObjectData(e,t,s,a){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(a);let h,f,g,x;for(h=0,f=a;h<f;++h)g=h+s,x=t[g],u[h]={x:i.parse(pd(x,l),g),y:o.parse(pd(x,c),g)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const a=this.chart,i=this._cachedMeta,o=t[e.axis],l={keys:HO(a,!0),values:t._stacks[e.axis]._visualValues};return QR(l,o,i.index,{mode:s})}updateRangeFromParsed(e,t,s,a){const i=s[t.axis];let o=i===null?NaN:i;const l=a&&s._stacks[t.axis];a&&l&&(a.values=l,o=QR(a,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const s=this._cachedMeta,a=s._parsed,i=s._sorted&&e===s.iScale,o=a.length,l=this._getOtherScale(e),c=yne(t,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=gne(l);let g,x;function y(){x=a[g];const b=x[l.axis];return!Bn(x[e.axis])||h>b||f<b}for(g=0;g<o&&!(!y()&&(this.updateRangeFromParsed(u,e,x,c),i));++g);if(i){for(g=o-1;g>=0;--g)if(!y()){this.updateRangeFromParsed(u,e,x,c);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let a,i,o;for(a=0,i=t.length;a<i;++a)o=t[a][e.axis],Bn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,a=t.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=hne(ts(this.options.clip,une(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,a=s.data||[],i=t.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||a.length-l,u=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(e,i,l,c),h=l;h<l+c;++h){const f=a[h];f.hidden||(f.active&&u?o.push(f):f.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const a=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=bne(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=a.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=xne(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const a=t==="active",i=this._cachedDataOpts,o=e+"-"+t,l=i[o],c=this.enableOptionSharing&&Qf(s);if(l)return eI(l,c);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),f=a?[`${e}Hover`,"hover",e,""]:[e,""],g=u.getOptionScopes(this.getDataset(),h),x=Object.keys(Cr.elements[e]),y=()=>this.getContext(s,a,t),b=u.resolveNamedOptions(g,x,y,f);return b.$shared&&(b.$shared=c,i[o]=Object.freeze(eI(b,c))),b}_resolveAnimations(e,t,s){const a=this.chart,i=this._cachedDataOpts,o=`animation-${t}`,l=i[o];if(l)return l;let c;if(a.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,t),g=h.getOptionScopes(this.getDataset(),f);c=h.createResolver(g,this.getContext(e,s,t))}const u=new BO(a,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||o1(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),a=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(t,i)||i!==a;return this.updateSharedOptions(i,t,s),{sharedOptions:i,includeOptions:o}}updateElement(e,t,s,a){o1(a)?Object.assign(e,s):this._resolveAnimations(t,a).update(e,s)}updateSharedOptions(e,t,s){e&&!o1(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,a){e.active=a;const i=this.getStyle(t,a);this._resolveAnimations(t,s,a).update(e,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const a=s.length,i=t.length,o=Math.min(i,a);o&&this.parse(0,o),i>a?this._insertElements(a,i-a,e):i<a&&this._removeElements(i,a-i)}_insertElements(e,t,s=!0){const a=this._cachedMeta,i=a.data,o=e+t;let l;const c=u=>{for(u.length+=t,l=u.length-1;l>=o;l--)u[l]=u[l-t]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(a._parsed),this.parse(e,t),s&&this.updateElements(i,e,t,"reset")}updateElements(e,t,s,a){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,t);s._stacked&&Fm(s,a)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,a]=e;this[t](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function vne(r,e){if(!r._cache.$bar){const t=r.getMatchingVisibleMetas(e);let s=[];for(let a=0,i=t.length;a<i;a++)s=s.concat(t[a].controller.getAllParsedValues(r));r._cache.$bar=AO(s.sort((a,i)=>a-i))}return r._cache.$bar}function wne(r){const e=r.iScale,t=vne(e,r.type);let s=e._length,a,i,o,l;const c=()=>{o===32767||o===-32768||(Qf(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(a=0,i=t.length;a<i;++a)o=e.getPixelForValue(t[a]),c();for(l=void 0,a=0,i=e.ticks.length;a<i;++a)o=e.getPixelForTick(a),c();return s}function Nne(r,e,t,s){const a=t.barThickness;let i,o;return Ms(a)?(i=e.min*t.categoryPercentage,o=t.barPercentage):(i=a*s,o=1),{chunk:i/s,ratio:o,start:e.pixels[r]-i/2}}function jne(r,e,t,s){const a=e.pixels,i=a[r];let o=r>0?a[r-1]:null,l=r<a.length-1?a[r+1]:null;const c=t.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const u=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:t.barPercentage,start:u}}function kne(r,e,t,s){const a=t.parse(r[0],s),i=t.parse(r[1],s),o=Math.min(a,i),l=Math.max(a,i);let c=o,u=l;Math.abs(o)>Math.abs(l)&&(c=l,u=o),e[t.axis]=u,e._custom={barStart:c,barEnd:u,start:a,end:i,min:o,max:l}}function $O(r,e,t,s){return ia(r)?kne(r,e,t,s):e[t.axis]=t.parse(r,s),e}function tI(r,e,t,s){const a=r.iScale,i=r.vScale,o=a.getLabels(),l=a===i,c=[];let u,h,f,g;for(u=t,h=t+s;u<h;++u)g=e[u],f={},f[a.axis]=l||a.parse(o[u],u),c.push($O(g,f,i,u));return c}function l1(r){return r&&r.barStart!==void 0&&r.barEnd!==void 0}function Sne(r,e,t){return r!==0?Hi(r):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function _ne(r){let e,t,s,a,i;return r.horizontal?(e=r.base>r.x,t="left",s="right"):(e=r.base<r.y,t="bottom",s="top"),e?(a="end",i="start"):(a="start",i="end"),{start:t,end:s,reverse:e,top:a,bottom:i}}function Ane(r,e,t,s){let a=e.borderSkipped;const i={};if(!a){r.borderSkipped=i;return}if(a===!0){r.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:u,bottom:h}=_ne(r);a==="middle"&&t&&(r.enableBorderRadius=!0,(t._top||0)===s?a=u:(t._bottom||0)===s?a=h:(i[sI(h,o,l,c)]=!0,a=u)),i[sI(a,o,l,c)]=!0,r.borderSkipped=i}function sI(r,e,t,s){return s?(r=Cne(r,e,t),r=rI(r,t,e)):r=rI(r,e,t),r}function Cne(r,e,t){return r===e?t:r===t?e:r}function rI(r,e,t){return r==="start"?e:r==="end"?t:r}function Ene(r,{inflateAmount:e},t){r.inflateAmount=e==="auto"?t===1?.33:0:e}class Tne extends ay{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,s,a){return tI(e,t,s,a)}parseArrayData(e,t,s,a){return tI(e,t,s,a)}parseObjectData(e,t,s,a){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,h=o.axis==="x"?l:c,f=[];let g,x,y,b;for(g=s,x=s+a;g<x;++g)b=t[g],y={},y[i.axis]=i.parse(pd(b,u),g),f.push($O(pd(b,h),y,o,g));return f}updateRangeFromParsed(e,t,s,a){super.updateRangeFromParsed(e,t,s,a);const i=s._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:a}=t,i=this.getParsed(e),o=i._custom,l=l1(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(i[a.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,a){const i=a==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:g}=this._getSharedOptions(t,a);for(let x=t;x<t+s;x++){const y=this.getParsed(x),b=i||Ms(y[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),v=this._calculateBarIndexPixels(x,h),N=(y._stacks||{})[l.axis],k={horizontal:u,base:b.base,enableBorderRadius:!N||l1(y._custom)||o===N._top||o===N._bottom,x:u?b.head:v.center,y:u?v.center:b.head,height:u?v.size:Math.abs(b.size),width:u?Math.abs(b.size):v.size};g&&(k.options=f||this.resolveDataElementOptions(x,e[x].active?"active":a));const A=k.options||e[x].options;Ane(k,A,N,o),Ene(k,A,h.ratio),this.updateElement(e[x],x,k,a)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(t),c=l&&l[s.axis],u=h=>{const f=h._parsed.find(x=>x[s.axis]===c),g=f&&f[h.vScale.axis];if(Ms(g)||isNaN(g))return!0};for(const h of a)if(!(t!==void 0&&u(h))&&((i===!1||o.indexOf(h.stack)===-1||i===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[ts(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,s){const a=this._getStacks(e,s),i=t!==void 0?a.indexOf(t):-1;return i===-1?a.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,a=[];let i,o;for(i=0,o=t.data.length;i<o;++i)a.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=e.barThickness;return{min:l||wne(t),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:a},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),u=c._custom,h=l1(u);let f=c[t.axis],g=0,x=s?this.applyStack(t,c,s):f,y,b;x!==f&&(g=x-f,x=f),h&&(f=u.barStart,x=u.barEnd-u.barStart,f!==0&&Hi(f)!==Hi(u.barEnd)&&(g=0),g+=f);const v=!Ms(i)&&!h?i:g;let N=t.getPixelForValue(v);if(this.chart.getDataVisibility(e)?y=t.getPixelForValue(g+x):y=N,b=y-N,Math.abs(b)<o){b=Sne(b,t,l)*o,f===l&&(N-=b/2);const k=t.getPixelForDecimal(0),A=t.getPixelForDecimal(1),R=Math.min(k,A),_=Math.max(k,A);N=Math.max(Math.min(N,_),R),y=N+b,s&&!h&&(c._stacks[t.axis]._visualValues[a]=t.getValueForPixel(y)-t.getValueForPixel(N))}if(N===t.getPixelForValue(l)){const k=Hi(b)*t.getLineWidthForValue(l)/2;N+=k,b-=k}return{size:b,base:N,head:y,center:y+b/2}}_calculateBarIndexPixels(e,t){const s=t.scale,a=this.options,i=a.skipNull,o=ts(a.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(t.grouped){const h=i?this._getStackCount(e):t.stackCount,f=a.barThickness==="flex"?jne(e,t,a,h*u):Nne(e,t,a,h*u),g=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(ts(g,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+x;l=f.start+f.chunk*y+f.chunk/2,c=Math.min(o,f.chunk*f.ratio)}else l=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(o,t.min*t.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,a=s.length;let i=0;for(;i<a;++i)this.getParsed(i)[t.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function Pne(r,e,t){let s=1,a=1,i=0,o=0;if(e<yr){const l=r,c=l+e,u=Math.cos(l),h=Math.sin(l),f=Math.cos(c),g=Math.sin(c),x=(A,R,_)=>Jf(A,l,c,!0)?1:Math.max(R,R*t,_,_*t),y=(A,R,_)=>Jf(A,l,c,!0)?-1:Math.min(R,R*t,_,_*t),b=x(0,u,f),v=x(Xr,h,g),N=y(tr,u,f),k=y(tr+Xr,h,g);s=(b-N)/2,a=(v-k)/2,i=-(b+N)/2,o=-(v+k)/2}return{ratioX:s,ratioY:a,offsetX:i,offsetY:o}}class Rne extends ay{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:a}}=e.legend.options;return t.labels.map((i,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:a,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let i=c=>+s[c];if(Ns(s[e])){const{key:c="value"}=this._parsing;i=u=>+pd(s[u],c)}let o,l;for(o=e,l=e+t;o<l;++o)a._parsed[o]=i(o)}}_getRotation(){return jo(this.options.rotation-90)}_getCircumference(){return jo(this.options.circumference)}_getRotationExtents(){let e=yr,t=-yr;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,i=a._getRotation(),o=a._getCircumference();e=Math.min(e,i),t=Math.max(t,i+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,a=this._cachedMeta,i=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(Mre(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:g,ratioY:x,offsetX:y,offsetY:b}=Pne(f,h,c),v=(s.width-o)/g,N=(s.height-o)/x,k=Math.max(Math.min(v,N)/2,0),A=NO(this.options.radius,k),R=Math.max(A*c,0),_=(A-R)/this._getVisibleDatasetWeightTotal();this.offsetX=y*A,this.offsetY=b*A,a.total=this.calculateTotal(),this.outerRadius=A-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const s=this.options,a=this._cachedMeta,i=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*i/yr)}updateElements(e,t,s,a){const i=a==="reset",o=this.chart,l=o.chartArea,u=o.options.animation,h=(l.left+l.right)/2,f=(l.top+l.bottom)/2,g=i&&u.animateScale,x=g?0:this.innerRadius,y=g?0:this.outerRadius,{sharedOptions:b,includeOptions:v}=this._getSharedOptions(t,a);let N=this._getRotation(),k;for(k=0;k<t;++k)N+=this._circumference(k,i);for(k=t;k<t+s;++k){const A=this._circumference(k,i),R=e[k],_={x:h+this.offsetX,y:f+this.offsetY,startAngle:N,endAngle:N+A,circumference:A,outerRadius:y,innerRadius:x};v&&(_.options=b||this.resolveDataElementOptions(k,R.active?"active":a)),N+=A,this.updateElement(R,k,_,a)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s=0,a;for(a=0;a<t.length;a++){const i=e._parsed[a];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(a)&&!t[a].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?yr*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,a=s.data.labels||[],i=_2(t._parsed[e],s.options.locale);return{label:a[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const s=this.chart;let a,i,o,l,c;if(!e){for(a=0,i=s.data.datasets.length;a<i;++a)if(s.isDatasetVisible(a)){o=s.getDatasetMeta(a),e=o.data,l=o.controller;break}}if(!e)return 0;for(a=0,i=e.length;a<i;++a)c=l.resolveDataElementOptions(a),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,a=e.length;s<a;++s){const i=this.resolveDataElementOptions(s);t=Math.max(t,i.offset||0,i.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(ts(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Ine extends ay{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:a=[],_dataset:i}=t,o=this.chart._animationsDisabled;let{start:l,count:c}=tae(t,a,o);this._drawStart=l,this._drawCount=c,sae(t)&&(l=0,c=a.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=a;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:u},e),this.updateElements(a,l,c,e)}updateElements(e,t,s,a){const i=a==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(t,a),g=o.axis,x=l.axis,{spanGaps:y,segment:b}=this.options,v=Zf(y)?y:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||i||a==="none",k=t+s,A=e.length;let R=t>0&&this.getParsed(t-1);for(let _=0;_<A;++_){const I=e[_],P=N?I:{};if(_<t||_>=k){P.skip=!0;continue}const T=this.getParsed(_),D=Ms(T[x]),L=P[g]=o.getPixelForValue(T[g],_),F=P[x]=i||D?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,T,c):T[x],_);P.skip=isNaN(L)||isNaN(F)||D,P.stop=_>0&&Math.abs(T[g]-R[g])>v,b&&(P.parsed=T,P.raw=u.data[_]),f&&(P.options=h||this.resolveDataElementOptions(_,I.active?"active":a)),N||this.updateElement(I,_,P,a),R=T}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,a=e.data||[];if(!a.length)return s;const i=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(s,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Ec(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class M2{static override(e){Object.assign(M2.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ec()}parse(){return Ec()}format(){return Ec()}add(){return Ec()}diff(){return Ec()}startOf(){return Ec()}endOf(){return Ec()}}var Dne={_date:M2};function Mne(r,e,t,s){const{controller:a,data:i,_sorted:o}=r,l=a._cachedMeta.iScale,c=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const u=l._reversePixels?Kre:qc;if(s){if(a._sharedOptions){const h=i[0],f=typeof h.getRange=="function"&&h.getRange(e);if(f){const g=u(i,e,t-f),x=u(i,e,t+f);return{lo:g.lo,hi:x.hi}}}}else{const h=u(i,e,t);if(c){const{vScale:f}=a._cachedMeta,{_parsed:g}=r,x=g.slice(0,h.lo+1).reverse().findIndex(b=>!Ms(b[f.axis]));h.lo-=Math.max(0,x);const y=g.slice(h.hi).findIndex(b=>!Ms(b[f.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:i.length-1}}function ny(r,e,t,s,a){const i=r.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,c=i.length;l<c;++l){const{index:u,data:h}=i[l],{lo:f,hi:g}=Mne(i[l],e,o,a);for(let x=f;x<=g;++x){const y=h[x];y.skip||s(y,u,x)}}}function One(r){const e=r.indexOf("x")!==-1,t=r.indexOf("y")!==-1;return function(s,a){const i=e?Math.abs(s.x-a.x):0,o=t?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function c1(r,e,t,s,a){const i=[];return!a&&!r.isPointInArea(e)||ny(r,t,e,function(l,c,u){!a&&!eg(l,r.chartArea,0)||l.inRange(e.x,e.y,s)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function Lne(r,e,t,s){let a=[];function i(o,l,c){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:f}=SO(o,{x:e.x,y:e.y});Jf(f,u,h)&&a.push({element:o,datasetIndex:l,index:c})}return ny(r,t,e,i),a}function Fne(r,e,t,s,a,i){let o=[];const l=One(t);let c=Number.POSITIVE_INFINITY;function u(h,f,g){const x=h.inRange(e.x,e.y,a);if(s&&!x)return;const y=h.getCenterPoint(a);if(!(!!i||r.isPointInArea(y))&&!x)return;const v=l(e,y);v<c?(o=[{element:h,datasetIndex:f,index:g}],c=v):v===c&&o.push({element:h,datasetIndex:f,index:g})}return ny(r,t,e,u),o}function d1(r,e,t,s,a,i){return!i&&!r.isPointInArea(e)?[]:t==="r"&&!s?Lne(r,e,t,a):Fne(r,e,t,s,a,i)}function aI(r,e,t,s,a){const i=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return ny(r,t,e,(c,u,h)=>{c[o]&&c[o](e[t],a)&&(i.push({element:c,datasetIndex:u,index:h}),l=l||c.inRange(e.x,e.y,a))}),s&&!l?[]:i}var Une={modes:{index(r,e,t,s){const a=Mc(e,r),i=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?c1(r,a,i,s,o):d1(r,a,i,!1,s,o),c=[];return l.length?(r.getSortedVisibleDatasetMetas().forEach(u=>{const h=l[0].index,f=u.data[h];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:h})}),c):[]},dataset(r,e,t,s){const a=Mc(e,r),i=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?c1(r,a,i,s,o):d1(r,a,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,u=r.getDatasetMeta(c).data;l=[];for(let h=0;h<u.length;++h)l.push({element:u[h],datasetIndex:c,index:h})}return l},point(r,e,t,s){const a=Mc(e,r),i=t.axis||"xy",o=t.includeInvisible||!1;return c1(r,a,i,s,o)},nearest(r,e,t,s){const a=Mc(e,r),i=t.axis||"xy",o=t.includeInvisible||!1;return d1(r,a,i,t.intersect,s,o)},x(r,e,t,s){const a=Mc(e,r);return aI(r,a,"x",t.intersect,s)},y(r,e,t,s){const a=Mc(e,r);return aI(r,a,"y",t.intersect,s)}}};const WO=["left","top","right","bottom"];function Um(r,e){return r.filter(t=>t.pos===e)}function nI(r,e){return r.filter(t=>WO.indexOf(t.pos)===-1&&t.box.axis===e)}function zm(r,e){return r.sort((t,s)=>{const a=e?s:t,i=e?t:s;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function zne(r){const e=[];let t,s,a,i,o,l;for(t=0,s=(r||[]).length;t<s;++t)a=r[t],{position:i,options:{stack:o,stackWeight:l=1}}=a,e.push({index:t,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&i+o,stackWeight:l});return e}function Vne(r){const e={};for(const t of r){const{stack:s,pos:a,stackWeight:i}=t;if(!s||!WO.includes(a))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function Bne(r,e){const t=Vne(r),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let i,o,l;for(i=0,o=r.length;i<o;++i){l=r[i];const{fullSize:c}=l.box,u=t[l.stack],h=u&&l.stackWeight/u.weight;l.horizontal?(l.width=h?h*s:c&&e.availableWidth,l.height=a):(l.width=s,l.height=h?h*a:c&&e.availableHeight)}return t}function Hne(r){const e=zne(r),t=zm(e.filter(u=>u.box.fullSize),!0),s=zm(Um(e,"left"),!0),a=zm(Um(e,"right")),i=zm(Um(e,"top"),!0),o=zm(Um(e,"bottom")),l=nI(e,"x"),c=nI(e,"y");return{fullSize:t,leftAndTop:s.concat(i),rightAndBottom:a.concat(c).concat(o).concat(l),chartArea:Um(e,"chartArea"),vertical:s.concat(a).concat(c),horizontal:i.concat(o).concat(l)}}function iI(r,e,t,s){return Math.max(r[t],e[t])+Math.max(r[s],e[s])}function YO(r,e){r.top=Math.max(r.top,e.top),r.left=Math.max(r.left,e.left),r.bottom=Math.max(r.bottom,e.bottom),r.right=Math.max(r.right,e.right)}function $ne(r,e,t,s){const{pos:a,box:i}=t,o=r.maxPadding;if(!Ns(a)){t.size&&(r[a]-=t.size);const f=s[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?i.height:i.width),t.size=f.size/f.count,r[a]+=t.size}i.getPadding&&YO(o,i.getPadding());const l=Math.max(0,e.outerWidth-iI(o,r,"left","right")),c=Math.max(0,e.outerHeight-iI(o,r,"top","bottom")),u=l!==r.w,h=c!==r.h;return r.w=l,r.h=c,t.horizontal?{same:u,other:h}:{same:h,other:u}}function Wne(r){const e=r.maxPadding;function t(s){const a=Math.max(e[s]-r[s],0);return r[s]+=a,a}r.y+=t("top"),r.x+=t("left"),t("right"),t("bottom")}function Yne(r,e){const t=e.maxPadding;function s(a){const i={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{i[o]=Math.max(e[o],t[o])}),i}return s(r?["left","right"]:["top","bottom"])}function ef(r,e,t,s){const a=[];let i,o,l,c,u,h;for(i=0,o=r.length,u=0;i<o;++i){l=r[i],c=l.box,c.update(l.width||e.w,l.height||e.h,Yne(l.horizontal,e));const{same:f,other:g}=$ne(e,t,l,s);u|=f&&a.length,h=h||g,c.fullSize||a.push(l)}return u&&ef(a,e,t,s)||h}function Rx(r,e,t,s,a){r.top=t,r.left=e,r.right=e+s,r.bottom=t+a,r.width=s,r.height=a}function oI(r,e,t,s){const a=t.padding;let{x:i,y:o}=e;for(const l of r){const c=l.box,u=s[l.stack]||{placed:0,weight:1},h=l.stackWeight/u.weight||1;if(l.horizontal){const f=e.w*h,g=u.size||c.height;Qf(u.start)&&(o=u.start),c.fullSize?Rx(c,a.left,o,t.outerWidth-a.right-a.left,g):Rx(c,e.left+u.placed,o,f,g),u.start=o,u.placed+=f,o=c.bottom}else{const f=e.h*h,g=u.size||c.width;Qf(u.start)&&(i=u.start),c.fullSize?Rx(c,i,a.top,g,t.outerHeight-a.bottom-a.top):Rx(c,i,e.top+u.placed,g,f),u.start=i,u.placed+=f,i=c.right}}e.x=i,e.y=o}var Nl={addBox(r,e){r.boxes||(r.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},r.boxes.push(e)},removeBox(r,e){const t=r.boxes?r.boxes.indexOf(e):-1;t!==-1&&r.boxes.splice(t,1)},configure(r,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(r,e,t,s){if(!r)return;const a=oi(r.options.layout.padding),i=Math.max(e-a.width,0),o=Math.max(t-a.height,0),l=Hne(r.boxes),c=l.vertical,u=l.horizontal;$s(r.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=c.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),g=Object.assign({},a);YO(g,oi(s));const x=Object.assign({maxPadding:g,w:i,h:o,x:a.left,y:a.top},a),y=Bne(c.concat(u),f);ef(l.fullSize,x,f,y),ef(c,x,f,y),ef(u,x,f,y)&&ef(c,x,f,y),Wne(x),oI(l.leftAndTop,x,f,y),x.x+=x.w,x.y+=x.h,oI(l.rightAndBottom,x,f,y),r.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},$s(l.chartArea,b=>{const v=b.box;Object.assign(v,r.chartArea),v.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class qO{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,a){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,a?Math.floor(t/a):s)}}isAttached(e){return!0}updateConfig(e){}}class qne extends qO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const h0="$chartjs",Xne={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lI=r=>r===null||r==="";function Gne(r,e){const t=r.style,s=r.getAttribute("height"),a=r.getAttribute("width");if(r[h0]={initial:{height:s,width:a,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",lI(a)){const i=WR(r,"width");i!==void 0&&(r.width=i)}if(lI(s))if(r.style.height==="")r.height=r.width/(e||2);else{const i=WR(r,"height");i!==void 0&&(r.height=i)}return r}const XO=Wae?{passive:!0}:!1;function Kne(r,e,t){r&&r.addEventListener(e,t,XO)}function Qne(r,e,t){r&&r.canvas&&r.canvas.removeEventListener(e,t,XO)}function Zne(r,e){const t=Xne[r.type]||r.type,{x:s,y:a}=Mc(r,e);return{type:t,chart:e,native:r,x:s!==void 0?s:null,y:a!==void 0?a:null}}function rb(r,e){for(const t of r)if(t===e||t.contains(e))return!0}function Jne(r,e,t){const s=r.canvas,a=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||rb(l.addedNodes,s),o=o&&!rb(l.removedNodes,s);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}function eie(r,e,t){const s=r.canvas,a=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||rb(l.removedNodes,s),o=o&&!rb(l.addedNodes,s);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}const tg=new Map;let cI=0;function GO(){const r=window.devicePixelRatio;r!==cI&&(cI=r,tg.forEach((e,t)=>{t.currentDevicePixelRatio!==r&&e()}))}function tie(r,e){tg.size||window.addEventListener("resize",GO),tg.set(r,e)}function sie(r){tg.delete(r),tg.size||window.removeEventListener("resize",GO)}function rie(r,e,t){const s=r.canvas,a=s&&D2(s);if(!a)return;const i=EO((l,c)=>{const u=a.clientWidth;t(l,c),u<a.clientWidth&&t()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,h=c.contentRect.height;u===0&&h===0||i(u,h)});return o.observe(a),tie(r,i),o}function u1(r,e,t){t&&t.disconnect(),e==="resize"&&sie(r)}function aie(r,e,t){const s=r.canvas,a=EO(i=>{r.ctx!==null&&t(Zne(i,r))},r);return Kne(s,e,a),a}class nie extends qO{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(Gne(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[h0])return!1;const s=t[h0].initial;["height","width"].forEach(i=>{const o=s[i];Ms(o)?t.removeAttribute(i):t.setAttribute(i,o)});const a=s.style||{};return Object.keys(a).forEach(i=>{t.style[i]=a[i]}),t.width=t.width,delete t[h0],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const a=e.$proxies||(e.$proxies={}),o={attach:Jne,detach:eie,resize:rie}[t]||aie;a[t]=o(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),a=s[t];if(!a)return;({attach:u1,detach:u1,resize:u1}[t]||Qne)(e,t,a),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,a){return $ae(e,t,s,a)}isAttached(e){const t=e&&D2(e);return!!(t&&t.isConnected)}}function iie(r){return!I2()||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas?qne:nie}let Jl=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return Zf(this.x)&&Zf(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const a={};return e.forEach(i=>{a[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),a}};function oie(r,e){const t=r.options.ticks,s=lie(r),a=Math.min(t.maxTicksLimit||s,s),i=t.major.enabled?die(e):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>a)return uie(e,u,i,o/a),u;const h=cie(i,e,a);if(o>0){let f,g;const x=o>1?Math.round((c-l)/(o-1)):null;for(Ix(e,u,h,Ms(x)?0:l-x,l),f=0,g=o-1;f<g;f++)Ix(e,u,h,i[f],i[f+1]);return Ix(e,u,h,c,Ms(x)?e.length:c+x),u}return Ix(e,u,h),u}function lie(r){const e=r.options.offset,t=r._tickSize(),s=r._length/t+(e?0:1),a=r._maxLength/t;return Math.floor(Math.min(s,a))}function cie(r,e,t){const s=hie(r),a=e.length/t;if(!s)return Math.max(a,1);const i=Hre(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>a)return c}return Math.max(a,1)}function die(r){const e=[];let t,s;for(t=0,s=r.length;t<s;t++)r[t].major&&e.push(t);return e}function uie(r,e,t,s){let a=0,i=t[0],o;for(s=Math.ceil(s),o=0;o<r.length;o++)o===i&&(e.push(r[o]),a++,i=t[a*s])}function Ix(r,e,t,s,a){const i=ts(s,0),o=Math.min(ts(a,r.length),r.length);let l=0,c,u,h;for(t=Math.ceil(t),a&&(c=a-s,t=c/Math.floor(c/t)),h=i;h<0;)l++,h=Math.round(i+l*t);for(u=Math.max(i,0);u<o;u++)u===h&&(e.push(r[u]),l++,h=Math.round(i+l*t))}function hie(r){const e=r.length;let t,s;if(e<2)return!1;for(s=r[0],t=1;t<e;++t)if(r[t]-r[t-1]!==s)return!1;return s}const mie=r=>r==="left"?"right":r==="right"?"left":r,dI=(r,e,t)=>e==="top"||e==="left"?r[e]+t:r[e]-t,uI=(r,e)=>Math.min(e||r,r);function hI(r,e){const t=[],s=r.length/e,a=r.length;let i=0;for(;i<a;i+=s)t.push(r[Math.floor(i)]);return t}function fie(r,e,t){const s=r.ticks.length,a=Math.min(e,s-1),i=r._startPixel,o=r._endPixel,l=1e-6;let c=r.getPixelForTick(a),u;if(!(t&&(s===1?u=Math.max(c-i,o-c):e===0?u=(r.getPixelForTick(1)-c)/2:u=(c-r.getPixelForTick(a-1))/2,c+=a<e?u:-u,c<i-l||c>o+l)))return c}function gie(r,e){$s(r,t=>{const s=t.gc,a=s.length/2;let i;if(a>e){for(i=0;i<a;++i)delete t.data[s[i]];s.splice(0,a)}})}function Vm(r){return r.drawTicks?r.tickLength:0}function mI(r,e){if(!r.display)return 0;const t=Qa(r.font,e),s=oi(r.padding);return(ia(r.text)?r.text.length:1)*t.lineHeight+s.height}function pie(r,e){return Ad(r,{scale:e,type:"scale"})}function xie(r,e,t){return Ad(r,{tick:t,index:e,type:"tick"})}function bie(r,e,t){let s=TO(r);return(t&&e!=="right"||!t&&e==="right")&&(s=mie(s)),s}function yie(r,e,t,s){const{top:a,left:i,bottom:o,right:l,chart:c}=r,{chartArea:u,scales:h}=c;let f=0,g,x,y;const b=o-a,v=l-i;if(r.isHorizontal()){if(x=fn(s,i,l),Ns(t)){const N=Object.keys(t)[0],k=t[N];y=h[N].getPixelForValue(k)+b-e}else t==="center"?y=(u.bottom+u.top)/2+b-e:y=dI(r,t,e);g=l-i}else{if(Ns(t)){const N=Object.keys(t)[0],k=t[N];x=h[N].getPixelForValue(k)-v+e}else t==="center"?x=(u.left+u.right)/2-v+e:x=dI(r,t,e);y=fn(s,o,a),f=t==="left"?-Xr:Xr}return{titleX:x,titleY:y,maxWidth:g,rotation:f}}class Sh extends Jl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:a}=this;return e=ji(e,Number.POSITIVE_INFINITY),t=ji(t,Number.NEGATIVE_INFINITY),s=ji(s,Number.POSITIVE_INFINITY),a=ji(a,Number.NEGATIVE_INFINITY),{min:ji(e,s),max:ji(t,a),minDefined:Bn(e),maxDefined:Bn(t)}}getMinMax(e){let{min:t,max:s,minDefined:a,maxDefined:i}=this.getUserBounds(),o;if(a&&i)return{min:t,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),a||(t=Math.min(t,o.min)),i||(s=Math.max(s,o.max));return t=i&&t>s?s:t,s=a&&t>s?t:s,{min:ji(t,ji(s,t)),max:ji(s,ji(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ir(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:a,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Nae(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?hI(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=oie(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ir(this.options.afterUpdate,[this])}beforeSetDimensions(){ir(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ir(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ir(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ir(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,a,i;for(s=0,a=e.length;s<a;s++)i=e[s],i.label=ir(t.callback,[i.value,s,e],this)}afterTickToLabelConversion(){ir(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ir(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=uI(this.ticks.length,e.ticks.maxTicksLimit),a=t.minRotation||0,i=t.maxRotation;let o=a,l,c,u;if(!this._isVisible()||!t.display||a>=i||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const h=this._getLabelSizes(),f=h.widest.width,g=h.highest.height,x=Sa(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/s:x/(s-1),f+6>l&&(l=x/(s-(e.offset?.5:1)),c=this.maxHeight-Vm(e.grid)-t.padding-mI(e.title,this.chart.options.font),u=Math.sqrt(f*f+g*g),o=qre(Math.min(Math.asin(Sa((h.highest.height+6)/l,-1,1)),Math.asin(Sa(c/u,-1,1))-Math.asin(Sa(g/u,-1,1)))),o=Math.max(a,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ir(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ir(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:a,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=mI(a,t.options.font);if(l?(e.width=this.maxWidth,e.height=Vm(i)+c):(e.height=this.maxHeight,e.width=Vm(i)+c),s.display&&this.ticks.length){const{first:u,last:h,widest:f,highest:g}=this._getLabelSizes(),x=s.padding*2,y=jo(this.labelRotation),b=Math.cos(y),v=Math.sin(y);if(l){const N=s.mirror?0:v*f.width+b*g.height;e.height=Math.min(this.maxHeight,e.height+N+x)}else{const N=s.mirror?0:b*f.width+v*g.height;e.width=Math.min(this.maxWidth,e.width+N+x)}this._calculatePadding(u,h,v,b)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,a){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,x=0;c?u?(g=a*e.width,x=s*t.height):(g=s*e.height,x=a*t.width):i==="start"?x=t.width:i==="end"?g=e.width:i!=="inner"&&(g=e.width/2,x=t.width/2),this.paddingLeft=Math.max((g-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((x-f+o)*this.width/(this.width-f),0)}else{let h=t.height/2,f=e.height/2;i==="start"?(h=0,f=e.height):i==="end"&&(h=t.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ir(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)Ms(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=hI(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:a,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(t/uI(t,s));let u=0,h=0,f,g,x,y,b,v,N,k,A,R,_;for(f=0;f<t;f+=c){if(y=e[f].label,b=this._resolveTickFontOptions(f),a.font=v=b.string,N=i[v]=i[v]||{data:{},gc:[]},k=b.lineHeight,A=R=0,!Ms(y)&&!ia(y))A=zR(a,N.data,N.gc,A,y),R=k;else if(ia(y))for(g=0,x=y.length;g<x;++g)_=y[g],!Ms(_)&&!ia(_)&&(A=zR(a,N.data,N.gc,A,_),R+=k);o.push(A),l.push(R),u=Math.max(A,u),h=Math.max(R,h)}gie(i,t);const I=o.indexOf(u),P=l.indexOf(h),T=D=>({width:o[D]||0,height:l[D]||0});return{first:T(0),last:T(t-1),widest:T(I),highest:T(P),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Gre(this._alignToPixels?Cc(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=xie(this.getContext(),e,s))}return this.$context||(this.$context=pie(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=jo(this.labelRotation),s=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*a?l/s:c/a:c*a<l*s?c/s:l/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,a=this.options,{grid:i,position:o,border:l}=a,c=i.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),g=Vm(i),x=[],y=l.setContext(this.getContext()),b=y.display?y.width:0,v=b/2,N=function(H){return Cc(s,H,b)};let k,A,R,_,I,P,T,D,L,F,z,O;if(o==="top")k=N(this.bottom),P=this.bottom-g,D=k-v,F=N(e.top)+v,O=e.bottom;else if(o==="bottom")k=N(this.top),F=e.top,O=N(e.bottom)-v,P=k+v,D=this.top+g;else if(o==="left")k=N(this.right),I=this.right-g,T=k-v,L=N(e.left)+v,z=e.right;else if(o==="right")k=N(this.left),L=e.left,z=N(e.right)-v,I=k+v,T=this.left+g;else if(t==="x"){if(o==="center")k=N((e.top+e.bottom)/2+.5);else if(Ns(o)){const H=Object.keys(o)[0],$=o[H];k=N(this.chart.scales[H].getPixelForValue($))}F=e.top,O=e.bottom,P=k+v,D=P+g}else if(t==="y"){if(o==="center")k=N((e.left+e.right)/2);else if(Ns(o)){const H=Object.keys(o)[0],$=o[H];k=N(this.chart.scales[H].getPixelForValue($))}I=k-v,T=I-g,L=e.left,z=e.right}const V=ts(a.ticks.maxTicksLimit,f),Y=Math.max(1,Math.ceil(f/V));for(A=0;A<f;A+=Y){const H=this.getContext(A),$=i.setContext(H),X=l.setContext(H),G=$.lineWidth,B=$.color,Q=X.dash||[],ee=X.dashOffset,se=$.tickWidth,le=$.tickColor,Ee=$.tickBorderDash||[],ue=$.tickBorderDashOffset;R=fie(this,A,c),R!==void 0&&(_=Cc(s,R,G),u?I=T=L=z=_:P=D=F=O=_,x.push({tx1:I,ty1:P,tx2:T,ty2:D,x1:L,y1:F,x2:z,y2:O,width:G,color:B,borderDash:Q,borderDashOffset:ee,tickWidth:se,tickColor:le,tickBorderDash:Ee,tickBorderDashOffset:ue}))}return this._ticksLength=f,this._borderValue=k,x}_computeLabelItems(e){const t=this.axis,s=this.options,{position:a,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:h,mirror:f}=i,g=Vm(s.grid),x=g+h,y=f?-h:x,b=-jo(this.labelRotation),v=[];let N,k,A,R,_,I,P,T,D,L,F,z,O="middle";if(a==="top")I=this.bottom-y,P=this._getXAxisLabelAlignment();else if(a==="bottom")I=this.top+y,P=this._getXAxisLabelAlignment();else if(a==="left"){const Y=this._getYAxisLabelAlignment(g);P=Y.textAlign,_=Y.x}else if(a==="right"){const Y=this._getYAxisLabelAlignment(g);P=Y.textAlign,_=Y.x}else if(t==="x"){if(a==="center")I=(e.top+e.bottom)/2+x;else if(Ns(a)){const Y=Object.keys(a)[0],H=a[Y];I=this.chart.scales[Y].getPixelForValue(H)+x}P=this._getXAxisLabelAlignment()}else if(t==="y"){if(a==="center")_=(e.left+e.right)/2-x;else if(Ns(a)){const Y=Object.keys(a)[0],H=a[Y];_=this.chart.scales[Y].getPixelForValue(H)}P=this._getYAxisLabelAlignment(g).textAlign}t==="y"&&(c==="start"?O="top":c==="end"&&(O="bottom"));const V=this._getLabelSizes();for(N=0,k=l.length;N<k;++N){A=l[N],R=A.label;const Y=i.setContext(this.getContext(N));T=this.getPixelForTick(N)+i.labelOffset,D=this._resolveTickFontOptions(N),L=D.lineHeight,F=ia(R)?R.length:1;const H=F/2,$=Y.color,X=Y.textStrokeColor,G=Y.textStrokeWidth;let B=P;o?(_=T,P==="inner"&&(N===k-1?B=this.options.reverse?"left":"right":N===0?B=this.options.reverse?"right":"left":B="center"),a==="top"?u==="near"||b!==0?z=-F*L+L/2:u==="center"?z=-V.highest.height/2-H*L+L:z=-V.highest.height+L/2:u==="near"||b!==0?z=L/2:u==="center"?z=V.highest.height/2-H*L:z=V.highest.height-F*L,f&&(z*=-1),b!==0&&!Y.showLabelBackdrop&&(_+=L/2*Math.sin(b))):(I=T,z=(1-F)*L/2);let Q;if(Y.showLabelBackdrop){const ee=oi(Y.backdropPadding),se=V.heights[N],le=V.widths[N];let Ee=z-ee.top,ue=0-ee.left;switch(O){case"middle":Ee-=se/2;break;case"bottom":Ee-=se;break}switch(P){case"center":ue-=le/2;break;case"right":ue-=le;break;case"inner":N===k-1?ue-=le:N>0&&(ue-=le/2);break}Q={left:ue,top:Ee,width:le+ee.width,height:se+ee.height,color:Y.backdropColor}}v.push({label:R,font:D,textOffset:z,options:{rotation:b,color:$,strokeColor:X,strokeWidth:G,textAlign:B,textBaseline:O,translation:[_,I],backdrop:Q}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-jo(this.labelRotation))return e==="top"?"left":"right";let a="center";return t.align==="start"?a="left":t.align==="end"?a="right":t.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:a,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let u,h;return t==="left"?a?(h=this.right+i,s==="near"?u="left":s==="center"?(u="center",h+=c/2):(u="right",h+=c)):(h=this.right-l,s==="near"?u="right":s==="center"?(u="center",h-=c/2):(u="left",h=this.left)):t==="right"?a?(h=this.left+i,s==="near"?u="right":s==="center"?(u="center",h-=c/2):(u="left",h-=c)):(h=this.left+l,s==="near"?u="left":s==="center"?(u="center",h+=c/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:a,width:i,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,a,i,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const a=this.ticks.findIndex(i=>i.value===e);return a>=0?t.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,u,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(t.display)for(i=0,o=a.length;i<o;++i){const c=a[i];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:a}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=a.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,h,f,g;this.isHorizontal()?(u=Cc(e,this.left,o)-o/2,h=Cc(e,this.right,l)+l/2,f=g=c):(f=Cc(e,this.top,o)-o/2,g=Cc(e,this.bottom,l)+l/2,u=h=c),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(u,f),t.lineTo(h,g),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&A2(s,a);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,u=o.label,h=o.textOffset;eb(s,u,0,h,c,l)}a&&C2(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:a}}=this;if(!s.display)return;const i=Qa(s.font),o=oi(s.padding),l=s.align;let c=i.lineHeight/2;t==="bottom"||t==="center"||Ns(t)?(c+=o.bottom,ia(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:u,titleY:h,maxWidth:f,rotation:g}=yie(this,c,t,l);eb(e,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:g,textAlign:bie(l,t,a),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=ts(e.grid&&e.grid.z,-1),a=ts(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Sh.prototype.draw?[{z:t,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:t,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let i,o;for(i=0,o=t.length;i<o;++i){const l=t[i];l[s]===this.id&&(!e||l.type===e)&&a.push(l)}return a}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Qa(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Dx{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;Nie(t)&&(s=this.register(t));const a=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in a||(a[i]=e,vie(e,o,s),this.override&&Cr.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,a=this.scope;s in t&&delete t[s],a&&s in Cr[a]&&(delete Cr[a][s],this.override&&delete xd[s])}}function vie(r,e,t){const s=Kf(Object.create(null),[t?Cr.get(t):{},Cr.get(e),r.defaults]);Cr.set(e,s),r.defaultRoutes&&wie(e,r.defaultRoutes),r.descriptors&&Cr.describe(e,r.descriptors)}function wie(r,e){Object.keys(e).forEach(t=>{const s=t.split("."),a=s.pop(),i=[r].concat(s).join("."),o=e[t].split("."),l=o.pop(),c=o.join(".");Cr.route(i,a,c,l)})}function Nie(r){return"id"in r&&"defaults"in r}class jie{constructor(){this.controllers=new Dx(ay,"datasets",!0),this.elements=new Dx(Jl,"elements"),this.plugins=new Dx(Object,"plugins"),this.scales=new Dx(Sh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(a=>{const i=s||this._getRegistryForType(a);s||i.isForType(a)||i===this.plugins&&a.id?this._exec(e,i,a):$s(a,o=>{const l=s||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,s){const a=j2(e);ir(s["before"+a],[],s),t[e](s),ir(s["after"+a],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const a=t.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}}var _i=new jie;class kie{constructor(){this._init=[]}notify(e,t,s,a){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(i,e,t,s);return t==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,s,a){a=a||{};for(const i of e){const o=i.plugin,l=o[s],c=[t,a,i.options];if(ir(l,c,o)===!1&&a.cancelable)return!1}return!0}invalidate(){Ms(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,a=ts(s.options&&s.options.plugins,{}),i=Sie(s);return a===!1&&!t?[]:Aie(e,i,a,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,a=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(a(t,s),e,"stop"),this._notify(a(s,t),e,"start")}}function Sie(r){const e={},t=[],s=Object.keys(_i.plugins.items);for(let i=0;i<s.length;i++)t.push(_i.getPlugin(s[i]));const a=r.plugins||[];for(let i=0;i<a.length;i++){const o=a[i];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function _ie(r,e){return!e&&r===!1?null:r===!0?{}:r}function Aie(r,{plugins:e,localIds:t},s,a){const i=[],o=r.getContext();for(const l of e){const c=l.id,u=_ie(s[c],a);u!==null&&i.push({plugin:l,options:Cie(r.config,{plugin:l,local:t[c]},u,o)})}return i}function Cie(r,{plugin:e,local:t},s,a){const i=r.pluginScopeKeys(e),o=r.getOptionScopes(s,i);return t&&e.defaults&&o.push(e.defaults),r.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function qN(r,e){const t=Cr.datasets[r]||{};return((e.datasets||{})[r]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Eie(r,e){let t=r;return r==="_index_"?t=e:r==="_value_"&&(t=e==="x"?"y":"x"),t}function Tie(r,e){return r===e?"_index_":"_value_"}function fI(r){if(r==="x"||r==="y"||r==="r")return r}function Pie(r){if(r==="top"||r==="bottom")return"x";if(r==="left"||r==="right")return"y"}function XN(r,...e){if(fI(r))return r;for(const t of e){const s=t.axis||Pie(t.position)||r.length>1&&fI(r[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${r}' axis. Please provide 'axis' or 'position' option.`)}function gI(r,e,t){if(t[e+"AxisID"]===r)return{axis:e}}function Rie(r,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===r||s.yAxisID===r);if(t.length)return gI(r,"x",t[0])||gI(r,"y",t[0])}return{}}function Iie(r,e){const t=xd[r.type]||{scales:{}},s=e.scales||{},a=qN(r.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!Ns(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=XN(o,l,Rie(o,r),Cr.scales[l.type]),u=Tie(c,a),h=t.scales||{};i[o]=wf(Object.create(null),[{axis:c},l,h[c],h[u]])}),r.data.datasets.forEach(o=>{const l=o.type||r.type,c=o.indexAxis||qN(l,e),h=(xd[l]||{}).scales||{};Object.keys(h).forEach(f=>{const g=Eie(f,c),x=o[g+"AxisID"]||g;i[x]=i[x]||Object.create(null),wf(i[x],[{axis:g},s[x],h[f]])})}),Object.keys(i).forEach(o=>{const l=i[o];wf(l,[Cr.scales[l.type],Cr.scale])}),i}function KO(r){const e=r.options||(r.options={});e.plugins=ts(e.plugins,{}),e.scales=Iie(r,e)}function QO(r){return r=r||{},r.datasets=r.datasets||[],r.labels=r.labels||[],r}function Die(r){return r=r||{},r.data=QO(r.data),KO(r),r}const pI=new Map,ZO=new Set;function Mx(r,e){let t=pI.get(r);return t||(t=e(),pI.set(r,t),ZO.add(t)),t}const Bm=(r,e,t)=>{const s=pd(e,t);s!==void 0&&r.add(s)};class Mie{constructor(e){this._config=Die(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=QO(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),KO(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Mx(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Mx(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Mx(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return Mx(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let a=s.get(e);return(!a||t)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,t,s){const{options:a,type:i}=this,o=this._cachedScopes(e,s),l=o.get(t);if(l)return l;const c=new Set;t.forEach(h=>{e&&(c.add(e),h.forEach(f=>Bm(c,e,f))),h.forEach(f=>Bm(c,a,f)),h.forEach(f=>Bm(c,xd[i]||{},f)),h.forEach(f=>Bm(c,Cr,f)),h.forEach(f=>Bm(c,WN,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),ZO.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,xd[t]||{},Cr.datasets[t]||{},{type:t},Cr,WN]}resolveNamedOptions(e,t,s,a=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=xI(this._resolverCache,e,a);let c=o;if(Lie(o,t)){i.$shared=!1,s=Hl(s)?s():s;const u=this.createResolver(e,s,l);c=sh(o,s,u)}for(const u of t)i[u]=c[u];return i}createResolver(e,t,s=[""],a){const{resolver:i}=xI(this._resolverCache,e,s);return Ns(t)?sh(i,t,void 0,a):i}}function xI(r,e,t){let s=r.get(e);s||(s=new Map,r.set(e,s));const a=t.join();let i=s.get(a);return i||(i={resolver:T2(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},s.set(a,i)),i}const Oie=r=>Ns(r)&&Object.getOwnPropertyNames(r).some(e=>Hl(r[e]));function Lie(r,e){const{isScriptable:t,isIndexable:s}=DO(r);for(const a of e){const i=t(a),o=s(a),l=(o||i)&&r[a];if(i&&(Hl(l)||Oie(l))||o&&ia(l))return!0}return!1}var Fie="4.5.0";const Uie=["top","bottom","left","right","chartArea"];function bI(r,e){return r==="top"||r==="bottom"||Uie.indexOf(r)===-1&&e==="x"}function yI(r,e){return function(t,s){return t[r]===s[r]?t[e]-s[e]:t[r]-s[r]}}function vI(r){const e=r.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ir(t&&t.onComplete,[r],e)}function zie(r){const e=r.chart,t=e.options.animation;ir(t&&t.onProgress,[r],e)}function JO(r){return I2()&&typeof r=="string"?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}const m0={},wI=r=>{const e=JO(r);return Object.values(m0).filter(t=>t.canvas===e).pop()};function Vie(r,e,t){const s=Object.keys(r);for(const a of s){const i=+a;if(i>=e){const o=r[a];delete r[a],(t>0||i>e)&&(r[i+t]=o)}}}function Bie(r,e,t,s){return!t||r.type==="mouseout"?null:s?e:r}let _h=class{static defaults=Cr;static instances=m0;static overrides=xd;static registry=_i;static version=Fie;static getChart=wI;static register(...e){_i.add(...e),NI()}static unregister(...e){_i.remove(...e),NI()}constructor(e,t){const s=this.config=new Mie(t),a=JO(e),i=wI(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||iie(a)),this.platform.updateConfig(s);const l=this.platform.acquireContext(a,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,h=c&&c.width;if(this.id=Dre(),this.ctx=l,this.canvas=c,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new kie,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Jre(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],m0[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}bo.listen(this,"complete",vI),bo.listen(this,"progress",zie),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:a,_aspectRatio:i}=this;return Ms(e)?t&&i?i:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return _i}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$R(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return VR(this.canvas,this.ctx),this}stop(){return bo.stop(this),this}resize(e,t){bo.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,a=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,t,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,$R(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ir(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};$s(t,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,a=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];t&&(i=i.concat(Object.keys(t).map(o=>{const l=t[o],c=XN(o,l),u=c==="r",h=c==="x";return{options:l,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),$s(i,o=>{const l=o.options,c=l.id,u=XN(c,l),h=ts(l.type,o.dtype);(l.position===void 0||bI(l.position,u)!==bI(o.dposition))&&(l.position=o.dposition),a[c]=!0;let f=null;if(c in s&&s[c].type===h)f=s[c];else{const g=_i.getScale(h);f=new g({id:c,type:h,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(l,e)}),$s(a,(o,l)=>{o||delete s[l]}),$s(s,o=>{Nl.configure(this,o,o.options),Nl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((a,i)=>a.index-i.index),s>t){for(let a=t;a<s;++a)this._destroyDatasetMeta(a);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(yI("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,a)=>{t.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=t.length;s<a;s++){const i=t[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||qN(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=_i.getController(l),{datasetElementType:u,dataElementType:h}=Cr.datasets[l];Object.assign(c,{dataElementType:_i.getElement(h),datasetElementType:u&&_i.getElement(u)}),o.controller=new c(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){$s(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:f}=this.getDatasetMeta(u),g=!a&&i.indexOf(f)===-1;f.buildOrUpdateElements(g),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),a||$s(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(yI("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){$s(this.scales,e=>{Nl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!PR(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:i}of t){const o=s==="_removeElements"?-i:i;Vie(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),a=s(0);for(let i=1;i<t;i++)if(!PR(a,s(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nl.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],$s(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,Hl(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(t),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(bo.has(this)?this.attached&&!bo.running(this)&&bo.start(this):(this.draw(),vI({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let a,i;for(a=0,i=t.length;a<i;++a){const o=t[a];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=nne(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&A2(t,a),e.controller.draw(),a&&C2(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return eg(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,a){const i=Une.modes[t];return typeof i=="function"?i(this,e,s,a):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let a=s.filter(i=>i&&i._dataset===t).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=Ad(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const a=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,a);Qf(t)?(i.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===e?a:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),bo.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),VR(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete m0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(i,o)=>{t.addEventListener(this,i,o),e[i]=o},a=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};$s(this.options.events,i=>s(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(c,u)=>{t.addEventListener(this,c,u),e[c]=u},a=(c,u)=>{e[c]&&(t.removeEventListener(this,c,u),delete e[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{a("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),s("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){$s(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},$s(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const a=s?"set":"remove";let i,o,l,c;for(t==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Q0(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const a=this.options.hover,i=(c,u)=>c.filter(h=>!u.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=i(t,e),l=s?e:i(e,t);o.length&&this.updateHoverStyle(o,a.mode,!1),l.length&&a.mode&&this.updateHoverStyle(l,a.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const i=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(i||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:a=[],options:i}=this,o=t,l=this._getActiveElements(e,a,s,o),c=zre(e),u=Bie(e,this._lastEvent,s,c);s&&(this._lastEvent=null,ir(i.onHover,[e,l,this],this),c&&ir(i.onClick,[e,l,this],this));const h=!Q0(l,a);return(h||t)&&(this._active=l,this._updateHoverStyles(l,a,t)),this._lastEvent=u,h}_getActiveElements(e,t,s,a){if(e.type==="mouseout")return[];if(!s)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,a)}};function NI(){return $s(_h.instances,r=>r._plugins.invalidate())}function Hie(r,e,t){const{startAngle:s,x:a,y:i,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:u,borderJoinStyle:h}=c,f=Math.min(u/o,Kn(s-t));if(r.beginPath(),r.arc(a,i,o-u/2,s+f/2,t-f/2),l>0){const g=Math.min(u/l,Kn(s-t));r.arc(a,i,l+u/2,t-g/2,s+g/2,!0)}else{const g=Math.min(u/2,o*Kn(s-t));if(h==="round")r.arc(a,i,g,t-tr/2,s+tr/2,!0);else if(h==="bevel"){const x=2*g*g,y=-x*Math.cos(t+tr/2)+a,b=-x*Math.sin(t+tr/2)+i,v=x*Math.cos(s+tr/2)+a,N=x*Math.sin(s+tr/2)+i;r.lineTo(y,b),r.lineTo(v,N)}}r.closePath(),r.moveTo(0,0),r.rect(0,0,r.canvas.width,r.canvas.height),r.clip("evenodd")}function $ie(r,e,t){const{startAngle:s,pixelMargin:a,x:i,y:o,outerRadius:l,innerRadius:c}=e;let u=a/l;r.beginPath(),r.arc(i,o,l,s-u,t+u),c>a?(u=a/c,r.arc(i,o,c,t+u,s-u,!0)):r.arc(i,o,a,t+Xr,s-Xr),r.closePath(),r.clip()}function Wie(r){return E2(r,["outerStart","outerEnd","innerStart","innerEnd"])}function Yie(r,e,t,s){const a=Wie(r.options.borderRadius),i=(t-e)/2,o=Math.min(i,s*e/2),l=c=>{const u=(t-Math.min(i,c))*s/2;return Sa(c,0,Math.min(i,u))};return{outerStart:l(a.outerStart),outerEnd:l(a.outerEnd),innerStart:Sa(a.innerStart,0,o),innerEnd:Sa(a.innerEnd,0,o)}}function xu(r,e,t,s){return{x:t+r*Math.cos(e),y:s+r*Math.sin(e)}}function ab(r,e,t,s,a,i){const{x:o,y:l,startAngle:c,pixelMargin:u,innerRadius:h}=e,f=Math.max(e.outerRadius+s+t-u,0),g=h>0?h+s+t+u:0;let x=0;const y=a-c;if(s){const Y=h>0?h-s:0,H=f>0?f-s:0,$=(Y+H)/2,X=$!==0?y*$/($+s):y;x=(y-X)/2}const b=Math.max(.001,y*f-t/tr)/f,v=(y-b)/2,N=c+v+x,k=a-v-x,{outerStart:A,outerEnd:R,innerStart:_,innerEnd:I}=Yie(e,g,f,k-N),P=f-A,T=f-R,D=N+A/P,L=k-R/T,F=g+_,z=g+I,O=N+_/F,V=k-I/z;if(r.beginPath(),i){const Y=(D+L)/2;if(r.arc(o,l,f,D,Y),r.arc(o,l,f,Y,L),R>0){const G=xu(T,L,o,l);r.arc(G.x,G.y,R,L,k+Xr)}const H=xu(z,k,o,l);if(r.lineTo(H.x,H.y),I>0){const G=xu(z,V,o,l);r.arc(G.x,G.y,I,k+Xr,V+Math.PI)}const $=(k-I/g+(N+_/g))/2;if(r.arc(o,l,g,k-I/g,$,!0),r.arc(o,l,g,$,N+_/g,!0),_>0){const G=xu(F,O,o,l);r.arc(G.x,G.y,_,O+Math.PI,N-Xr)}const X=xu(P,N,o,l);if(r.lineTo(X.x,X.y),A>0){const G=xu(P,D,o,l);r.arc(G.x,G.y,A,N-Xr,D)}}else{r.moveTo(o,l);const Y=Math.cos(D)*f+o,H=Math.sin(D)*f+l;r.lineTo(Y,H);const $=Math.cos(L)*f+o,X=Math.sin(L)*f+l;r.lineTo($,X)}r.closePath()}function qie(r,e,t,s,a){const{fullCircles:i,startAngle:o,circumference:l}=e;let c=e.endAngle;if(i){ab(r,e,t,s,c,a);for(let u=0;u<i;++u)r.fill();isNaN(l)||(c=o+(l%yr||yr))}return ab(r,e,t,s,c,a),r.fill(),c}function Xie(r,e,t,s,a){const{fullCircles:i,startAngle:o,circumference:l,options:c}=e,{borderWidth:u,borderJoinStyle:h,borderDash:f,borderDashOffset:g,borderRadius:x}=c,y=c.borderAlign==="inner";if(!u)return;r.setLineDash(f||[]),r.lineDashOffset=g,y?(r.lineWidth=u*2,r.lineJoin=h||"round"):(r.lineWidth=u,r.lineJoin=h||"bevel");let b=e.endAngle;if(i){ab(r,e,t,s,b,a);for(let v=0;v<i;++v)r.stroke();isNaN(l)||(b=o+(l%yr||yr))}y&&$ie(r,e,b),c.selfJoin&&b-o>=tr&&x===0&&h!=="miter"&&Hie(r,e,b),i||(ab(r,e,t,s,b,a),r.stroke())}class eL extends Jl{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const a=this.getProps(["x","y"],s),{angle:i,distance:o}=SO(a,{x:e,y:t}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),g=(this.options.spacing+this.options.borderWidth)/2,x=ts(f,c-l),y=Jf(i,l,c)&&l!==c,b=x>=yr||y,v=wl(o,u+g,h+g);return b&&v}getCenterPoint(e){const{x:t,y:s,startAngle:a,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:u}=this.options,h=(a+i)/2,f=(o+l+u+c)/2;return{x:t+Math.cos(h)*f,y:s+Math.sin(h)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,a=(t.offset||0)/4,i=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=s>yr?Math.floor(s/yr):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*a,Math.sin(l)*a);const c=1-Math.sin(Math.min(tr,s||0)),u=a*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,qie(e,this,u,i,o),Xie(e,this,u,i,o),e.restore()}}function tL(r,e,t=e){r.lineCap=ts(t.borderCapStyle,e.borderCapStyle),r.setLineDash(ts(t.borderDash,e.borderDash)),r.lineDashOffset=ts(t.borderDashOffset,e.borderDashOffset),r.lineJoin=ts(t.borderJoinStyle,e.borderJoinStyle),r.lineWidth=ts(t.borderWidth,e.borderWidth),r.strokeStyle=ts(t.borderColor,e.borderColor)}function Gie(r,e,t){r.lineTo(t.x,t.y)}function Kie(r){return r.stepped?mae:r.tension||r.cubicInterpolationMode==="monotone"?fae:Gie}function sL(r,e,t={}){const s=r.length,{start:a=0,end:i=s-1}=t,{start:o,end:l}=e,c=Math.max(a,o),u=Math.min(i,l),h=a<o&&i<o||a>l&&i>l;return{count:s,start:c,loop:e.loop,ilen:u<c&&!h?s+u-c:u-c}}function Qie(r,e,t,s){const{points:a,options:i}=e,{count:o,start:l,loop:c,ilen:u}=sL(a,t,s),h=Kie(i);let{move:f=!0,reverse:g}=s||{},x,y,b;for(x=0;x<=u;++x)y=a[(l+(g?u-x:x))%o],!y.skip&&(f?(r.moveTo(y.x,y.y),f=!1):h(r,b,y,g,i.stepped),b=y);return c&&(y=a[(l+(g?u:0))%o],h(r,b,y,g,i.stepped)),!!c}function Zie(r,e,t,s){const a=e.points,{count:i,start:o,ilen:l}=sL(a,t,s),{move:c=!0,reverse:u}=s||{};let h=0,f=0,g,x,y,b,v,N;const k=R=>(o+(u?l-R:R))%i,A=()=>{b!==v&&(r.lineTo(h,v),r.lineTo(h,b),r.lineTo(h,N))};for(c&&(x=a[k(0)],r.moveTo(x.x,x.y)),g=0;g<=l;++g){if(x=a[k(g)],x.skip)continue;const R=x.x,_=x.y,I=R|0;I===y?(_<b?b=_:_>v&&(v=_),h=(f*h+R)/++f):(A(),r.lineTo(R,_),y=I,f=0,b=v=_),N=_}A()}function GN(r){const e=r.options,t=e.borderDash&&e.borderDash.length;return!r._decimated&&!r._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Zie:Qie}function Jie(r){return r.stepped?Yae:r.tension||r.cubicInterpolationMode==="monotone"?qae:Oc}function eoe(r,e,t,s){let a=e._path;a||(a=e._path=new Path2D,e.path(a,t,s)&&a.closePath()),tL(r,e.options),r.stroke(a)}function toe(r,e,t,s){const{segments:a,options:i}=e,o=GN(e);for(const l of a)tL(r,i,l.style),r.beginPath(),o(r,e,l,{start:t,end:t+s-1})&&r.closePath(),r.stroke()}const soe=typeof Path2D=="function";function roe(r,e,t,s){soe&&!e.options.segment?eoe(r,e,t,s):toe(r,e,t,s)}class aoe extends Jl{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const a=s.spanGaps?this._loop:this._fullLoop;Fae(this._points,s,e,a,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=tne(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,a=e[t],i=this.points,o=Zae(this,{property:t,start:a,end:a});if(!o.length)return;const l=[],c=Jie(s);let u,h;for(u=0,h=o.length;u<h;++u){const{start:f,end:g}=o[u],x=i[f],y=i[g];if(x===y){l.push(x);continue}const b=Math.abs((a-x[t])/(y[t]-x[t])),v=c(x,y,b,s.stepped);v[t]=e[t],l.push(v)}return l.length===1?l[0]:l}pathSegment(e,t,s){return GN(this)(e,this,t,s)}path(e,t,s){const a=this.segments,i=GN(this);let o=this._loop;t=t||0,s=s||this.points.length-t;for(const l of a)o&=i(e,this,l,{start:t,end:t+s-1});return!!o}draw(e,t,s,a){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),roe(e,this,s,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function jI(r,e,t,s){const a=r.options,{[t]:i}=r.getProps([t],s);return Math.abs(e-i)<a.radius+a.hitRadius}class noe extends Jl{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const a=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,t){return jI(this,e,"x",t)}inYRange(e,t){return jI(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const s=t&&e.borderWidth||0;return(t+s)*2}draw(e,t){const s=this.options;this.skip||s.radius<.1||!eg(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,YN(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function rL(r,e){const{x:t,y:s,base:a,width:i,height:o}=r.getProps(["x","y","base","width","height"],e);let l,c,u,h,f;return r.horizontal?(f=o/2,l=Math.min(t,a),c=Math.max(t,a),u=s-f,h=s+f):(f=i/2,l=t-f,c=t+f,u=Math.min(s,a),h=Math.max(s,a)),{left:l,top:u,right:c,bottom:h}}function jl(r,e,t,s){return r?0:Sa(e,t,s)}function ioe(r,e,t){const s=r.options.borderWidth,a=r.borderSkipped,i=IO(s);return{t:jl(a.top,i.top,0,t),r:jl(a.right,i.right,0,e),b:jl(a.bottom,i.bottom,0,t),l:jl(a.left,i.left,0,e)}}function ooe(r,e,t){const{enableBorderRadius:s}=r.getProps(["enableBorderRadius"]),a=r.options.borderRadius,i=Vu(a),o=Math.min(e,t),l=r.borderSkipped,c=s||Ns(a);return{topLeft:jl(!c||l.top||l.left,i.topLeft,0,o),topRight:jl(!c||l.top||l.right,i.topRight,0,o),bottomLeft:jl(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:jl(!c||l.bottom||l.right,i.bottomRight,0,o)}}function loe(r){const e=rL(r),t=e.right-e.left,s=e.bottom-e.top,a=ioe(r,t/2,s/2),i=ooe(r,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:i},inner:{x:e.left+a.l,y:e.top+a.t,w:t-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function h1(r,e,t,s){const a=e===null,i=t===null,l=r&&!(a&&i)&&rL(r,s);return l&&(a||wl(e,l.left,l.right))&&(i||wl(t,l.top,l.bottom))}function coe(r){return r.topLeft||r.topRight||r.bottomLeft||r.bottomRight}function doe(r,e){r.rect(e.x,e.y,e.w,e.h)}function m1(r,e,t={}){const s=r.x!==t.x?-e:0,a=r.y!==t.y?-e:0,i=(r.x+r.w!==t.x+t.w?e:0)-s,o=(r.y+r.h!==t.y+t.h?e:0)-a;return{x:r.x+s,y:r.y+a,w:r.w+i,h:r.h+o,radius:r.radius}}class O2 extends Jl{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:a}}=this,{inner:i,outer:o}=loe(this),l=coe(o.radius)?tb:doe;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,m1(o,t,i)),e.clip(),l(e,m1(i,-t,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),l(e,m1(i,t)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,t,s){return h1(this,e,t,s)}inXRange(e,t){return h1(this,e,null,t)}inYRange(e,t){return h1(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+a)/2:t,y:i?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const kI=(r,e)=>{let{boxHeight:t=e,boxWidth:s=e}=r;return r.usePointStyle&&(t=Math.min(t,e),s=r.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},uoe=(r,e)=>r!==null&&e!==null&&r.datasetIndex===e.datasetIndex&&r.index===e.index;class SI extends Jl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ir(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=Qa(s.font),i=a.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=kI(s,i);let u,h;t.font=a.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,i,l,c)+10):(h=this.maxHeight,u=this._fitCols(o,a,l,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,a){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],h=a+l;let f=e;i.textAlign="left",i.textBaseline="middle";let g=-1,x=-h;return this.legendItems.forEach((y,b)=>{const v=s+t/2+i.measureText(y.text).width;(b===0||u[u.length-1]+v+2*l>o)&&(f+=h,u[u.length-(b>0?0:1)]=0,x+=h,g++),c[b]={left:0,top:x,row:g,width:v,height:a},u[u.length-1]+=v+l}),f}_fitCols(e,t,s,a){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let f=l,g=0,x=0,y=0,b=0;return this.legendItems.forEach((v,N)=>{const{itemWidth:k,itemHeight:A}=hoe(s,t,i,v,a);N>0&&x+A+2*l>h&&(f+=g+l,u.push({width:g,height:x}),y+=g+l,b++,g=x=0),c[N]={left:y,top:x,col:b,width:k,height:A},g=Math.max(g,k),x+=A+l}),f+=g,u.push({width:g,height:x}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:a},rtl:i}}=this,o=Bu(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=fn(s,this.left+a,this.right-this.lineWidths[l]);for(const u of t)l!==u.row&&(l=u.row,c=fn(s,this.left+a,this.right-this.lineWidths[l])),u.top+=this.top+e+a,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+a}else{let l=0,c=fn(s,this.top+e+a,this.bottom-this.columnSizes[l].height);for(const u of t)u.col!==l&&(l=u.col,c=fn(s,this.top+e+a,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+a,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;A2(e,this),this._draw(),C2(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:a}=this,{align:i,labels:o}=e,l=Cr.color,c=Bu(e.rtl,this.left,this.width),u=Qa(o.font),{padding:h}=o,f=u.size,g=f/2;let x;this.drawTitle(),a.textAlign=c.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=u.string;const{boxWidth:y,boxHeight:b,itemHeight:v}=kI(o,f),N=function(I,P,T){if(isNaN(y)||y<=0||isNaN(b)||b<0)return;a.save();const D=ts(T.lineWidth,1);if(a.fillStyle=ts(T.fillStyle,l),a.lineCap=ts(T.lineCap,"butt"),a.lineDashOffset=ts(T.lineDashOffset,0),a.lineJoin=ts(T.lineJoin,"miter"),a.lineWidth=D,a.strokeStyle=ts(T.strokeStyle,l),a.setLineDash(ts(T.lineDash,[])),o.usePointStyle){const L={radius:b*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:D},F=c.xPlus(I,y/2),z=P+g;RO(a,L,F,z,o.pointStyleWidth&&y)}else{const L=P+Math.max((f-b)/2,0),F=c.leftForLtr(I,y),z=Vu(T.borderRadius);a.beginPath(),Object.values(z).some(O=>O!==0)?tb(a,{x:F,y:L,w:y,h:b,radius:z}):a.rect(F,L,y,b),a.fill(),D!==0&&a.stroke()}a.restore()},k=function(I,P,T){eb(a,T.text,I,P+v/2,u,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},A=this.isHorizontal(),R=this._computeTitleHeight();A?x={x:fn(i,this.left+h,this.right-s[0]),y:this.top+h+R,line:0}:x={x:this.left+h,y:fn(i,this.top+R+h,this.bottom-t[0].height),line:0},UO(this.ctx,e.textDirection);const _=v+h;this.legendItems.forEach((I,P)=>{a.strokeStyle=I.fontColor,a.fillStyle=I.fontColor;const T=a.measureText(I.text).width,D=c.textAlign(I.textAlign||(I.textAlign=o.textAlign)),L=y+g+T;let F=x.x,z=x.y;c.setWidth(this.width),A?P>0&&F+L+h>this.right&&(z=x.y+=_,x.line++,F=x.x=fn(i,this.left+h,this.right-s[x.line])):P>0&&z+_>this.bottom&&(F=x.x=F+t[x.line].width+h,x.line++,z=x.y=fn(i,this.top+R+h,this.bottom-t[x.line].height));const O=c.x(F);if(N(O,z,I),F=eae(D,F+y+g,A?F+L:this.right,e.rtl),k(c.x(F),z,I),A)x.x+=L+h;else if(typeof I.text!="string"){const V=u.lineHeight;x.y+=aL(I,V)+h}else x.y+=_}),zO(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=Qa(t.font),a=oi(t.padding);if(!t.display)return;const i=Bu(e.rtl,this.left,this.width),o=this.ctx,l=t.position,c=s.size/2,u=a.top+c;let h,f=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),h=this.top+u,f=fn(e.align,f,this.right-g);else{const y=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);h=u+fn(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const x=fn(l,f,f+g);o.textAlign=i.textAlign(TO(l)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=s.string,eb(o,t.text,x,h,s)}_computeTitleHeight(){const e=this.options.title,t=Qa(e.font),s=oi(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,a,i;if(wl(e,this.left,this.right)&&wl(t,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(a=i[s],wl(e,a.left,a.left+a.width)&&wl(t,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!goe(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,i=uoe(a,s);a&&!i&&ir(t.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!i&&ir(t.onHover,[e,s,this],this)}else s&&ir(t.onClick,[e,s,this],this)}}function hoe(r,e,t,s,a){const i=moe(s,r,e,t),o=foe(a,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function moe(r,e,t,s){let a=r.text;return a&&typeof a!="string"&&(a=a.reduce((i,o)=>i.length>o.length?i:o)),e+t.size/2+s.measureText(a).width}function foe(r,e,t){let s=r;return typeof e.text!="string"&&(s=aL(e,t)),s}function aL(r,e){const t=r.text?r.text.length:0;return e*t}function goe(r,e){return!!((r==="mousemove"||r==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(r==="click"||r==="mouseup"))}var L2={id:"legend",_element:SI,start(r,e,t){const s=r.legend=new SI({ctx:r.ctx,options:t,chart:r});Nl.configure(r,s,t),Nl.addBox(r,s)},stop(r){Nl.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,e,t){const s=r.legend;Nl.configure(r,s,t),s.options=t},afterUpdate(r){const e=r.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(r,e){e.replay||r.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,e,t){const s=e.datasetIndex,a=t.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){const e=r.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:a,color:i,useBorderRadius:o,borderRadius:l}}=r.legend.options;return r._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(t?0:void 0),h=oi(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:a||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}};const tf={average(r){if(!r.length)return!1;let e,t,s=new Set,a=0,i=0;for(e=0,t=r.length;e<t;++e){const l=r[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),a+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:a/i}},nearest(r,e){if(!r.length)return!1;let t=e.x,s=e.y,a=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=r.length;i<o;++i){const c=r[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),h=$N(e,u);h<a&&(a=h,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,s=c.y}return{x:t,y:s}}};function ki(r,e){return e&&(ia(e)?Array.prototype.push.apply(r,e):r.push(e)),r}function yo(r){return(typeof r=="string"||r instanceof String)&&r.indexOf(`
`)>-1?r.split(`
`):r}function poe(r,e){const{element:t,datasetIndex:s,index:a}=e,i=r.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(a);return{chart:r,label:o,parsed:i.getParsed(a),raw:r.data.datasets[s].data[a],formattedValue:l,dataset:i.getDataset(),dataIndex:a,datasetIndex:s,element:t}}function _I(r,e){const t=r.chart.ctx,{body:s,footer:a,title:i}=r,{boxWidth:o,boxHeight:l}=e,c=Qa(e.bodyFont),u=Qa(e.titleFont),h=Qa(e.footerFont),f=i.length,g=a.length,x=s.length,y=oi(e.padding);let b=y.height,v=0,N=s.reduce((R,_)=>R+_.before.length+_.lines.length+_.after.length,0);if(N+=r.beforeBody.length+r.afterBody.length,f&&(b+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),N){const R=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;b+=x*R+(N-x)*c.lineHeight+(N-1)*e.bodySpacing}g&&(b+=e.footerMarginTop+g*h.lineHeight+(g-1)*e.footerSpacing);let k=0;const A=function(R){v=Math.max(v,t.measureText(R).width+k)};return t.save(),t.font=u.string,$s(r.title,A),t.font=c.string,$s(r.beforeBody.concat(r.afterBody),A),k=e.displayColors?o+2+e.boxPadding:0,$s(s,R=>{$s(R.before,A),$s(R.lines,A),$s(R.after,A)}),k=0,t.font=h.string,$s(r.footer,A),t.restore(),v+=y.width,{width:v,height:b}}function xoe(r,e){const{y:t,height:s}=e;return t<s/2?"top":t>r.height-s/2?"bottom":"center"}function boe(r,e,t,s){const{x:a,width:i}=s,o=t.caretSize+t.caretPadding;if(r==="left"&&a+i+o>e.width||r==="right"&&a-i-o<0)return!0}function yoe(r,e,t,s){const{x:a,width:i}=t,{width:o,chartArea:{left:l,right:c}}=r;let u="center";return s==="center"?u=a<=(l+c)/2?"left":"right":a<=i/2?u="left":a>=o-i/2&&(u="right"),boe(u,r,e,t)&&(u="center"),u}function AI(r,e,t){const s=t.yAlign||e.yAlign||xoe(r,t);return{xAlign:t.xAlign||e.xAlign||yoe(r,e,t,s),yAlign:s}}function voe(r,e){let{x:t,width:s}=r;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function woe(r,e,t){let{y:s,height:a}=r;return e==="top"?s+=t:e==="bottom"?s-=a+t:s-=a/2,s}function CI(r,e,t,s){const{caretSize:a,caretPadding:i,cornerRadius:o}=r,{xAlign:l,yAlign:c}=t,u=a+i,{topLeft:h,topRight:f,bottomLeft:g,bottomRight:x}=Vu(o);let y=voe(e,l);const b=woe(e,c,u);return c==="center"?l==="left"?y+=u:l==="right"&&(y-=u):l==="left"?y-=Math.max(h,g)+a:l==="right"&&(y+=Math.max(f,x)+a),{x:Sa(y,0,s.width-e.width),y:Sa(b,0,s.height-e.height)}}function Ox(r,e,t){const s=oi(t.padding);return e==="center"?r.x+r.width/2:e==="right"?r.x+r.width-s.right:r.x+s.left}function EI(r){return ki([],yo(r))}function Noe(r,e,t){return Ad(r,{tooltip:e,tooltipItems:t,type:"tooltip"})}function TI(r,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?r.override(t):r}const nL={beforeTitle:xo,title(r){if(r.length>0){const e=r[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:xo,beforeBody:xo,beforeLabel:xo,label(r){if(this&&this.options&&this.options.mode==="dataset")return r.label+": "+r.formattedValue||r.formattedValue;let e=r.dataset.label||"";e&&(e+=": ");const t=r.formattedValue;return Ms(t)||(e+=t),e},labelColor(r){const t=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){const t=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:xo,afterBody:xo,beforeFooter:xo,footer:xo,afterFooter:xo};function Ya(r,e,t,s){const a=r[e].call(t,s);return typeof a>"u"?nL[e].call(t,s):a}class PI extends Jl{static positioners=tf;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&t.options.animation&&s.animations,i=new BO(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Noe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,a=Ya(s,"beforeTitle",this,e),i=Ya(s,"title",this,e),o=Ya(s,"afterTitle",this,e);let l=[];return l=ki(l,yo(a)),l=ki(l,yo(i)),l=ki(l,yo(o)),l}getBeforeBody(e,t){return EI(Ya(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,a=[];return $s(e,i=>{const o={before:[],lines:[],after:[]},l=TI(s,i);ki(o.before,yo(Ya(l,"beforeLabel",this,i))),ki(o.lines,Ya(l,"label",this,i)),ki(o.after,yo(Ya(l,"afterLabel",this,i))),a.push(o)}),a}getAfterBody(e,t){return EI(Ya(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,a=Ya(s,"beforeFooter",this,e),i=Ya(s,"footer",this,e),o=Ya(s,"afterFooter",this,e);let l=[];return l=ki(l,yo(a)),l=ki(l,yo(i)),l=ki(l,yo(o)),l}_createItems(e){const t=this._active,s=this.chart.data,a=[],i=[],o=[];let l=[],c,u;for(c=0,u=t.length;c<u;++c)l.push(poe(this.chart,t[c]));return e.filter&&(l=l.filter((h,f,g)=>e.filter(h,f,g,s))),e.itemSort&&(l=l.sort((h,f)=>e.itemSort(h,f,s))),$s(l,h=>{const f=TI(e.callbacks,h);a.push(Ya(f,"labelColor",this,h)),i.push(Ya(f,"labelPointStyle",this,h)),o.push(Ya(f,"labelTextColor",this,h))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const s=this.options.setContext(this.getContext()),a=this._active;let i,o=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{const l=tf[s.position].call(this,a,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=_I(this,s),u=Object.assign({},l,c),h=AI(this.chart,s,u),f=CI(s,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,a){const i=this.getCaretPosition(e,s,a);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,s){const{xAlign:a,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:f}=Vu(l),{x:g,y:x}=e,{width:y,height:b}=t;let v,N,k,A,R,_;return i==="center"?(R=x+b/2,a==="left"?(v=g,N=v-o,A=R+o,_=R-o):(v=g+y,N=v+o,A=R-o,_=R+o),k=v):(a==="left"?N=g+Math.max(c,h)+o:a==="right"?N=g+y-Math.max(u,f)-o:N=this.caretX,i==="top"?(A=x,R=A-o,v=N-o,k=N+o):(A=x+b,R=A+o,v=N+o,k=N-o),_=A),{x1:v,x2:N,x3:k,y1:A,y2:R,y3:_}}drawTitle(e,t,s){const a=this.title,i=a.length;let o,l,c;if(i){const u=Bu(s.rtl,this.x,this.width);for(e.x=Ox(this,s.titleAlign,s),t.textAlign=u.textAlign(s.titleAlign),t.textBaseline="middle",o=Qa(s.titleFont),l=s.titleSpacing,t.fillStyle=s.titleColor,t.font=o.string,c=0;c<i;++c)t.fillText(a[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=s.titleMarginBottom-l)}}_drawColorBox(e,t,s,a,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u}=i,h=Qa(i.bodyFont),f=Ox(this,"left",i),g=a.x(f),x=c<h.lineHeight?(h.lineHeight-c)/2:0,y=t.y+x;if(i.usePointStyle){const b={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=a.leftForLtr(g,u)+u/2,N=y+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,YN(e,b,v,N),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,YN(e,b,v,N)}else{e.lineWidth=Ns(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=a.leftForLtr(g,u),v=a.leftForLtr(a.xPlus(g,1),u-2),N=Vu(o.borderRadius);Object.values(N).some(k=>k!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,tb(e,{x:b,y,w:u,h:c,radius:N}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),tb(e,{x:v,y:y+1,w:u-2,h:c-2,radius:N}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(b,y,u,c),e.strokeRect(b,y,u,c),e.fillStyle=o.backgroundColor,e.fillRect(v,y+1,u-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:a}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:h}=s,f=Qa(s.bodyFont);let g=f.lineHeight,x=0;const y=Bu(s.rtl,this.x,this.width),b=function(T){t.fillText(T,y.x(e.x+x),e.y+g/2),e.y+=g+i},v=y.textAlign(o);let N,k,A,R,_,I,P;for(t.textAlign=o,t.textBaseline="middle",t.font=f.string,e.x=Ox(this,v,s),t.fillStyle=s.bodyColor,$s(this.beforeBody,b),x=l&&v!=="right"?o==="center"?u/2+h:u+2+h:0,R=0,I=a.length;R<I;++R){for(N=a[R],k=this.labelTextColors[R],t.fillStyle=k,$s(N.before,b),A=N.lines,l&&A.length&&(this._drawColorBox(t,e,R,y,s),g=Math.max(f.lineHeight,c)),_=0,P=A.length;_<P;++_)b(A[_]),g=f.lineHeight;$s(N.after,b)}x=0,g=f.lineHeight,$s(this.afterBody,b),e.y-=i}drawFooter(e,t,s){const a=this.footer,i=a.length;let o,l;if(i){const c=Bu(s.rtl,this.x,this.width);for(e.x=Ox(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=c.textAlign(s.footerAlign),t.textBaseline="middle",o=Qa(s.footerFont),t.fillStyle=s.footerColor,t.font=o.string,l=0;l<i;++l)t.fillText(a[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,t,s,a){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:h}=s,{topLeft:f,topRight:g,bottomLeft:x,bottomRight:y}=Vu(a.cornerRadius);t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.beginPath(),t.moveTo(l+f,c),o==="top"&&this.drawCaret(e,t,s,a),t.lineTo(l+u-g,c),t.quadraticCurveTo(l+u,c,l+u,c+g),o==="center"&&i==="right"&&this.drawCaret(e,t,s,a),t.lineTo(l+u,c+h-y),t.quadraticCurveTo(l+u,c+h,l+u-y,c+h),o==="bottom"&&this.drawCaret(e,t,s,a),t.lineTo(l+x,c+h),t.quadraticCurveTo(l,c+h,l,c+h-x),o==="center"&&i==="left"&&this.drawCaret(e,t,s,a),t.lineTo(l,c+f),t.quadraticCurveTo(l,c,l+f,c),t.closePath(),t.fill(),a.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,a=s&&s.x,i=s&&s.y;if(a||i){const o=tf[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=_I(this,e),c=Object.assign({},o,this._size),u=AI(t,e,c),h=CI(e,c,u,t);(a._to!==h.x||i._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const a={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=oi(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,a,t),UO(e,t.textDirection),i.y+=o.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),zO(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,a=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Q0(s,a),o=this._positionChanged(a,t);(i||o)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,i=this._active||[],o=this._getActiveElements(e,i,t,s),l=this._positionChanged(o,e),c=t||!Q0(o,i)||l;return c&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,s,a){const i=this.options;if(e.type==="mouseout")return[];if(!a)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:s,caretY:a,options:i}=this,o=tf[i.position].call(this,e,t);return o!==!1&&(s!==o.x||a!==o.y)}}var F2={id:"tooltip",_element:PI,positioners:tf,afterInit(r,e,t){t&&(r.tooltip=new PI({chart:r,options:t}))},beforeUpdate(r,e,t){r.tooltip&&r.tooltip.initialize(t)},reset(r,e,t){r.tooltip&&r.tooltip.initialize(t)},afterDraw(r){const e=r.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(r.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",t)}},afterEvent(r,e){if(r.tooltip){const t=e.replay;r.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,e)=>e.bodyFont.size,boxWidth:(r,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nL},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>r!=="filter"&&r!=="itemSort"&&r!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const joe=(r,e,t,s)=>(typeof e=="string"?(t=r.push(e)-1,s.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function koe(r,e,t,s){const a=r.indexOf(e);if(a===-1)return joe(r,e,t,s);const i=r.lastIndexOf(e);return a!==i?t:a}const Soe=(r,e)=>r===null?null:Sa(Math.round(r),0,e);function RI(r){const e=this.getLabels();return r>=0&&r<e.length?e[r]:r}class U2 extends Sh{static id="category";static defaults={ticks:{callback:RI}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:a,label:i}of t)s[a]===i&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Ms(e))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===e?t:koe(s,e,ts(t,e),this._addedLabels),Soe(t,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),t||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,a=[];let i=this.getLabels();i=e===0&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=t;o++)a.push({value:o});return a}getLabelForValue(e){return RI.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function _oe(r,e){const t=[],{bounds:a,step:i,min:o,max:l,precision:c,count:u,maxTicks:h,maxDigits:f,includeBounds:g}=r,x=i||1,y=h-1,{min:b,max:v}=e,N=!Ms(o),k=!Ms(l),A=!Ms(u),R=(v-b)/(f+1);let _=IR((v-b)/y/x)*x,I,P,T,D;if(_<1e-14&&!N&&!k)return[{value:b},{value:v}];D=Math.ceil(v/_)-Math.floor(b/_),D>y&&(_=IR(D*_/y/x)*x),Ms(c)||(I=Math.pow(10,c),_=Math.ceil(_*I)/I),a==="ticks"?(P=Math.floor(b/_)*_,T=Math.ceil(v/_)*_):(P=b,T=v),N&&k&&i&&Wre((l-o)/i,_/1e3)?(D=Math.round(Math.min((l-o)/_,h)),_=(l-o)/D,P=o,T=l):A?(P=N?o:P,T=k?l:T,D=u-1,_=(T-P)/D):(D=(T-P)/_,Nf(D,Math.round(D),_/1e3)?D=Math.round(D):D=Math.ceil(D));const L=Math.max(DR(_),DR(P));I=Math.pow(10,Ms(c)?L:c),P=Math.round(P*I)/I,T=Math.round(T*I)/I;let F=0;for(N&&(g&&P!==o?(t.push({value:o}),P<o&&F++,Nf(Math.round((P+F*_)*I)/I,o,II(o,R,r))&&F++):P<o&&F++);F<D;++F){const z=Math.round((P+F*_)*I)/I;if(k&&z>l)break;t.push({value:z})}return k&&g&&T!==l?t.length&&Nf(t[t.length-1].value,l,II(l,R,r))?t[t.length-1].value=l:t.push({value:l}):(!k||T===l)&&t.push({value:T}),t}function II(r,e,{horizontal:t,minRotation:s}){const a=jo(s),i=(t?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+r).length;return Math.min(e/i,o)}class Aoe extends Sh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ms(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:a,max:i}=this;const o=c=>a=t?a:c,l=c=>i=s?i:c;if(e){const c=Hi(a),u=Hi(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(a===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(a-c)}this.min=a,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),t=t||11),t&&(a=Math.min(t,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},i=this._range||this,o=_oe(a,i);return e.bounds==="ticks"&&Yre(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-t)/Math.max(e.length-1,1)/2;t-=a,s+=a}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return _2(e,this.chart.options.locale,this.options.ticks.format)}}class z2 extends Aoe{static id="linear";static defaults={ticks:{callback:PO.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Bn(e)?e:0,this.max=Bn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=jo(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const iy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ga=Object.keys(iy);function DI(r,e){return r-e}function MI(r,e){if(Ms(e))return null;const t=r._adapter,{parser:s,round:a,isoWeekday:i}=r._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Bn(o)||(o=typeof s=="string"?t.parse(o,s):t.parse(o)),o===null?null:(a&&(o=a==="week"&&(Zf(i)||i===!0)?t.startOf(o,"isoWeek",i):t.startOf(o,a)),+o)}function OI(r,e,t,s){const a=Ga.length;for(let i=Ga.indexOf(r);i<a-1;++i){const o=iy[Ga[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=s)return Ga[i]}return Ga[a-1]}function Coe(r,e,t,s,a){for(let i=Ga.length-1;i>=Ga.indexOf(t);i--){const o=Ga[i];if(iy[o].common&&r._adapter.diff(a,s,o)>=e-1)return o}return Ga[t?Ga.indexOf(t):0]}function Eoe(r){for(let e=Ga.indexOf(r)+1,t=Ga.length;e<t;++e)if(iy[Ga[e]].common)return Ga[e]}function LI(r,e,t){if(!t)r[e]=!0;else if(t.length){const{lo:s,hi:a}=k2(t,e),i=t[s]>=e?t[s]:t[a];r[i]=!0}}function Toe(r,e,t,s){const a=r._adapter,i=+a.startOf(e[0].value,s),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+a.add(l,1,s))c=t[l],c>=0&&(e[c].major=!0);return e}function FI(r,e,t){const s=[],a={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],a[l]=o,s.push({value:l,major:!1});return i===0||!t?s:Toe(r,s,a,t)}class UI extends Sh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),a=this._adapter=new Dne._date(e.adapters.date);a.init(t),wf(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:MI(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:a,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(a=Math.min(a,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),a=Bn(a)&&!isNaN(a)?a:+t.startOf(Date.now(),s),i=Bn(i)&&!isNaN(i)?i:+t.endOf(Date.now(),s)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const i=this.min,o=this.max,l=Qre(a,i,o);return this._unit=t.unit||(s.autoSkip?OI(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):Coe(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Eoe(this._unit),this.initOffsets(a),e.reverse&&l.reverse(),FI(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,a,i;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?t=1-a:t=(this.getDecimalForValue(e[1])-a)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Sa(t,0,o),s=Sa(s,0,o),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,a=this.options,i=a.time,o=i.unit||OI(i.minUnit,t,s,this._getLabelCapacity(t)),l=ts(a.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=Zf(c)||c===!0,h={};let f=t,g,x;if(u&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,u?"day":o),e.diff(s,t,o)>1e5*l)throw new Error(t+" and "+s+" are too far apart with stepSize of "+l+" "+o);const y=a.ticks.source==="data"&&this.getDataTimestamps();for(g=f,x=0;g<s;g=+e.add(g,l,o),x++)LI(h,g,y);return(g===s||a.bounds==="ticks"||x===1)&&LI(h,g,y),Object.keys(h).sort(DI).map(b=>+b)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const a=this.options.time.displayFormats,i=this._unit,o=t||a[i];return this._adapter.format(e,o)}_tickFormatFunction(e,t,s,a){const i=this.options,o=i.ticks.callback;if(o)return ir(o,[e,t,s],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,h=c&&l[c],f=u&&l[u],g=s[t],x=u&&f&&g&&g.major;return this._adapter.format(e,a||(x?f:h))}generateTickLabels(e){let t,s,a;for(t=0,s=e.length;t<s;++t)a=e[t],a.label=this._tickFormatFunction(a.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,a=jo(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(a),o=Math.sin(a),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,a=s[t.unit]||s.millisecond,i=this._tickFormatFunction(e,0,FI(this,[e],this._majorUnit),a),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(t=0,s=a.length;t<s;++t)e=e.concat(a[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const a=this.getLabels();for(t=0,s=a.length;t<s;++t)e.push(MI(this,a[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return AO(e.sort(DI))}}function Lx(r,e,t){let s=0,a=r.length-1,i,o,l,c;t?(e>=r[s].pos&&e<=r[a].pos&&({lo:s,hi:a}=qc(r,"pos",e)),{pos:i,time:l}=r[s],{pos:o,time:c}=r[a]):(e>=r[s].time&&e<=r[a].time&&({lo:s,hi:a}=qc(r,"time",e)),{time:i,pos:l}=r[s],{time:o,pos:c}=r[a]);const u=o-i;return u?l+(c-l)*(e-i)/u:l}class yhe extends UI{static id="timeseries";static defaults=UI.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Lx(t,this.min),this._tableRange=Lx(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,a=[],i=[];let o,l,c,u,h;for(o=0,l=e.length;o<l;++o)u=e[o],u>=t&&u<=s&&a.push(u);if(a.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(o=0,l=a.length;o<l;++o)h=a[o+1],c=a[o-1],u=a[o],Math.round((h+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((a,i)=>a-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Lx(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return Lx(this._table,s*this._tableRange+this._minPos,!0)}}const iL="label";function zI(r,e){typeof r=="function"?r(e):r&&(r.current=e)}function Poe(r,e){const t=r.options;t&&e&&Object.assign(t,e)}function oL(r,e){r.labels=e}function lL(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:iL;const s=[];r.datasets=e.map(a=>{const i=r.datasets.find(o=>o[t]===a[t]);return!i||!a.data||s.includes(i)?{...a}:(s.push(i),Object.assign(i,a),i)})}function Roe(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:iL;const t={labels:[],datasets:[]};return oL(t,r.labels),lL(t,r.datasets,e),t}function Ioe(r,e){const{height:t=150,width:s=300,redraw:a=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:f,...g}=r,x=E.useRef(null),y=E.useRef(null),b=()=>{x.current&&(y.current=new _h(x.current,{type:o,data:Roe(l,i),options:c&&{...c},plugins:u}),zI(e,y.current))},v=()=>{zI(e,null),y.current&&(y.current.destroy(),y.current=null)};return E.useEffect(()=>{!a&&y.current&&c&&Poe(y.current,c)},[a,c]),E.useEffect(()=>{!a&&y.current&&oL(y.current.config.data,l.labels)},[a,l.labels]),E.useEffect(()=>{!a&&y.current&&l.datasets&&lL(y.current.config.data,l.datasets,i)},[a,l.datasets]),E.useEffect(()=>{y.current&&(a?(v(),setTimeout(b)):y.current.update(f))},[a,c,l.labels,l.datasets,f]),E.useEffect(()=>{y.current&&(v(),setTimeout(b))},[o]),E.useEffect(()=>(b(),()=>v()),[]),cs.createElement("canvas",{ref:x,role:"img",height:t,width:s,...g},h)}const Doe=E.forwardRef(Ioe);function V2(r,e){return _h.register(e),E.forwardRef((t,s)=>cs.createElement(Doe,{...t,ref:s,type:r}))}const Moe=V2("line",Ine),B2=V2("bar",Tne),cL=V2("doughnut",Rne),Ooe=()=>{const r=Br();return n.jsxs("nav",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center py-2 z-40",children:[n.jsxs(he,{to:"/",className:`flex flex-col items-center ${r.pathname==="/"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-home-alt text-2xl"}),n.jsx("span",{className:"text-xs",children:"Home"})]}),n.jsxs(he,{to:"/search",className:`flex flex-col items-center ${r.pathname==="/search"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-search text-2xl"}),n.jsx("span",{className:"text-xs",children:"Search"})]}),n.jsxs(he,{to:"/products-upload",className:`flex flex-col items-center ${r.pathname==="/products-upload"?"text-blue-600":"text-orange-500"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bxs-plus-circle text-2xl"}),n.jsx("span",{className:"text-xs",children:"Sell"})]}),n.jsxs(he,{to:"/notifications",className:`flex flex-col items-center relative ${r.pathname==="/notifications"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-bell text-2xl"}),n.jsx("span",{className:"text-xs",children:"Inbox"})]}),n.jsxs(he,{to:"/profile",className:`flex flex-col items-center ${r.pathname==="/profile"?"text-blue-600":"text-gray-600"} hover:text-amber-500`,children:[n.jsx("i",{className:"bx bx-user text-2xl"}),n.jsx("span",{className:"text-xs",children:"You"})]})]})};_h.register(eL,O2,U2,z2,F2,L2);function VI(){const[r,e]=E.useState(!0),[t,s]=E.useState(""),[a,i]=E.useState(!1),[o,l]=E.useState({products:0,approvedProducts:0,rejectedProducts:0}),[c,u]=E.useState({products:0,approvedProducts:0,rejectedProducts:0}),[h,f]=E.useState(""),{userProfile:g}=hd();E.useEffect(()=>{let v,N={...c},k={...o},A=800,R=null;function _(I){R||(R=I);let P=Math.min((I-R)/A,1);u({products:Math.floor(N.products+(k.products-N.products)*P),approvedProducts:Math.floor(N.approvedProducts+(k.approvedProducts-N.approvedProducts)*P),rejectedProducts:Math.floor(N.rejectedProducts+(k.rejectedProducts-N.rejectedProducts)*P)}),P<1&&(v=requestAnimationFrame(_))}return v=requestAnimationFrame(_),()=>cancelAnimationFrame(v)},[o]),E.useEffect(()=>{const v=ai(ve,async N=>{N&&f(N.displayName||"Seller")});return()=>v()},[]),E.useEffect(()=>{console.log("Seller Dashboard mounted");const v=ai(ve,async N=>{if(console.log("Auth state changed:",N?"User logged in":"No user"),!N){s("Please log in to view your dashboard."),e(!1);return}try{const k=N.uid,[A,R,_]=await Promise.all([Ke(ft(_e(J,"products"),rt("sellerId","==",k))),Ke(ft(_e(J,"products"),rt("sellerId","==",k),rt("status","==","approved"))),Ke(ft(_e(J,"products"),rt("sellerId","==",k),rt("status","==","rejected")))]);l({products:A.size,approvedProducts:R.size,rejectedProducts:_.size})}catch(k){console.error("Error fetching seller stats:",k),s("Failed to load dashboard stats: "+k.message)}finally{e(!1)}});return()=>{console.log("Seller Dashboard unmounting"),v()}},[]);const x={labels:["Total Products","Approved Products","Rejected Products"],datasets:[{label:"Counts",data:[o.products,o.approvedProducts,o.rejectedProducts],backgroundColor:["#2563EB","#16A34A","#DC2626"],borderColor:["#2563EB","#16A34A","#DC2626"],borderWidth:1}]},y={labels:["Approved Products","Rejected Products","Pending Products"],datasets:[{label:"Product Status",data:[o.approvedProducts,o.rejectedProducts,o.products-(o.approvedProducts+o.rejectedProducts)],backgroundColor:["#2563EB","#16A34A","#DC2626"],borderColor:["#2563EB","#16A34A","#DC2626"],borderWidth:1}]},b={responsive:!0,plugins:{legend:{position:"top"},tooltip:{enabled:!0}}};return r?n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-blue-800 text-white rounded-lg",onClick:()=>i(!a),children:n.jsx("i",{className:"bx bx-menu text-xl"})}),n.jsx("div",{className:`${a?"block":"hidden"} md:block md:w-64 bg-white border-r`,children:n.jsx(Es,{})}),n.jsx("div",{className:"flex-1 p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-pulse",children:Array.from({length:3}).map((v,N)=>n.jsx("div",{className:"bg-gray-200 p-4 rounded-lg h-24"},N))}),n.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"}),n.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"})]})]})})]}):t?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:[n.jsx("p",{className:"text-red-700",children:t}),n.jsx(he,{to:"/login",className:"text-blue-600 hover:underline mt-2 inline-block",children:"Return to Login"})]})}):n.jsxs("div",{className:"relative flex min-h-screen bg-white overflow-x-hidden",children:[n.jsx("div",{className:`${a?"block":""} md:block md:w-64 bg-white border-r max-h-[calc(100vh-2rem)] overflow-y-auto`,children:n.jsx(Es,{})}),n.jsx("div",{className:"flex-1 p-3 sm:p-4 md:p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"relative flex flex-col items-center md:flex-row md:items-center md:justify-between bg-white border border-blue-100 rounded-2xl shadow-sm p-4 sm:p-6 md:p-8 mb-8 md:mb-10",children:[n.jsxs("div",{className:"flex flex-col items-center md:items-start text-center md:text-left w-full md:w-auto",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold text-blue-900 mb-1 tracking-tight",children:["Welcome back, ",n.jsx("span",{className:"text-blue-600",children:h}),"!"]}),n.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"Here’s a snapshot of your store’s performance."})]}),n.jsx("div",{className:"mt-4 md:mt-0 flex-shrink-0",children:n.jsx("img",{src:"https://i.pinimg.com/originals/97/16/5e/97165e191052892894cb886b4a8c0971.gif",alt:"Seller Avatar",className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-full shadow border-2 border-blue-100 bg-white object-contain"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 mb-8 md:mb-10 items-stretch",children:[n.jsxs(he,{to:"/products-upload",className:"flex-1 min-w-[140px] flex items-center gap-2 px-4 py-3 rounded-lg bg-[#112d4e] text-white font-semibold shadow-sm hover:bg-[#112d4e] focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"Add Product",children:[n.jsx(x2,{className:"w-5 h-5"})," Add Product"]}),n.jsxs(he,{to:"/sellers/orders",className:"flex-1 min-w-[140px] flex items-center gap-2 px-4 py-3 rounded-lg bg-[#112d4e] text-white font-semibold shadow-sm hover:bg-[#112d4e] focus:outline-green-400 focus:ring-2 focus:ring-green-300 transition",title:"View Orders",children:[n.jsx(d0,{className:"w-5 h-5"})," View Orders"]}),n.jsxs(he,{to:"/smile",className:"flex-1 min-w-[140px] flex items-center gap-2 px-4 py-3 rounded-lg bg-[#112d4e] text-white font-semibold shadow-sm hover:bg-[#112d4e] focus:outline-gray-400 focus:ring-2 focus:ring-gray-300 transition",title:"Withdraw Funds",children:[n.jsx(zu,{className:"w-5 h-5"})," Withdraw Funds"]}),g&&g.isProSeller&&n.jsxs("div",{className:"flex flex-1 min-w-[140px] gap-2",children:[n.jsxs(he,{to:"/product-bump",className:"flex-1 flex items-center gap-2 px-4 py-3 rounded-lg bg-[#112d4e] text-white font-semibold shadow-sm hover:bg-[#112d4e] focus:outline-purple-400 focus:ring-2 focus:ring-purple-300 transition",title:"Product Bump",children:[n.jsx(gd,{className:"w-5 h-5"})," Product Bump"]}),n.jsx(he,{to:"/product-bump-info",className:"flex items-center px-3 py-3 rounded-lg bg-blue-100 text-blue-700 hover:bg-blue-200 transition",title:"What is Product Bump?",children:n.jsx(_u,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white border border-blue-100 p-5 rounded-xl shadow flex items-center justify-between transition-transform hover:scale-105 focus-within:scale-105 cursor-pointer group relative overflow-hidden",tabIndex:0,"aria-label":"Total Products","aria-live":"polite",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-blue-700 mb-1",children:"Total Products"}),n.jsx("p",{className:"text-2xl font-extrabold text-blue-900 animate-countup",children:c.products})]}),n.jsx(gd,{className:"w-8 h-8 text-blue-500 group-hover:scale-110 group-focus:scale-110 transition-transform z-10"})]}),n.jsxs("div",{className:"bg-white border border-green-100 p-5 rounded-xl shadow flex items-center justify-between transition-transform hover:scale-105 focus-within:scale-105 cursor-pointer group relative overflow-hidden",tabIndex:0,"aria-label":"Approved Products","aria-live":"polite",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-green-700 mb-1",children:"Approved Products"}),n.jsx("p",{className:"text-2xl font-extrabold text-green-900 animate-countup",children:c.approvedProducts})]}),n.jsx(Mg,{className:"w-8 h-8 text-green-500 group-hover:scale-110 group-focus:scale-110 transition-transform z-10"})]}),n.jsxs("div",{className:"bg-white border border-orange-100 p-5 rounded-xl shadow flex items-center justify-between transition-transform hover:scale-105 focus-within:scale-105 cursor-pointer group relative overflow-hidden",tabIndex:0,"aria-label":"Rejected Products","aria-live":"polite",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-orange-700 mb-1",children:"Rejected Products"}),n.jsx("p",{className:"text-2xl font-extrabold text-orange-900 animate-countup",children:c.rejectedProducts})]}),n.jsx(Uu,{className:"w-8 h-8 text-orange-500 group-hover:scale-110 group-focus:scale-110 transition-transform z-10"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white border border-blue-100 p-5 rounded-xl shadow",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(HJ,{className:"w-5 h-5 text-blue-500"}),n.jsx("h2",{className:"text-base font-bold text-blue-900",children:"Product Analytics"})]}),n.jsx("div",{className:"h-56 sm:h-64",children:n.jsx(B2,{data:x,options:b})})]}),n.jsxs("div",{className:"bg-white border border-purple-100 p-5 rounded-xl shadow",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(WJ,{className:"w-5 h-5 text-purple-500"}),n.jsx("h2",{className:"text-base font-bold text-purple-900",children:"Product Status"})]}),n.jsx("div",{className:"h-56 sm:h-64 flex items-center justify-center",children:n.jsx("div",{className:"w-3/4 sm:w-1/2",children:n.jsx(cL,{data:y,options:b})})})]})]}),n.jsx("div",{className:"mt-8",children:n.jsx("div",{className:"flex justify-end mt-4",children:n.jsx(he,{to:"/pro-seller-analytics",className:"inline-block px-5 py-2 bg-green-600 text-white rounded hover:bg-green-700 font-semibold shadow",children:"See More Analytics"})})}),n.jsx(Ooe,{})]})})]})}function Loe(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(""),[o,l]=E.useState([]),[c,u]=E.useState("");E.useEffect(()=>{(async()=>{try{ai(ve,async g=>{if(g)try{const x=ft(_e(J,"products"),rt("sellerId","==",g.uid)),b=(await Ke(x)).docs.map(v=>({id:v.id,...v.data(),active:v.data().active||!0,isHidden:v.data().isHidden||!1}));e(b),l(b)}catch(x){i("Failed to fetch products: "+x.message)}else i("Please log in to view your products.");s(!1)})}catch(g){i("Authentication error: "+g.message),s(!1)}})()},[]),E.useEffect(()=>{const f=r.filter(g=>g.name?.toLowerCase().includes(c.toLowerCase()));l(f)},[c,r]);const h=()=>window.location.reload();return t?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):a?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 to-gray-50",children:n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-lg",children:[n.jsx("p",{className:"text-red-700 text-base mb-4",children:a}),n.jsx(he,{to:"/seller/login",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Return to Login"})]})}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Es,{}),n.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 md:gap-6 mb-8 p-4 sm:p-6 md:p-8 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100 shadow-sm",children:[n.jsx(gd,{className:"w-8 h-8 text-blue-600 mb-2 md:mb-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-blue-900 flex items-center gap-3 flex-wrap",children:["My Products",n.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-base md:text-lg font-semibold px-3 py-1 rounded-full ml-2",children:[r.length," ",r.length===1?"Product":"Products"]})]}),n.jsx("p",{className:"text-gray-500 text-sm md:text-base mt-1",children:"Manage and track all your listed products."})]}),n.jsx("button",{onClick:h,title:"Refresh",className:"ml-0 md:ml-auto bg-white border border-blue-200 rounded-full p-2 md:p-3 hover:bg-blue-100 transition focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 mt-2 md:mt-0",children:n.jsx(b2,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600"})}),n.jsxs(he,{to:"/products-upload",className:"hidden sm:flex bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 md:px-10 md:py-5 rounded-xl hover:from-blue-700 hover:to-purple-700 transition duration-300 items-center gap-3 shadow-xl focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 ml-4 font-bold text-lg md:text-xl animate-none hover:animate-pulseBtn",children:[n.jsx(qf,{className:"w-7 h-7 md:w-8 md:h-8"})," ",n.jsx("span",{children:"Add New Product"})]})]}),n.jsxs(he,{to:"/products-upload",className:"sm:hidden fixed bottom-8 right-4 md:bottom-12 md:right-12 z-50 rounded-full bg-gradient-to-br from-blue-600 via-purple-500 to-pink-500 text-white p-7 shadow-2xl hover:from-blue-700 hover:to-pink-600 transition focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 flex items-center justify-center animate-pulseBtn",title:"Add New Product","aria-label":"Add New Product",tabIndex:0,children:[n.jsx(x2,{className:"w-12 h-12 font-bold"}),n.jsx("span",{className:"sr-only",children:"Add New Product"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 max-w-full overflow-x-auto",children:[n.jsx("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:n.jsxs("div",{className:"relative w-full sm:w-1/3",children:[n.jsx("input",{type:"text",value:c,onChange:f=>u(f.target.value),placeholder:"Search by product name...",className:"w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-search"})}),c&&n.jsx("button",{onClick:()=>u(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:n.jsx("i",{className:"bx bx-x"})})]})}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsx("div",{className:"block sm:hidden",children:o.map((f,g)=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-4 shadow-md hover:shadow-xl transition duration-300 animate-slide-in focus:ring-2 focus:ring-blue-300 outline-none",tabIndex:0,children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"font-medium text-gray-700",children:"SL:"}),n.jsx("span",{className:"text-gray-900",children:g+1})]}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Name:"}),n.jsx(he,{to:`/seller/edit-product/${f.id}`,className:"text-blue-900 font-medium hover:underline focus:underline cursor-pointer focus:outline-blue-400",children:f.name||"Unnamed Product"})]}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Price:"}),n.jsxs("span",{className:"text-gray-900",children:["₦",f.price||0]})]}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Verify:"}),n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${f.status==="pending"?"bg-orange-100 text-orange-800":f.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[f.status==="pending"&&n.jsx(_u,{className:"w-3 h-3"}),f.status==="approved"&&n.jsx(_u,{className:"w-3 h-3"}),f.status==="pending"?"Pending":f.status==="approved"?"Approved":"Not Approved"]})]}),n.jsx("div",{className:"flex justify-end mt-2",children:n.jsxs(he,{to:`/seller/edit-product/${f.id}`,className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"View/Edit Product",children:[n.jsx(Ju,{className:"w-4 h-4"})," Edit"]})})]},f.id))}),n.jsx("div",{className:"hidden sm:block w-full overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border-collapse text-sm md:text-base",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"SL"}),n.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"Name"}),n.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"Price"}),n.jsxs("th",{className:"p-2 text-left text-gray-700 font-semibold flex items-center gap-1",children:["Verify",n.jsxs("span",{className:"group relative cursor-pointer",children:[n.jsx(_u,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-500 transition"}),n.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-40 bg-gray-800 text-white text-xs rounded p-2 opacity-0 group-hover:opacity-100 pointer-events-none z-10 transition-opacity duration-200 shadow-lg",children:"Status: Pending = Awaiting approval, Approved = Live, Not Approved = Rejected"})]})]}),n.jsx("th",{className:"p-2 text-left text-gray-700 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:o.map((f,g)=>n.jsxs("tr",{className:`border-t transition duration-200 animate-slide-in outline-none ${g%2===0?"bg-white":"bg-blue-50"}`,tabIndex:0,children:[n.jsx("td",{className:"p-2 text-gray-900",children:g+1}),n.jsx("td",{className:"p-2 text-blue-900 font-medium truncate max-w-xs hover:underline focus:underline cursor-pointer",title:f.name||"Unnamed Product",children:n.jsx(he,{to:`/seller/edit-product/${f.id}`,className:"focus:outline-blue-400",children:f.name||"Unnamed Product"})}),n.jsxs("td",{className:"p-2 text-gray-900",children:["₦",f.price||0]}),n.jsx("td",{className:"p-2",children:n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${f.status==="pending"?"bg-orange-100 text-orange-800":f.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[f.status==="pending"&&n.jsx(_u,{className:"w-3 h-3"}),f.status==="approved"&&n.jsx(_u,{className:"w-3 h-3"}),f.status==="pending"?"Pending":f.status==="approved"?"Approved":"Not Approved"]})}),n.jsx("td",{className:"p-2",children:n.jsxs(he,{to:`/seller/edit-product/${f.id}`,className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"View/Edit Product",children:[n.jsx(Ju,{className:"w-4 h-4"})," Edit"]})})]},f.id))})]})})]}),o.length===0&&n.jsxs("div",{className:"flex flex-col items-center justify-center mt-10 mb-10 animate-slide-in",children:[n.jsx("img",{src:"/src/assets/icons/empty-cart.svg",alt:"No products",className:"w-32 h-32 mb-6 opacity-80"}),n.jsx("p",{className:"text-gray-700 text-center text-xl font-semibold mb-4",children:"No products found"}),n.jsxs(he,{to:"/products-upload",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center gap-2 shadow-lg focus:outline-blue-400 focus:ring-2 focus:ring-blue-300",children:[n.jsx(qf,{className:"w-5 h-5"})," Add Your First Product"]})]})]})]}),n.jsx("style",{children:`
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(16px); }
          to { opacity: 1; transform: none; }
        }
        .animate-fade-in {
          animation: fade-in 0.7s cubic-bezier(0.4,0,0.2,1);
        }
        @keyframes slide-in {
          from { opacity: 0; transform: translateY(32px); }
          to { opacity: 1; transform: none; }
        }
        .animate-slide-in {
          animation: slide-in 0.7s cubic-bezier(0.4,0,0.2,1);
        }
        @keyframes pulseBtn {
          0%, 100% { box-shadow: 0 0 0 0 rgba(124,58,237,0.4), 0 8px 32px 0 rgba(30,58,138,0.18); }
          50% { box-shadow: 0 0 0 12px rgba(124,58,237,0.15), 0 8px 32px 0 rgba(30,58,138,0.18); }
        }
        .animate-pulseBtn {
          animation: pulseBtn 1.2s infinite;
        }
      `})]})}function Foe(){const r=us(),[e,t]=E.useState({fullName:"",country:"Nigeria",idNumber:"",bankName:"",bankCode:"",accountNumber:"",iban:"",email:ve.currentUser?.email||""}),[s,a]=E.useState([]),[i,o]=E.useState({}),[l,c]=E.useState(!0),[u,h]=E.useState(""),[f,g]=E.useState(!1),[x,y]=E.useState(1),b=()=>{const k={};return e.fullName.trim()||(k.fullName="Full name is required."),e.country==="Nigeria"?(e.bankCode||(k.bankCode="Select a bank."),e.accountNumber.match(/^\d{10}$/)||(k.accountNumber="Enter a valid 10-digit account number.")):(e.idNumber.trim()||(k.idNumber="Enter a valid ID number."),e.iban.match(/^[A-Z]{2}\d{2}[A-Z0-9]{1,30}$/)||(k.iban="Enter a valid IBAN."),e.email.match(/\S+@\S+\.\S+/)||(k.email="Enter a valid email."),e.bankName.trim()||(k.bankName="Bank name is required.")),k};E.useEffect(()=>{(async()=>{try{if(!ve.currentUser){h("Please log in to onboard."),r("/login");return}const A=Ne(J,"users",ve.currentUser.uid),R=await it(A);if(R.exists()&&R.data().isOnboarded){console.log(`User ${ve.currentUser.uid} already onboarded`),g(!0);return}if(e.country==="Nigeria"){const _=await ss.get("https://foremade-backend.onrender.com/fetch-banks");a(_.data)}}catch(A){console.error(`Initialization error for ${ve.currentUser.uid}:`,A),h("Initialization error: "+A.message)}finally{c(!1)}})()},[e.country,r]);const v=k=>{const{name:A,value:R}=k.target;t(_=>({..._,[A]:R})),o(_=>({..._,[A]:""})),A==="fullName"&&R.trim()&&x<2&&y(2),(e.country==="Nigeria"&&A==="bankCode"&&R&&e.accountNumber||e.country==="United Kingdom"&&A==="idNumber"&&R)&&y(3)},N=async k=>{k.preventDefault(),o({}),c(!0);const A=b();if(Object.keys(A).length>0){o(A),c(!1);return}try{const R={userId:ve.currentUser.uid,country:e.country,fullName:e.fullName,email:e.email,bankCode:e.country==="Nigeria"?e.bankCode:void 0,accountNumber:e.country==="Nigeria"?e.accountNumber:void 0,iban:e.country==="United Kingdom"?e.iban:void 0,bankName:e.country==="United Kingdom"?e.bankName:void 0,idNumber:e.country==="United Kingdom"?e.idNumber:void 0};console.log(`Submitting onboarding for ${ve.currentUser.uid}:`,R);const _=await ss.post("https://foremade-backend.onrender.com/onboard-seller",R);if(_.data.error)throw new Error(_.data.error);if(e.country==="United Kingdom"){window.location.href=_.data.redirectUrl;return}const I=new Date().toISOString(),P={fullName:e.fullName,country:e.country,idNumber:"",bankName:s.find(T=>T.code===e.bankCode)?.name||"",bankCode:e.country==="Nigeria"?e.bankCode:"",accountNumber:e.country==="Nigeria"?e.accountNumber:"",iban:"",email:"",paystackRecipientCode:_.data.recipientCode||"",createdAt:I,updatedAt:I};await Gt(Ne(J,"sellers",ve.currentUser.uid),P,{merge:!0}),await Gt(Ne(J,"users",ve.currentUser.uid),{role:"seller",isOnboarded:!0,updatedAt:I},{merge:!0}),console.log(`Onboarding successful for ${ve.currentUser.uid}, role set to seller`),alert("Onboarding successful!"),r("/smile")}catch(R){console.error(`Onboarding failed for ${ve.currentUser.uid}:`,R),h("Failed to onboard: "+(R.response?.data?.error||R.message))}finally{c(!1)}};return l?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-300 animate-pulse",children:[n.jsxs("svg",{className:"w-6 h-6 text-blue-500 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),n.jsx("span",{className:"text-lg",children:"Loading..."})]})})]}):u?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-xl shadow-lg max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Error"}),n.jsx("p",{className:"text-gray-600 mb-4",children:u}),n.jsx(he,{to:"/login",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Return to Login"})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[n.jsx("div",{className:"flex-1 h-1 bg-gray-200 dark:bg-gray-600 rounded-full",children:n.jsx("div",{className:"h-1 bg-blue-600 rounded-full transition-all duration-500",style:{width:`${x/3*100}%`}})}),n.jsx("div",{className:"flex space-x-4 ml-4",children:[1,2,3].map(k=>n.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium transition-all duration-300 ${x>=k?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:k},k))})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[n.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"})}),"Seller Onboarding"]}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2 text-sm",children:"Complete your profile to start selling on FOREMADE."})]}),n.jsxs("form",{onSubmit:N,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Full Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"mt-1 relative",children:[n.jsx("input",{type:"text",name:"fullName",value:e.fullName,onChange:v,className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.fullName?"border-red-500":""}`,disabled:l,placeholder:"e.g., John Doe","aria-label":"Full Name"}),n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:n.jsx("i",{className:"bx bx-user"})})]}),i.fullName&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.fullName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Country ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"country",value:e.country,onChange:v,className:"mt-1 w-full p-3 pr-10 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",disabled:l,"aria-label":"Country",children:[n.jsx("option",{value:"Nigeria",children:"Nigeria"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"})]})]}),e.country==="Nigeria"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Bank Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"bankCode",value:e.bankCode,onChange:v,className:`mt-1 w-full p-3 pr-10 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.bankCode?"border-red-500":""}`,disabled:l,"aria-label":"Bank Name",children:[n.jsx("option",{value:"",children:"Select a bank"}),s.map(k=>n.jsx("option",{value:k.code,children:k.name},k.code))]}),i.bankCode&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.bankCode})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Account Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"mt-1 relative",children:[n.jsx("input",{type:"text",name:"accountNumber",value:e.accountNumber,onChange:v,placeholder:"e.g., 0123456789",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.accountNumber?"border-red-500":""}`,disabled:l,"aria-label":"Account Number"}),n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:n.jsx("i",{className:"bx bx-bank"})})]}),i.accountNumber&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.accountNumber})]})]}),e.country==="United Kingdom"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["ID Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"mt-1 relative",children:[n.jsx("input",{type:"text",name:"idNumber",value:e.idNumber,onChange:v,placeholder:"e.g., AB123456C",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.idNumber?"border-red-500":""}`,disabled:l,"aria-label":"ID Number"}),n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:n.jsx("i",{className:"bx bx-id-card"})})]}),i.idNumber&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.idNumber})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Bank Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"mt-1 relative",children:[n.jsx("input",{type:"text",name:"bankName",value:e.bankName,onChange:v,placeholder:"e.g., Barclays",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.bankName?"border-red-500":""}`,disabled:l,"aria-label":"Bank Name"}),n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:n.jsx("i",{className:"bx bx-bank"})})]}),i.bankName&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.bankName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["IBAN ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"mt-1 relative",children:[n.jsx("input",{type:"text",name:"iban",value:e.iban,onChange:v,placeholder:"e.g., GB33BUKB20201555555555",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.iban?"border-red-500":""}`,disabled:l,"aria-label":"IBAN"}),n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:n.jsx("i",{className:"bx bx-credit-card"})})]}),i.iban&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.iban})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"mt-1 relative",children:[n.jsx("input",{type:"email",name:"email",value:e.email,onChange:v,placeholder:"e.g., seller@example.com",className:`w-full p-3 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${i.email?"border-red-500":""}`,disabled:l,"aria-label":"Email"}),n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:n.jsx("i",{className:"bx bx-envelope"})})]}),i.email&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.email})]})]}),n.jsx("button",{type:"submit",className:`w-full py-3 px-6 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl shadow-lg hover:from-blue-700 hover:to-blue-800 flex items-center justify-center gap-2 transition duration-300 ${l?"opacity-75 cursor-not-allowed":""}`,disabled:l,"aria-label":"Complete Onboarding",children:l?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"w-5 h-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),"Complete Onboarding"]})})]})]})}),f&&n.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-2xl w-full max-w-md mx-4 sm:mx-0 transform transition-all duration-500 ease-out animate-fadeInUp",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Already Onboarded"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You’re already set as a seller! Ready to manage your wallet?"}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>r("/sell"),className:"py-2 px-6 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200","aria-label":"Go to Dashboard",children:"Yes"}),n.jsx("button",{onClick:()=>g(!1),className:"py-2 px-6 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition duration-200","aria-label":"Close Modal",children:"No"})]})]})})]})}function H2(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Cd=H2();function dL(r){Cd=r}var Sf={exec:()=>null};function Ls(r,e=""){let t=typeof r=="string"?r:r.source;const s={replace:(a,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Ua.caret,"$1"),t=t.replace(a,o),s},getRegex:()=>new RegExp(t,e)};return s}var Ua={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},Uoe=/^(?:[ \t]*(?:\n|$))+/,zoe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Voe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Lg=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Boe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,$2=/(?:[*+-]|\d{1,9}[.)])/,uL=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,hL=Ls(uL).replace(/bull/g,$2).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Hoe=Ls(uL).replace(/bull/g,$2).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),W2=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$oe=/^[^\n]+/,Y2=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Woe=Ls(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Y2).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Yoe=Ls(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,$2).getRegex(),oy="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",q2=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,qoe=Ls("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",q2).replace("tag",oy).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),mL=Ls(W2).replace("hr",Lg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",oy).getRegex(),Xoe=Ls(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",mL).getRegex(),X2={blockquote:Xoe,code:zoe,def:Woe,fences:Voe,heading:Boe,hr:Lg,html:qoe,lheading:hL,list:Yoe,newline:Uoe,paragraph:mL,table:Sf,text:$oe},BI=Ls("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Lg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",oy).getRegex(),Goe={...X2,lheading:Hoe,table:BI,paragraph:Ls(W2).replace("hr",Lg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",BI).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",oy).getRegex()},Koe={...X2,html:Ls(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",q2).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Sf,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ls(W2).replace("hr",Lg).replace("heading",` *#{1,6} *[^
]`).replace("lheading",hL).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Qoe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Zoe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,fL=/^( {2,}|\\)\n(?!\s*$)/,Joe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ly=/[\p{P}\p{S}]/u,G2=/[\s\p{P}\p{S}]/u,gL=/[^\s\p{P}\p{S}]/u,ele=Ls(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,G2).getRegex(),pL=/(?!~)[\p{P}\p{S}]/u,tle=/(?!~)[\s\p{P}\p{S}]/u,sle=/(?:[^\s\p{P}\p{S}]|~)/u,rle=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,xL=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,ale=Ls(xL,"u").replace(/punct/g,ly).getRegex(),nle=Ls(xL,"u").replace(/punct/g,pL).getRegex(),bL="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",ile=Ls(bL,"gu").replace(/notPunctSpace/g,gL).replace(/punctSpace/g,G2).replace(/punct/g,ly).getRegex(),ole=Ls(bL,"gu").replace(/notPunctSpace/g,sle).replace(/punctSpace/g,tle).replace(/punct/g,pL).getRegex(),lle=Ls("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,gL).replace(/punctSpace/g,G2).replace(/punct/g,ly).getRegex(),cle=Ls(/\\(punct)/,"gu").replace(/punct/g,ly).getRegex(),dle=Ls(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ule=Ls(q2).replace("(?:-->|$)","-->").getRegex(),hle=Ls("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ule).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),nb=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,mle=Ls(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",nb).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),yL=Ls(/^!?\[(label)\]\[(ref)\]/).replace("label",nb).replace("ref",Y2).getRegex(),vL=Ls(/^!?\[(ref)\](?:\[\])?/).replace("ref",Y2).getRegex(),fle=Ls("reflink|nolink(?!\\()","g").replace("reflink",yL).replace("nolink",vL).getRegex(),K2={_backpedal:Sf,anyPunctuation:cle,autolink:dle,blockSkip:rle,br:fL,code:Zoe,del:Sf,emStrongLDelim:ale,emStrongRDelimAst:ile,emStrongRDelimUnd:lle,escape:Qoe,link:mle,nolink:vL,punctuation:ele,reflink:yL,reflinkSearch:fle,tag:hle,text:Joe,url:Sf},gle={...K2,link:Ls(/^!?\[(label)\]\((.*?)\)/).replace("label",nb).getRegex(),reflink:Ls(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",nb).getRegex()},KN={...K2,emStrongRDelimAst:ole,emStrongLDelim:nle,url:Ls(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ple={...KN,br:Ls(fL).replace("{2,}","*").getRegex(),text:Ls(KN.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Fx={normal:X2,gfm:Goe,pedantic:Koe},Hm={normal:K2,gfm:KN,breaks:ple,pedantic:gle},xle={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},HI=r=>xle[r];function Si(r,e){if(e){if(Ua.escapeTest.test(r))return r.replace(Ua.escapeReplace,HI)}else if(Ua.escapeTestNoEncode.test(r))return r.replace(Ua.escapeReplaceNoEncode,HI);return r}function $I(r){try{r=encodeURI(r).replace(Ua.percentDecode,"%")}catch{return null}return r}function WI(r,e){const t=r.replace(Ua.findPipe,(i,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),s=t.split(Ua.splitPipe);let a=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;a<s.length;a++)s[a]=s[a].trim().replace(Ua.slashPipe,"|");return s}function $m(r,e,t){const s=r.length;if(s===0)return"";let a=0;for(;a<s&&r.charAt(s-a-1)===e;)a++;return r.slice(0,s-a)}function ble(r,e){if(r.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<r.length;s++)if(r[s]==="\\")s++;else if(r[s]===e[0])t++;else if(r[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function YI(r,e,t,s,a){const i=e.href,o=e.title||null,l=r[1].replace(a.other.outputLinkReplace,"$1");s.state.inLink=!0;const c={type:r[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:o,text:l,tokens:s.inlineTokens(l)};return s.state.inLink=!1,c}function yle(r,e,t){const s=r.match(t.other.indentCodeCompensation);if(s===null)return e;const a=s[1];return e.split(`
`).map(i=>{const o=i.match(t.other.beginningSpace);if(o===null)return i;const[l]=o;return l.length>=a.length?i.slice(a.length):i}).join(`
`)}var ib=class{options;rules;lexer;constructor(r){this.options=r||Cd}space(r){const e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){const e=this.rules.block.code.exec(r);if(e){const t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:$m(t,`
`)}}}fences(r){const e=this.rules.block.fences.exec(r);if(e){const t=e[0],s=yle(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(r){const e=this.rules.block.heading.exec(r);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){const s=$m(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(r){const e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:$m(e[0],`
`)}}blockquote(r){const e=this.rules.block.blockquote.exec(r);if(e){let t=$m(e[0],`
`).split(`
`),s="",a="";const i=[];for(;t.length>0;){let o=!1;const l=[];let c;for(c=0;c<t.length;c++)if(this.rules.other.blockquoteStart.test(t[c]))l.push(t[c]),o=!0;else if(!o)l.push(t[c]);else break;t=t.slice(c);const u=l.join(`
`),h=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,a=a?`${a}
${h}`:h;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,i,!0),this.lexer.state.top=f,t.length===0)break;const g=i.at(-1);if(g?.type==="code")break;if(g?.type==="blockquote"){const x=g,y=x.raw+`
`+t.join(`
`),b=this.blockquote(y);i[i.length-1]=b,s=s.substring(0,s.length-x.raw.length)+b.raw,a=a.substring(0,a.length-x.text.length)+b.text;break}else if(g?.type==="list"){const x=g,y=x.raw+`
`+t.join(`
`),b=this.list(y);i[i.length-1]=b,s=s.substring(0,s.length-g.raw.length)+b.raw,a=a.substring(0,a.length-x.raw.length)+b.raw,t=y.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:i,text:a}}}list(r){let e=this.rules.block.list.exec(r);if(e){let t=e[1].trim();const s=t.length>1,a={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");const i=this.rules.other.listItemRegex(t);let o=!1;for(;r;){let c=!1,u="",h="";if(!(e=i.exec(r))||this.rules.block.hr.test(r))break;u=e[0],r=r.substring(u.length);let f=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,N=>" ".repeat(3*N.length)),g=r.split(`
`,1)[0],x=!f.trim(),y=0;if(this.options.pedantic?(y=2,h=f.trimStart()):x?y=e[1].length+1:(y=e[2].search(this.rules.other.nonSpaceChar),y=y>4?1:y,h=f.slice(y),y+=e[1].length),x&&this.rules.other.blankLine.test(g)&&(u+=g+`
`,r=r.substring(g.length+1),c=!0),!c){const N=this.rules.other.nextBulletRegex(y),k=this.rules.other.hrRegex(y),A=this.rules.other.fencesBeginRegex(y),R=this.rules.other.headingBeginRegex(y),_=this.rules.other.htmlBeginRegex(y);for(;r;){const I=r.split(`
`,1)[0];let P;if(g=I,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),P=g):P=g.replace(this.rules.other.tabCharGlobal,"    "),A.test(g)||R.test(g)||_.test(g)||N.test(g)||k.test(g))break;if(P.search(this.rules.other.nonSpaceChar)>=y||!g.trim())h+=`
`+P.slice(y);else{if(x||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||A.test(f)||R.test(f)||k.test(f))break;h+=`
`+g}!x&&!g.trim()&&(x=!0),u+=I+`
`,r=r.substring(I.length+1),f=P.slice(y)}}a.loose||(o?a.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let b=null,v;this.options.gfm&&(b=this.rules.other.listIsTask.exec(h),b&&(v=b[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:u,task:!!b,checked:v,loose:!1,text:h,tokens:[]}),a.raw+=u}const l=a.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let c=0;c<a.items.length;c++)if(this.lexer.state.top=!1,a.items[c].tokens=this.lexer.blockTokens(a.items[c].text,[]),!a.loose){const u=a.items[c].tokens.filter(f=>f.type==="space"),h=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));a.loose=h}if(a.loose)for(let c=0;c<a.items.length;c++)a.items[c].loose=!0;return a}}html(r){const e=this.rules.block.html.exec(r);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(r){const e=this.rules.block.def.exec(r);if(e){const t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:a}}}table(r){const e=this.rules.block.table.exec(r);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const t=WI(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===s.length){for(const o of s)this.rules.other.tableAlignRight.test(o)?i.align.push("right"):this.rules.other.tableAlignCenter.test(o)?i.align.push("center"):this.rules.other.tableAlignLeft.test(o)?i.align.push("left"):i.align.push(null);for(let o=0;o<t.length;o++)i.header.push({text:t[o],tokens:this.lexer.inline(t[o]),header:!0,align:i.align[o]});for(const o of a)i.rows.push(WI(o,i.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[c]})));return i}}lheading(r){const e=this.rules.block.lheading.exec(r);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(r){const e=this.rules.block.paragraph.exec(r);if(e){const t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(r){const e=this.rules.block.text.exec(r);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(r){const e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(r){const e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(r){const e=this.rules.inline.link.exec(r);if(e){const t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;const i=$m(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{const i=ble(e[2],"()");if(i===-2)return;if(i>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let s=e[2],a="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(s);i&&(s=i[1],a=i[3])}else a=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),YI(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(r,e){let t;if((t=this.rules.inline.reflink.exec(r))||(t=this.rules.inline.nolink.exec(r))){const s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),a=e[s.toLowerCase()];if(!a){const i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return YI(t,a,t[0],this.lexer,this.rules)}}emStrong(r,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(r);if(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const i=[...s[0]].length-1;let o,l,c=i,u=0;const h=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*r.length+i);(s=h.exec(e))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(l=[...o].length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&i%3&&!((i+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const f=[...s[0]][0].length,g=r.slice(0,i+s.index+f+l);if(Math.min(i,l)%2){const y=g.slice(1,-1);return{type:"em",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}const x=g.slice(2,-2);return{type:"strong",raw:g,text:x,tokens:this.lexer.inlineTokens(x)}}}}codespan(r){const e=this.rules.inline.code.exec(r);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(t),a=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&a&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(r){const e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){const e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(r){const e=this.rules.inline.autolink.exec(r);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(r){let e;if(e=this.rules.inline.url.exec(r)){let t,s;if(e[2]==="@")t=e[0],s="mailto:"+t;else{let a;do a=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(a!==e[0]);t=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(r){const e=this.rules.inline.text.exec(r);if(e){const t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},ko=class QN{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Cd,this.options.tokenizer=this.options.tokenizer||new ib,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:Ua,block:Fx.normal,inline:Hm.normal};this.options.pedantic?(t.block=Fx.pedantic,t.inline=Hm.pedantic):this.options.gfm&&(t.block=Fx.gfm,this.options.breaks?t.inline=Hm.breaks:t.inline=Hm.gfm),this.tokenizer.rules=t}static get rules(){return{block:Fx,inline:Hm}}static lex(e,t){return new QN(t).lex(e)}static lexInline(e,t){return new QN(t).inlineTokens(e)}lex(e){e=e.replace(Ua.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){for(this.options.pedantic&&(e=e.replace(Ua.tabCharGlobal,"    ").replace(Ua.spaceLine,""));e;){let a;if(this.options.extensions?.block?.some(o=>(a=o.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const o=t.at(-1);a.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.at(-1).src=o.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let i=e;if(this.options.extensions?.startBlock){let o=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(i=e.substring(0,o+1))}if(this.state.top&&(a=this.tokenizer.paragraph(i))){const o=t.at(-1);s&&o?.type==="paragraph"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(a),s=i.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const o=t.at(-1);o?.type==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(a);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s=e,a=null;if(this.tokens.links){const l=Object.keys(this.tokens.links);if(l.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)l.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);const u=t.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,s,o)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}let c=e;if(this.options.extensions?.startInline){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(c=e.substring(0,u+1))}if(l=this.tokenizer.inlineText(c)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),i=!0;const u=t.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}},ob=class{options;parser;constructor(r){this.options=r||Cd}space(r){return""}code({text:r,lang:e,escaped:t}){const s=(e||"").match(Ua.notSpaceStart)?.[0],a=r.replace(Ua.endingNewline,"")+`
`;return s?'<pre><code class="language-'+Si(s)+'">'+(t?a:Si(a,!0))+`</code></pre>
`:"<pre><code>"+(t?a:Si(a,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}heading({tokens:r,depth:e}){return`<h${e}>${this.parser.parseInline(r)}</h${e}>
`}hr(r){return`<hr>
`}list(r){const e=r.ordered,t=r.start;let s="";for(let o=0;o<r.items.length;o++){const l=r.items[o];s+=this.listitem(l)}const a=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+a+i+`>
`+s+"</"+a+`>
`}listitem(r){let e="";if(r.task){const t=this.checkbox({checked:!!r.checked});r.loose?r.tokens[0]?.type==="paragraph"?(r.tokens[0].text=t+" "+r.tokens[0].text,r.tokens[0].tokens&&r.tokens[0].tokens.length>0&&r.tokens[0].tokens[0].type==="text"&&(r.tokens[0].tokens[0].text=t+" "+Si(r.tokens[0].tokens[0].text),r.tokens[0].tokens[0].escaped=!0)):r.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(r.tokens,!!r.loose),`<li>${e}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let e="",t="";for(let a=0;a<r.header.length;a++)t+=this.tablecell(r.header[a]);e+=this.tablerow({text:t});let s="";for(let a=0;a<r.rows.length;a++){const i=r.rows[a];t="";for(let o=0;o<i.length;o++)t+=this.tablecell(i[o]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){const e=this.parser.parseInline(r.tokens),t=r.header?"th":"td";return(r.align?`<${t} align="${r.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${Si(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:e,tokens:t}){const s=this.parser.parseInline(t),a=$I(r);if(a===null)return s;r=a;let i='<a href="'+r+'"';return e&&(i+=' title="'+Si(e)+'"'),i+=">"+s+"</a>",i}image({href:r,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));const a=$I(r);if(a===null)return Si(t);r=a;let i=`<img src="${r}" alt="${t}"`;return e&&(i+=` title="${Si(e)}"`),i+=">",i}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:Si(r.text)}},Q2=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}},So=class ZN{options;renderer;textRenderer;constructor(e){this.options=e||Cd,this.options.renderer=this.options.renderer||new ob,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Q2}static parse(e,t){return new ZN(t).parse(e)}static parseInline(e,t){return new ZN(t).parseInline(e)}parse(e,t=!0){let s="";for(let a=0;a<e.length;a++){const i=e[a];if(this.options.extensions?.renderers?.[i.type]){const l=i,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){s+=c||"";continue}}const o=i;switch(o.type){case"space":{s+=this.renderer.space(o);continue}case"hr":{s+=this.renderer.hr(o);continue}case"heading":{s+=this.renderer.heading(o);continue}case"code":{s+=this.renderer.code(o);continue}case"table":{s+=this.renderer.table(o);continue}case"blockquote":{s+=this.renderer.blockquote(o);continue}case"list":{s+=this.renderer.list(o);continue}case"html":{s+=this.renderer.html(o);continue}case"paragraph":{s+=this.renderer.paragraph(o);continue}case"text":{let l=o,c=this.renderer.text(l);for(;a+1<e.length&&e[a+1].type==="text";)l=e[++a],c+=`
`+this.renderer.text(l);t?s+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):s+=c;continue}default:{const l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}parseInline(e,t=this.renderer){let s="";for(let a=0;a<e.length;a++){const i=e[a];if(this.options.extensions?.renderers?.[i.type]){const l=this.options.extensions.renderers[i.type].call({parser:this},i);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=l||"";continue}}const o=i;switch(o.type){case"escape":{s+=t.text(o);break}case"html":{s+=t.html(o);break}case"link":{s+=t.link(o);break}case"image":{s+=t.image(o);break}case"strong":{s+=t.strong(o);break}case"em":{s+=t.em(o);break}case"codespan":{s+=t.codespan(o);break}case"br":{s+=t.br(o);break}case"del":{s+=t.del(o);break}case"text":{s+=t.text(o);break}default:{const l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}},f0=class{options;block;constructor(r){this.options=r||Cd}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}provideLexer(){return this.block?ko.lex:ko.lexInline}provideParser(){return this.block?So.parse:So.parseInline}},vle=class{defaults=H2();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=So;Renderer=ob;TextRenderer=Q2;Lexer=ko;Tokenizer=ib;Hooks=f0;constructor(...r){this.use(...r)}walkTokens(r,e){let t=[];for(const s of r)switch(t=t.concat(e.call(this,s)),s.type){case"table":{const a=s;for(const i of a.header)t=t.concat(this.walkTokens(i.tokens,e));for(const i of a.rows)for(const o of i)t=t.concat(this.walkTokens(o.tokens,e));break}case"list":{const a=s;t=t.concat(this.walkTokens(a.items,e));break}default:{const a=s;this.defaults.extensions?.childTokens?.[a.type]?this.defaults.extensions.childTokens[a.type].forEach(i=>{const o=a[i].flat(1/0);t=t.concat(this.walkTokens(o,e))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,e)))}}return t}use(...r){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{const s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const i=e.renderers[a.name];i?e.renderers[a.name]=function(...o){let l=a.renderer.apply(this,o);return l===!1&&(l=i.apply(this,o)),l}:e.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=e[a.level];i?i.unshift(a.tokenizer):e[a.level]=[a.tokenizer],a.start&&(a.level==="block"?e.startBlock?e.startBlock.push(a.start):e.startBlock=[a.start]:a.level==="inline"&&(e.startInline?e.startInline.push(a.start):e.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(e.childTokens[a.name]=a.childTokens)}),s.extensions=e),t.renderer){const a=this.defaults.renderer||new ob(this.defaults);for(const i in t.renderer){if(!(i in a))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const o=i,l=t.renderer[o],c=a[o];a[o]=(...u)=>{let h=l.apply(a,u);return h===!1&&(h=c.apply(a,u)),h||""}}s.renderer=a}if(t.tokenizer){const a=this.defaults.tokenizer||new ib(this.defaults);for(const i in t.tokenizer){if(!(i in a))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const o=i,l=t.tokenizer[o],c=a[o];a[o]=(...u)=>{let h=l.apply(a,u);return h===!1&&(h=c.apply(a,u)),h}}s.tokenizer=a}if(t.hooks){const a=this.defaults.hooks||new f0;for(const i in t.hooks){if(!(i in a))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const o=i,l=t.hooks[o],c=a[o];f0.passThroughHooks.has(i)?a[o]=u=>{if(this.defaults.async)return Promise.resolve(l.call(a,u)).then(f=>c.call(a,f));const h=l.call(a,u);return c.call(a,h)}:a[o]=(...u)=>{let h=l.apply(a,u);return h===!1&&(h=c.apply(a,u)),h}}s.hooks=a}if(t.walkTokens){const a=this.defaults.walkTokens,i=t.walkTokens;s.walkTokens=function(o){let l=[];return l.push(i.call(this,o)),a&&(l=l.concat(a.call(this,o))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,e){return ko.lex(r,e??this.defaults)}parser(r,e){return So.parse(r,e??this.defaults)}parseMarkdown(r){return(t,s)=>{const a={...s},i={...this.defaults,...a},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&a.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=r);const l=i.hooks?i.hooks.provideLexer():r?ko.lex:ko.lexInline,c=i.hooks?i.hooks.provideParser():r?So.parse:So.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(u=>l(u,i)).then(u=>i.hooks?i.hooks.processAllTokens(u):u).then(u=>i.walkTokens?Promise.all(this.walkTokens(u,i.walkTokens)).then(()=>u):u).then(u=>c(u,i)).then(u=>i.hooks?i.hooks.postprocess(u):u).catch(o);try{i.hooks&&(t=i.hooks.preprocess(t));let u=l(t,i);i.hooks&&(u=i.hooks.processAllTokens(u)),i.walkTokens&&this.walkTokens(u,i.walkTokens);let h=c(u,i);return i.hooks&&(h=i.hooks.postprocess(h)),h}catch(u){return o(u)}}}onError(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const s="<p>An error occurred:</p><pre>"+Si(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},bd=new vle;function Os(r,e){return bd.parse(r,e)}Os.options=Os.setOptions=function(r){return bd.setOptions(r),Os.defaults=bd.defaults,dL(Os.defaults),Os};Os.getDefaults=H2;Os.defaults=Cd;Os.use=function(...r){return bd.use(...r),Os.defaults=bd.defaults,dL(Os.defaults),Os};Os.walkTokens=function(r,e){return bd.walkTokens(r,e)};Os.parseInline=bd.parseInline;Os.Parser=So;Os.parser=So.parse;Os.Renderer=ob;Os.TextRenderer=Q2;Os.Lexer=ko;Os.lexer=ko.lex;Os.Tokenizer=ib;Os.Hooks=f0;Os.parse=Os;Os.options;Os.setOptions;Os.use;Os.walkTokens;Os.parseInline;So.parse;ko.lex;function cy({locationData:r,setLocationData:e,errors:t,saveLocation:s}){const a=o=>{const{name:l,value:c}=o.target;e(u=>({...u,[l]:c}))},i=async()=>{if(s){const o=ve.currentUser?.uid;if(o)try{await Gt(Ne(J,"sellerLocations",o),r,{merge:!0}),console.log("Location saved to Firestore:",r)}catch(l){console.error("Error saving location:",l)}}};return cs.useEffect(()=>{s&&Object.values(r).some(o=>o)&&i()},[r,s]),n.jsxs("div",{className:"mt-6",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-map text-blue-500"}),"Seller Location"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"country",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${r.country?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:["Country ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"country",name:"country",value:r.country||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${t.country?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),t.country&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),t.country]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"state",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${r.state?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:["State ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"state",name:"state",value:r.state||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${t.state?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),t.state&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),t.state]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{htmlFor:"city",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${r.city?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:"City"}),n.jsx("input",{type:"text",id:"city",name:"city",value:r.city||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${t.city?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),t.city&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),t.city]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{htmlFor:"address",className:`block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 ${r.address?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""} transition-all duration-300 transform origin-left pointer-events-none absolute left-3 top-3`,children:"Address"}),n.jsx("input",{type:"text",id:"address",name:"address",value:r.address||"",onChange:a,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${t.address?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),t.address&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),t.address]})]})]})]})}cy.propTypes={locationData:Jt.shape({country:Jt.string,state:Jt.string,city:Jt.string,address:Jt.string}).isRequired,setLocationData:Jt.func.isRequired,errors:Jt.object.isRequired,saveLocation:Jt.func};cy.defaultProps={saveLocation:null};function Z2({isOpen:r,onClose:e,message:t,icon:s,type:a,showYesNoButtons:i,onYes:o,onNo:l}){return r?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md relative shadow-lg transform transition-all duration-300 animate-slide-in",children:[n.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300","aria-label":"Close popup",children:n.jsx("i",{className:"bx bx-x text-2xl"})}),n.jsxs("div",{className:"flex flex-col items-center text-center",children:[n.jsx("i",{className:`bx ${s} text-5xl ${a==="success"?"text-green-600":"text-blue-600"} mb-4`}),n.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:t}),a==="success"&&n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Your product is awaiting admin approval before going live. This would take around 24 hours."}),n.jsx("div",{className:"mt-6 flex gap-4",children:i?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200",children:"Yes"}),n.jsx("button",{onClick:l,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-200",children:"No"})]}):n.jsx("button",{onClick:e,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200",children:"Close"})})]})]})}):null}Z2.propTypes={isOpen:Jt.bool.isRequired,onClose:Jt.func.isRequired,message:Jt.string,icon:Jt.string,type:Jt.oneOf(["success","question"]),showYesNoButtons:Jt.bool,onYes:Jt.func,onNo:Jt.func};Z2.defaultProps={message:"Action completed!",icon:"bx-check-circle",type:"success",showYesNoButtons:!1,onYes:()=>{},onNo:()=>{}};ss.defaults.timeout=8e4;function wle({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function Nle(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function jle(){const r=us(),{alerts:e,addAlert:t,removeAlert:s}=Nle(),[a,i]=E.useState(()=>{const re=localStorage.getItem("sellerProductForm");return re?JSON.parse(re):{sellerName:"",name:"",description:"",price:"",stock:"",category:"",subcategory:"",subSubcategory:"",colors:[],sizes:[],condition:"New",productUrl:"",images:[],videos:[],tags:[],manualSize:""}}),[o,l]=E.useState(()=>{const re=localStorage.getItem("sellerLocationForm");return re?JSON.parse(re):{country:"",state:"",city:"",address:""}}),[c,u]=E.useState({}),[h,f]=E.useState(!0),[g,x]=E.useState(!1),[y,b]=E.useState(()=>{const re=localStorage.getItem("sellerProductImages");return re?JSON.parse(re):[]}),[v,N]=E.useState(()=>{const re=localStorage.getItem("sellerProductPreviews");return re?JSON.parse(re):[]}),[k,A]=E.useState(()=>{const re=localStorage.getItem("sellerProductVideos");return re?JSON.parse(re):[]}),[R,_]=E.useState(()=>{const re=localStorage.getItem("sellerProductVideoPreviews");return re?JSON.parse(re):[]}),[I,P]=E.useState({}),[T,D]=E.useState(!1),[L,F]=E.useState(0),[z,O]=E.useState(null),[V,Y]=E.useState(""),[H,$]=E.useState([]),[X,G]=E.useState(!1),[B,Q]=E.useState(!1),[ee,se]=E.useState(!1),[le,Ee]=E.useState(!1),[ue,Oe]=E.useState(!1),[Pe,Ie]=E.useState({productSize:"",buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),[ie,ze]=E.useState(!1),[Ve,ce]=E.useState([]),[ke,Qe]=E.useState({}),[me,$e]=E.useState({}),[tt,Ye]=E.useState([]),[De,Xe]=E.useState(null),[st,vt]=E.useState(null),[Mt,as]=E.useState(""),[wt,Ge]=E.useState(1),Pt=[{label:"Media",key:1},{label:"Details",key:2},{label:"Pricing",key:3},{label:"Location",key:4}],bt=re=>re===1?y.length>0:re===2?a.name&&a.description&&a.sellerName:re===3?a.price&&a.stock:re===4?o.country&&o.state:!1;E.useEffect(()=>{bt(1)&&wt<2&&Ge(2),bt(2)&&wt<3&&Ge(3),bt(3)&&wt<4&&Ge(4)},[y,a.name,a.description,a.sellerName,a.price,a.stock,o.country,o.state]);const qt=re=>{re<wt&&Ge(re)};console.log(ue);const Ct=E.useRef(null),Bt=E.useRef(null),Kt=E.useRef(null),Xt=E.useRef(null),Js=E.useRef(null),At=[{name:"Red",hex:"#ff0000"},{name:"Orange",hex:"#FFA500"},{name:"blue",hex:"#0000ff"},{name:"Green",hex:"#008000"},{name:"Brown",hex:"#8b4513"},{name:"Black",hex:"#000000"},{name:"White",hex:"#ffffff"},{name:"Purple",hex:"#800080"},{name:"Pink",hex:"#ffc1cc"},{name:"Gray",hex:"#808080"},{name:"Yellow",hex:"#FFFF00"},{name:"Gold",hex:"#ff9a1d"},{name:"Silver",hex:"#e2f2ec"}],Vt=["S","M","L","XL","XXL"],ar=["3","4","6","8","10","12","14","16","18","20"],Fs=['3"','5"','5.5"','6"','6.5"','7"','7.5"','8"','8.5"','9"','9.5"','10"','10.5"','11"','11.5"','12"','12.5"'],nr=["30ml","50ml","60ml","75ml","100ml"],Ss=["1 to 5kg","5 to 10kg ","10 to 20kg","20kg above"],Ts=["Verified","Original","Brand New","Authentic"],Us=8,Ps=1,Pr=10*1024*1024,vs=30;E.useEffect(()=>{localStorage.setItem("sellerLocationForm",JSON.stringify(o))},[o]),E.useEffect(()=>{const re=os(_e(J,"categories"),mt=>{const _t=mt.docs.map(yt=>({id:yt.id,...yt.data()}));ce(_t.map(yt=>yt.name)),a.category&&!_t.some(yt=>yt.name===a.category)&&(i(yt=>({...yt,category:"",subcategory:"",subSubcategory:"",sizes:[]})),t("Selected category was removed by admin.","error"))},mt=>{console.error("Error fetching categories:",mt),t("Failed to load categories.","error")}),Ue=os(_e(J,"customSubcategories"),mt=>{const _t={};mt.forEach(yt=>{_t[yt.id]=yt.data().subcategories||[]}),Qe(_t),a.category&&a.subcategory&&!_t[a.category]?.includes(a.subcategory)&&(i(yt=>({...yt,subcategory:"",subSubcategory:"",sizes:[]})),t("Selected subcategory was removed by admin.","error"))},mt=>{console.error("Error fetching subcategories:",mt),t("Failed to load subcategories.","error")}),qe=os(_e(J,"customSubSubcategories"),mt=>{const _t={};mt.forEach(yt=>{const _s=yt.id,Hn=yt.data();_t[_s]={},Object.entries(Hn).forEach(([Vo,Bo])=>{_t[_s][Vo]=Array.isArray(Bo)?Bo:[]})}),$e(_t),a.category&&a.subcategory&&a.subSubcategory&&!_t[a.category]?.[a.subcategory]?.includes(a.subSubcategory)&&(i(yt=>({...yt,subSubcategory:"",sizes:[]})),t("Selected sub-subcategory was removed by admin.","error"))},mt=>{console.error("Error fetching sub-subcategories:",mt),t("Failed to load sub-subcategories.","error")});return(async()=>{try{const mt=Ne(J,"feeConfigurations","categoryFees"),_t=await it(mt);_t.exists()?vt(_t.data()):t("No fee configurations found.","error")}catch(mt){console.error("Error fetching fee configurations:",mt),t("Failed to load fee configurations.","error")}})(),()=>{re(),Ue(),qe()}},[a.category,a.subcategory,a.subSubcategory]),E.useEffect(()=>{const re=ve.onAuthStateChanged(Ue=>{if(Ue){O(Ue);try{let qe=Ue.displayName||"";qe&&qe.startsWith("{")&&(qe=JSON.parse(qe).name||""),i(ot=>({...ot,sellerName:qe})),localStorage.setItem("sellerProductForm",JSON.stringify({...a,sellerName:qe}))}catch(qe){console.error("Error parsing displayName:",qe),t("Failed to load seller profile.","error")}}else t("Please log in to add products.","error"),r("/login")});return()=>re()},[r]),E.useEffect(()=>{if(!st||!a.category)return;const re=parseFloat(a.price);if(!re||isNaN(re)){Ie({productSize:"",buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0});return}const Ue=st[a.category]||{buyerProtectionRate:.08,handlingRate:.2},qe=re*Ue.buyerProtectionRate,ot=re*Ue.handlingRate,mt=re+qe+ot,_t=re;Ie({productSize:a.category,buyerProtectionFee:qe,handlingFee:ot,totalEstimatedPrice:mt,sellerEarnings:_t}),localStorage.setItem("sellerProductForm",JSON.stringify(a))},[a.price,a.category,st]),E.useEffect(()=>{localStorage.setItem("sellerProductForm",JSON.stringify(a)),localStorage.setItem("sellerProductImages",JSON.stringify(y)),localStorage.setItem("sellerProductPreviews",JSON.stringify(v)),localStorage.setItem("sellerProductVideos",JSON.stringify(k)),localStorage.setItem("sellerProductVideoPreviews",JSON.stringify(R))},[a,y,v,k,R]),E.useEffect(()=>{as(Os(a.description||"",{gfm:!0,breaks:!0}))},[a.description]),E.useEffect(()=>{(()=>{const Ue=`${a.name} ${a.description} ${a.subSubcategory}`.toLowerCase(),qe=[];Ue.includes("leather")&&qe.push("Leather"),(Ue.includes("shoe")||Ue.includes("footwear"))&&qe.push("Footwear"),(Ue.includes("phone")||Ue.includes("mobile"))&&qe.push("Smartphone"),Ue.includes("fashion")&&qe.push("Fashion"),Ue.includes("vintage")&&qe.push("Vintage"),Ue.includes("smart")&&qe.push("Smart"),Ye(qe.filter(ot=>!a.tags.includes(ot)))})()},[a.name,a.description,a.subSubcategory]),E.useEffect(()=>{const re=navigator.userAgent||navigator.vendor||window.opera;ze(/android|iphone|ipad|ipod|opera mini|mobile/i.test(re))},[]);const ws=re=>{const{name:Ue,value:qe}=re.target;i(ot=>({...ot,[Ue]:qe,...Ue==="category"?{subcategory:"",subSubcategory:"",sizes:[]}:{},...Ue==="subcategory"?{subSubcategory:"",sizes:[]}:{}})),P(ot=>({...ot,[Ue]:""}))},Ws=(re,Ue=!1)=>{const ot=Array.from(re).filter(yt=>yt.type.startsWith("image/")&&yt.size<=5*1024*1024);if(y.length+ot.length>Us){t(`You can upload a maximum of ${Us} images.`,"error");return}if(Ue&&ot.length>1){t("Please upload one image at a time.","error");return}b(yt=>[...yt,...ot]);const _t=ot.map(yt=>URL.createObjectURL(yt));N(yt=>[...yt,..._t]),P(yt=>({...yt,images:""})),Ct.current&&(Ct.current.value=""),Bt.current&&(Bt.current.value="")},be=re=>{const qe=Array.from(re.target.files).filter(mt=>mt.type.startsWith("video/")&&mt.size<=Pr);if(k.length+qe.length>Ps){t(`You can upload a maximum of ${Ps} video.`,"error");return}const ot=mt=>new Promise((_t,yt)=>{const _s=document.createElement("video");_s.preload="metadata",_s.onloadedmetadata=()=>{_s.duration>vs&&yt(new Error(`Video must be under ${vs} seconds.`)),(_s.audioTracks||[]).length>0?yt(new Error("Please upload a video without audio.")):_t(mt)},_s.onerror=()=>yt(new Error("Error loading video metadata.")),_s.src=URL.createObjectURL(mt)});Promise.all(qe.map(mt=>ot(mt))).then(mt=>{A(yt=>[...yt,...mt]);const _t=mt.map(yt=>URL.createObjectURL(yt));_(yt=>[...yt,..._t]),P(yt=>({...yt,videos:""}))}).catch(mt=>{t(mt.message,"error")}),Kt.current&&(Kt.current.value="")},de=re=>Ws(re.target.files),Se=re=>Ws(re.target.files,!0),Je=re=>{re.preventDefault(),re.stopPropagation(),Xt.current.classList.remove("border-blue-500"),Ws(re.dataTransfer.files)},te=re=>{re.preventDefault(),re.stopPropagation(),Xt.current.classList.add("border-blue-500")},Ae=re=>{re.preventDefault(),re.stopPropagation(),Xt.current.classList.remove("border-blue-500")},Fe=re=>{b(Ue=>Ue.filter((qe,ot)=>ot!==re)),N(Ue=>Ue.filter((qe,ot)=>ot!==re)),y.length<=1&&(Ct.current&&(Ct.current.value=""),Bt.current&&(Bt.current.value=""))},gt=re=>{A(Ue=>Ue.filter((qe,ot)=>ot!==re)),_(Ue=>Ue.filter((qe,ot)=>ot!==re)),k.length<=1&&Kt.current&&(Kt.current.value="")},pt=re=>{i(Ue=>{const qe=Ue.colors.includes(re)?Ue.colors.filter(ot=>ot!==re):[...Ue.colors,re];return{...Ue,colors:qe}}),Y(""),G(!1)},Ht=re=>{const Ue=re.target.value;if(Y(Ue),Ue.trim()===""){$([]),G(!1);return}const qe=At.filter(ot=>ot.name.toLowerCase().includes(Ue.toLowerCase()));$(qe),G(!0)},Qt=re=>{if(re.key==="Enter"&&V.trim()){const Ue=V.trim();if(Ue.length>20){t("Color name must be 20 characters or less.","error");return}i(qe=>{const ot=qe.colors.includes(Ue)?qe.colors:[...qe.colors,Ue];return{...qe,colors:ot}}),Y(""),$([]),G(!1)}},Rr=re=>{i(Ue=>({...Ue,colors:Ue.colors.filter(qe=>qe!==re)}))},Ba=re=>{i(Ue=>{const qe=Ue.sizes.includes(re)?Ue.sizes.filter(ot=>ot!==re):[...Ue.sizes,re];return{...Ue,sizes:qe}})},Ca=re=>{if(re.key==="Enter"&&re.target.value.trim()){const Ue=re.target.value.trim();i(qe=>{const ot=qe.sizes.includes(Ue)?qe.sizes:[...qe.sizes,Ue];return{...qe,sizes:ot}}),re.target.value=""}},Hr=re=>{i(Ue=>({...Ue,sizes:Ue.sizes.filter(qe=>qe!==re)}))},Ut=re=>{i(Ue=>{const qe=Ue.tags.includes(re)?Ue.tags.filter(ot=>ot!==re):[...Ue.tags,re];return{...Ue,tags:qe}})},wn=re=>{const Ue=Js.current;if(!Ue)return;const qe=Ue.selectionStart,ot=Ue.selectionEnd,mt=a.description.substring(qe,ot);let _t=a.description,yt=qe,_s=ot;re==="bold"?mt?(_t=_t.substring(0,qe)+`**${mt}**`+_t.substring(ot),yt=qe+2,_s=ot+2):(_t=_t.substring(0,qe)+"****"+_t.substring(qe),yt=qe+2,_s=qe+2):re==="italic"?mt?(_t=_t.substring(0,qe)+`*${mt}*`+_t.substring(ot),yt=qe+1,_s=ot+1):(_t=_t.substring(0,qe)+"**"+_t.substring(qe),yt=qe+1,_s=qe+1):re==="code"&&(mt?(_t=_t.substring(0,qe)+`\`${mt}\``+_t.substring(ot),yt=qe+1,_s=ot+1):(_t=_t.substring(0,qe)+"``"+_t.substring(qe),yt=qe+1,_s=qe+1)),i(Hn=>({...Hn,description:_t})),setTimeout(()=>{Ue.selectionStart=yt,Ue.selectionEnd=_s,Ue.focus()},0)},Gi=()=>{const re={};return a.sellerName.trim()||(re.sellerName="Please enter your full name."),a.name.trim()||(re.name="Product name is required."),(!a.price||isNaN(a.price)||a.price<=0)&&(re.price="Enter a valid price greater than 0."),(!a.stock||isNaN(a.stock)||a.stock<0)&&(re.stock="Enter a valid stock quantity (0 or more)."),(!a.category||!Ve.includes(a.category))&&(re.category="Select a valid category."),y.length===0&&(re.images="At least one image is required."),y.length>Us&&(re.images=`Maximum ${Us} images allowed.`),k.length>Ps&&(re.videos=`Maximum ${Ps} video allowed.`),a.colors.length===0&&(re.colors="Select at least one color."),a.category==="Clothing"&&a.subcategory&&a.sizes.length===0&&(re.sizes="Select or enter at least one size for clothing products."),a.category==="Footwear"&&a.subcategory&&a.sizes.length===0&&(re.sizes="Select or enter at least one size for footwear products."),a.category==="Perfumes"&&a.subcategory&&a.sizes.length===0&&(re.sizes="Select or enter at least one size for perfume products."),re},Ea=()=>({}),rn=async(re,Ue=!1)=>{const qe=new FormData;qe.append("file",re),qe.append("isVideo",Ue);try{const mt=await ss.post("https://foremade-backend.onrender.com/upload",qe,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4,onUploadProgress:_t=>{const yt=Math.round(_t.loaded*100/_t.total);F(yt)}});if(mt.status!==200||!mt.data.url)throw new Error(`Failed to upload ${Ue?"video":"image"} to Cloudinary.`);return mt.data.url}catch(ot){throw console.error(`${Ue?"Video":"Image"} upload error:`,{message:ot.message,code:ot.code,response:ot.response?.data}),new Error(ot.code==="ECONNABORTED"?"Request timed out. Please check your network or try again later.":ot.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network or server status.":ot.response?.data?.error||`Failed to upload ${Ue?"video":"image"}.`)}finally{F(0)}},zo=async re=>{if(re.preventDefault(),P({}),u({}),D(!0),!z){t("You must be logged in to add products.","error"),D(!1),r("/login");return}const Ue=Gi(),qe=Ea();if(Object.keys(Ue).length>0||Object.keys(qe).length>0){P(Ue),u(qe),D(!1),t("Please fix the form errors.","error");return}try{const ot=await Promise.all(y.map(_s=>rn(_s))),mt=k.length>0?await Promise.all(k.map(_s=>rn(_s,!0))):[];if(ot.length===0)throw new Error("At least one image URL is required.");const _t={sellerName:a.sellerName,name:a.name,description:a.description||"",price:parseFloat(a.price),stock:parseInt(a.stock,10),category:a.category.toLowerCase(),subcategory:a.subcategory||"",subSubcategory:a.subSubcategory||"",colors:a.colors,sizes:a.sizes,condition:a.condition||"New",productUrl:a.productUrl||"",imageUrls:ot,videoUrls:mt,tags:a.tags,sellerId:z.uid,seller:{name:a.sellerName,id:z.uid},createdAt:new Date().toISOString(),reviews:[],buyerProtectionFee:Pe.buyerProtectionFee,handlingFee:Pe.handlingFee,totalEstimatedPrice:Pe.totalEstimatedPrice,sellerEarnings:Pe.sellerEarnings,manualSize:a.manualSize||"",location:{country:o.country,state:o.state,city:o.city||"",address:o.address||""}},yt=await Za(_e(J,"products"),_t);console.log("Product uploaded with ID:",yt.id),x(!0),i({sellerName:"",name:"",description:"",price:"",stock:"",category:"",subcategory:"",subSubcategory:"",colors:[],sizes:[],condition:"New",productUrl:"",images:[],videos:[],tags:[],manualSize:""}),l({country:"",state:"",city:"",address:""}),b([]),N([]),A([]),_([]),localStorage.removeItem("sellerProductForm"),localStorage.removeItem("sellerLocationForm"),localStorage.removeItem("sellerProductImages"),localStorage.removeItem("sellerProductPreviews"),localStorage.removeItem("sellerProductVideos"),localStorage.removeItem("sellerProductVideoPreviews"),Ct.current&&(Ct.current.value=""),Bt.current&&(Bt.current.value=""),Kt.current&&(Kt.current.value=""),$([]),G(!1),Q(!1),se(!1),Ee(!1),Ie({productSize:"",buyerProtectionFee:0,handlingFee:0,totalEstimatedPrice:0,sellerEarnings:0}),Oe(!1)}catch(ot){console.error("Error uploading product:",{message:ot.message,stack:ot.stack,code:ot.code}),t(ot.message||"Failed to upload product.","error")}finally{D(!1)}},zs=()=>a.category==="Clothing"&&a.subcategory?a.subcategory==="Men"?Vt:ar:a.category==="Footwear"&&a.subcategory?Fs:a.category==="Perfumes"&&a.subSubcategory?.startsWith("Oil -")?nr:[];return z?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h2",{className:"text-xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-package text-blue-500"}),"Add a New Product"]}),n.jsx(he,{to:"/bulk-upload",className:"inline-block  px-1 py-1 bg-[#112d4e] text-white rounded hover:bg-blue-700 font-semibold shadow",children:"Bulk Upload"})]}),n.jsxs("form",{onSubmit:zo,className:"space-y-6 sm:space-y-8",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Images (up to ",Us,") ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Upload up to 8 images (JPEG, PNG, etc.)"})]}),n.jsxs("div",{ref:Xt,onDrop:Je,onDragOver:te,onDragLeave:Ae,className:`mt-1 w-full p-4 border-2 border-dashed rounded-lg flex flex-col items-center justify-center min-h-[200px] transition-colors ${I.images?"border-red-500":"border-gray-300 hover:border-blue-500 dark:border-gray-600"} ${T?"opacity-50":""}`,children:[v.length===0?n.jsxs("div",{className:"text-center",children:[n.jsx("i",{className:"bx bx-cloud-upload text-5xl text-gray-600 dark:text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:ie?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>Bt.current.click(),className:"text-blue-600 hover:underline",disabled:T,children:"Upload one image"})," or ",n.jsxs("button",{type:"button",onClick:()=>Ct.current.click(),className:"text-blue-600 hover:underline",disabled:T,children:["select up to ",Us," images"]})]}):n.jsxs(n.Fragment,{children:["Drag and drop up to ",Us," images or"," ",n.jsx("button",{type:"button",onClick:()=>Ct.current.click(),className:"text-blue-600 hover:underline",disabled:T,children:"select images"})]})}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"(JPEG, JPG, PNG, WEBP, GIF, max 5MB each)"})]}):n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 w-full",children:v.map((re,Ue)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:re,alt:`Preview ${Ue+1}`,className:"w-full h-48 object-cover rounded-md border border-gray-200 dark:border-gray-600 cursor-pointer shadow-sm",onClick:()=>Xe({type:"image",src:re})}),n.jsx("button",{type:"button",onClick:()=>Fe(Ue),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 shadow-sm",disabled:T,title:"Remove image",children:n.jsx("i",{className:"bx bx-x text-sm"})})]},Ue))}),n.jsx("input",{ref:Ct,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:de,className:"hidden",disabled:T,multiple:!0}),n.jsx("input",{ref:Bt,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:Se,className:"hidden",disabled:T})]}),I.images&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.images]}),ie&&v.length>0&&v.length<Us&&n.jsx("button",{type:"button",onClick:()=>Bt.current.click(),className:"mt-2 text-blue-600 hover:underline text-sm",disabled:T,children:"Add another image"}),L>0&&n.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${L}%`}})})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Product Video (1 video, Optional)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Upload one video (MP4, MKV, WEBM, max 10MB, 30s, no audio)"})]}),n.jsxs("div",{className:`mt-1 w-full p-4 border-2 border-dashed rounded-lg flex flex-col items-center justify-center min-h-[200px] transition-colors ${I.videos?"border-red-500":"border-gray-300 hover:border-blue-500 dark:border-gray-600"} ${T?"opacity-50":""}`,children:[R.length===0?n.jsxs("div",{className:"text-center",children:[n.jsx("i",{className:"bx bx-video-plus text-5xl text-gray-600 dark:text-gray-400"}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Drag and drop a video or"," ",n.jsx("button",{type:"button",onClick:()=>Kt.current.click(),className:"text-blue-600 hover:underline",disabled:T,children:"select a video"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"(MP4, MKV, WEBM, max 10MB, under 30 seconds, no audio)"})]}):n.jsx("div",{className:"w-full",children:R.map((re,Ue)=>n.jsxs("div",{className:"relative",children:[n.jsx("video",{src:re,controls:!0,className:"w-full h-[255px] object-cover rounded-md border border-gray-200 dark:border-gray-600 cursor-pointer shadow-sm md:w-full md:h-auto",onClick:()=>Xe({type:"video",src:re})}),n.jsx("button",{type:"button",onClick:()=>gt(Ue),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 shadow-sm",disabled:T,title:"Remove video",children:n.jsx("i",{className:"bx bx-x text-sm"})})]},Ue))}),n.jsx("input",{ref:Kt,type:"file",accept:"video/mp4,video/mkv,video/webm",onChange:be,className:"hidden",disabled:T})]}),I.videos&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.videos]}),L>0&&n.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${L}%`}})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-info-circle text-blue-500"}),"Product Details"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Seller Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Your registered name"})]}),n.jsx("input",{type:"text",name:"sellerName",value:a.sellerName,placeholder:"Enter your full name",className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:!0}),I.sellerName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.sellerName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Name of the product"})]}),n.jsx("input",{type:"text",name:"name",value:a.name,onChange:ws,placeholder:"e.g., Men's Leather Jacket",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),I.name&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.name]})]})]}),n.jsxs("div",{className:"mt-6 relative group",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Description",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Describe your product with optional bold, italic, or code formatting"})]}),n.jsxs("div",{className:"mt-1",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("button",{type:"button",onClick:()=>wn("bold"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:T,title:"Bold text (**text**)",children:n.jsx("i",{className:"bx bx-bold text-lg group-hover:text-blue-500"})}),n.jsx("button",{type:"button",onClick:()=>wn("italic"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:T,title:"Italic text (*text*)",children:n.jsx("i",{className:"bx bx-italic text-lg group-hover:text-blue-500"})}),n.jsx("button",{type:"button",onClick:()=>wn("code"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:T,title:"Code text (`text`)",children:n.jsx("i",{className:"bx bx-code text-lg group-hover:text-blue-500"})})]}),n.jsx("textarea",{ref:Js,name:"description",value:a.description,onChange:ws,placeholder:"e.g., **Premium leather** jacket with *stylish stitching*",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,rows:"4",disabled:T}),a.description&&n.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Preview"}),n.jsx("div",{className:"prose prose-sm dark:prose-invert",dangerouslySetInnerHTML:{__html:Mt}})]})]}),I.description&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.description]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-money text-blue-500"}),"Pricing & Stock"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Price (₦) ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Price in Naira"})]}),n.jsx("input",{type:"number",name:"price",value:a.price,onChange:ws,step:"0.01",min:"0",placeholder:"e.g., 5000.00",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.price?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),I.price&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.price]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Stock Quantity ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Available stock"})]}),n.jsx("input",{type:"number",name:"stock",value:a.stock,onChange:ws,min:"0",placeholder:"e.g., 10",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.stock?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),I.stock&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.stock]})]})]}),n.jsxs("div",{className:"mt-6 relative group",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Size",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product size"})]}),n.jsxs("select",{name:"manualSize",value:a.manualSize,onChange:ws,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.manualSize?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T,children:[n.jsx("option",{value:"",children:"Select a size"}),Ss.map(re=>n.jsx("option",{value:re,children:re},re))]}),I.manualSize&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.manualSize]})]}),Pe.productSize&&st&&n.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-calculator text-blue-500"}),"Foremade Fees"]}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[n.jsxs("p",{children:["Category: ",n.jsx("span",{className:"font-semibold",children:Pe.productSize})]}),n.jsxs("p",{className:"hidden",children:["Buyer Protection Fee (",(st[Pe.productSize]?.buyerProtectionRate*100).toFixed(2),"%): ₦",Pe.buyerProtectionFee.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsxs("p",{className:"hidden",children:["Handling Fee (",(st[Pe.productSize]?.handlingRate*100).toFixed(2),"%): ₦",Pe.handlingFee.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsxs("p",{className:"font-bold",children:["Total Estimated Price for Buyer: ₦",Pe.totalEstimatedPrice.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsxs("p",{className:"font-bold text-green-600",children:["Your Estimated Earnings: ₦",Pe.sellerEarnings.toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Note: International shipping costs can be added separately."})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-category text-blue-500"}),"Category & Subcategory"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product category"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsxs("button",{type:"button",onClick:()=>Q(!B),className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.category?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 flex justify-between items-center transition-all duration-200`,disabled:T||Ve.length===0,children:[n.jsx("span",{children:a.category||"Select a category"}),n.jsx("i",{className:"bx bx-chevron-down text-gray-500 dark:text-gray-400"})]}),B&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:Ve.length===0?n.jsx("div",{className:"p-2 text-sm text-gray-500 dark:text-gray-400",children:"No categories available"}):Ve.map(re=>n.jsx("button",{type:"button",onClick:()=>{i(Ue=>({...Ue,category:re,subcategory:"",subSubcategory:"",sizes:[]})),Q(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:re},re))})]}),I.category&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.category]}),Ve.length===0&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),"Loading categories..."]}),a.category&&a.category.toLowerCase().includes("food")&&n.jsxs("p",{className:"text-gray-500 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-info-circle"}),"All food-related categories must meet NAFDAC/FSA food safety standards."]})]}),a.category&&n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Subcategory",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a subcategory"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.subcategory,onChange:re=>i(Ue=>({...Ue,subcategory:re.target.value,subSubcategory:"",sizes:[]})),onFocus:()=>se(!0),onBlur:()=>setTimeout(()=>se(!1),200),placeholder:"Select or type a subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.subcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T||!ke[a.category]}),ee&&ke[a.category]&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:ke[a.category].filter(re=>re.toLowerCase().includes(a.subcategory.toLowerCase())).map(re=>n.jsx("button",{type:"button",onClick:()=>{i(Ue=>({...Ue,subcategory:re,subSubcategory:"",sizes:[]})),se(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:re},re))}),!ke[a.category]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),"Loading subcategories..."]}),I.subcategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.subcategory]})]})]}),a.subcategory&&me[a.category]?.[a.subcategory]&&n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Sub-Subcategory",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a sub-subcategory"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.subSubcategory,onChange:re=>i(Ue=>({...Ue,subSubcategory:re.target.value,sizes:[]})),onFocus:()=>Ee(!0),onBlur:()=>setTimeout(()=>Ee(!1),200),placeholder:"Select or type a sub-subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.subSubcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T||!me[a.category]?.[a.subcategory]}),le&&me[a.category]?.[a.subcategory]&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:me[a.category][a.subcategory].filter(re=>re.toLowerCase().includes(a.subSubcategory.toLowerCase())).map(re=>n.jsx("button",{type:"button",onClick:()=>{i(Ue=>({...Ue,subSubcategory:re,sizes:[]})),Ee(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:re},re))}),I.subSubcategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.subSubcategory]})]})]})]})]}),(a.category==="Clothing"||a.category==="Footwear"||a.category==="Perfumes")&&a.subcategory&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-ruler text-blue-500"}),"Sizes"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Sizes ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or enter sizes"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:zs().map(re=>n.jsx("button",{type:"button",onClick:()=>Ba(re),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.sizes.includes(re)?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${T?"opacity-50 cursor-not-allowed":""}`,disabled:T,children:re},re))}),n.jsx("div",{className:"relative mt-2",children:n.jsx("input",{type:"text",placeholder:"Enter custom size (e.g., Size 35) and press Enter",onKeyDown:Ca,className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.sizes?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T})}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.sizes.map(re=>n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[n.jsx("span",{children:re}),n.jsx("button",{type:"button",onClick:()=>Hr(re),className:"text-red-500 hover:text-red-700",disabled:T,title:"Remove size",children:n.jsx("i",{className:"bx bx-x"})})]},re))}),I.sizes&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.sizes]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-color-fill text-blue-500"}),"Colors"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Colors ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or enter colors"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-2",children:a.colors.map(re=>{const Ue=At.find(qe=>qe.name.toLowerCase()===re.toLowerCase());return n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[n.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Ue?Ue.hex:"#ccc"}}),n.jsx("span",{children:re}),n.jsx("button",{type:"button",onClick:()=>Rr(re),className:"text-red-500 hover:text-red-700",disabled:T,title:"Remove color",children:n.jsx("i",{className:"bx bx-x"})})]},re)})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:V,onChange:Ht,onKeyDown:Qt,onFocus:()=>V.trim()&&G(!0),onBlur:()=>setTimeout(()=>G(!1),200),placeholder:"Type a color and press Enter (e.g., Navy)",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${I.colors?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:T}),X&&H.length>0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md z-10 max-h-40 overflow-y-auto",children:H.map(re=>n.jsxs("button",{type:"button",onMouseDown:()=>pt(re.name),className:"flex items-center w-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",disabled:T,children:[n.jsx("span",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:re.hex}}),re.name]},re.name))})]}),I.colors&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),I.colors]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-purchase-tag text-blue-500"}),"Tags"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 items-center gap-1",children:["Tags",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Add tags to improve searchability"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-2",children:a.tags.map(re=>n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[n.jsx("span",{children:re}),n.jsx("button",{type:"button",onClick:()=>Ut(re),className:"text-red-500 hover:text-red-700",disabled:T,title:"Remove tag",children:n.jsx("i",{className:"bx bx-x"})})]},re))}),n.jsx("input",{type:"text",onKeyDown:re=>{if(re.key==="Enter"&&re.target.value.trim()){const Ue=re.target.value.trim();if(Ue.length>20){t("Tag must be 20 characters or less.","error");return}Ut(Ue),re.target.value=""}},placeholder:"Type a tag and press Enter (e.g., Vintage)",className:"mt-1 w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:T}),tt.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Suggested Tags:"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:tt.map(re=>n.jsx("button",{type:"button",onClick:()=>Ut(re),className:"px-3 py-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm shadow-sm",disabled:T,children:re},re))})]}),Ts.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Authenticity Tags:"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:Ts.map(re=>n.jsx("button",{type:"button",onClick:()=>Ut(re),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.tags.includes(re)?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${T?"opacity-50 cursor-not-allowed":""}`,disabled:T,children:re},re))})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-check-circle text-blue-500"}),"Condition"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["New","Used","Refurbished"].map(re=>n.jsx("button",{type:"button",onClick:()=>i(Ue=>({...Ue,condition:re})),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.condition===re?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${T?"opacity-50 cursor-not-allowed":""}`,disabled:T,children:re},re))})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-link text-blue-500"}),"Product URL (Optional)"]}),n.jsx("input",{type:"url",name:"productUrl",value:a.productUrl,onChange:ws,placeholder:"e.g., https://example.com/product",className:"mt-1 w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:T})]}),n.jsx(he,{to:"/products-upload-variant",className:"text-sm mt-10 text-gray-600 hover:underline",children:"Have products with multiple variants(eg colors, sizes etc) ?"}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-map text-blue-500"}),"Location"]}),n.jsx(cy,{locationData:o,setLocationData:l,errors:c,setErrors:u,disabled:T})]}),n.jsx("div",{className:"mt-6",children:n.jsx("div",{className:"flex justify-between items-center",children:Pt.map(re=>n.jsxs("div",{className:"flex-1 text-center",children:[n.jsx("button",{type:"button",onClick:()=>qt(re.key),className:`w-8 h-8 rounded-full flex items-center justify-center mx-auto ${wt>=re.key?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300"} ${bt(re.key)?"border-2 border-green-500":""} transition-all duration-200`,disabled:T||wt<re.key,children:bt(re.key)?n.jsx("i",{className:"bx bx-check text-lg"}):re.key}),n.jsx("p",{className:"text-xs mt-1 text-gray-600 dark:text-gray-300",children:re.label})]},re.key))})}),n.jsx("div",{className:"mt-8 flex justify-end",children:n.jsx("button",{type:"submit",className:`px-6 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition-colors flex items-center gap-2 ${T?"opacity-50 cursor-not-allowed":""}`,disabled:T,children:T?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bx bx-loader bx-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bx bx-upload"}),"Add Product"]})})})]}),n.jsx(wle,{alerts:e,removeAlert:s}),g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-5",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-check-circle text-green-500"}),"Product Uploaded Successfully!"]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Your product has been uploaded and is pending quick admin review. Once approved, you'll receive an email, and it will go live promptly."}),n.jsx("div",{className:"mt-4 flex justify-end gap-2",children:n.jsx("button",{onClick:()=>r("/sellers/products"),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:"View Products"})})]})}),De&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:n.jsxs("div",{className:"relative max-w-4xl w-full",children:[n.jsx("button",{onClick:()=>Xe(null),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",children:n.jsx("i",{className:"bx bx-x text-lg"})}),De.type==="image"?n.jsx("img",{src:De.src,alt:"Zoomed media",className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}):n.jsx("video",{src:De.src,controls:!0,className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"})]})})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]})}ss.defaults.timeout=6e4;function kle({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function Sle(){const[r,e]=E.useState([]),t=E.useCallback((a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},[]),s=E.useCallback(a=>{e(i=>i.filter(o=>o.id!==a))},[]);return{alerts:r,addAlert:t,removeAlert:s}}function _le(){const r=us(),{alerts:e,addAlert:t,removeAlert:s}=Sle(),[a,i]=E.useState({sellerName:"",name:"",description:"",category:"",subcategory:"",subSubcategory:"",colors:[],condition:"New",productUrl:"",tags:[],manualSize:""}),[o,l]=E.useState({country:"",state:"",city:"",address:""}),[c,u]=E.useState([{color:"",size:"",price:"",stock:"",images:[]}]),[h,f]=E.useState([[]]),[g,x]=E.useState([[]]),[y,b]=E.useState({}),[v,N]=E.useState({}),[k,A]=E.useState(!1),[R,_]=E.useState(0),[I,P]=E.useState(null),[T,D]=E.useState(""),[L,F]=E.useState([]),[z,O]=E.useState(!1),[V,Y]=E.useState(!1),[H,$]=E.useState(!1),[X,G]=E.useState(!1),[B,Q]=E.useState(!1),[ee,se]=E.useState([]),[le,Ee]=E.useState({}),[ue,Oe]=E.useState({}),[Pe,Ie]=E.useState([]),[ie,ze]=E.useState(null),[Ve,ce]=E.useState(null),[ke,Qe]=E.useState(""),me=E.useRef([]),$e=E.useRef([]),tt=E.useRef(null),Ye=4,De=E.useMemo(()=>[{name:"Red",hex:"#ff0000"},{name:"Orange",hex:"#FFA500"},{name:"blue",hex:"#0000ff"},{name:"Green",hex:"#008000"},{name:"Brown",hex:"#8b4513"},{name:"Black",hex:"#000000"},{name:"White",hex:"#ffffff"},{name:"Purple",hex:"#800080"},{name:"Pink",hex:"#ffc1cc"},{name:"Gray",hex:"#808080"},{name:"Yellow",hex:"#FFFF00"},{name:"Gold",hex:"#ff9a1d"},{name:"Silver",hex:"#e2f2ec"}],[]),Xe=E.useMemo(()=>["S","M","L","XL","XXL"],[]),st=E.useMemo(()=>["3","4","6","8","10","12","14","16","18","20"],[]),vt=E.useMemo(()=>['3"','5"','5.5"','6"','6.5"','7"','7.5"','8"','8.5"','9"','9.5"','10"','10.5"','11"','11.5"','12"','12.5"'],[]),Mt=E.useMemo(()=>["30ml","50ml","60ml","75ml","100ml"],[]),as=E.useMemo(()=>["Small","Medium","Large","X-Large"],[]);E.useEffect(()=>{me.current=Array(c.length).fill().map(()=>({current:null})),$e.current=Array(c.length).fill().map(()=>({current:null}))},[c.length]),E.useEffect(()=>()=>{g.forEach(be=>be.forEach(de=>URL.revokeObjectURL(de)))},[g]),E.useEffect(()=>{const be=os(_e(J,"categories"),te=>{const Ae=te.docs.map(Fe=>({id:Fe.id,...Fe.data()}));se(Ae.map(Fe=>Fe.name))},te=>{console.error("Error fetching categories:",te),t("Failed to load categories.","error")}),de=os(_e(J,"customSubcategories"),te=>{const Ae={};te.forEach(Fe=>{Ae[Fe.id]=Fe.data().subcategories||[]}),Ee(Ae)},te=>{console.error("Error fetching subcategories:",te),t("Failed to load subcategories.","error")}),Se=os(_e(J,"customSubSubcategories"),te=>{const Ae={};te.forEach(Fe=>{const gt=Fe.id,pt=Fe.data();Ae[gt]={},Object.entries(pt).forEach(([Ht,Qt])=>{Ae[gt][Ht]=Array.isArray(Qt)?Qt:[]})}),Oe(Ae)},te=>{console.error("Error fetching sub-subcategories:",te),t("Failed to load sub-subcategories.","error")});return(async()=>{try{const te=Ne(J,"feeConfigurations","categoryFees"),Ae=await it(te);Ae.exists()?ce(Ae.data()):t("No fee configurations found.","error")}catch(te){console.error("Error fetching fee configurations:",te),t("Failed to load fee configurations.","error")}})(),()=>{be(),de(),Se()}},[t]),E.useEffect(()=>{a.category&&!ee.includes(a.category)&&(i(be=>({...be,category:"",subcategory:"",subSubcategory:""})),t("Selected category was removed by admin.","error")),a.subcategory&&!le[a.category]?.includes(a.subcategory)&&(i(be=>({...be,subcategory:"",subSubcategory:""})),t("Selected subcategory was removed by admin.","error")),a.subSubcategory&&!ue[a.category]?.[a.subcategory]?.includes(a.subSubcategory)&&(i(be=>({...be,subSubcategory:""})),t("Selected sub-subcategory was removed by admin.","error"))},[ee,le,ue,a,t]),E.useEffect(()=>{const be=ve.onAuthStateChanged(de=>{if(de){P(de);try{let Se=de.displayName||"";Se&&Se.startsWith("{")&&(Se=JSON.parse(Se).name||""),i(Je=>({...Je,sellerName:Se}))}catch(Se){console.error("Error parsing displayName:",Se),t("Failed to load seller profile.","error")}}else t("Please log in to add products.","error"),r("/login")});return()=>be()},[r,t]),E.useEffect(()=>{Qe(Os(a.description||"",{gfm:!0,breaks:!0}))},[a.description]),E.useEffect(()=>{(()=>{const de=`${a.name} ${a.description} ${a.subSubcategory}`.toLowerCase(),Se=[];de.includes("leather")&&Se.push("Leather"),(de.includes("shoe")||de.includes("footwear"))&&Se.push("Footwear"),(de.includes("phone")||de.includes("mobile"))&&Se.push("Smartphone"),de.includes("fashion")&&Se.push("Fashion"),de.includes("vintage")&&Se.push("Vintage"),de.includes("smart")&&Se.push("Smart"),Ie(Se.filter(Je=>!a.tags.includes(Je)))})()},[a.name,a.description,a.subSubcategory]);const wt=E.useCallback(()=>{const be=Ss().length>0?Ss()[0]:"";u(de=>[...de,{color:"",size:be,price:"",stock:"",images:[]}]),f(de=>[...de,[]]),x(de=>[...de,[]]),me.current.push({current:null}),$e.current.push({current:null})},[]),Ge=E.useCallback(be=>{u(de=>de.filter((Se,Je)=>Je!==be)),f(de=>de.filter((Se,Je)=>Je!==be)),x(de=>((de[be]||[]).forEach(Je=>URL.revokeObjectURL(Je)),de.filter((Je,te)=>te!==be))),me.current.splice(be,1),$e.current.splice(be,1)},[]),Pt=E.useCallback((be,de,Se)=>{u(Je=>Je.map((te,Ae)=>Ae===be?{...te,[de]:Se}:te))},[]),bt=E.useCallback((be,de)=>{const Se=Array.from(de).filter(Je=>Je.type.startsWith("image/")&&Je.size<=5242880);if((h[be]?.length||0)+Se.length>Ye){t(`Maximum ${Ye} images allowed per variant.`,"error");return}f(Je=>{const te=[...Je];return te[be]=[...te[be]||[],...Se],te}),x(Je=>{const te=[...Je];return te[be]=[...te[be]||[],...Se.map(Ae=>URL.createObjectURL(Ae))],te}),$e.current[be]?.current&&($e.current[be].current.value="")},[h,t]),qt=E.useCallback((be,de)=>{f(Se=>{const Je=[...Se];return Je[be]=Je[be].filter((te,Ae)=>Ae!==de),Je}),x(Se=>{const Je=[...Se],te=Je[be][de];return Je[be]=Je[be].filter((Ae,Fe)=>Fe!==de),URL.revokeObjectURL(te),Je})},[]),Ct=E.useCallback((be,de)=>{be.preventDefault(),be.stopPropagation(),me.current[de]?.current&&me.current[de].current.classList.remove("border-blue-500"),bt(de,be.dataTransfer.files)},[bt]),Bt=E.useCallback((be,de)=>{be.preventDefault(),be.stopPropagation(),me.current[de]?.current&&me.current[de].current.classList.add("border-blue-500")},[]),Kt=E.useCallback((be,de)=>{be.preventDefault(),be.stopPropagation(),me.current[de]?.current&&me.current[de].current.classList.remove("border-blue-500")},[]),Xt=E.useCallback(be=>{const{name:de,value:Se}=be.target;i(Je=>({...Je,[de]:Se,...de==="category"?{subcategory:"",subSubcategory:""}:{},...de==="subcategory"?{subSubcategory:""}:{}})),N(Je=>({...Je,[de]:""}))},[]),Js=E.useCallback(be=>{i(de=>{const Se=de.colors.includes(be)?de.colors.filter(Je=>Je!==be):[...de.colors,be];return{...de,colors:Se}}),D(""),O(!1)},[]),At=E.useCallback(be=>{const de=be.target.value;if(D(de),de.trim()===""){F([]),O(!1);return}const Se=De.filter(Je=>Je.name.toLowerCase().includes(de.toLowerCase()));F(Se),O(!0)},[De]),Vt=E.useCallback(be=>{if(be.key==="Enter"&&T.trim()){const de=T.trim();if(de.length>20){t("Color name must be 20 characters or less.","error");return}i(Se=>{const Je=Se.colors.includes(de)?Se.colors:[...Se.colors,de];return{...Se,colors:Je}}),D(""),F([]),O(!1)}},[T,t]),ar=E.useCallback(be=>{i(de=>({...de,colors:de.colors.filter(Se=>Se!==be)}))},[]),Fs=E.useCallback(be=>{i(de=>{const Se=de.tags.includes(be)?de.tags.filter(Je=>Je!==be):[...de.tags,be];return{...de,tags:Se}})},[]),nr=E.useCallback(be=>{const de=tt.current;if(!de)return;const Se=de.selectionStart,Je=de.selectionEnd,te=a.description.substring(Se,Je);let Ae=a.description,Fe=Se,gt=Je;be==="bold"?te?(Ae=Ae.substring(0,Se)+`**${te}**`+Ae.substring(Je),Fe=Se+2,gt=Je+2):(Ae=Ae.substring(0,Se)+"****"+Ae.substring(Se),Fe=Se+2,gt=Se+2):be==="italic"?te?(Ae=Ae.substring(0,Se)+`*${te}*`+Ae.substring(Je),Fe=Se+1,gt=Je+1):(Ae=Ae.substring(0,Se)+"**"+Ae.substring(Se),Fe=Se+1,gt=Se+1):be==="code"&&(te?(Ae=Ae.substring(0,Se)+`\`${te}\``+Ae.substring(Je),Fe=Se+1,gt=Je+1):(Ae=Ae.substring(0,Se)+"``"+Ae.substring(Se),Fe=Se+1,gt=Se+1)),i(pt=>({...pt,description:Ae})),setTimeout(()=>{de.selectionStart=Fe,de.selectionEnd=gt,de.focus()},0)},[a.description]),Ss=E.useMemo(()=>()=>a.category==="Clothing"&&a.subcategory?a.subcategory==="Men"?Xe:st:a.category==="Footwear"&&a.subcategory?vt:a.category==="Perfumes"&&a.subSubcategory?.startsWith("Oil -")?Mt:[],[a.category,a.subcategory,a.subSubcategory]),Ts=E.useCallback(()=>{const be={};return a.sellerName.trim()||(be.sellerName="Please enter your full name."),a.name.trim()||(be.name="Product name is required."),(!a.category||!ee.includes(a.category))&&(be.category="Select a valid category."),(!a.subcategory||!le[a.category]?.includes(a.subcategory))&&(be.subcategory="You are free man."),ue[a.category]?.[a.subcategory]?.length>0&&!a.subSubcategory&&(be.subSubcategory="Select a sub-subcategory."),a.colors.length===0&&(be.colors="Select at least one color."),a.manualSize||(be.manualSize="Please select a product size."),c.length===0&&(be.variants="At least one variant is required."),c.forEach((de,Se)=>{de.color.trim()||(be[`variant${Se}_color`]="Color is required."),!de.size&&Ss().length>0&&(be[`variant${Se}_size`]="Size is required."),(!de.price||isNaN(de.price)||parseFloat(de.price)<=0)&&(be[`variant${Se}_price`]="Enter a valid price greater than 0."),(!de.stock||isNaN(de.stock)||parseInt(de.stock,10)<0)&&(be[`variant${Se}_stock`]="Enter a valid stock quantity (0 or more)."),(h[Se]?.length||0)===0&&(be[`variant${Se}_images`]="At least one image is required per variant.")}),be},[a,c,ee,le,ue,h,Ss]),Us=E.useCallback(()=>{const be={};return o.country.trim()||(be.country="Country is required."),o.state.trim()||(be.state="State is required."),be},[o]),Ps=E.useCallback(async be=>{const de=new FormData;de.append("file",be),de.append("isVideo",!1);try{const Je=await ss.post("https://foremade-backend.onrender.com/upload",de,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:te=>{const Ae=Math.round(te.loaded*100/te.total);_(Ae)}});if(Je.status!==200||!Je.data.url)throw new Error("Failed to upload image to Cloudinary.");return Je.data.url}catch(Se){throw new Error(Se.code==="ECONNABORTED"?"Request timed out. Please check your network or try again later.":Se.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network or server status.":Se.response?.data?.error||"Failed to upload image.")}finally{_(0)}},[]),Pr=E.useCallback(async be=>{if(be.preventDefault(),N({}),b({}),A(!0),!I){t("You must be logged in to add products.","error"),A(!1),r("/login");return}const de=Ts(),Se=Us();if(Object.keys(de).length>0||Object.keys(Se).length>0){N(de),b(Se),A(!1),Object.entries(de).forEach(([Je,te])=>t(te,"error")),Object.entries(Se).forEach(([Je,te])=>t(te,"error"));return}try{const Je=await Promise.all(h.map(async gt=>Promise.all(gt.map(pt=>Ps(pt))))),te=c.reduce((gt,pt)=>{const Ht=parseFloat(pt.price);return isNaN(Ht)?gt:Math.min(gt,Ht)},1/0),Ae={sellerName:a.sellerName,name:a.name,description:a.description||"",category:a.category.toLowerCase(),subcategory:a.subcategory||"",subSubcategory:a.subSubcategory||"",colors:a.colors,condition:a.condition||"New",productUrl:a.productUrl||"",tags:a.tags,sellerId:I.uid,seller:{name:a.sellerName,id:I.uid},createdAt:new Date().toISOString(),reviews:[],variants:c.map((gt,pt)=>({...gt,price:parseFloat(gt.price),stock:parseInt(gt.stock,10),imageUrls:Je[pt]||[]})),location:{country:o.country,state:o.state,city:o.city||"",address:o.address||""},buyerProtectionFee:Ve?.[a.category]?.buyerProtectionRate*te||0,handlingFee:Ve?.[a.category]?.handlingRate*te||0,totalEstimatedPrice:te+(Ve?.[a.category]?.buyerProtectionRate*te||0)+(Ve?.[a.category]?.handlingRate*te||0),sellerEarnings:te,manualSize:a.manualSize},Fe=await Za(_e(J,"products"),Ae);console.log("Product with variants uploaded with ID:",Fe.id),Q(!0),i({sellerName:"",name:"",description:"",category:"",subcategory:"",subSubcategory:"",colors:[],condition:"New",productUrl:"",tags:[],manualSize:""}),l({country:"",state:"",city:"",address:""}),u([{color:"",size:"",price:"",stock:"",images:[]}]),f([[]]),x([[]]),me.current=[{current:null}],$e.current=[{current:null}],F([]),O(!1),Y(!1),$(!1),G(!1)}catch(Je){console.error("Error uploading product:",Je),t(Je.message||"Failed to upload product variants.","error")}finally{A(!1)}},[I,a,o,c,h,Ve,Ts,Us,Ps,t,r]),vs=E.useMemo(()=>ee,[ee]),ws=E.useMemo(()=>le[a.category]||[],[le,a.category]),Ws=E.useMemo(()=>ue[a.category]?.[a.subcategory]||[],[ue,a.category,a.subcategory]);return I?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-package text-blue-500"}),"Add Product with Variants"]}),n.jsxs("form",{onSubmit:Pr,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-info-circle text-blue-500"}),"Product Details"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Seller Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Your registered name"})]}),n.jsx("input",{type:"text",name:"sellerName",value:a.sellerName,placeholder:"Enter your full name",className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:!0}),v.sellerName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.sellerName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Name of the product"})]}),n.jsx("input",{type:"text",name:"name",value:a.name,onChange:Xt,placeholder:"e.g., Men's Leather Jacket",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:k}),v.name&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.name]})]})]}),n.jsxs("div",{className:"mt-6 relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Description",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Describe your product with optional bold, italic, or code formatting"})]}),n.jsxs("div",{className:"mt-1",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("button",{type:"button",onClick:()=>nr("bold"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:k,title:"Bold text (**text**)",children:n.jsx("i",{className:"bx bx-bold text-lg group-hover:text-blue-500"})}),n.jsx("button",{type:"button",onClick:()=>nr("italic"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:k,title:"Italic text (*text*)",children:n.jsx("i",{className:"bx bx-italic text-lg group-hover:text-blue-500"})}),n.jsx("button",{type:"button",onClick:()=>nr("code"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 shadow-sm group",disabled:k,title:"Code text (`text`)",children:n.jsx("i",{className:"bx bx-code text-lg group-hover:text-blue-500"})})]}),n.jsx("textarea",{ref:tt,name:"description",value:a.description,onChange:Xt,placeholder:"e.g., Premium leather jacket with stylish stitching",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.description?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,rows:"4",disabled:k}),a.description&&n.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Preview"}),n.jsx("div",{className:"prose prose-sm dark:prose-invert",dangerouslySetInnerHTML:{__html:ke}})]})]}),v.description&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.description]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-category text-blue-500"}),"Category & Subcategory"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product category"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsxs("button",{type:"button",onClick:()=>Y(!V),className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.category?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 flex justify-between items-center transition-all duration-200`,disabled:k||vs.length===0,children:[n.jsx("span",{children:a.category||"Select a category"}),n.jsx("i",{className:"bx bx-chevron-down text-gray-500 dark:text-gray-400"})]}),V&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:vs.length===0?n.jsx("div",{className:"p-2 text-sm text-gray-500 dark:text-gray-400",children:"No categories available"}):vs.map(be=>n.jsx("button",{type:"button",onClick:()=>{i(de=>({...de,category:be,subcategory:"",subSubcategory:""})),Y(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:be},be))})]}),v.category&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.category]}),vs.length===0&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),"Loading categories..."]})]}),a.category&&n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Subcategory ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a subcategory"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.subcategory,onChange:be=>{i(de=>({...de,subcategory:be.target.value,subSubcategory:""})),$(!0)},onFocus:()=>$(!0),onBlur:()=>setTimeout(()=>$(!1),200),placeholder:"Select or type a subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.subcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:k||!ws.length}),H&&ws.length>0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:ws.filter(be=>be.toLowerCase().includes(a.subcategory.toLowerCase())).map(be=>n.jsx("button",{type:"button",onClick:()=>{i(de=>({...de,subcategory:be,subSubcategory:""})),$(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:be},be))}),v.subcategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.subcategory]})]})]}),a.subcategory&&Ws.length>0&&n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Sub-Subcategory ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or type a sub-subcategory"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.subSubcategory,onChange:be=>i(de=>({...de,subSubcategory:be.target.value})),onFocus:()=>G(!0),onBlur:()=>setTimeout(()=>G(!1),200),placeholder:"Select or type a sub-subcategory",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.subSubcategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:k}),X&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md max-h-40 overflow-y-auto",children:Ws.filter(be=>be.toLowerCase().includes(a.subSubcategory.toLowerCase())).map(be=>n.jsx("button",{type:"button",onClick:()=>{i(de=>({...de,subSubcategory:be})),G(!1)},className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",children:be},be))}),v.subSubcategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.subSubcategory]})]})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-color-fill text-blue-500"}),"Colors"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Colors ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select or enter colors"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-2",children:a.colors.map(be=>{const de=De.find(Se=>Se.name.toLowerCase()===be.toLowerCase());return n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs shadow-sm",children:[n.jsx("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:de?de.hex:"#ccc"}}),n.jsx("span",{children:be}),n.jsx("button",{type:"button",onClick:()=>ar(be),className:"text-red-500 hover:text-red-700",disabled:k,title:"Remove color",children:n.jsx("i",{className:"bx bx-x"})})]},be)})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:T,onChange:At,onKeyDown:Vt,onFocus:()=>T.trim()&&O(!0),onBlur:()=>setTimeout(()=>O(!1),200),placeholder:"Type a color and press Enter (e.g., Navy)",className:`w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.colors?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:k}),z&&L.length>0&&n.jsx("div",{className:"absolute top-full left-0 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-md z-10 max-h-40 overflow-y-auto",children:L.map(be=>n.jsxs("button",{type:"button",onMouseDown:()=>Js(be.name),className:"flex items-center w-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-gray-800 dark:text-gray-100",disabled:k,children:[n.jsx("span",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:be.hex}}),be.name]},be.name))})]}),v.colors&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.colors]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-purchase-tag text-blue-500"}),"Tags"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tags (Optional)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Add tags to improve product discoverability"})]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("input",{type:"text",value:a.tags.join(", "),onChange:be=>{const de=be.target.value.split(",").map(Se=>Se.trim()).filter(Se=>Se);i(Se=>({...Se,tags:de}))},placeholder:"e.g., Vintage, Leather, Smartphone",className:"w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:k}),Pe.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Suggested Tags:"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:Pe.map(be=>n.jsx("button",{type:"button",onClick:()=>Fs(be),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.tags.includes(be)?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${k?"opacity-50 cursor-not-allowed":""}`,disabled:k,children:be},be))})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-star text-blue-500"}),"Condition"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Condition ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select the condition of the product"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["New","Used - Like New","Used - Good","Used - Fair"].map(be=>n.jsx("button",{type:"button",onClick:()=>i(de=>({...de,condition:be})),className:`px-3 py-1 rounded-lg border text-sm transition-colors shadow-sm ${a.condition===be?"border-blue-500 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"} ${k?"opacity-50 cursor-not-allowed":""}`,disabled:k,children:be},be))}),v.condition&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.condition]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-ruler text-blue-500"}),"Product Size"]}),n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product Size ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select product size"})]}),n.jsxs("select",{name:"manualSize",value:a.manualSize,onChange:Xt,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v.manualSize?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:k,children:[n.jsx("option",{value:"",children:"Select a size"}),as.map(be=>n.jsx("option",{value:be,children:be},be))]}),v.manualSize&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.manualSize]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-map text-blue-500"}),"Location"]}),n.jsx(cy,{locationData:o,setLocationData:l,errors:y,disabled:k})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-plus text-blue-500"}),"Variants"]}),v.variants&&n.jsxs("p",{className:"text-red-600 text-xs mb-2 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v.variants]}),c.map((be,de)=>n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:["Variant ",de+1]}),n.jsx("button",{type:"button",onClick:()=>Ge(de),className:"text-red-500 hover:text-red-700",disabled:k,"aria-label":`Remove variant ${de+1}`,children:n.jsx("i",{className:"bx bx-trash text-lg"})})]}),n.jsxs("div",{className:"relative group mb-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Variant Images (up to ",Ye,") ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:`Upload up to ${Ye} images (max 5MB each)`})]}),n.jsxs("div",{ref:Se=>me.current[de]={current:Se},onDrop:Se=>Ct(Se,de),onDragOver:Se=>Bt(Se,de),onDragLeave:Se=>Kt(Se,de),className:`mt-1 w-full p-4 border-2 border-dashed rounded-lg flex flex-col items-center justify-center min-h-[150px] transition-colors ${v[`variant${de}_images`]?"border-red-500":"border-gray-300 hover:border-blue-500 dark:border-gray-600"} ${k?"opacity-50":""}`,children:[(g[de]?.length||0)===0?n.jsxs("div",{className:"text-center",children:[n.jsx("i",{className:"bx bx-cloud-upload text-4xl text-gray-600 dark:text-gray-400"}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Drag and drop images or"," ",n.jsx("button",{type:"button",onClick:()=>$e.current[de]?.current.click(),className:"text-blue-600 hover:underline",disabled:k,children:"select images"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"(JPEG, JPG, PNG, WEBP, GIF, max 5MB each)"})]}):n.jsx("div",{className:"grid grid-cols-2 gap-3 w-full",children:g[de].map((Se,Je)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:Se,alt:`Variant ${de+1} Preview ${Je+1}`,className:"w-full h-32 object-cover rounded-md border border-gray-200 dark:border-gray-600 cursor-pointer shadow-sm",onClick:()=>ze({type:"image",src:Se})}),n.jsx("button",{type:"button",onClick:()=>qt(de,Je),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 shadow-sm",disabled:k,title:"Remove image","aria-label":`Remove image ${Je+1} from variant ${de+1}`,children:n.jsx("i",{className:"bx bx-x text-sm"})})]},Je))}),n.jsx("input",{ref:Se=>$e.current[de]={current:Se},type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:Se=>bt(de,Se.target.files),className:"hidden",disabled:k,multiple:!0})]}),v[`variant${de}_images`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v[`variant${de}_images`]]}),R>0&&n.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${R}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Color ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:be.color,onChange:Se=>Pt(de,"color",Se.target.value),placeholder:"Type a color (e.g., Navy blue)",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v[`variant${de}_color`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:k}),v[`variant${de}_color`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v[`variant${de}_color`]]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Size ",Ss().length>0&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:be.size,onChange:Se=>Pt(de,"size",Se.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v[`variant${de}_size`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:k,children:[n.jsx("option",{value:"",children:"Select a size"}),Ss().map(Se=>n.jsx("option",{value:Se,children:Se},Se))]}),v[`variant${de}_size`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v[`variant${de}_size`]]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Price (₦) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",value:be.price,onChange:Se=>Pt(de,"price",Se.target.value),step:"0.01",min:"0",placeholder:"e.g., 5000.00",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v[`variant${de}_price`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:k}),v[`variant${de}_price`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v[`variant${de}_price`]]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Stock ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",value:be.stock,onChange:Se=>Pt(de,"stock",Se.target.value),min:"0",placeholder:"e.g., 10",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${v[`variant${de}_stock`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:k}),v[`variant${de}_stock`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),v[`variant${de}_stock`]]})]})]})]},de)),n.jsxs("button",{type:"button",onClick:wt,className:`mt-4 py-2 px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 flex items-center gap-2 ${k?"opacity-50 cursor-not-allowed":""}`,disabled:k,"aria-label":"Add new variant",children:[n.jsx("i",{className:"bx bx-plus"}),"Add Variant"]})]}),n.jsx("div",{className:"flex justify-end mt-8",children:n.jsx("button",{type:"submit",className:`flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition-colors text-sm font-medium ${k?"opacity-50 cursor-not-allowed":""}`,disabled:k,children:k?n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bx bx-loader bx-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx("i",{className:"bx bx-upload"}),"Add Product with Variants"]})})})]}),n.jsx(kle,{alerts:e,removeAlert:s}),n.jsx(Z2,{isOpen:B,onClose:()=>{Q(!1)},message:"Product variants uploaded successfully!",icon:"bx-check-circle",type:"success",showYesNoButtons:!1}),ie&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:n.jsxs("div",{className:"relative max-w-4xl w-full",children:[n.jsx("img",{src:ie.src,alt:"Zoomed media",className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}),n.jsx("button",{onClick:()=>ze(null),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 shadow-md",title:"Close",children:n.jsx("i",{className:"bx bx-x text-xl"})})]})})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]})}function Ale(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(""),[o,l]=E.useState(""),[c,u]=E.useState(!1),[h,f]=E.useState(null),g=E.useCallback(Sd(b=>{l(b)},300),[]);E.useEffect(()=>{(async()=>{try{ai(ve,async v=>{if(v)try{const N=ft(_e(J,"products"),rt("sellerId","==",v.uid)),A=(await Ke(N)).docs.map(R=>{const _=R.data(),I=Array.isArray(_.imageUrls)?_.imageUrls.filter(D=>typeof D=="string"&&D.startsWith("https://res.cloudinary.com/")):_.imageUrl&&typeof _.imageUrl=="string"&&_.imageUrl.startsWith("https://res.cloudinary.com/")?[_.imageUrl]:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"],P=Array.isArray(_.videoUrls)?_.videoUrls.filter(D=>typeof D=="string"&&D.startsWith("https://res.cloudinary.com/")):[],T=Array.isArray(_.variants)?_.variants:[];return{id:R.id,..._,imageUrls:I.length>0?I:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"],videoUrls:P,variants:T,uploadDate:_.uploadDate?_.uploadDate.toDate():new Date}});e(A)}catch(N){i("Failed to fetch products: "+N.message)}else i("Please log in to view your products.");s(!1)})}catch(v){i("Authentication error: "+v.message),s(!1)}})()},[]);const x=r.filter(b=>b.name?.toLowerCase().includes(o.toLowerCase())),y=()=>window.location.reload();return t?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-5xl",children:Array.from({length:6}).map((b,v)=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-md animate-pulse h-64"},v))})})]}):a?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 to-gray-50",children:n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-lg",children:[n.jsx("p",{className:"text-red-700 text-base mb-4",children:a}),n.jsx(he,{to:"/seller/login",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Return to Login"})]})}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Es,{}),n.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 md:gap-6 mb-8 p-4 sm:p-6 md:p-8 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100 shadow-sm",children:[n.jsx(hee,{className:"w-8 h-8 text-blue-600 mb-2 md:mb-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-blue-900 flex items-center gap-3 flex-wrap",children:["Product Gallery",n.jsxs("span",{className:"inline-block bg-blue-100 text-blue-700 text-base md:text-lg font-semibold px-3 py-1 rounded-full ml-2",children:[r.length," ",r.length===1?"Product":"Products"]})]}),n.jsx("p",{className:"text-gray-500 text-sm md:text-base mt-1",children:"Explore your uploaded products with images and videos."})]}),n.jsx("button",{onClick:y,title:"Refresh",className:"ml-0 md:ml-auto bg-white border border-blue-200 rounded-full p-2 md:p-3 hover:bg-blue-100 transition focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 mt-2 md:mt-0",children:n.jsx(b2,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600"})}),n.jsxs(he,{to:"/products-upload",className:"hidden sm:flex bg-[#112d4e] text-white px-8 py-4 md:px-10 md:py-5 rounded-xl hover:bg-[#1a4577] transition duration-300 items-center gap-3 shadow-xl focus:outline-[#112d4e] focus:ring-4 focus:ring-blue-300 ml-4 font-bold text-lg md:text-xl",children:[n.jsx(qf,{className:"w-7 h-7 md:w-8 md:h-8"})," ",n.jsx("span",{children:"Add New Product"})]})]}),n.jsxs(he,{to:"/products-upload",className:"sm:hidden fixed bottom-8 right-4 md:bottom-12 md:right-12 z-50 rounded-full bg-[#112d4e] text-white p-7 shadow-2xl hover:bg-[#1a4577] transition focus:outline-[#112d4e] focus:ring-4 focus:ring-blue-300 flex items-center justify-center animate-pulseBtn",title:"Add New Product","aria-label":"Add New Product",tabIndex:0,children:[n.jsx(x2,{className:"w-12 h-12 font-bold"}),n.jsx("span",{className:"sr-only",children:"Add New Product"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 max-w-full overflow-x-auto",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative w-full max-w-md",children:[n.jsx("input",{type:"text",value:o,onChange:b=>g(b.target.value),placeholder:"Search by product name...",className:"w-full p-3 pl-10 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"}),n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:n.jsx("i",{className:"bx bx-search"})})]})}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.length>0?x.map(b=>{const v=b.variants?.length>0&&b.variants[0].imageUrls?.length>0?b.variants[0].imageUrls[0]:b.imageUrls[0];return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-md hover:shadow-xl transition duration-300 animate-slide-in focus:ring-2 focus:ring-blue-300 outline-none cursor-pointer group",tabIndex:0,onClick:()=>{u(!0),f(b)},title:"View product media",children:[n.jsxs("div",{className:"relative aspect-[4/3] mb-4 overflow-hidden",children:[v?n.jsx("img",{src:v,alt:b.name||"Product Image",className:"w-full h-full object-cover rounded-lg group-hover:scale-105 transition-transform duration-300 hover:opacity-90",onError:N=>{N.target.style.display="none",N.target.parentElement.innerHTML='<div class="absolute w-full h-full bg-gray-200 rounded-lg flex items-center justify-center"><span class="text-gray-500">Image N/A</span></div>'}}):n.jsx("div",{className:"w-full h-full bg-gray-200 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-gray-500",children:"Image N/A"})}),b.videoUrls[0]&&n.jsx(yte,{className:"absolute bottom-2 right-2 w-8 h-8 text-blue-600 bg-white rounded-full p-1 shadow",title:"Video available"})]}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 truncate",children:b.name||"Unnamed Product"}),n.jsxs("p",{className:"text-gray-600 text-sm mb-1",children:["Price: ",b.variants?.length>0?`₦${Math.min(...b.variants.map(N=>N.price||0)).toLocaleString("en-NG")} - ₦${Math.max(...b.variants.map(N=>N.price||0)).toLocaleString("en-NG")}`:`₦${(b.price||0).toLocaleString("en-NG")}`]}),n.jsxs("p",{className:"text-gray-600 text-sm mb-1",children:["Variants: ",b.variants?.length||0]}),n.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${b.status==="pending"?"bg-orange-100 text-orange-800":b.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.status==="pending"?"Pending":b.status==="approved"?"Approved":"Not Approved"}),n.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Uploaded: ",b.uploadDate.toLocaleDateString("en-NG",{day:"2-digit",month:"short",year:"numeric"})]}),n.jsxs(he,{to:`/seller/edit-product/${b.id}`,className:"mt-4 inline-flex items-center gap-1 px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded focus:outline-blue-400 focus:ring-2 focus:ring-blue-300 transition",title:"Edit Product",children:[n.jsx(Ju,{className:"w-4 h-4"})," Edit"]})]},b.id)}):n.jsxs("div",{className:"flex flex-col items-center justify-center mt-10 mb-10 animate-slide-in col-span-full",children:[n.jsx(Wc,{className:"w-24 h-24 mb-4 text-blue-200"}),n.jsxs("p",{className:"text-gray-600 text-center text-lg",children:["No products uploaded yet.",n.jsx("br",{}),"Start by adding your first product!"]}),n.jsxs(he,{to:"/products-upload",className:"bg-[#112d4e] text-white px-6 py-3 rounded-lg hover:bg-[#1a4577] transition duration-300 flex items-center gap-2 shadow-lg focus:outline-[#112d4e] focus:ring-2 focus:ring-blue-300 mt-4",children:[n.jsx(qf,{className:"w-5 h-5"})," Add Your First Product"]})]})})]}),c&&h&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 animate-fade-in overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-4 sm:p-6 max-w-lg w-full relative mx-auto",children:[n.jsx("button",{onClick:()=>u(!1),className:"absolute top-2 right-2 bg-gray-100 hover:bg-gray-200 rounded-full p-2 focus:outline-blue-400",title:"Close",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 truncate",children:h.name||"Unnamed Product"}),h.imageUrls&&h.imageUrls.length>0&&n.jsx("img",{src:h.imageUrls[0],alt:h.name||"Product Image",className:"w-full h-64 object-cover rounded-lg mb-4"}),h.videoUrls&&h.videoUrls.length>0&&n.jsx("video",{src:h.videoUrls[0],controls:!0,className:"w-full h-64 rounded-lg"}),n.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Price: ₦",h.price||0]}),n.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${h.status==="pending"?"bg-orange-100 text-orange-800":h.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.status==="pending"?"Pending":h.status==="approved"?"Approved":"Not Approved"}),n.jsx("button",{onClick:()=>u(!1),className:"mt-6 w-full bg-[#112d4e] text-white py-2 rounded-lg hover:bg-[#1a4577] transition focus:outline-[#112d4e] focus:ring-2 focus:ring-blue-300",children:"Close"})]})}),n.jsx("style",{children:`
          @keyframes slide-in {
            from { opacity: 0; transform: translateY(32px); }
            to { opacity: 1; transform: none; }
          }
          .animate-slide-in {
            animation: slide-in 0.7s cubic-bezier(0.4,0,0.2,1);
          }
          @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          .animate-fade-in {
            animation: fade-in 0.5s cubic-bezier(0.4,0,0.2,1);
          }
          @keyframes pulseBtn {
            0%, 100% { box-shadow: 0 0 0 0 rgba(124,58,237,0.4), 0 8px 32px 0 rgba(30,58,138,0.18); }
            50% { box-shadow: 0 0 0 12px rgba(124,58,237,0.15), 0 8px 32px 0 rgba(30,58,138,0.18); }
          }
          .animate-pulseBtn {
            animation: pulseBtn 1.2s infinite;
          }
        `})]})]})}const Cle=()=>{const[r,e]=E.useState("contact"),[t,s]=E.useState(null),[a,i]=E.useState({name:"",email:"",subject:"",message:""}),[o,l]=E.useState(!1),{user:c}=hd?hd():{user:null},u=[{question:"How do I place an order?",answer:"To place an order, browse our products, add items to your cart, and proceed to checkout. You'll need to provide shipping and payment information to complete your order."},{question:"What payment methods do you accept?",answer:"We accept various payment methods including credit/debit cards, bank transfers, and digital wallets. All payments are processed securely through our payment partners."},{question:"How can I track my order?",answer:"Once your order is shipped, you'll receive a tracking number via email. You can also view your order status and tracking information in your account under 'My Orders'."},{question:"What is your return policy?",answer:"We offer a 30-day return policy for most items. Products must be in original condition with all packaging. Some restrictions may apply to certain categories."},{question:"How long does shipping take?",answer:"Standard shipping typically takes 3-7 business days within the country. International shipping may take 7-14 business days. Express shipping options are available at checkout."},{question:"Do you ship internationally?",answer:"Yes, we ship to most countries worldwide. International shipping costs and delivery times vary by location."},{question:"How do I become a seller on Foremade?",answer:"To become a seller, create an account and click on 'Become a Seller' in your profile. You'll need to complete the seller application and verification process."},{question:"What are Foremade's fees for sellers?",answer:"Our seller fees include a small listing fee and a commission on sales. The exact fee structure depends on your seller level and product category."}],h=[{name:"Privacy Policy",url:"/privacy-policy"},{name:"Terms & Conditions",url:"/terms-conditions"},{name:"Seller Agreement",url:"/seller-agreement"},{name:"Shipping Policy",url:"/shipping-policy"}],f=y=>{const{name:b,value:v}=y.target;i(N=>({...N,[b]:v}))},g=async y=>{y.preventDefault(),l(!0);try{const b="https://foremade-backend.onrender.com";console.log("Submitting to:",`${b}/api/support-request`,a);let v=null;c&&(v=await c.getIdToken());const N=await fetch(`${b}/api/support-request`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",...v?{Authorization:`Bearer ${v}`}:{}},body:JSON.stringify(a)});if(!N.ok){const k=await N.json().catch(()=>({}));throw new Error(k.message||"Failed to send message. Please try again later.")}xe.success("Your message has been sent! Our support team will get back to you soon."),i({name:"",email:"",subject:"",message:""})}catch(b){console.error("Error submitting form:",b),xe.error(b.message||"Failed to send message. Please try again later.")}finally{l(!1)}},x=y=>{s(t===y?null:y)};return n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx(Ze.h1,{className:"text-2xl md:text-3xl font-bold text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Customer Support Center"}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsx("div",{className:"inline-flex bg-background-light rounded-lg p-1 border border-border-light",children:["contact","faq","policies"].map(y=>n.jsxs(Ze.button,{onClick:()=>e(y),className:`px-4 py-2 rounded-md ${r===y?"bg-gray text-black":"bg-transparent text-secondary hover:bg-background-dark"} transition-all duration-200 text-sm md:text-base font-medium`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[y==="contact"&&"Contact Us",y==="faq"&&"FAQs",y==="policies"&&"Policies"]},y))})}),r==="contact"&&n.jsxs(Ze.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"bg-background-light rounded-lg shadow-md p-6 mb-8 border border-border-light",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4 text-primary",children:"Get in Touch"}),n.jsx("p",{className:"text-secondary mb-6",children:"Have a question or need assistance? Fill out the form below and our support team will get back to you as soon as possible."}),n.jsxs("form",{onSubmit:g,children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-secondary mb-1",children:"Your Name"}),n.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:f,className:"w-full p-2 border border-border-light rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-secondary mb-1",children:"Email Address"}),n.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:f,className:"w-full p-2 border border-border-light rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-secondary mb-1",children:"Subject"}),n.jsx("input",{type:"text",id:"subject",name:"subject",value:a.subject,onChange:f,className:"w-full p-2 border border-border-light rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-secondary mb-1",children:"Message"}),n.jsx("textarea",{id:"message",name:"message",value:a.message,onChange:f,rows:"5",className:"w-full p-2 border border-border-light rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),n.jsx(Ze.button,{type:"submit",disabled:o,className:`w-full py-2 px-4 ${o?"bg-primary/70":"bg-primary hover:bg-primary/80"} text-white rounded-md transition-colors duration-200 flex items-center justify-center`,whileHover:{scale:1.02},whileTap:{scale:.98},children:o?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"mr-2",children:"Sending..."}),n.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]}):"Send Message"})]})]}),n.jsxs("div",{className:"bg-background-light rounded-lg shadow-md p-6 border border-border-light",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4 text-primary",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 bg-primary/10 p-3 rounded-full text-primary",children:n.jsx("i",{className:"bx bx-envelope text-xl"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-md font-medium text-secondary",children:"Email"}),n.jsx("p",{className:"text-primary hover:underline",children:"support@foremade.com"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 bg-primary/10 p-3 rounded-full text-primary",children:n.jsx("i",{className:"bx bx-map text-xl"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-md font-medium text-secondary",children:"Address"}),n.jsx("p",{className:"text-secondary",children:"United Kingdom"})]})]})]})]})]}),r==="faq"&&n.jsxs(Ze.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"max-w-3xl mx-auto",children:[n.jsx("h2",{className:"text-xl font-semibold mb-6 text-center",children:"Frequently Asked Questions"}),n.jsx("div",{className:"space-y-4",children:u.map((y,b)=>n.jsxs(Ze.div,{className:"border border-border-light rounded-lg overflow-hidden bg-background-light",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.1},children:[n.jsxs("button",{className:"w-full px-6 py-4 text-left bg-background-light hover:bg-background-dark flex justify-between items-center",onClick:()=>x(b),children:[n.jsx("span",{className:"font-medium text-primary",children:y.question}),n.jsx(Ze.i,{className:`bx ${t===b?"bx-minus":"bx-plus"} text-primary`,animate:{rotate:t===b?180:0},transition:{duration:.3}})]}),n.jsx(Ze.div,{className:"px-6 pb-4",initial:{height:0,opacity:0},animate:{height:t===b?"auto":0,opacity:t===b?1:0},transition:{duration:.3},style:{overflow:"hidden"},children:n.jsx("p",{className:"text-secondary",children:y.answer})})]},b))}),n.jsxs("div",{className:"mt-8 text-center",children:[n.jsx("p",{className:"text-secondary mb-4",children:"Can't find what you're looking for?"}),n.jsx(Ze.button,{onClick:()=>e("contact"),className:"px-6 py-2 bg-primary text-white rounded-md hover:bg-primary/80 transition-colors duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Contact Support"})]})]}),r==="policies"&&n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsx("h2",{className:"text-xl font-semibold mb-6 text-center",children:"Policies & Terms"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map((y,b)=>n.jsxs(he,{to:y.url,className:"bg-background-light rounded-lg shadow-md p-6 flex flex-col items-center hover:shadow-lg transition-shadow duration-200 hover:text-primary border border-border-light",children:[n.jsx("div",{className:"bg-primary/10 p-4 rounded-full text-primary mb-4",children:n.jsx("i",{className:"bx bx-file text-2xl"})}),n.jsx("h3",{className:"text-lg font-medium text-primary",children:y.name}),n.jsxs("p",{className:"text-secondary mt-2 flex items-center",children:["Read more",n.jsx("i",{className:"bx bx-right-arrow-alt ml-1 text-primary"})]})]},b))})]})]})},Ele=()=>n.jsx("div",{className:"min-h-screen bg-background-light py-8",children:n.jsxs("div",{className:"max-w-3xl mx-auto policy-card",children:[n.jsx("div",{className:"policy-header text-primary",children:"FOREMADE Marketplace – Terms and Conditions"}),n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-primary/10 rounded-full",children:n.jsx("i",{className:"bx bx-file text-5xl text-primary"})}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-primary mb-2",children:"FOREMADE Marketplace – Terms and Conditions"}),n.jsx("p",{className:"text-secondary max-w-xl",children:"Please read these terms and conditions carefully before using the FOREMADE platform."})]}),n.jsxs("div",{className:"policy-content",children:[n.jsxs("p",{className:"mb-2 text-secondary",children:[n.jsx("strong",{children:"Last Updated:"})," July 5, 2024"]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"1. Eligibility"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Be at least 18 years old (or have guardian consent if underage)"}),n.jsx("li",{children:"Provide truthful and accurate registration details"}),n.jsx("li",{children:"Not be restricted from using digital platforms by applicable law"})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"2. Account Registration"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Keep your login details secure"}),n.jsx("li",{children:"Be responsible for all activity under your account"}),n.jsx("li",{children:"Notify FOREMADE of any unauthorised access or misuse"})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"3. Selling on FOREMADE"}),n.jsxs("p",{className:"mb-4",children:["Sellers must list only legal, original, and accurately described items, fulfill orders on time, maintain good service, and follow our policies. See our ",n.jsx(he,{to:"/seller-agreement",className:"policy-link",children:"Seller Agreement"}),"."]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"4. Buying on FOREMADE"}),n.jsx("p",{className:"mb-4",children:"Buyers must complete purchases in good faith, avoid fraud, and raise issues respectfully within the platform."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"5. Listing and Selling Fees"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsxs("li",{children:["No listing fees for up to 300 items/month (",n.jsx(he,{to:"/sellers-guide",className:"policy-link",children:"Standard Sellers"}),")"]}),n.jsxs("li",{children:["Up to 400 items/month (",n.jsx(he,{to:"/pro-seller-guide",className:"policy-link",children:"Pro Sellers"}),")"]}),n.jsx("li",{children:"Fees apply only for extra listings, communicated in advance"})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"6. Inclusive Pricing"}),n.jsx("p",{className:"mb-4",children:"All prices shown are final and include taxes, buyer protection, and handling fees. No hidden costs at checkout."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"7. Payments & Payouts"}),n.jsx("p",{className:"mb-4",children:"Payments are released after buyer confirmation. Seller wallets show pending balance until approved by FOREMADE, after which they can withdraw."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"8. Returns & Refunds"}),n.jsx("p",{className:"mb-4",children:"7-day return window. Sellers respond within 2 business days. Refunds issued after successful return. Exceptions apply."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"9. Prohibited Items"}),n.jsx("p",{className:"mb-4",children:"Illegal, counterfeit, restricted, or infringing items are banned. Violations lead to suspension."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"10. Disputes & Resolution"}),n.jsx("p",{className:"mb-4",children:"Direct communication encouraged. FOREMADE may step in and issue a final decision if needed."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"11. Intellectual Property"}),n.jsx("p",{className:"mb-4",children:"Users grant FOREMADE a non-exclusive license to use uploaded content. Do not upload content you don't own."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"12. Platform Use & Conduct"}),n.jsx("p",{className:"mb-4",children:"No fraud, abuse, or misuse of the platform. Violators may be banned."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"13. Limitation of Liability"}),n.jsx("p",{className:"mb-4",children:"FOREMADE is not liable for third-party delays, misuse of products, or losses from transactions."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"14. Account Suspension & Termination"}),n.jsx("p",{className:"mb-4",children:"FOREMADE can suspend or terminate accounts violating terms without prior notice."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"15. Privacy and Data Use"}),n.jsxs("p",{className:"mb-4",children:["We respect your data. See our ",n.jsx(he,{to:"/privacy-policy",className:"policy-link",children:"Privacy Policy"})," for more details."]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"16. Changes to These Terms"}),n.jsx("p",{className:"mb-4",children:"We may update these terms. Continued use implies acceptance of updates."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"17. Contact Us"}),n.jsxs("p",{className:"mb-4",children:["Email: support@foremade.com",n.jsx("br",{}),"Website: www.foremade.com",n.jsx("br",{}),"See also our ",n.jsx(he,{to:"/shipping-policy",className:"policy-link",children:"Shipping Policy"}),"."]})]}),n.jsxs("footer",{className:"policy-footer text-secondary",children:["© ",new Date().getFullYear()," Foremade. All rights reserved."]})]})});function bs(){const[r,e]=E.useState(window.innerWidth>=768),t=Br();E.useEffect(()=>{const i=()=>{e(window.innerWidth>=768)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const s=()=>{e(!r)},a=[{path:"/admin/dashboard",icon:FN,label:"Dashboard"},{path:"/admin/users",icon:eO,label:"Manage Users"},{path:"/admin/sellers-wallet",icon:y2,label:"Account Management"},{path:"/admin/sellers/payouts",icon:lee,label:"Approve Payments"},{path:"/admin/transactions",icon:FJ,label:"Transactions"},{path:"/admin/products",icon:gd,label:"Manage Products"},{path:"/admin/edit/categories",icon:q5,label:"Categories"},{path:"/admin/edit/fees",icon:OJ,label:"Edit Fees"},{path:"/admin/notifications",icon:RJ,label:"Notifications"},{path:"/admin/edit/banners",icon:Wc,label:"Edit Banners & Others"},{path:"/admin/edit/daily-deals",icon:lte,label:"Daily Deals"},{path:"/admin/manager",icon:Pee,label:"Admin Manager"},{path:"/admin/pro-sellers-requests",icon:$5,label:"Admin Pro Sellers"},{path:"/admin/bumped-products",icon:Xf,label:"Admin Bumped Products"},{path:"/admin/users-phone",icon:zee,label:"Users Phone"}];return n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:s,className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-blue-600 text-white rounded-lg focus:outline-none hover:bg-blue-700 transition-colors","aria-label":r?"Close menu":"Open menu",children:r?n.jsx(Yc,{className:"w-6 h-6"}):n.jsx(G5,{className:"w-6 h-6"})}),n.jsxs("div",{className:`fixed top-0 left-0 w-64 h-full bg-gradient-to-b from-gray-900 to-gray-800 text-white shadow-xl transform transition-transform duration-300 ease-in-out z-40
          ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:block max-h-[calc(100vh)] overflow-y-auto overflow-x-auto`,children:[n.jsx(he,{to:"/",onClick:()=>window.innerWidth<768&&e(!1),children:n.jsxs("div",{className:"p-4 border-b border-gray-700 flex-col items-center gap-2",children:[n.jsx("img",{src:kh,alt:"Logo",className:"h-10"}),n.jsx("span",{className:"text-sm font-bold",children:"Admin Panel"})]})}),n.jsx("nav",{className:"mt-4 px-2",children:n.jsx("ul",{className:"space-y-1 whitespace-nowrap",children:a.map(i=>n.jsx("li",{children:n.jsxs(he,{to:i.path,onClick:()=>window.innerWidth<768&&e(!1),className:`flex items-center p-3 rounded-lg transition-all duration-200 ${t.pathname===i.path?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[n.jsx(i.icon,{className:"w-5 h-5 mr-3"}),n.jsx("span",{className:"text-sm font-medium",children:i.label})]})},i.path))})})]}),r&&n.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:s})]})}function qI({variants:r=[],imageUrls:e=[],isModal:t,product:s={},onUpdateProduct:a}){const[i,o]=E.useState(0),[l,c]=E.useState(0),[u,h]=E.useState(!1),[f,g]=E.useState({...s,variants:r.length?r.map(O=>({...O,imageUrls:O.imageUrls||[],price:O.price||0,stock:O.stock||0,color:O.color||"",size:O.size||""})):[],imageUrls:s.imageUrls||e||[]}),x=r.length?f.variants[i]||{imageUrls:[]}:null,y=r.length?x.imageUrls.map(O=>({type:"image",url:O})).filter(O=>O.url):f.imageUrls.map(O=>({type:"image",url:O})).filter(O=>O.url);if(!y.length&&!u)return n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm flex items-center gap-1",children:"No media available."});const b=O=>{O.stopPropagation(),c(V=>V===0?y.length-1:V-1)},v=O=>{O.stopPropagation(),c(V=>V===y.length-1?0:V+1)},N=O=>{O.stopPropagation(),o(V=>V===0?f.variants.length-1:V-1),c(0)},k=O=>{O.stopPropagation(),o(V=>V===f.variants.length-1?0:V+1),c(0)},A=()=>{h(!u),u||g({...s,variants:r.length?r.map(O=>({...O,imageUrls:O.imageUrls||[],price:O.price||0,stock:O.stock||0,color:O.color||"",size:O.size||""})):[],imageUrls:s.imageUrls||e||[]})},R=(O,V)=>{g(Y=>({...Y,[O]:V}))},_=(O,V,Y)=>{g(H=>({...H,variants:H.variants.map(($,X)=>X===O?{...$,[V]:Y}:$)}))},I=(O,V,Y)=>{r.length?g(H=>({...H,variants:H.variants.map(($,X)=>X===O?{...$,imageUrls:$.imageUrls.map((G,B)=>B===V?Y:G)}:$)})):g(H=>({...H,imageUrls:H.imageUrls.map(($,X)=>X===V?Y:$)}))},P=O=>{r.length?g(V=>({...V,variants:V.variants.map((Y,H)=>H===O?{...Y,imageUrls:[...Y.imageUrls,""]}:Y)})):g(V=>({...V,imageUrls:[...V.imageUrls,""]}))},T=(O,V)=>{r.length?g(Y=>({...Y,variants:Y.variants.map((H,$)=>$===O?{...H,imageUrls:H.imageUrls.filter((X,G)=>G!==V)}:H)})):g(Y=>({...Y,imageUrls:Y.imageUrls.filter((H,$)=>$!==V)})),l>=y.length-1&&c(0)},D=()=>{g(O=>({...O,variants:[...O.variants,{color:"",size:"",price:0,stock:0,imageUrls:[]}]}))},L=O=>{g(V=>({...V,variants:V.variants.filter((Y,H)=>H!==O)})),i>=f.variants.length-1&&o(0)},F=()=>{a&&a({...f,variants:f.variants.map(O=>({...O,price:parseFloat(O.price)||0,stock:parseInt(O.stock)||0,imageUrls:O.imageUrls.filter(V=>V.trim())})),imageUrls:f.imageUrls.filter(O=>O.trim())}),h(!1)},z=y[l];return n.jsxs("div",{className:`relative ${t?"h-full":"h-64"} p-2 rounded-xl overflow-hidden shadow-md`,children:[n.jsxs("div",{className:"w-full h-full relative",children:[z&&n.jsx("img",{src:z.url,alt:`${s.name||"Product"} ${r.length?`variant ${i+1}`:""} image`,className:"w-full h-full object-cover rounded-xl transition-transform duration-300 hover:scale-105",onError:O=>{O.target.src="https://via.placeholder.com/150",console.error(`Failed to load image: ${z.url}`)}}),y.length>1&&t&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:b,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Previous media","aria-label":"Previous media",children:n.jsx(rR,{size:20})}),n.jsx("button",{onClick:v,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Next media","aria-label":"Next media",children:n.jsx(vf,{size:20})}),n.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2 bg-gray-900 bg-opacity-70 p-1 rounded-full",children:y.map((O,V)=>n.jsx("button",{onClick:()=>c(V),className:`w-2 h-2 rounded-full transition-all duration-200 ${V===l?"bg-blue-500 w-3":"bg-gray-400 hover:bg-gray-500"}`,"aria-label":`Go to media ${V+1}`},V))})]}),r.length>1&&t&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:N,className:"absolute left-2 top-1/4 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Previous variant","aria-label":"Previous variant",children:n.jsx(rR,{size:20})}),n.jsx("button",{onClick:k,className:"absolute right-2 top-1/4 -translate-y-1/2 bg-gray-900 bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80 transition-all duration-200 focus:outline-none",title:"Next variant","aria-label":"Next variant",children:n.jsx(vf,{size:20})})]}),n.jsxs("div",{className:"absolute top-2 right-2 bg-gray-900 bg-opacity-70 text-white px-2 py-1 rounded-full text-xs flex items-center gap-1",children:[n.jsx(Wc,{size:12}),r.length?`Variant ${i+1}/${f.variants.length} | `:"","Image ",l+1,"/",y.length]}),t&&n.jsx("div",{className:"absolute top-2 left-2",children:u?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:F,className:"bg-emerald-600 text-white p-2 rounded-full hover:bg-emerald-700 transition-all duration-200 focus:outline-none",title:"Save edits","aria-label":"Save edits",children:n.jsx(qJ,{size:16})}),n.jsx("button",{onClick:A,className:"bg-red-600 text-white p-2 rounded-full hover:bg-red-700 transition-all duration-200 focus:outline-none",title:"Cancel edits","aria-label":"Cancel edits",children:n.jsx(Yc,{size:16})})]}):n.jsx("button",{onClick:A,className:"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition-all duration-200 focus:outline-none",title:"Edit product","aria-label":"Edit product",children:n.jsx(Ju,{size:16})})})]}),u&&t&&n.jsxs("div",{className:"mt-4 p-2 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-y-auto max-h-[40vh]",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Edit Product Details"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Name"}),n.jsx("input",{type:"text",value:f.name||"",onChange:O=>R("name",O.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Category"}),n.jsx("input",{type:"text",value:f.category||"",onChange:O=>R("category",O.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Condition"}),n.jsx("input",{type:"text",value:f.condition||"",onChange:O=>R("condition",O.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Tags (comma-separated)"}),n.jsx("input",{type:"text",value:Array.isArray(f.tags)?f.tags.join(", "):f.tags||"",onChange:O=>R("tags",O.target.value.split(", ").filter(Boolean)),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),r.length?n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Variants"}),f.variants.map((O,V)=>n.jsxs("div",{className:"mb-4 p-2 border border-gray-300 dark:border-gray-600 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("h5",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:["Variant ",V+1]}),n.jsx("button",{onClick:()=>L(V),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-all duration-200",title:"Remove variant","aria-label":"Remove variant",children:n.jsx(Yc,{size:14})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Color"}),n.jsx("input",{type:"text",value:O.color||"",onChange:Y=>_(V,"color",Y.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Size"}),n.jsx("input",{type:"text",value:O.size||"",onChange:Y=>_(V,"size",Y.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Price (₦)"}),n.jsx("input",{type:"number",value:O.price||"",onChange:Y=>_(V,"price",Y.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Stock"}),n.jsx("input",{type:"number",value:O.stock||"",onChange:Y=>_(V,"stock",Y.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Images"}),O.imageUrls.map((Y,H)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("input",{type:"text",value:Y||"",onChange:$=>I(V,H,$.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter image URL"}),n.jsx("button",{onClick:()=>T(V,H),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-all duration-200",title:"Remove image","aria-label":"Remove image",children:n.jsx(Yc,{size:14})})]},H)),n.jsxs("button",{onClick:()=>P(V),className:"mt-2 text-blue-600 hover:underline text-sm flex items-center gap-1",children:[n.jsx(Wc,{size:14})," Add Image"]})]})]})]},V)),n.jsxs("button",{onClick:D,className:"mt-2 text-blue-600 hover:underline text-sm flex items-center gap-1",children:[n.jsx(Wc,{size:14})," Add Variant"]})]}):n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Images"}),f.imageUrls.map((O,V)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("input",{type:"text",value:O||"",onChange:Y=>I(0,V,Y.target.value),className:"w-full p-1 border border-gray-300 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter image URL"}),n.jsx("button",{onClick:()=>T(0,V),className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-all duration-200",title:"Remove image","aria-label":"Remove image",children:n.jsx(Yc,{size:14})})]},V)),n.jsxs("button",{onClick:()=>P(0),className:"mt-2 text-blue-600 hover:underline text-sm flex items-center gap-1",children:[n.jsx(Wc,{size:14})," Add Image"]})]})]})]})]})}function XI({productId:r,currentStatus:e,onStatusChange:t,onDelete:s,loading:a,onEdit:i,isModal:o}){return n.jsxs("div",{className:`flex ${o?"justify-end mt-4":"space-x-2"}`,children:[e!=="approved"&&n.jsx("button",{onClick:l=>{l.stopPropagation(),t(r,"approved")},disabled:a,className:"py-2 px-2 m-1 bg-gray-800 text-white rounded-xl text-sm hover:bg-gray-600 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Approve product for sale",children:a?n.jsx(bx,{size:16,className:"animate-spin"}):n.jsx(Mg,{size:16})}),e!=="rejected"&&n.jsx("button",{onClick:l=>{l.stopPropagation(),t(r,"rejected")},disabled:a,className:"py-2 px-4 m-1 bg-gray-600 text-white rounded-xl text-sm hover:bg-amber-900 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Reject product",children:a?n.jsx(bx,{size:16,className:"animate-spin"}):n.jsx(Uu,{size:16})}),n.jsx("button",{onClick:l=>{l.stopPropagation(),s(r)},disabled:a,className:"py-2 px-4 m-1 bg-gray-600 text-white rounded-xl text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Delete product permanently",children:a?n.jsx(bx,{size:16,className:"animate-spin"}):n.jsx(Z5,{size:16})}),n.jsx("button",{onClick:l=>{l.stopPropagation(),i(r)},disabled:a,className:"py-2 px-4 m-1 bg-gray-600 text-white rounded-xl text-sm hover:bg-gray-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",title:"Edit product details",children:a?n.jsx(bx,{size:16,className:"animate-spin"}):n.jsx(Ju,{size:16})})]})}function GI({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-xl shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-500 text-white":"bg-green-500 text-white"} flex items-center gap-2`,children:[t.type==="error"?n.jsx(Uu,{size:20}):n.jsx(Mg,{size:20}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg hover:text-gray-200",children:"✕"})]},t.id))})}function Tle(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function Ple(){const{alerts:r,addAlert:e,removeAlert:t}=Tle(),[s,a]=E.useState({products:[]}),[i,o]=E.useState(!0),[l,c]=E.useState(""),[u,h]=E.useState(null),[f,g]=E.useState("default"),[x,y]=E.useState(!1),[b,v]=E.useState(!1),[N,k]=E.useState(""),[A,R]=E.useState(""),[_,I]=E.useState(null);E.useEffect(()=>{(async()=>{try{const B=await Ke(_e(J,"products")),Q=await Promise.all(B.docs.map(async ee=>{const se={id:ee.id,...ee.data()},le=await P(se.id);return{...se,buyerCount:le}}));a({products:Q})}catch(B){console.error("Error fetching data:",B),c("Failed to fetch data: "+B.message),e("Failed to load products.","error")}finally{o(!1)}})()},[e]),E.useEffect(()=>{const G=B=>{B.key==="Escape"&&(u||b)&&V()};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[u,b]);const P=async G=>{try{return(await Ke(_e(J,"orders"))).docs.filter(Q=>Q.data().items.some(ee=>ee.productId===G)).length}catch(B){return console.error("Error fetching buyer count:",B),0}},T=async(G,B)=>{const Q=s.products.find(ee=>ee.id===G);if(B==="rejected"){I(Q),v(!0);return}if(window.confirm(`Are you sure you want to ${B==="approved"?"approve":"reject"} this product?`)){o(!0);try{const ee=Ne(J,"products",G);await Qr(ee,{status:B}),a(le=>({...le,products:le.products.map(Ee=>Ee.id===G?{...Ee,status:B}:Ee)})),e(`Product ${B==="approved"?"approved":"rejected"} successfully! 🎉`,"success");const se=B==="approved"?"/send-product-approved-email":"/send-product-rejected-email";try{await ss.post(`https://foremade-backend.onrender.com${se}`,{productId:G,productName:Q.name,sellerId:Q.sellerId,sellerEmail:Q.sellerEmail||await L(Q.sellerId),...B==="rejected"&&{reason:N||A}}),e(`${B==="approved"?"Approval":"Rejection"} email sent to seller! 📧`,"success")}catch(le){console.error(`Error sending ${B} email:`,le),e(`Failed to send ${B} email.`,"error")}}catch(ee){console.error("Error updating product status:",ee),e("Failed to update product status.","error")}finally{o(!1)}}},D=async()=>{if(!N&&!A){e("Please select or enter a rejection reason.","error");return}const G=N==="Other"?A:N;if(!G){e("Please enter a custom reason.","error");return}o(!0);try{const B=_.id,Q=Ne(J,"products",B);await Qr(Q,{status:"rejected"}),a(ee=>({...ee,products:ee.products.map(se=>se.id===B?{...se,status:"rejected"}:se)})),e("Product rejected successfully! 🎉","success");try{await ss.post("https://foremade-backend.onrender.com/send-product-rejected-email",{productId:B,productName:_.name,sellerId:_.sellerId,sellerEmail:_.sellerEmail||await L(_.sellerId),reason:G}),e("Rejection email sent to seller! 📧","success")}catch(ee){console.error("Error sending rejection email:",ee),e("Failed to send rejection email.","error")}}catch(B){console.error("Error rejecting product:",B),e("Failed to reject product.","error")}finally{o(!1),v(!1),k(""),R(""),I(null)}},L=async G=>{try{const B=await it(Ne(J,"users",G));return B.exists()?B.data().email:null}catch(B){return console.error("Error fetching seller email:",B),null}},F=async G=>{if(window.confirm("Are you sure you want to delete this product?")){o(!0);try{await na(Ne(J,"products",G)),a(B=>({...B,products:B.products.filter(Q=>Q.id!==G)})),e("Product deleted successfully! 🎉","success")}catch(B){console.error(`Error deleting product ${G}:`,B),e("Failed to delete product.","error")}finally{o(!1)}}},z=(G,B)=>{B.stopPropagation(),console.log("Card clicked:",G.id,G.name),h(G)},O=async G=>{if(!G.name||G.variants.some(B=>!B.price||!B.stock||!B.color)){e("Please fill all required fields for all variants.","error");return}o(!0);try{const B=Ne(J,"products",G.id);await Qr(B,{name:G.name,category:G.category,condition:G.condition,tags:G.tags,variants:G.variants.map(Q=>({...Q,price:parseFloat(Q.price)||0,stock:parseInt(Q.stock)||0})),imageUrls:G.imageUrls||[]}),a(Q=>({...Q,products:Q.products.map(ee=>ee.id===G.id?{...ee,...G}:ee)})),e("Product updated successfully! 🎉","success"),h(null)}catch(B){console.error("Error updating product:",B),e("Failed to update product.","error")}finally{o(!1)}},V=()=>{h(null),v(!1),k(""),R(""),I(null)},H=(G=>{const B=[...G];switch(f){case"name-asc":return B.sort((Q,ee)=>(Q.name||"").localeCompare(ee.name||""));case"name-desc":return B.sort((Q,ee)=>(ee.name||"").localeCompare(Q.name||""));case"price-asc":return B.sort((Q,ee)=>{const se=Q.variants&&Q.variants.length?Math.min(...Q.variants.map(Ee=>Ee.price||0)):Q.price||0,le=ee.variants&&ee.variants.length?Math.min(...ee.variants.map(Ee=>Ee.price||0)):ee.price||0;return se-le});case"price-desc":return B.sort((Q,ee)=>{const se=Q.variants&&Q.variants.length?Math.max(...Q.variants.map(Ee=>Ee.price||0)):Q.price||0;return(ee.variants&&ee.variants.length?Math.max(...ee.variants.map(Ee=>Ee.price||0)):ee.price||0)-se});case"status-pending":return B.sort(Q=>Q.status==="pending"?-1:1);case"status-approved":return B.sort(Q=>Q.status==="approved"?-1:1);case"status-not-approved":return B.sort(Q=>Q.status!=="approved"&&Q.status!=="pending"?-1:1);default:return B}})(s.products),$=s.products.filter(G=>G.status==="approved").length,X=s.products.filter(G=>G.status!=="approved").length;return i?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):l?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-xl shadow-md flex items-center gap-2",children:[n.jsx(Uu,{size:20}),n.jsx("p",{children:l})]})})}),n.jsx(GI,{alerts:r,removeAlert:t})]}):n.jsxs("div",{className:"flex min-h-screen bg-gray-100 dark:bg-gray-900",children:[n.jsx(bs,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-4",children:n.jsxs("div",{className:"container mx-auto px-4 py-7",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-200 mb-4 sm:mb-0 flex items-center gap-2",children:[n.jsx(Mg,{size:24,className:"text-green-600 dark:text-green-400"}),"Product Verification Hub"]}),n.jsxs("button",{onClick:()=>y(!x),className:"py-2 px-4 bg-blue-950 text-white rounded-lg text-sm hover:bg-blue-900 flex items-center gap-2 transition-all duration-200 shadow-md",children:[n.jsx("i",{className:`bx bx-${x?"x":"filter-alt"}`}),x?"Close Filters":"Filters & Sort"]})]}),x&&n.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md mb-6 animate-slide-down",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 items-center gap-1",children:["Sort Products",n.jsx("i",{className:"bx bx-info-circle text-gray-500 dark:text-gray-400 group-hover:text-blue-500 cursor-help",title:"Sort products by name, price, or status"})]}),n.jsxs("select",{value:f,onChange:G=>g(G.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"default",children:"Default"}),n.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),n.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),n.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),n.jsx("option",{value:"price-desc",children:"Price (High to Low)"}),n.jsx("option",{value:"status-pending",children:"Status: Pending"}),n.jsx("option",{value:"status-approved",children:"Status: Approved"}),n.jsx("option",{value:"status-not-approved",children:"Status: Not Approved"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stats"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg text-sm shadow-md",children:["Approved: ",$]}),n.jsxs("div",{className:"bg-red-700 text-white px-4 py-2 rounded-lg text-sm shadow-md",children:["Not Approved: ",X]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-6",children:[H.map(G=>n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-lg transition-all duration-200 shadow-md",onClick:B=>z(G,B),children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:G.name||"Unnamed Product"}),n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${G.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":G.status==="approved"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:G.status==="pending"?"Pending":G.status==="approved"?"Approved":"Not Approved"})]}),n.jsx(qI,{variants:G.variants||[],imageUrls:G.imageUrls||[]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1",children:[n.jsx(Vl,{size:14})," Seller: ",G.sellerName||"Unknown"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1",children:[n.jsx(d0,{size:14})," Buyers: ",G.buyerCount||0]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Variants: ",G.variants?.length||0]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Price Range: ₦",G.variants&&G.variants.length?Math.min(...G.variants.map(B=>B.price||0)).toLocaleString("en-NG"):(G.price||0).toLocaleString("en-NG")," - ₦",G.variants&&G.variants.length?Math.max(...G.variants.map(B=>B.price||0)).toLocaleString("en-NG"):(G.price||0).toLocaleString("en-NG")]}),n.jsx(XI,{productId:G.id,currentStatus:G.status,onStatusChange:T,onDelete:F,loading:i,onEdit:B=>z(G,B)})]},G.id)),H.length===0&&n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mt-4 col-span-3 italic",children:"No products to verify."})]})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 m-4 rounded-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto shadow-lg flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"w-full md:w-1/2 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-2",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:u.name||"Unnamed Product"}),n.jsx("button",{onClick:V,className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 text-2xl",title:"Close",children:n.jsx("i",{className:"bx bx-x"})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[n.jsx(sR,{size:18,className:"text-green-600 dark:text-green-400"})," Details"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Seller:"})," ",u.sellerName||"Unknown Seller"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Status:"})," ",u.status==="pending"?"Pending":u.status==="approved"?"Approved":"Not Approved"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Category:"})," ",u.category||"Uncategorized"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Condition:"})," ",u.condition||"New"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Rating:"})," ",u.rating||"N/A"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Buyers:"})," ",u.buyerCount||0]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[n.jsx(Ju,{size:18,className:"text-green-600 dark:text-green-400"})," Tags"]}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Array.isArray(u.tags)?u.tags.join(", "):"None"})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[n.jsx(Vl,{size:18,className:"text-green-600 dark:text-green-400"})," Seller Info"]}),n.jsxs("p",{className:"text-[13px] mt-3",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Name:"})," ",u.seller?.name||"Unknown Seller"]}),n.jsxs("p",{className:"text-[13px] mt-4",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"ID:"})," ",u.seller?.id||"N/A"]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[n.jsx(d0,{size:18,className:"text-green-600 dark:text-green-400"})," Variants"]}),u.variants&&u.variants.length>0?n.jsx("div",{className:"space-y-4 mt-2",children:u.variants.map((G,B)=>n.jsxs("div",{className:"p-2 border border-gray-200 dark:border-gray-700 rounded-lg",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Variant ",B+1]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Color:"})," ",G.color||"N/A"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Size:"})," ",G.size||"N/A"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Price:"})," ₦",(G.price||0).toLocaleString("en-NG",{minimumFractionDigits:2})]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Stock:"})," ",G.stock||0," units"]}),n.jsxs("p",{className:"text-[13px]",children:[n.jsx("span",{className:"bg-green-100 dark:bg-green-900 rounded-full p-1",children:"Images:"})," ",G.imageUrls?.length||0]})]})]},B))}):n.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-400",children:"No variants available."})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[n.jsx(d0,{size:18,className:"text-green-600 dark:text-green-400"})," Reviews"]}),Array.isArray(u.reviews)&&u.reviews.length>0?n.jsx("ul",{className:"list-disc pl-5 space-y-2",children:u.reviews.map((G,B)=>n.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:[G.comment," ",n.jsxs("span",{className:"text-yellow-500",children:["(Rating: ",G.rating,")"]}),", By: ",G.userName||"Anonymous"]},B))}):n.jsx("p",{className:"text-[13px] text-gray-600 dark:text-gray-400",children:"No reviews available yet."})]}),n.jsx(XI,{productId:u.id,currentStatus:u.status,onStatusChange:T,onDelete:F,loading:i,onEdit:G=>z(u,G),isModal:!0})]}),n.jsxs("div",{className:"w-full md:w-1/2",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2 mb-4",children:[n.jsx(sR,{size:18,className:"text-green-600 dark:text-green-400"})," Variant Media Preview"]}),n.jsx(qI,{variants:u.variants||[],imageUrls:u.imageUrls||[],isModal:!0,product:u,onUpdateProduct:O})]})]})}),b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fade-in",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl w-full max-w-md shadow-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-2",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[n.jsx(Uu,{size:20,className:"text-red-600 dark:text-red-400"})," Reject Product"]}),n.jsx("button",{onClick:V,className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 text-2xl",title:"Close",children:n.jsx("i",{className:"bx bx-x"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reason for Rejection"}),n.jsxs("select",{value:N,onChange:G=>k(G.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Select a reason"}),n.jsx("option",{value:"Missing product image",children:"Missing product image"}),n.jsx("option",{value:"Incomplete product description",children:"Incomplete product description"}),n.jsx("option",{value:"Invalid price",children:"Invalid price"}),n.jsx("option",{value:"Product violates guidelines",children:"Product violates guidelines"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),N==="Other"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Custom Reason"}),n.jsx("textarea",{value:A,onChange:G=>R(G.target.value),placeholder:"Enter custom reason...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",rows:"4"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:V,className:"py-2 px-4 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-200",children:"Cancel"}),n.jsxs("button",{onClick:D,className:"py-2 px-4 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-all duration-200 flex items-center gap-2",disabled:i,children:[i?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx(Uu,{size:16}),"Reject Product"]})]})]})]})}),n.jsx(GI,{alerts:r,removeAlert:t})]})}_h.register(eL,O2,U2,z2,F2,L2);function Rle(){const[r,e]=E.useState({users:0,admins:0,products:0,approvedProducts:0,rejectedProducts:0}),[t,s]=E.useState(!0),[a,i]=E.useState(""),[o,l]=E.useState([]),[c,u]=E.useState([]),[h,f]=E.useState(!1);E.useEffect(()=>{(async()=>{try{const[k,A,R,_,I]=await Promise.all([Ke(_e(J,"users")),Ke(_e(J,"admins")),Ke(_e(J,"products")),Ke(ft(_e(J,"products"),rt("status","==","approved"))),Ke(ft(_e(J,"products"),rt("status","==","rejected")))]);e({users:k.size,admins:A.size,products:R.size,approvedProducts:_.size,rejectedProducts:I.size})}catch(k){i("Failed to fetch dashboard stats: "+k.message)}finally{s(!1)}})()},[]);const g=async()=>{f(!0);try{const N=ve.currentUser;if(!N)throw new Error("Not authenticated");const k=await N.getIdToken(),R=await fetch("https://foremade-backend.onrender.com/api/admin/all-pro-sellers",{headers:{Authorization:`Bearer ${k}`}}),_=await R.json();R.ok&&_.status==="success"?l(_.approvals||[]):xe.error(_.message||"Failed to fetch pro seller requests")}catch(N){xe.error(N.message||"Failed to fetch pro seller requests")}finally{f(!1)}};E.useEffect(()=>{g()},[]);const x=async(N,k)=>{try{const A=ve.currentUser;if(!A)throw new Error("Not authenticated");const R=await A.getIdToken(),I=await fetch("https://foremade-backend.onrender.com/api/admin/approve-pro-seller",{method:"POST",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"},body:JSON.stringify({proSellerId:N,approve:k})}),P=await I.json();I.ok&&P.status==="success"?(xe.success(P.message||(k?"Pro seller approved":"Pro seller rejected")),g()):xe.error(P.message||"Action failed")}catch(A){xe.error(A.message||"Action failed")}},y={labels:["Users","Admins","Approved Products","Rejected Products"],datasets:[{label:"Counts",data:[r.users,r.admins,r.approvedProducts,r.rejectedProducts],backgroundColor:["#3B82F6","#10B981","#22C55E","#EF4444"],borderColor:["#2563EB","#059669","#16A34A","#DC2626"],borderWidth:1}]},b={labels:["Approved Products","Rejected Products","Pending Products"],datasets:[{label:"Product Status",data:[r.approvedProducts,r.rejectedProducts,r.products-(r.approvedProducts+r.rejectedProducts)],backgroundColor:["#22C55E","#EF4444","#F59E0B"],borderColor:["#16A34A","#DC2626","#D97706"],borderWidth:1}]},v={responsive:!0,plugins:{legend:{position:"top"},tooltip:{enabled:!0}}};return t?n.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[n.jsx(bs,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-pulse",children:Array.from({length:3}).map((N,k)=>n.jsx("div",{className:"bg-gray-200 p-4 rounded-lg h-24"},k))}),n.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"}),n.jsx("div",{className:"bg-gray-200 h-64 rounded-lg"})]})]})})]}):a?n.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[n.jsx(bs,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 rounded-lg dark:bg-red-900 dark:border-red-700",children:n.jsx("p",{className:"text-red-700 dark:text-red-300",children:a})})})})]}):n.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[n.jsx(bs,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Admin Dashboard"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-blue-100 p-4 rounded-lg shadow flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Total Users"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.users})]}),n.jsx("i",{className:"bx bx-user text-3xl text-blue-500"})]}),n.jsxs("div",{className:"bg-green-100 p-4 rounded-lg shadow flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Total Admins"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.admins})]}),n.jsx("i",{className:"bx bx-shield text-3xl text-green-500"})]}),n.jsxs("div",{className:"bg-red-100 p-4 rounded-lg shadow flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Total Products"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.products})]}),n.jsx("i",{className:"bx bx-package text-3xl text-red-500"})]}),n.jsxs("div",{className:"bg-teal-100 p-4 rounded-lg shadow flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Approved Products"}),n.jsx("p",{className:"text-2xl font-bold text-teal-600",children:r.approvedProducts})]}),n.jsx("i",{className:"bx bx-check-circle text-3xl text-teal-500"})]}),n.jsxs("div",{className:"bg-orange-100 p-4 rounded-lg shadow flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Rejected Products"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.rejectedProducts})]}),n.jsx("i",{className:"bx bx-x-circle text-3xl text-orange-500"})]})]}),n.jsxs("div",{className:"mb-10",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Pro Seller Requests"}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 overflow-x-auto",children:h?n.jsx("div",{className:"text-gray-500",children:"Loading..."}):o.length===0?n.jsx("div",{className:"text-gray-500",children:"No pending requests."}):n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"ProSeller ID"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"User ID"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Status"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Created"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Actions"})]})}),n.jsx("tbody",{children:o.map(N=>n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"px-2 py-1",children:N.proSellerId}),n.jsx("td",{className:"px-2 py-1",children:N.userId}),n.jsx("td",{className:"px-2 py-1",children:N.status}),n.jsx("td",{className:"px-2 py-1",children:N.createdAt?new Date(N.createdAt).toLocaleDateString():"-"}),n.jsxs("td",{className:"px-2 py-1 space-x-2",children:[n.jsx("button",{onClick:()=>x(N.proSellerId,!0),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Approve"}),n.jsx("button",{onClick:()=>x(N.proSellerId,!1),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Reject"})]})]},N.proSellerId))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Analytics Overview"}),n.jsx("div",{className:"h-64",children:n.jsx(B2,{data:y,options:v})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Product Status"}),n.jsx("div",{className:"h-64 flex items-center justify-center",children:n.jsx("div",{className:"w-1/2",children:n.jsx(cL,{data:b,options:v})})})]})]})]})})]})}function Ile({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-2 sm:bottom-4 right-2 sm:right-4 z-50 space-y-1 sm:space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-2 sm:p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-1 sm:gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-lg sm:text-xl`}),n.jsx("span",{className:"text-xs sm:text-base",children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg sm:text-xl font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function Dle(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function Mle(){const{alerts:r,addAlert:e,removeAlert:t}=Dle(),[s,a]=E.useState(null),[i,o]=E.useState([]),[l,c]=E.useState(!0);E.useEffect(()=>{const g=ve.onAuthStateChanged(x=>{x?(a(x),c(!1)):(e("Please log in to access this page.","error"),c(!1))});return()=>g()},[e]),E.useEffect(()=>{if(!s)return;const g=ft(_e(J,"notifications"),jg("createdAt","desc")),x=os(g,y=>{try{const b=y.docs.map(v=>({id:v.id,...v.data()}));o(b),c(!1)}catch(b){console.error("Error fetching notifications:",b),e("Failed to load notifications.","error"),c(!1)}},y=>{console.error("Snapshot error:",y),e("Error receiving real-time updates.","error"),c(!1)});return()=>x()},[s,e]);const u=async()=>{if(window.confirm("Are you sure you want to clear all notifications? This cannot be undone.")){c(!0);try{const g=_e(J,"notifications"),y=(await Ke(g)).docs.map(b=>na(b.ref));await Promise.all(y),e("All notifications cleared successfully! 🎉","success")}catch(g){console.error("Error clearing notifications:",g),e("Failed to clear notifications.","error")}finally{c(!1)}}},h=g=>g?(g.toDate?g.toDate():new Date(g)).toLocaleString("en-NG",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",f=g=>{switch(g){case"user_signup":return{icon:"bx-user-plus",color:"text-green-500"};case"product_upload":return{icon:"bx-package",color:"text-blue-500"};case"order_placed":return{icon:"bx-cart",color:"text-yellow-500"};case"payment_failed":return{icon:"bx-credit-card",color:"text-red-500"};default:return{icon:"bx-bell",color:"text-gray-500"}}};return s?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-3 sm:p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-lg sm:max-w-md md:max-w-2xl lg:max-w-5xl bg-white dark:bg-gray-800 p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl shadow-sm",children:[n.jsxs("div",{className:"flex sm:flex-row justify-between items-start sm:items-center mb-3 sm:mb-6",children:[n.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 sm:border-b-0 border-blue-500 pb-2 sm:pb-0 flex items-center gap-1 sm:gap-2",children:[n.jsx("i",{className:"bx bx-bell text-blue-500 text-lg sm:text-xl md:text-2xl"}),"Notifications"]}),i.length>0&&n.jsxs("button",{onClick:u,disabled:l,className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm font-medium text-white bg-red-600 rounded-md sm:rounded-lg hover:bg-red-700 transition-all duration-200 shadow-md ${l?"opacity-50 cursor-not-allowed":""} mt-2 sm:mt-0`,children:[n.jsx("i",{className:"bx bx-trash text-base sm:text-lg"}),n.jsx("span",{children:"Clear All"})]})]}),l?n.jsx("div",{className:"flex justify-center items-center py-4 sm:py-6",children:n.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Loading notifications..."})]})}):i.length===0?n.jsxs("div",{className:"text-center py-6 sm:py-8",children:[n.jsx("i",{className:"bx bx-bell-off text-3xl sm:text-5xl text-gray-400 dark:text-gray-500 mb-2 sm:mb-4"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic text-sm sm:text-base",children:"No notifications found."})]}):n.jsx("ul",{className:"space-y-2 sm:space-y-4",children:i.map(g=>{const{icon:x,color:y}=f(g.type);return n.jsxs("li",{className:"p-2 sm:p-4 bg-gray-50 dark:bg-gray-700 rounded-lg sm:rounded-xl shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200 flex items-start gap-2 sm:gap-4",children:[n.jsx("i",{className:`bx ${x} text-lg sm:text-2xl ${y}`}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[n.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100 text-sm sm:text-base",children:g.message}),n.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1 sm:mt-0",children:h(g.createdAt)})]}),g.details&&n.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 mt-1 sm:mt-2",children:Object.entries(g.details).map(([b,v])=>n.jsxs("span",{children:[n.jsxs("strong",{children:[b.replace("_"," "),":"]})," ",v," ",n.jsx("br",{})]},b))})]})]},g.id)})}),n.jsx(Ile,{alerts:r,removeAlert:t})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-3 sm:p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Loading..."})]})})]})}function Ole({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-3 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-lg`}),n.jsx("span",{className:"text-sm",children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function Lle(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}const KI=(r,e)=>{const t=[r,e].filter(o=>o&&o.trim()),s=t[0]?t[0].slice(0,4).toLowerCase():"user",a=t[1]?t[1].slice(0,3).toLowerCase():"",i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return(s+a).replace(/[^a-z0-9]/g,"")+i},Fle=(r,e)=>e?e.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2):r?r.split("@")[0].slice(0,2).toUpperCase():"??";function Ule(){const r=us(),{alerts:e,addAlert:t,removeAlert:s}=Lle(),[a,i]=E.useState(!1),[o,l]=E.useState(null),[c,u]=E.useState([]),[h,f]=E.useState({email:"",firstName:"",lastName:"",password:"",role:"buyer"}),[g,x]=E.useState({email:"",password:""}),[y,b]=E.useState(null),[v,N]=E.useState(null),[k,A]=E.useState({}),[R,_]=E.useState(!1),[I,P]=E.useState(!1),[T,D]=E.useState(!1),[L,F]=E.useState(!1),[z,O]=E.useState("");E.useEffect(()=>{const ie=ve.onAuthStateChanged(async Ve=>{if(Ve){l(Ve);const ce=await it(Ne(J,"users",Ve.uid));(!ce.exists()||ce.data().role!=="admin")&&t("Unauthorized access.","error")}else t("Please log in as an admin.","error")}),ze=os(_e(J,"users"),Ve=>{const ce=Ve.docs.map(ke=>{const Qe=ke.data();return{id:ke.id,...Qe,role:Qe.role||"buyer",status:Qe.status||"active",profileImage:Qe.profileImage||null}});u(ce)});return()=>{ie(),ze()}},[r]);const V=async ie=>{const ze=_e(J,"products"),Ve=ft(ze,rt("sellerId","==",ie));return os(Ve,ke=>{const Qe=ke.docs.map(me=>{const $e=me.data();return{id:me.id,name:$e.name||"Unnamed Product",imageUrl:$e.imageUrl||null,price:$e.price||0,description:$e.description||"No description available",category:$e.category||"Uncategorized"}});b(me=>me?{...me,products:Qe}:null)})};E.useEffect(()=>{const ie=ze=>{ze.key==="Escape"&&(R||I)&&(_(!1),P(!1))};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[R,I]);const Y=ie=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ie),H=ie=>ie&&ie.length<6?"Password must be at least 6 characters.":"",$=(ie,ze)=>{f(Ve=>({...Ve,[ie]:ze})),A(Ve=>({...Ve,[ie]:""}))},X=(ie,ze)=>{x(Ve=>({...Ve,[ie]:ze})),A(Ve=>({...Ve,[ie]:""}))},G=(ie,ze)=>{N(Ve=>({...Ve,[ie]:ze})),A(Ve=>({...Ve,[ie]:""}))},B=ie=>{const ze={};if(ie.firstName?.trim()||(ze.firstName="First name is required."),ie.lastName?.trim()||(ze.lastName="Last name is required."),ie.email?Y(ie.email)||(ze.email="Please enter a valid email address."):ze.email="Email is required.",ie.password){const Ve=H(ie.password);Ve&&(ze.password=Ve)}return["buyer","seller","pro seller","admin"].includes(ie.role)||(ze.role="Invalid role selected."),ze},Q=ie=>{const ze={};return ie.email?Y(ie.email)||(ze.email="Please enter a valid email address."):ze.email="Email is required.",ie.password?H(ie.password)&&(ze.password=H(ie.password)):ze.password="Password is required.",ze},ee=async ie=>{ie.preventDefault(),A({}),i(!0);const ze=B(h);if(Object.keys(ze).length>0){A(ze),i(!1),t("Please fix the form errors.","error");return}try{const Ve=KI(h.firstName,h.lastName),ke=(await A0(ve,h.email,h.password)).user;await Pf(ke,{displayName:Ve});const Qe={email:h.email,name:`${h.firstName} ${h.lastName}`,username:Ve,role:h.role||"buyer",status:"active",preRegistered:!0,createdAt:new Date().toISOString(),uid:ke.uid,profileImage:null};await Gt(Ne(J,"users",ke.uid),Qe),t(`User ${h.email} added successfully! 🎉`,"success"),f({email:"",firstName:"",lastName:"",password:"",role:"buyer"}),D(!1)}catch(Ve){console.error("Error adding user:",Ve),Ve.code==="auth/email-already-in-use"?A({email:"This email is already in use."}):Ve.code==="auth/invalid-email"?A({email:"Invalid email format."}):Ve.code==="auth/wrong-password"?A({password:"Invalid password."}):t("Failed to add user.","error")}finally{i(!1)}},se=async ie=>{ie.preventDefault(),A({}),i(!0);const ze=Q(g);if(Object.keys(ze).length>0){A(ze),i(!1),t("Please fix the form errors.","error");return}try{const ce=(await A0(ve,g.email,g.password)).user,ke=g.email.split("@")[0];await Pf(ce,{displayName:ke}),await Gt(Ne(J,"users",ce.uid),{email:g.email,name:ke,username:ke,role:"admin",status:"active",preRegistered:!0,createdAt:new Date().toISOString(),uid:ce.uid,profileImage:null}),await Gt(Ne(_e(J,"admins"),ce.uid),{email:g.email,uid:ce.uid,createdAt:new Date().toISOString()}),t(`Admin ${g.email} added successfully! 🎉`,"success"),x({email:"",password:""}),F(!1)}catch(Ve){console.error("Error adding admin:",Ve),Ve.code==="auth/email-already-in-use"?A({email:"This email is already in use."}):t("Failed to add admin.","error")}finally{i(!1)}},le=async ie=>{ie.preventDefault(),A({}),i(!0);const ze=B(v);if(Object.keys(ze).length>0){A(ze),i(!1),t("Please fix the form errors.","error");return}try{const Ve=v.username||KI(v.firstName,v.lastName),ce=Ne(J,"users",v.id);await Qr(ce,{email:v.email,name:`${v.firstName} ${v.lastName}`,username:Ve,role:v.role,updatedAt:new Date().toISOString()}),v.password&&(await n7(ve,v.email),t(`Password reset email sent to ${v.email}! 🔒`,"success")),t(`User ${v.email} updated successfully! ✏️`,"success"),P(!1),N(null)}catch(Ve){console.error("Error updating user:",Ve),t("Failed to update user.","error")}finally{i(!1)}},Ee=async(ie,ze,Ve)=>{if(window.confirm(`Are you sure you want to ${Ve==="suspended"?"unsuspend":"suspend"} ${ze}?`)){i(!0);try{const ce=Ne(J,"users",ie);await Qr(ce,{status:Ve==="suspended"?"active":"suspended",updatedAt:new Date().toISOString()}),t(`User ${ze} ${Ve==="suspended"?"unsuspended":"suspended"} successfully!`,"success")}catch(ce){console.error("Error suspending/unsuspending user:",ce),t("Failed to update user status.","error")}finally{i(!1)}}},ue=async(ie,ze)=>{if(window.confirm(`Are you sure you want to delete ${ze}? This cannot be undone.`)){i(!0);try{await fetch("/send-membership-revoked-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ze})});const Ve=Ne(J,"users",ie);await na(Ve),t(`User ${ze} deleted successfully!`,"success")}catch(Ve){console.error("Error deleting user or sending email:",Ve),t("Failed to delete user or send email.","error")}finally{i(!1)}}},Oe=async ie=>{i(!0);try{const ze=await it(Ne(J,"users",ie.id));if(ze.exists()){const Ve=ze.data(),ce=await V(ie.id);b({...ie,...Ve,unsubscribe:ce})}_(!0)}catch(ze){console.error("Error fetching user details:",ze),t("Failed to fetch user details.","error")}finally{i(!1)}},Pe=ie=>{N({id:ie.id,email:ie.email,firstName:ie.name.split(" ")[0],lastName:ie.name.split(" ").slice(1).join(" ")||"",username:ie.username,role:ie.role,password:""}),P(!0)},Ie=c.filter(ie=>(ie.email?.toLowerCase()||"").includes(z.toLowerCase())||(ie.name?.toLowerCase()||"").includes(z.toLowerCase()));return o?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6",children:n.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-4 sm:mb-6 border-b-2 border-blue-500 pb-2 sm:pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-user text-blue-500 text-lg sm:text-xl"}),"Manage Users"]}),n.jsx("div",{className:"mb-4 sm:mb-6",children:n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 mb-1",children:["Search Users",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Search by email or name"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"}),n.jsx("input",{type:"text",value:z,onChange:ie=>O(ie.target.value),placeholder:"Search by email or name...",className:"w-full py-2 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200"})]})]})}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md mb-4 sm:mb-8",children:[n.jsx("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>D(!T),children:n.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${T?"up":"down"} text-blue-500 text-lg sm:text-xl`}),"Add New User"]})}),T&&n.jsx("div",{className:"mt-4 animate-slide-down",children:n.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[n.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's first name"})]}),n.jsx("input",{type:"text",value:h.firstName,onChange:ie=>$("firstName",ie.target.value),placeholder:"John",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${k.firstName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),k.firstName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),k.firstName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's last name"})]}),n.jsx("input",{type:"text",value:h.lastName,onChange:ie=>$("lastName",ie.target.value),placeholder:"Doe",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${k.lastName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),k.lastName&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),k.lastName]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"User's email address"})]}),n.jsx("input",{type:"email",value:h.email,onChange:ie=>$("email",ie.target.value),placeholder:"john.doe@example.com",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${k.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),k.email&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),k.email]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Password ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Password (min 6 characters)"})]}),n.jsx("input",{type:"password",value:h.password,onChange:ie=>$("password",ie.target.value),placeholder:"Enter password",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${k.password?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),k.password&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),k.password]})]}),n.jsxs("div",{className:"relative group sm:col-span-2",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Role ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Select user role"})]}),n.jsxs("select",{value:h.role,onChange:ie=>$("role",ie.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${k.role?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a,children:[n.jsx("option",{value:"buyer",children:"Buyer"}),n.jsx("option",{value:"seller",children:"Seller"}),n.jsx("option",{value:"pro seller",children:"Pro Seller"}),n.jsx("option",{value:"admin",children:"Admin"})]}),k.role&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),k.role]})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{type:"submit",disabled:a,className:"py-2 px-4 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-sm",children:[a?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-plus"}),a?"Adding...":"Add User"]})})]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md mb-4 sm:mb-8",children:[n.jsx("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>F(!L),children:n.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${L?"up":"down"} text-blue-500 text-lg sm:text-xl`}),"Add New Admin"]})}),L&&n.jsx("div",{className:"mt-4 animate-slide-down",children:n.jsxs("form",{onSubmit:se,className:"space-y-4",children:[n.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Admin's email address"})]}),n.jsx("input",{type:"email",value:g.email,onChange:ie=>X("email",ie.target.value),placeholder:"admin@example.com",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${k.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),k.email&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),k.email]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Password ",n.jsx("span",{className:"text-red-500",children:"*"}),n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Password (min 6 characters)"})]}),n.jsx("input",{type:"password",value:g.password,onChange:ie=>X("password",ie.target.value),placeholder:"Enter password",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 ${k.password?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:a}),k.password&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),k.password]})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{type:"submit",disabled:a,className:"py-2 px-4 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-sm",children:[a?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-plus"}),a?"Adding...":"Add Admin"]})})]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md",children:[n.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 mb-2 sm:mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-ul text-blue-500 text-lg sm:text-xl"}),"All Users"]}),Ie.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic text-sm",children:"No users found."}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Ie.map(ie=>{const ze=ie.role==="buyer"?"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300":ie.role==="seller"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":ie.role==="pro seller"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":ie.role==="admin"?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":"bg-gray-100 text-gray-700",Ve=ie.profileImage||null,ce=Fle(ie.email,ie.name);return n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>Oe(ie),children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ve?n.jsx("img",{src:Ve,alt:ie.name,className:"w-10 h-10 rounded-full object-cover"}):n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-medium",children:ce}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 truncate",children:ie.name}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:["Email: ",ie.email]})]})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ze}`,children:ie.role}),n.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[n.jsxs("button",{onClick:ke=>{ke.stopPropagation(),Ee(ie.id,ie.email,ie.status)},className:"text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-300 flex items-center gap-1 text-xs",disabled:a||ie.status==="suspended",children:[n.jsx("i",{className:"bx bx-block"}),ie.status==="suspended"?"Unsuspend":"Suspend"]}),n.jsxs("button",{onClick:ke=>{ke.stopPropagation(),ue(ie.id,ie.email)},className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 flex items-center gap-1 text-xs",disabled:a,children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]},ie.id)})})]}),R&&y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fade-in",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md w-full max-w-md",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200",children:"User Details"}),n.jsx("button",{onClick:()=>{_(!1),y.unsubscribe&&y.unsubscribe()},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:n.jsx("i",{className:"bx bx-x"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",y.name]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",y.email]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Username:"})," ",y.username]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Role:"})," ",y.role]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Products:"}),y.products&&y.products.length>0?n.jsx("ul",{className:"mt-2 space-y-4",children:y.products.map(ie=>n.jsx("li",{className:"border-b border-gray-200 dark:border-gray-700 pb-2",children:n.jsxs("div",{className:"flex items-start gap-3",children:[ie.imageUrl?n.jsx("img",{src:ie.imageUrl,alt:ie.name,className:"w-16 h-16 object-cover rounded"}):n.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-sm font-medium text-gray-600 dark:text-gray-400",children:"No Image"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-200",children:ie.name}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Price: ₦",ie.price?.toLocaleString("en-NG")||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Category: ",ie.category]})]})]})},ie.id))}):n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No products uploaded."})]})]}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>{_(!1),Pe(y),y.unsubscribe&&y.unsubscribe()},className:"py-2 px-3 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:"Edit"}),n.jsx("button",{onClick:()=>{_(!1),y.unsubscribe&&y.unsubscribe()},className:"py-2 px-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Close"})]})]})}),I&&v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fade-in",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md w-full max-w-md",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-200",children:"Edit User"}),n.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:n.jsx("i",{className:"bx bx-x"})})]}),n.jsxs("form",{onSubmit:le,className:"space-y-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:v.firstName,onChange:ie=>G("firstName",ie.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${k.firstName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a}),k.firstName&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:k.firstName})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:v.lastName,onChange:ie=>G("lastName",ie.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${k.lastName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a}),k.lastName&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:k.lastName})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",value:v.email,onChange:ie=>G("email",ie.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${k.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a}),k.email&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:k.email})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),n.jsx("input",{type:"text",value:v.username,onChange:ie=>G("username",ie.target.value),className:"mt-1 w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",disabled:a})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Password (optional)"}),n.jsx("input",{type:"password",value:v.password,onChange:ie=>G("password",ie.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${k.password?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a}),k.password&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:k.password})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Role ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:v.role,onChange:ie=>G("role",ie.target.value),className:`mt-1 w-full py-2 px-3 border rounded-lg focus:ring-2 ${k.role?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100`,disabled:a,children:[n.jsx("option",{value:"buyer",children:"Buyer"}),n.jsx("option",{value:"seller",children:"Seller"}),n.jsx("option",{value:"pro seller",children:"Pro Seller"}),n.jsx("option",{value:"admin",children:"Admin"})]}),k.role&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:k.role})]}),n.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>P(!1),className:"py-2 px-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:a,className:"py-2 px-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:a?"Updating...":"Update User"})]})]})]})}),n.jsx(Ole,{alerts:e,removeAlert:s})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Loading..."})]})})]})}function zle({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg ${t.type==="error"?"bg-red-600":"bg-green-600"} text-white flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function Vle(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="success")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function Ble(){const{alerts:r,addAlert:e,removeAlert:t}=Vle(),s=us(),[a,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState(""),[h,f]=E.useState(!1),g=E.useCallback(Sd(b=>{u(b)},300),[]),x=b=>{g(b.target.value)},y=async(b,v,N)=>{f(!0);try{console.log("Attempting approval for transactionId:",b,"sellerId:",v,"amount:",N);const A=await ss.post("https://foremade-backend.onrender.com/approve-payout",{transactionId:b,sellerId:v,amount:N},{timeout:15e3});console.log("Approval response:",A.data),A.data.status==="redirect"?window.location.href=A.data.redirectUrl:e(A.data.message||"Payout approved successfully","success")}catch(k){console.error("Approval error details:",k.response?.data||k.message);let A=k.response?.data?.error||"Approval failed. Please check your Paystack balance.";const R=k.response?.data?.details;R&&typeof R=="object"&&(R.pendingBalance!==void 0&&R.amount!==void 0?A=`Insufficient pending balance: Available ${R.pendingBalance}, Requested ${R.amount}`:A=Object.entries(R).map(([_,I])=>`${_}: ${I}`).join(", ")),e(A,"error")}finally{f(!1)}};return E.useEffect(()=>{const b=A=>{if(!A){e("Please log in.","error"),s("/login");return}},v=ve.onAuthStateChanged(b);if(!ve.currentUser){b(null);return}const N=ft(_e(J,"transactions"),rt("status","==","Pending"),rt("type","==","Withdrawal")),k=os(N,async A=>{const R=[];for(const _ of A.docs){const I={id:_.id,..._.data()};if(I.id=String(I.id||"N/A"),I.sellerId=String(I.sellerId||"N/A"),!I.sellerId||I.sellerId==="N/A"||!/^[a-zA-Z0-9]+$/.test(I.sellerId)){console.warn(`Invalid sellerId for transaction ${I.id}: ${I.sellerId}`),I.sellerName="Unknown",I.bankName="N/A",I.accountNumber="N/A",R.push(I);continue}const P=Ne(J,"sellers",I.sellerId);try{const T=await it(P);if(T.exists()){const D=T.data();if(I.sellerName=String(D.fullName||"Unknown"),I.accountNumber=String(D.accountNumber||"N/A"),D.bankCode){const L=Ne(J,"banks",D.bankCode),F=await it(L);I.bankName=String(F.exists()&&F.data().name||"N/A")}else I.bankName="N/A"}else console.warn(`Seller document not found for sellerId: ${I.sellerId}`),I.sellerName="Unknown",I.bankName="N/A",I.accountNumber="N/A"}catch(T){console.error(`Failed to fetch seller or bank data for ${I.sellerId}:`,T),I.sellerName="Unknown",I.bankName="N/A",I.accountNumber="N/A"}R.push(I)}if(console.log("Fetched transaction data:",R),i(R),!c.trim())l(R);else{const _=c.toLowerCase().trim();l(R.filter(I=>[I.id,I.sellerId,I.sellerName].some(T=>!T||typeof T!="string"?!1:T.toLowerCase()===_||T.toLowerCase().includes(_))))}},A=>{e("Failed to fetch transactions.","error"),console.error("Firestore listener error:",A)});return()=>{v(),k&&k()}},[s,c]),n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx(Ze.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:[n.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-900 to-amber-500 flex items-center gap-2",children:"Admin Payout Monitor"})}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search by Transaction ID, Seller ID, or Seller Name...",onChange:x,className:"w-full p-3 pl-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"}),n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"})]})}),o.length===0?n.jsx(Ze.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-gray-600 dark:text-gray-400 text-center py-8",children:"No pending payout requests."}):n.jsx(Ze.div,{className:"grid gap-4 lg:grid-cols-2",children:n.jsx(tn,{children:o.map((b,v)=>n.jsxs(Ze.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,delay:v*.1},className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",b.id||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",b.sellerId||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller Name:"})," ",b.sellerName||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Status:"})," ",n.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-semibold ${b.status==="Pending"?"bg-yellow-100 text-yellow-800":b.status==="Approved"?"bg-green-100 text-green-800":b.status==="Rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:b.status||"N/A"})]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ",b.country==="United Kingdom"?"£":"₦",b.amount?.toFixed(2)||"0.00"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Bank Name:"})," ",b.bankName||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Account Number:"})," ",b.accountNumber||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Country:"})," ",b.country||"N/A"]})]})]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Date:"})," ",b.createdAt?.toDate?new Date(b.createdAt.toDate()).toLocaleString():"N/A"]}),b.status==="Failed"&&b.failureReason&&n.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Reason:"})," ",b.failureReason]}),n.jsx("div",{className:"mt-4 flex gap-2",children:n.jsxs("button",{onClick:()=>y(b.id,b.sellerId,b.amount),disabled:h||b.status!=="Pending"||b.sellerId==="N/A",className:`px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center gap-2 ${h||b.status!=="Pending"||b.sellerId==="N/A"?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("i",{className:"bx bx-check"}),"Approve"]})})]},b.id||`txn-${v}`))})}),n.jsx(zle,{alerts:r,removeAlert:t})]})})]})}function Hle(){const[r,e]=E.useState([]),[t,s]=E.useState({Fashion:[],Gadgets:[]}),[a,i]=E.useState(""),[o,l]=E.useState("All"),[c,u]=E.useState([]),[h,f]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const v=ft(_e(J,"products"),rt("status","==","approved")),k=(await Ke(v)).docs.map(I=>({id:I.id,...I.data()})),A=new Set(k.map(I=>I.category||"Other"));u(["All",...A]);const R=await Ke(_e(J,"trendingItems")),_={Fashion:[],Gadgets:[]};R.forEach(I=>{const P=I.data();if(P.category==="Fashion"||P.category==="Gadgets"){const T=k.find(D=>D.id===P.productId);_[P.category].push({id:I.id,...P,productName:T?.name||"Unknown Product"})}}),s(_),e(k)}catch(v){console.error("Error loading data:",v),xe.error("Failed to load products or trending items.")}finally{f(!1)}})()},[]);const g=async(b,v)=>{if(t[v].length>=10){xe.error(`Cannot add more to trending ${v}. Maximum 10 items reached.`);return}try{const N=Ne(_e(J,"trendingItems"));await Gt(N,{productId:b,category:v,addedAt:new Date});const k=r.find(A=>A.id===b);s({...t,[v]:[...t[v],{id:N.id,productId:b,productName:k.name}]}),xe.success(`Added to trending ${v}!`)}catch(N){console.error("Error adding trending item:",N),xe.error("Failed to add trending item.")}},x=async(b,v)=>{try{await na(Ne(J,"trendingItems",b)),s({...t,[v]:t[v].filter(N=>N.id!==b)}),xe.success("Removed from trending items!")}catch(N){console.error("Error removing trending item:",N),xe.error("Failed to remove trending item.")}},y=r.filter(b=>b.name.toLowerCase().includes(a.toLowerCase())&&(o==="All"||b.category===o));return h?n.jsx("div",{className:"py-4 xs:py-6",children:n.jsx("div",{className:"container mx-auto px-2 xs:px-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 xs:p-6 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-6"}),n.jsx("div",{className:"space-y-4",children:[...Array(5)].map((b,v)=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},v))})]})})}):n.jsx("div",{className:"py-4 xs:py-6",children:n.jsxs("div",{className:"container mx-auto px-2 xs:px-4",children:[n.jsxs("h1",{className:"text-xl xs:text-2xl font-bold text-gray-800 mb-4 xs:mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-trending-up text-blue-600 mr-2 text-2xl"}),"Edit Trending Items"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 xs:gap-4 mb-4 xs:mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx("input",{type:"text",placeholder:"Search products...",value:a,onChange:b=>i(b.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all","aria-label":"Search products"}),n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg"})]}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx("select",{value:o,onChange:b=>l(b.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all appearance-none","aria-label":"Filter by category",children:c.map(b=>n.jsx("option",{value:b,children:b},b))}),n.jsx("i",{className:"bx bx-filter absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg"})]})]}),["Fashion","Gadgets"].map(b=>n.jsxs("div",{className:"mb-6 xs:mb-8 bg-white rounded-lg shadow-sm",children:[n.jsx("div",{className:"sticky top-0 bg-white z-10 p-4 xs:p-6 border-b border-gray-100",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[n.jsx("i",{className:"bx bx-star text-blue-600 mr-2 text-xl"}),"Trending in ",b]})}),n.jsxs("div",{className:"p-4 xs:p-6",children:[n.jsxs("div",{className:"mb-4 xs:mb-6",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Current Trending Products"}),t[b].length===0?n.jsxs("p",{className:"text-gray-500 text-sm flex items-center",children:[n.jsx("i",{className:"bx bx-list-ul mr-1 text-gray-400"}),"No trending products selected for ",b,"."]}):n.jsx("ul",{className:"space-y-2 animate-fadeIn",children:t[b].map(v=>n.jsxs("li",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-50 transition-colors",children:[n.jsx("span",{className:"text-sm text-gray-800",children:v.productName}),n.jsx("button",{onClick:()=>x(v.id,b),className:"text-red-500 hover:text-red-600 transform hover:scale-110 transition-transform","aria-label":`Remove ${v.productName} from trending ${b}`,children:n.jsx("i",{className:"bx bx-trash text-lg"})})]},v.id))})]}),n.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Add Products"}),y.length===0?n.jsxs("p",{className:"text-gray-500 text-sm flex items-center",children:[n.jsx("i",{className:"bx bx-search-alt-2 mr-1 text-gray-400"}),"No products match your search or filter."]}):n.jsx("ul",{className:"space-y-2 max-h-80 overflow-y-auto animate-fadeIn",children:y.map(v=>n.jsxs("li",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[v.imageUrls?.[0]&&n.jsx("img",{src:v.imageUrls[0],alt:v.name,className:"w-10 h-10 object-cover rounded"}),n.jsx("span",{className:"text-sm text-gray-800",children:v.name})]}),n.jsx("button",{onClick:()=>g(v.id,b),className:`text-blue-600 hover:text-blue-500 text-sm transform hover:scale-110 transition-transform ${t[b].some(N=>N.productId===v.id)?"opacity-50 cursor-not-allowed":""}`,disabled:t[b].some(N=>N.productId===v.id),"aria-label":`Add ${v.name} to trending ${b}`,children:n.jsx("i",{className:"bx bx-plus text-lg"})})]},v.id))})]})]},b))]})})}function $le({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function Wle(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function Yle(){const{alerts:r,addAlert:e,removeAlert:t}=Wle(),[s,a]=E.useState([]),[i,o]=E.useState({id:"",desktop:"",tablet:"",mobile:""}),[l,c]=E.useState(!1),[u,h]=E.useState({desktop:!1,tablet:!1,mobile:!1}),[f,g]=E.useState({desktop:0,tablet:0,mobile:0}),[x,y]=E.useState(!0),[b,v]=E.useState(!0);E.useEffect(()=>{(async()=>{try{y(!0);const F=(await Ke(_e(J,"carouselSlides"))).docs.map(z=>({id:z.id,...z.data()}));a(F),e("Slides loaded successfully!","success")}catch(L){console.error("Error fetching slides:",L),e("Failed to load slides.","error")}finally{y(!1)}})()},[]);const N=D=>{const{name:L,value:F}=D.target;o(z=>({...z,[L]:F}))},k=async(D,L)=>{const F=D.target.files[0];if(!F)return;if(!["image/gif","video/mp4","video/webm","image/jpeg","image/png"].includes(F.type)){e(`Invalid file type for ${L}. Use GIF, MP4, WebM, JPEG, or PNG.`,"error");return}const O=F.type.startsWith("video")?50*1024*1024:10*1024*1024;if(F.size>O){e(`File too large for ${L}. Max size is ${F.type.startsWith("video")?"50MB":"10MB"}.`,"error");return}h(V=>({...V,[L]:!0})),g(V=>({...V,[L]:0}));try{const V=new FormData;V.append("file",F),V.append("isVideo",F.type.startsWith("video").toString());const H=await ss.post("https://foremade-backend.onrender.com/upload",V,{headers:{"Content-Type":"multipart/form-data"},timeout:12e4,onUploadProgress:$=>{const X=Math.round($.loaded*100/$.total);g(G=>({...G,[L]:X}))}});if(H.status!==200||!H.data.url)throw new Error("Failed to upload media to Cloudinary.");o($=>({...$,[L]:H.data.url})),e(`${L} media uploaded!`,"success")}catch(V){console.error("Media upload error:",{message:V.message,code:V.code,response:V.response?.data}),e(V.code==="ECONNABORTED"?"Upload timed out. Please check your network.":V.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network.":`Failed to upload ${L} media.`,"error")}finally{h(V=>({...V,[L]:!1})),g(V=>({...V,[L]:0}))}},A=D=>D?D.match(/\.(mp4|webm)$/i)?n.jsx("video",{src:D,controls:!0,className:"mt-2 h-20 w-auto rounded shadow-sm",title:"Video preview"}):n.jsx("img",{src:D,alt:"Media preview",className:"mt-2 h-20 w-auto rounded shadow-sm"}):null,R=async D=>{if(D.preventDefault(),!i.desktop||!i.tablet||!i.mobile){e("All media fields are required.","error");return}try{y(!0);const L=l?i.id:`slide-${Date.now()}`;await Gt(Ne(J,"carouselSlides",L),{desktop:i.desktop,tablet:i.tablet,mobile:i.mobile,createdAt:new Date().toISOString()}),e(l?"Slide updated successfully! 🎉":"Slide added successfully! 🎉","success"),a(F=>l?F.map(z=>z.id===L?{id:L,...i}:z):[...F,{id:L,...i}]),P()}catch(L){console.error("Error saving slide:",L),e("Failed to save slide.","error")}finally{y(!1)}},_=D=>{o(D),c(!0),v(!0)},I=async D=>{if(confirm("Delete this slide?"))try{y(!0),await na(Ne(J,"carouselSlides",D)),a(L=>L.filter(F=>F.id!==D)),e("Slide deleted successfully!","success")}catch(L){console.error("Error deleting slide:",L),e("Failed to delete slide.","error")}finally{y(!1)}},P=()=>{o({id:"",desktop:"",tablet:"",mobile:""}),c(!1)},T=()=>{v(D=>!D)};return x?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-image text-blue-500"}),"Manage Carousel Banners"]}),n.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:T,children:[n.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${b?"up":"down"} text-blue-500`}),l?"Edit Slide":"Add New Slide"]}),l&&n.jsxs("button",{onClick:D=>{D.stopPropagation(),P()},className:"text-gray-600 hover:text-gray-800 dark:hover:text-gray-400 text-sm flex items-center gap-1",title:"Cancel editing",children:[n.jsx("i",{className:"bx bx-x"}),"Cancel"]})]}),b&&n.jsxs("form",{onSubmit:R,className:"mt-4 ml-4 space-y-4 animate-slide-down",children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["desktop","tablet","mobile"].map(D=>n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[`${D.charAt(0).toUpperCase()+D.slice(1)} Media`,n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:`Upload an image, GIF, or short video optimized for ${D} devices (GIF ≤10MB, Videos ≤50MB)`})]}),n.jsx("div",{className:"relative",children:n.jsx("input",{type:"text",name:D,value:i[D],onChange:N,placeholder:"Enter media URL or upload below",className:"mt-1 w-full py-2 pl-3 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 border-gray-300 dark:border-gray-600 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:u[D]})}),n.jsx("input",{type:"file",accept:"image/*,video/mp4,video/webm",onChange:L=>k(L,D),className:"mt-2 w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",disabled:u[D]}),u[D]&&n.jsxs("div",{className:"mt-2",children:[n.jsxs("p",{className:"text-sm text-gray-500",children:["Uploading... ",f[D],"%"]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${f[D]}%`}})})]}),A(i[D])]},D))}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsxs("button",{type:"submit",disabled:u.desktop||u.tablet||u.mobile||x,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-sm",children:[x?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-save"}),x?"Saving...":l?"Update Slide":"Add Slide"]})})]})]}),n.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:[n.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-ul text-blue-500"}),"Current Slides"]}),s.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No slides available."}):n.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(D=>n.jsxs("li",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all duration-200",children:[A(D.desktop),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Slide ",D.id.split("-")[1]]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>_(D),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-sm",title:"Edit slide",children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:()=>I(D.id),className:"text-red-600 hover:text-red-800 flex items-center gap-1 text-sm",title:"Delete slide",children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]})]},D.id))})]}),n.jsx(Hle,{}),n.jsx($le,{alerts:r,removeAlert:t})]})})]})}function qle({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function Xle(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>{e(i=>i.filter(o=>o.id!==a))}}}function Gle(){const{alerts:r,addAlert:e,removeAlert:t}=Xle(),[s,a]=E.useState([]),[i,o]=E.useState([]),[l,c]=E.useState({id:"",productId:"",discount:"",startDate:"",endDate:""}),[u,h]=E.useState(!1),[f,g]=E.useState(!0),[x,y]=E.useState(!0),[b,v]=E.useState({});E.useEffect(()=>{(async()=>{try{g(!0);const F=(await Ke(_e(J,"products"))).docs.map(V=>({id:V.id,...V.data()})).filter(V=>V.status==="approved");o(F);const O=(await Ke(_e(J,"dailyDeals"))).docs.map(V=>({id:V.id,...V.data()}));a(O),e("Data loaded successfully!","success")}catch(L){console.error("Error fetching data:",L),e("Failed to load products or deals.","error")}finally{g(!1)}})()},[]);const N=D=>{const{name:L,value:F}=D.target;c(z=>({...z,[L]:F})),v(z=>({...z,[L]:""}))},k=()=>{const D={};return l.productId||(D.productId="Please select a product."),(!l.discount||l.discount<0||l.discount>100)&&(D.discount="Discount must be between 0 and 100%."),l.startDate||(D.startDate="Start date is required."),l.endDate||(D.endDate="End date is required."),l.startDate&&l.endDate&&l.startDate>l.endDate&&(D.endDate="End date must be after start date."),D},A=async D=>{D.preventDefault();const L=k();if(Object.keys(L).length>0){v(L),e("Please fix form errors.","error");return}try{g(!0);const F=u?l.id:`deal-${Date.now()}`,z={productId:l.productId,discount:parseFloat(l.discount)/100,startDate:l.startDate,endDate:l.endDate,createdAt:new Date().toISOString()};await Gt(Ne(J,"dailyDeals",F),z),e(u?"Deal updated successfully! 🎉":"Deal added successfully! 🎉","success"),a(O=>u?O.map(V=>V.id===F?{id:F,...z}:V):[...O,{id:F,...z}]),I()}catch(F){console.error("Error saving deal:",F),e("Failed to save deal.","error")}finally{g(!1)}},R=D=>{c({id:D.id,productId:D.productId,discount:(D.discount*100).toString(),startDate:D.startDate,endDate:D.endDate}),h(!0),y(!0)},_=async D=>{if(confirm("Delete this deal?"))try{g(!0),await na(Ne(J,"dailyDeals",D)),a(L=>L.filter(F=>F.id!==D)),e("Deal deleted successfully!","success")}catch(L){console.error("Error deleting deal:",L),e("Failed to delete deal.","error")}finally{g(!1)}},I=()=>{c({id:"",productId:"",discount:"",startDate:"",endDate:""}),h(!1),v({})},P=()=>{y(D=>!D)},T=D=>i.find(L=>L.id===D)||{};return f?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-purchase-tag text-blue-500"}),"Manage Daily Deals"]}),n.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:P,children:[n.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${x?"up":"down"} text-blue-500`}),u?"Edit Deal":"Add New Deal"]}),u&&n.jsxs("button",{onClick:D=>{D.stopPropagation(),I()},className:"text-gray-600 hover:text-gray-800 dark:hover:text-gray-400 text-sm flex items-center gap-1",title:"Cancel editing",children:[n.jsx("i",{className:"bx bx-x"}),"Cancel"]})]}),x&&n.jsxs("form",{onSubmit:A,className:"mt-4 ml-4 space-y-4 animate-slide-down",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Product",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Select a product for the deal"})]}),n.jsxs("select",{name:"productId",value:l.productId,onChange:N,className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.productId?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,children:[n.jsx("option",{value:"",children:"Select a product"}),i.map(D=>n.jsx("option",{value:D.id,children:D.name||"Unnamed Product"},D.id))]}),b.productId&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),b.productId]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Discount (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Discount percentage for the deal"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",name:"discount",value:l.discount,onChange:N,min:"0",max:"100",step:"0.01",placeholder:"20",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.discount?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),b.discount&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),b.discount]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Start Date",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"When the deal starts"})]}),n.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:N,className:`mt-1 w-full py-2 pl-3 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.startDate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),b.startDate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),b.startDate]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["End Date",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"When the deal ends"})]}),n.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:N,className:`mt-1 w-full py-2 pl-3 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${b.endDate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`}),b.endDate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),b.endDate]})]})]}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsxs("button",{type:"submit",disabled:f,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-sm",children:[f?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-save"}),f?"Saving...":u?"Update Deal":"Add Deal"]})})]})]}),n.jsxs("div",{className:"mt-6 p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:[n.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-ul text-blue-500"}),"Current Daily Deals"]}),s.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No deals available."}):n.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(D=>{const L=T(D.productId);return n.jsxs("li",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all duration-200",children:[n.jsx("img",{src:L.imageUrls?.[0]||"/images/placeholder.jpg",alt:L.name||"Product",className:"h-32 w-full object-cover rounded-lg mb-2"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:L.name||"Unnamed Product"}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Discount: ",(D.discount*100).toFixed(2),"%"]}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[D.startDate," to ",D.endDate]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Deal ",D.id.split("-")[1]]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>R(D),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-sm",title:"Edit deal",children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:()=>_(D.id),className:"text-red-600 hover:text-red-800 flex items-center gap-1 text-sm",title:"Delete deal",children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]})]},D.id)})})]}),n.jsx(qle,{alerts:r,removeAlert:t})]})})]})}function Kle({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function Qle(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function Zle({label:r="Minimum Purchase Amount",currencySymbol:e="₦",firestorePath:t="settings/minimumPurchase",defaultValue:s=25e3}){const{alerts:a,addAlert:i,removeAlert:o}=Qle(),l=us(),[c,u]=E.useState(s),[h,f]=E.useState(!0),[g,x]=E.useState(!1);E.useEffect(()=>{if(!ve.currentUser){i("Please log in as admin.","error"),l("/login");return}(async()=>{try{const v=Ne(J,t),N=await it(v);N.exists()&&u(N.data().amount||s)}catch(v){i(`Failed to fetch ${r.toLowerCase()}.`,"error"),console.error("Fetch error:",v)}finally{f(!1)}})()},[l,t,r,s]);const y=async()=>{if(!ve.currentUser){i("Please log in as admin.","error"),l("/login");return}if(c<=0){i(`${r} must be greater than zero.`,"error");return}x(!0);try{const b=Ne(J,t);await Gt(b,{amount:c},{merge:!0}),i(`${r} updated successfully.`,"success")}catch(b){i(`Failed to update ${r.toLowerCase()}.`,"error"),console.error("Save error:",b)}finally{x(!1)}};return h?n.jsx("div",{className:"flex-1 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})}):n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-2 md:pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-dollar text-blue-500"}),r]}),n.jsxs("div",{className:"mt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"minimumPurchase",className:"block text-sm md:text-base font-medium text-gray-700 dark:text-gray-300",children:[r," (",e,")"]}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e}),n.jsx("input",{type:"number",id:"minimumPurchase",value:c,onChange:b=>u(Math.max(0,Number(b.target.value))),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",min:"0",required:!0,disabled:g})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Set the ",r.toLowerCase()," buyers must meet to proceed."]})]}),n.jsxs("button",{onClick:y,className:`w-full md:w-auto py-2 px-4 md:px-6 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition ${g?"opacity-50 cursor-not-allowed":""}`,disabled:g,children:[n.jsx("i",{className:"bx bx-save"}),g?"Saving...":"Save Changes"]})]}),n.jsx(Kle,{alerts:a,removeAlert:o})]})}function Jle({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-md transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function ece(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function tce(){const{alerts:r,addAlert:e,removeAlert:t}=ece(),[s,a]=E.useState(!0),[i,o]=E.useState({}),[l,c]=E.useState([]),[u,h]=E.useState({}),[f,g]=E.useState({});E.useEffect(()=>{(async()=>{try{a(!0);const R=(await Ke(_e(J,"categories"))).docs.map(D=>D.id).sort();c(R);const _=Ne(J,"feeConfigurations","categoryFees"),I=await it(_);let P={};I.exists()?P=I.data():(P=R.reduce((D,L)=>({...D,[L]:{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2,taxRate:.075}}),{}),await Gt(_,P));const T={...P};R.forEach(D=>{T[D]||(T[D]={minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2,taxRate:.075})}),o(T)}catch(A){console.error("Error fetching data:",A),e("Failed to load categories or fees.","error")}finally{a(!1)}})()},[]);const x=(k,A,R)=>{o(_=>({..._,[k]:{..._[k],[A]:A==="minPrice"||A==="maxPrice"?R===""?1/0:parseFloat(R)||0:(parseFloat(R)||0)/100}})),h(_=>({..._,[`${k}_${A}`]:""}))},y=()=>{const k={};return l.forEach(A=>{const R=i[A]||{};R.minPrice<0&&(k[`${A}_minPrice`]="Minimum price cannot be negative."),R.maxPrice!==1/0&&R.maxPrice<R.minPrice&&(k[`${A}_maxPrice`]="Maximum price must be greater than minimum price."),(R.buyerProtectionRate<0||R.buyerProtectionRate>1)&&(k[`${A}_buyerProtectionRate`]="Rate must be between 0 and 100%."),(R.handlingRate<0||R.handlingRate>1)&&(k[`${A}_handlingRate`]="Rate must be between 0 and 100%."),(R.taxRate<0||R.taxRate>1)&&(k[`${A}_taxRate`]="Tax rate must be between 0 and 100%.")}),k},b=async k=>{k.preventDefault(),h({}),a(!0);const A=y();if(Object.keys(A).length>0){h(A),a(!1),e("Please fix the form errors.","error");return}try{const R=Ne(J,"feeConfigurations","categoryFees");await Gt(R,i),e("Fees updated successfully! 🎉","success")}catch(R){console.error("Error saving fees:",R),e("Failed to save fees.","error")}finally{a(!1)}},v=k=>{o(A=>({...A,[k]:{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2,taxRate:.075}})),h(A=>({...A,[`${k}_minPrice`]:"",[`${k}_maxPrice`]:"",[`${k}_buyerProtectionRate`]:"",[`${k}_handlingRate`]:"",[`${k}_taxRate`]:""}))},N=k=>{g(A=>({...A,[k]:!A[k]}))};return s?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsx(Zle,{label:"Set Minimum Purchase",currencySymbol:"₦",firestorePath:"settings/minimumPurchase",defaultValue:25e3}),n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mt-8 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-money text-blue-500"}),"Edit Category Fees"]}),l.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No categories found. Add categories in Firestore to set fees."}):n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[l.map(k=>n.jsxs("div",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>N(k),children:[n.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${f[k]?"up":"down"} text-blue-500`}),k]}),n.jsxs("button",{onClick:A=>{A.stopPropagation(),v(k)},disabled:s,className:"text-gray-600 hover:text-gray-800 dark:hover:text-gray-400 text-sm flex items-center gap-1",title:"Reset fees to default",children:[n.jsx("i",{className:"bx bx-refresh"}),"Reset"]})]}),f[k]&&n.jsx("div",{className:"mt-4 ml-4 space-y-4 animate-slide-down",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Minimum Price (₦)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Minimum product price for this category"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:"₦"}),n.jsx("input",{type:"number",value:i[k]?.minPrice===1/0?"":i[k]?.minPrice||"",onChange:A=>x(k,"minPrice",A.target.value),min:"0",step:"0.01",placeholder:"1000",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${u[`${k}_minPrice`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s})]}),u[`${k}_minPrice`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),u[`${k}_minPrice`]]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Maximum Price (₦)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Maximum product price (leave blank for no limit)"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:"₦"}),n.jsx("input",{type:"number",value:i[k]?.maxPrice===1/0?"":i[k]?.maxPrice||"",onChange:A=>x(k,"maxPrice",A.target.value),min:"0",step:"0.01",placeholder:"No maximum",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${u[`${k}_maxPrice`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s})]}),u[`${k}_maxPrice`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),u[`${k}_maxPrice`]]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Buyer Protection Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for buyer protection"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:i[k]?.buyerProtectionRate*100||"",onChange:A=>x(k,"buyerProtectionRate",A.target.value),min:"0",max:"100",step:"0.01",placeholder:"8",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${u[`${k}_buyerProtectionRate`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),u[`${k}_buyerProtectionRate`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),u[`${k}_buyerProtectionRate`]]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Handling Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for handling"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:i[k]?.handlingRate*100||"",onChange:A=>x(k,"handlingRate",A.target.value),min:"0",max:"100",step:"0.01",placeholder:"20",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${u[`${k}_handlingRate`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),u[`${k}_handlingRate`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),u[`${k}_handlingRate`]]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tax Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Tax percentage for this category"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:i[k]?.taxRate*100||"",onChange:A=>x(k,"taxRate",A.target.value),min:"0",max:"100",step:"0.01",placeholder:"7.5",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${u[`${k}_taxRate`]?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),u[`${k}_taxRate`]&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),u[`${k}_taxRate`]]})]})]})})]},k)),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsxs("button",{type:"submit",disabled:s,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-sm",children:[s?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-save"}),s?"Saving...":"Save Fees"]})})]}),n.jsx(Jle,{alerts:r,removeAlert:t})]})})]})}function sce({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function rce(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function ace(){const{alerts:r,addAlert:e,removeAlert:t}=rce(),[s,a]=E.useState(!0),[i,o]=E.useState([]),[l,c]=E.useState({}),[u,h]=E.useState({}),[f,g]=E.useState(""),[x,y]=E.useState(""),[b,v]=E.useState(""),[N,k]=E.useState(null),[A,R]=E.useState(null),[_,I]=E.useState({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),[P,T]=E.useState({}),[D,L]=E.useState({}),[F,z]=E.useState(null),[O,V]=E.useState(null),[Y,H]=E.useState({}),[$,X]=E.useState({}),[G,B]=E.useState({category:null,subcategory:null,subSubcategory:null});E.useEffect(()=>{let ce=!0;const ke=os(_e(J,"categories"),tt=>{const Ye=tt.docs.map(De=>De.id).sort();ce&&o(Ye)}),Qe=os(_e(J,"customSubcategories"),tt=>{const Ye={};tt.forEach(De=>{Ye[De.id]=De.data().subcategories||[]}),ce&&c(Ye)}),me=os(_e(J,"customSubSubcategories"),tt=>{const Ye={};tt.forEach(De=>{Ye[De.id]=De.data()||{}}),ce&&h(Ye)}),$e=os(Ne(J,"feeConfigurations","categoryFees"),tt=>{if(tt.exists())ce&&R(tt.data());else{const Ye={};Gt(Ne(J,"feeConfigurations","categoryFees"),Ye),ce&&R(Ye)}});return a(!1),()=>{ce=!1,ke(),Qe(),me(),$e()}},[]);const Q=async()=>{if(!f.trim()){H({newCategory:"Category name is required."}),e("Category name is required.","error");return}if(i.includes(f.trim())){H({newCategory:"Category already exists."}),e("Category already exists.","error");return}const ce={};if(_.minPrice&&parseFloat(_.minPrice)<0&&(ce.minPrice="Minimum price cannot be negative."),_.maxPrice&&parseFloat(_.maxPrice)<(parseFloat(_.minPrice)||0)&&(ce.maxPrice="Maximum price must be greater than minimum price."),_.buyerProtectionRate&&(parseFloat(_.buyerProtectionRate)<0||parseFloat(_.buyerProtectionRate)>100)&&(ce.buyerProtectionRate="Rate must be between 0 and 100%."),_.handlingRate&&(parseFloat(_.handlingRate)<0||parseFloat(_.handlingRate)>100)&&(ce.handlingRate="Rate must be between 0 and 100%."),_.taxRate&&(parseFloat(_.taxRate)<0||parseFloat(_.taxRate)>100)&&(ce.taxRate="Tax rate must be between 0 and 100%."),Object.keys(ce).length>0){H(ce),e("Please fix the form errors.","error");return}a(!0);try{const ke=Ne(J,"categories",f.trim());await Gt(ke,{name:f.trim(),createdAt:new Date,bannerDesktop:x||fallbackBanner,bannerMobile:b||fallbackBanner});const Qe=Ne(J,"feeConfigurations","categoryFees"),me={...A,[f.trim()]:{minPrice:parseFloat(_.minPrice)||1e3,maxPrice:_.maxPrice?parseFloat(_.maxPrice):1/0,buyerProtectionRate:(parseFloat(_.buyerProtectionRate)||8)/100,handlingRate:(parseFloat(_.handlingRate)||20)/100,taxRate:(parseFloat(_.taxRate)||7.5)/100}};await Gt(Qe,me),g(""),y(""),v(""),I({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),H({}),e("Category added successfully! 🎉","success")}catch(ke){console.error("Error adding category:",ke),e("Failed to add category.","error")}finally{a(!1)}},ee=async ce=>{if(!f.trim()){H({newCategory:"Category name is required."}),e("Category name is required.","error");return}if(i.includes(f.trim())&&f.trim()!==ce){H({newCategory:"Category name already exists."}),e("Category name already exists.","error");return}const ke={};if(_.minPrice&&parseFloat(_.minPrice)<0&&(ke.minPrice="Minimum price cannot be negative."),_.maxPrice&&parseFloat(_.maxPrice)<(parseFloat(_.minPrice)||0)&&(ke.maxPrice="Maximum price must be greater than minimum price."),_.buyerProtectionRate&&(parseFloat(_.buyerProtectionRate)<0||parseFloat(_.buyerProtectionRate)>100)&&(ke.buyerProtectionRate="Rate must be between 0 and 100%."),_.handlingRate&&(parseFloat(_.handlingRate)<0||parseFloat(_.handlingRate)>100)&&(ke.handlingRate="Rate must be between 0 and 100%."),_.taxRate&&(parseFloat(_.taxRate)<0||parseFloat(_.taxRate)>100)&&(ke.taxRate="Tax rate must be between 0 and 100%."),Object.keys(ke).length>0){H(ke),e("Please fix the form errors.","error");return}a(!0);try{const Qe=Ne(J,"categories",ce),$e=(await it(Qe)).data(),tt=Ne(J,"categories",f.trim());await Gt(tt,{name:f.trim(),createdAt:new Date,bannerDesktop:x||$e.bannerDesktop||fallbackBanner,bannerMobile:b||$e.bannerMobile||fallbackBanner}),await na(Qe);const Ye={...A};Ye[f.trim()]={minPrice:parseFloat(_.minPrice)||Ye[ce].minPrice,maxPrice:_.maxPrice?parseFloat(_.maxPrice):Ye[ce].maxPrice,buyerProtectionRate:(parseFloat(_.buyerProtectionRate)||Ye[ce].buyerProtectionRate*100)/100,handlingRate:(parseFloat(_.handlingRate)||Ye[ce].handlingRate*100)/100,taxRate:(parseFloat(_.taxRate)||Ye[ce].taxRate||7.5)/100},delete Ye[ce];const De=Ne(J,"feeConfigurations","categoryFees");await Gt(De,Ye);const Xe=Ne(J,"customSubcategories",ce),st=await it(Xe);if(st.exists()){const Pt=Ne(J,"customSubcategories",f.trim());await Gt(Pt,st.data()),await na(Xe)}const vt=Ne(J,"customSubSubcategories",ce),Mt=await it(vt);if(Mt.exists()){const Pt=Ne(J,"customSubSubcategories",f.trim());await Gt(Pt,Mt.data()),await na(vt)}const as=ft(_e(J,"products"),rt("category","==",ce.toLowerCase())),wt=await Ke(as),Ge=gu(J);wt.docs.forEach(Pt=>{Ge.update(Pt.ref,{category:f.trim().toLowerCase()})}),await Ge.commit(),e(`Updated ${wt.size} products to new category.`,"success"),g(""),y(""),v(""),I({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),k(null),H({}),e("Category updated successfully! 🎉","success")}catch(Qe){console.error("Error editing category:",Qe),e("Failed to edit category.","error")}finally{a(!1)}},se=async ce=>{a(!0);try{await na(Ne(J,"categories",ce));const ke={...A};delete ke[ce];const Qe=Ne(J,"feeConfigurations","categoryFees");await Gt(Qe,ke),await na(Ne(J,"customSubcategories",ce)),await na(Ne(J,"customSubSubcategories",ce));const me=ft(_e(J,"products"),rt("category","==",ce.toLowerCase())),$e=await Ke(me),tt=gu(J);$e.docs.forEach(Ye=>{tt.update(Ye.ref,{category:"uncategorized"})}),await tt.commit(),e(`Updated ${$e.size} products to Uncategorized.`,"success"),e("Category deleted successfully! 🎉","success")}catch(ke){console.error("Error deleting category:",ke),e("Failed to delete category.","error")}finally{a(!1)}},le=async ce=>{const ke=P[ce]?.trim();if(!ke){e("Subcategory name is required.","error");return}if(l[ce]?.includes(ke)){e("Subcategory already exists.","error");return}a(!0);try{const Qe=Ne(J,"customSubcategories",ce),me=await it(Qe),tt=[...me.exists()?me.data().subcategories||[]:[],ke];await Gt(Qe,{subcategories:tt}),T(Ye=>({...Ye,[ce]:""})),e(`Subcategory "${ke}" added! 🎉`,"success")}catch(Qe){console.error("Error adding subcategory:",Qe),e("Failed to add subcategory.","error")}finally{a(!1)}},Ee=async(ce,ke)=>{const Qe=P[ce]?.trim();if(!Qe){e("Subcategory name is required.","error");return}if(l[ce]?.includes(Qe)&&Qe!==ke){e("Subcategory name already exists.","error");return}a(!0);try{const me=Ne(J,"customSubcategories",ce),$e=await it(me),Ye=($e.exists()?$e.data().subcategories||[]:[]).map(Ge=>Ge===ke?Qe:Ge);await Gt(me,{subcategories:Ye});const De=Ne(J,"customSubSubcategories",ce),Xe=await it(De),st=Xe.exists()?Xe.data()||{}:{},vt=Object.fromEntries(Object.entries(st).map(([Ge,Pt])=>Ge===ke?[Qe,Pt]:[Ge,Pt]));await Gt(De,vt);const Mt=ft(_e(J,"products"),rt("category","==",ce.toLowerCase()),rt("subcategory","==",ke)),as=await Ke(Mt),wt=gu(J);as.docs.forEach(Ge=>{wt.update(Ge.ref,{subcategory:Qe})}),await wt.commit(),e(`Updated ${as.size} products to new subcategory.`,"success"),T(Ge=>({...Ge,[ce]:""})),z(null),e(`Subcategory "${ke}" updated to "${Qe}"! 🎉`,"success")}catch(me){console.error("Error editing subcategory:",me),e("Failed to edit subcategory.","error")}finally{a(!1)}},ue=async(ce,ke)=>{a(!0);try{const Qe=Ne(J,"customSubcategories",ce),me=await it(Qe),tt=(me.exists()?me.data().subcategories||[]:[]).filter(wt=>wt!==ke);await Gt(Qe,{subcategories:tt});const Ye=Ne(J,"customSubSubcategories",ce),De=await it(Ye),st={...De.exists()?De.data()||{}:{}};delete st[ke],await Gt(Ye,st);const vt=ft(_e(J,"products"),rt("category","==",ce.toLowerCase()),rt("subcategory","==",ke)),Mt=await Ke(vt),as=gu(J);Mt.docs.forEach(wt=>{as.update(wt.ref,{subcategory:"uncategorized"})}),await as.commit(),e(`Updated ${Mt.size} products to uncategorized subcategory.`,"success"),e(`Subcategory "${ke}" deleted successfully! 🎉`,"success")}catch(Qe){console.error("Error deleting subcategory:",Qe),e("Failed to delete subcategory.","error")}finally{a(!1)}},Oe=async(ce,ke)=>{const Qe=D[`${ce}_${ke}`]?.trim();if(!Qe){e("Sub-subcategory name is required.","error");return}if(u[ce]?.[ke]?.includes(Qe)){e("Sub-subcategory already exists.","error");return}a(!0);try{const me=Ne(J,"customSubSubcategories",ce),$e=await it(me),tt=$e.exists()?$e.data()||{}:{},Ye={...tt,[ke]:[...tt[ke]||[],Qe]};await Gt(me,Ye),L(De=>({...De,[`${ce}_${ke}`]:""})),e(`Sub-subcategory "${Qe}" added! 🎉`,"success")}catch(me){console.error("Error adding sub-subcategory:",me),e("Failed to add sub-subcategory.","error")}finally{a(!1)}},Pe=async(ce,ke,Qe)=>{const me=D[`${ce}_${ke}`]?.trim();if(!me){e("Sub-subcategory name is required.","error");return}if(u[ce]?.[ke]?.includes(me)&&me!==Qe){e("Sub-subcategory already exists.","error");return}a(!0);try{const $e=Ne(J,"customSubSubcategories",ce),tt=await it($e),Ye=tt.exists()?tt.data()||{}:{},De={...Ye,[ke]:Ye[ke].map(Mt=>Mt===Qe?me:Mt)};await Gt($e,De);const Xe=ft(_e(J,"products"),rt("category","==",ce.toLowerCase()),rt("subcategory","==",ke),rt("subSubcategory","==",Qe)),st=await Ke(Xe),vt=gu(J);st.docs.forEach(Mt=>{vt.update(Mt.ref,{subSubcategory:me})}),await vt.commit(),e(`Updated ${st.size} products to new sub-subcategory.`,"success"),L(Mt=>({...Mt,[`${ce}_${ke}`]:""})),V(null),e(`Sub-subcategory "${Qe}" updated to "${me}"! 🎉`,"success")}catch($e){console.error("Error editing sub-subcategory:",$e),e("Failed to edit sub-subcategory.","error")}finally{a(!1)}},Ie=async(ce,ke,Qe)=>{a(!0);try{const me=Ne(J,"customSubSubcategories",ce),$e=await it(me),tt=$e.exists()?$e.data()||{}:{},Ye={...tt,[ke]:tt[ke].filter(vt=>vt!==Qe)};await Gt(me,Ye);const De=ft(_e(J,"products"),rt("category","==",ce.toLowerCase()),rt("subcategory","==",ke),rt("subSubcategory","==",Qe)),Xe=await Ke(De),st=gu(J);Xe.docs.forEach(vt=>{st.update(vt.ref,{subSubcategory:"uncategorized"})}),await st.commit(),e(`Updated ${Xe.size} products to uncategorized sub-subcategory.`,"success"),e(`Sub-subcategory "${Qe}" deleted successfully! 🎉`,"success")}catch(me){console.error("Error deleting sub-subcategory:",me),e("Failed to delete sub-subcategory.","error")}finally{a(!1)}},ie=(ce,ke)=>{I(Qe=>({...Qe,[ce]:ke})),H(Qe=>({...Qe,[ce]:""}))},ze=ce=>{X(ke=>({...ke,[ce]:!ke[ce]}))},Ve=()=>{g(""),y(""),v(""),I({minPrice:"",maxPrice:"",buyerProtectionRate:"",handlingRate:"",taxRate:""}),k(null),H({})};return E.useEffect(()=>{N&&(async()=>{const ke=Ne(J,"categories",N),Qe=await it(ke);if(Qe.exists()){const me=Qe.data();y(me.bannerDesktop),v(me.bannerMobile)}})()},[N]),s||!A?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-xl shadow-lg",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-category text-blue-500"}),"Manage Categories"]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-6 bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-inner",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-plus-circle text-green-500"}),N?"Edit Category":"Add New Category"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Category Name",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Unique name for the category (e.g., Electronics)"})]}),n.jsx("input",{type:"text",value:f,onChange:ce=>g(ce.target.value),placeholder:"e.g., Electronics",className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${Y.newCategory?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s}),Y.newCategory&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),Y.newCategory]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Desktop Banner URL",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"URL for desktop category banner"})]}),n.jsx("input",{type:"url",value:x,onChange:ce=>y(ce.target.value),placeholder:"https://example.com/banner-desktop.jpg",className:"mt-1 w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:s})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Mobile Banner URL",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"URL for mobile category banner"})]}),n.jsx("input",{type:"url",value:b,onChange:ce=>v(ce.target.value),placeholder:"https://example.com/banner-mobile.jpg",className:"mt-1 w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:s})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Minimum Price (₦)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Minimum product price for this category"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:"₦"}),n.jsx("input",{type:"number",value:_.minPrice,onChange:ce=>ie("minPrice",ce.target.value),min:"0",step:"0.01",placeholder:"1000",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${Y.minPrice?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s})]}),Y.minPrice&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),Y.minPrice]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Maximum Price (₦)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Maximum product price (leave blank for no limit)"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:"₦"}),n.jsx("input",{type:"number",value:_.maxPrice,onChange:ce=>ie("maxPrice",ce.target.value),min:"0",step:"0.01",placeholder:"No maximum",className:`mt-1 w-full py-2 pl-8 pr-3 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${Y.maxPrice?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s})]}),Y.maxPrice&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),Y.maxPrice]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Buyer Protection Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for buyer protection"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:_.buyerProtectionRate,onChange:ce=>ie("buyerProtectionRate",ce.target.value),min:"0",step:"0.01",placeholder:"8",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${Y.buyerProtectionRate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),Y.buyerProtectionRate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),Y.buyerProtectionRate]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Handling Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Fee percentage for handling"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:_.handlingRate,onChange:ce=>ie("handlingRate",ce.target.value),min:"0",step:"0.01",placeholder:"20",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${Y.handlingRate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),Y.handlingRate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),Y.handlingRate]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Tax Rate (%)",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Tax percentage for this category"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",value:_.taxRate,onChange:ce=>ie("taxRate",ce.target.value),min:"0",step:"0.01",placeholder:"7.5",className:`mt-1 w-full py-2 pl-3 pr-8 border rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 ${Y.taxRate?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"} bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200`,disabled:s}),n.jsx("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",children:"%"})]}),Y.taxRate&&n.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-error-circle"}),Y.taxRate]})]})]}),n.jsx("div",{className:"flex gap-4 mt-6",children:N?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>ee(N),disabled:s,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[n.jsx("i",{className:"bx bx-save"}),s?"Updating...":"Update Category"]}),n.jsxs("button",{onClick:Ve,disabled:s,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-red-600 hover:bg-red-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[n.jsx("i",{className:"bx bx-x"}),"Cancel"]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:Q,disabled:s,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[n.jsx("i",{className:"bx bx-plus"}),s?"Adding...":"Add Category"]}),n.jsxs("button",{onClick:Ve,disabled:s,className:"py-2 px-6 rounded-lg text-white text-sm font-medium bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 transition-all duration-200 flex items-center gap-2 shadow-md",children:[n.jsx("i",{className:"bx bx-refresh"}),"Clear Form"]})]})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-ul text-blue-500"}),"Existing Categories"]}),i.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-300 italic",children:"No categories found. Add one above!"}):n.jsx("ul",{className:"space-y-4",children:i.map(ce=>n.jsxs("li",{className:"p-6 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-all duration-200",children:[n.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>ze(ce),children:[n.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[n.jsx("i",{className:`bx bx-chevron-${$[ce]?"up":"down"} text-blue-500`}),ce]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:ke=>{ke.stopPropagation(),k(ce),g(ce),I({minPrice:A[ce].minPrice===1/0?"":A[ce].minPrice,maxPrice:A[ce].maxPrice===1/0?"":A[ce].maxPrice,buyerProtectionRate:A[ce].buyerProtectionRate*100,handlingRate:A[ce].handlingRate*100,taxRate:A[ce].taxRate?A[ce].taxRate*100:7.5})},disabled:s,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 text-sm flex items-center gap-1",title:"Edit category",children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:ke=>{ke.stopPropagation(),B({...G,category:ce})},disabled:s,className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm flex items-center gap-1",title:"Delete category",children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]}),$[ce]&&n.jsxs("div",{className:"mt-4 ml-4 space-y-4 animate-slide-down",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Add Subcategory",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Subcategories group products within a category (e.g., Phones under Electronics)"})]}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsx("input",{type:"text",value:P[ce]||"",onChange:ke=>T(Qe=>({...Qe,[ce]:ke.target.value})),placeholder:"e.g., Phones",className:"w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:s}),n.jsxs("button",{type:"button",onClick:()=>le(ce),className:"py-2 px-4 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",disabled:s,children:[s?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-plus"}),"Add"]})]})]}),l[ce]?.length>0&&n.jsx("ul",{className:"space-y-3 ml-4",children:l[ce].map(ke=>n.jsxs("li",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-subdirectory-right text-gray-500"}),ke]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{z({category:ce,subcat:ke}),T(Qe=>({...Qe,[ce]:ke}))},disabled:s,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 text-sm flex items-center gap-1",title:"Edit subcategory",children:[n.jsx("i",{className:"bx bx-edit"}),"Edit"]}),n.jsxs("button",{onClick:()=>B({...G,subcategory:{category:ce,subcat:ke}}),disabled:s,className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm flex items-center gap-1",title:"Delete subcategory",children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})]})]}),F?.category===ce&&F.subcat===ke&&n.jsxs("div",{className:"mt-2 ml-4",children:[n.jsx("input",{type:"text",value:P[ce]||"",onChange:Qe=>T(me=>({...me,[ce]:Qe.target.value})),className:"w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:s}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsxs("button",{onClick:()=>Ee(ce,ke),disabled:s,className:"py-2 px-4 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:[n.jsx("i",{className:"bx bx-save"})," Save"]}),n.jsxs("button",{onClick:()=>z(null),disabled:s,className:"py-2 px-4 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:[n.jsx("i",{className:"bx bx-x"})," Cancel"]})]})]}),n.jsxs("div",{className:"mt-2 ml-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:["Add Sub-subcategory",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help",title:"Further refine products (e.g., Smartphones under Phones)"})]}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsx("input",{type:"text",value:D[`${ce}_${ke}`]||"",onChange:Qe=>L(me=>({...me,[`${ce}_${ke}`]:Qe.target.value})),placeholder:"e.g., Smartphones",className:"w-full max-w-md py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:s}),n.jsx("button",{type:"button",onClick:()=>Oe(ce,ke),className:"py-2 px-3 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",disabled:s,children:s?n.jsx("i",{className:"bx bx-loader bx-spin"}):n.jsx("i",{className:"bx bx-plus"})})]}),u[ce]?.[ke]?.length>0&&n.jsx("ul",{className:"mt-2 space-y-1 ml-6",children:u[ce][ke].map(Qe=>n.jsxs("li",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx("i",{className:"bx bx-subdirectory-right text-gray-400"}),Qe]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{V({category:ce,subcategory:ke,subSubcat:Qe}),L(me=>({...me,[`${ce}_${ke}`]:Qe}))},disabled:s,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 text-sm flex items-center gap-1",title:"Edit sub-subcategory",children:n.jsx("i",{className:"bx bx-edit text-[15px]"})}),n.jsx("button",{onClick:()=>B({...G,subSubcategory:{category:ce,subcategory:ke,subSubcat:Qe}}),disabled:s,className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm flex items-center gap-1",title:"Delete sub-subcategory",children:n.jsx("i",{className:"bx bx-trash text-[15px]"})})]})]},Qe))}),O?.category===ce&&O.subcategory===ke&&O.subSubcat&&n.jsxs("div",{className:"mt-2 ml-6",children:[n.jsx("input",{type:"text",value:D[`${ce}_${ke}`]||"",onChange:Qe=>L(me=>({...me,[`${ce}_${ke}`]:Qe.target.value})),className:"w-full max-w-md py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",disabled:s}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{onClick:()=>Pe(ce,ke,O.subSubcat),disabled:s,className:"py-2 px-4 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:n.jsx("i",{className:"bx bx-save"})}),n.jsx("button",{onClick:()=>V(null),disabled:s,className:"py-2 px-4 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 disabled:bg-gray-400 flex items-center gap-2 transition-all duration-200 shadow-md",children:n.jsx("i",{className:"bx bx-x"})})]})]})]})]},ke))})]})]},ce))})]})]}),G.category&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Confirm Deletion"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['Are you sure you want to delete the category "',G.category,`"? Products will be set to 'uncategorized'. This action cannot be undone.`]})," ",n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>B({...G,category:null}),className:"py-2 px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}),n.jsxs("button",{onClick:()=>{se(G.category),B({...G,category:null})},className:"py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 transition",disabled:s,children:[n.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),G.subcategory&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Confirm Deletion"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['Are you sure you want to delete the subcategory "',G.subcategory.subcat,'" under "',G.subcategory.category,`"? Products will be set to 'uncategorized'. This action cannot be undone.`]})," ",n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>B({...G,subcategory:null}),className:"py-2 px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}),n.jsxs("button",{onClick:()=>{ue(G.subcategory.category,G.subcategory.subcat),B({...G,subcategory:null})},className:"py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 transition",disabled:s,children:[n.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),G.subSubcategory&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Confirm Deletion"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['Are you sure you want to delete the sub-subcategory "',G.subSubcategory.subSubcat,'" under "',G.subSubcategory.subcategory,'" in "',G.subSubcategory.category,`"? Products will be set to 'uncategorized'. This action cannot be undone.`]})," ",n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>B({...G,subSubcategory:null}),className:"py-2 px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}),n.jsxs("button",{onClick:()=>{Ie(G.subSubcategory.category,G.subSubcategory.subcategory,G.subSubcategory.subSubcat),B({...G,subSubcategory:null})},className:"py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 transition",disabled:s,children:[n.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),n.jsx(sce,{alerts:r,removeAlert:t})]})})]})}function nce({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg ${t.type==="error"?"bg-red-600":"bg-green-600"} text-white flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function ice(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="success")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function oce(){const{alerts:r,addAlert:e,removeAlert:t}=ice(),s=us(),[a,i]=E.useState("sellers"),[o,l]=E.useState([]),[c,u]=E.useState([]),[h,f]=E.useState([]),[g,x]=E.useState([]),[y,b]=E.useState(!0),[v,N]=E.useState(!1),[k,A]=E.useState(null),[R,_]=E.useState({color:"",size:"",stock:""});E.useEffect(()=>{if(!ve.currentUser){e("Please log in.","error"),s("/login");return}const T=ft(_e(J,"sellers")),D=os(T,async H=>{const $=[];for(const X of H.docs){const G={id:X.id,...X.data()};if(G.bankCode){const ee=Ne(J,"banks",G.bankCode),se=await it(ee);G.bankName=se.exists()&&se.data().name||"N/A"}else G.bankName="N/A";const B=ft(_e(J,"products"),rt("sellerId","==",G.id)),Q=await it(Ne(J,"products",G.id));G.productCount=Q.exists()?(await os(B,ee=>ee.size)).size:0,$.push(G)}l($)},H=>{e("Failed to fetch sellers.","error"),console.error("Sellers fetch error:",H)}),L=ft(_e(J,"products")),F=os(L,async H=>{const $=[];for(const X of H.docs){const G={id:X.id,...X.data()},B=ft(_e(J,"orders"),rt("productId","==",G.id)),Q=await it(Ne(J,"orders",G.id));G.buyerCount=Q.exists()?(await os(B,ee=>ee.size)).size:0,$.push(G)}u($)},H=>{e("Failed to fetch products.","error"),console.error("Products fetch error:",H)}),z=ft(_e(J,"orders")),O=os(z,H=>{f(H.docs.map($=>({id:$.id,...$.data()})))},H=>{e("Failed to fetch orders.","error"),console.error("Orders fetch error:",H)}),V=ft(_e(J,"favorites")),Y=os(V,H=>{const $={};H.docs.forEach(G=>{const B=G.data();$[B.productId]=($[B.productId]||0)+1});const X=Object.entries($).map(([G,B])=>({productId:G,count:B}));X.sort((G,B)=>B.count-G.count),x(X)},H=>{e("Failed to fetch favorites.","error"),console.error("Favorites fetch error:",H)});return b(!1),()=>{D(),F(),O(),Y()}},[s]);const I=async T=>{if(T.preventDefault(),!!k){b(!0);try{const D=Ne(J,"products",k.id),L=await it(D),z=[...L.exists()?L.data().variants||[]:[],{...R,stock:parseInt(R.stock)||0}];await Qr(D,{variants:z}),e("Variant added successfully!","success"),_({color:"",size:"",stock:""}),N(!1)}catch(D){e("Failed to add variant.","error"),console.error("Add variant error:",D)}finally{b(!1)}}},P=T=>{A(T),N(!0)};return y?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-5 flex justify-center items-start",children:n.jsxs("div",{className:"w-full lg:max-w-5xl md:max-w-4xl sm:max-w-3xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-xl shadow-sm",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-user text-blue-500"}),"Admin Manager"]}),n.jsx("div",{className:"flex border-b border-gray-300 dark:border-gray-600 mt-6",children:["sellers","products","orders","favorites"].map(T=>n.jsx("button",{onClick:()=>i(T),className:`py-2 px-4 text-sm md:text-base font-medium ${a===T?"border-b-2 border-blue-500 text-blue-500":"text-gray-600 dark:text-gray-300 hover:text-blue-500"}`,children:T.charAt(0).toUpperCase()+T.slice(1)},T))}),a==="sellers"&&n.jsx("div",{className:"mt-6 space-y-4",children:o.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No sellers found."}):o.map(T=>n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",T.id]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",T.fullName||"Unknown"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Bank:"})," ",T.bankName]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Account Number:"})," ",T.accountNumber||"N/A"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Products:"})," ",T.productCount||0]})]},T.id))}),a==="products"&&n.jsx("div",{className:"mt-6 space-y-4",children:c.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No products found."}):c.map(T=>n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Product ID:"})," ",T.id]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",T.name||"Unnamed Product"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",T.sellerId]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Price:"})," ₦",T.price?.toFixed(2)||"0.00"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Buyers:"})," ",T.buyerCount||0]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Variants:"})," ",T.variants?.length?T.variants.map(D=>`${D.color} (${D.size}, ${D.stock})`).join(", "):"None"]}),n.jsxs("button",{onClick:()=>P(T),className:"mt-2 py-1 px-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm",children:[n.jsx("i",{className:"bx bx-plus"})," Add Variant"]})]},T.id))}),a==="orders"&&n.jsx("div",{className:"mt-6 space-y-4",children:h.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No orders found."}):h.map(T=>n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Order ID:"})," ",T.id]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Product ID:"})," ",T.productId]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Buyer ID:"})," ",T.buyerId]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ₦",T.amount?.toFixed(2)||"0.00"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Status:"})," ",T.status||"Unknown"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(T.createdAt?.toDate()).toLocaleString()]})]},T.id))}),a==="favorites"&&n.jsx("div",{className:"mt-6 space-y-4",children:g.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No favorited products found."}):g.map(T=>{const D=c.find(L=>L.id===T.productId)||{};return n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Product ID:"})," ",T.productId]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",D.name||"Unnamed Product"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",D.sellerId||"N/A"]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Favorite Count:"})," ",T.count]})]},T.productId)})}),v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:["Add Variant for ",k?.name]}),n.jsxs("form",{onSubmit:I,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Color"}),n.jsx("input",{type:"text",value:R.color,onChange:T=>_({...R,color:T.target.value}),className:"mt-1 p-2 w-full border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Size"}),n.jsx("input",{type:"text",value:R.size,onChange:T=>_({...R,size:T.target.value}),className:"mt-1 p-2 w-full border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Stock"}),n.jsx("input",{type:"number",value:R.stock,onChange:T=>_({...R,stock:T.target.value}),className:"mt-1 p-2 w-full border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:!0})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 text-sm",children:"Cancel"}),n.jsx("button",{type:"submit",className:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm ${y?"opacity-50 cursor-not-allowed":""}`,disabled:y,children:"Add Variant"})]})]})]})}),n.jsx(nce,{alerts:r,removeAlert:t})]})})]})}function lce({alerts:r,removeAlert:e}){return E.useEffect(()=>{if(r.length===0)return;const t=setTimeout(()=>r.forEach(s=>e(s.id)),5e3);return()=>clearTimeout(t)},[r,e]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:r.map(t=>n.jsxs("div",{className:`p-4 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out animate-slide-in ${t.type==="error"?"bg-red-600 text-white":"bg-green-600 text-white"} flex items-center gap-2`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})}function cce(){const[r,e]=E.useState([]);return{alerts:r,addAlert:(a,i="info")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}])},removeAlert:a=>e(i=>i.filter(o=>o.id!==a))}}function dce(){const{alerts:r,addAlert:e,removeAlert:t}=cce(),s=us(),[a,i]=E.useState([]),[o,l]=E.useState(!1),[c,u]=E.useState(null),[h,f]=E.useState(!1);E.useEffect(()=>{if(!ve.currentUser){e("Please log in as admin.","error"),s("/login");return}l(!0),(async()=>{try{const b=(await Ke(_e(J,"sellers"))).docs.map(v=>({id:v.id,...v.data(),email:v.data().email||"N/A",phoneNumber:v.data().phoneNumber||"N/A",walletAddress:v.data().walletAddress||"N/A",bankName:v.data().bankName||"N/A",fullName:v.data().fullName||"N/A",accountNumber:v.data().accountNumber||"N/A"}));i(b)}catch(y){e("Failed to fetch sellers.","error"),console.error("Fetch error:",y)}finally{l(!1)}})()},[s]);const g=async()=>{if(c){l(!0);try{await na(Ne(J,"sellers",c.id)),i(a.filter(x=>x.id!==c.id)),e("Seller wallet deleted successfully.","success"),f(!1)}catch(x){e("Failed to delete seller wallet.","error"),console.error("Delete error:",x)}finally{l(!1)}}};return o?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-6",children:n.jsxs("div",{className:"w-full max-w-7xl mx-auto bg-white dark:bg-gray-800 p-4 md:p-6 rounded-xl shadow-lg",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 border-b-2 border-blue-500 pb-2 md:pb-3 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-wallet-alt text-blue-500"}),"Admin Seller Wallet"]}),a.length===0?n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center py-4 md:py-6",children:"No sellers found."}):n.jsx("div",{className:"space-y-4 mt-4 md:mt-6",children:a.map(x=>n.jsx("div",{className:"p-3 md:p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition",children:n.jsxs("div",{className:"grid grid-cols-1 gap-2  lg:flex md:items-center md:justify-between md:gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",x.id]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Full Name:"})," ",x.fullName]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Email:"})," ",x.email]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Bank Name:"})," ",x.bankName]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Account Number:"})," ",x.accountNumber]})]}),n.jsxs("div",{className:"space-y-1 md:space-y-2",children:[n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Phone:"})," ",x.phoneNumber]}),n.jsxs("p",{className:"text-sm font-light md:text-base text-gray-700 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium text-sm",children:"Wallet Address:"})," ",x.walletAddress]})]}),n.jsx("div",{className:"mt-2 md:mt-0",children:n.jsxs("button",{onClick:()=>{u(x),f(!0)},className:"w-full md:w-auto py-2 px-3 md:px-4 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 flex items-center justify-center gap-1 md:gap-2 text-sm md:text-base transition",disabled:o,children:[n.jsx("i",{className:"bx bx-trash"})," Delete Wallet"]})})]})},x.id))}),h&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 md:p-6 rounded-lg shadow-lg w-11/12 md:max-w-md",children:[n.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-800 dark:text-gray-100 mb-2 md:mb-4",children:"Confirm Deletion"}),n.jsxs("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mb-2 md:mb-4",children:["Are you sure you want to delete the wallet for ",c.email,"? This action cannot be undone."]}),n.jsxs("div",{className:"flex justify-end gap-2 md:gap-4",children:[n.jsx("button",{onClick:()=>f(!1),className:"py-1 md:py-2 px-2 md:px-4 bg-gray-300 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 text-sm md:text-base transition",children:"Cancel"}),n.jsxs("button",{onClick:g,className:"py-1 md:py-2 px-2 md:px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-1 md:gap-2 text-sm md:text-base transition",disabled:o,children:[n.jsx("i",{className:"bx bx-trash"})," Delete"]})]})]})}),n.jsx(lce,{alerts:r,removeAlert:t})]})})]})}function uce(){const[r,e]=E.useState([]),[t,s]=E.useState(!1),[a,i]=E.useState("all"),[o,l]=E.useState(""),c=us(),u=async()=>{s(!0);try{const y=await fetch("https://foremade-backend.onrender.com/api/admin/all-pro-sellers");console.log("Response status:",y.status,"Headers:",Object.fromEntries(y.headers.entries()));const b=await y.json();console.log("Response data:",b),y.ok&&b.status==="success"?e(b.proSellers||[]):xe.error(b.message||"Failed to fetch pro seller requests")}catch(x){console.error("Fetch error:",x),xe.error(x.message||"Failed to fetch pro seller requests")}finally{s(!1)}};E.useEffect(()=>{u()},[]);const h=async(x,y)=>{try{const v=await fetch("https://foremade-backend.onrender.com/api/admin/approve-pro-seller",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proSellerId:x,approve:y})}),N=await v.json();v.ok&&N.status==="success"?(xe.success(N.message||(y?"Pro seller approved":"Pro seller rejected")),u()):xe.error(N.message||"Action failed")}catch(b){console.error("Approve/Reject error:",b),xe.error(b.message||"Action failed")}},f=x=>{if(!x)return"-";if(typeof x=="object"&&x.seconds){const b=new Date(x.seconds*1e3);return isNaN(b.getTime())?"-":b.toLocaleDateString()}const y=new Date(x);return isNaN(y.getTime())?"-":y.toLocaleDateString()},g=r.filter(x=>(x.proSellerId?.toLowerCase()||"").includes(o.toLowerCase())||(x.userId?.toLowerCase()||"").includes(o.toLowerCase())||(x.status?.toLowerCase()||"").includes(o.toLowerCase())).filter(x=>a==="all"||x.status===a);return n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6",children:n.jsxs("div",{className:"w-full max-w-8xl mx-auto p-4",children:[n.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-900 to-amber-500 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-store text-blue-500 text-lg sm:text-xl"}),"Pro Seller Requests"]}),n.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"relative flex-1 group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 mb-1",children:["Search Pro Sellers",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Search by ID, User ID, or Status"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"}),n.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),placeholder:"Search by ID, User ID, or Status...",className:"w-full py-2 pl-10 pr-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200"})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1 mb-1",children:["Filter by Status",n.jsx("i",{className:"bx bx-info-circle text-gray-400 group-hover:text-blue-500 cursor-help text-xs sm:text-sm",title:"Filter pro seller requests"})]}),n.jsxs("select",{value:a,onChange:x=>i(x.target.value),className:"w-full py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-all duration-200",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md",children:[n.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-700 dark:text-gray-200 mb-2 sm:mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-list-ul text-blue-500 text-lg sm:text-xl"}),"All Pro Sellers"]}),t?n.jsx("div",{className:"text-gray-500 text-center py-8",children:"Loading..."}):g.length===0?n.jsx("div",{className:"text-gray-500 text-center py-8",children:"No pro sellers found."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"hidden lg:block",children:n.jsxs(Ze.table,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"min-w-full bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:[n.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"ProSeller ID"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"User ID"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"Created"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold whitespace-nowrap",children:"Actions"})]})}),n.jsx("tbody",{children:n.jsx(tn,{children:g.map((x,y)=>{const b=x.status==="pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":x.status==="approved"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300";return n.jsxs(Ze.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:y*.1},className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[n.jsx("td",{className:"px-4 py-3 break-all max-w-xs cursor-pointer text-blue-600 hover:underline",onClick:()=>c(`/admin/pro-seller-details/${x.proSellerId}`),children:x.proSellerId}),n.jsx("td",{className:"px-4 py-3 break-all max-w-xs",children:x.userId}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${b}`,children:x.status})}),n.jsx("td",{className:"px-4 py-3",children:f(x.createdAt)}),n.jsx("td",{className:"px-4 py-3 flex gap-2",children:x.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>h(x.proSellerId,!0),className:"px-3 py-1 bg-green-600 text-white rounded-lg text-xs hover:bg-green-700 transition flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-check"})," Approve"]}),n.jsxs("button",{onClick:()=>h(x.proSellerId,!1),className:"px-3 py-1 bg-red-600 text-white rounded-lg text-xs hover:bg-red-700 transition flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-x"})," Reject"]})]})})]},x.proSellerId||`req-${y}`)})})})]})}),n.jsx("div",{className:"lg:hidden",children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:n.jsx(tn,{children:g.map((x,y)=>{const b=x.status==="pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":x.status==="approved"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300";return n.jsxs(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:y*.1},className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex flex-col gap-3 mb-3",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 truncate cursor-pointer text-blue-600 hover:underline",onClick:()=>c(`/admin/pro-seller-details/${x.proSellerId}`),children:["ProSeller ID: ",x.proSellerId]}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:["User ID: ",x.userId]})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${b}`,children:x.status}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Created: ",f(x.createdAt)]})]}),x.status==="pending"&&n.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[n.jsxs("button",{onClick:()=>h(x.proSellerId,!0),className:"px-3 py-1 bg-green-600 text-white rounded-lg text-xs hover:bg-green-700 transition flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-check"})," Approve"]}),n.jsxs("button",{onClick:()=>h(x.proSellerId,!1),className:"px-3 py-1 bg-red-600 text-white rounded-lg text-xs hover:bg-red-700 transition flex items-center gap-1",children:[n.jsx("i",{className:"bx bx-x"})," Reject"]})]})]},x.proSellerId||`req-${y}`)})})})})]})]})]})})]})}const hce=()=>{const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(""),o=async()=>{try{s(!0),ai(ve,async f=>{if(f){const y=(await Ke(_e(J,"productBumps"))).docs.map(v=>({id:v.id,productId:v.data().productId,sellerId:v.data().sellerId||"Unknown",startDate:v.data().startDate?.toDate()||null,expiry:v.data().expiry?.toDate()||null})).map(async v=>{const N=await it(Ne(J,"products",v.productId));if(N.exists()){const k=N.data(),A=Array.isArray(k.imageUrls)?k.imageUrls.filter(R=>typeof R=="string"&&R.startsWith("https://res.cloudinary.com/")):k.imageUrl&&typeof k.imageUrl=="string"&&k.imageUrl.startsWith("https://res.cloudinary.com/")?[k.imageUrl]:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"];return{...v,name:k.name||"Unnamed Product",price:k.price||0,imageUrl:A[0],bumpExpiry:k.bumpExpiry?.toDate()||null,bumpDuration:k.bumpDuration||"Unknown",sellerName:k.sellerName||k.seller||v.sellerId}}else return{...v,name:"Unnamed Product",price:0,imageUrl:"https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg",bumpExpiry:null,bumpDuration:"Unknown",sellerName:v.sellerId}}),b=await Promise.all(y);console.log("Fetched Products:",b),e(b)}else i("Please log in as an admin to view bumped products.");s(!1)})}catch(f){i("Failed to fetch bumped products: "+f.message),s(!1)}},l=async f=>{if(window.confirm("Are you sure you want to delete this product bump?"))try{await na(Ne(J,"productBumps",f)),e(r.filter(g=>g.id!==f))}catch(g){i("Failed to delete product bump: "+g.message)}},c=()=>{o()};E.useEffect(()=>{o()},[]);const u=f=>{if(!f)return"N/A";try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}},h=f=>{const g=f.bumpExpiry||f.expiry;return g&&new Date(g)>new Date};return t?n.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[n.jsx(bs,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 animate-pulse",children:Array.from({length:6}).map((f,g)=>n.jsx("div",{className:"bg-gray-200 p-4 rounded-lg h-64"},g))})})})]}):a?n.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[n.jsx(bs,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 rounded-lg dark:bg-red-900 dark:border-red-700",children:[n.jsx("p",{className:"text-red-700 dark:text-red-300",children:a}),n.jsx(he,{to:"/login",className:"text-blue-600 hover:text-blue-800 font-medium underline mt-2 block",children:"Return to Login"})]})})})]}):n.jsxs("div",{className:"flex min-h-screen bg-white dark:bg-gray-900",children:[n.jsx(bs,{}),n.jsx("main",{className:"flex-1 ml-0 md:ml-64 p-6",children:n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-center gap-2",children:[n.jsx(he,{to:"/admin/dashboard",className:"inline-flex px-5 py-2 bg-gray-200 text-gray-900 rounded hover:bg-gray-300 font-semibold",children:"Return to Dashboard"}),n.jsxs("button",{onClick:c,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(b2,{className:"w-5 h-5 mr-2"}),"Refresh"]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-white",children:"Bumped Products"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"View all products currently bumped by sellers"})]}),r.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(f=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-md hover:shadow-lg transition duration-300 relative",children:[n.jsxs("div",{className:"relative aspect-[4/3] mb-4 overflow-hidden rounded-lg",children:[n.jsx("img",{src:f.imageUrl,alt:f.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:g=>{g.target.style.display="none",g.target.parentElement.innerHTML='<div class="absolute w-full h-full bg-gray-200 rounded-lg flex items-center justify-center"><span class="text-gray-500">Image N/A</span></div>'}}),n.jsx("button",{onClick:()=>l(f.id),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",children:n.jsx(Z5,{className:"w-[34px] h-[34px] bg-gray-300 rounded-lg p-2"})}),n.jsx("span",{className:"absolute top-2 left-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:h(f)?"#00ffaaaf":"#ff6e6eff",color:"white"},children:h(f)?"Bump Active":"Bump Expired"})]}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 truncate",children:f.name}),n.jsxs("p",{className:"text-gray-700 text-sm mb-1",children:["Price: ₦",f.price.toLocaleString("en-NG")]}),n.jsxs("p",{className:"text-gray-600 text-xs mb-1",children:["Seller: ",f.sellerName]}),n.jsxs("p",{className:"text-gray-600 text-xs",children:["Expires: ",u(f.expiry||f.bumpExpiry)]}),n.jsxs("p",{className:"text-gray-600 text-xs",children:["Duration: ",f.bumpDuration]})]},f.id))}):n.jsx("div",{className:"col-span-full flex flex-col items-center justify-center mt-10 mb-10",children:n.jsx("p",{className:"text-gray-900 text-center text-lg mt-4",children:"No bumped products found."})})]})})]})};function mce({alerts:r,removeAlert:e}){return n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:n.jsx(tn,{children:r.map(t=>n.jsxs(Ze.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},transition:{duration:.3},className:`p-4 rounded-lg shadow-lg flex items-center gap-2 ${t.type==="error"?"bg-red-600":"bg-green-600"} text-white`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})})}function fce(){const[r,e]=E.useState([]),t=E.useCallback((a,i="success")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}]),setTimeout(()=>e(l=>l.filter(c=>c.id!==o)),5e3)},[]),s=E.useCallback(a=>{e(i=>i.filter(o=>o.id!==a))},[]);return{alerts:r,addAlert:t,removeAlert:s}}function gce(){const r=us(),{alerts:e,addAlert:t,removeAlert:s}=fce(),[a,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState(""),[h,f]=E.useState(!1),g=E.useCallback(Sd(b=>{u(b)},300),[]),x=b=>{g(b.target.value)},y=async b=>{if(!b){t("Cannot delete: Missing transaction ID","error");return}f(!0);try{const N=await ss.delete(`https://foremade-backend.onrender.com/delete-transaction/${b}`,{timeout:15e3});t(N.data.message),i(k=>k.filter(A=>A.id!==b)),l(k=>k.filter(A=>A.id!==b))}catch(v){console.error("Delete error:",v.message,{transactionId:b,details:v.response?.data?.details});const N=v.response?.data?.error||v.message,k=v.response?.data?.details?JSON.stringify(v.response.data.details):"";t(`Failed to delete transaction: ${N}${k?` (Details: ${k})`:""}`,"error")}finally{f(!1)}};return E.useEffect(()=>{if(!ve.currentUser){t("Please log in.","error"),r("/login");return}const b=ft(_e(J,"transactions")),v=os(b,N=>{const k=N.docs.map(A=>({id:A.id,...A.data()}));console.log("Fetched all transactions:",k),i(k),l(k.filter(A=>(A.id?.toLowerCase()||"").includes(c.toLowerCase())||(A.sellerId?.toLowerCase()||"").includes(c.toLowerCase())||(A.type?.toLowerCase()||"").includes(c.toLowerCase())))},N=>{console.error("Firestore error:",N.message),t(`Failed to fetch transactions: ${N.message}`,"error")});return()=>v()},[r,c]),n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx(Ze.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:n.jsxs("div",{className:"max-w-8xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:[n.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-900 to-amber-500 flex items-center gap-2",children:"All Transactions"})}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search by Transaction ID, Seller ID, or Type...",onChange:x,className:"w-full p-3 pl-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"}),n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"})]})}),o.length===0?n.jsx(Ze.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-gray-600 dark:text-gray-400 text-center py-8",children:"No transactions found."}):n.jsx(Ze.div,{className:"grid gap-4 lg:grid-cols-2",children:n.jsx(tn,{children:o.map((b,v)=>n.jsxs(Ze.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,delay:v*.1},className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",b.id||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Seller ID:"})," ",b.sellerId||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Type:"})," ",b.type||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Status:"})," ",n.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-semibold ${b.status==="Pending"?"bg-yellow-100 text-yellow-800":b.status==="Approved"?"bg-green-100 text-green-800":b.status==="Rejected"||b.status==="Failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:b.status||"N/A"})]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ",b.country==="United Kingdom"?"£":"₦",b.amount?.toFixed(2)||"0.00"]}),b.type==="Withdrawal"&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Bank Name:"})," ",b.bankName||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Account Number:"})," ",b.accountNumber||"N/A"]})]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Country:"})," ",b.country||"N/A"]})]})]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Date:"})," ",b.createdAt?.toDate?new Date(b.createdAt.toDate()).toLocaleString():"N/A"]}),b.status==="Failed"&&b.failureReason&&n.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Reason:"})," ",b.failureReason]}),n.jsx("div",{className:"mt-4 flex gap-2",children:n.jsxs("button",{onClick:()=>y(b.id),disabled:h||!b.id,className:`px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition flex items-center gap-2 ${h||!b.id?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("i",{className:"bx bx-trash"}),"Delete"]})})]},b.id||`txn-${v}`))})}),n.jsx(mce,{alerts:e,removeAlert:s})]})})]})}const pce=()=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"p-10 m-2 bg-green-100",children:n.jsx("p",{className:""})}),n.jsx("div",{className:"p-10 m-2 bg-green-100",children:n.jsx("p",{className:""})})]}),n.jsxs("div",{className:"font-sans max-w-3xl mx-auto p-5",children:[n.jsx("h1",{className:"text-center text-3xl font-bold text-gray-800",children:"HOW FOREMADE WORKS"}),n.jsx("p",{className:"text-center text-lg italic text-gray-600 mt-2",children:"Your easy way to buy and sell online — fast, simple, and smart, Naija-style."}),n.jsx("h2",{className:"mt-8 text-2xl font-semibold text-gray-700",children:"FOR SELLERS — Make that money with ease"}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"1. List for Free"}),n.jsx("p",{className:"text-gray-700",children:"Oya, just snap and list sharp-sharp. Download the Foremade app for free. Take photos of your item, describe it small, set your price and upload. Your listing go live immediately."})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"2. Sell it, Ship it"}),n.jsx("p",{className:"text-gray-700",children:"Somebody don reason your item? Package am well and drop am. Once your item sell, just box am, print your prepaid label and drop it at any nearby point within 5 days. Easy like that."})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"3. It’s Payday!"}),n.jsx("p",{className:"text-gray-700",children:"Omo, your money don show. There are no selling fees — everything you earn is yours. Once buyer confirm say everything dey okay, your FOREMADE wallet go alert you."})]}),n.jsx("h2",{className:"mt-8 text-2xl font-semibold text-gray-700",children:"FOR BUYERS — Get what you need, no stress"}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"1. Find it"}),n.jsx("p",{className:"text-gray-700",children:"Wetin you dey find? Just search am. Use the Foremade app to browse millions of items — from gadgets to clothes and everything in-between. If e dey, you go see am."})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"2. Buy it"}),n.jsx("p",{className:"text-gray-700",children:"Tap am and pay, no wahala. Ask the seller questions if you wan confirm something, then buy easily with your card or your FOREMADE balance."})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-xl font-medium text-gray-600",children:"3. Get it"}),n.jsx("p",{className:"text-gray-700",children:"Sit down and relax, delivery dey come. At checkout, you go see when your item go arrive. Once e enter post, we go update you. Just chill — your item go soon reach."})]}),n.jsx("p",{className:"text-center mt-8 font-bold text-2xl text-gray-800",children:"FOREMADE — Na we dey run things."})]})]});var f1={};/*!
 * ApexCharts v5.3.3
 * (c) 2018-2025 ApexCharts
 */function JN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=Array(e);t<e;t++)s[t]=r[t];return s}function wL(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ct(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function QI(r,e){for(var t=0;t<e.length;t++){var s=e[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,kL(s.key),s)}}function dt(r,e,t){return e&&QI(r.prototype,e),t&&QI(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function sf(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=J2(r))||e){t&&(r=t);var s=0,a=function(){};return{s:a,n:function(){return s>=r.length?{done:!0}:{done:!1,value:r[s++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,l=!1;return{s:function(){t=t.call(r)},n:function(){var c=t.next();return o=c.done,c},e:function(c){l=!0,i=c},f:function(){try{o||t.return==null||t.return()}finally{if(l)throw i}}}}function Fg(r){var e=NL();return function(){var t,s=cb(r);if(e){var a=cb(this).constructor;t=Reflect.construct(s,arguments,a)}else t=s.apply(this,arguments);return function(i,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wL(i)}(this,t)}}function lb(r,e,t){return(e=kL(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cb(r){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cb(r)}function Ug(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&ej(r,e)}function NL(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NL=function(){return!!r})()}function ZI(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function et(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZI(Object(t),!0).forEach(function(s){lb(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ZI(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function ej(r,e){return ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},ej(r,e)}function jL(r,e){return function(t){if(Array.isArray(t))return t}(r)||function(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var i,o,l,c,u=[],h=!0,f=!1;try{if(l=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;h=!1}else for(;!(h=(i=l.call(a)).done)&&(u.push(i.value),u.length!==s);h=!0);}catch(g){f=!0,o=g}finally{try{if(!h&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw o}}return u}}(r,e)||J2(r,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gr(r){return function(e){if(Array.isArray(e))return JN(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||J2(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kL(r){var e=function(t,s){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var i=a.call(t,s);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}(r,"string");return typeof e=="symbol"?e:e+""}function Da(r){return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(r)}function J2(r,e){if(r){if(typeof r=="string")return JN(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?JN(r,e):void 0}}var ne=function(){function r(){ct(this,r)}return dt(r,[{key:"shadeRGBColor",value:function(e,t){var s=t.split(","),a=e<0?0:255,i=e<0?-1*e:e,o=parseInt(s[0].slice(4),10),l=parseInt(s[1],10),c=parseInt(s[2],10);return"rgb("+(Math.round((a-o)*i)+o)+","+(Math.round((a-l)*i)+l)+","+(Math.round((a-c)*i)+c)+")"}},{key:"shadeHexColor",value:function(e,t){var s=parseInt(t.slice(1),16),a=e<0?0:255,i=e<0?-1*e:e,o=s>>16,l=s>>8&255,c=255&s;return"#"+(16777216+65536*(Math.round((a-o)*i)+o)+256*(Math.round((a-l)*i)+l)+(Math.round((a-c)*i)+c)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,t){return r.isColorHex(t)?this.shadeHexColor(e,t):this.shadeRGBColor(e,t)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&Da(e)==="object"&&!Array.isArray(e)&&e!=null}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"listToArray",value:function(e){var t,s=[];for(t=0;t<e.length;t++)s[t]=e[t];return s}},{key:"extend",value:function(e,t){var s=this;typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(i),l=1;l<arguments.length;l++){var c=arguments[l];if(c!=null)for(var u in c)c.hasOwnProperty(u)&&(o[u]=c[u])}return o});var a=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(i){s.isObject(t[i])&&i in e?a[i]=s.extend(e[i],t[i]):Object.assign(a,lb({},i,t[i]))}),a}},{key:"extendArray",value:function(e,t){var s=[];return e.map(function(a){s.push(r.extend(t,a))}),e=s}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(e){var t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e===null||Da(e)!=="object")return e;if(s.has(e))return s.get(e);if(Array.isArray(e)){t=[],s.set(e,t);for(var a=0;a<e.length;a++)t[a]=this.clone(e[a],s)}else if(e instanceof Date)t=new Date(e.getTime());else for(var i in t={},s.set(e,t),e)e.hasOwnProperty(i)&&(t[i]=this.clone(e[i],s));return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return typeof e=="number"||e===null?e:parseFloat(e)}},{key:"stripNumber",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(e)?e:parseFloat(e.toPrecision(t))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){return e.toString().includes("e")?Math.round(e):e}},{key:"elementExists",value:function(e){return!(!e||!e.isConnected)}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),s=e.clientHeight,a=e.clientWidth;return s-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[a-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),s]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce(function(t,s){return Array.isArray(s)&&(s=s.reduce(function(a,i){return a.length>i.length?a:i})),t.length>s.length?t:s},0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;e.substring(0,1)!=="#"&&(e="#999999");var s=e.replace("#","");s=s.match(new RegExp("(.{"+s.length/3+"})","g"));for(var a=0;a<s.length;a++)s[a]=parseInt(s[a].length===1?s[a]+s[a]:s[a],16);return t!==void 0&&s.push(t),"rgba("+s.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var s=[],a=2*Math.PI/t,i=0;i<t;i++){var o={};o.x=e*Math.sin(i*a),o.y=-e*Math.cos(i*a),s.push(o)}return s}},{key:"polarToCartesian",value:function(e,t,s,a){var i=(a-90)*Math.PI/180;return{x:e+s*Math.cos(i),y:t+s*Math.sin(i)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",s=e.toString().slice();return s=s.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,s){if(s>=e.length)for(var a=s-e.length+1;a--;)e.push(void 0);return e.splice(s,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e.style.key=t[s])}},{key:"preciseAddition",value:function(e,t){var s=(String(e).split(".")[1]||"").length,a=(String(t).split(".")[1]||"").length,i=Math.pow(10,Math.max(s,a));return(Math.round(e*i)+Math.round(t*i))/i}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isMsEdge",value:function(){var e=window.navigator.userAgent,t=e.indexOf("Edge/");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}},{key:"getGCD",value:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,a=Math.pow(10,s-Math.floor(Math.log10(Math.max(e,t))));for(e=Math.round(Math.abs(e)*a),t=Math.round(Math.abs(t)*a);t;){var i=t;t=e%t,e=i}return e/a}},{key:"getPrimeFactors",value:function(e){for(var t=[],s=2;e>=2;)e%s==0?(t.push(s),e/=s):s++;return t}},{key:"mod",value:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,a=Math.pow(10,s-Math.floor(Math.log10(Math.max(e,t))));return(e=Math.round(Math.abs(e)*a))%(t=Math.round(Math.abs(t)*a))/a}}]),r}(),Ah=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"animateLine",value:function(e,t,s,a){e.attr(t).animate(a).attr(s)}},{key:"animateMarker",value:function(e,t,s,a){e.attr({opacity:0}).animate(t).attr({opacity:1}).after(function(){a()})}},{key:"animateRect",value:function(e,t,s,a,i){e.attr(t).animate(a).attr(s).after(function(){return i()})}},{key:"animatePathsGradually",value:function(e){var t=e.el,s=e.realIndex,a=e.j,i=e.fill,o=e.pathFrom,l=e.pathTo,c=e.speed,u=e.delay,h=this.w,f=0;h.config.chart.animations.animateGradually.enabled&&(f=h.config.chart.animations.animateGradually.delay),h.config.chart.animations.dynamicAnimation.enabled&&h.globals.dataChanged&&h.config.chart.type!=="bar"&&(f=0),this.morphSVG(t,s,a,h.config.chart.type!=="line"||h.globals.comboCharts?i:"stroke",o,l,c,u*f)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(e){var t=e.el;t.classList.remove("apexcharts-element-hidden"),t.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),typeof t.config.chart.events.animationEnd=="function"&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,s,a,i,o,l,c){var u=this,h=this.w;i||(i=e.attr("pathFrom")),o||(o=e.attr("pathTo"));var f=function(g){return h.config.chart.type==="radar"&&(l=1),"M 0 ".concat(h.globals.gridHeight)};(!i||i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i=f()),(!o.trim()||o.indexOf("undefined")>-1||o.indexOf("NaN")>-1)&&(o=f()),h.globals.shouldAnimate||(l=1),e.plot(i).animate(1,c).plot(i).animate(l,c).plot(o).after(function(){ne.isNumber(s)?s===h.globals.series[h.globals.maxValsInArrayIndex].length-2&&h.globals.shouldAnimate&&u.animationCompleted(e):a!=="none"&&h.globals.shouldAnimate&&(!h.globals.comboCharts&&t===h.globals.series.length-1||h.globals.comboCharts)&&u.animationCompleted(e),u.showDelayedElements()})}}]),r}();const tj={},SL=[];function Yt(r,e){if(Array.isArray(r))for(const t of r)Yt(t,e);else if(typeof r!="object")_L(Object.getOwnPropertyNames(e)),tj[r]=Object.assign(tj[r]||{},e);else for(const t in r)Yt(t,r[t])}function qa(r){return tj[r]||{}}function _L(r){SL.push(...r)}function eS(r,e){let t;const s=r.length,a=[];for(t=0;t<s;t++)a.push(e(r[t]));return a}function g1(r){return r%360*Math.PI/180}function Ch(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Eh(r,e,t,s){return e!=null&&t!=null||(s=s||r.bbox(),e==null?e=s.width/s.height*t:t==null&&(t=s.height/s.width*e)),{width:e,height:t}}function sj(r,e){const t=r.origin;let s=r.ox!=null?r.ox:r.originX!=null?r.originX:"center",a=r.oy!=null?r.oy:r.originY!=null?r.originY:"center";t!=null&&([s,a]=Array.isArray(t)?t:typeof t=="object"?[t.x,t.y]:[t,t]);const i=typeof s=="string",o=typeof a=="string";if(i||o){const{height:l,width:c,x:u,y:h}=e.bbox();i&&(s=s.includes("left")?u:s.includes("right")?u+c:u+c/2),o&&(a=a.includes("top")?h:a.includes("bottom")?h+l:h+l/2)}return[s,a]}const xce=new Set(["desc","metadata","title"]),rj=r=>xce.has(r.nodeName),AL=(r,e,t={})=>{const s={...e};for(const a in s)s[a].valueOf()===t[a]&&delete s[a];Object.keys(s).length?r.node.setAttribute("data-svgjs",JSON.stringify(s)):(r.node.removeAttribute("data-svgjs"),r.node.removeAttribute("svgjs:data"))},tS="http://www.w3.org/2000/svg",p1="http://www.w3.org/2000/xmlns/",Th="http://www.w3.org/1999/xlink",ps={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function zg(){return ps.window}let sS=class{};const ad={},rS="___SYMBOL___ROOT___";function sg(r,e=tS){return ps.document.createElementNS(e,r)}function La(r,e=!1){if(r instanceof sS)return r;if(typeof r=="object")return x1(r);if(r==null)return new ad[rS];if(typeof r=="string"&&r.charAt(0)!=="<")return x1(ps.document.querySelector(r));const t=e?ps.document.createElement("div"):sg("svg");return t.innerHTML=r,r=x1(t.firstChild),t.removeChild(t.firstChild),r}function Zs(r,e){return e&&(e instanceof ps.window.Node||e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node)?e:sg(r)}function Ln(r){if(!r)return null;if(r.instance instanceof sS)return r.instance;if(r.nodeName==="#document-fragment")return new ad.Fragment(r);let e=Ch(r.nodeName||"Dom");return e==="LinearGradient"||e==="RadialGradient"?e="Gradient":ad[e]||(e="Dom"),new ad[e](r)}let x1=Ln;function ys(r,e=r.name,t=!1){return ad[e]=r,t&&(ad[rS]=r),_L(Object.getOwnPropertyNames(r.prototype)),r}let bce=1e3;function CL(r){return"Svgjs"+Ch(r)+bce++}function EL(r){for(let e=r.children.length-1;e>=0;e--)EL(r.children[e]);return r.id&&(r.id=CL(r.nodeName)),r}function Tt(r,e){let t,s;for(s=(r=Array.isArray(r)?r:[r]).length-1;s>=0;s--)for(t in e)r[s].prototype[t]=e[t]}function Qs(r){return function(...e){const t=e[e.length-1];return!t||t.constructor!==Object||t instanceof Array?r.apply(this,e):r.apply(this,e.slice(0,-1)).attr(t)}}Yt("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const r=this.position();return this.parent().add(this.remove(),r+1),this},backward:function(){const r=this.position();return this.parent().add(this.remove(),r?r-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(r){(r=La(r)).remove();const e=this.position();return this.parent().add(r,e),this},after:function(r){(r=La(r)).remove();const e=this.position();return this.parent().add(r,e+1),this},insertBefore:function(r){return(r=La(r)).before(this),this},insertAfter:function(r){return(r=La(r)).after(this),this}});const TL=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,yce=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,vce=/rgb\((\d+),(\d+),(\d+)\)/,wce=/(#[a-z_][a-z0-9\-_]*)/i,Nce=/\)\s*,?\s*/,jce=/\s/g,JI=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,e4=/^rgb\(/,t4=/^(\s+)?$/,s4=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,kce=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Uo=/[\s,]+/,aS=/[MLHVCSQTAZ]/i;function Sce(r){const e=Math.round(r),t=Math.max(0,Math.min(255,e)).toString(16);return t.length===1?"0"+t:t}function bu(r,e){for(let t=e.length;t--;)if(r[e[t]]==null)return!1;return!0}function b1(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r}Yt("Dom",{classes:function(){const r=this.attr("class");return r==null?[]:r.trim().split(Uo)},hasClass:function(r){return this.classes().indexOf(r)!==-1},addClass:function(r){if(!this.hasClass(r)){const e=this.classes();e.push(r),this.attr("class",e.join(" "))}return this},removeClass:function(r){return this.hasClass(r)&&this.attr("class",this.classes().filter(function(e){return e!==r}).join(" ")),this},toggleClass:function(r){return this.hasClass(r)?this.removeClass(r):this.addClass(r)}}),Yt("Dom",{css:function(r,e){const t={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(s){return!!s.length}).forEach(function(s){const a=s.split(/\s*:\s*/);t[a[0]]=a[1]}),t;if(arguments.length<2){if(Array.isArray(r)){for(const s of r){const a=s;t[s]=this.node.style.getPropertyValue(a)}return t}if(typeof r=="string")return this.node.style.getPropertyValue(r);if(typeof r=="object")for(const s in r)this.node.style.setProperty(s,r[s]==null||t4.test(r[s])?"":r[s])}return arguments.length===2&&this.node.style.setProperty(r,e==null||t4.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return this.css("display")!=="none"}}),Yt("Dom",{data:function(r,e,t){if(r==null)return this.data(eS(function(s,a){let i;const o=s.length,l=[];for(i=0;i<o;i++)a(s[i])&&l.push(s[i]);return l}(this.node.attributes,s=>s.nodeName.indexOf("data-")===0),s=>s.nodeName.slice(5)));if(r instanceof Array){const s={};for(const a of r)s[a]=this.data(a);return s}if(typeof r=="object")for(e in r)this.data(e,r[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+r))}catch{return this.attr("data-"+r)}else this.attr("data-"+r,e===null?null:t===!0||typeof e=="string"||typeof e=="number"?e:JSON.stringify(e));return this}}),Yt("Dom",{remember:function(r,e){if(typeof arguments[0]=="object")for(const t in r)this.remember(t,r[t]);else{if(arguments.length===1)return this.memory()[r];this.memory()[r]=e}return this},forget:function(){if(arguments.length===0)this._memory={};else for(let r=arguments.length-1;r>=0;r--)delete this.memory()[arguments[r]];return this},memory:function(){return this._memory=this._memory||{}}});class Hs{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof Hs||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"}static random(e="vibrant",t){const{random:s,round:a,sin:i,PI:o}=Math;if(e==="vibrant"){const l=24*s()+57,c=38*s()+45,u=360*s();return new Hs(l,c,u,"lch")}if(e==="sine"){const l=a(80*i(2*o*(t=t??s())/.5+.01)+150),c=a(50*i(2*o*t/.5+4.6)+200),u=a(100*i(2*o*t/.5+2.3)+150);return new Hs(l,c,u)}if(e==="pastel"){const l=8*s()+86,c=17*s()+9,u=360*s();return new Hs(l,c,u,"lch")}if(e==="dark"){const l=10+10*s(),c=50*s()+86,u=360*s();return new Hs(l,c,u,"lch")}if(e==="rgb"){const l=255*s(),c=255*s(),u=255*s();return new Hs(l,c,u)}if(e==="lab"){const l=100*s(),c=256*s()-128,u=256*s()-128;return new Hs(l,c,u,"lab")}if(e==="grey"){const l=255*s();return new Hs(l,l,l)}throw new Error("Unsupported random color mode")}static test(e){return typeof e=="string"&&(JI.test(e)||e4.test(e))}cmyk(){const{_a:e,_b:t,_c:s}=this.rgb(),[a,i,o]=[e,t,s].map(c=>c/255),l=Math.min(1-a,1-i,1-o);return l===1?new Hs(0,0,0,1,"cmyk"):new Hs((1-a-l)/(1-l),(1-i-l)/(1-l),(1-o-l)/(1-l),l,"cmyk")}hsl(){const{_a:e,_b:t,_c:s}=this.rgb(),[a,i,o]=[e,t,s].map(g=>g/255),l=Math.max(a,i,o),c=Math.min(a,i,o),u=(l+c)/2,h=l===c,f=l-c;return new Hs(360*(h?0:l===a?((i-o)/f+(i<o?6:0))/6:l===i?((o-a)/f+2)/6:l===o?((a-i)/f+4)/6:0),100*(h?0:u>.5?f/(2-l-c):f/(l+c)),100*u,"hsl")}init(e=0,t=0,s=0,a=0,i="rgb"){if(e=e||0,this.space)for(const f in this.space)delete this[this.space[f]];if(typeof e=="number")i=typeof a=="string"?a:i,a=typeof a=="string"?0:a,Object.assign(this,{_a:e,_b:t,_c:s,_d:a,space:i});else if(e instanceof Array)this.space=t||(typeof e[3]=="string"?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object){const f=function(g,x){const y=bu(g,"rgb")?{_a:g.r,_b:g.g,_c:g.b,_d:0,space:"rgb"}:bu(g,"xyz")?{_a:g.x,_b:g.y,_c:g.z,_d:0,space:"xyz"}:bu(g,"hsl")?{_a:g.h,_b:g.s,_c:g.l,_d:0,space:"hsl"}:bu(g,"lab")?{_a:g.l,_b:g.a,_c:g.b,_d:0,space:"lab"}:bu(g,"lch")?{_a:g.l,_b:g.c,_c:g.h,_d:0,space:"lch"}:bu(g,"cmyk")?{_a:g.c,_b:g.m,_c:g.y,_d:g.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return y.space=x||y.space,y}(e,t);Object.assign(this,f)}else if(typeof e=="string")if(e4.test(e)){const f=e.replace(jce,""),[g,x,y]=vce.exec(f).slice(1,4).map(b=>parseInt(b));Object.assign(this,{_a:g,_b:x,_c:y,_d:0,space:"rgb"})}else{if(!JI.test(e))throw Error("Unsupported string format, can't construct Color");{const f=b=>parseInt(b,16),[,g,x,y]=yce.exec(function(b){return b.length===4?["#",b.substring(1,2),b.substring(1,2),b.substring(2,3),b.substring(2,3),b.substring(3,4),b.substring(3,4)].join(""):b}(e)).map(f);Object.assign(this,{_a:g,_b:x,_c:y,_d:0,space:"rgb"})}}const{_a:o,_b:l,_c:c,_d:u}=this,h=this.space==="rgb"?{r:o,g:l,b:c}:this.space==="xyz"?{x:o,y:l,z:c}:this.space==="hsl"?{h:o,s:l,l:c}:this.space==="lab"?{l:o,a:l,b:c}:this.space==="lch"?{l:o,c:l,h:c}:this.space==="cmyk"?{c:o,m:l,y:c,k:u}:{};Object.assign(this,h)}lab(){const{x:e,y:t,z:s}=this.xyz();return new Hs(116*t-16,500*(e-t),200*(t-s),"lab")}lch(){const{l:e,a:t,b:s}=this.lab(),a=Math.sqrt(t**2+s**2);let i=180*Math.atan2(s,t)/Math.PI;return i<0&&(i*=-1,i=360-i),new Hs(e,a,i,"lch")}rgb(){if(this.space==="rgb")return this;if((e=this.space)==="lab"||e==="xyz"||e==="lch"){let{x:t,y:s,z:a}=this;if(this.space==="lab"||this.space==="lch"){let{l:x,a:y,b}=this;if(this.space==="lch"){const{c:I,h:P}=this,T=Math.PI/180;y=I*Math.cos(T*P),b=I*Math.sin(T*P)}const v=(x+16)/116,N=y/500+v,k=v-b/200,A=16/116,R=.008856,_=7.787;t=.95047*(N**3>R?N**3:(N-A)/_),s=1*(v**3>R?v**3:(v-A)/_),a=1.08883*(k**3>R?k**3:(k-A)/_)}const i=3.2406*t+-1.5372*s+-.4986*a,o=-.9689*t+1.8758*s+.0415*a,l=.0557*t+-.204*s+1.057*a,c=Math.pow,u=.0031308,h=i>u?1.055*c(i,1/2.4)-.055:12.92*i,f=o>u?1.055*c(o,1/2.4)-.055:12.92*o,g=l>u?1.055*c(l,1/2.4)-.055:12.92*l;return new Hs(255*h,255*f,255*g)}if(this.space==="hsl"){let{h:t,s,l:a}=this;if(t/=360,s/=100,a/=100,s===0)return a*=255,new Hs(a,a,a);const i=a<.5?a*(1+s):a+s-a*s,o=2*a-i,l=255*b1(o,i,t+1/3),c=255*b1(o,i,t),u=255*b1(o,i,t-1/3);return new Hs(l,c,u)}if(this.space==="cmyk"){const{c:t,m:s,y:a,k:i}=this,o=255*(1-Math.min(1,t*(1-i)+i)),l=255*(1-Math.min(1,s*(1-i)+i)),c=255*(1-Math.min(1,a*(1-i)+i));return new Hs(o,l,c)}return this;var e}toArray(){const{_a:e,_b:t,_c:s,_d:a,space:i}=this;return[e,t,s,a,i]}toHex(){const[e,t,s]=this._clamped().map(Sce);return`#${e}${t}${s}`}toRgb(){const[e,t,s]=this._clamped();return`rgb(${e},${t},${s})`}toString(){return this.toHex()}xyz(){const{_a:e,_b:t,_c:s}=this.rgb(),[a,i,o]=[e,t,s].map(v=>v/255),l=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,c=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,u=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,h=(.4124*l+.3576*c+.1805*u)/.95047,f=(.2126*l+.7152*c+.0722*u)/1,g=(.0193*l+.1192*c+.9505*u)/1.08883,x=h>.008856?Math.pow(h,1/3):7.787*h+16/116,y=f>.008856?Math.pow(f,1/3):7.787*f+16/116,b=g>.008856?Math.pow(g,1/3):7.787*g+16/116;return new Hs(x,y,b,"xyz")}_clamped(){const{_a:e,_b:t,_c:s}=this.rgb(),{max:a,min:i,round:o}=Math;return[e,t,s].map(l=>a(0,i(o(l),255)))}}class Cs{constructor(...e){this.init(...e)}clone(){return new Cs(this)}init(e,t){const i=Array.isArray(e)?{x:e[0],y:e[1]}:typeof e=="object"?{x:e.x,y:e.y}:{x:e,y:t};return this.x=i.x==null?0:i.x,this.y=i.y==null?0:i.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){jt.isMatrixLike(e)||(e=new jt(e));const{x:t,y:s}=this;return this.x=e.a*t+e.c*s+e.e,this.y=e.b*t+e.d*s+e.f,this}}function yu(r,e,t){return Math.abs(e-r)<1e-6}class jt{constructor(...e){this.init(...e)}static formatTransforms(e){const t=e.flip==="both"||e.flip===!0,s=e.flip&&(t||e.flip==="x")?-1:1,a=e.flip&&(t||e.flip==="y")?-1:1,i=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,o=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,l=e.scale&&e.scale.length?e.scale[0]*s:isFinite(e.scale)?e.scale*s:isFinite(e.scaleX)?e.scaleX*s:s,c=e.scale&&e.scale.length?e.scale[1]*a:isFinite(e.scale)?e.scale*a:isFinite(e.scaleY)?e.scaleY*a:a,u=e.shear||0,h=e.rotate||e.theta||0,f=new Cs(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),g=f.x,x=f.y,y=new Cs(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),b=y.x,v=y.y,N=new Cs(e.translate||e.tx||e.translateX,e.ty||e.translateY),k=N.x,A=N.y,R=new Cs(e.relative||e.rx||e.relativeX,e.ry||e.relativeY);return{scaleX:l,scaleY:c,skewX:i,skewY:o,shear:u,theta:h,rx:R.x,ry:R.y,tx:k,ty:A,ox:g,oy:x,px:b,py:v}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return e.a!=null||e.b!=null||e.c!=null||e.d!=null||e.e!=null||e.f!=null}static matrixMultiply(e,t,s){const a=e.a*t.a+e.c*t.b,i=e.b*t.a+e.d*t.b,o=e.a*t.c+e.c*t.d,l=e.b*t.c+e.d*t.d,c=e.e+e.a*t.e+e.c*t.f,u=e.f+e.b*t.e+e.d*t.f;return s.a=a,s.b=i,s.c=o,s.d=l,s.e=c,s.f=u,s}around(e,t,s){return this.clone().aroundO(e,t,s)}aroundO(e,t,s){const a=e||0,i=t||0;return this.translateO(-a,-i).lmultiplyO(s).translateO(a,i)}clone(){return new jt(this)}decompose(e=0,t=0){const s=this.a,a=this.b,i=this.c,o=this.d,l=this.e,c=this.f,u=s*o-a*i,h=u>0?1:-1,f=h*Math.sqrt(s*s+a*a),g=Math.atan2(h*a,h*s),x=180/Math.PI*g,y=Math.cos(g),b=Math.sin(g),v=(s*i+a*o)/u,N=i*f/(v*s-a)||o*f/(v*a+s);return{scaleX:f,scaleY:N,shear:v,rotate:x,translateX:l-e+e*y*f+t*(v*y*f-b*N),translateY:c-t+e*b*f+t*(v*b*f+y*N),originX:e,originY:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;const t=new jt(e);return yu(this.a,t.a)&&yu(this.b,t.b)&&yu(this.c,t.c)&&yu(this.d,t.d)&&yu(this.e,t.e)&&yu(this.f,t.f)}flip(e,t){return this.clone().flipO(e,t)}flipO(e,t){return e==="x"?this.scaleO(-1,1,t,0):e==="y"?this.scaleO(1,-1,0,t):this.scaleO(-1,-1,e,t||e)}init(e){const t=jt.fromArray([1,0,0,1,0,0]);return e=e instanceof xa?e.matrixify():typeof e=="string"?jt.fromArray(e.split(Uo).map(parseFloat)):Array.isArray(e)?jt.fromArray(e):typeof e=="object"&&jt.isMatrixLike(e)?e:typeof e=="object"?new jt().transform(e):arguments.length===6?jt.fromArray([].slice.call(arguments)):t,this.a=e.a!=null?e.a:t.a,this.b=e.b!=null?e.b:t.b,this.c=e.c!=null?e.c:t.c,this.d=e.d!=null?e.d:t.d,this.e=e.e!=null?e.e:t.e,this.f=e.f!=null?e.f:t.f,this}inverse(){return this.clone().inverseO()}inverseO(){const e=this.a,t=this.b,s=this.c,a=this.d,i=this.e,o=this.f,l=e*a-t*s;if(!l)throw new Error("Cannot invert "+this);const c=a/l,u=-t/l,h=-s/l,f=e/l,g=-(c*i+h*o),x=-(u*i+f*o);return this.a=c,this.b=u,this.c=h,this.d=f,this.e=g,this.f=x,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){const t=e instanceof jt?e:new jt(e);return jt.matrixMultiply(t,this,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){const t=e instanceof jt?e:new jt(e);return jt.matrixMultiply(this,t,this)}rotate(e,t,s){return this.clone().rotateO(e,t,s)}rotateO(e,t=0,s=0){e=g1(e);const a=Math.cos(e),i=Math.sin(e),{a:o,b:l,c,d:u,e:h,f}=this;return this.a=o*a-l*i,this.b=l*a+o*i,this.c=c*a-u*i,this.d=u*a+c*i,this.e=h*a-f*i+s*i-t*a+t,this.f=f*a+h*i-t*i-s*a+s,this}scale(){return this.clone().scaleO(...arguments)}scaleO(e,t=e,s=0,a=0){arguments.length===3&&(a=s,s=t,t=e);const{a:i,b:o,c:l,d:c,e:u,f:h}=this;return this.a=i*e,this.b=o*t,this.c=l*e,this.d=c*t,this.e=u*e-s*e+s,this.f=h*t-a*t+a,this}shear(e,t,s){return this.clone().shearO(e,t,s)}shearO(e,t=0,s=0){const{a,b:i,c:o,d:l,e:c,f:u}=this;return this.a=a+i*e,this.c=o+l*e,this.e=c+u*e-s*e,this}skew(){return this.clone().skewO(...arguments)}skewO(e,t=e,s=0,a=0){arguments.length===3&&(a=s,s=t,t=e),e=g1(e),t=g1(t);const i=Math.tan(e),o=Math.tan(t),{a:l,b:c,c:u,d:h,e:f,f:g}=this;return this.a=l+c*i,this.b=c+l*o,this.c=u+h*i,this.d=h+u*o,this.e=f+g*i-a*i,this.f=g+f*o-s*o,this}skewX(e,t,s){return this.skew(e,0,t,s)}skewY(e,t,s){return this.skew(0,e,t,s)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(jt.isMatrixLike(e))return new jt(e).multiplyO(this);const t=jt.formatTransforms(e),{x:s,y:a}=new Cs(t.ox,t.oy).transform(this),i=new jt().translateO(t.rx,t.ry).lmultiplyO(this).translateO(-s,-a).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(s,a);if(isFinite(t.px)||isFinite(t.py)){const o=new Cs(s,a).transform(i),l=isFinite(t.px)?t.px-o.x:0,c=isFinite(t.py)?t.py-o.y:0;i.translateO(l,c)}return i.translateO(t.tx,t.ty),i}translate(e,t){return this.clone().translateO(e,t)}translateO(e,t){return this.e+=e||0,this.f+=t||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function xl(){if(!xl.nodes){const r=La().size(2,0);r.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),r.attr("focusable","false"),r.attr("aria-hidden","true");const e=r.path().node;xl.nodes={svg:r,path:e}}if(!xl.nodes.svg.node.parentNode){const r=ps.document.body||ps.document.documentElement;xl.nodes.svg.addTo(r)}return xl.nodes}function PL(r){return!(r.width||r.height||r.x||r.y)}ys(jt,"Matrix");class vr{constructor(...e){this.init(...e)}addOffset(){return this.x+=ps.window.pageXOffset,this.y+=ps.window.pageYOffset,new vr(this)}init(e){return e=typeof e=="string"?e.split(Uo).map(parseFloat):Array.isArray(e)?e:typeof e=="object"?[e.left!=null?e.left:e.x,e.top!=null?e.top:e.y,e.width,e.height]:arguments.length===4?[].slice.call(arguments):[0,0,0,0],this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return PL(this)}merge(e){const t=Math.min(this.x,e.x),s=Math.min(this.y,e.y),a=Math.max(this.x+this.width,e.x+e.width)-t,i=Math.max(this.y+this.height,e.y+e.height)-s;return new vr(t,s,a,i)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof jt||(e=new jt(e));let t=1/0,s=-1/0,a=1/0,i=-1/0;return[new Cs(this.x,this.y),new Cs(this.x2,this.y),new Cs(this.x,this.y2),new Cs(this.x2,this.y2)].forEach(function(o){o=o.transform(e),t=Math.min(t,o.x),s=Math.max(s,o.x),a=Math.min(a,o.y),i=Math.max(i,o.y)}),new vr(t,a,s-t,i-a)}}function r4(r,e,t){let s;try{if(s=e(r.node),PL(s)&&(a=r.node)!==ps.document&&!(ps.document.documentElement.contains||function(i){for(;i.parentNode;)i=i.parentNode;return i===ps.document}).call(ps.document.documentElement,a))throw new Error("Element not in the dom")}catch{s=t(r)}var a;return s}Yt({viewbox:{viewbox(r,e,t,s){return r==null?new vr(this.attr("viewBox")):this.attr("viewBox",new vr(r,e,t,s))},zoom(r,e){let{width:t,height:s}=this.attr(["width","height"]);if((t||s)&&typeof t!="string"&&typeof s!="string"||(t=this.node.clientWidth,s=this.node.clientHeight),!t||!s)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const a=this.viewbox(),i=t/a.width,o=s/a.height,l=Math.min(i,o);if(r==null)return l;let c=l/r;c===1/0&&(c=Number.MAX_SAFE_INTEGER/100),e=e||new Cs(t/2/i+a.x,s/2/o+a.y);const u=new vr(a).transform(new jt({scale:c,origin:e}));return this.viewbox(u)}}}),ys(vr,"Box");class yd extends Array{constructor(e=[],...t){if(super(e,...t),typeof e=="number")return this;this.length=0,this.push(...e)}}Tt([yd],{each(r,...e){return typeof r=="function"?this.map((t,s,a)=>r.call(t,t,s,a)):this.map(t=>t[r](...e))},toArray(){return Array.prototype.concat.apply([],this)}});const _ce=["toArray","constructor","each"];function Ed(r,e){return new yd(eS((e||ps.document).querySelectorAll(r),function(t){return Ln(t)}))}yd.extend=function(r){r=r.reduce((e,t)=>(_ce.includes(t)||t[0]==="_"||(t in Array.prototype&&(e["$"+t]=Array.prototype[t]),e[t]=function(...s){return this.each(t,...s)}),e),{}),Tt([yd],r)};let Ace=0;const RL={};function IL(r){let e=r.getEventHolder();return e===ps.window&&(e=RL),e.events||(e.events={}),e.events}function nS(r){return r.getEventTarget()}function _o(r,e,t,s,a){const i=t.bind(s||r),o=La(r),l=IL(o),c=nS(o);e=Array.isArray(e)?e:e.split(Uo),t._svgjsListenerId||(t._svgjsListenerId=++Ace),e.forEach(function(u){const h=u.split(".")[0],f=u.split(".")[1]||"*";l[h]=l[h]||{},l[h][f]=l[h][f]||{},l[h][f][t._svgjsListenerId]=i,c.addEventListener(h,i,a||!1)})}function Fn(r,e,t,s){const a=La(r),i=IL(a),o=nS(a);(typeof t!="function"||(t=t._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(Uo)).forEach(function(l){const c=l&&l.split(".")[0],u=l&&l.split(".")[1];let h,f;if(t)i[c]&&i[c][u||"*"]&&(o.removeEventListener(c,i[c][u||"*"][t],s||!1),delete i[c][u||"*"][t]);else if(c&&u){if(i[c]&&i[c][u]){for(f in i[c][u])Fn(o,[c,u].join("."),f);delete i[c][u]}}else if(u)for(l in i)for(h in i[l])u===h&&Fn(o,[l,u].join("."));else if(c){if(i[c]){for(h in i[c])Fn(o,[c,h].join("."));delete i[c]}}else{for(l in i)Fn(o,l);(function(g){let x=g.getEventHolder();x===ps.window&&(x=RL),x.events&&(x.events={})})(a)}})}class Vg extends sS{addEventListener(){}dispatch(e,t,s){return function(a,i,o,l){const c=nS(a);return i instanceof ps.window.Event||(i=new ps.window.CustomEvent(i,{detail:o,cancelable:!0,...l})),c.dispatchEvent(i),i}(this,e,t,s)}dispatchEvent(e){const t=this.getEventHolder().events;if(!t)return!0;const s=t[e.type];for(const a in s)for(const i in s[a])s[a][i](e);return!e.defaultPrevented}fire(e,t,s){return this.dispatch(e,t,s),this}getEventHolder(){return this}getEventTarget(){return this}off(e,t,s){return Fn(this,e,t,s),this}on(e,t,s,a){return _o(this,e,t,s,a),this}removeEventListener(){}}function a4(){}ys(Vg,"EventTarget");const y1=400,Cce=">",Ece=0,Tce={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class vd extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return typeof e=="number"||(this.length=0,this.push(...this.parse(e))),this}parse(e=[]){return e instanceof Array?e:e.trim().split(Uo).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const e=[];return e.push(...this),e}}class zt{constructor(...e){this.init(...e)}convert(e){return new zt(this.value,e)}divide(e){return e=new zt(e),new zt(this/e,this.unit||e.unit)}init(e,t){return t=Array.isArray(e)?e[1]:t,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=t||"",typeof e=="number"?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:typeof e=="string"?(t=e.match(TL))&&(this.value=parseFloat(t[1]),t[5]==="%"?this.value/=100:t[5]==="s"&&(this.value*=1e3),this.unit=t[5]):e instanceof zt&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new zt(e),new zt(this-e,this.unit||e.unit)}plus(e){return e=new zt(e),new zt(this+e,this.unit||e.unit)}times(e){return e=new zt(e),new zt(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(1e8*this.value)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const Pce=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),DL=[];class $l extends Vg{constructor(e,t){super(),this.node=e,this.type=e.nodeName,t&&e!==t&&this.attr(t)}add(e,t){return(e=La(e)).removeNamespace&&this.node instanceof ps.window.SVGElement&&e.removeNamespace(),t==null?this.node.appendChild(e.node):e.node!==this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this}addTo(e,t){return La(e).put(this,t)}children(){return new yd(eS(this.node.children,function(e){return Ln(e)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0,t=!0){this.writeDataToDom();let s=this.node.cloneNode(e);return t&&(s=EL(s)),new this.constructor(s)}each(e,t){const s=this.children();let a,i;for(a=0,i=s.length;a<i;a++)e.apply(s[a],[a,s]),t&&s[a].each(e,t);return this}element(e,t){return this.put(new $l(sg(e),t))}first(){return Ln(this.node.firstChild)}get(e){return Ln(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,t){return this.xml(e,t,"http://www.w3.org/1999/xhtml")}id(e){return e!==void 0||this.node.id||(this.node.id=CL(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return Ln(this.node.lastChild)}matches(e){const t=this.node,s=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return s&&s.call(t,e)}parent(e){let t=this;if(!t.node.parentNode)return null;if(t=Ln(t.node.parentNode),!e)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=Ln(t.node.parentNode));return t}put(e,t){return e=La(e),this.add(e,t),e}putIn(e,t){return La(e).add(this,t)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=La(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,t=null){const s=10**e,a=this.attr(t);for(const i in a)typeof a[i]=="number"&&(a[i]=Math.round(a[i]*s)/s);return this.attr(a),this}svg(e,t){return this.xml(e,t,tS)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){const t=this.parent();if(!t)return this.addTo(e);const s=t.index(this);return t.put(e,s).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(e,t,s){if(typeof e=="boolean"&&(s=t,t=e,e=null),e==null||typeof e=="function"){t=t==null||t,this.writeDataToDom();let l=this;if(e!=null){if(l=Ln(l.node.cloneNode(!0)),t){const c=e(l);if(l=c||l,c===!1)return""}l.each(function(){const c=e(this),u=c||this;c===!1?this.remove():c&&this!==u&&this.replace(u)},!0)}return t?l.node.outerHTML:l.node.innerHTML}t=t!=null&&t;const a=sg("wrapper",s),i=ps.document.createDocumentFragment();a.innerHTML=e;for(let l=a.children.length;l--;)i.appendChild(a.firstElementChild);const o=this.parent();return t?this.replace(i)&&o:this.add(i)}}Tt($l,{attr:function(r,e,t){if(r==null){r={},e=this.node.attributes;for(const s of e)r[s.nodeName]=s4.test(s.nodeValue)?parseFloat(s.nodeValue):s.nodeValue;return r}if(r instanceof Array)return r.reduce((s,a)=>(s[a]=this.attr(a),s),{});if(typeof r=="object"&&r.constructor===Object)for(e in r)this.attr(e,r[e]);else if(e===null)this.node.removeAttribute(r);else{if(e==null)return(e=this.node.getAttribute(r))==null?Tce[r]:s4.test(e)?parseFloat(e):e;typeof(e=DL.reduce((s,a)=>a(r,s,this),e))=="number"?e=new zt(e):Pce.has(r)&&Hs.isColor(e)?e=new Hs(e):e.constructor===Array&&(e=new vd(e)),r==="leading"?this.leading&&this.leading(e):typeof t=="string"?this.node.setAttributeNS(t,r,e.toString()):this.node.setAttribute(r,e.toString()),!this.rebuild||r!=="font-size"&&r!=="x"||this.rebuild()}return this},find:function(r){return Ed(r,this.node)},findOne:function(r){return Ln(this.node.querySelector(r))}}),ys($l,"Dom");let xa=class extends $l{constructor(r,e){super(r,e),this.dom={},this.node.instance=this,(r.hasAttribute("data-svgjs")||r.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(r.getAttribute("data-svgjs"))??JSON.parse(r.getAttribute("svgjs:data"))??{})}center(r,e){return this.cx(r).cy(e)}cx(r){return r==null?this.x()+this.width()/2:this.x(r-this.width()/2)}cy(r){return r==null?this.y()+this.height()/2:this.y(r-this.height()/2)}defs(){const r=this.root();return r&&r.defs()}dmove(r,e){return this.dx(r).dy(e)}dx(r=0){return this.x(new zt(r).plus(this.x()))}dy(r=0){return this.y(new zt(r).plus(this.y()))}getEventHolder(){return this}height(r){return this.attr("height",r)}move(r,e){return this.x(r).y(e)}parents(r=this.root()){const e=typeof r=="string";e||(r=La(r));const t=new yd;let s=this;for(;(s=s.parent())&&s.node!==ps.document&&s.nodeName!=="#document-fragment"&&(t.push(s),e||s.node!==r.node)&&(!e||!s.matches(r));)if(s.node===this.root().node)return null;return t}reference(r){if(!(r=this.attr(r)))return null;const e=(r+"").match(wce);return e?La(e[1]):null}root(){const r=this.parent(function(e){return ad[e]}(rS));return r&&r.root()}setData(r){return this.dom=r,this}size(r,e){const t=Eh(this,r,e);return this.width(new zt(t.width)).height(new zt(t.height))}width(r){return this.attr("width",r)}writeDataToDom(){return AL(this,this.dom),super.writeDataToDom()}x(r){return this.attr("x",r)}y(r){return this.attr("y",r)}};Tt(xa,{bbox:function(){const r=r4(this,e=>e.getBBox(),e=>{try{const t=e.clone().addTo(xl().svg).show(),s=t.node.getBBox();return t.remove(),s}catch(t){throw new Error(`Getting bbox of element "${e.node.nodeName}" is not possible: ${t.toString()}`)}});return new vr(r)},rbox:function(r){const e=r4(this,s=>s.getBoundingClientRect(),s=>{throw new Error(`Getting rbox of element "${s.node.nodeName}" is not possible`)}),t=new vr(e);return r?t.transform(r.screenCTM().inverseO()):t.addOffset()},inside:function(r,e){const t=this.bbox();return r>t.x&&e>t.y&&r<t.x+t.width&&e<t.y+t.height},point:function(r,e){return new Cs(r,e).transformO(this.screenCTM().inverseO())},ctm:function(){return new jt(this.node.getCTM())},screenCTM:function(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const r=this.rect(1,1),e=r.node.getScreenCTM();return r.remove(),new jt(e)}return new jt(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new jt}}}),ys(xa,"Element");const Wm={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(r,e){return e==="color"?r:r+"-"+e}};["fill","stroke"].forEach(function(r){const e={};let t;e[r]=function(s){if(s===void 0)return this.attr(r);if(typeof s=="string"||s instanceof Hs||Hs.isRgb(s)||s instanceof xa)this.attr(r,s);else for(t=Wm[r].length-1;t>=0;t--)s[Wm[r][t]]!=null&&this.attr(Wm.prefix(r,Wm[r][t]),s[Wm[r][t]]);return this},Yt(["Element","Runner"],e)}),Yt(["Element","Runner"],{matrix:function(r,e,t,s,a,i){return r==null?new jt(this):this.attr("transform",new jt(r,e,t,s,a,i))},rotate:function(r,e,t){return this.transform({rotate:r,ox:e,oy:t},!0)},skew:function(r,e,t,s){return arguments.length===1||arguments.length===3?this.transform({skew:r,ox:e,oy:t},!0):this.transform({skew:[r,e],ox:t,oy:s},!0)},shear:function(r,e,t){return this.transform({shear:r,ox:e,oy:t},!0)},scale:function(r,e,t,s){return arguments.length===1||arguments.length===3?this.transform({scale:r,ox:e,oy:t},!0):this.transform({scale:[r,e],ox:t,oy:s},!0)},translate:function(r,e){return this.transform({translate:[r,e]},!0)},relative:function(r,e){return this.transform({relative:[r,e]},!0)},flip:function(r="both",e="center"){return"xybothtrue".indexOf(r)===-1&&(e=r,r="both"),this.transform({flip:r,origin:e},!0)},opacity:function(r){return this.attr("opacity",r)}}),Yt("radius",{radius:function(r,e=r){return(this._element||this).type==="radialGradient"?this.attr("r",new zt(r)):this.rx(r).ry(e)}}),Yt("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(r){return new Cs(this.node.getPointAtLength(r))}}),Yt(["Element","Runner"],{font:function(r,e){if(typeof r=="object"){for(e in r)this.font(e,r[e]);return this}return r==="leading"?this.leading(e):r==="anchor"?this.attr("text-anchor",e):r==="size"||r==="family"||r==="weight"||r==="stretch"||r==="variant"||r==="style"?this.attr("font-"+r,e):this.attr(r,e)}});Yt("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(r,e){return r[e]=function(t){return t===null?this.off(e):this.on(e,t),this},r},{})),Yt("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(Nce).slice(0,-1).map(function(e){const t=e.trim().split("(");return[t[0],t[1].split(Uo).map(function(s){return parseFloat(s)})]}).reverse().reduce(function(e,t){return t[0]==="matrix"?e.lmultiply(jt.fromArray(t[1])):e[t[0]].apply(e,t[1])},new jt)},toParent:function(r,e){if(this===r)return this;if(rj(this.node))return this.addTo(r,e);const t=this.screenCTM(),s=r.screenCTM().inverse();return this.addTo(r,e).untransform().transform(s.multiply(t)),this},toRoot:function(r){return this.toParent(this.root(),r)},transform:function(r,e){if(r==null||typeof r=="string"){const s=new jt(this).decompose();return r==null?s:s[r]}jt.isMatrixLike(r)||(r={...r,origin:sj(r,this)});const t=new jt(e===!0?this:e||!1).transform(r);return this.attr("transform",t)}});class Va extends xa{flatten(){return this.each(function(){if(this instanceof Va)return this.flatten().ungroup()}),this}ungroup(e=this.parent(),t=e.index(this)){return t=t===-1?e.children().length:t,this.each(function(s,a){return a[a.length-s-1].toParent(e,t)}),this.remove()}}ys(Va,"Container");class dy extends Va{constructor(e,t=e){super(Zs("defs",e),t)}flatten(){return this}ungroup(){return this}}ys(dy,"Defs");class vn extends xa{}function iS(r){return this.attr("rx",r)}function oS(r){return this.attr("ry",r)}function ML(r){return r==null?this.cx()-this.rx():this.cx(r+this.rx())}function OL(r){return r==null?this.cy()-this.ry():this.cy(r+this.ry())}function LL(r){return this.attr("cx",r)}function FL(r){return this.attr("cy",r)}function UL(r){return r==null?2*this.rx():this.rx(new zt(r).divide(2))}function zL(r){return r==null?2*this.ry():this.ry(new zt(r).divide(2))}ys(vn,"Shape");var Rce=Object.freeze({__proto__:null,cx:LL,cy:FL,height:zL,rx:iS,ry:oS,width:UL,x:ML,y:OL});class g0 extends vn{constructor(e,t=e){super(Zs("ellipse",e),t)}size(e,t){const s=Eh(this,e,t);return this.rx(new zt(s.width).divide(2)).ry(new zt(s.height).divide(2))}}Tt(g0,Rce),Yt("Container",{ellipse:Qs(function(r=0,e=r){return this.put(new g0).size(r,e).move(0,0)})}),ys(g0,"Ellipse");class VL extends $l{constructor(e=ps.document.createDocumentFragment()){super(e)}xml(e,t,s){if(typeof e=="boolean"&&(s=t,t=e,e=null),e==null||typeof e=="function"){const a=new $l(sg("wrapper",s));return a.add(this.node.cloneNode(!0)),a.xml(!1,s)}return super.xml(e,!1,s)}}function BL(r,e){return(this._element||this).type==="radialGradient"?this.attr({fx:new zt(r),fy:new zt(e)}):this.attr({x1:new zt(r),y1:new zt(e)})}function HL(r,e){return(this._element||this).type==="radialGradient"?this.attr({cx:new zt(r),cy:new zt(e)}):this.attr({x2:new zt(r),y2:new zt(e)})}ys(VL,"Fragment");var Ice=Object.freeze({__proto__:null,from:BL,to:HL});class _f extends Va{constructor(e,t){super(Zs(e+"Gradient",typeof e=="string"?null:e),t)}attr(e,t,s){return e==="transform"&&(e="gradientTransform"),super.attr(e,t,s)}bbox(){return new vr}targets(){return Ed("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}Tt(_f,Ice),Yt({Container:{gradient(...r){return this.defs().gradient(...r)}},Defs:{gradient:Qs(function(r,e){return this.put(new _f(r)).update(e)})}}),ys(_f,"Gradient");class rg extends Va{constructor(e,t=e){super(Zs("pattern",e),t)}attr(e,t,s){return e==="transform"&&(e="patternTransform"),super.attr(e,t,s)}bbox(){return new vr}targets(){return Ed("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}Yt({Container:{pattern(...r){return this.defs().pattern(...r)}},Defs:{pattern:Qs(function(r,e,t){return this.put(new rg).update(t).attr({x:0,y:0,width:r,height:e,patternUnits:"userSpaceOnUse"})})}}),ys(rg,"Pattern");let p0=class extends vn{constructor(r,e=r){super(Zs("image",r),e)}load(r,e){if(!r)return this;const t=new ps.window.Image;return _o(t,"load",function(s){const a=this.parent(rg);this.width()===0&&this.height()===0&&this.size(t.width,t.height),a instanceof rg&&a.width()===0&&a.height()===0&&a.size(this.width(),this.height()),typeof e=="function"&&e.call(this,s)},this),_o(t,"load error",function(){Fn(t)}),this.attr("href",t.src=r,Th)}};var n4;n4=function(r,e,t){return r!=="fill"&&r!=="stroke"||kce.test(e)&&(e=t.root().defs().image(e)),e instanceof p0&&(e=t.root().defs().pattern(0,0,s=>{s.add(e)})),e},DL.push(n4),Yt({Container:{image:Qs(function(r,e){return this.put(new p0).size(0,0).load(r,e)})}}),ys(p0,"Image");class Wl extends vd{bbox(){let e=-1/0,t=-1/0,s=1/0,a=1/0;return this.forEach(function(i){e=Math.max(i[0],e),t=Math.max(i[1],t),s=Math.min(i[0],s),a=Math.min(i[1],a)}),new vr(s,a,e-s,t-a)}move(e,t){const s=this.bbox();if(e-=s.x,t-=s.y,!isNaN(e)&&!isNaN(t))for(let a=this.length-1;a>=0;a--)this[a]=[this[a][0]+e,this[a][1]+t];return this}parse(e=[0,0]){const t=[];(e=e instanceof Array?Array.prototype.concat.apply([],e):e.trim().split(Uo).map(parseFloat)).length%2!=0&&e.pop();for(let s=0,a=e.length;s<a;s+=2)t.push([e[s],e[s+1]]);return t}size(e,t){let s;const a=this.bbox();for(s=this.length-1;s>=0;s--)a.width&&(this[s][0]=(this[s][0]-a.x)*e/a.width+a.x),a.height&&(this[s][1]=(this[s][1]-a.y)*t/a.height+a.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const e=[];for(let t=0,s=this.length;t<s;t++)e.push(this[t].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){jt.isMatrixLike(e)||(e=new jt(e));for(let t=this.length;t--;){const[s,a]=this[t];this[t][0]=e.a*s+e.c*a+e.e,this[t][1]=e.b*s+e.d*a+e.f}return this}}const Dce=Wl;var lS=Object.freeze({__proto__:null,MorphArray:Dce,height:function(r){const e=this.bbox();return r==null?e.height:this.size(e.width,r)},width:function(r){const e=this.bbox();return r==null?e.width:this.size(r,e.height)},x:function(r){return r==null?this.bbox().x:this.move(r,this.bbox().y)},y:function(r){return r==null?this.bbox().y:this.move(this.bbox().x,r)}});let Xc=class extends vn{constructor(r,e=r){super(Zs("line",r),e)}array(){return new Wl([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(r,e){return this.attr(this.array().move(r,e).toLine())}plot(r,e,t,s){return r==null?this.array():(r=e!==void 0?{x1:r,y1:e,x2:t,y2:s}:new Wl(r).toLine(),this.attr(r))}size(r,e){const t=Eh(this,r,e);return this.attr(this.array().size(t.width,t.height).toLine())}};Tt(Xc,lS),Yt({Container:{line:Qs(function(...r){return Xc.prototype.plot.apply(this.put(new Xc),r[0]!=null?r:[0,0,0,0])})}}),ys(Xc,"Line");let x0=class extends Va{constructor(r,e=r){super(Zs("marker",r),e)}height(r){return this.attr("markerHeight",r)}orient(r){return this.attr("orient",r)}ref(r,e){return this.attr("refX",r).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(r){return this.clear(),typeof r=="function"&&r.call(this,this),this}width(r){return this.attr("markerWidth",r)}};function Iu(r,e){return function(t){return t==null?this[r]:(this[r]=t,e&&e.call(this),this)}}Yt({Container:{marker(...r){return this.defs().marker(...r)}},Defs:{marker:Qs(function(r,e,t){return this.put(new x0).size(r,e).ref(r/2,e/2).viewbox(0,0,r,e).attr("orient","auto").update(t)})},marker:{marker(r,e,t,s){let a=["marker"];return r!=="all"&&a.push(r),a=a.join("-"),r=arguments[1]instanceof x0?arguments[1]:this.defs().marker(e,t,s),this.attr(a,r)}}}),ys(x0,"Marker");const Mce={"-":function(r){return r},"<>":function(r){return-Math.cos(r*Math.PI)/2+.5},">":function(r){return Math.sin(r*Math.PI/2)},"<":function(r){return 1-Math.cos(r*Math.PI/2)},bezier:function(r,e,t,s){return function(a){return a<0?r>0?e/r*a:t>0?s/t*a:0:a>1?t<1?(1-s)/(1-t)*a+(s-t)/(1-t):r<1?(1-e)/(1-r)*a+(e-r)/(1-r):1:3*a*(1-a)**2*e+3*a**2*(1-a)*s+a**3}},steps:function(r,e="end"){e=e.split("-").reverse()[0];let t=r;return e==="none"?--t:e==="both"&&++t,(s,a=!1)=>{let i=Math.floor(s*r);const o=s*i%1==0;return e!=="start"&&e!=="both"||++i,a&&o&&--i,s>=0&&i<0&&(i=0),s<=1&&i>t&&(i=t),i/t}}};class cS{done(){return!1}}class aj extends cS{constructor(e=Cce){super(),this.ease=Mce[e]||e}step(e,t,s){return typeof e!="number"?s<1?e:t:e+(t-e)*this.ease(s)}}class db extends cS{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,t,s,a){return this.stepper(e,t,s,a)}}function i4(){const r=(this._duration||500)/1e3,e=this._overshoot||0,t=Math.PI,s=Math.log(e/100+1e-10),a=-s/Math.sqrt(t*t+s*s),i=3.9/(a*r);this.d=2*a*i,this.k=i*i}Tt(class extends db{constructor(r=500,e=0){super(),this.duration(r).overshoot(e)}step(r,e,t,s){if(typeof r=="string")return r;if(s.done=t===1/0,t===1/0)return e;if(t===0)return r;t>100&&(t=16),t/=1e3;const a=s.velocity||0,i=-this.d*a-this.k*(r-e),o=r+a*t+i*t*t/2;return s.velocity=a+i*t,s.done=Math.abs(e-o)+Math.abs(a)<.002,s.done?e:o}},{duration:Iu("_duration",i4),overshoot:Iu("_overshoot",i4)});Tt(class extends db{constructor(r=.1,e=.01,t=0,s=1e3){super(),this.p(r).i(e).d(t).windup(s)}step(r,e,t,s){if(typeof r=="string")return r;if(s.done=t===1/0,t===1/0)return e;if(t===0)return r;const a=e-r;let i=(s.integral||0)+a*t;const o=(a-(s.error||0))/t,l=this._windup;return l!==!1&&(i=Math.max(-l,Math.min(i,l))),s.error=a,s.integral=i,s.done=Math.abs(a)<.001,s.done?e:r+(this.P*a+this.I*i+this.D*o)}},{windup:Iu("_windup"),p:Iu("P"),i:Iu("I"),d:Iu("D")});const Oce={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},nj={M:function(r,e,t){return e.x=t.x=r[0],e.y=t.y=r[1],["M",e.x,e.y]},L:function(r,e){return e.x=r[0],e.y=r[1],["L",r[0],r[1]]},H:function(r,e){return e.x=r[0],["H",r[0]]},V:function(r,e){return e.y=r[0],["V",r[0]]},C:function(r,e){return e.x=r[4],e.y=r[5],["C",r[0],r[1],r[2],r[3],r[4],r[5]]},S:function(r,e){return e.x=r[2],e.y=r[3],["S",r[0],r[1],r[2],r[3]]},Q:function(r,e){return e.x=r[2],e.y=r[3],["Q",r[0],r[1],r[2],r[3]]},T:function(r,e){return e.x=r[0],e.y=r[1],["T",r[0],r[1]]},Z:function(r,e,t){return e.x=t.x,e.y=t.y,["Z"]},A:function(r,e){return e.x=r[5],e.y=r[6],["A",r[0],r[1],r[2],r[3],r[4],r[5],r[6]]}},v1="mlhvqtcsaz".split("");for(let r=0,e=v1.length;r<e;++r)nj[v1[r]]=function(t){return function(s,a,i){if(t==="H")s[0]=s[0]+a.x;else if(t==="V")s[0]=s[0]+a.y;else if(t==="A")s[5]=s[5]+a.x,s[6]=s[6]+a.y;else for(let o=0,l=s.length;o<l;++o)s[o]=s[o]+(o%2?a.y:a.x);return nj[t](s,a,i)}}(v1[r].toUpperCase());function ij(r){return r.segment.length&&r.segment.length-1===Oce[r.segment[0].toUpperCase()]}function Lce(r,e){r.inNumber&&Lc(r,!1);const t=aS.test(e);if(t)r.segment=[e];else{const s=r.lastCommand,a=s.toLowerCase(),i=s===a;r.segment=[a==="m"?i?"l":"L":s]}return r.inSegment=!0,r.lastCommand=r.segment[0],t}function Lc(r,e){if(!r.inNumber)throw new Error("Parser Error");r.number&&r.segment.push(parseFloat(r.number)),r.inNumber=e,r.number="",r.pointSeen=!1,r.hasExponent=!1,ij(r)&&oj(r)}function oj(r){r.inSegment=!1,r.absolute&&(r.segment=function(e){const t=e.segment[0];return nj[t](e.segment.slice(1),e.p,e.p0)}(r)),r.segments.push(r.segment)}function Fce(r){if(!r.segment.length)return!1;const e=r.segment[0].toUpperCase()==="A",t=r.segment.length;return e&&(t===4||t===5)}function Uce(r){return r.lastToken.toUpperCase()==="E"}const zce=new Set([" ",",","	",`
`,"\r","\f"]);class Jn extends vd{bbox(){return xl().path.setAttribute("d",this.toString()),new vr(xl.nodes.path.getBBox())}move(e,t){const s=this.bbox();if(e-=s.x,t-=s.y,!isNaN(e)&&!isNaN(t))for(let a,i=this.length-1;i>=0;i--)a=this[i][0],a==="M"||a==="L"||a==="T"?(this[i][1]+=e,this[i][2]+=t):a==="H"?this[i][1]+=e:a==="V"?this[i][1]+=t:a==="C"||a==="S"||a==="Q"?(this[i][1]+=e,this[i][2]+=t,this[i][3]+=e,this[i][4]+=t,a==="C"&&(this[i][5]+=e,this[i][6]+=t)):a==="A"&&(this[i][6]+=e,this[i][7]+=t);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),function(t,s=!0){let a=0,i="";const o={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:s,p0:new Cs,p:new Cs};for(;o.lastToken=i,i=t.charAt(a++);)if(o.inSegment||!Lce(o,i))if(i!==".")if(isNaN(parseInt(i)))if(zce.has(i))o.inNumber&&Lc(o,!1);else if(i!=="-"&&i!=="+")if(i.toUpperCase()!=="E"){if(aS.test(i)){if(o.inNumber)Lc(o,!1);else{if(!ij(o))throw new Error("parser Error");oj(o)}--a}}else o.number+=i,o.hasExponent=!0;else{if(o.inNumber&&!Uce(o)){Lc(o,!1),--a;continue}o.number+=i,o.inNumber=!0}else{if(o.number==="0"||Fce(o)){o.inNumber=!0,o.number=i,Lc(o,!0);continue}o.inNumber=!0,o.number+=i}else{if(o.pointSeen||o.hasExponent){Lc(o,!1),--a;continue}o.inNumber=!0,o.pointSeen=!0,o.number+=i}return o.inNumber&&Lc(o,!1),o.inSegment&&ij(o)&&oj(o),o.segments}(e)}size(e,t){const s=this.bbox();let a,i;for(s.width=s.width===0?1:s.width,s.height=s.height===0?1:s.height,a=this.length-1;a>=0;a--)i=this[a][0],i==="M"||i==="L"||i==="T"?(this[a][1]=(this[a][1]-s.x)*e/s.width+s.x,this[a][2]=(this[a][2]-s.y)*t/s.height+s.y):i==="H"?this[a][1]=(this[a][1]-s.x)*e/s.width+s.x:i==="V"?this[a][1]=(this[a][1]-s.y)*t/s.height+s.y:i==="C"||i==="S"||i==="Q"?(this[a][1]=(this[a][1]-s.x)*e/s.width+s.x,this[a][2]=(this[a][2]-s.y)*t/s.height+s.y,this[a][3]=(this[a][3]-s.x)*e/s.width+s.x,this[a][4]=(this[a][4]-s.y)*t/s.height+s.y,i==="C"&&(this[a][5]=(this[a][5]-s.x)*e/s.width+s.x,this[a][6]=(this[a][6]-s.y)*t/s.height+s.y)):i==="A"&&(this[a][1]=this[a][1]*e/s.width,this[a][2]=this[a][2]*t/s.height,this[a][6]=(this[a][6]-s.x)*e/s.width+s.x,this[a][7]=(this[a][7]-s.y)*t/s.height+s.y);return this}toString(){return function(e){let t="";for(let s=0,a=e.length;s<a;s++)t+=e[s][0],e[s][1]!=null&&(t+=e[s][1],e[s][2]!=null&&(t+=" ",t+=e[s][2],e[s][3]!=null&&(t+=" ",t+=e[s][3],t+=" ",t+=e[s][4],e[s][5]!=null&&(t+=" ",t+=e[s][5],t+=" ",t+=e[s][6],e[s][7]!=null&&(t+=" ",t+=e[s][7])))));return t+" "}(this)}}const $L=r=>{const e=typeof r;return e==="number"?zt:e==="string"?Hs.isColor(r)?Hs:Uo.test(r)?aS.test(r)?Jn:vd:TL.test(r)?zt:lj:cj.indexOf(r.constructor)>-1?r.constructor:Array.isArray(r)?vd:e==="object"?ag:lj};class Fc{constructor(e){this._stepper=e||new aj("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(e,t){return e&&t},!0)}from(e){return e==null?this._from:(this._from=this._set(e),this)}stepper(e){return e==null?this._stepper:(this._stepper=e,this)}to(e){return e==null?this._to:(this._to=this._set(e),this)}type(e){return e==null?this._type:(this._type=e,this)}_set(e){this._type||this.type($L(e));let t=new this._type(e);return this._type===Hs&&(t=this._to?t[this._to[4]]():this._from?t[this._from[4]]():t),this._type===ag&&(t=this._to?t.align(this._to):this._from?t.align(this._from):t),t=t.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(t.length)).map(Object).map(function(s){return s.done=!0,s}),t}}class lj{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}class Bg{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,Bg.defaults,e),this}toArray(){const e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}Bg.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const Vce=(r,e)=>r[0]<e[0]?-1:r[0]>e[0]?1:0;class ag{constructor(...e){this.init(...e)}align(e){const t=this.values;for(let s=0,a=t.length;s<a;++s){if(t[s+1]===e[s+1]){if(t[s+1]===Hs&&e[s+7]!==t[s+7]){const l=e[s+7],c=new Hs(this.values.splice(s+3,5))[l]().toArray();this.values.splice(s+3,0,...c)}s+=t[s+2]+2;continue}if(!e[s+1])return this;const i=new e[s+1]().toArray(),o=t[s+2]+3;t.splice(s,o,e[s],e[s+1],e[s+2],...i),s+=t[s+2]+2}return this}init(e){if(this.values=[],Array.isArray(e))return void(this.values=e.slice());e=e||{};const t=[];for(const s in e){const a=$L(e[s]),i=new a(e[s]).toArray();t.push([s,a,i.length,...i])}return t.sort(Vce),this.values=t.reduce((s,a)=>s.concat(a),[]),this}toArray(){return this.values}valueOf(){const e={},t=this.values;for(;t.length;){const s=t.shift(),a=t.shift(),i=t.shift(),o=t.splice(0,i);e[s]=new a(o)}return e}}const cj=[lj,Bg,ag];class Hu extends vn{constructor(e,t=e){super(Zs("path",e),t)}array(){return this._array||(this._array=new Jn(this.attr("d")))}clear(){return delete this._array,this}height(e){return e==null?this.bbox().height:this.size(this.bbox().width,e)}move(e,t){return this.attr("d",this.array().move(e,t))}plot(e){return e==null?this.array():this.clear().attr("d",typeof e=="string"?e:this._array=new Jn(e))}size(e,t){const s=Eh(this,e,t);return this.attr("d",this.array().size(s.width,s.height))}width(e){return e==null?this.bbox().width:this.size(e,this.bbox().height)}x(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}y(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}}Hu.prototype.MorphArray=Jn,Yt({Container:{path:Qs(function(r){return this.put(new Hu).plot(r||new Jn)})}}),ys(Hu,"Path");var WL=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new Wl(this.attr("points")))},clear:function(){return delete this._array,this},move:function(r,e){return this.attr("points",this.array().move(r,e))},plot:function(r){return r==null?this.array():this.clear().attr("points",typeof r=="string"?r:this._array=new Wl(r))},size:function(r,e){const t=Eh(this,r,e);return this.attr("points",this.array().size(t.width,t.height))}});class Gc extends vn{constructor(e,t=e){super(Zs("polygon",e),t)}}Yt({Container:{polygon:Qs(function(r){return this.put(new Gc).plot(r||new Wl)})}}),Tt(Gc,lS),Tt(Gc,WL),ys(Gc,"Polygon");class Kc extends vn{constructor(e,t=e){super(Zs("polyline",e),t)}}Yt({Container:{polyline:Qs(function(r){return this.put(new Kc).plot(r||new Wl)})}}),Tt(Kc,lS),Tt(Kc,WL),ys(Kc,"Polyline");class b0 extends vn{constructor(e,t=e){super(Zs("rect",e),t)}}Tt(b0,{rx:iS,ry:oS}),Yt({Container:{rect:Qs(function(r,e){return this.put(new b0).size(r,e)})}}),ys(b0,"Rect");class w1{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){const t=e.next!==void 0?e:{value:e,next:null,prev:null};return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._last=t,this._first=t),t}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){const e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}const Is={nextDraw:null,frames:new w1,timeouts:new w1,immediates:new w1,timer:()=>ps.window.performance||ps.window.Date,transforms:[],frame(r){const e=Is.frames.push({run:r});return Is.nextDraw===null&&(Is.nextDraw=ps.window.requestAnimationFrame(Is._draw)),e},timeout(r,e){e=e||0;const t=Is.timer().now()+e,s=Is.timeouts.push({run:r,time:t});return Is.nextDraw===null&&(Is.nextDraw=ps.window.requestAnimationFrame(Is._draw)),s},immediate(r){const e=Is.immediates.push(r);return Is.nextDraw===null&&(Is.nextDraw=ps.window.requestAnimationFrame(Is._draw)),e},cancelFrame(r){r!=null&&Is.frames.remove(r)},clearTimeout(r){r!=null&&Is.timeouts.remove(r)},cancelImmediate(r){r!=null&&Is.immediates.remove(r)},_draw(r){let e=null;const t=Is.timeouts.last();for(;(e=Is.timeouts.shift())&&(r>=e.time?e.run():Is.timeouts.push(e),e!==t););let s=null;const a=Is.frames.last();for(;s!==a&&(s=Is.frames.shift());)s.run(r);let i=null;for(;i=Is.immediates.shift();)i();Is.nextDraw=Is.timeouts.first()||Is.frames.first()?ps.window.requestAnimationFrame(Is._draw):null}},Bce=function(r){const e=r.start,t=r.runner.duration();return{start:e,duration:t,end:e+t,runner:r.runner}},Hce=function(){const r=ps.window;return(r.performance||r.Date).now()};class YL extends Vg{constructor(e=Hce){super(),this._timeSource=e,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const e=this.getLastRunnerInfo(),t=e?e.runner.duration():0;return(e?e.start:this._time)+t}getEndTimeOfTimeline(){const e=this._runners.map(t=>t.start+t.runner.duration());return Math.max(0,...e)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return e==null?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){const t=this.speed();if(e==null)return this.speed(-t);const s=Math.abs(t);return this.speed(e?-s:s)}schedule(e,t,s){if(e==null)return this._runners.map(Bce);let a=0;const i=this.getEndTime();if(t=t||0,s==null||s==="last"||s==="after")a=i;else if(s==="absolute"||s==="start")a=t,t=0;else if(s==="now")a=this._time;else if(s==="relative"){const c=this.getRunnerInfoById(e.id);c&&(a=c.start+t,t=0)}else{if(s!=="with-last")throw new Error('Invalid value for the "when" parameter');{const c=this.getLastRunnerInfo();a=c?c.start:this._time}}e.unschedule(),e.timeline(this);const o=e.persist(),l={persist:o===null?this._persist:o,start:a+t,runner:e};return this._lastRunnerId=e.id,this._runners.push(l),this._runners.sort((c,u)=>c.start-u.start),this._runnerIds=this._runners.map(c=>c.runner.id),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return e==null?this._timeSource:(this._timeSource=e,this)}speed(e){return e==null?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return e==null?this._time:(this._time=e,this._continue(!0))}unschedule(e){const t=this._runnerIds.indexOf(e.id);return t<0||(this._runners.splice(t,1),this._runnerIds.splice(t,1),e.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return Is.cancelFrame(this._nextFrame),this._nextFrame=null,e?this._stepImmediate():(this._paused||(this._nextFrame=Is.frame(this._step)),this)}_stepFn(e=!1){const t=this._timeSource();let s=t-this._lastSourceTime;e&&(s=0);const a=this._speed*s+(this._time-this._lastStepTime);this._lastSourceTime=t,e||(this._time+=a,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const l=this._runners[o],c=l.runner;this._time-l.start<=0&&c.reset()}let i=!1;for(let o=0,l=this._runners.length;o<l;o++){const c=this._runners[o],u=c.runner;let h=a;const f=this._time-c.start;if(f<=0){i=!0;continue}f<h&&(h=f),u.active()&&(u.step(h).done?c.persist!==!0&&u.duration()-u.time()+this._time+c.persist<this._time&&(u.unschedule(),--o,--l):i=!0)}return i&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}Yt({Element:{timeline:function(r){return r==null?(this._timeline=this._timeline||new YL,this._timeline):(this._timeline=r,this)}}});class yn extends Vg{constructor(e){super(),this.id=yn.id++,e=typeof(e=e??y1)=="function"?new db(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof e=="number"&&e,this._isDeclarative=e instanceof db,this._stepper=this._isDeclarative?e:new aj,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new jt,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(e,t,s){let a=1,i=!1,o=0;return t=t??Ece,s=s||"last",typeof(e=e??y1)!="object"||e instanceof cS||(t=e.delay??t,s=e.when??s,i=e.swing||i,a=e.times??a,o=e.wait??o,e=e.duration??y1),{duration:e,delay:t,swing:i,times:a,wait:o,when:s}}active(e){return e==null?this.enabled:(this.enabled=e,this)}addTransform(e){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,t,s){const a=yn.sanitise(e,t,s),i=new yn(a.duration);return this._timeline&&i.timeline(this._timeline),this._element&&i.element(this._element),i.loop(a).schedule(a.delay,a.when)}clearTransform(){return this.transforms=new jt,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(e=>!e.isTransform))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new aj(e),this}element(e){return e==null?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,t,s){return typeof e=="object"&&(t=e.swing,s=e.wait,e=e.times),this._times=e||1/0,this._swing=t||!1,this._wait=s||0,this._times===!0&&(this._times=1/0),this}loops(e){const t=this._duration+this._wait;if(e==null){const i=Math.floor(this._time/t),o=(this._time-i*t)/this._duration;return Math.min(i+o,this._times)}const s=e%1,a=t*Math.floor(e)+this._duration*s;return this.time(a)}persist(e){return e==null?this._persist:(this._persist=e,this)}position(e){const t=this._time,s=this._duration,a=this._wait,i=this._times,o=this._swing,l=this._reverse;let c;if(e==null){const f=function(x){const y=o*Math.floor(x%(2*(a+s))/(a+s)),b=y&&!l||!y&&l,v=Math.pow(-1,b)*(x%(a+s))/s+b;return Math.max(Math.min(v,1),0)},g=i*(a+s)-a;return c=t<=0?Math.round(f(1e-5)):t<g?f(t):Math.round(f(g-1e-5)),c}const u=Math.floor(this.loops()),h=o&&u%2==0;return c=u+(h&&!l||l&&h?e:1-e),this.loops(c)}progress(e){return e==null?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,t,s,a){return this._queue.push({initialiser:e||a4,runner:t||a4,retarget:s,isTransform:a,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(e){return this._reverse=e??!this._reverse,this}schedule(e,t,s){if(e instanceof YL||(s=t,t=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,t,s),this}step(e){if(!this.enabled)return this;e=e??16,this._time+=e;const t=this.position(),s=this._lastPosition!==t&&this._time>=0;this._lastPosition=t;const a=this.duration(),i=this._lastTime<=0&&this._time>0,o=this._lastTime<a&&this._time>=a;this._lastTime=this._time,i&&this.fire("start",this);const l=this._isDeclarative;this.done=!l&&!o&&this._time>=a,this._reseted=!1;let c=!1;return(s||l)&&(this._initialise(s),this.transforms=new jt,c=this._run(l?e:t),this.fire("step",this)),this.done=this.done||c&&l,o&&this.fire("finished",this),this}time(e){if(e==null)return this._time;const t=e-this._time;return this.step(t),this}timeline(e){return e===void 0?this._timeline:(this._timeline=e,this)}unschedule(){const e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(e||this._isDeclarative)for(let t=0,s=this._queue.length;t<s;++t){const a=this._queue[t],i=this._isDeclarative||!a.initialised&&e;e=!a.finished,i&&e&&(a.initialiser.call(this),a.initialised=!0)}}_rememberMorpher(e,t){if(this._history[e]={morpher:t,caller:this._queue[this._queue.length-1]},this._isDeclarative){const s=this.timeline();s&&s.play()}}_run(e){let t=!0;for(let s=0,a=this._queue.length;s<a;++s){const i=this._queue[s],o=i.runner.call(this,e);i.finished=i.finished||o===!0,t=t&&i.finished}return t}_tryRetarget(e,t,s){if(this._history[e]){if(!this._history[e].caller.initialised){const i=this._queue.indexOf(this._history[e].caller);return this._queue.splice(i,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,t,s):this._history[e].morpher.to(t),this._history[e].caller.finished=!1;const a=this.timeline();return a&&a.play(),!0}return!1}}yn.id=0;class ub{constructor(e=new jt,t=-1,s=!0){this.transforms=e,this.id=t,this.done=s}clearTransformsFromQueue(){}}Tt([yn,ub],{mergeWith(r){return new ub(r.transforms.lmultiply(this.transforms),r.id)}});const qL=(r,e)=>r.lmultiplyO(e),XL=r=>r.transforms;function $ce(){const r=this._transformationRunners.runners.map(XL).reduce(qL,new jt);this.transform(r),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class Wce{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;const t=e.id+1;return this.runners.push(e),this.ids.push(t),this}clearBefore(e){const t=this.ids.indexOf(e+1)||1;return this.ids.splice(0,t,0),this.runners.splice(0,t,new ub).forEach(s=>s.clearTransformsFromQueue()),this}edit(e,t){const s=this.ids.indexOf(e+1);return this.ids.splice(s,1,e+1),this.runners.splice(s,1,t),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let t=0;t<this.runners.length;++t){const s=this.runners[t];if(e&&s.done&&e.done&&(!s._timeline||!s._timeline._runnerIds.includes(s.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))){this.remove(s.id);const a=s.mergeWith(e);this.edit(e.id,a),e=a,--t}else e=s}return this}remove(e){const t=this.ids.indexOf(e+1);return this.ids.splice(t,1),this.runners.splice(t,1),this}}Yt({Element:{animate(r,e,t){const s=yn.sanitise(r,e,t),a=this.timeline();return new yn(s.duration).loop(s).element(this).timeline(a.play()).schedule(s.delay,s.when)},delay(r,e){return this.animate(0,r,e)},_clearTransformRunnersBefore(r){this._transformationRunners.clearBefore(r.id)},_currentTransform(r){return this._transformationRunners.runners.filter(e=>e.id<=r.id).map(XL).reduce(qL,new jt)},_addRunner(r){this._transformationRunners.add(r),Is.cancelImmediate(this._frameId),this._frameId=Is.immediate($ce.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new Wce().add(new ub(new jt(this))))}}});Tt(yn,{attr(r,e){return this.styleAttr("attr",r,e)},css(r,e){return this.styleAttr("css",r,e)},styleAttr(r,e,t){if(typeof e=="string")return this.styleAttr(r,{[e]:t});let s=e;if(this._tryRetarget(r,s))return this;let a=new Fc(this._stepper).to(s),i=Object.keys(s);return this.queue(function(){a=a.from(this.element()[r](i))},function(o){return this.element()[r](a.at(o).valueOf()),a.done()},function(o){const l=Object.keys(o),c=(u=i,l.filter(f=>!u.includes(f)));var u;if(c.length){const f=this.element()[r](c),g=new ag(a.from()).valueOf();Object.assign(g,f),a.from(g)}const h=new ag(a.to()).valueOf();Object.assign(h,o),a.to(h),i=l,s=o}),this._rememberMorpher(r,a),this},zoom(r,e){if(this._tryRetarget("zoom",r,e))return this;let t=new Fc(this._stepper).to(new zt(r));return this.queue(function(){t=t.from(this.element().zoom())},function(s){return this.element().zoom(t.at(s),e),t.done()},function(s,a){e=a,t.to(s)}),this._rememberMorpher("zoom",t),this},transform(r,e,t){if(e=r.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",r))return this;const s=jt.isMatrixLike(r);t=r.affine!=null?r.affine:t??!s;const a=new Fc(this._stepper).type(t?Bg:jt);let i,o,l,c,u;return this.queue(function(){o=o||this.element(),i=i||sj(r,o),u=new jt(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)},function(h){e||this.clearTransform();const{x:f,y:g}=new Cs(i).transform(o._currentTransform(this));let x=new jt({...r,origin:[f,g]}),y=this._isDeclarative&&l?l:u;if(t){x=x.decompose(f,g),y=y.decompose(f,g);const v=x.rotate,N=y.rotate,k=[v-360,v,v+360],A=k.map(I=>Math.abs(I-N)),R=Math.min(...A),_=A.indexOf(R);x.rotate=k[_]}e&&(s||(x.rotate=r.rotate||0),this._isDeclarative&&c&&(y.rotate=c)),a.from(y),a.to(x);const b=a.at(h);return c=b.rotate,l=new jt(b),this.addTransform(l),o._addRunner(this),a.done()},function(h){(h.origin||"center").toString()!==(r.origin||"center").toString()&&(i=sj(h,o)),r={...h,origin:i}},!0),this._isDeclarative&&this._rememberMorpher("transform",a),this},x(r){return this._queueNumber("x",r)},y(r){return this._queueNumber("y",r)},ax(r){return this._queueNumber("ax",r)},ay(r){return this._queueNumber("ay",r)},dx(r=0){return this._queueNumberDelta("x",r)},dy(r=0){return this._queueNumberDelta("y",r)},dmove(r,e){return this.dx(r).dy(e)},_queueNumberDelta(r,e){if(e=new zt(e),this._tryRetarget(r,e))return this;const t=new Fc(this._stepper).to(e);let s=null;return this.queue(function(){s=this.element()[r](),t.from(s),t.to(s+e)},function(a){return this.element()[r](t.at(a)),t.done()},function(a){t.to(s+new zt(a))}),this._rememberMorpher(r,t),this},_queueObject(r,e){if(this._tryRetarget(r,e))return this;const t=new Fc(this._stepper).to(e);return this.queue(function(){t.from(this.element()[r]())},function(s){return this.element()[r](t.at(s)),t.done()}),this._rememberMorpher(r,t),this},_queueNumber(r,e){return this._queueObject(r,new zt(e))},cx(r){return this._queueNumber("cx",r)},cy(r){return this._queueNumber("cy",r)},move(r,e){return this.x(r).y(e)},amove(r,e){return this.ax(r).ay(e)},center(r,e){return this.cx(r).cy(e)},size(r,e){let t;return r&&e||(t=this._element.bbox()),r||(r=t.width/t.height*e),e||(e=t.height/t.width*r),this.width(r).height(e)},width(r){return this._queueNumber("width",r)},height(r){return this._queueNumber("height",r)},plot(r,e,t,s){if(arguments.length===4)return this.plot([r,e,t,s]);if(this._tryRetarget("plot",r))return this;const a=new Fc(this._stepper).type(this._element.MorphArray).to(r);return this.queue(function(){a.from(this._element.array())},function(i){return this._element.plot(a.at(i)),a.done()}),this._rememberMorpher("plot",a),this},leading(r){return this._queueNumber("leading",r)},viewbox(r,e,t,s){return this._queueObject("viewbox",new vr(r,e,t,s))},update(r){return typeof r!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(r.opacity!=null&&this.attr("stop-opacity",r.opacity),r.color!=null&&this.attr("stop-color",r.color),r.offset!=null&&this.attr("offset",r.offset),this)}}),Tt(yn,{rx:iS,ry:oS,from:BL,to:HL}),ys(yn,"Runner");class dj extends Va{constructor(e,t=e){super(Zs("svg",e),t),this.namespace()}defs(){return this.isRoot()?Ln(this.node.querySelector("defs"))||this.put(new dy):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof ps.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:tS,version:"1.1"}).attr("xmlns:xlink",Th,p1):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,p1).attr("xmlns:svgjs",null,p1)}root(){return this.isRoot()?this:super.root()}}Yt({Container:{nested:Qs(function(){return this.put(new dj)})}}),ys(dj,"Svg",!0);let uj=class extends Va{constructor(r,e=r){super(Zs("symbol",r),e)}};Yt({Container:{symbol:Qs(function(){return this.put(new uj)})}}),ys(uj,"Symbol");var GL=Object.freeze({__proto__:null,amove:function(r,e){return this.ax(r).ay(e)},ax:function(r){return this.attr("x",r)},ay:function(r){return this.attr("y",r)},build:function(r){return this._build=!!r,this},center:function(r,e,t=this.bbox()){return this.cx(r,t).cy(e,t)},cx:function(r,e=this.bbox()){return r==null?e.cx:this.attr("x",this.attr("x")+r-e.cx)},cy:function(r,e=this.bbox()){return r==null?e.cy:this.attr("y",this.attr("y")+r-e.cy)},length:function(){return this.node.getComputedTextLength()},move:function(r,e,t=this.bbox()){return this.x(r,t).y(e,t)},plain:function(r){return this._build===!1&&this.clear(),this.node.appendChild(ps.document.createTextNode(r)),this},x:function(r,e=this.bbox()){return r==null?e.x:this.attr("x",this.attr("x")+r-e.x)},y:function(r,e=this.bbox()){return r==null?e.y:this.attr("y",this.attr("y")+r-e.y)}});class ei extends vn{constructor(e,t=e){super(Zs("text",e),t),this.dom.leading=this.dom.leading??new zt(1.3),this._rebuild=!0,this._build=!1}leading(e){return e==null?this.dom.leading:(this.dom.leading=new zt(e),this.rebuild())}rebuild(e){if(typeof e=="boolean"&&(this._rebuild=e),this._rebuild){const t=this;let s=0;const a=this.dom.leading;this.each(function(i){if(rj(this.node))return;const o=ps.window.getComputedStyle(this.node).getPropertyValue("font-size"),l=a*new zt(o);this.dom.newLined&&(this.attr("x",t.attr("x")),this.text()===`
`?s+=l:(this.attr("dy",i?l+s:0),s=0))}),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new zt(e.leading||1.3),this}writeDataToDom(){return AL(this,this.dom,{leading:1.3}),this}text(e){if(e===void 0){const t=this.node.childNodes;let s=0;e="";for(let a=0,i=t.length;a<i;++a)t[a].nodeName==="textPath"||rj(t[a])?a===0&&(s=a+1):(a!==s&&t[a].nodeType!==3&&Ln(t[a]).dom.newLined===!0&&(e+=`
`),e+=t[a].textContent);return e}if(this.clear().build(!0),typeof e=="function")e.call(this,this);else for(let t=0,s=(e=(e+"").split(`
`)).length;t<s;t++)this.newLine(e[t]);return this.build(!1).rebuild()}}Tt(ei,GL),Yt({Container:{text:Qs(function(r=""){return this.put(new ei).text(r)}),plain:Qs(function(r=""){return this.put(new ei).plain(r)})}}),ys(ei,"Text");class y0 extends vn{constructor(e,t=e){super(Zs("tspan",e),t),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;const e=this.parent();if(!(e instanceof ei))return this;const t=e.index(this),s=ps.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=e.dom.leading*new zt(s);return this.dy(t?a:0).attr("x",e.x())}text(e){return e==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof e=="function"?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}Tt(y0,GL),Yt({Tspan:{tspan:Qs(function(r=""){const e=new y0;return this._build||this.clear(),this.put(e).text(r)})},Text:{newLine:function(r=""){return this.tspan(r).newLine()}}}),ys(y0,"Tspan");class N1 extends vn{constructor(e,t=e){super(Zs("circle",e),t)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new zt(e).divide(2))}}Tt(N1,{x:ML,y:OL,cx:LL,cy:FL,width:UL,height:zL}),Yt({Container:{circle:Qs(function(r=0){return this.put(new N1).size(r).move(0,0)})}}),ys(N1,"Circle");class j1 extends Va{constructor(e,t=e){super(Zs("clipPath",e),t)}remove(){return this.targets().forEach(function(e){e.unclip()}),super.remove()}targets(){return Ed("svg [clip-path*="+this.id()+"]")}}Yt({Container:{clip:Qs(function(){return this.defs().put(new j1)})},Element:{clipper(){return this.reference("clip-path")},clipWith(r){const e=r instanceof j1?r:this.parent().clip().add(r);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}}),ys(j1,"ClipPath");class o4 extends xa{constructor(e,t=e){super(Zs("foreignObject",e),t)}}Yt({Container:{foreignObject:Qs(function(r,e){return this.put(new o4).size(r,e)})}}),ys(o4,"ForeignObject");var KL=Object.freeze({__proto__:null,dmove:function(r,e){return this.children().forEach(t=>{let s;try{s=t.node instanceof zg().SVGSVGElement?new vr(t.attr(["x","y","width","height"])):t.bbox()}catch{return}const a=new jt(t),i=a.translate(r,e).transform(a.inverse()),o=new Cs(s.x,s.y).transform(i);t.move(o.x,o.y)}),this},dx:function(r){return this.dmove(r,0)},dy:function(r){return this.dmove(0,r)},height:function(r,e=this.bbox()){return r==null?e.height:this.size(e.width,r,e)},move:function(r=0,e=0,t=this.bbox()){const s=r-t.x,a=e-t.y;return this.dmove(s,a)},size:function(r,e,t=this.bbox()){const s=Eh(this,r,e,t),a=s.width/t.width,i=s.height/t.height;return this.children().forEach(o=>{const l=new Cs(t).transform(new jt(o).inverse());o.scale(a,i,l.x,l.y)}),this},width:function(r,e=this.bbox()){return r==null?e.width:this.size(r,e.height,e)},x:function(r,e=this.bbox()){return r==null?e.x:this.move(r,e.y,e)},y:function(r,e=this.bbox()){return r==null?e.y:this.move(e.x,r,e)}});class Tl extends Va{constructor(e,t=e){super(Zs("g",e),t)}}Tt(Tl,KL),Yt({Container:{group:Qs(function(){return this.put(new Tl)})}}),ys(Tl,"G");class Ux extends Va{constructor(e,t=e){super(Zs("a",e),t)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,Th)}}Tt(Ux,KL),Yt({Container:{link:Qs(function(r){return this.put(new Ux).to(r)})},Element:{unlink(){const r=this.linker();if(!r)return this;const e=r.parent();if(!e)return this.remove();const t=e.index(r);return e.add(this,t),r.remove(),this},linkTo(r){let e=this.linker();return e||(e=new Ux,this.wrap(e)),typeof r=="function"?r.call(e,e):e.to(r),this},linker(){const r=this.parent();return r&&r.node.nodeName.toLowerCase()==="a"?r:null}}}),ys(Ux,"A");class k1 extends Va{constructor(e,t=e){super(Zs("mask",e),t)}remove(){return this.targets().forEach(function(e){e.unmask()}),super.remove()}targets(){return Ed("svg [mask*="+this.id()+"]")}}Yt({Container:{mask:Qs(function(){return this.defs().put(new k1)})},Element:{masker(){return this.reference("mask")},maskWith(r){const e=r instanceof k1?r:this.parent().mask().add(r);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}}),ys(k1,"Mask");class l4 extends xa{constructor(e,t=e){super(Zs("stop",e),t)}update(e){return(typeof e=="number"||e instanceof zt)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",new zt(e.offset)),this}}Yt({Gradient:{stop:function(r,e,t){return this.put(new l4).update(r,e,t)}}}),ys(l4,"Stop");class S1 extends xa{constructor(e,t=e){super(Zs("style",e),t)}addText(e=""){return this.node.textContent+=e,this}font(e,t,s={}){return this.rule("@font-face",{fontFamily:e,src:t,...s})}rule(e,t){return this.addText(function(s,a){if(!s)return"";if(!a)return s;let i=s+"{";for(const o in a)i+=o.replace(/([A-Z])/g,function(l,c){return"-"+c.toLowerCase()})+":"+a[o]+";";return i+="}",i}(e,t))}}Yt("Dom",{style(r,e){return this.put(new S1).rule(r,e)},fontface(r,e,t){return this.put(new S1).font(r,e,t)}}),ys(S1,"Style");class _1 extends ei{constructor(e,t=e){super(Zs("textPath",e),t)}array(){const e=this.track();return e?e.array():null}plot(e){const t=this.track();let s=null;return t&&(s=t.plot(e)),e==null?s:this}track(){return this.reference("href")}}Yt({Container:{textPath:Qs(function(r,e){return r instanceof ei||(r=this.text(r)),r.path(e)})},Text:{path:Qs(function(r,e=!0){const t=new _1;let s;if(r instanceof Hu||(r=this.defs().path(r)),t.attr("href","#"+r,Th),e)for(;s=this.node.firstChild;)t.node.appendChild(s);return this.put(t)}),textPath(){return this.findOne("textPath")}},Path:{text:Qs(function(r){return r instanceof ei||(r=new ei().addTo(this.parent()).text(r)),r.path(this)}),targets(){return Ed("svg textPath").filter(r=>(r.attr("href")||"").includes(this.id()))}}}),_1.prototype.MorphArray=Jn,ys(_1,"TextPath");class c4 extends vn{constructor(e,t=e){super(Zs("use",e),t)}use(e,t){return this.attr("href",(t||"")+"#"+e,Th)}}Yt({Container:{use:Qs(function(r,e){return this.put(new c4).use(r,e)})}}),ys(c4,"Use");const Yce=La;Tt([dj,uj,p0,rg,x0],qa("viewbox")),Tt([Xc,Kc,Gc,Hu],qa("marker")),Tt(ei,qa("Text")),Tt(Hu,qa("Path")),Tt(dy,qa("Defs")),Tt([ei,y0],qa("Tspan")),Tt([b0,g0,_f,yn],qa("radius")),Tt(Vg,qa("EventTarget")),Tt($l,qa("Dom")),Tt(xa,qa("Element")),Tt(vn,qa("Shape")),Tt([Va,VL],qa("Container")),Tt(_f,qa("Gradient")),Tt(yn,qa("Runner")),yd.extend([...new Set(SL)]),function(r=[]){cj.push(...[].concat(r))}([zt,Hs,vr,jt,vd,Wl,Jn,Cs]),Tt(cj,{to(r){return new Fc().type(this.constructor).from(this.toArray()).to(r)},fromArray(r){return this.init(r),this},toConsumable(){return this.toArray()},morph(r,e,t,s,a){return this.fromArray(r.map(function(i,o){return s.step(i,e[o],t,a[o],a)}))}});class rr extends xa{constructor(e){super(Zs("filter",e),e),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(e,t){return!(e=super.put(e,t)).attr("in")&&this.$autoSetIn&&e.attr("in",this.$source),e.attr("result")||e.attr("result",e.id()),e}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return Ed('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class dS extends xa{constructor(e,t){super(e,t),this.result(this.id())}in(e){if(e==null){const t=this.attr("in");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in",e)}result(e){return this.attr("result",e)}toString(){return this.result()}}const Mn=r=>function(...e){for(let t=r.length;t--;)e[t]!=null&&this.attr(r[t],e[t])},qce={blend:Mn(["in","in2","mode"]),colorMatrix:Mn(["type","values"]),composite:Mn(["in","in2","operator"]),convolveMatrix:function(r){r=new vd(r).toString(),this.attr({order:Math.sqrt(r.split(" ").length),kernelMatrix:r})},diffuseLighting:Mn(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:Mn(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:Mn(["in","dx","dy","stdDeviation"]),flood:Mn(["flood-color","flood-opacity"]),gaussianBlur:function(r=0,e=r){this.attr("stdDeviation",r+" "+e)},image:function(r){this.attr("href",r,Th)},morphology:Mn(["operator","radius"]),offset:Mn(["dx","dy"]),specularLighting:Mn(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:Mn([]),turbulence:Mn(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach(r=>{const e=Ch(r),t=qce[r];rr[e+"Effect"]=class extends dS{constructor(s){super(Zs("fe"+e,s),s)}update(s){return t.apply(this,s),this}},rr.prototype[r]=Qs(function(s,...a){const i=new rr[e+"Effect"];return s==null?this.put(i):(typeof s=="function"?s.call(i,i):a.unshift(s),this.put(i).update(a))})}),Tt(rr,{merge(r){const e=this.put(new rr.MergeEffect);return typeof r=="function"?(r.call(e,e),e):((r instanceof Array?r:[...arguments]).forEach(t=>{t instanceof rr.MergeNode?e.put(t):e.mergeNode(t)}),e)},componentTransfer(r={}){const e=this.put(new rr.ComponentTransferEffect);if(typeof r=="function")return r.call(e,e),e;r.r||r.g||r.b||r.a||(r={r,g:r,b:r,a:r});for(const t in r)e.add(new rr["Func"+t.toUpperCase()](r[t]));return e}});["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach(r=>{const e=Ch(r);rr[e]=class extends dS{constructor(t){super(Zs("fe"+e,t),t)}}});["funcR","funcG","funcB","funcA"].forEach(function(r){const e=rr[Ch(r)],t=Qs(function(){return this.put(new e)});rr.ComponentTransferEffect.prototype[r]=t});["distantLight","pointLight","spotLight"].forEach(r=>{const e=rr[Ch(r)],t=Qs(function(){return this.put(new e)});rr.DiffuseLightingEffect.prototype[r]=t,rr.SpecularLightingEffect.prototype[r]=t}),Tt(rr.MergeEffect,{mergeNode(r){return this.put(new rr.MergeNode).attr("in",r)}}),Tt(dy,{filter:function(r){const e=this.put(new rr);return typeof r=="function"&&r.call(e,e),e}}),Tt(Va,{filter:function(r){return this.defs().filter(r)}}),Tt(xa,{filterWith:function(r){const e=r instanceof rr?r:this.defs().filter(r);return this.attr("filter",e)},unfilter:function(r){return this.attr("filter",null)},filterer(){return this.reference("filter")}});const Xce={blend:function(r,e){return this.parent()&&this.parent().blend(this,r,e)},colorMatrix:function(r,e){return this.parent()&&this.parent().colorMatrix(r,e).in(this)},componentTransfer:function(r){return this.parent()&&this.parent().componentTransfer(r).in(this)},composite:function(r,e){return this.parent()&&this.parent().composite(this,r,e)},convolveMatrix:function(r){return this.parent()&&this.parent().convolveMatrix(r).in(this)},diffuseLighting:function(r,e,t,s){return this.parent()&&this.parent().diffuseLighting(r,t,s).in(this)},displacementMap:function(r,e,t,s){return this.parent()&&this.parent().displacementMap(this,r,e,t,s)},dropShadow:function(r,e,t){return this.parent()&&this.parent().dropShadow(this,r,e,t).in(this)},flood:function(r,e){return this.parent()&&this.parent().flood(r,e)},gaussianBlur:function(r,e){return this.parent()&&this.parent().gaussianBlur(r,e).in(this)},image:function(r){return this.parent()&&this.parent().image(r)},merge:function(r){return r=r instanceof Array?r:[...r],this.parent()&&this.parent().merge(this,...r)},morphology:function(r,e){return this.parent()&&this.parent().morphology(r,e).in(this)},offset:function(r,e){return this.parent()&&this.parent().offset(r,e).in(this)},specularLighting:function(r,e,t,s,a){return this.parent()&&this.parent().specularLighting(r,t,s,a).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(r,e,t,s,a){return this.parent()&&this.parent().turbulence(r,e,t,s,a).in(this)}};Tt(dS,Xce),Tt(rr.MergeEffect,{in:function(r){return r instanceof rr.MergeNode?this.add(r,0):this.add(new rr.MergeNode().in(r),0),this}}),Tt([rr.CompositeEffect,rr.BlendEffect,rr.DisplacementMapEffect],{in2:function(r){if(r==null){const e=this.attr("in2");return this.parent()&&this.parent().find(`[result="${e}"]`)[0]||e}return this.attr("in2",r)}}),rr.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var ga=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"getDefaultFilter",value:function(e,t){var s=this.w;e.unfilter(!0),new rr().size("120%","180%","-5%","-40%"),s.config.chart.dropShadow.enabled&&this.dropShadow(e,s.config.chart.dropShadow,t)}},{key:"applyFilter",value:function(e,t,s){var a,i=this,o=this.w;if(e.unfilter(!0),s!=="none"){var l,c,u=o.config.chart.dropShadow,h=s==="lighten"?2:.3;e.filterWith(function(f){f.colorMatrix({type:"matrix",values:`
          `.concat(h,` 0 0 0 0
          0 `).concat(h,` 0 0 0
          0 0 `).concat(h,` 0 0
          0 0 0 1 0
        `),in:"SourceGraphic",result:"brightness"}),u.enabled&&i.addShadow(f,t,u,"brightness")}),!u.noUserSpaceOnUse&&((l=e.filterer())===null||l===void 0||(c=l.node)===null||c===void 0||c.setAttribute("filterUnits","userSpaceOnUse")),this._scaleFilterSize((a=e.filterer())===null||a===void 0?void 0:a.node)}else this.getDefaultFilter(e,t)}},{key:"addShadow",value:function(e,t,s,a){var i,o=this.w,l=s.blur,c=s.top,u=s.left,h=s.color,f=s.opacity;if(h=Array.isArray(h)?h[t]:h,((i=o.config.chart.dropShadow.enabledOnSeries)===null||i===void 0?void 0:i.length)>0&&o.config.chart.dropShadow.enabledOnSeries.indexOf(t)===-1)return e;e.offset({in:a,dx:u,dy:c,result:"offset"}),e.gaussianBlur({in:"offset",stdDeviation:l,result:"blur"}),e.flood({"flood-color":h,"flood-opacity":f,result:"flood"}),e.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),e.merge(["shadow",a])}},{key:"dropShadow",value:function(e,t){var s,a,i,o,l,c=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=this.w;return e.unfilter(!0),ne.isMsEdge()&&h.config.chart.type==="radialBar"||((s=h.config.chart.dropShadow.enabledOnSeries)===null||s===void 0?void 0:s.length)>0&&((i=h.config.chart.dropShadow.enabledOnSeries)===null||i===void 0?void 0:i.indexOf(u))===-1?e:(e.filterWith(function(f){c.addShadow(f,u,t,"SourceGraphic")}),t.noUserSpaceOnUse||(o=e.filterer())===null||o===void 0||(l=o.node)===null||l===void 0||l.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize((a=e.filterer())===null||a===void 0?void 0:a.node),e)}},{key:"setSelectionFilter",value:function(e,t,s){var a=this.w;if(a.globals.selectedDataPoints[t]!==void 0&&a.globals.selectedDataPoints[t].indexOf(s)>-1){e.node.setAttribute("selected",!0);var i=a.config.states.active.filter;i!=="none"&&this.applyFilter(e,t,i.type)}}},{key:"_scaleFilterSize",value:function(e){e&&function(t){for(var s in t)t.hasOwnProperty(s)&&e.setAttribute(s,t[s])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),r}(),Be=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"roundPathCorners",value:function(e,t){function s(T,D,L){var F=D.x-T.x,z=D.y-T.y,O=Math.sqrt(F*F+z*z);return a(T,D,Math.min(1,L/O))}function a(T,D,L){return{x:T.x+(D.x-T.x)*L,y:T.y+(D.y-T.y)*L}}function i(T,D){T.length>2&&(T[T.length-2]=D.x,T[T.length-1]=D.y)}function o(T){return{x:parseFloat(T[T.length-2]),y:parseFloat(T[T.length-1])}}e.indexOf("NaN")>-1&&(e="");var l=e.split(/[,\s]/).reduce(function(T,D){var L=D.match(/^([a-zA-Z])(.+)/);return L?(T.push(L[1]),T.push(L[2])):T.push(D),T},[]).reduce(function(T,D){return parseFloat(D)==D&&T.length?T[T.length-1].push(D):T.push([D]),T},[]),c=[];if(l.length>1){var u=o(l[0]),h=null;l[l.length-1][0]=="Z"&&l[0].length>2&&(h=["L",u.x,u.y],l[l.length-1]=h),c.push(l[0]);for(var f=1;f<l.length;f++){var g=c[c.length-1],x=l[f],y=x==h?l[1]:l[f+1];if(y&&g&&g.length>2&&x[0]=="L"&&y.length>2&&y[0]=="L"){var b,v,N=o(g),k=o(x),A=o(y);b=s(k,N,t),v=s(k,A,t),i(x,b),x.origPoint=k,c.push(x);var R=a(b,k,.5),_=a(k,v,.5),I=["C",R.x,R.y,_.x,_.y,v.x,v.y];I.origPoint=k,c.push(I)}else c.push(x)}if(h){var P=o(c[c.length-1]);c.push(["Z"]),i(c[0],P)}}else c=l;return c.reduce(function(T,D){return T+D.join(" ")+" "},"")}},{key:"drawLine",value:function(e,t,s,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:e,y1:t,x2:s,y2:a,stroke:i,"stroke-dasharray":o,"stroke-width":l,"stroke-linecap":c})}},{key:"drawRect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,u=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,h=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,f=this.w.globals.dom.Paper.rect();return f.attr({x:e,y:t,width:s>0?s:0,height:a>0?a:0,rx:i,ry:i,opacity:l,"stroke-width":c!==null?c:0,stroke:u!==null?u:"none","stroke-dasharray":h}),f.node.setAttribute("fill",o),f}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(e).attr({fill:a,stroke:t,"stroke-width":s})}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e<0&&(e=0);var s=this.w.globals.dom.Paper.circle(2*e);return t!==null&&s.attr(t),s}},{key:"drawPath",value:function(e){var t=e.d,s=t===void 0?"":t,a=e.stroke,i=a===void 0?"#a8a8a8":a,o=e.strokeWidth,l=o===void 0?1:o,c=e.fill,u=e.fillOpacity,h=u===void 0?1:u,f=e.strokeOpacity,g=f===void 0?1:f,x=e.classes,y=e.strokeLinecap,b=y===void 0?null:y,v=e.strokeDashArray,N=v===void 0?0:v,k=this.w;return b===null&&(b=k.config.stroke.lineCap),(s.indexOf("undefined")>-1||s.indexOf("NaN")>-1)&&(s="M 0 ".concat(k.globals.gridHeight)),k.globals.dom.Paper.path(s).attr({fill:c,"fill-opacity":h,stroke:i,"stroke-opacity":g,"stroke-linecap":b,"stroke-width":l,"stroke-dasharray":N,class:x})}},{key:"group",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w.globals.dom.Paper.group();return e!==null&&t.attr(e),t}},{key:"move",value:function(e,t){var s=["M",e,t].join(" ");return s}},{key:"line",value:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=null;return s===null?a=[" L",e,t].join(" "):s==="H"?a=[" H",e].join(" "):s==="V"&&(a=[" V",t].join(" ")),a}},{key:"curve",value:function(e,t,s,a,i,o){var l=["C",e,t,s,a,i,o].join(" ");return l}},{key:"quadraticCurve",value:function(e,t,s,a){return["Q",e,t,s,a].join(" ")}},{key:"arc",value:function(e,t,s,a,i,o,l){var c="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(c="a");var u=[c,e,t,s,a,i,o,l].join(" ");return u}},{key:"renderPaths",value:function(e){var t,s=e.j,a=e.realIndex,i=e.pathFrom,o=e.pathTo,l=e.stroke,c=e.strokeWidth,u=e.strokeLinecap,h=e.fill,f=e.animationDelay,g=e.initialSpeed,x=e.dataChangeSpeed,y=e.className,b=e.chartType,v=e.shouldClipToGrid,N=v===void 0||v,k=e.bindEventsOnPaths,A=k===void 0||k,R=e.drawShadow,_=R===void 0||R,I=this.w,P=new ga(this.ctx),T=new Ah(this.ctx),D=this.w.config.chart.animations.enabled,L=D&&this.w.config.chart.animations.dynamicAnimation.enabled;if(i&&i.startsWith("M 0 0")&&o){var F=o.match(/^M\s+[\d.-]+\s+[\d.-]+/);F&&(i=i.replace(/^M\s+0\s+0/,F[0]))}var z=!!(D&&!I.globals.resized||L&&I.globals.dataChanged&&I.globals.shouldAnimate);z?t=i:(t=o,I.globals.animationEnded=!0);var O=I.config.stroke.dashArray,V=0;V=Array.isArray(O)?O[a]:I.config.stroke.dashArray;var Y=this.drawPath({d:t,stroke:l,strokeWidth:c,fill:h,fillOpacity:1,classes:y,strokeLinecap:u,strokeDashArray:V});Y.attr("index",a),N&&(b==="bar"&&!I.globals.isHorizontal||I.globals.comboCharts?Y.attr({"clip-path":"url(#gridRectBarMask".concat(I.globals.cuid,")")}):Y.attr({"clip-path":"url(#gridRectMask".concat(I.globals.cuid,")")})),I.config.chart.dropShadow.enabled&&_&&P.dropShadow(Y,I.config.chart.dropShadow,a),A&&(Y.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,Y)),Y.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,Y)),Y.node.addEventListener("mousedown",this.pathMouseDown.bind(this,Y))),Y.attr({pathTo:o,pathFrom:i});var H={el:Y,j:s,realIndex:a,pathFrom:i,pathTo:o,fill:h,strokeWidth:c,delay:f};return!D||I.globals.resized||I.globals.dataChanged?!I.globals.resized&&I.globals.dataChanged||T.showDelayedElements():T.animatePathsGradually(et(et({},H),{},{speed:g})),I.globals.dataChanged&&L&&z&&T.animatePathsGradually(et(et({},H),{},{speed:x})),Y}},{key:"drawPattern",value:function(e,t,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(t,s,function(o){e==="horizontalLines"?o.line(0,0,s,0).stroke({color:a,width:i+1}):e==="verticalLines"?o.line(0,0,0,t).stroke({color:a,width:i+1}):e==="slantedLines"?o.line(0,0,t,s).stroke({color:a,width:i}):e==="squares"?o.rect(t,s).fill("none").stroke({color:a,width:i}):e==="circles"&&o.circle(t).fill("none").stroke({color:a,width:i})})}},{key:"drawGradient",value:function(e,t,s,a,i){var o,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],h=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,f=this.w;t.length<9&&t.indexOf("#")===0&&(t=ne.hexToRgba(t,a)),s.length<9&&s.indexOf("#")===0&&(s=ne.hexToRgba(s,i));var g=0,x=1,y=1,b=null;c!==null&&(g=c[0]!==void 0?c[0]/100:0,x=c[1]!==void 0?c[1]/100:1,y=c[2]!==void 0?c[2]/100:1,b=c[3]!==void 0?c[3]/100:null);var v=!(f.config.chart.type!=="donut"&&f.config.chart.type!=="pie"&&f.config.chart.type!=="polarArea"&&f.config.chart.type!=="bubble");if(o=u&&u.length!==0?f.globals.dom.Paper.gradient(v?"radial":"linear",function(A){(Array.isArray(u[h])?u[h]:u).forEach(function(R){A.stop(R.offset/100,R.color,R.opacity)})}):f.globals.dom.Paper.gradient(v?"radial":"linear",function(A){A.stop(g,t,a),A.stop(x,s,i),A.stop(y,s,i),b!==null&&A.stop(b,t,a)}),v){var N=f.globals.gridWidth/2,k=f.globals.gridHeight/2;f.config.chart.type!=="bubble"?o.attr({gradientUnits:"userSpaceOnUse",cx:N,cy:k,r:l}):o.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else e==="vertical"?o.from(0,0).to(0,1):e==="diagonal"?o.from(0,0).to(1,1):e==="horizontal"?o.from(0,1).to(1,1):e==="diagonal2"&&o.from(1,0).to(0,1);return o}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,s=e.maxWidth,a=e.fontSize,i=e.fontFamily,o=this.getTextRects(t,a,i),l=o.width/t.length,c=Math.floor(s/l);return s<o.width?t.slice(0,c-3)+"...":t}},{key:"drawText",value:function(e){var t=this,s=e.x,a=e.y,i=e.text,o=e.textAnchor,l=e.fontSize,c=e.fontFamily,u=e.fontWeight,h=e.foreColor,f=e.opacity,g=e.maxWidth,x=e.cssClass,y=x===void 0?"":x,b=e.isPlainText,v=b===void 0||b,N=e.dominantBaseline,k=N===void 0?"auto":N,A=this.w;i===void 0&&(i="");var R=i;o||(o="start"),h&&h.length||(h=A.config.chart.foreColor),c=c||A.config.chart.fontFamily,u=u||"regular";var _,I={maxWidth:g,fontSize:l=l||"11px",fontFamily:c};return Array.isArray(i)?_=A.globals.dom.Paper.text(function(P){for(var T=0;T<i.length;T++)R=i[T],g&&(R=t.getTextBasedOnMaxWidth(et({text:i[T]},I))),T===0?P.tspan(R):P.tspan(R).newLine()}):(g&&(R=this.getTextBasedOnMaxWidth(et({text:i},I))),_=v?A.globals.dom.Paper.plain(i):A.globals.dom.Paper.text(function(P){return P.tspan(R)})),_.attr({x:s,y:a,"text-anchor":o,"dominant-baseline":k,"font-size":l,"font-family":c,"font-weight":u,fill:h,class:"apexcharts-text "+y}),_.node.style.fontFamily=c,_.node.style.opacity=f,_}},{key:"getMarkerPath",value:function(e,t,s,a){var i="";switch(s){case"cross":i="M ".concat(e-(a/=1.4)," ").concat(t-a," L ").concat(e+a," ").concat(t+a,"  M ").concat(e-a," ").concat(t+a," L ").concat(e+a," ").concat(t-a);break;case"plus":i="M ".concat(e-(a/=1.12)," ").concat(t," L ").concat(e+a," ").concat(t,"  M ").concat(e," ").concat(t-a," L ").concat(e," ").concat(t+a);break;case"star":case"sparkle":var o=5;a*=1.15,s==="sparkle"&&(a/=1.1,o=4);for(var l=Math.PI/o,c=0;c<=2*o;c++){var u=c*l,h=c%2==0?a:a/2;i+=(c===0?"M":"L")+(e+h*Math.sin(u))+","+(t-h*Math.cos(u))}i+="Z";break;case"triangle":i="M ".concat(e," ").concat(t-a,` 
             L `).concat(e+a," ").concat(t+a,` 
             L `).concat(e-a," ").concat(t+a,` 
             Z`);break;case"square":case"rect":i="M ".concat(e-(a/=1.125)," ").concat(t-a,` 
           L `).concat(e+a," ").concat(t-a,` 
           L `).concat(e+a," ").concat(t+a,` 
           L `).concat(e-a," ").concat(t+a,` 
           Z`);break;case"diamond":a*=1.05,i="M ".concat(e," ").concat(t-a,` 
             L `).concat(e+a," ").concat(t,` 
             L `).concat(e," ").concat(t+a,` 
             L `).concat(e-a," ").concat(t,` 
            Z`);break;case"line":i="M ".concat(e-(a/=1.1)," ").concat(t,` 
           L `).concat(e+a," ").concat(t);break;default:a*=2,i="M ".concat(e,", ").concat(t,` 
           m -`).concat(a/2,`, 0 
           a `).concat(a/2,",").concat(a/2," 0 1,0 ").concat(a,`,0 
           a `).concat(a/2,",").concat(a/2," 0 1,0 -").concat(a,",0")}return i}},{key:"drawMarkerShape",value:function(e,t,s,a,i){var o=this.drawPath({d:this.getMarkerPath(e,t,s,a,i),stroke:i.pointStrokeColor,strokeDashArray:i.pointStrokeDashArray,strokeWidth:i.pointStrokeWidth,fill:i.pointFillColor,fillOpacity:i.pointFillOpacity,strokeOpacity:i.pointStrokeOpacity});return o.attr({cx:e,cy:t,shape:i.shape,class:i.class?i.class:""}),o}},{key:"drawMarker",value:function(e,t,s){e=e||0;var a=s.pSize||0;return ne.isNumber(t)||(a=0,t=0),this.drawMarkerShape(e,t,s?.shape,a,et(et({},s),s.shape==="line"||s.shape==="plus"||s.shape==="cross"?{pointStrokeColor:s.pointFillColor,pointStrokeOpacity:s.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(e,t){var s=this.w,a=new ga(this.ctx),i=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10);if(typeof s.config.chart.events.dataPointMouseEnter=="function"&&s.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:i,dataPointIndex:o,w:s}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:i,dataPointIndex:o,w:s}]),(s.config.states.active.filter.type==="none"||e.node.getAttribute("selected")!=="true")&&s.config.states.hover.filter.type!=="none"&&!s.globals.isTouchDevice){var l=s.config.states.hover.filter;a.applyFilter(e,i,l.type)}}},{key:"pathMouseLeave",value:function(e,t){var s=this.w,a=new ga(this.ctx),i=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10);typeof s.config.chart.events.dataPointMouseLeave=="function"&&s.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:i,dataPointIndex:o,w:s}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:i,dataPointIndex:o,w:s}]),s.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true"||s.config.states.hover.filter.type!=="none"&&a.getDefaultFilter(e,i)}},{key:"pathMouseDown",value:function(e,t){var s=this.w,a=new ga(this.ctx),i=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10),l="false";if(e.node.getAttribute("selected")==="true"){if(e.node.setAttribute("selected","false"),s.globals.selectedDataPoints[i].indexOf(o)>-1){var c=s.globals.selectedDataPoints[i].indexOf(o);s.globals.selectedDataPoints[i].splice(c,1)}}else{if(!s.config.states.active.allowMultipleDataPointsSelection&&s.globals.selectedDataPoints.length>0){s.globals.selectedDataPoints=[];var u=s.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),h=s.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),f=function(y){Array.prototype.forEach.call(y,function(b){b.node.setAttribute("selected","false"),a.getDefaultFilter(b,i)})};f(u),f(h)}e.node.setAttribute("selected","true"),l="true",s.globals.selectedDataPoints[i]===void 0&&(s.globals.selectedDataPoints[i]=[]),s.globals.selectedDataPoints[i].push(o)}if(l==="true"){var g=s.config.states.active.filter;if(g!=="none")a.applyFilter(e,i,g.type);else if(s.config.states.hover.filter!=="none"&&!s.globals.isTouchDevice){var x=s.config.states.hover.filter;a.applyFilter(e,i,x.type)}}else s.config.states.active.filter.type!=="none"&&(s.config.states.hover.filter.type==="none"||s.globals.isTouchDevice?a.getDefaultFilter(e,i):(x=s.config.states.hover.filter,a.applyFilter(e,i,x.type)));typeof s.config.chart.events.dataPointSelection=="function"&&s.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:s.globals.selectedDataPoints,seriesIndex:i,dataPointIndex:o,w:s}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:s.globals.selectedDataPoints,seriesIndex:i,dataPointIndex:o,w:s}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&typeof e.getBBox=="function"&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,s,a){var i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=this.w,l=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:s,foreColor:"#fff",opacity:0});a&&l.attr("transform",a),o.globals.dom.Paper.add(l);var c=l.bbox();return i||(c=l.node.getBoundingClientRect()),l.remove(),{width:c.width,height:c.height}}},{key:"placeTextWithEllipsis",value:function(e,t,s){if(typeof e.getComputedTextLength=="function"&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=s/1.1)){for(var a=t.length-3;a>0;a-=3)if(e.getSubStringLength(0,a)<=s/1.1)return void(e.textContent=t.substring(0,a)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var s in t)t.hasOwnProperty(s)&&e.setAttribute(s,t[s])}}]),r}(),wr=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.w,s=[];if(t.globals.series.length===0)return s;for(var a=0;a<t.globals.series[t.globals.maxValsInArrayIndex].length;a++){for(var i=0,o=0;o<t.globals.series.length;o++)t.globals.series[o][a]!==void 0&&e.indexOf(o)===-1&&(i+=t.globals.series[o][a]);s.push(i)}return s}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?this.w.config.series.reduce(function(t,s){return t+s},0):this.w.globals.series[e].reduce(function(t,s){return t+s},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var e=this,t=this.w,s=[];return t.globals.seriesGroups.forEach(function(a){var i=[];t.config.series.forEach(function(l,c){a.indexOf(t.globals.seriesNames[c])>-1&&i.push(c)});var o=t.globals.series.map(function(l,c){return i.indexOf(c)===-1?c:-1}).filter(function(l){return l!==-1});s.push(e.getStackedSeriesTotals(o))}),s}},{key:"setSeriesYAxisMappings",value:function(){var e=this.w.globals,t=this.w.config,s=[],a=[],i=[],o=e.series.length>t.yaxis.length||t.yaxis.some(function(f){return Array.isArray(f.seriesName)});t.series.forEach(function(f,g){i.push(g),a.push(null)}),t.yaxis.forEach(function(f,g){s[g]=[]});var l=[];t.yaxis.forEach(function(f,g){var x=!1;if(f.seriesName){var y=[];Array.isArray(f.seriesName)?y=f.seriesName:y.push(f.seriesName),y.forEach(function(b){t.series.forEach(function(v,N){if(v.name===b){var k=N;g===N||o?!o||i.indexOf(N)>-1?s[g].push([g,N]):console.warn("Series '"+v.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(s[N].push([N,g]),k=g),x=!0,(k=i.indexOf(k))!==-1&&i.splice(k,1)}})})}x||l.push(g)}),s=s.map(function(f,g){var x=[];return f.forEach(function(y){a[y[1]]=y[0],x.push(y[1])}),x});for(var c=t.yaxis.length-1,u=0;u<l.length&&(c=l[u],s[c]=[],i);u++){var h=i[0];i.shift(),s[c].push(h),a[h]=c}i.forEach(function(f){s[c].push(f),a[f]=c}),e.seriesYAxisMap=s.map(function(f){return f}),e.seriesYAxisReverseMap=a.map(function(f){return f}),e.seriesYAxisMap.forEach(function(f,g){f.forEach(function(x){t.series[x]&&t.series[x].group===void 0&&(t.series[x].__apexParsed?t.series[x].group="apexcharts-axis-".concat(x.toString()):t.series[x].group="apexcharts-axis-".concat(g.toString()))})})}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(e===null?this.w.config.series.filter(function(t){return t!==null}):this.w.config.series[e].data.filter(function(t){return t!==null})).length===0}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every(function(t,s,a){return t===a[0]})}},{key:"getCategoryLabels",value:function(e){var t=this.w,s=e.slice();return t.config.xaxis.convertedCatToNumeric&&(s=e.map(function(a,i){return t.config.xaxis.labels.formatter(a-t.globals.minX+1)})),s}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map(function(t){return t.length}).indexOf(Math.max.apply(Math,e.globals.series.map(function(t){return t.length})))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach(function(s){t=Math.max(t,s)}),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach(function(s){t=Math.max(t,s.size)}),t>0&&(e.config.markers.hover.size>0?t=e.config.markers.hover.size:t+=e.config.markers.hover.sizeOffset),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map(function(t,s){var a=0;if(Array.isArray(t))for(var i=0;i<t.length;i++)a+=t[i];else a+=t;return a})}},{key:"getSeriesTotalsXRange",value:function(e,t){var s=this.w;return s.globals.series.map(function(a,i){for(var o=0,l=0;l<a.length;l++)s.globals.seriesX[i][l]>e&&s.globals.seriesX[i][l]<t&&(o+=a[l]);return o})}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map(function(t,s){var a=[];if(Array.isArray(t))for(var i=0;i<t.length;i++){var o=e.globals.stackedSeriesTotals[i],l=0;o&&(l=100*t[i]/o),a.push(l)}else{var c=100*t/e.globals.seriesTotals.reduce(function(u,h){return u+h},0);a.push(c)}return a})}},{key:"getCalculatedRatios",value:function(){var e,t,s,a=this,i=this.w,o=i.globals,l=[],c=0,u=[],h=.1,f=0;if(o.yRange=[],o.isMultipleYAxis)for(var g=0;g<o.minYArr.length;g++)o.yRange.push(Math.abs(o.minYArr[g]-o.maxYArr[g])),u.push(0);else o.yRange.push(Math.abs(o.minY-o.maxY));o.xRange=Math.abs(o.maxX-o.minX),o.zRange=Math.abs(o.maxZ-o.minZ);for(var x=0;x<o.yRange.length;x++)l.push(o.yRange[x]/o.gridHeight);if(t=o.xRange/o.gridWidth,e=o.yRange/o.gridWidth,s=o.xRange/o.gridHeight,(c=o.zRange/o.gridHeight*16)||(c=1),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(o.hasNegs=!0),i.globals.seriesYAxisReverseMap.length>0){var y=function(v,N){var k=i.config.yaxis[i.globals.seriesYAxisReverseMap[N]],A=v<0?-1:1;return v=Math.abs(v),k.logarithmic&&(v=a.getBaseLog(k.logBase,v)),-A*v/l[N]};if(o.isMultipleYAxis){u=[];for(var b=0;b<l.length;b++)u.push(y(o.minYArr[b],b))}else(u=[]).push(y(o.minY,0)),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(h=-o.minY/e,f=o.minX/t)}else(u=[]).push(0),h=0,f=0;return{yRatio:l,invertedYRatio:e,zRatio:c,xRatio:t,invertedXRatio:s,baseLineInvertedY:h,baseLineY:u,baseLineX:f}}},{key:"getLogSeries",value:function(e){var t=this,s=this.w;return s.globals.seriesLog=e.map(function(a,i){var o=s.globals.seriesYAxisReverseMap[i];return s.config.yaxis[o]&&s.config.yaxis[o].logarithmic?a.map(function(l){return l===null?null:t.getLogVal(s.config.yaxis[o].logBase,l,i)}):a}),s.globals.invalidLogScale?e:s.globals.seriesLog}},{key:"getLogValAtSeriesIndex",value:function(e,t){if(e===null)return null;var s=this.w,a=s.globals.seriesYAxisReverseMap[t];return s.config.yaxis[a]&&s.config.yaxis[a].logarithmic?this.getLogVal(s.config.yaxis[a].logBase,e,t):e}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,s){if(t<=0)return 0;var a=this.w,i=a.globals.minYArr[s]===0?-1:this.getBaseLog(e,a.globals.minYArr[s]),o=(a.globals.maxYArr[s]===0?0:this.getBaseLog(e,a.globals.maxYArr[s]))-i;return t<1?t/o:(this.getBaseLog(e,t)-i)/o}},{key:"getLogYRatios",value:function(e){var t=this,s=this.w,a=this.w.globals;return a.yLogRatio=e.slice(),a.logYRange=a.yRange.map(function(i,o){var l=s.globals.seriesYAxisReverseMap[o];if(s.config.yaxis[l]&&t.w.config.yaxis[l].logarithmic){var c,u=-Number.MAX_VALUE,h=Number.MIN_VALUE;return a.seriesLog.forEach(function(f,g){f.forEach(function(x){s.config.yaxis[g]&&s.config.yaxis[g].logarithmic&&(u=Math.max(x,u),h=Math.min(x,h))})}),c=Math.pow(a.yRange[o],Math.abs(h-u)/a.yRange[o]),a.yLogRatio[o]=c/a.gridHeight,c}}),a.invalidLogScale?e.slice():a.yLogRatio}},{key:"drawSeriesByGroup",value:function(e,t,s,a){var i=this.w,o=[];return e.series.length>0&&t.forEach(function(l){var c=[],u=[];e.i.forEach(function(h,f){i.config.series[h].group===l&&(c.push(e.series[f]),u.push(h))}),c.length>0&&o.push(a.draw(c,s,u))}),o}}],[{key:"checkComboSeries",value:function(e,t){var s=!1,a=0,i=0;return t===void 0&&(t="line"),e.length&&e[0].type!==void 0&&e.forEach(function(o){o.type!=="bar"&&o.type!=="column"&&o.type!=="candlestick"&&o.type!=="boxPlot"||a++,o.type!==void 0&&o.type!==t&&i++}),i>0&&(s=!0),{comboBarCount:a,comboCharts:s}}},{key:"extendArrayProps",value:function(e,t,s){var a,i,o,l,c,u;return(a=t)!==null&&a!==void 0&&a.yaxis&&(t=e.extendYAxis(t,s)),(i=t)!==null&&i!==void 0&&i.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),(o=t)!==null&&o!==void 0&&(l=o.annotations)!==null&&l!==void 0&&l.xaxis&&(t=e.extendXAxisAnnotations(t)),(c=t)!==null&&c!==void 0&&(u=c.annotations)!==null&&u!==void 0&&u.points&&(t=e.extendPointAnnotations(t))),t}}]),r}(),uy=function(){function r(e){ct(this,r),this.w=e.w,this.annoCtx=e}return dt(r,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=this.w;if(e.label.orientation==="vertical"){var a=t!==null?t:0,i=s.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(a,"']"));if(i!==null){var o=i.getBoundingClientRect();i.setAttribute("x",parseFloat(i.getAttribute("x"))-o.height+4);var l=e.label.position==="top"?o.width:-o.width;i.setAttribute("y",parseFloat(i.getAttribute("y"))+l);var c=this.annoCtx.graphics.rotateAroundCenter(i),u=c.x,h=c.y;i.setAttribute("transform","rotate(-90 ".concat(u," ").concat(h,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var s=this.w;if(!e||!t.label.text||!String(t.label.text).trim())return null;var a=s.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),i=e.getBoundingClientRect(),o=t.label.style.padding,l=o.left,c=o.right,u=o.top,h=o.bottom;if(t.label.orientation==="vertical"){var f=[l,c,u,h];u=f[0],h=f[1],l=f[2],c=f[3]}var g=i.left-a.left-l,x=i.top-a.top-u,y=this.annoCtx.graphics.drawRect(g-s.globals.barPadForNumericAxis,x,i.width+l+c,i.height+u+h,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&y.node.classList.add(t.id),y}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,s=function(a,i,o){var l=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-annotations .apexcharts-").concat(o,"-annotation-label[rel='").concat(i,"']"));if(l){var c=l.parentNode,u=e.addBackgroundToAnno(l,a);u&&(c.insertBefore(u.node,l),a.label.mouseEnter&&u.node.addEventListener("mouseenter",a.label.mouseEnter.bind(e,a)),a.label.mouseLeave&&u.node.addEventListener("mouseleave",a.label.mouseLeave.bind(e,a)),a.label.click&&u.node.addEventListener("click",a.label.click.bind(e,a)))}};t.config.annotations.xaxis.forEach(function(a,i){return s(a,i,"xaxis")}),t.config.annotations.yaxis.forEach(function(a,i){return s(a,i,"yaxis")}),t.config.annotations.points.forEach(function(a,i){return s(a,i,"point")})}},{key:"getY1Y2",value:function(e,t){var s,a=this.w,i=e==="y1"?t.y:t.y2,o=!1;if(this.annoCtx.invertAxis){var l=a.config.xaxis.convertedCatToNumeric?a.globals.categoryLabels:a.globals.labels,c=l.indexOf(i),u=a.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(c+1,")"));s=u?parseFloat(u.getAttribute("y")):(a.globals.gridHeight/l.length-1)*(c+1)-a.globals.barHeight,t.seriesIndex!==void 0&&a.globals.barHeight&&(s-=a.globals.barHeight/2*(a.globals.series.length-1)-a.globals.barHeight*t.seriesIndex)}else{var h,f=a.globals.seriesYAxisMap[t.yAxisIndex][0],g=a.config.yaxis[t.yAxisIndex].logarithmic?new wr(this.annoCtx.ctx).getLogVal(a.config.yaxis[t.yAxisIndex].logBase,i,f)/a.globals.yLogRatio[f]:(i-a.globals.minYArr[f])/(a.globals.yRange[f]/a.globals.gridHeight);s=a.globals.gridHeight-Math.min(Math.max(g,0),a.globals.gridHeight),o=g>a.globals.gridHeight||g<0,!t.marker||t.y!==void 0&&t.y!==null||(s=0),(h=a.config.yaxis[t.yAxisIndex])!==null&&h!==void 0&&h.reversed&&(s=g)}return typeof i=="string"&&i.includes("px")&&(s=parseFloat(i)),{yP:s,clipped:o}}},{key:"getX1X2",value:function(e,t){var s=this.w,a=e==="x1"?t.x:t.x2,i=this.annoCtx.invertAxis?s.globals.minY:s.globals.minX,o=this.annoCtx.invertAxis?s.globals.maxY:s.globals.maxX,l=this.annoCtx.invertAxis?s.globals.yRange[0]:s.globals.xRange,c=!1,u=this.annoCtx.inversedReversedAxis?(o-a)/(l/s.globals.gridWidth):(a-i)/(l/s.globals.gridWidth);return s.config.xaxis.type!=="category"&&!s.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||s.globals.dataFormatXNumeric||s.config.chart.sparkline.enabled||(u=this.getStringX(a)),typeof a=="string"&&a.includes("px")&&(u=parseFloat(a)),a==null&&t.marker&&(u=s.globals.gridWidth),t.seriesIndex!==void 0&&s.globals.barWidth&&!this.annoCtx.invertAxis&&(u-=s.globals.barWidth/2*(s.globals.series.length-1)-s.globals.barWidth*t.seriesIndex),typeof u!="number"&&(u=0,c=!0),parseFloat(u.toFixed(10))>parseFloat(s.globals.gridWidth.toFixed(10))?(u=s.globals.gridWidth,c=!0):u<0&&(u=0,c=!0),{x:u,clipped:c}}},{key:"getStringX",value:function(e){var t=this.w,s=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var a=t.globals.labels.map(function(o){return Array.isArray(o)?o.join(" "):o}).indexOf(e),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(a+1,")"));return i&&(s=parseFloat(i.getAttribute("x"))),s}}]),r}(),Gce=function(){function r(e){ct(this,r),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new uy(this.annoCtx)}return dt(r,[{key:"addXaxisAnnotation",value:function(e,t,s){var a,i=this.w,o=this.helpers.getX1X2("x1",e),l=o.x,c=o.clipped,u=!0,h=e.label.text,f=e.strokeDashArray;if(ne.isNumber(l)){if(e.x2===null||e.x2===void 0){if(!c){var g=this.annoCtx.graphics.drawLine(l+e.offsetX,0+e.offsetY,l+e.offsetX,i.globals.gridHeight+e.offsetY,e.borderColor,f,e.borderWidth);t.appendChild(g.node),e.id&&g.node.classList.add(e.id)}}else{var x=this.helpers.getX1X2("x2",e);if(a=x.x,u=x.clipped,a<l){var y=l;l=a,a=y}var b=this.annoCtx.graphics.drawRect(l+e.offsetX,0+e.offsetY,a-l,i.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,f);b.node.classList.add("apexcharts-annotation-rect"),b.attr("clip-path","url(#gridRectMask".concat(i.globals.cuid,")")),t.appendChild(b.node),e.id&&b.node.classList.add(e.id)}if(!c||!u){var v=this.annoCtx.graphics.getTextRects(h,parseFloat(e.label.style.fontSize)),N=e.label.position==="top"?4:e.label.position==="center"?i.globals.gridHeight/2+(e.label.orientation==="vertical"?v.width/2:0):i.globals.gridHeight,k=this.annoCtx.graphics.drawText({x:l+e.label.offsetX,y:N+e.label.offsetY-(e.label.orientation==="vertical"?e.label.position==="top"?v.width/2-12:-v.width/2:0),text:h,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});k.attr({rel:s}),t.appendChild(k.node),this.annoCtx.helpers.setOrientations(e,s)}}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,s=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map(function(a,i){e.addXaxisAnnotation(a,s.node,i)}),s}}]),r}(),ma=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return dt(r,[{key:"isValidDate",value:function(e){return typeof e!="number"&&!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var s=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return s=this.getTimeStamp(s)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var s=this.w.globals.locale,a=this.w.config.xaxis.labels.datetimeUTC,i=["\0"].concat(Gr(s.months)),o=[""].concat(Gr(s.shortMonths)),l=[""].concat(Gr(s.days)),c=[""].concat(Gr(s.shortDays));function u(T,D){var L=T+"";for(D=D||2;L.length<D;)L="0"+L;return L}var h=a?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+h)).replace(/(^|[^\\])yy/g,"$1"+h.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+h);var f=(a?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+i[0])).replace(/(^|[^\\])MMM/g,"$1"+o[0])).replace(/(^|[^\\])MM/g,"$1"+u(f))).replace(/(^|[^\\])M/g,"$1"+f);var g=a?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+l[0])).replace(/(^|[^\\])ddd/g,"$1"+c[0])).replace(/(^|[^\\])dd/g,"$1"+u(g))).replace(/(^|[^\\])d/g,"$1"+g);var x=a?e.getUTCHours():e.getHours(),y=x>12?x-12:x===0?12:x;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+u(x))).replace(/(^|[^\\])H/g,"$1"+x)).replace(/(^|[^\\])hh+/g,"$1"+u(y))).replace(/(^|[^\\])h/g,"$1"+y);var b=a?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+u(b))).replace(/(^|[^\\])m/g,"$1"+b);var v=a?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+u(v))).replace(/(^|[^\\])s/g,"$1"+v);var N=a?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+u(N,3)),N=Math.round(N/10),t=t.replace(/(^|[^\\])ff/g,"$1"+u(N)),N=Math.round(N/10);var k=x<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+N)).replace(/(^|[^\\])TT+/g,"$1"+k)).replace(/(^|[^\\])T/g,"$1"+k.charAt(0));var A=k.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+A)).replace(/(^|[^\\])t/g,"$1"+A.charAt(0));var R=-e.getTimezoneOffset(),_=a||!R?"Z":R>0?"+":"-";if(!a){var I=(R=Math.abs(R))%60;_+=u(Math.floor(R/60))+":"+u(I)}t=t.replace(/(^|[^\\])K/g,"$1"+_);var P=(a?e.getUTCDay():e.getDay())+1;return t=(t=(t=(t=(t=t.replace(new RegExp(l[0],"g"),l[P])).replace(new RegExp(c[0],"g"),c[P])).replace(new RegExp(i[0],"g"),i[f])).replace(new RegExp(o[0],"g"),o[f])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,s){var a=this.w;a.config.xaxis.min!==void 0&&(e=a.config.xaxis.min),a.config.xaxis.max!==void 0&&(t=a.config.xaxis.max);var i=this.getDate(e),o=this.getDate(t),l=this.formatDate(i,"yyyy MM dd HH mm ss fff").split(" "),c=this.formatDate(o,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(l[6],10),maxMillisecond:parseInt(c[6],10),minSecond:parseInt(l[5],10),maxSecond:parseInt(c[5],10),minMinute:parseInt(l[4],10),maxMinute:parseInt(c[4],10),minHour:parseInt(l[3],10),maxHour:parseInt(c[3],10),minDate:parseInt(l[2],10),maxDate:parseInt(c[2],10),minMonth:parseInt(l[1],10)-1,maxMonth:parseInt(c[1],10)-1,minYear:parseInt(l[0],10),maxYear:parseInt(c[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,s){return this.determineDaysOfMonths(e,t)-s}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,s){var a=this.daysCntOfYear[t]+s;return t>1&&this.isLeapYear()&&a++,a}},{key:"determineDaysOfMonths",value:function(e,t){var s=30;switch(e=ne.monthMod(e),!0){case this.months30.indexOf(e)>-1:e===2&&(s=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:s=31}return s}}]),r}(),Hg=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return dt(r,[{key:"xLabelFormat",value:function(e,t,s,a){var i=this.w;if(i.config.xaxis.type==="datetime"&&i.config.xaxis.labels.formatter===void 0&&i.config.tooltip.x.formatter===void 0){var o=new ma(this.ctx);return o.formatDate(o.getDate(t),i.config.tooltip.x.format)}return e(t,s,a)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map(function(t){return t}):e}},{key:"defaultYFormatter",value:function(e,t,s){var a=this.w;if(ne.isNumber(e))if(a.globals.yValueDecimal!==0)e=e.toFixed(t.decimalsInFloat!==void 0?t.decimalsInFloat:a.globals.yValueDecimal);else{var i=e.toFixed(0);e=e==i?i:e.toFixed(1)}return e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(s){return e.defaultGeneralFormatter(s)},t.globals.ttKeyFormatter=function(s){return e.defaultGeneralFormatter(s)},t.globals.ttZFormatter=function(s){return s},t.globals.legendFormatter=function(s){return e.defaultGeneralFormatter(s)},t.config.xaxis.labels.formatter!==void 0?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(s){if(ne.isNumber(s)){if(!t.config.xaxis.convertedCatToNumeric&&t.config.xaxis.type==="numeric"){if(ne.isNumber(t.config.xaxis.decimalsInFloat))return s.toFixed(t.config.xaxis.decimalsInFloat);var a=t.globals.maxX-t.globals.minX;return a>0&&a<100?s.toFixed(1):s.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?s.toFixed(1):s.toFixed(0)}return s},typeof t.config.tooltip.x.formatter=="function"?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,typeof t.config.xaxis.tooltip.formatter=="function"&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||t.config.tooltip.y.formatter!==void 0)&&(t.globals.ttVal=t.config.tooltip.y),t.config.tooltip.z.formatter!==void 0&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),t.config.legend.formatter!==void 0&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach(function(s,a){s.labels.formatter!==void 0?t.globals.yLabelFormatters[a]=s.labels.formatter:t.globals.yLabelFormatters[a]=function(i){return t.globals.xyCharts?Array.isArray(i)?i.map(function(o){return e.defaultYFormatter(o,s,a)}):e.defaultYFormatter(i,s,a):i}}),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if(e.config.chart.type==="heatmap"){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce(function(s,a){return s.length>a.length?s:a},0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),r}(),Yl=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"getLabel",value:function(e,t,s,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",l=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],c=this.w,u=e[a]===void 0?"":e[a],h=u,f=c.globals.xLabelFormatter,g=c.config.xaxis.labels.formatter,x=!1,y=new Hg(this.ctx),b=u;l&&(h=y.xLabelFormat(f,u,b,{i:a,dateFormatter:new ma(this.ctx).formatDate,w:c}),g!==void 0&&(h=g(u,e[a],{i:a,dateFormatter:new ma(this.ctx).formatDate,w:c})));var v,N;t.length>0?(v=t[a].unit,N=null,t.forEach(function(_){_.unit==="month"?N="year":_.unit==="day"?N="month":_.unit==="hour"?N="day":_.unit==="minute"&&(N="hour")}),x=N===v,s=t[a].position,h=t[a].value):c.config.xaxis.type==="datetime"&&g===void 0&&(h=""),h===void 0&&(h=""),h=Array.isArray(h)?h:h.toString();var k=new Be(this.ctx),A={};A=c.globals.rotateXLabels&&l?k.getTextRects(h,parseInt(o,10),null,"rotate(".concat(c.config.xaxis.labels.rotate," 0 0)"),!1):k.getTextRects(h,parseInt(o,10));var R=!c.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(h)&&(String(h)==="NaN"||i.indexOf(h)>=0&&R)&&(h=""),{x:s,text:h,textRect:A,isBold:x}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,s){var a=this.w,i=a.config.xaxis.tickAmount;return i==="dataPoints"&&(i=Math.round(a.globals.gridWidth/120)),i>s||e%Math.round(s/(i+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,s,a,i){var o=this.w;if(e===0&&o.globals.skipFirstTimelinelabel&&(t.text=""),e===s-1&&o.globals.skipLastTimelinelabel&&(t.text=""),o.config.xaxis.labels.hideOverlappingLabels&&a.length>0){var l=i[i.length-1];if(o.config.xaxis.labels.trim&&o.config.xaxis.type!=="datetime")return t;t.x<l.textRect.width/(o.globals.rotateXLabels?Math.abs(o.config.xaxis.labels.rotate)/12:1.01)+l.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var s=this.w;return s.config.yaxis[e]&&s.config.yaxis[e].reversed&&t.reverse(),t}},{key:"yAxisAllSeriesCollapsed",value:function(e){var t=this.w.globals;return!t.seriesYAxisMap[e].some(function(s){return t.collapsedSeriesIndices.indexOf(s)===-1})}},{key:"translateYAxisIndex",value:function(e){var t=this.w,s=t.globals,a=t.config.yaxis;return s.series.length>a.length||a.some(function(i){return Array.isArray(i.seriesName)})?e:s.seriesYAxisReverseMap[e]}},{key:"isYAxisHidden",value:function(e){var t=this.w,s=t.config.yaxis[e];if(!s.show||this.yAxisAllSeriesCollapsed(e))return!0;if(!s.showForNullSeries){var a=t.globals.seriesYAxisMap[e],i=new wr(this.ctx);return a.every(function(o){return i.isSeriesNull(o)})}return!1}},{key:"getYAxisForeColor",value:function(e,t){var s=this.w;return Array.isArray(e)&&s.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,s.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,s,a,i,o,l){var c=this.w,u=new Be(this.ctx),h=c.globals.translateY+c.config.yaxis[i].labels.offsetY;if(c.globals.isBarHorizontal?h=0:c.config.chart.type==="heatmap"&&(h+=o/2),a.show&&t>0){c.config.yaxis[i].opposite===!0&&(e+=a.width);for(var f=t;f>=0;f--){var g=u.drawLine(e+s.offsetX-a.width+a.offsetX,h+a.offsetY,e+s.offsetX+a.offsetX,h+a.offsetY,a.color);l.add(g),h+=o}}}}]),r}(),Kce=function(){function r(e){ct(this,r),this.w=e.w,this.annoCtx=e,this.helpers=new uy(this.annoCtx),this.axesUtils=new Yl(this.annoCtx)}return dt(r,[{key:"addYaxisAnnotation",value:function(e,t,s){var a,i=this.w,o=e.strokeDashArray,l=this.helpers.getY1Y2("y1",e),c=l.yP,u=l.clipped,h=!0,f=!1,g=e.label.text;if(e.y2===null||e.y2===void 0){if(!u){f=!0;var x=this.annoCtx.graphics.drawLine(0+e.offsetX,c+e.offsetY,this._getYAxisAnnotationWidth(e),c+e.offsetY,e.borderColor,o,e.borderWidth);t.appendChild(x.node),e.id&&x.node.classList.add(e.id)}}else{if(a=(l=this.helpers.getY1Y2("y2",e)).yP,h=l.clipped,a>c){var y=c;c=a,a=y}if(!u||!h){f=!0;var b=this.annoCtx.graphics.drawRect(0+e.offsetX,a+e.offsetY,this._getYAxisAnnotationWidth(e),c-a,0,e.fillColor,e.opacity,1,e.borderColor,o);b.node.classList.add("apexcharts-annotation-rect"),b.attr("clip-path","url(#gridRectMask".concat(i.globals.cuid,")")),t.appendChild(b.node),e.id&&b.node.classList.add(e.id)}}if(f){var v=e.label.position==="right"?i.globals.gridWidth:e.label.position==="center"?i.globals.gridWidth/2:0,N=this.annoCtx.graphics.drawText({x:v+e.label.offsetX,y:(a??c)+e.label.offsetY-3,text:g,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});N.attr({rel:s}),t.appendChild(N.node)}}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,s=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.forEach(function(a,i){a.yAxisIndex=e.axesUtils.translateYAxisIndex(a.yAxisIndex),e.axesUtils.isYAxisHidden(a.yAxisIndex)&&e.axesUtils.yAxisAllSeriesCollapsed(a.yAxisIndex)||e.addYaxisAnnotation(a,s.node,i)}),s}}]),r}(),Qce=function(){function r(e){ct(this,r),this.w=e.w,this.annoCtx=e,this.helpers=new uy(this.annoCtx)}return dt(r,[{key:"addPointAnnotation",value:function(e,t,s){if(!(this.w.globals.collapsedSeriesIndices.indexOf(e.seriesIndex)>-1)){var a=this.helpers.getX1X2("x1",e),i=a.x,o=a.clipped,l=(a=this.helpers.getY1Y2("y1",e)).yP,c=a.clipped;if(ne.isNumber(i)&&!c&&!o){var u={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},h=this.annoCtx.graphics.drawMarker(i+e.marker.offsetX,l+e.marker.offsetY,u);t.appendChild(h.node);var f=e.label.text?e.label.text:"",g=this.annoCtx.graphics.drawText({x:i+e.label.offsetX,y:l+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:f,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(g.attr({rel:s}),t.appendChild(g.node),e.customSVG.SVG){var x=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});x.attr({transform:"translate(".concat(i+e.customSVG.offsetX,", ").concat(l+e.customSVG.offsetY,")")}),x.node.innerHTML=e.customSVG.SVG,t.appendChild(x.node)}if(e.image.path){var y=e.image.width?e.image.width:20,b=e.image.height?e.image.height:20;h=this.annoCtx.addImage({x:i+e.image.offsetX-y/2,y:l+e.image.offsetY-b/2,width:y,height:b,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&h.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&h.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&h.node.addEventListener("click",e.click.bind(this,e))}}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,s=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map(function(a,i){e.addPointAnnotation(a,s.node,i)}),s}}]),r}(),QL={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Uc=function(){function r(){ct(this,r),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return dt(r,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[QL],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,injectStyleSheet:!0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},parsing:{x:void 0,y:void 0},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0},seriesTitle:{show:!0,offsetY:1,offsetX:1,borderColor:"#000",borderWidth:1,borderRadius:2,style:{background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"12px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:6,right:6,top:2,bottom:2}}}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,s){return t+s},0)/e.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(e){return e},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(t,s){return t+s},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return e!==null?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",backgroundColor:void 0,borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],clusterGroupedSeries:!0,clusterGroupedSeriesOrientation:"vertical",labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),r}(),Zce=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.graphics=new Be(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new uy(this),this.xAxisAnnotations=new Gce(this),this.yAxisAnnotations=new Kce(this),this.pointsAnnotations=new Qce(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return dt(r,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts&&e.globals.dataPoints){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),s=this.xAxisAnnotations.drawXAxisAnnotations(),a=this.pointsAnnotations.drawPointAnnotations(),i=e.config.chart.animations.enabled,o=[t,s,a],l=[s.node,t.node,a.node],c=0;c<3;c++)e.globals.dom.elGraphical.add(o[c]),!i||e.globals.resized||e.globals.dataChanged||e.config.chart.type!=="scatter"&&e.config.chart.type!=="bubble"&&e.globals.dataPoints>1&&l[c].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:l[c],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map(function(t,s){e.addImage(t,s)})}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map(function(t,s){e.addText(t,s)})}},{key:"addXaxisAnnotation",value:function(e,t,s){this.xAxisAnnotations.addXaxisAnnotation(e,t,s)}},{key:"addYaxisAnnotation",value:function(e,t,s){this.yAxisAnnotations.addYaxisAnnotation(e,t,s)}},{key:"addPointAnnotation",value:function(e,t,s){this.pointsAnnotations.addPointAnnotation(e,t,s)}},{key:"addText",value:function(e,t){var s=e.x,a=e.y,i=e.text,o=e.textAnchor,l=e.foreColor,c=e.fontSize,u=e.fontFamily,h=e.fontWeight,f=e.cssClass,g=e.backgroundColor,x=e.borderWidth,y=e.strokeDashArray,b=e.borderRadius,v=e.borderColor,N=e.appendTo,k=N===void 0?".apexcharts-svg":N,A=e.paddingLeft,R=A===void 0?4:A,_=e.paddingRight,I=_===void 0?4:_,P=e.paddingBottom,T=P===void 0?2:P,D=e.paddingTop,L=D===void 0?2:D,F=this.w,z=this.graphics.drawText({x:s,y:a,text:i,textAnchor:o||"start",fontSize:c||"12px",fontWeight:h||"regular",fontFamily:u||F.config.chart.fontFamily,foreColor:l||F.config.chart.foreColor,cssClass:f}),O=F.globals.dom.baseEl.querySelector(k);O&&O.appendChild(z.node);var V=z.bbox();if(i){var Y=this.graphics.drawRect(V.x-R,V.y-L,V.width+R+I,V.height+T+L,b,g||"transparent",1,x,v,y);O.insertBefore(Y.node,z.node)}}},{key:"addImage",value:function(e,t){var s=this.w,a=e.path,i=e.x,o=i===void 0?0:i,l=e.y,c=l===void 0?0:l,u=e.width,h=u===void 0?20:u,f=e.height,g=f===void 0?20:f,x=e.appendTo,y=x===void 0?".apexcharts-svg":x,b=s.globals.dom.Paper.image(a);b.size(h,g).move(o,c);var v=s.globals.dom.baseEl.querySelector(y);return v&&v.appendChild(b.node),b}},{key:"addXaxisAnnotationExternal",value:function(e,t,s){return this.addAnnotationExternal({params:e,pushToMemory:t,context:s,type:"xaxis",contextMethod:s.addXaxisAnnotation}),s}},{key:"addYaxisAnnotationExternal",value:function(e,t,s){return this.addAnnotationExternal({params:e,pushToMemory:t,context:s,type:"yaxis",contextMethod:s.addYaxisAnnotation}),s}},{key:"addPointAnnotationExternal",value:function(e,t,s){return this.invertAxis===void 0&&(this.invertAxis=s.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:s,type:"point",contextMethod:s.addPointAnnotation}),s}},{key:"addAnnotationExternal",value:function(e){var t=e.params,s=e.pushToMemory,a=e.context,i=e.type,o=e.contextMethod,l=a,c=l.w,u=c.globals.dom.baseEl.querySelector(".apexcharts-".concat(i,"-annotations")),h=u.childNodes.length+1,f=new Uc,g=Object.assign({},i==="xaxis"?f.xAxisAnnotation:i==="yaxis"?f.yAxisAnnotation:f.pointAnnotation),x=ne.extend(g,t);switch(i){case"xaxis":this.addXaxisAnnotation(x,u,h);break;case"yaxis":this.addYaxisAnnotation(x,u,h);break;case"point":this.addPointAnnotation(x,u,h)}var y=c.globals.dom.baseEl.querySelector(".apexcharts-".concat(i,"-annotations .apexcharts-").concat(i,"-annotation-label[rel='").concat(h,"']")),b=this.helpers.addBackgroundToAnno(y,x);return b&&u.insertBefore(b.node,y),s&&c.globals.memory.methodsToExec.push({context:l,id:x.id?x.id:ne.randomId(),method:o,label:"addAnnotation",params:t}),a}},{key:"clearAnnotations",value:function(e){for(var t=e.w,s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),a=t.globals.memory.methodsToExec.length-1;a>=0;a--)t.globals.memory.methodsToExec[a].label!=="addText"&&t.globals.memory.methodsToExec[a].label!=="addAnnotation"||t.globals.memory.methodsToExec.splice(a,1);s=ne.listToArray(s),Array.prototype.forEach.call(s,function(i){for(;i.firstChild;)i.removeChild(i.firstChild)})}},{key:"removeAnnotation",value:function(e,t){var s=e.w,a=s.globals.dom.baseEl.querySelectorAll(".".concat(t));a&&(s.globals.memory.methodsToExec.map(function(i,o){i.id===t&&s.globals.memory.methodsToExec.splice(o,1)}),Object.keys(s.config.annotations).forEach(function(i){var o=s.config.annotations[i];Array.isArray(o)&&(s.config.annotations[i]=o.filter(function(l){return l.id!==t}))}),Array.prototype.forEach.call(a,function(i){i.parentElement.removeChild(i)}))}}]),r}(),A1=function(r){var e,t=r.isTimeline,s=r.ctx,a=r.seriesIndex,i=r.dataPointIndex,o=r.y1,l=r.y2,c=r.w,u=c.globals.seriesRangeStart[a][i],h=c.globals.seriesRangeEnd[a][i],f=c.globals.labels[i],g=c.config.series[a].name?c.config.series[a].name:"",x=c.globals.ttKeyFormatter,y=c.config.tooltip.y.title.formatter,b={w:c,seriesIndex:a,dataPointIndex:i,start:u,end:h};typeof y=="function"&&(g=y(g,b)),(e=c.config.series[a].data[i])!==null&&e!==void 0&&e.x&&(f=c.config.series[a].data[i].x),t||c.config.xaxis.type==="datetime"&&(f=new Hg(s).xLabelFormat(c.globals.ttKeyFormatter,f,f,{i:void 0,dateFormatter:new ma(s).formatDate,w:c})),typeof x=="function"&&(f=x(f,b)),Number.isFinite(o)&&Number.isFinite(l)&&(u=o,h=l);var v="",N="",k=c.globals.colors[a];if(c.config.tooltip.x.formatter===void 0)if(c.config.xaxis.type==="datetime"){var A=new ma(s);v=A.formatDate(A.getDate(u),c.config.tooltip.x.format),N=A.formatDate(A.getDate(h),c.config.tooltip.x.format)}else v=u,N=h;else v=c.config.tooltip.x.formatter(u),N=c.config.tooltip.x.formatter(h);return{start:u,end:h,startVal:v,endVal:N,ylabel:f,color:k,seriesName:g}},C1=function(r){var e=r.color,t=r.seriesName,s=r.ylabel,a=r.start,i=r.end,o=r.seriesIndex,l=r.dataPointIndex,c=r.ctx.tooltip.tooltipLabels.getFormatters(o);a=c.yLbFormatter(a),i=c.yLbFormatter(i);var u=c.yLbFormatter(r.w.globals.series[o][l]),h=`<span class="value start-value">
  `.concat(a,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(i,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(t||"")+'</span></div><div> <span class="category">'+s+": </span> "+(r.w.globals.comboCharts?r.w.config.series[o].type==="rangeArea"||r.w.config.series[o].type==="rangeBar"?h:"<span>".concat(u,"</span>"):h)+" </div></div>"},ng=function(){function r(e){ct(this,r),this.opts=e}return dt(r,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.hideYAxis(),ne.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(e,t){var s=t.w.config.series[t.seriesIndex].name;return e!==null?s+": "+e:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),et(et({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var s=t.seriesIndex,a=t.dataPointIndex,i=t.w;return e._getBoxTooltip(i,s,a,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var s=t.seriesIndex,a=t.dataPointIndex,i=t.w;return e._getBoxTooltip(i,s,a,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var s=t.seriesIndex,a=t.dataPointIndex,i=t.w,o=function(){var l=i.globals.seriesRangeStart[s][a];return i.globals.seriesRangeEnd[s][a]-l};return i.globals.comboCharts?i.config.series[s].type==="rangeBar"||i.config.series[s].type==="rangeArea"?o():e:o()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(t){var s=A1(et(et({},t),{},{isTimeline:!0})),a=s.color,i=s.seriesName,o=s.ylabel,l=s.startVal,c=s.endVal;return C1(et(et({},t),{},{color:a,seriesName:i,ylabel:o,start:l,end:c}))}(e):function(t){var s=A1(t),a=s.color,i=s.seriesName,o=s.ylabel,l=s.start,c=s.end;return C1(et(et({},t),{},{color:a,seriesName:i,ylabel:o,start:l,end:c}))}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(e){var t,s;return(t=e.plotOptions.bar)!==null&&t!==void 0&&t.barHeight||(e.plotOptions.bar.barHeight=2),(s=e.plotOptions.bar)!==null&&s!==void 0&&s.columnWidth||(e.plotOptions.bar.columnWidth=2),e}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return function(t){var s=A1(t),a=s.color,i=s.seriesName,o=s.ylabel,l=s.start,c=s.end;return C1(et(et({},t),{},{color:a,seriesName:i,ylabel:o,start:l,end:c}))}(e)}}}}},{key:"brush",value:function(e){return ne.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach(function(s,a){e.yaxis[a].min=0,e.yaxis[a].max=100}),e.chart.type==="bar"&&(e.dataLabels.formatter=t||function(s){return typeof s=="number"&&s?s.toFixed(0)+"%":s}),e}},{key:"stackedBars",value:function(){var e=this.bar();return et(et({},e),{},{plotOptions:et(et({},e.plotOptions),{},{bar:et(et({},e.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,s){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(o){return ne.isNumber(o)?Math.floor(o):o};var a=e.xaxis.labels.formatter,i=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return s&&s.length&&(i=s.map(function(o){return Array.isArray(o)?o:String(o)})),i&&i.length&&(e.xaxis.labels.formatter=function(o){return ne.isNumber(o)?a(i[Math.floor(o)-1]):a(o)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(e,t,s,a,i){var o=e.globals.seriesCandleO[t][s],l=e.globals.seriesCandleH[t][s],c=e.globals.seriesCandleM[t][s],u=e.globals.seriesCandleL[t][s],h=e.globals.seriesCandleC[t][s];return e.config.series[t].type&&e.config.series[t].type!==i?`<div class="apexcharts-custom-tooltip">
          `.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][s],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(a[0],': <span class="value">')+o+"</span></div>"+"<div>".concat(a[1],': <span class="value">')+l+"</span></div>"+(c?"<div>".concat(a[2],': <span class="value">')+c+"</span></div>":"")+"<div>".concat(a[3],': <span class="value">')+u+"</span></div>"+"<div>".concat(a[4],': <span class="value">')+h+"</span></div></div>"}}]),r}(),ig=function(){function r(e){ct(this,r),this.opts=e}return dt(r,[{key:"init",value:function(e){var t=e.responsiveOverride,s=this.opts,a=new Uc,i=new ng(s);this.chartType=s.chart.type,s=this.extendYAxis(s),s=this.extendAnnotations(s);var o=a.init(),l={};if(s&&Da(s)==="object"){var c,u,h,f,g,x,y,b,v,N,k={};k=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(s.chart.type)!==-1?i[s.chart.type]():i.line(),(c=s.plotOptions)!==null&&c!==void 0&&(u=c.bar)!==null&&u!==void 0&&u.isFunnel&&(k=i.funnel()),s.chart.stacked&&s.chart.type==="bar"&&(k=i.stackedBars()),(h=s.chart.brush)!==null&&h!==void 0&&h.enabled&&(k=i.brush(k)),(f=s.plotOptions)!==null&&f!==void 0&&(g=f.line)!==null&&g!==void 0&&g.isSlopeChart&&(k=i.slope()),s.chart.stacked&&s.chart.stackType==="100%"&&(s=i.stacked100(s)),(x=s.plotOptions)!==null&&x!==void 0&&(y=x.bar)!==null&&y!==void 0&&y.isDumbbell&&(s=i.dumbbell(s)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(s),s.xaxis=s.xaxis||window.Apex.xaxis||{},t||(s.xaxis.convertedCatToNumeric=!1),((b=(s=this.checkForCatToNumericXAxis(this.chartType,k,s)).chart.sparkline)!==null&&b!==void 0&&b.enabled||(v=window.Apex.chart)!==null&&v!==void 0&&(N=v.sparkline)!==null&&N!==void 0&&N.enabled)&&(k=i.sparkline(k)),l=ne.extend(o,k)}var A=ne.extend(l,window.Apex);return o=ne.extend(A,s),o=this.handleUserInputErrors(o)}},{key:"checkForCatToNumericXAxis",value:function(e,t,s){var a,i,o=new ng(s),l=(e==="bar"||e==="boxPlot")&&((a=s.plotOptions)===null||a===void 0||(i=a.bar)===null||i===void 0?void 0:i.horizontal),c=e==="pie"||e==="polarArea"||e==="donut"||e==="radar"||e==="radialBar"||e==="heatmap",u=s.xaxis.type!=="datetime"&&s.xaxis.type!=="numeric",h=s.xaxis.tickPlacement?s.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return l||c||!u||h==="between"||(s=o.convertCatToNumeric(s)),s}},{key:"extendYAxis",value:function(e,t){var s=new Uc;(e.yaxis===void 0||!e.yaxis||Array.isArray(e.yaxis)&&e.yaxis.length===0)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=ne.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[ne.extend(s.yAxis,e.yaxis)]:e.yaxis=ne.extendArray(e.yaxis,s.yAxis);var a=!1;e.yaxis.forEach(function(o){o.logarithmic&&(a=!0)});var i=e.series;return t&&!i&&(i=t.config.series),a&&i.length!==e.yaxis.length&&i.length&&(e.yaxis=i.map(function(o,l){if(o.name||(i[l].name="series-".concat(l+1)),e.yaxis[l])return e.yaxis[l].seriesName=i[l].name,e.yaxis[l];var c=ne.extend(s.yAxis,e.yaxis[0]);return c.show=!1,c})),a&&i.length>1&&i.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),e}},{key:"extendAnnotations",value:function(e){return e.annotations===void 0&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),e=this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new Uc;return e.annotations.yaxis=ne.extendArray(e.annotations.yaxis!==void 0?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new Uc;return e.annotations.xaxis=ne.extendArray(e.annotations.xaxis!==void 0?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new Uc;return e.annotations.points=ne.extendArray(e.annotations.points!==void 0?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&e.theme.mode==="dark"&&(e.tooltip||(e.tooltip={}),e.tooltip.theme!=="light"&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(t.chart.type==="bar"&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return t.chart.type!=="bar"&&t.chart.type!=="rangeBar"||t.tooltip.shared&&t.xaxis.crosshairs.width==="barWidth"&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),t.chart.type!=="candlestick"&&t.chart.type!=="boxPlot"||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),r}(),ZL=function(){function r(){ct(this,r)}return dt(r,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.dataWasParsed=!1,e.originalSeries=null,e.labels=[],e.hasXaxisGroups=!1,e.groups=[],e.barGroups=[],e.lineGroups=[],e.areaGroups=[],e.hasSeriesGroups=!1,e.seriesGroups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.lastWheelExecution=0,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0,e.multiAxisTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:e.chart.toolbar.autoSelected==="zoom"&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:e.chart.toolbar.autoSelected==="pan"&&e.chart.toolbar.tools.pan,selectionEnabled:e.chart.toolbar.autoSelected==="selection"&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:e.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=ne.extend({},e),t.initialSeries=ne.clone(e.series),t.lastXAxis=ne.clone(t.initialConfig.xaxis),t.lastYAxis=ne.clone(t.initialConfig.yaxis),t}}]),r}(),Jce=function(){function r(e){ct(this,r),this.opts=e}return dt(r,[{key:"init",value:function(){var e=new ig(this.opts).init({responsiveOverride:!1});return{config:e,globals:new ZL().init(e)}}}]),r}(),ri=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return dt(r,[{key:"clippedImgArea",value:function(e){var t=this.w,s=t.config,a=parseInt(t.globals.gridWidth,10),i=parseInt(t.globals.gridHeight,10),o=a>i?a:i,l=e.image,c=0,u=0;e.width===void 0&&e.height===void 0?s.fill.image.width!==void 0&&s.fill.image.height!==void 0?(c=s.fill.image.width+1,u=s.fill.image.height):(c=o+1,u=o):(c=e.width,u=e.height);var h=document.createElementNS(t.globals.SVGNS,"pattern");Be.setAttrs(h,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:c+"px",height:u+"px"});var f=document.createElementNS(t.globals.SVGNS,"image");h.appendChild(f),f.setAttributeNS(window.SVG.xlink,"href",l),Be.setAttrs(f,{x:0,y:0,preserveAspectRatio:"none",width:c+"px",height:u+"px"}),f.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(h)}},{key:"getSeriesIndex",value:function(e){var t=this.w,s=t.config.chart.type;return(s==="bar"||s==="rangeBar")&&t.config.plotOptions.bar.distributed||s==="heatmap"||s==="treemap"?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(e,t){var s,a=this.w,i=null,o=null,l=sf(e);try{for(l.s();!(s=l.n()).done;){var c=s.value;c>=t.threshold?(i===null||c>i)&&(i=c):(o===null||c<o)&&(o=c)}}catch(f){l.e(f)}finally{l.f()}i===null&&(i=t.threshold),o===null&&(o=t.threshold);var u=i-t.threshold+(t.threshold-o);u===0&&(u=1);var h=100-(t.threshold-o)/u*100;return[{offset:h=Math.max(0,Math.min(h,100)),color:t.colorAboveThreshold,opacity:a.config.fill.opacity},{offset:0,color:t.colorBelowThreshold,opacity:a.config.fill.opacity}]}},{key:"fillPath",value:function(e){var t,s,a,i=this.w;this.opts=e;var o,l,c,u=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var h=u.plotOptions.line.colors.colorAboveThreshold&&u.plotOptions.line.colors.colorBelowThreshold,f=this.getFillColors()[this.seriesIndex];i.globals.seriesColors[this.seriesIndex]!==void 0&&(f=i.globals.seriesColors[this.seriesIndex]),typeof f=="function"&&(f=f({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:i}));var g,x,y,b=e.fillType?e.fillType:this.getFillType(this.seriesIndex),v=Array.isArray(u.fill.opacity)?u.fill.opacity[this.seriesIndex]:u.fill.opacity,N=b==="gradient"||h;e.color&&(f=e.color),(t=i.config.series[this.seriesIndex])!==null&&t!==void 0&&(s=t.data)!==null&&s!==void 0&&(a=s[e.dataPointIndex])!==null&&a!==void 0&&a.fillColor&&(f=(g=i.config.series[this.seriesIndex])===null||g===void 0||(x=g.data)===null||x===void 0||(y=x[e.dataPointIndex])===null||y===void 0?void 0:y.fillColor),f||(f="#fff",console.warn("undefined color - ApexCharts"));var k=f;if(f.indexOf("rgb")===-1?f.indexOf("#")===-1?k=f:f.length<9&&(k=ne.hexToRgba(f,v)):f.indexOf("rgba")>-1?v=ne.getOpacityFromRGBA(f):k=ne.hexToRgba(ne.rgb2hex(f),v),e.opacity&&(v=e.opacity),b==="pattern"&&(l=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:l,fillColor:f,fillOpacity:v,defaultColor:k})),N){var A=Gr(u.fill.gradient.colorStops)||[],R=u.fill.gradient.type;h&&(A[this.seriesIndex]=this.computeColorStops(i.globals.series[this.seriesIndex],u.plotOptions.line.colors),R="vertical"),c=this.handleGradientFill({type:R,fillConfig:e.fillConfig,fillColor:f,fillOpacity:v,colorStops:A,i:this.seriesIndex})}if(b==="image"){var _=u.fill.image.src,I=e.patternID?e.patternID:"",P="pattern".concat(i.globals.cuid).concat(e.seriesNumber+1).concat(I);this.patternIDs.indexOf(P)===-1&&(this.clippedImgArea({opacity:v,image:Array.isArray(_)?e.seriesNumber<_.length?_[e.seriesNumber]:_[0]:_,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:P}),this.patternIDs.push(P)),o="url(#".concat(P,")")}else o=N?c:b==="pattern"?l:k;return e.solid&&(o=k),o}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,s=this.opts,a=[];return e.globals.comboCharts?e.config.series[this.seriesIndex].type==="line"?Array.isArray(e.globals.stroke.colors)?a=e.globals.stroke.colors:a.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?a=e.globals.fill.colors:a.push(e.globals.fill.colors):t.chart.type==="line"?Array.isArray(e.globals.stroke.colors)?a=e.globals.stroke.colors:a.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?a=e.globals.fill.colors:a.push(e.globals.fill.colors),s.fillColors!==void 0&&(a=[],Array.isArray(s.fillColors)?a=s.fillColors.slice():a.push(s.fillColors)),a}},{key:"handlePatternFill",value:function(e){var t=e.fillConfig,s=e.patternFill,a=e.fillColor,i=e.fillOpacity,o=e.defaultColor,l=this.w.config.fill;t&&(l=t);var c=this.opts,u=new Be(this.ctx),h=Array.isArray(l.pattern.strokeWidth)?l.pattern.strokeWidth[this.seriesIndex]:l.pattern.strokeWidth,f=a;return Array.isArray(l.pattern.style)?s=l.pattern.style[c.seriesNumber]!==void 0?u.drawPattern(l.pattern.style[c.seriesNumber],l.pattern.width,l.pattern.height,f,h,i):o:s=u.drawPattern(l.pattern.style,l.pattern.width,l.pattern.height,f,h,i),s}},{key:"handleGradientFill",value:function(e){var t=e.type,s=e.fillColor,a=e.fillOpacity,i=e.fillConfig,o=e.colorStops,l=e.i,c=this.w.config.fill;i&&(c=et(et({},c),i));var u=this.opts,h=new Be(this.ctx),f=new ne;t=t||c.gradient.type;var g,x=s,y=c.gradient.opacityFrom===void 0?a:Array.isArray(c.gradient.opacityFrom)?c.gradient.opacityFrom[l]:c.gradient.opacityFrom;x.indexOf("rgba")>-1&&(y=ne.getOpacityFromRGBA(x));var b=c.gradient.opacityTo===void 0?a:Array.isArray(c.gradient.opacityTo)?c.gradient.opacityTo[l]:c.gradient.opacityTo;if(c.gradient.gradientToColors===void 0||c.gradient.gradientToColors.length===0)g=c.gradient.shade==="dark"?f.shadeColor(-1*parseFloat(c.gradient.shadeIntensity),s.indexOf("rgb")>-1?ne.rgb2hex(s):s):f.shadeColor(parseFloat(c.gradient.shadeIntensity),s.indexOf("rgb")>-1?ne.rgb2hex(s):s);else if(c.gradient.gradientToColors[u.seriesNumber]){var v=c.gradient.gradientToColors[u.seriesNumber];g=v,v.indexOf("rgba")>-1&&(b=ne.getOpacityFromRGBA(v))}else g=s;if(c.gradient.gradientFrom&&(x=c.gradient.gradientFrom),c.gradient.gradientTo&&(g=c.gradient.gradientTo),c.gradient.inverseColors){var N=x;x=g,g=N}return x.indexOf("rgb")>-1&&(x=ne.rgb2hex(x)),g.indexOf("rgb")>-1&&(g=ne.rgb2hex(g)),h.drawGradient(t,x,g,y,b,u.size,c.gradient.stops,o,l)}}]),r}(),Ph=function(){function r(e,t){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)e.globals.markers.size[t]===void 0&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map(function(s){return e.config.markers.size})}},{key:"plotChartMarkers",value:function(e){var t=e.pointsPos,s=e.seriesIndex,a=e.j,i=e.pSize,o=e.alwaysDrawMarker,l=o!==void 0&&o,c=e.isVirtualPoint,u=c!==void 0&&c,h=this.w,f=s,g=t,x=null,y=new Be(this.ctx),b=h.config.markers.discrete&&h.config.markers.discrete.length;if(Array.isArray(g.x))for(var v=0;v<g.x.length;v++){var N=void 0,k=a,A=!ne.isNumber(g.y[v]);h.globals.markers.largestSize===0&&h.globals.hasNullValues&&h.globals.series[f][a+1]!==null&&!u&&(A=!0),a===1&&v===0&&(k=0),a===1&&v===1&&(k=1);var R="apexcharts-marker";if(h.config.chart.type!=="line"&&h.config.chart.type!=="area"||h.globals.comboCharts||h.config.tooltip.intersect||(R+=" no-pointer-events"),(Array.isArray(h.config.markers.size)?h.globals.markers.size[s]>0:h.config.markers.size>0)||l||b){A||(R+=" w".concat(ne.randomId()));var _=this.getMarkerConfig({cssClass:R,seriesIndex:s,dataPointIndex:k});h.config.series[f].data[k]&&(h.config.series[f].data[k].fillColor&&(_.pointFillColor=h.config.series[f].data[k].fillColor),h.config.series[f].data[k].strokeColor&&(_.pointStrokeColor=h.config.series[f].data[k].strokeColor)),i!==void 0&&(_.pSize=i),(g.x[v]<-h.globals.markers.largestSize||g.x[v]>h.globals.gridWidth+h.globals.markers.largestSize||g.y[v]<-h.globals.markers.largestSize||g.y[v]>h.globals.gridHeight+h.globals.markers.largestSize)&&(_.pSize=0),!A&&((h.globals.markers.size[s]>0||l||b)&&!x&&(x=y.group({class:l||b?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(h.globals.cuid,")")),(N=y.drawMarker(g.x[v],g.y[v],_)).attr("rel",k),N.attr("j",k),N.attr("index",s),N.node.setAttribute("default-marker-size",_.pSize),new ga(this.ctx).setSelectionFilter(N,s,k),this.addEvents(N),x&&x.add(N))}else h.globals.pointsArray[s]===void 0&&(h.globals.pointsArray[s]=[]),h.globals.pointsArray[s].push([g.x[v],g.y[v]])}return x}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,s=e.seriesIndex,a=e.dataPointIndex,i=a===void 0?null:a,o=e.radius,l=o===void 0?null:o,c=e.size,u=c===void 0?null:c,h=e.strokeWidth,f=h===void 0?null:h,g=this.w,x=this.getMarkerStyle(s),y=u===null?g.globals.markers.size[s]:u,b=g.config.markers;return i!==null&&b.discrete.length&&b.discrete.map(function(v){v.seriesIndex===s&&v.dataPointIndex===i&&(x.pointStrokeColor=v.strokeColor,x.pointFillColor=v.fillColor,y=v.size,x.pointShape=v.shape)}),{pSize:l===null?y:l,pRadius:l!==null?l:b.radius,pointStrokeWidth:f!==null?f:Array.isArray(b.strokeWidth)?b.strokeWidth[s]:b.strokeWidth,pointStrokeColor:x.pointStrokeColor,pointFillColor:x.pointFillColor,shape:x.pointShape||(Array.isArray(b.shape)?b.shape[s]:b.shape),class:t,pointStrokeOpacity:Array.isArray(b.strokeOpacity)?b.strokeOpacity[s]:b.strokeOpacity,pointStrokeDashArray:Array.isArray(b.strokeDashArray)?b.strokeDashArray[s]:b.strokeDashArray,pointFillOpacity:Array.isArray(b.fillOpacity)?b.fillOpacity[s]:b.fillOpacity,seriesIndex:s}}},{key:"addEvents",value:function(e){var t=this.w,s=new Be(this.ctx);e.node.addEventListener("mouseenter",s.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",s.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",s.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",s.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,s=t.globals.markers.colors,a=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(a)?a[e]:a,pointFillColor:Array.isArray(s)?s[e]:s}}}]),r}(),JL=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled}return dt(r,[{key:"draw",value:function(e,t,s){var a=this.w,i=new Be(this.ctx),o=s.realIndex,l=s.pointsPos,c=s.zRatio,u=s.elParent,h=i.group({class:"apexcharts-series-markers apexcharts-series-".concat(a.config.chart.type)});if(h.attr("clip-path","url(#gridRectMarkerMask".concat(a.globals.cuid,")")),Array.isArray(l.x))for(var f=0;f<l.x.length;f++){var g=t+1,x=!0;t===0&&f===0&&(g=0),t===0&&f===1&&(g=1);var y=a.globals.markers.size[o];if(c!==1/0){var b=a.config.plotOptions.bubble;y=a.globals.seriesZ[o][g],b.zScaling&&(y/=c),b.minBubbleRadius&&y<b.minBubbleRadius&&(y=b.minBubbleRadius),b.maxBubbleRadius&&y>b.maxBubbleRadius&&(y=b.maxBubbleRadius)}var v=l.x[f],N=l.y[f];if(y=y||0,N!==null&&a.globals.series[o][g]!==void 0||(x=!1),x){var k=this.drawPoint(v,N,y,o,g,t);h.add(k)}u.add(h)}}},{key:"drawPoint",value:function(e,t,s,a,i,o){var l=this.w,c=a,u=new Ah(this.ctx),h=new ga(this.ctx),f=new ri(this.ctx),g=new Ph(this.ctx),x=new Be(this.ctx),y=g.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:c,dataPointIndex:i,radius:l.config.chart.type==="bubble"||l.globals.comboCharts&&l.config.series[a]&&l.config.series[a].type==="bubble"?s:null}),b=f.fillPath({seriesNumber:a,dataPointIndex:i,color:y.pointFillColor,patternUnits:"objectBoundingBox",value:l.globals.series[a][o]}),v=x.drawMarker(e,t,y);if(l.config.series[c].data[i]&&l.config.series[c].data[i].fillColor&&(b=l.config.series[c].data[i].fillColor),v.attr({fill:b}),l.config.chart.dropShadow.enabled){var N=l.config.chart.dropShadow;h.dropShadow(v,N,a)}if(!this.initialAnim||l.globals.dataChanged||l.globals.resized)l.globals.animationEnded=!0;else{var k=l.config.chart.animations.speed;u.animateMarker(v,k,l.globals.easing,function(){window.setTimeout(function(){u.animationCompleted(v)},100)})}return v.attr({rel:i,j:i,index:a,"default-marker-size":y.pSize}),h.setSelectionFilter(v,a,i),g.addEvents(v),v.node.classList.add("apexcharts-marker"),v}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),r}(),ah=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"dataLabelsCorrection",value:function(e,t,s,a,i,o,l){var c=this.w,u=!1,h=new Be(this.ctx).getTextRects(s,l),f=h.width,g=h.height;t<0&&(t=0),t>c.globals.gridHeight+g&&(t=c.globals.gridHeight+g/2),c.globals.dataLabelsRects[a]===void 0&&(c.globals.dataLabelsRects[a]=[]),c.globals.dataLabelsRects[a].push({x:e,y:t,width:f,height:g});var x=c.globals.dataLabelsRects[a].length-2,y=c.globals.lastDrawnDataLabelsIndexes[a]!==void 0?c.globals.lastDrawnDataLabelsIndexes[a][c.globals.lastDrawnDataLabelsIndexes[a].length-1]:0;if(c.globals.dataLabelsRects[a][x]!==void 0){var b=c.globals.dataLabelsRects[a][y];(e>b.x+b.width||t>b.y+b.height||t+g<b.y||e+f<b.x)&&(u=!0)}return(i===0||o)&&(u=!0),{x:e,y:t,textRects:h,drawnextLabel:u}}},{key:"drawDataLabel",value:function(e){var t=this,s=e.type,a=e.pos,i=e.i,o=e.j,l=e.isRangeStart,c=e.strokeWidth,u=c===void 0?2:c,h=this.w,f=new Be(this.ctx),g=h.config.dataLabels,x=0,y=0,b=o,v=null;if(h.globals.collapsedSeriesIndices.indexOf(i)!==-1||!g.enabled||!Array.isArray(a.x))return v;v=f.group({class:"apexcharts-data-labels"});for(var N=0;N<a.x.length;N++)if(x=a.x[N]+g.offsetX,y=a.y[N]+g.offsetY+u,!isNaN(x)){o===1&&N===0&&(b=0),o===1&&N===1&&(b=1);var k=h.globals.series[i][b];s==="rangeArea"&&(k=l?h.globals.seriesRangeStart[i][b]:h.globals.seriesRangeEnd[i][b]);var A="",R=function(I){return h.config.dataLabels.formatter(I,{ctx:t.ctx,seriesIndex:i,dataPointIndex:b,w:h})};h.config.chart.type==="bubble"?(A=R(k=h.globals.seriesZ[i][b]),y=a.y[N],y=new JL(this.ctx).centerTextInBubble(y,i,b).y):k!==void 0&&(A=R(k));var _=h.config.dataLabels.textAnchor;h.globals.isSlopeChart&&(_=b===0?"end":b===h.config.series[i].data.length-1?"start":"middle"),this.plotDataLabelsText({x,y,text:A,i,j:b,parent:v,offsetCorrection:!0,dataLabelsConfig:h.config.dataLabels,textAnchor:_})}return v}},{key:"plotDataLabelsText",value:function(e){var t=this.w,s=new Be(this.ctx),a=e.x,i=e.y,o=e.i,l=e.j,c=e.text,u=e.textAnchor,h=e.fontSize,f=e.parent,g=e.dataLabelsConfig,x=e.color,y=e.alwaysDrawDataLabel,b=e.offsetCorrection,v=e.className,N=null;if(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(o)<0)return N;var k={x:a,y:i,drawnextLabel:!0,textRects:null};b&&(k=this.dataLabelsCorrection(a,i,c,o,l,y,parseInt(g.style.fontSize,10))),t.globals.zoomed||(a=k.x,i=k.y),k.textRects&&(a<-20-k.textRects.width||a>t.globals.gridWidth+k.textRects.width+30)&&(c="");var A=t.globals.dataLabels.style.colors[o];((t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(A=t.globals.dataLabels.style.colors[l]),typeof A=="function"&&(A=A({series:t.globals.series,seriesIndex:o,dataPointIndex:l,w:t})),x&&(A=x);var R=g.offsetX,_=g.offsetY;if(t.config.chart.type!=="bar"&&t.config.chart.type!=="rangeBar"||(R=0,_=0),t.globals.isSlopeChart&&(l!==0&&(R=-2*g.offsetX+5),l!==0&&l!==t.config.series[o].data.length-1&&(R=0)),k.drawnextLabel){if(u==="middle"&&a===t.globals.gridWidth&&(u="end"),(N=s.drawText({width:100,height:parseInt(g.style.fontSize,10),x:a+R,y:i+_,foreColor:A,textAnchor:u||g.textAnchor,text:c,fontSize:h||g.style.fontSize,fontFamily:g.style.fontFamily,fontWeight:g.style.fontWeight||"normal"})).attr({class:v||"apexcharts-datalabel",cx:a,cy:i}),g.dropShadow.enabled){var I=g.dropShadow;new ga(this.ctx).dropShadow(N,I)}f.add(N),t.globals.lastDrawnDataLabelsIndexes[o]===void 0&&(t.globals.lastDrawnDataLabelsIndexes[o]=[]),t.globals.lastDrawnDataLabelsIndexes[o].push(l)}return N}},{key:"addBackgroundToDataLabel",value:function(e,t){var s=this.w,a=s.config.dataLabels.background,i=a.padding,o=a.padding/2,l=t.width,c=t.height,u=new Be(this.ctx).drawRect(t.x-i,t.y-o/2,l+2*i,c+o,a.borderRadius,s.config.chart.background!=="transparent"&&s.config.chart.background?s.config.chart.background:"#fff",a.opacity,a.borderWidth,a.borderColor);return a.dropShadow.enabled&&new ga(this.ctx).dropShadow(u,a.dropShadow),u}},{key:"dataLabelsBackground",value:function(){var e=this.w;if(e.config.chart.type!=="bubble")for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),s=0;s<t.length;s++){var a=t[s],i=a.getBBox(),o=null;if(i.width&&i.height&&(o=this.addBackgroundToDataLabel(a,i)),o){a.parentNode.insertBefore(o.node,a);var l=e.config.dataLabels.background.backgroundColor||a.getAttribute("fill");e.config.chart.animations.enabled&&!e.globals.resized&&!e.globals.dataChanged?o.animate().attr({fill:l}):o.attr({fill:l}),a.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),s=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),a=0;a<t.length;a++)s&&s.insertBefore(t[a],s.nextSibling)}}]),r}(),eF=`.apexcharts-flip-y {
  transform: scaleY(-1) translateY(-100%);
  transform-origin: top;
  transform-box: fill-box;
}
.apexcharts-flip-x {
  transform: scaleX(-1);
  transform-origin: center;
  transform-box: fill-box;
}
.apexcharts-legend {
  display: flex;
  overflow: auto;
  padding: 0 10px;
}
.apexcharts-legend.apexcharts-legend-group-horizontal {
  flex-direction: column;
}
.apexcharts-legend-group {
  display: flex;
}
.apexcharts-legend-group-vertical {
  flex-direction: column-reverse;
}
.apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
  flex-wrap: wrap
}
.apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
  flex-direction: column;
  bottom: 0;
}
.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
  justify-content: flex-start;
  align-items: flex-start;
}
.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
  justify-content: center;
  align-items: center;
}
.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
  justify-content: flex-end;
  align-items: flex-end;
}
.apexcharts-legend-series {
  cursor: pointer;
  line-height: normal;
  display: flex;
  align-items: center;
}
.apexcharts-legend-text {
  position: relative;
  font-size: 14px;
}
.apexcharts-legend-text *, .apexcharts-legend-marker * {
  pointer-events: none;
}
.apexcharts-legend-marker {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  margin-right: 1px;
}

.apexcharts-legend-series.apexcharts-no-click {
  cursor: auto;
}
.apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
  display: none !important;
}
.apexcharts-inactive-legend {
  opacity: 0.45;
} `,zn=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return dt(r,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(ne.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),s=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:s}}},{key:"addCollapsedClassToSeries",value:function(e,t){var s=this.w;function a(i){for(var o=0;o<i.length;o++)i[o].index===t&&e.node.classList.add("apexcharts-series-collapsed")}a(s.globals.collapsedSeries),a(s.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],a=this.w,i=ne.clone(a.globals.initialSeries);a.globals.previousPaths=[],s?(a.globals.collapsedSeries=[],a.globals.ancillaryCollapsedSeries=[],a.globals.collapsedSeriesIndices=[],a.globals.ancillaryCollapsedSeriesIndices=[]):i=this.emptyCollapsedSeries(i),a.config.series=i,e&&(t&&(a.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(i,a.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,s=0;s<e.length;s++)t.globals.collapsedSeriesIndices.indexOf(s)>-1&&(e[s].data=[]);return e}},{key:"highlightSeries",value:function(e){var t=this.w,s=this.getSeriesByName(e),a=parseInt(s?.getAttribute("data:realIndex"),10),i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),o=null,l=null,c=null;if(t.globals.axisCharts||t.config.chart.type==="radialBar")if(t.globals.axisCharts){o=t.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(a,"']")),l=t.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(a,"']"));var u=t.globals.seriesYAxisReverseMap[a];c=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(u,"']"))}else o=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(a+1,"']"));else o=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(a+1,"'] path"));for(var h=0;h<i.length;h++)i[h].classList.add(this.legendInactiveClass);if(o)t.globals.axisCharts||o.parentNode.classList.remove(this.legendInactiveClass),o.classList.remove(this.legendInactiveClass),l!==null&&l.classList.remove(this.legendInactiveClass),c!==null&&c.classList.remove(this.legendInactiveClass);else for(var f=0;f<i.length;f++)i[f].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(e,t){var s=this.w;t||(t=e.target);var a=s.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(e.type==="mousemove"){var i=parseInt(t.getAttribute("rel"),10)-1;this.highlightSeries(s.globals.seriesNames[i])}else if(e.type==="mouseout")for(var o=0;o<a.length;o++)a[o].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var s=this,a=this.w,i=a.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),o=function(u){for(var h=0;h<i.length;h++)i[h].classList[u](s.legendInactiveClass)};if(e.type==="mousemove"){var l=parseInt(t.getAttribute("rel"),10)-1;o("add");var c=a.config.plotOptions.heatmap.colorScale.ranges;(function(u,h){for(var f=0;f<i.length;f++){var g=Number(i[f].getAttribute("val"));g>=u.from&&(g<u.to||u.to===h&&g===h)&&i[f].classList.remove(s.legendInactiveClass)}})(c[l],c.reduce(function(u,h){return Math.max(u,h.to)},0))}else e.type==="mouseout"&&o("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=this.w,a=0;if(s.config.series.length>1){for(var i=s.config.series.map(function(l,c){return l.data&&l.data.length>0&&s.globals.collapsedSeriesIndices.indexOf(c)===-1&&(!s.globals.comboCharts||t.length===0||t.length&&t.indexOf(s.config.series[c].type)>-1)?c:-1}),o=e==="asc"?0:i.length-1;e==="asc"?o<i.length:o>=0;e==="asc"?o++:o--)if(i[o]!==-1){a=i[o];break}}return a}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(e,t){return e.type==="bar"||e.type==="column"?t:-1}).filter(function(e){return e!==-1}):this.w.config.series.map(function(e,t){return t})}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(o,l,c){for(var u=o[l].childNodes,h={type:c,paths:[],realIndex:o[l].getAttribute("data:realIndex")},f=0;f<u.length;f++)if(u[f].hasAttribute("pathTo")){var g=u[f].getAttribute("pathTo");h.paths.push({d:g})}e.globals.previousPaths.push(h)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(o){for(var l,c=(l=o,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(l,"-series .apexcharts-series"))),u=0;u<c.length;u++)t(c,u,o)});var s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(s.length>0)for(var a=function(o){for(var l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(o,"'] rect")),c=[],u=function(f){var g=function(y){return l[f].getAttribute(y)},x={x:parseFloat(g("x")),y:parseFloat(g("y")),width:parseFloat(g("width")),height:parseFloat(g("height"))};c.push({rect:x,color:l[f].getAttribute("color")})},h=0;h<l.length;h++)u(h);e.globals.previousPaths.push(c)},i=0;i<s.length;i++)a(i);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,s=new Be(this.ctx),a=e.globals.svgWidth/2,i=e.globals.svgHeight/2,o="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,t.align==="left"?(a=10,o="start"):t.align==="right"&&(a=e.globals.svgWidth-10,o="end"),t.verticalAlign==="top"?i=50:t.verticalAlign==="bottom"&&(i=e.globals.svgHeight-50),a+=t.offsetX,i=i+parseInt(t.style.fontSize,10)+2+t.offsetY,t.text!==void 0&&t.text!==""){var l=s.drawText({x:a,y:i,text:t.text,textAnchor:o,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(l)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,s=0;s<e.length;s++)if(e[s].length===0)for(var a=0;a<e[t.globals.maxValsInArrayIndex].length;a++)e[s].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,s=this.filteredSeriesX(),a=0;a<s.length-1;a++)if(s[a][0]!==s[a+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){var e=this.w.globals.seriesX.map(function(t){return t.length>0?t:[]});return e}}]),r}(),uS=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new wr(this.ctx)}return dt(r,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new zn(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].x!==void 0&&e[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new zn(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==void 0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var s=this.w.config,a=this.w.globals,i=s.chart.type==="boxPlot"||s.series[t].type==="boxPlot",o=0;o<e[t].data.length;o++)if(e[t].data[o][1]!==void 0&&(Array.isArray(e[t].data[o][1])&&e[t].data[o][1].length===4&&!i?this.twoDSeries.push(ne.parseNumber(e[t].data[o][1][3])):e[t].data[o].length>=5?this.twoDSeries.push(ne.parseNumber(e[t].data[o][4])):this.twoDSeries.push(ne.parseNumber(e[t].data[o][1])),a.dataFormatXNumeric=!0),s.xaxis.type==="datetime"){var l=new Date(e[t].data[o][0]);l=new Date(l).getTime(),this.twoDSeriesX.push(l)}else this.twoDSeriesX.push(e[t].data[o][0]);for(var c=0;c<e[t].data.length;c++)e[t].data[c][2]!==void 0&&(this.threeDSeries.push(e[t].data[c][2]),a.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var s=this.w.config,a=this.w.globals,i=new ma(this.ctx),o=t;a.collapsedSeriesIndices.indexOf(t)>-1&&(o=this.activeSeriesIndex);for(var l=0;l<e[t].data.length;l++)e[t].data[l].y!==void 0&&(Array.isArray(e[t].data[l].y)?this.twoDSeries.push(ne.parseNumber(e[t].data[l].y[e[t].data[l].y.length-1])):this.twoDSeries.push(ne.parseNumber(e[t].data[l].y))),e[t].data[l].goals!==void 0&&Array.isArray(e[t].data[l].goals)?(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[l].goals)):(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var c=0;c<e[o].data.length;c++){var u=typeof e[o].data[c].x=="string",h=Array.isArray(e[o].data[c].x),f=!h&&!!i.isValidDate(e[o].data[c].x);if(u||f)if(u||s.xaxis.convertedCatToNumeric){var g=a.isBarHorizontal&&a.isRangeData;s.xaxis.type!=="datetime"||g?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[o].data[c].x),isNaN(e[o].data[c].x)||this.w.config.xaxis.type==="category"||typeof e[o].data[c].x=="string"||(a.isXNumeric=!0)):this.twoDSeriesX.push(i.parseDate(e[o].data[c].x))}else s.xaxis.type==="datetime"?this.twoDSeriesX.push(i.parseDate(e[o].data[c].x.toString())):(a.dataFormatXNumeric=!0,a.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[o].data[c].x)));else h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[o].data[c].x)):(a.isXNumeric=!0,a.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[o].data[c].x))}if(e[t].data[0]&&e[t].data[0].z!==void 0){for(var x=0;x<e[t].data.length;x++)this.threeDSeries.push(e[t].data[x].z);a.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var s=this.w.globals,a={};return this.isFormat2DArray()?a=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(a=this.handleRangeDataFormat("xy",e,t)),s.seriesRangeStart[t]=a.start===void 0?[]:a.start,s.seriesRangeEnd[t]=a.end===void 0?[]:a.end,s.seriesRange[t]=a.rangeUniques,s.seriesRange.forEach(function(i,o){i&&i.forEach(function(l,c){l.y.forEach(function(u,h){for(var f=0;f<l.y.length;f++)if(h!==f){var g=u.y1,x=u.y2,y=l.y[f].y1;g<=l.y[f].y2&&y<=x&&(l.overlaps.indexOf(u.rangeName)<0&&l.overlaps.push(u.rangeName),l.overlaps.indexOf(l.y[f].rangeName)<0&&l.overlaps.push(l.y[f].rangeName))}})})}),a}},{key:"handleCandleStickBoxData",value:function(e,t){var s=this.w.globals,a={};return this.isFormat2DArray()?a=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(a=this.handleCandleStickBoxDataFormat("xy",e,t)),s.seriesCandleO[t]=a.o,s.seriesCandleH[t]=a.h,s.seriesCandleM[t]=a.m,s.seriesCandleL[t]=a.l,s.seriesCandleC[t]=a.c,a}},{key:"handleRangeDataFormat",value:function(e,t,s){var a=[],i=[],o=t[s].data.filter(function(h,f,g){return f===g.findIndex(function(x){return x.x===h.x})}).map(function(h,f){return{x:h.x,overlaps:[],y:[]}});if(e==="array")for(var l=0;l<t[s].data.length;l++)Array.isArray(t[s].data[l])?(a.push(t[s].data[l][1][0]),i.push(t[s].data[l][1][1])):(a.push(t[s].data[l]),i.push(t[s].data[l]));else if(e==="xy")for(var c=function(h){var f=Array.isArray(t[s].data[h].y),g=ne.randomId(),x=t[s].data[h].x,y={y1:f?t[s].data[h].y[0]:t[s].data[h].y,y2:f?t[s].data[h].y[1]:t[s].data[h].y,rangeName:g};t[s].data[h].rangeName=g;var b=o.findIndex(function(v){return v.x===x});o[b].y.push(y),a.push(y.y1),i.push(y.y2)},u=0;u<t[s].data.length;u++)c(u);return{start:a,end:i,rangeUniques:o}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,s){var a=this.w,i=a.config.chart.type==="boxPlot"||a.config.series[s].type==="boxPlot",o=[],l=[],c=[],u=[],h=[];if(e==="array")if(i&&t[s].data[0].length===6||!i&&t[s].data[0].length===5)for(var f=0;f<t[s].data.length;f++)o.push(t[s].data[f][1]),l.push(t[s].data[f][2]),i?(c.push(t[s].data[f][3]),u.push(t[s].data[f][4]),h.push(t[s].data[f][5])):(u.push(t[s].data[f][3]),h.push(t[s].data[f][4]));else for(var g=0;g<t[s].data.length;g++)Array.isArray(t[s].data[g][1])&&(o.push(t[s].data[g][1][0]),l.push(t[s].data[g][1][1]),i?(c.push(t[s].data[g][1][2]),u.push(t[s].data[g][1][3]),h.push(t[s].data[g][1][4])):(u.push(t[s].data[g][1][2]),h.push(t[s].data[g][1][3])));else if(e==="xy")for(var x=0;x<t[s].data.length;x++)Array.isArray(t[s].data[x].y)&&(o.push(t[s].data[x].y[0]),l.push(t[s].data[x].y[1]),i?(c.push(t[s].data[x].y[2]),u.push(t[s].data[x].y[3]),h.push(t[s].data[x].y[4])):(u.push(t[s].data[x].y[2]),h.push(t[s].data[x].y[3])));return{o,h:l,m:c,l:u,c:h}}},{key:"parseDataAxisCharts",value:function(e){var t=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,a=this.w.config,i=this.w.globals,o=new ma(s),l=a.labels.length>0?a.labels.slice():a.xaxis.categories.slice();i.isRangeBar=a.chart.type==="rangeBar"&&i.isBarHorizontal,i.hasXaxisGroups=a.xaxis.type==="category"&&a.xaxis.group.groups.length>0,i.hasXaxisGroups&&(i.groups=a.xaxis.group.groups),e.forEach(function(x,y){x.name!==void 0?i.seriesNames.push(x.name):i.seriesNames.push("series-"+parseInt(y+1,10))}),this.coreUtils.setSeriesYAxisMappings();var c=[],u=Gr(new Set(a.series.map(function(x){return x.group})));a.series.forEach(function(x,y){var b=u.indexOf(x.group);c[b]||(c[b]=[]),c[b].push(i.seriesNames[y])}),i.seriesGroups=c;for(var h=function(){for(var x=0;x<l.length;x++)if(typeof l[x]=="string"){if(!o.isValidDate(l[x]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(o.parseDate(l[x]))}else t.twoDSeriesX.push(l[x])},f=0;f<e.length;f++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],e[f].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(a.chart.type!=="rangeBar"&&a.chart.type!=="rangeArea"&&e[f].type!=="rangeBar"&&e[f].type!=="rangeArea"||(i.isRangeData=!0,this.handleRangeData(e,f)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,f):this.isFormatXY()&&this.handleFormatXY(e,f),a.chart.type!=="candlestick"&&e[f].type!=="candlestick"&&a.chart.type!=="boxPlot"&&e[f].type!=="boxPlot"||this.handleCandleStickBoxData(e,f),i.series.push(this.twoDSeries),i.labels.push(this.twoDSeriesX),i.seriesX.push(this.twoDSeriesX),i.seriesGoals=this.seriesGoals,f!==this.activeSeriesIndex||this.fallbackToCategory||(i.isXNumeric=!0);else{a.xaxis.type==="datetime"?(i.isXNumeric=!0,h(),i.seriesX.push(this.twoDSeriesX)):a.xaxis.type==="numeric"&&(i.isXNumeric=!0,l.length>0&&(this.twoDSeriesX=l,i.seriesX.push(this.twoDSeriesX))),i.labels.push(this.twoDSeriesX);var g=e[f].data.map(function(x){return ne.parseNumber(x)});i.series.push(g)}i.seriesZ.push(this.threeDSeries),e[f].color!==void 0?i.seriesColors.push(e[f].color):i.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,s=this.w.config,a=Array.isArray(e)&&e.every(function(h){return typeof h=="number"})&&s.labels.length>0,i=Array.isArray(e)&&e.some(function(h){return h&&Da(h)==="object"&&h.data||h&&Da(h)==="object"&&h.parsing});if(a&&i&&console.warn("ApexCharts: Both old format (numeric series + labels) and new format (series objects with data/parsing) detected. Using old format for backward compatibility."),a){t.series=e.slice(),t.seriesNames=s.labels.slice();for(var o=0;o<t.series.length;o++)t.seriesNames[o]===void 0&&t.seriesNames.push("series-"+(o+1));return this.w}if(Array.isArray(e)&&e.every(function(h){return typeof h=="number"})){t.series=e.slice(),t.seriesNames=[];for(var l=0;l<t.series.length;l++)t.seriesNames.push(s.labels[l]||"series-".concat(l+1));return this.w}var c=this.extractPieDataFromSeries(e);t.series=c.values,t.seriesNames=c.labels,s.chart.type==="radialBar"&&(t.series=t.series.map(function(h){var f=ne.parseNumber(h);return f>100&&console.warn("ApexCharts: RadialBar value ".concat(f," > 100, consider using percentage values (0-100)")),f}));for(var u=0;u<t.series.length;u++)t.seriesNames[u]===void 0&&t.seriesNames.push("series-"+(u+1));return this.w}},{key:"resetParsingFlags",value:function(){var e=this.w;e.globals.dataWasParsed=!1,e.globals.originalSeries=null,e.config.series&&e.config.series.forEach(function(t){t.__apexParsed&&delete t.__apexParsed})}},{key:"extractPieDataFromSeries",value:function(e){var t=[],s=[];if(!Array.isArray(e))return console.warn("ApexCharts: Expected array for series data"),{values:[],labels:[]};if(e.length===0)return console.warn("ApexCharts: Empty series array"),{values:[],labels:[]};var a=e[0];return Da(a)==="object"&&a!==null&&a.data?(this.extractPieDataFromSeriesObjects(e,t,s),{values:t,labels:s}):(console.warn("ApexCharts: Unsupported series format for pie/donut/radialBar. Expected series objects with data property."),{values:[],labels:[]})}},{key:"extractPieDataFromSeriesObjects",value:function(e,t,s){e.forEach(function(a,i){a.data&&Array.isArray(a.data)?a.data.forEach(function(o){Da(o)==="object"&&o!==null?o.x!==void 0&&o.y!==void 0?(s.push(String(o.x)),t.push(ne.parseNumber(o.y))):console.warn("ApexCharts: Invalid data point format for pie chart. Expected {x, y} format:",o):console.warn("ApexCharts: Expected object data point, got:",Da(o))}):console.warn("ApexCharts: Series ".concat(i," has no valid data array"))})}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,s=this.w.globals;t.xaxis.categories.length>0?s.labels=t.xaxis.categories:t.labels.length>0?s.labels=t.labels.slice():this.fallbackToCategory?(s.labels=s.labels[0],s.seriesRange.length&&(s.seriesRange.map(function(a){a.forEach(function(i){s.labels.indexOf(i.x)<0&&i.x&&s.labels.push(i.x)})}),s.labels=Array.from(new Set(s.labels.map(JSON.stringify)),JSON.parse)),t.xaxis.convertedCatToNumeric&&(new ng(t).convertCatToNumericXaxis(t,this.ctx,s.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,s=this.w.config,a=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var i=s.series.map(function(f,g){return f.data.filter(function(x,y,b){return b.findIndex(function(v){return v.x===x.x})===y})}),o=i.reduce(function(f,g,x,y){return y[f].length>g.length?f:x},0),l=0;l<i[o].length;l++)a.push(l+1);else for(var c=0;c<t.series[t.maxValsInArrayIndex].length;c++)a.push(c+1);t.seriesX=[];for(var u=0;u<e.length;u++)t.seriesX.push(a);this.w.globals.isBarHorizontal||(t.isXNumeric=!0)}if(a.length===0){a=t.axisCharts?[]:t.series.map(function(f,g){return g+1});for(var h=0;h<e.length;h++)t.seriesX.push(a)}t.labels=a,s.xaxis.convertedCatToNumeric&&(t.categoryLabels=a.map(function(f){return s.xaxis.labels.formatter(f)})),t.noLabelsProvided=!0}},{key:"parseRawDataIfNeeded",value:function(e){var t=this,s=this.w.config,a=this.w.globals,i=s.parsing;if(a.dataWasParsed||!i&&!e.some(function(l){return l.parsing}))return e;var o=e.map(function(l,c){var u,h,f;if(!l.data||!Array.isArray(l.data)||l.data.length===0)return l;var g={x:((u=l.parsing)===null||u===void 0?void 0:u.x)||i?.x,y:((h=l.parsing)===null||h===void 0?void 0:h.y)||i?.y,z:((f=l.parsing)===null||f===void 0?void 0:f.z)||i?.z};if(!g.x&&!g.y)return l;var x=l.data[0];if(Da(x)==="object"&&x!==null&&(x.hasOwnProperty("x")||x.hasOwnProperty("y"))||Array.isArray(x))return l;if(!g.x||!g.y||Array.isArray(g.y)&&g.y.length===0)return console.warn("ApexCharts: Series ".concat(c," has parsing config but missing x or y field specification")),l;var y=l.data.map(function(b,v){if(Da(b)!=="object"||b===null)return console.warn("ApexCharts: Series ".concat(c,", data point ").concat(v," is not an object, skipping parsing")),b;var N,k=t.getNestedValue(b,g.x),A=void 0;if(Array.isArray(g.y)){var R=g.y.map(function(P){return t.getNestedValue(b,P)});N=t.w.config.chart.type==="bubble"&&R.length===2?R[0]:R}else N=t.getNestedValue(b,g.y);g.z&&(A=t.getNestedValue(b,g.z)),k===void 0&&console.warn("ApexCharts: Series ".concat(c,", data point ").concat(v," missing field '").concat(g.x,"'")),N===void 0&&console.warn("ApexCharts: Series ".concat(c,", data point ").concat(v," missing field '").concat(g.y,"'"));var _={x:k,y:N};if(t.w.config.chart.type==="bubble"&&Array.isArray(g.y)&&g.y.length===2){var I=t.getNestedValue(b,g.y[1]);I!==void 0&&(_.z=I)}return A!==void 0&&(_.z=A),_});return et(et({},l),{},{data:y,__apexParsed:!0})});return a.dataWasParsed=!0,a.originalSeries||(a.originalSeries=ne.clone(e)),o}},{key:"getNestedValue",value:function(e,t){if(e&&Da(e)==="object"&&t){if(t.indexOf(".")===-1)return e[t];for(var s=t.split("."),a=e,i=0;i<s.length;i++){if(a==null||Da(a)!=="object")return;a=a[s[i]]}return a}}},{key:"parseData",value:function(e){var t=this.w,s=t.config,a=t.globals;if(e=this.parseRawDataIfNeeded(e),s.series=e,a.initialSeries=ne.clone(e),this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),a.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),s.chart.stacked){var i=new zn(this.ctx);a.series=i.setNullSeriesToZeroValues(a.series)}this.coreUtils.getSeriesTotals(),a.axisCharts&&(a.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),a.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),a.dataFormatXNumeric||a.isXNumeric&&(s.xaxis.type!=="numeric"||s.labels.length!==0||s.xaxis.categories.length!==0)||this.handleExternalLabelsData(e);for(var o=this.coreUtils.getCategoryLabels(a.labels),l=0;l<o.length;l++)if(Array.isArray(o[l])){a.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this.w,t=[];e.globals.seriesYAxisMap.forEach(function(s,a){var i=0;s.forEach(function(o){e.globals.collapsedSeriesIndices.indexOf(o)!==-1&&i++}),i>0&&i==s.length&&t.push(a)}),e.globals.ignoreYAxisIndexes=t.map(function(s){return s})}}]),r}(),Af=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"svgStringToNode",value:function(e){return new DOMParser().parseFromString(e,"image/svg+xml").documentElement}},{key:"scaleSvgNode",value:function(e,t){var s=parseFloat(e.getAttributeNS(null,"width")),a=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",s*t),e.setAttributeNS(null,"height",a*t),e.setAttributeNS(null,"viewBox","0 0 "+s+" "+a)}},{key:"getSvgString",value:function(e){var t=this;return new Promise(function(s){var a=t.w,i=e||a.config.chart.toolbar.export.scale||a.config.chart.toolbar.export.width/a.globals.svgWidth;i||(i=1);var o=a.globals.svgWidth*i,l=a.globals.svgHeight*i,c=a.globals.dom.elWrap.cloneNode(!0);c.style.width=o+"px",c.style.height=l+"px";var u=new XMLSerializer().serializeToString(c),h=`
        .apexcharts-tooltip, .apexcharts-toolbar, .apexcharts-xaxistooltip, .apexcharts-yaxistooltip, .apexcharts-xcrosshairs, .apexcharts-ycrosshairs, .apexcharts-zoom-rect, .apexcharts-selection-rect {
          display: none;
        }
      `;a.config.legend.show&&a.globals.dom.elLegendWrap&&a.globals.dom.elLegendWrap.children.length>0&&(h+=eF);var f=`
        <svg xmlns="http://www.w3.org/2000/svg"
          version="1.1"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          class="apexcharts-svg"
          xmlns:data="ApexChartsNS"
          transform="translate(0, 0)"
          width="`.concat(a.globals.svgWidth,'px" height="').concat(a.globals.svgHeight,`px">
          <foreignObject width="100%" height="100%">
            <div xmlns="http://www.w3.org/1999/xhtml" style="width:`).concat(o,"px; height:").concat(l,`px;">
            <style type="text/css">
              `).concat(h,`
            </style>
              `).concat(u,`
            </div>
          </foreignObject>
        </svg>
      `),g=t.svgStringToNode(f);i!==1&&t.scaleSvgNode(g,i),t.convertImagesToBase64(g).then(function(){f=new XMLSerializer().serializeToString(g),s(f.replace(/&nbsp;/g,"&#160;"))})})}},{key:"convertImagesToBase64",value:function(e){var t=this,s=e.getElementsByTagName("image"),a=Array.from(s).map(function(i){var o=i.getAttributeNS("http://www.w3.org/1999/xlink","href");return o&&!o.startsWith("data:")?t.getBase64FromUrl(o).then(function(l){i.setAttributeNS("http://www.w3.org/1999/xlink","href",l)}).catch(function(l){console.error("Error converting image to base64:",l)}):Promise.resolve()});return Promise.all(a)}},{key:"getBase64FromUrl",value:function(e){return new Promise(function(t,s){var a=new Image;a.crossOrigin="Anonymous",a.onload=function(){var i=document.createElement("canvas");i.width=a.width,i.height=a.height,i.getContext("2d").drawImage(a,0,0),t(i.toDataURL())},a.onerror=s,a.src=e})}},{key:"svgUrl",value:function(){var e=this;return new Promise(function(t){e.getSvgString().then(function(s){var a=new Blob([s],{type:"image/svg+xml;charset=utf-8"});t(URL.createObjectURL(a))})})}},{key:"dataURI",value:function(e){var t=this;return new Promise(function(s){var a=t.w,i=e?e.scale||e.width/a.globals.svgWidth:1,o=document.createElement("canvas");o.width=a.globals.svgWidth*i,o.height=parseInt(a.globals.dom.elWrap.style.height,10)*i;var l=a.config.chart.background!=="transparent"&&a.config.chart.background?a.config.chart.background:"#fff",c=o.getContext("2d");c.fillStyle=l,c.fillRect(0,0,o.width*i,o.height*i),t.getSvgString(i).then(function(u){var h="data:image/svg+xml,"+encodeURIComponent(u),f=new Image;f.crossOrigin="anonymous",f.onload=function(){if(c.drawImage(f,0,0),o.msToBlob){var g=o.msToBlob();s({blob:g})}else{var x=o.toDataURL("image/png");s({imgURI:x})}},f.src=h})})}},{key:"exportToSVG",value:function(){var e=this;this.svgUrl().then(function(t){e.triggerDownload(t,e.w.config.chart.toolbar.export.svg.filename,".svg")})}},{key:"exportToPng",value:function(){var e=this,t=this.w.config.chart.toolbar.export.scale,s=this.w.config.chart.toolbar.export.width,a=t?{scale:t}:s?{width:s}:void 0;this.dataURI(a).then(function(i){var o=i.imgURI,l=i.blob;l?navigator.msSaveOrOpenBlob(l,e.w.globals.chartID+".png"):e.triggerDownload(o,e.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(e){var t=this,s=e.series,a=e.fileName,i=e.columnDelimiter,o=i===void 0?",":i,l=e.lineDelimiter,c=l===void 0?`
`:l,u=this.w;s||(s=u.config.series);var h=[],f=[],g="",x=u.globals.series.map(function(_,I){return u.globals.collapsedSeriesIndices.indexOf(I)===-1?_:[]}),y=function(_){return typeof u.config.chart.toolbar.export.csv.categoryFormatter=="function"?u.config.chart.toolbar.export.csv.categoryFormatter(_):u.config.xaxis.type==="datetime"&&String(_).length>=10?new Date(_).toDateString():ne.isNumber(_)?_:_.split(o).join("")},b=function(_){return typeof u.config.chart.toolbar.export.csv.valueFormatter=="function"?u.config.chart.toolbar.export.csv.valueFormatter(_):_},v=Math.max.apply(Math,Gr(s.map(function(_){return _.data?_.data.length:0}))),N=new uS(this.ctx),k=new Yl(this.ctx),A=function(_){var I="";if(u.globals.axisCharts){if(u.config.xaxis.type==="category"||u.config.xaxis.convertedCatToNumeric)if(u.globals.isBarHorizontal){var P=u.globals.yLabelFormatters[0],T=new zn(t.ctx).getActiveConfigSeriesIndex();I=P(u.globals.labels[_],{seriesIndex:T,dataPointIndex:_,w:u})}else I=k.getLabel(u.globals.labels,u.globals.timescaleLabels,0,_).text;u.config.xaxis.type==="datetime"&&(u.config.xaxis.categories.length?I=u.config.xaxis.categories[_]:u.config.labels.length&&(I=u.config.labels[_]))}else I=u.config.labels[_];return I===null?"nullvalue":(Array.isArray(I)&&(I=I.join(" ")),ne.isNumber(I)?I:I.split(o).join(""))},R=function(_,I){if(h.length&&I===0&&f.push(h.join(o)),_.data){_.data=_.data.length&&_.data||Gr(Array(v)).map(function(){return""});for(var P=0;P<_.data.length;P++){h=[];var T=A(P);if(T!=="nullvalue"){if(T||(N.isFormatXY()?T=s[I].data[P].x:N.isFormat2DArray()&&(T=s[I].data[P]?s[I].data[P][0]:"")),I===0){h.push(y(T));for(var D=0;D<u.globals.series.length;D++){var L,F=N.isFormatXY()?(L=s[D].data[P])===null||L===void 0?void 0:L.y:x[D][P];h.push(b(F))}}(u.config.chart.type==="candlestick"||_.type&&_.type==="candlestick")&&(h.pop(),h.push(u.globals.seriesCandleO[I][P]),h.push(u.globals.seriesCandleH[I][P]),h.push(u.globals.seriesCandleL[I][P]),h.push(u.globals.seriesCandleC[I][P])),(u.config.chart.type==="boxPlot"||_.type&&_.type==="boxPlot")&&(h.pop(),h.push(u.globals.seriesCandleO[I][P]),h.push(u.globals.seriesCandleH[I][P]),h.push(u.globals.seriesCandleM[I][P]),h.push(u.globals.seriesCandleL[I][P]),h.push(u.globals.seriesCandleC[I][P])),u.config.chart.type==="rangeBar"&&(h.pop(),h.push(u.globals.seriesRangeStart[I][P]),h.push(u.globals.seriesRangeEnd[I][P])),h.length&&f.push(h.join(o))}}}};h.push(u.config.chart.toolbar.export.csv.headerCategory),u.config.chart.type==="boxPlot"?(h.push("minimum"),h.push("q1"),h.push("median"),h.push("q3"),h.push("maximum")):u.config.chart.type==="candlestick"?(h.push("open"),h.push("high"),h.push("low"),h.push("close")):u.config.chart.type==="rangeBar"?(h.push("minimum"),h.push("maximum")):s.map(function(_,I){var P=(_.name?_.name:"series-".concat(I))+"";u.globals.axisCharts&&h.push(P.split(o).join("")?P.split(o).join(""):"series-".concat(I))}),u.globals.axisCharts||(h.push(u.config.chart.toolbar.export.csv.headerValue),f.push(h.join(o))),u.globals.allSeriesHasEqualX||!u.globals.axisCharts||u.config.xaxis.categories.length||u.config.labels.length?s.map(function(_,I){u.globals.axisCharts?R(_,I):((h=[]).push(y(u.globals.labels[I])),h.push(b(x[I])),f.push(h.join(o)))}):function(){var _=new Set,I={};s.forEach(function(P,T){P?.data.forEach(function(D){var L,F;if(N.isFormatXY())L=D.x,F=D.y;else{if(!N.isFormat2DArray())return;L=D[0],F=D[1]}I[L]||(I[L]=Array(s.length).fill("")),I[L][T]=b(F),_.add(L)})}),h.length&&f.push(h.join(o)),Array.from(_).sort().forEach(function(P){f.push([y(P),I[P].join(o)])})}(),g+=f.join(c),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+g),a||u.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,s){var a=document.createElement("a");a.href=e,a.download=(t||this.w.globals.chartID)+s,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}]),r}(),og=function(){function r(e,t){ct(this,r),this.ctx=e,this.elgrid=t,this.w=e.w;var s=this.w;this.axesUtils=new Yl(e),this.xaxisLabels=s.globals.labels.slice(),s.globals.timescaleLabels.length>0&&!s.globals.isBarHorizontal&&(this.xaxisLabels=s.globals.timescaleLabels.slice()),s.config.xaxis.overwriteCategories&&(this.xaxisLabels=s.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],s.config.xaxis.position==="top"?this.offY=0:this.offY=s.globals.gridHeight,this.offY=this.offY+s.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=s.config.chart.type==="bar"&&s.config.plotOptions.bar.horizontal,this.xaxisFontSize=s.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=s.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=s.config.xaxis.labels.style.colors,this.xaxisBorderWidth=s.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=s.config.yaxis[0].axisBorder.width.toString()),String(this.xaxisBorderWidth).indexOf("%")>-1?this.xaxisBorderWidth=s.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=s.config.xaxis.axisBorder.height,this.yaxis=s.config.yaxis[0]}return dt(r,[{key:"drawXaxis",value:function(){var e=this.w,t=new Be(this.ctx),s=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),a=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});s.add(a);for(var i=[],o=0;o<this.xaxisLabels.length;o++)i.push(this.xaxisLabels[o]);if(this.drawXAxisLabelAndGroup(!0,t,a,i,e.globals.isXNumeric,function(y,b){return b}),e.globals.hasXaxisGroups){var l=e.globals.groups;i=[];for(var c=0;c<l.length;c++)i.push(l[c].title);var u={};e.config.xaxis.group.style&&(u.xaxisFontSize=e.config.xaxis.group.style.fontSize,u.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,u.xaxisForeColors=e.config.xaxis.group.style.colors,u.fontWeight=e.config.xaxis.group.style.fontWeight,u.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,a,i,!1,function(y,b){return l[y].cols*b},u)}if(e.config.xaxis.title.text!==void 0){var h=t.group({class:"apexcharts-xaxis-title"}),f=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(e.config.xaxis.position==="bottom"?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});h.add(f),s.add(h)}if(e.config.xaxis.axisBorder.show){var g=e.globals.barPadForNumericAxis,x=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-g,this.offY,this.xaxisBorderWidth+g,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(x):s.add(x)}return s}},{key:"drawXAxisLabelAndGroup",value:function(e,t,s,a,i,o){var l,c=this,u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},h=[],f=[],g=this.w,x=u.xaxisFontSize||this.xaxisFontSize,y=u.xaxisFontFamily||this.xaxisFontFamily,b=u.xaxisForeColors||this.xaxisForeColors,v=u.fontWeight||g.config.xaxis.labels.style.fontWeight,N=u.cssClass||g.config.xaxis.labels.style.cssClass,k=g.globals.padHorizontal,A=a.length,R=g.config.xaxis.type==="category"?g.globals.dataPoints:A;if(R===0&&A>R&&(R=A),i){var _=Math.max(Number(g.config.xaxis.tickAmount)||1,R>1?R-1:R);l=g.globals.gridWidth/Math.min(_,A-1),k=k+o(0,l)/2+g.config.xaxis.labels.offsetX}else l=g.globals.gridWidth/R,k=k+o(0,l)+g.config.xaxis.labels.offsetX;for(var I=function(T){var D=k-o(T,l)/2+g.config.xaxis.labels.offsetX;T===0&&A===1&&l/2===k&&R===1&&(D=g.globals.gridWidth/2);var L=c.axesUtils.getLabel(a,g.globals.timescaleLabels,D,T,h,x,e),F=28;if(g.globals.rotateXLabels&&e&&(F=22),g.config.xaxis.title.text&&g.config.xaxis.position==="top"&&(F+=parseFloat(g.config.xaxis.title.style.fontSize)+2),e||(F=F+parseFloat(x)+(g.globals.xAxisLabelsHeight-g.globals.xAxisGroupLabelsHeight)+(g.globals.rotateXLabels?10:0)),L=g.config.xaxis.tickAmount!==void 0&&g.config.xaxis.tickAmount!=="dataPoints"&&g.config.xaxis.type!=="datetime"?c.axesUtils.checkLabelBasedOnTickamount(T,L,A):c.axesUtils.checkForOverflowingLabels(T,L,A,h,f),g.config.xaxis.labels.show){var z=t.drawText({x:L.x,y:c.offY+g.config.xaxis.labels.offsetY+F-(g.config.xaxis.position==="top"?g.globals.xAxisHeight+g.config.xaxis.axisTicks.height-2:0),text:L.text,textAnchor:"middle",fontWeight:L.isBold?600:v,fontSize:x,fontFamily:y,foreColor:Array.isArray(b)?e&&g.config.xaxis.convertedCatToNumeric?b[g.globals.minX+T-1]:b[T]:b,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+N});if(s.add(z),z.on("click",function(V){if(typeof g.config.chart.events.xAxisLabelClick=="function"){var Y=Object.assign({},g,{labelIndex:T});g.config.chart.events.xAxisLabelClick(V,c.ctx,Y)}}),e){var O=document.createElementNS(g.globals.SVGNS,"title");O.textContent=Array.isArray(L.text)?L.text.join(" "):L.text,z.node.appendChild(O),L.text!==""&&(h.push(L.text),f.push(L))}}T<A-1&&(k+=o(T+1,l))},P=0;P<=A-1;P++)I(P)}},{key:"drawXaxisInversed",value:function(e){var t,s,a=this,i=this.w,o=new Be(this.ctx),l=i.config.yaxis[0].opposite?i.globals.translateYAxisX[e]:0,c=o.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),u=o.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+l+", 0)"});c.add(u);var h=[];if(i.config.yaxis[e].show)for(var f=0;f<this.xaxisLabels.length;f++)h.push(this.xaxisLabels[f]);t=i.globals.gridHeight/h.length,s=-t/2.2;var g=i.globals.yLabelFormatters[0],x=i.config.yaxis[0].labels;if(x.show)for(var y=function(_){var I=h[_]===void 0?"":h[_];I=g(I,{seriesIndex:e,dataPointIndex:_,w:i});var P=a.axesUtils.getYAxisForeColor(x.style.colors,e),T=0;Array.isArray(I)&&(T=I.length/2*parseInt(x.style.fontSize,10));var D=x.offsetX-15,L="end";a.yaxis.opposite&&(L="start"),i.config.yaxis[0].labels.align==="left"?(D=x.offsetX,L="start"):i.config.yaxis[0].labels.align==="center"?(D=x.offsetX,L="middle"):i.config.yaxis[0].labels.align==="right"&&(L="end");var F=o.drawText({x:D,y:s+t+x.offsetY-T,text:I,textAnchor:L,foreColor:Array.isArray(P)?P[_]:P,fontSize:x.style.fontSize,fontFamily:x.style.fontFamily,fontWeight:x.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+x.style.cssClass,maxWidth:x.maxWidth});u.add(F),F.on("click",function(V){if(typeof i.config.chart.events.xAxisLabelClick=="function"){var Y=Object.assign({},i,{labelIndex:_});i.config.chart.events.xAxisLabelClick(V,a.ctx,Y)}});var z=document.createElementNS(i.globals.SVGNS,"title");if(z.textContent=Array.isArray(I)?I.join(" "):I,F.node.appendChild(z),i.config.yaxis[e].labels.rotate!==0){var O=o.rotateAroundCenter(F.node);F.node.setAttribute("transform","rotate(".concat(i.config.yaxis[e].labels.rotate," 0 ").concat(O.y,")"))}s+=t},b=0;b<=h.length-1;b++)y(b);if(i.config.yaxis[0].title.text!==void 0){var v=o.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+l+", 0)"}),N=o.drawText({x:i.config.yaxis[0].title.offsetX,y:i.globals.gridHeight/2+i.config.yaxis[0].title.offsetY,text:i.config.yaxis[0].title.text,textAnchor:"middle",foreColor:i.config.yaxis[0].title.style.color,fontSize:i.config.yaxis[0].title.style.fontSize,fontWeight:i.config.yaxis[0].title.style.fontWeight,fontFamily:i.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[0].title.style.cssClass});v.add(N),c.add(v)}var k=0;this.isCategoryBarHorizontal&&i.config.yaxis[0].opposite&&(k=i.globals.gridWidth);var A=i.config.xaxis.axisBorder;if(A.show){var R=o.drawLine(i.globals.padHorizontal+A.offsetX+k,1+A.offsetY,i.globals.padHorizontal+A.offsetX+k,i.globals.gridHeight+A.offsetY,A.color,0);this.elgrid&&this.elgrid.elGridBorders&&i.config.grid.show?this.elgrid.elGridBorders.add(R):c.add(R)}return i.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(k,h.length,i.config.yaxis[0].axisBorder,i.config.yaxis[0].axisTicks,0,t,c),c}},{key:"drawXaxisTicks",value:function(e,t,s){var a=this.w,i=e;if(!(e<0||e-2>a.globals.gridWidth)){var o=this.offY+a.config.xaxis.axisTicks.offsetY;if(t=t+o+a.config.xaxis.axisTicks.height,a.config.xaxis.position==="top"&&(t=o-a.config.xaxis.axisTicks.height),a.config.xaxis.axisTicks.show){var l=new Be(this.ctx).drawLine(e+a.config.xaxis.axisTicks.offsetX,o+a.config.xaxis.offsetY,i+a.config.xaxis.axisTicks.offsetX,t+a.config.xaxis.offsetY,a.config.xaxis.axisTicks.color);s.add(l),l.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],s=this.xaxisLabels.length,a=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var i=0;i<s;i++)a=this.xaxisLabels[i].position,t.push(a);else for(var o=s,l=0;l<o;l++){var c=o;e.globals.isXNumeric&&e.config.chart.type!=="bar"&&(c-=1),a+=e.globals.gridWidth/c,t.push(a)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new Be(this.ctx),s=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var l=0;l<a.length;l++){var c=t.rotateAroundCenter(a[l]);c.y=c.y-1,c.x=c.x+1,a[l].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(c.x," ").concat(c.y,")")),a[l].setAttribute("text-anchor","end"),s.setAttribute("transform","translate(0, ".concat(-10,")"));var u=a[l].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(u,function(x){t.placeTextWithEllipsis(x,x.textContent,e.globals.xAxisLabelsHeight-(e.config.legend.position==="bottom"?20:10))})}else(function(){for(var x=e.globals.gridWidth/(e.globals.labels.length+1),y=0;y<a.length;y++){var b=a[y].childNodes;e.config.xaxis.labels.trim&&e.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(b,function(v){t.placeTextWithEllipsis(v,v.textContent,x)})}})();if(i.length>0){var h=i[i.length-1].getBBox(),f=i[0].getBBox();h.x<-20&&i[i.length-1].parentNode.removeChild(i[i.length-1]),f.x+f.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&i[0].parentNode.removeChild(i[0]);for(var g=0;g<o.length;g++)t.placeTextWithEllipsis(o[g],o[g].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),r}(),tF=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w;var t=this.w;this.xaxisLabels=t.globals.labels.slice(),this.axesUtils=new Yl(e),this.isRangeBar=t.globals.seriesRange.length&&t.globals.isBarHorizontal,t.globals.timescaleLabels.length>0&&(this.xaxisLabels=t.globals.timescaleLabels.slice())}return dt(r,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w,s=new Be(this.ctx);e||(e=s.group({class:"apexcharts-grid"}));var a=s.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),i=s.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(i),e.add(a),e}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var e=this.renderGrid();return this.drawGridArea(e.el),e}return null}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,s=new Be(this.ctx),a=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,Gr(e.config.stroke.width)):e.config.stroke.width,i=function(h){var f=document.createElementNS(t.SVGNS,"clipPath");return f.setAttribute("id",h),f};t.dom.elGridRectMask=i("gridRectMask".concat(t.cuid)),t.dom.elGridRectBarMask=i("gridRectBarMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=i("gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=i("forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=i("nonForecastMask".concat(t.cuid));var o=0,l=0;(["bar","rangeBar","candlestick","boxPlot"].includes(e.config.chart.type)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=Math.max(e.config.grid.padding.left,t.barPadForNumericAxis),l=Math.max(e.config.grid.padding.right,t.barPadForNumericAxis)),t.dom.elGridRect=s.drawRect(-a/2-2,-a/2-2,t.gridWidth+a+4,t.gridHeight+a+4,0,"#fff"),t.dom.elGridRectBar=s.drawRect(-a/2-o-2,-a/2-2,t.gridWidth+a+l+o+4,t.gridHeight+a+4,0,"#fff");var c=e.globals.markers.largestSize;t.dom.elGridRectMarker=s.drawRect(Math.min(-a/2-o-2,-c),-c,t.gridWidth+Math.max(a+l+o+4,2*c),t.gridHeight+2*c,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectBarMask.appendChild(t.dom.elGridRectBar.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var u=t.dom.baseEl.querySelector("defs");u.appendChild(t.dom.elGridRectMask),u.appendChild(t.dom.elGridRectBarMask),u.appendChild(t.dom.elGridRectMarkerMask),u.appendChild(t.dom.elForecastMask),u.appendChild(t.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,s=e.x1,a=e.y1,i=e.x2,o=e.y2,l=e.xCount,c=e.parent,u=this.w;if(!(t===0&&u.globals.skipFirstTimelinelabel||t===l-1&&u.globals.skipLastTimelinelabel&&!u.config.xaxis.labels.formatter||u.config.chart.type==="radar")){u.config.grid.xaxis.lines.show&&this._drawGridLine({i:t,x1:s,y1:a,x2:i,y2:o,xCount:l,parent:c});var h=0;if(u.globals.hasXaxisGroups&&u.config.xaxis.tickPlacement==="between"){var f=u.globals.groups;if(f){for(var g=0,x=0;g<t&&x<f.length;x++)g+=f[x].cols;g===t&&(h=.6*u.globals.xAxisLabelsHeight)}}new og(this.ctx).drawXaxisTicks(s,h,u.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var t=e.i,s=e.x1,a=e.y1,i=e.x2,o=e.y2,l=e.xCount,c=e.parent,u=this.w,h=c.node.classList.contains("apexcharts-gridlines-horizontal"),f=u.globals.barPadForNumericAxis,g=a===0&&o===0||s===0&&i===0||a===u.globals.gridHeight&&o===u.globals.gridHeight||u.globals.isBarHorizontal&&(t===0||t===l-1),x=new Be(this).drawLine(s-(h?f:0),a,i+(h?f:0),o,u.config.grid.borderColor,u.config.grid.strokeDashArray);x.node.classList.add("apexcharts-gridline"),g&&u.config.grid.show?this.elGridBorders.add(x):c.add(x)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,s=e.x1,a=e.y1,i=e.x2,o=e.y2,l=e.type,c=this.w,u=new Be(this.ctx),h=c.globals.barPadForNumericAxis,f=c.config.grid[l].colors[t],g=u.drawRect(s-(l==="row"?h:0),a,i+(l==="row"?2*h:0),o,0,f,c.config.grid[l].opacity);this.elg.add(g),g.attr("clip-path","url(#gridRectMask".concat(c.globals.cuid,")")),g.node.classList.add("apexcharts-grid-".concat(l))}},{key:"_drawXYLines",value:function(e){var t=this,s=e.xCount,a=e.tickAmount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show){var o,l=i.globals.padHorizontal,c=i.globals.gridHeight;i.globals.timescaleLabels.length?function(y){for(var b=y.xC,v=y.x1,N=y.y1,k=y.x2,A=y.y2,R=0;R<b;R++)v=t.xaxisLabels[R].position,k=t.xaxisLabels[R].position,t._drawGridLines({i:R,x1:v,y1:N,x2:k,y2:A,xCount:s,parent:t.elgridLinesV})}({xC:s,x1:l,y1:0,x2:o,y2:c}):(i.globals.isXNumeric&&(s=i.globals.xAxisScale.result.length),function(y){for(var b=y.xC,v=y.x1,N=y.y1,k=y.x2,A=y.y2,R=0;R<b+(i.globals.isXNumeric?0:1);R++)R===0&&b===1&&i.globals.dataPoints===1&&(k=v=i.globals.gridWidth/2),t._drawGridLines({i:R,x1:v,y1:N,x2:k,y2:A,xCount:s,parent:t.elgridLinesV}),k=v+=i.globals.gridWidth/(i.globals.isXNumeric?b-1:b)}({xC:s,x1:l,y1:0,x2:o,y2:c}))}if(i.config.grid.yaxis.lines.show){var u=0,h=0,f=i.globals.gridWidth,g=a+1;this.isRangeBar&&(g=i.globals.labels.length);for(var x=0;x<g+(this.isRangeBar?1:0);x++)this._drawGridLine({i:x,xCount:g+(this.isRangeBar?1:0),x1:0,y1:u,x2:f,y2:h,parent:this.elgridLinesH}),h=u+=i.globals.gridHeight/(this.isRangeBar?g:a)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,s=this.w;if(s.config.grid.xaxis.lines.show||s.config.xaxis.axisTicks.show)for(var a,i=s.globals.padHorizontal,o=s.globals.gridHeight,l=0;l<t+1;l++)s.config.grid.xaxis.lines.show&&this._drawGridLine({i:l,xCount:t+1,x1:i,y1:0,x2:a,y2:o,parent:this.elgridLinesV}),new og(this.ctx).drawXaxisTicks(i,0,s.globals.dom.elGraphical),a=i+=s.globals.gridWidth/t;if(s.config.grid.yaxis.lines.show)for(var c=0,u=0,h=s.globals.gridWidth,f=0;f<s.globals.dataPoints+1;f++)this._drawGridLine({i:f,xCount:s.globals.dataPoints+1,x1:0,y1:c,x2:h,y2:u,parent:this.elgridLinesH}),u=c+=s.globals.gridHeight/s.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=e.globals,s=new Be(this.ctx);this.elg=s.group({class:"apexcharts-grid"}),this.elgridLinesH=s.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=s.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=s.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var a=0;a<t.seriesYAxisMap.length&&t.ignoreYAxisIndexes.includes(a);)a++;a===t.seriesYAxisMap.length&&(a=0);var i,o=t.yAxisScale[a].result.length-1;if(!t.isBarHorizontal||this.isRangeBar){var l,c,u;i=this.xaxisLabels.length,this.isRangeBar&&(o=t.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(i=e.config.xaxis.tickAmount),((l=t.yAxisScale)===null||l===void 0||(c=l[a])===null||c===void 0||(u=c.result)===null||u===void 0?void 0:u.length)>0&&e.config.xaxis.type!=="datetime"&&(i=t.yAxisScale[a].result.length-1)),this._drawXYLines({xCount:i,tickAmount:o})}else i=o,o=t.xTickAmount,this._drawInvertedXYLines({xCount:i,tickAmount:o});return this.drawGridBands(i,o),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:t.gridWidth/i}}},{key:"drawGridBands",value:function(e,t){var s,a,i=this,o=this.w;if(((s=o.config.grid.row.colors)===null||s===void 0?void 0:s.length)>0&&function(y,b,v,N,k,A){for(var R=0,_=0;R<b;R++,_++)_>=o.config.grid[y].colors.length&&(_=0),i._drawGridBandRect({c:_,x1:v,y1:N,x2:k,y2:A,type:y}),N+=o.globals.gridHeight/t}("row",t,0,0,o.globals.gridWidth,o.globals.gridHeight/t),((a=o.config.grid.column.colors)===null||a===void 0?void 0:a.length)>0){var l=o.globals.isBarHorizontal||o.config.xaxis.tickPlacement!=="on"||o.config.xaxis.type!=="category"&&!o.config.xaxis.convertedCatToNumeric?e:e-1;o.globals.isXNumeric&&(l=o.globals.xAxisScale.result.length-1);for(var c=o.globals.padHorizontal,u=o.globals.padHorizontal+o.globals.gridWidth/l,h=o.globals.gridHeight,f=0,g=0;f<e;f++,g++){var x;g>=o.config.grid.column.colors.length&&(g=0),o.config.xaxis.type==="datetime"&&(c=this.xaxisLabels[f].position,u=(((x=this.xaxisLabels[f+1])===null||x===void 0?void 0:x.position)||o.globals.gridWidth)-this.xaxisLabels[f].position),this._drawGridBandRect({c:g,x1:c,y1:0,x2:u,y2:h,type:"column"}),c+=o.globals.gridWidth/l}}}}]),r}(),sF=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.coreUtils=new wr(this.ctx)}return dt(r,[{key:"niceScale",value:function(e,t){var s,a,i,o,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,c=1e-11,u=this.w,h=u.globals;h.isBarHorizontal?(s=u.config.xaxis,a=Math.max((h.svgWidth-100)/25,2)):(s=u.config.yaxis[l],a=Math.max((h.svgHeight-100)/15,2)),ne.isNumber(a)||(a=10),i=s.min!==void 0&&s.min!==null,o=s.max!==void 0&&s.min!==null;var f=s.stepSize!==void 0&&s.stepSize!==null,g=s.tickAmount!==void 0&&s.tickAmount!==null,x=g?s.tickAmount:h.niceScaleDefaultTicks[Math.min(Math.round(a/2),h.niceScaleDefaultTicks.length-1)];if(h.isMultipleYAxis&&!g&&h.multiAxisTickAmount>0&&(x=h.multiAxisTickAmount,g=!0),x=x==="dataPoints"?h.dataPoints-1:Math.abs(Math.round(x)),(e===Number.MIN_VALUE&&t===0||!ne.isNumber(e)&&!ne.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE)&&(e=ne.isNumber(s.min)?s.min:0,t=ne.isNumber(s.max)?s.max:e+x,h.allSeriesCollapsed=!1),e>t){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var y=t;t=e,e=y}else e===t&&(e=e===0?0:e-1,t=t===0?2:t+1);var b=[];x<1&&(x=1);var v=x,N=Math.abs(t-e);!i&&e>0&&e/N<.15&&(e=0,i=!0),!o&&t<0&&-t/N<.15&&(t=0,o=!0);var k=(N=Math.abs(t-e))/v,A=k,R=Math.floor(Math.log10(A)),_=Math.pow(10,R),I=Math.ceil(A/_);if(k=A=(I=h.niceScaleAllowedMagMsd[h.yValueDecimal===0?0:1][I])*_,h.isBarHorizontal&&s.stepSize&&s.type!=="datetime"?(k=s.stepSize,f=!0):f&&(k=s.stepSize),f&&s.forceNiceScale){var P=Math.floor(Math.log10(k));k*=Math.pow(10,R-P)}if(i&&o){var T=N/v;if(g)if(f)if(ne.mod(N,k)!=0){var D=ne.getGCD(k,T);k=T/D<10?D:T}else ne.mod(k,T)==0?k=T:(T=k,g=!1);else k=T;else if(f)ne.mod(N,k)==0?T=k:k=T;else if(ne.mod(N,k)==0)T=k;else{T=N/(v=Math.ceil(N/k));var L=ne.getGCD(N,k);N/L<a&&(T=L),k=T}v=Math.round(N/k)}else{if(i||o){if(o)if(g)e=t-k*v;else{var F=e;e=k*Math.floor(e/k),Math.abs(t-e)/ne.getGCD(N,k)>a&&(e=t-k*x,e+=k*Math.floor((F-e)/k))}else if(i)if(g)t=e+k*v;else{var z=t;t=k*Math.ceil(t/k),Math.abs(t-e)/ne.getGCD(N,k)>a&&(t=e+k*x,t+=k*Math.ceil((z-t)/k))}}else if(h.isMultipleYAxis&&g){var O=k*Math.floor(e/k),V=O+k*v;V<t&&(k*=2),V=t,t=(e=O)+k*v,N=Math.abs(t-e),e>0&&e<Math.abs(V-t)&&(e=0,t=k*v),t<0&&-t<Math.abs(O-e)&&(t=0,e=-k*v)}else e=k*Math.floor(e/k),t=k*Math.ceil(t/k);N=Math.abs(t-e),k=ne.getGCD(N,k),v=Math.round(N/k)}if(g||i||o||(v=Math.ceil((N-c)/(k+c)))>16&&ne.getPrimeFactors(v).length<2&&v++,!g&&s.forceNiceScale&&h.yValueDecimal===0&&v>N&&(v=N,k=Math.round(N/v)),v>a&&(!g&&!f||s.forceNiceScale)){var Y=ne.getPrimeFactors(v),H=Y.length-1,$=v;e:for(var X=0;X<H;X++)for(var G=0;G<=H-X;G++){for(var B=Math.min(G+X,H),Q=$,ee=1,se=G;se<=B;se++)ee*=Y[se];if((Q/=ee)<a){$=Q;break e}}k=$===v?N:N/$,v=Math.round(N/k)}h.isMultipleYAxis&&h.multiAxisTickAmount==0&&h.ignoreYAxisIndexes.indexOf(l)<0&&(h.multiAxisTickAmount=v);var le=e-k,Ee=k*c;do le+=k,b.push(ne.stripNumber(le,7));while(t-le>Ee);return{result:b,niceMin:b[0],niceMax:b[b.length-1]}}},{key:"linearScale",value:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,o=Math.abs(t-e),l=[];if(e===t)return{result:l=[e],niceMin:l[0],niceMax:l[l.length-1]};(s=this._adjustTicksForSmallRange(s,a,o))==="dataPoints"&&(s=this.w.globals.dataPoints-1),i||(i=o/s),i=Math.round(100*(i+Number.EPSILON))/100,s===Number.MAX_VALUE&&(s=5,i=1);for(var c=e;s>=0;)l.push(c),c=ne.preciseAddition(c,i),s-=1;return{result:l,niceMin:l[0],niceMax:l[l.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,s){t<=0&&(t=Math.max(e,s)),e<=0&&(e=Math.min(t,s));for(var a=[],i=Math.ceil(Math.log(t)/Math.log(s)+1),o=Math.floor(Math.log(e)/Math.log(s));o<i;o++)a.push(Math.pow(s,o));return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScale",value:function(e,t,s){t<=0&&(t=Math.max(e,s)),e<=0&&(e=Math.min(t,s));for(var a=[],i=Math.log(t)/Math.log(s),o=Math.log(e)/Math.log(s),l=i-o,c=Math.round(l),u=l/c,h=0,f=o;h<c;h++,f+=u)a.push(Math.pow(s,f));return a.push(Math.pow(s,i)),{result:a,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,s){var a=e;if(t!==void 0&&this.w.config.yaxis[t].labels.formatter&&this.w.config.yaxis[t].tickAmount===void 0){var i=Number(this.w.config.yaxis[t].labels.formatter(1));ne.isNumber(i)&&this.w.globals.yValueDecimal===0&&(a=Math.ceil(s))}return a<e?a:e}},{key:"setYScaleForIndex",value:function(e,t,s){var a=this.w.globals,i=this.w.config,o=a.isBarHorizontal?i.xaxis:i.yaxis[e];a.yAxisScale[e]===void 0&&(a.yAxisScale[e]=[]);var l=Math.abs(s-t);o.logarithmic&&l<=5&&(a.invalidLogScale=!0),o.logarithmic&&l>5?(a.allSeriesCollapsed=!1,a.yAxisScale[e]=o.forceNiceScale?this.logarithmicScaleNice(t,s,o.logBase):this.logarithmicScale(t,s,o.logBase)):s!==-Number.MAX_VALUE&&ne.isNumber(s)&&t!==Number.MAX_VALUE&&ne.isNumber(t)?(a.allSeriesCollapsed=!1,a.yAxisScale[e]=this.niceScale(t,s,e)):a.yAxisScale[e]=this.niceScale(Number.MIN_VALUE,0,e)}},{key:"setXScale",value:function(e,t){var s=this.w,a=s.globals;if(t!==-Number.MAX_VALUE&&ne.isNumber(t)){var i=a.xTickAmount;a.xAxisScale=this.linearScale(e,t,i,0,s.config.xaxis.max===void 0?s.config.xaxis.stepSize:void 0)}else a.xAxisScale=this.linearScale(0,10,10);return a.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var e=this,t=this.w.config,s=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var a=s.seriesYAxisMap,i=s.minYArr,o=s.maxYArr;s.allSeriesCollapsed=!0,s.barGroups=[],a.forEach(function(l,c){var u=[];l.forEach(function(h){var f,g=(f=t.series[h])===null||f===void 0?void 0:f.group;u.indexOf(g)<0&&u.push(g)}),l.length>0?function(){var h,f,g=Number.MAX_VALUE,x=-Number.MAX_VALUE,y=g,b=x;if(t.chart.stacked)(function(){var k=new Array(s.dataPoints).fill(0),A=[],R=[],_=[];u.forEach(function(){A.push(k.map(function(){return Number.MIN_VALUE})),R.push(k.map(function(){return Number.MIN_VALUE})),_.push(k.map(function(){return Number.MIN_VALUE}))});for(var I=function(T){!h&&t.series[l[T]].type&&(h=t.series[l[T]].type);var D=l[T];f=t.series[D].group?t.series[D].group:"axis-".concat(c),!(s.collapsedSeriesIndices.indexOf(D)<0&&s.ancillaryCollapsedSeriesIndices.indexOf(D)<0)||(s.allSeriesCollapsed=!1,u.forEach(function(L,F){if(t.series[D].group===L)for(var z=0;z<s.series[D].length;z++){var O=s.series[D][z];O>=0?R[F][z]+=O:_[F][z]+=O,A[F][z]+=O,y=Math.min(y,O),b=Math.max(b,O)}})),h!=="bar"&&h!=="column"||s.barGroups.push(f)},P=0;P<l.length;P++)I(P);h||(h=t.chart.type),h==="bar"||h==="column"?u.forEach(function(T,D){g=Math.min(g,Math.min.apply(null,_[D])),x=Math.max(x,Math.max.apply(null,R[D]))}):(u.forEach(function(T,D){y=Math.min(y,Math.min.apply(null,A[D])),b=Math.max(b,Math.max.apply(null,A[D]))}),g=y,x=b),g===Number.MIN_VALUE&&x===Number.MIN_VALUE&&(x=-Number.MAX_VALUE)})();else for(var v=0;v<l.length;v++){var N=l[v];g=Math.min(g,i[N]),x=Math.max(x,o[N]),!(s.collapsedSeriesIndices.indexOf(N)<0&&s.ancillaryCollapsedSeriesIndices.indexOf(N)<0)||(s.allSeriesCollapsed=!1)}t.yaxis[c].min!==void 0&&(g=typeof t.yaxis[c].min=="function"?t.yaxis[c].min(g):t.yaxis[c].min),t.yaxis[c].max!==void 0&&(x=typeof t.yaxis[c].max=="function"?t.yaxis[c].max(x):t.yaxis[c].max),s.barGroups=s.barGroups.filter(function(k,A,R){return R.indexOf(k)===A}),e.setYScaleForIndex(c,g,x),l.forEach(function(k){i[k]=s.yAxisScale[c].niceMin,o[k]=s.yAxisScale[c].niceMax})}():e.setYScaleForIndex(c,0,-Number.MAX_VALUE)})}}]),r}(),hj=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.scales=new sF(e)}return dt(r,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=this.w.config,o=this.w.globals,l=-Number.MAX_VALUE,c=Number.MIN_VALUE;a===null&&(a=e+1);var u=o.series,h=u,f=u;i.chart.type==="candlestick"?(h=o.seriesCandleL,f=o.seriesCandleH):i.chart.type==="boxPlot"?(h=o.seriesCandleO,f=o.seriesCandleC):o.isRangeData&&(h=o.seriesRangeStart,f=o.seriesRangeEnd);var g=!1;if(o.seriesX.length>=a){var x,y=(x=o.brushSource)===null||x===void 0?void 0:x.w.config.chart.brush;(i.chart.zoom.enabled&&i.chart.zoom.autoScaleYaxis||y!=null&&y.enabled&&y!=null&&y.autoScaleYaxis)&&(g=!0)}for(var b=e;b<a;b++){o.dataPoints=Math.max(o.dataPoints,u[b].length);var v=i.series[b].type;o.categoryLabels.length&&(o.dataPoints=o.categoryLabels.filter(function(D){return D!==void 0}).length),o.labels.length&&i.xaxis.type!=="datetime"&&o.series.reduce(function(D,L){return D+L.length},0)!==0&&(o.dataPoints=Math.max(o.dataPoints,o.labels.length));var N=0,k=u[b].length-1;if(g){if(i.xaxis.min)for(;N<k&&o.seriesX[b][N]<i.xaxis.min;N++);if(i.xaxis.max)for(;k>N&&o.seriesX[b][k]>i.xaxis.max;k--);}for(var A=N;A<=k&&A<o.series[b].length;A++){var R=u[b][A];if(R!==null&&ne.isNumber(R)){var _,I,P,T;switch(((_=f[b])===null||_===void 0?void 0:_[A])!==void 0&&(l=Math.max(l,f[b][A]),t=Math.min(t,f[b][A])),((I=h[b])===null||I===void 0?void 0:I[A])!==void 0&&(t=Math.min(t,h[b][A]),s=Math.max(s,h[b][A])),v){case"candlestick":o.seriesCandleC[b][A]!==void 0&&(l=Math.max(l,o.seriesCandleH[b][A]),t=Math.min(t,o.seriesCandleL[b][A]));break;case"boxPlot":o.seriesCandleC[b][A]!==void 0&&(l=Math.max(l,o.seriesCandleC[b][A]),t=Math.min(t,o.seriesCandleO[b][A]))}v&&v!=="candlestick"&&v!=="boxPlot"&&v!=="rangeArea"&&v!=="rangeBar"&&(l=Math.max(l,o.series[b][A]),t=Math.min(t,o.series[b][A])),o.seriesGoals[b]&&o.seriesGoals[b][A]&&Array.isArray(o.seriesGoals[b][A])&&o.seriesGoals[b][A].forEach(function(D){l=Math.max(l,D.value),t=Math.min(t,D.value)}),s=l,R=ne.noExponents(R),ne.isFloat(R)&&(o.yValueDecimal=Math.max(o.yValueDecimal,R.toString().split(".")[1].length)),c>((P=h[b])===null||P===void 0?void 0:P[A])&&((T=h[b])===null||T===void 0?void 0:T[A])<0&&(c=h[b][A])}else o.hasNullValues=!0}v!=="bar"&&v!=="column"||(c<0&&l<0&&(l=0,s=Math.max(s,0)),c===Number.MIN_VALUE&&(c=0,t=Math.min(t,0)))}return i.chart.type==="rangeBar"&&o.seriesRangeStart.length&&o.isBarHorizontal&&(c=t),i.chart.type==="bar"&&(c<0&&l<0&&(l=0),c===Number.MIN_VALUE&&(c=0)),{minY:c,maxY:l,lowestY:t,highestY:s}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var s,a=Number.MAX_VALUE;if(e.isMultipleYAxis){a=Number.MAX_VALUE;for(var i=0;i<e.series.length;i++)s=this.getMinYMaxY(i),e.minYArr[i]=s.lowestY,e.maxYArr[i]=s.highestY,a=Math.min(a,s.lowestY)}return s=this.getMinYMaxY(0,a,null,e.series.length),t.chart.type==="bar"?(e.minY=s.minY,e.maxY=s.maxY):(e.minY=s.lowestY,e.maxY=s.highestY),a=s.lowestY,t.chart.stacked&&this._setStackedMinMax(),t.chart.type==="line"||t.chart.type==="area"||t.chart.type==="scatter"||t.chart.type==="candlestick"||t.chart.type==="boxPlot"||t.chart.type==="rangeBar"&&!e.isBarHorizontal?e.minY===Number.MIN_VALUE&&a!==-Number.MAX_VALUE&&a!==e.maxY&&(e.minY=a):e.minY=e.minY!==Number.MIN_VALUE?Math.min(s.minY,e.minY):s.minY,t.yaxis.forEach(function(o,l){o.max!==void 0&&(typeof o.max=="number"?e.maxYArr[l]=o.max:typeof o.max=="function"&&(e.maxYArr[l]=o.max(e.isMultipleYAxis?e.maxYArr[l]:e.maxY)),e.maxY=e.maxYArr[l]),o.min!==void 0&&(typeof o.min=="number"?e.minYArr[l]=o.min:typeof o.min=="function"&&(e.minYArr[l]=o.min(e.isMultipleYAxis?e.minYArr[l]===Number.MIN_VALUE?0:e.minYArr[l]:e.minY)),e.minY=e.minYArr[l])}),e.isBarHorizontal&&["min","max"].forEach(function(o){t.xaxis[o]!==void 0&&typeof t.xaxis[o]=="number"&&(o==="min"?e.minY=t.xaxis[o]:e.maxY=t.xaxis[o])}),e.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),e.minY=a):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.minY,e.maxYArr[0]=e.maxY),e.barGroups=[],e.lineGroups=[],e.areaGroups=[],t.series.forEach(function(o){switch(o.type||t.chart.type){case"bar":case"column":e.barGroups.push(o.group);break;case"line":e.lineGroups.push(o.group);break;case"area":e.areaGroups.push(o.group)}}),e.barGroups=e.barGroups.filter(function(o,l,c){return c.indexOf(o)===l}),e.lineGroups=e.lineGroups.filter(function(o,l,c){return c.indexOf(o)===l}),e.areaGroups=e.areaGroups.filter(function(o,l,c){return c.indexOf(o)===l}),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,s=t.xaxis.type==="numeric"||t.xaxis.type==="datetime"||t.xaxis.type==="category"&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var c=0;c<e.series.length;c++)if(e.labels[c])for(var u=0;u<e.labels[c].length;u++)e.labels[c][u]!==null&&ne.isNumber(e.labels[c][u])&&(e.maxX=Math.max(e.maxX,e.labels[c][u]),e.initialMaxX=Math.max(e.maxX,e.labels[c][u]),e.minX=Math.min(e.minX,e.labels[c][u]),e.initialMinX=Math.min(e.minX,e.labels[c][u]))}(),e.noLabelsProvided&&t.xaxis.categories.length===0&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var a=10;if(t.xaxis.tickAmount===void 0)a=Math.round(e.svgWidth/150),t.xaxis.type==="numeric"&&e.dataPoints<30&&(a=e.dataPoints-1),a>e.dataPoints&&e.dataPoints!==0&&(a=e.dataPoints-1);else if(t.xaxis.tickAmount==="dataPoints"){if(e.series.length>1&&(a=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric){var i=Math.round(e.maxX-e.minX);i<30&&(a=i)}}else a=t.xaxis.tickAmount;if(e.xTickAmount=a,t.xaxis.max!==void 0&&typeof t.xaxis.max=="number"&&(e.maxX=t.xaxis.max),t.xaxis.min!==void 0&&typeof t.xaxis.min=="number"&&(e.minX=t.xaxis.min),t.xaxis.range!==void 0&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var o=[],l=e.minX-1;l<e.maxX;l++)o.push(l+1);e.xAxisScale={result:o,niceMin:o[0],niceMax:o[o.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(0,a,a,0,t.xaxis.stepSize),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,a-1,0,t.xaxis.stepSize),e.seriesX=e.labels.slice());s&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ){for(var t=0;t<e.series.length;t++)if(e.seriesZ[t]!==void 0)for(var s=0;s<e.seriesZ[t].length;s++)e.seriesZ[t][s]!==null&&ne.isNumber(e.seriesZ[t][s])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][s]),e.minZ=Math.min(e.minZ,e.seriesZ[t][s]))}}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var s=new ma(this.ctx);if(t.xaxis.type==="datetime"){var a=s.getDate(e.minX);t.xaxis.labels.datetimeUTC?a.setUTCDate(a.getUTCDate()-2):a.setDate(a.getDate()-2),e.minX=new Date(a).getTime();var i=s.getDate(e.maxX);t.xaxis.labels.datetimeUTC?i.setUTCDate(i.getUTCDate()+2):i.setDate(i.getDate()+2),e.maxX=new Date(i).getTime()}else(t.xaxis.type==="numeric"||t.xaxis.type==="category"&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach(function(t,s){if(t.length){t.length===1&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var a=t.slice();a.sort(function(i,o){return i-o}),a.forEach(function(i,o){if(o>0){var l=i-a[o-1];l>0&&(e.minXDiff=Math.min(l,e.minXDiff))}}),e.dataPoints!==1&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}})}},{key:"_setStackedMinMax",value:function(){var e=this,t=this.w.globals;if(t.series.length){var s=t.seriesGroups;s.length||(s=[this.w.globals.seriesNames.map(function(o){return o})]);var a={},i={};s.forEach(function(o){a[o]=[],i[o]=[],e.w.config.series.map(function(l,c){return o.indexOf(t.seriesNames[c])>-1?c:null}).filter(function(l){return l!==null}).forEach(function(l){for(var c=0;c<t.series[t.maxValsInArrayIndex].length;c++){var u,h,f,g;a[o][c]===void 0&&(a[o][c]=0,i[o][c]=0),(e.w.config.chart.stacked&&!t.comboCharts||e.w.config.chart.stacked&&t.comboCharts&&(!e.w.config.chart.stackOnlyBar||((u=e.w.config.series)===null||u===void 0||(h=u[l])===null||h===void 0?void 0:h.type)==="bar"||((f=e.w.config.series)===null||f===void 0||(g=f[l])===null||g===void 0?void 0:g.type)==="column"))&&t.series[l][c]!==null&&ne.isNumber(t.series[l][c])&&(t.series[l][c]>0?a[o][c]+=parseFloat(t.series[l][c])+1e-4:i[o][c]+=parseFloat(t.series[l][c]))}})}),Object.entries(a).forEach(function(o){var l=jL(o,1)[0];a[l].forEach(function(c,u){t.maxY=Math.max(t.maxY,a[l][u]),t.minY=Math.min(t.minY,i[l][u])})})}}}]),r}(),hS=function(){function r(e,t){ct(this,r),this.ctx=e,this.elgrid=t,this.w=e.w;var s=this.w;this.xaxisFontSize=s.config.xaxis.labels.style.fontSize,this.axisFontFamily=s.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=s.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=s.config.chart.type==="bar"&&s.config.plotOptions.bar.horizontal,this.xAxisoffX=s.config.xaxis.position==="bottom"?s.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new Yl(e)}return dt(r,[{key:"drawYaxis",value:function(e){var t=this.w,s=new Be(this.ctx),a=t.config.yaxis[e].labels.style,i=a.fontSize,o=a.fontFamily,l=a.fontWeight,c=s.group({class:"apexcharts-yaxis",rel:e,transform:"translate(".concat(t.globals.translateYAxisX[e],", 0)")});if(this.axesUtils.isYAxisHidden(e))return c;var u=s.group({class:"apexcharts-yaxis-texts-g"});c.add(u);var h=t.globals.yAxisScale[e].result.length-1,f=t.globals.gridHeight/h,g=t.globals.yLabelFormatters[e],x=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice());if(t.config.yaxis[e].labels.show){var y=t.globals.translateY+t.config.yaxis[e].labels.offsetY;t.globals.isBarHorizontal?y=0:t.config.chart.type==="heatmap"&&(y-=f/2),y+=parseInt(i,10)/3;for(var b=h;b>=0;b--){var v=g(x[b],b,t),N=t.config.yaxis[e].labels.padding;t.config.yaxis[e].opposite&&t.config.yaxis.length!==0&&(N*=-1);var k=this.getTextAnchor(t.config.yaxis[e].labels.align,t.config.yaxis[e].opposite),A=this.axesUtils.getYAxisForeColor(a.colors,e),R=Array.isArray(A)?A[b]:A,_=ne.listToArray(t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-label tspan"))).map(function(P){return P.textContent}),I=s.drawText({x:N,y,text:_.includes(v)&&!t.config.yaxis[e].labels.showDuplicates?"":v,textAnchor:k,fontSize:i,fontFamily:o,fontWeight:l,maxWidth:t.config.yaxis[e].labels.maxWidth,foreColor:R,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(a.cssClass)});u.add(I),this.addTooltip(I,v),t.config.yaxis[e].labels.rotate!==0&&this.rotateLabel(s,I,firstLabel,t.config.yaxis[e].labels.rotate),y+=f}}return this.addYAxisTitle(s,c,e),this.addAxisBorder(s,c,e,h,f),c}},{key:"getTextAnchor",value:function(e,t){return e==="left"?"start":e==="center"?"middle":e==="right"?"end":t?"start":"end"}},{key:"addTooltip",value:function(e,t){var s=document.createElementNS(this.w.globals.SVGNS,"title");s.textContent=Array.isArray(t)?t.join(" "):t,e.node.appendChild(s)}},{key:"rotateLabel",value:function(e,t,s,a){var i=e.rotateAroundCenter(s.node),o=e.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(".concat(a," ").concat(i.x," ").concat(o.y,")"))}},{key:"addYAxisTitle",value:function(e,t,s){var a=this.w;if(a.config.yaxis[s].title.text!==void 0){var i=e.group({class:"apexcharts-yaxis-title"}),o=a.config.yaxis[s].opposite?a.globals.translateYAxisX[s]:0,l=e.drawText({x:o,y:a.globals.gridHeight/2+a.globals.translateY+a.config.yaxis[s].title.offsetY,text:a.config.yaxis[s].title.text,textAnchor:"end",foreColor:a.config.yaxis[s].title.style.color,fontSize:a.config.yaxis[s].title.style.fontSize,fontWeight:a.config.yaxis[s].title.style.fontWeight,fontFamily:a.config.yaxis[s].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(a.config.yaxis[s].title.style.cssClass)});i.add(l),t.add(i)}}},{key:"addAxisBorder",value:function(e,t,s,a,i){var o=this.w,l=o.config.yaxis[s].axisBorder,c=31+l.offsetX;if(o.config.yaxis[s].opposite&&(c=-31-l.offsetX),l.show){var u=e.drawLine(c,o.globals.translateY+l.offsetY-2,c,o.globals.gridHeight+o.globals.translateY+l.offsetY+2,l.color,0,l.width);t.add(u)}o.config.yaxis[s].axisTicks.show&&this.axesUtils.drawYAxisTicks(c,a,l,o.config.yaxis[s].axisTicks,s,i,t)}},{key:"drawYaxisInversed",value:function(e){var t=this.w,s=new Be(this.ctx),a=s.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),i=s.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});a.add(i);var o=t.globals.yAxisScale[e].result.length-1,l=t.globals.gridWidth/o+.1,c=l+t.config.xaxis.labels.offsetX,u=t.globals.xLabelFormatter,h=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice()),f=t.globals.timescaleLabels;if(f.length>0&&(this.xaxisLabels=f.slice(),o=(h=f.slice()).length),t.config.xaxis.labels.show)for(var g=f.length?0:o;f.length?g<f.length:g>=0;f.length?g++:g--){var x=u(h[g],g,t),y=t.globals.gridWidth+t.globals.padHorizontal-(c-l+t.config.xaxis.labels.offsetX);if(f.length){var b=this.axesUtils.getLabel(h,f,y,g,this.drawnLabels,this.xaxisFontSize);y=b.x,x=b.text,this.drawnLabels.push(b.text),g===0&&t.globals.skipFirstTimelinelabel&&(x=""),g===h.length-1&&t.globals.skipLastTimelinelabel&&(x="")}var v=s.drawText({x:y,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-(t.config.xaxis.position==="top"?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:x,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(t.config.xaxis.labels.style.cssClass)});i.add(v),v.tspan(x),this.addTooltip(v,x),c+=l}return this.inversedYAxisTitleText(a),this.inversedYAxisBorder(a),a}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,s=new Be(this.ctx),a=t.config.xaxis.axisBorder;if(a.show){var i=0;t.config.chart.type==="bar"&&t.globals.isXNumeric&&(i-=15);var o=s.drawLine(t.globals.padHorizontal+i+a.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,a.color,0,a.height);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(o):e.add(o)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,s=new Be(this.ctx);if(t.config.xaxis.title.text!==void 0){var a=s.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),i=s.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(t.config.xaxis.title.style.cssClass)});a.add(i),e.add(a)}}},{key:"yAxisTitleRotate",value:function(e,t){var s=this.w,a=new Be(this.ctx),i=s.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g")),o=i?i.getBoundingClientRect():{width:0,height:0},l=s.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text")),c=l?l.getBoundingClientRect():{width:0,height:0};if(l){var u=this.xPaddingForYAxisTitle(e,o,c,t);l.setAttribute("x",u.xPos-(t?10:0));var h=a.rotateAroundCenter(l);l.setAttribute("transform","rotate(".concat(t?-1*s.config.yaxis[e].title.rotate:s.config.yaxis[e].title.rotate," ").concat(h.x," ").concat(h.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,s,a){var i=this.w,o=0,l=10;return i.config.yaxis[e].title.text===void 0||e<0?{xPos:o,padd:0}:(a?o=t.width+i.config.yaxis[e].title.offsetX+s.width/2+l/2:(o=-1*t.width+i.config.yaxis[e].title.offsetX+l/2+s.width/2,i.globals.isBarHorizontal&&(l=25,o=-1*t.width-i.config.yaxis[e].title.offsetX-l)),{xPos:o,padd:l})}},{key:"setYAxisXPosition",value:function(e,t){var s=this.w,a=0,i=0,o=18,l=1;s.config.yaxis.length>1&&(this.multipleYs=!0),s.config.yaxis.forEach(function(c,u){var h=s.globals.ignoreYAxisIndexes.includes(u)||!c.show||c.floating||e[u].width===0,f=e[u].width+t[u].width;c.opposite?s.globals.isBarHorizontal?(i=s.globals.gridWidth+s.globals.translateX-1,s.globals.translateYAxisX[u]=i-c.labels.offsetX):(i=s.globals.gridWidth+s.globals.translateX+l,h||(l+=f+20),s.globals.translateYAxisX[u]=i-c.labels.offsetX+20):(a=s.globals.translateX-o,h||(o+=f+20),s.globals.translateYAxisX[u]=a+c.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var e=this.w;ne.listToArray(e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach(function(t,s){var a=e.config.yaxis[s];if(a&&!a.floating&&a.labels.align!==void 0){var i=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(s,"'] .apexcharts-yaxis-texts-g")),o=ne.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(s,"'] .apexcharts-yaxis-label"))),l=i.getBoundingClientRect();o.forEach(function(c){c.setAttribute("text-anchor",a.labels.align)}),a.labels.align!=="left"||a.opposite?a.labels.align==="center"?i.setAttribute("transform","translate(".concat(l.width/2*(a.opposite?1:-1),", 0)")):a.labels.align==="right"&&a.opposite&&i.setAttribute("transform","translate(".concat(l.width,", 0)")):i.setAttribute("transform","translate(-".concat(l.width,", 0)"))}})}}]),r}(),ede=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.documentEvent=ne.bind(this.documentEvent,this)}return dt(r,[{key:"addEventListener",value:function(e,t){var s=this.w;s.globals.events.hasOwnProperty(e)?s.globals.events[e].push(t):s.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var s=this.w;if(s.globals.events.hasOwnProperty(e)){var a=s.globals.events[e].indexOf(t);a!==-1&&s.globals.events[e].splice(a,1)}}},{key:"fireEvent",value:function(e,t){var s=this.w;if(s.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var a=s.globals.events[e],i=a.length,o=0;o<i;o++)a[o].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,s=this.ctx,a=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach(function(i){a.addEventListener(i,function(o){var l=o.target.getAttribute("i")===null&&t.globals.capturedSeriesIndex!==-1?t.globals.capturedSeriesIndex:o.target.getAttribute("i"),c=o.target.getAttribute("j")===null&&t.globals.capturedDataPointIndex!==-1?t.globals.capturedDataPointIndex:o.target.getAttribute("j"),u=Object.assign({},t,{seriesIndex:t.globals.axisCharts?l:0,dataPointIndex:c});o.type==="mousemove"||o.type==="touchmove"?typeof t.config.chart.events.mouseMove=="function"&&t.config.chart.events.mouseMove(o,s,u):o.type==="mouseleave"||o.type==="touchleave"?typeof t.config.chart.events.mouseLeave=="function"&&t.config.chart.events.mouseLeave(o,s,u):(o.type==="mouseup"&&o.which===1||o.type==="touchend")&&(typeof t.config.chart.events.click=="function"&&t.config.chart.events.click(o,s,u),s.ctx.events.fireEvent("click",[o,s,u]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(i){t.globals.dom.baseEl.addEventListener(i,e.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,s=e.target.className;if(e.type==="click"){var a=t.globals.dom.baseEl.querySelector(".apexcharts-menu");a&&a.classList.contains("apexcharts-menu-open")&&s!=="apexcharts-menu-icon"&&a.classList.remove("apexcharts-menu-open")}t.globals.clientX=e.type==="touchmove"?e.touches[0].clientX:e.clientX,t.globals.clientY=e.type==="touchmove"?e.touches[0].clientY:e.clientY}}]),r}(),tde=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var s=t.filter(function(i){return i.name===e})[0];if(!s)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var a=ne.extend(QL,s);this.w.globals.locale=a.options}}]),r}(),sde=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"drawAxis",value:function(e,t){var s,a,i=this,o=this.w.globals,l=this.w.config,c=new og(this.ctx,t),u=new hS(this.ctx,t);o.axisCharts&&e!=="radar"&&(o.isBarHorizontal?(a=u.drawYaxisInversed(0),s=c.drawXaxisInversed(0),o.dom.elGraphical.add(s),o.dom.elGraphical.add(a)):(s=c.drawXaxis(),o.dom.elGraphical.add(s),l.yaxis.map(function(h,f){if(o.ignoreYAxisIndexes.indexOf(f)===-1&&(a=u.drawYaxis(f),o.dom.Paper.add(a),i.w.config.grid.position==="back")){var g=o.dom.Paper.children()[1];g.remove(),o.dom.Paper.add(g)}})))}}]),r}(),mj=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new Be(this.ctx),s=new ga(this.ctx),a=e.config.xaxis.crosshairs.fill.gradient,i=e.config.xaxis.crosshairs.dropShadow,o=e.config.xaxis.crosshairs.fill.type,l=a.colorFrom,c=a.colorTo,u=a.opacityFrom,h=a.opacityTo,f=a.stops,g=i.enabled,x=i.left,y=i.top,b=i.blur,v=i.color,N=i.opacity,k=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){o==="gradient"&&(k=t.drawGradient("vertical",l,c,u,h,null,f,null));var A=t.drawRect();e.config.xaxis.crosshairs.width===1&&(A=t.drawLine());var R=e.globals.gridHeight;(!ne.isNumber(R)||R<0)&&(R=0);var _=e.config.xaxis.crosshairs.width;(!ne.isNumber(_)||_<0)&&(_=0),A.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:R,width:_,height:R,fill:k,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),g&&(A=s.dropShadow(A,{left:x,top:y,blur:b,color:v,opacity:N})),e.globals.dom.elGraphical.add(A)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new Be(this.ctx),s=e.config.yaxis[0].crosshairs,a=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var i=t.drawLine(-a,0,e.globals.gridWidth+a,0,s.stroke.color,s.stroke.dashArray,s.stroke.width);i.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(i)}var o=t.drawLine(-a,0,e.globals.gridWidth+a,0,s.stroke.color,0,0);o.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(o)}}]),r}(),rde=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"checkResponsiveConfig",value:function(e){var t=this,s=this.w,a=s.config;if(a.responsive.length!==0){var i=a.responsive.slice();i.sort(function(u,h){return u.breakpoint>h.breakpoint?1:h.breakpoint>u.breakpoint?-1:0}).reverse();var o=new ig({}),l=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=i[0].breakpoint,f=window.innerWidth>0?window.innerWidth:screen.width;if(f>h){var g=ne.clone(s.globals.initialConfig);g.series=ne.clone(s.config.series);var x=wr.extendArrayProps(o,g,s);u=ne.extend(x,u),u=ne.extend(s.config,u),t.overrideResponsiveOptions(u)}else for(var y=0;y<i.length;y++)f<i[y].breakpoint&&(u=wr.extendArrayProps(o,i[y].options,s),u=ne.extend(s.config,u),t.overrideResponsiveOptions(u))};if(e){var c=wr.extendArrayProps(o,e,s);c=ne.extend(s.config,c),l(c=ne.extend(c,e))}else l({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new ig(e).init({responsiveOverride:!0});this.w.config=t}}]),r}(),ade=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return dt(r,[{key:"checkHeatmapDistributed",value:function(){var e=this.w.config,t=e.chart,s=e.plotOptions;return t.type==="treemap"&&s.treemap&&s.treemap.distributed||t.type==="heatmap"&&s.heatmap&&s.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var e=this.w.config,t=e.chart,s=e.plotOptions;return s.bar&&s.bar.distributed&&(t.type==="bar"||t.type==="rangeBar")}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this.w,t=new ne;e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode||"light"));var s=Gr(e.config.colors||e.config.fill.colors||[]);e.globals.colors=this.getColors(s),this.applySeriesColors(e.globals.seriesColors,e.globals.colors),e.config.theme.monochrome.enabled&&(e.globals.colors=this.getMonochromeColors(e.config.theme.monochrome,e.globals.series,t));var a=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),this.applyColorTypes(["fill","stroke"],a),this.applyDataLabelsColors(a),this.applyRadarPolygonsColors(),this.applyMarkersColors(a)}},{key:"getColors",value:function(e){var t=this,s=this.w;return e&&e.length!==0?Array.isArray(e)&&e.length>0&&typeof e[0]=="function"?(this.isColorFn=!0,s.config.series.map(function(a,i){var o=e[i]||e[0];return typeof o=="function"?o({value:s.globals.axisCharts?s.globals.series[i][0]||0:s.globals.series[i],seriesIndex:i,dataPointIndex:i,w:t.w}):o})):e:this.predefined()}},{key:"applySeriesColors",value:function(e,t){e.forEach(function(s,a){s&&(t[a]=s)})}},{key:"getMonochromeColors",value:function(e,t,s){var a=e.color,i=e.shadeIntensity,o=e.shadeTo,l=this.isBarDistributed||this.isHeatmapDistributed?t[0].length*t.length:t.length,c=1/(l/i),u=0;return Array.from({length:l},function(){var h=o==="dark"?s.shadeColor(-1*u,a):s.shadeColor(u,a);return u+=c,h})}},{key:"applyColorTypes",value:function(e,t){var s=this,a=this.w;e.forEach(function(i){a.globals[i].colors=a.config[i].colors===void 0?s.isColorFn?a.config.colors:t:a.config[i].colors.slice(),s.pushExtraColors(a.globals[i].colors)})}},{key:"applyDataLabelsColors",value:function(e){var t=this.w;t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors===void 0?e:t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var e=this.w;e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors===void 0?[e.config.theme.mode==="dark"?"#343A3F":"none"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(e){var t=this.w;t.globals.markers.colors=t.config.markers.colors===void 0?e:t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=this.w,i=t||a.globals.series.length;if(s===null&&(s=this.isBarDistributed||this.isHeatmapDistributed||a.config.chart.type==="heatmap"&&a.config.plotOptions.heatmap&&a.config.plotOptions.heatmap.colorScale.inverse),s&&a.globals.series.length&&(i=a.globals.series[a.globals.maxValsInArrayIndex].length*a.globals.series.length),e.length<i)for(var o=i-e.length,l=0;l<o;l++)e.push(e[l])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode,s=t==="dark"?"palette4":t==="light"?"palette1":e.theme.palette||"palette1",a=t==="dark"?"#f6f7f8":t==="light"?"#373d3f":e.chart.foreColor||"#373d3f";return e.tooltip.theme=t||"light",e.chart.foreColor=a,e.theme.palette=s,e}},{key:"predefined",value:function(){var e=this.w.config.theme.palette,t=this.ctx.constructor.getThemePalettes();return t[e]||t.palette1}}]),r}(),nde=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,s=e==="title"?t.config.title:t.config.subtitle,a=t.globals.svgWidth/2,i=s.offsetY,o="middle";if(s.align==="left"?(a=10,o="start"):s.align==="right"&&(a=t.globals.svgWidth-10,o="end"),a+=s.offsetX,i=i+parseInt(s.style.fontSize,10)+s.margin/2,s.text!==void 0){var l=new Be(this.ctx).drawText({x:a,y:i,text:s.text,textAnchor:o,fontSize:s.style.fontSize,fontFamily:s.style.fontFamily,fontWeight:s.style.fontWeight,foreColor:s.style.color,opacity:1});l.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(l)}}}]),r}(),ide=function(){function r(e){ct(this,r),this.w=e.w,this.dCtx=e}return dt(r,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,s=0,a=0,i=e==="title"?t.config.title.floating:t.config.subtitle.floating,o=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(o!==null&&!i){var l=o.getBoundingClientRect();s=l.width,a=t.globals.axisCharts?l.height+5:l.height}return{width:s,height:a}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.elLegendWrap;e.config.legend.height||e.config.legend.position!=="top"&&e.config.legend.position!=="bottom"||(t.style.maxHeight=e.globals.svgHeight/2+"px");var s=Object.assign({},ne.getBoundingClientRect(t));return t!==null&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:s.x,y:s.y,height:s.height,width:s.height===0?0:s.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},e.config.legend.position!=="left"&&e.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var e=this,t=this.w,s=[];t.config.series.forEach(function(c,u){c.data.forEach(function(h,f){var g;g=t.globals.series[u][f],a=t.config.dataLabels.formatter(g,{ctx:e.dCtx.ctx,seriesIndex:u,dataPointIndex:f,w:t}),s.push(a)})});var a=ne.getLargestStringFromArr(s),i=new Be(this.dCtx.ctx),o=t.config.dataLabels.style,l=i.getTextRects(a,parseInt(o.fontSize),o.fontFamily);return{width:1.05*l.width,height:l.height}}},{key:"getLargestStringFromMultiArr",value:function(e,t){var s=e;if(this.w.globals.isMultiLineX){var a=t.map(function(o,l){return Array.isArray(o)?o.length:1}),i=Math.max.apply(Math,Gr(a));s=t[a.indexOf(i)]}return s}}]),r}(),ode=function(){function r(e){ct(this,r),this.w=e.w,this.dCtx=e}return dt(r,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,s=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&s.length===0&&(s=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var a=this.getxAxisTimeScaleLabelsCoords();e={width:a.width,height:a.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=t.config.legend.position!=="left"&&t.config.legend.position!=="right"||t.config.legend.floating?0:this.dCtx.lgRect.width;var i=t.globals.xLabelFormatter,o=ne.getLargestStringFromArr(s),l=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,s);t.globals.isBarHorizontal&&(l=o=t.globals.yAxisScale[0].result.reduce(function(y,b){return y.length>b.length?y:b},0));var c=new Hg(this.dCtx.ctx),u=o;o=c.xLabelFormat(i,o,u,{i:void 0,dateFormatter:new ma(this.dCtx.ctx).formatDate,w:t}),l=c.xLabelFormat(i,l,u,{i:void 0,dateFormatter:new ma(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&o===void 0||String(o).trim()==="")&&(l=o="1");var h=new Be(this.dCtx.ctx),f=h.getTextRects(o,t.config.xaxis.labels.style.fontSize),g=f;if(o!==l&&(g=h.getTextRects(l,t.config.xaxis.labels.style.fontSize)),(e={width:f.width>=g.width?f.width:g.width,height:f.height>=g.height?f.height:g.height}).width*s.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&t.config.xaxis.labels.rotate!==0||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var x=function(y){return h.getTextRects(y,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};f=x(o),o!==l&&(g=x(l)),e.height=(f.height>g.height?f.height:g.height)/1.5,e.width=f.width>g.width?f.width:g.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasXaxisGroups)return{width:0,height:0};var s,a=((e=t.config.xaxis.group.style)===null||e===void 0?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,i=t.globals.groups.map(function(f){return f.title}),o=ne.getLargestStringFromArr(i),l=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,i),c=new Be(this.dCtx.ctx),u=c.getTextRects(o,a),h=u;return o!==l&&(h=c.getTextRects(l,a)),s={width:u.width>=h.width?u.width:h.width,height:u.height>=h.height?u.height:h.height},t.config.xaxis.labels.show||(s={width:0,height:0}),{width:s.width,height:s.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,s=0;if(e.config.xaxis.title.text!==void 0){var a=new Be(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=a.width,s=a.height}return{width:t,height:s}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var s=this.dCtx.timescaleLabels.map(function(i){return i.value}),a=s.reduce(function(i,o){return i===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):i.length>o.length?i:o},0);return 1.05*(e=new Be(this.dCtx.ctx).getTextRects(a,t.config.xaxis.labels.style.fontSize)).width*s.length>t.globals.gridWidth&&t.config.xaxis.labels.rotate!==0&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,s=this.w,a=s.globals,i=s.config,o=i.xaxis.type,l=e.width;a.skipLastTimelinelabel=!1,a.skipFirstTimelinelabel=!1;var c=s.config.yaxis[0].opposite&&s.globals.isBarHorizontal,u=function(h,f){i.yaxis.length>1&&function(g){return a.collapsedSeriesIndices.indexOf(g)!==-1}(f)||function(g){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var x=t.dCtx.timescaleLabels[0],y=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+l/1.75-t.dCtx.yAxisWidthRight,b=x.position-l/1.75+t.dCtx.yAxisWidthLeft,v=s.config.legend.position==="right"&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;y>a.svgWidth-a.translateX-v&&(a.skipLastTimelinelabel=!0),b<-(g.show&&!g.floating||i.chart.type!=="bar"&&i.chart.type!=="candlestick"&&i.chart.type!=="rangeBar"&&i.chart.type!=="boxPlot"?10:l/1.75)&&(a.skipFirstTimelinelabel=!0)}else o==="datetime"?t.dCtx.gridPad.right<l&&!a.rotateXLabels&&(a.skipLastTimelinelabel=!0):o!=="datetime"&&t.dCtx.gridPad.right<l/2-t.dCtx.yAxisWidthRight&&!a.rotateXLabels&&!s.config.xaxis.labels.trim&&(t.dCtx.xPadRight=l/2+1)}(h)};i.yaxis.forEach(function(h,f){c?(t.dCtx.gridPad.left<l&&(t.dCtx.xPadLeft=l/2+1),t.dCtx.xPadRight=l/2+1):u(h,f)})}}]),r}(),lde=function(){function r(e){ct(this,r),this.w=e.w,this.dCtx=e}return dt(r,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,s=[],a=10,i=new Yl(this.dCtx.ctx);return t.config.yaxis.map(function(o,l){var c={seriesIndex:l,dataPointIndex:-1,w:t},u=t.globals.yAxisScale[l],h=0;if(!i.isYAxisHidden(l)&&o.labels.show&&o.labels.minWidth!==void 0&&(h=o.labels.minWidth),!i.isYAxisHidden(l)&&o.labels.show&&u.result.length){var f=t.globals.yLabelFormatters[l],g=u.niceMin===Number.MIN_VALUE?0:u.niceMin,x=u.result.reduce(function(R,_){var I,P;return((I=String(f(R,c)))===null||I===void 0?void 0:I.length)>((P=String(f(_,c)))===null||P===void 0?void 0:P.length)?R:_},g),y=x=f(x,c);if(x!==void 0&&x.length!==0||(x=u.niceMax),t.globals.isBarHorizontal){a=0;var b=t.globals.labels.slice();x=ne.getLargestStringFromArr(b),x=f(x,{seriesIndex:l,dataPointIndex:-1,w:t}),y=e.dCtx.dimHelpers.getLargestStringFromMultiArr(x,b)}var v=new Be(e.dCtx.ctx),N="rotate(".concat(o.labels.rotate," 0 0)"),k=v.getTextRects(x,o.labels.style.fontSize,o.labels.style.fontFamily,N,!1),A=k;x!==y&&(A=v.getTextRects(y,o.labels.style.fontSize,o.labels.style.fontFamily,N,!1)),s.push({width:(h>A.width||h>k.width?h:A.width>k.width?A.width:k.width)+a,height:A.height>k.height?A.height:k.height})}else s.push({width:0,height:0})}),s}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,s=[];return t.config.yaxis.map(function(a,i){if(a.show&&a.title.text!==void 0){var o=new Be(e.dCtx.ctx),l="rotate(".concat(a.title.rotate," 0 0)"),c=o.getTextRects(a.title.text,a.title.style.fontSize,a.title.style.fontFamily,l,!1);s.push({width:c.width,height:c.height})}else s.push({width:0,height:0})}),s}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,s=0,a=0,i=e.globals.yAxisScale.length>1?10:0,o=new Yl(this.dCtx.ctx),l=function(c,u){var h=e.config.yaxis[u].floating,f=0;c.width>0&&!h?(f=c.width+i,function(g){return e.globals.ignoreYAxisIndexes.indexOf(g)>-1}(u)&&(f=f-c.width-i)):f=h||o.isYAxisHidden(u)?0:5,e.config.yaxis[u].opposite?a+=f:s+=f,t+=f};return e.globals.yLabelsCoords.map(function(c,u){l(c,u)}),e.globals.yTitleCoords.map(function(c,u){l(c,u)}),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=s,this.dCtx.yAxisWidthRight=a,t}}]),r}(),cde=function(){function r(e){ct(this,r),this.w=e.w,this.dCtx=e}return dt(r,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w,s=t.config,a=t.globals;if(a.noData||a.collapsedSeries.length+a.ancillaryCollapsedSeries.length===s.series.length)return 0;var i=function(x){return["bar","rangeBar","candlestick","boxPlot"].includes(x)},o=s.chart.type,l=0,c=i(o)?s.series.length:1;a.comboBarCount>0&&(c=a.comboBarCount),a.collapsedSeries.forEach(function(x){i(x.type)&&(c-=1)}),s.chart.stacked&&(c=1);var u=i(o)||a.comboBarCount>0,h=Math.abs(a.initialMaxX-a.initialMinX);if(u&&a.isXNumeric&&!a.isBarHorizontal&&c>0&&h!==0){h<=3&&(h=a.dataPoints);var f=h/e,g=a.minXDiff&&a.minXDiff/f>0?a.minXDiff/f:0;g>e/2&&(g/=2),(l=g*parseInt(s.plotOptions.bar.columnWidth,10)/100)<1&&(l=1),a.barPadForNumericAxis=l}return l}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,s=t.globals,a=this.dCtx.isSparkline||!s.axisCharts?0:10;["title","subtitle"].forEach(function(l){t.config[l].text!==void 0?a+=t.config[l].margin:a+=e.dCtx.isSparkline||!s.axisCharts?0:5}),!t.config.legend.show||t.config.legend.position!=="bottom"||t.config.legend.floating||s.axisCharts||(a+=10);var i=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),o=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");s.gridHeight-=i.height+o.height+a,s.translateY+=i.height+o.height+a}},{key:"setGridXPosForDualYAxis",value:function(e,t){var s=this.w,a=new Yl(this.dCtx.ctx);s.config.yaxis.forEach(function(i,o){s.globals.ignoreYAxisIndexes.indexOf(o)!==-1||i.floating||a.isYAxisHidden(o)||(i.opposite&&(s.globals.translateX-=t[o].width+e[o].width+parseInt(i.labels.style.fontSize,10)/1.2+12),s.globals.translateX<2&&(s.globals.translateX=2))})}}]),r}(),hb=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new ide(this),this.dimYAxis=new lde(this),this.dimXAxis=new ode(this),this.dimGrid=new cde(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return dt(r,[{key:"plotCoords",value:function(){var e=this,t=this.w,s=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var a=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,Gr(t.config.stroke.width)):t.config.stroke.width;this.isSparkline&&((t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(o){var l=jL(o,2),c=l[0],u=l[1];e.gridPad[c]=Math.max(u,e.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(a/2,this.gridPad.top),this.gridPad.bottom=Math.max(a/2,this.gridPad.bottom)),s.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),s.gridHeight=s.gridHeight-this.gridPad.top-this.gridPad.bottom,s.gridWidth=s.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var i=this.dimGrid.gridPadForColumnsInNumericAxis(s.gridWidth);s.gridWidth=s.gridWidth-2*i,s.translateX=s.translateX+this.gridPad.left+this.xPadLeft+(i>0?i:0),s.translateY=s.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,s=t.globals,a=this.dimYAxis.getyAxisLabelsCoords(),i=this.dimYAxis.getyAxisTitleCoords();s.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map(function(x,y){t.globals.yLabelsCoords.push({width:a[y].width,index:y}),t.globals.yTitleCoords.push({width:i[y].width,index:y})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var o=this.dimXAxis.getxAxisLabelsCoords(),l=this.dimXAxis.getxAxisGroupLabelsCoords(),c=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(o,c,l),s.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,s.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(s.rotateXLabels=!1,s.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),s.translateXAxisY=s.translateXAxisY+t.config.xaxis.labels.offsetY,s.translateXAxisX=s.translateXAxisX+t.config.xaxis.labels.offsetX;var u=this.yAxisWidth,h=this.xAxisHeight;s.xAxisLabelsHeight=this.xAxisHeight-c.height,s.xAxisGroupLabelsHeight=s.xAxisLabelsHeight-o.height,s.xAxisLabelsWidth=this.xAxisWidth,s.xAxisHeight=this.xAxisHeight;var f=10;(t.config.chart.type==="radar"||this.isSparkline)&&(u=0,h=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||t.config.chart.type==="treemap")&&(u=0,h=0,f=0),this.isSparkline||t.config.chart.type==="treemap"||this.dimXAxis.additionalPaddingXLabels(o);var g=function(){s.translateX=u+e.datalabelsCoords.width,s.gridHeight=s.svgHeight-e.lgRect.height-h-(e.isSparkline||t.config.chart.type==="treemap"?0:t.globals.rotateXLabels?10:15),s.gridWidth=s.svgWidth-u-2*e.datalabelsCoords.width};switch(t.config.xaxis.position==="top"&&(f=s.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":s.translateY=f,g();break;case"top":s.translateY=this.lgRect.height+f,g();break;case"left":s.translateY=f,s.translateX=this.lgRect.width+u+this.datalabelsCoords.width,s.gridHeight=s.svgHeight-h-12,s.gridWidth=s.svgWidth-this.lgRect.width-u-2*this.datalabelsCoords.width;break;case"right":s.translateY=f,s.translateX=u+this.datalabelsCoords.width,s.gridHeight=s.svgHeight-h-12,s.gridWidth=s.svgWidth-this.lgRect.width-u-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(i,a),new hS(this.ctx).setYAxisXPosition(a,i)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,s=e.config,a=0;e.config.legend.show&&!e.config.legend.floating&&(a=20);var i=s.chart.type==="pie"||s.chart.type==="polarArea"||s.chart.type==="donut"?"pie":"radialBar",o=s.plotOptions[i].offsetY,l=s.plotOptions[i].offsetX;if(!s.legend.show||s.legend.floating){t.gridHeight=t.svgHeight;var c=t.dom.elWrap.getBoundingClientRect().width;return t.gridWidth=Math.min(c,t.gridHeight),t.translateY=o,void(t.translateX=l+(t.svgWidth-t.gridWidth)/2)}switch(s.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=o-10,t.translateX=l+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+o+10,t.translateX=l+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-a,t.gridHeight=s.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=o,t.translateX=l+this.lgRect.width+a;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-a-5,t.gridHeight=s.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=o,t.translateX=l+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,s){var a=this.w,i=a.globals.hasXaxisGroups?2:1,o=s.height+e.height+t.height,l=a.globals.isMultiLineX?1.2:a.globals.LINE_HEIGHT_RATIO,c=a.globals.rotateXLabels?22:10,u=a.globals.rotateXLabels&&a.config.legend.position==="bottom"?10:0;this.xAxisHeight=o*l+i*c+u,this.xAxisWidth=e.width,this.xAxisHeight-t.height>a.config.xaxis.labels.maxHeight&&(this.xAxisHeight=a.config.xaxis.labels.maxHeight),a.config.xaxis.labels.minHeight&&this.xAxisHeight<a.config.xaxis.labels.minHeight&&(this.xAxisHeight=a.config.xaxis.labels.minHeight),a.config.xaxis.floating&&(this.xAxisHeight=0);var h=0,f=0;a.config.yaxis.forEach(function(g){h+=g.labels.minWidth,f+=g.labels.maxWidth}),this.yAxisWidth<h&&(this.yAxisWidth=h),this.yAxisWidth>f&&(this.yAxisWidth=f)}}]),r}(),dde=function(){function r(e){ct(this,r),this.w=e.w,this.lgCtx=e}return dt(r,[{key:"getLegendStyles",value:function(){var e,t,s,a=document.createElement("style");a.setAttribute("type","text/css");var i=((e=this.lgCtx.ctx)===null||e===void 0||(t=e.opts)===null||t===void 0||(s=t.chart)===null||s===void 0?void 0:s.nonce)||this.w.config.chart.nonce;i&&a.setAttribute("nonce",i);var o=document.createTextNode(eF);return a.appendChild(o),a}},{key:"getLegendDimensions",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){var e=this.w.globals;this.w.config.chart.injectStyleSheet!==!1&&e.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(e,t){var s=this,a=this.w;if(a.globals.axisCharts||a.config.chart.type==="radialBar"){a.globals.resized=!0;var i=null,o=null;a.globals.risingSeries=[],a.globals.axisCharts?(i=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),o=parseInt(i.getAttribute("data:realIndex"),10)):(i=a.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),o=parseInt(i.getAttribute("rel"),10)-1),t?[{cs:a.globals.collapsedSeries,csi:a.globals.collapsedSeriesIndices},{cs:a.globals.ancillaryCollapsedSeries,csi:a.globals.ancillaryCollapsedSeriesIndices}].forEach(function(h){s.riseCollapsedSeries(h.cs,h.csi,o)}):this.hideSeries({seriesEl:i,realIndex:o})}else{var l=a.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(e+1,"'] path")),c=a.config.chart.type;if(c==="pie"||c==="polarArea"||c==="donut"){var u=a.config.plotOptions.pie.donut.labels;new Be(this.lgCtx.ctx).pathMouseDown(l,null),this.lgCtx.ctx.pie.printDataLabelsInner(l.node,u)}l.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(e){var t=e.realIndex,s=this.w,a=s.globals,i=ne.clone(s.config.series);if(a.axisCharts){var o=s.config.yaxis[a.seriesYAxisReverseMap[t]],l={index:t,data:i[t].data.slice(),type:i[t].type||s.config.chart.type};if(o&&o.show&&o.showAlways)a.ancillaryCollapsedSeriesIndices.indexOf(t)<0&&(a.ancillaryCollapsedSeries.push(l),a.ancillaryCollapsedSeriesIndices.push(t));else if(a.collapsedSeriesIndices.indexOf(t)<0){a.collapsedSeries.push(l),a.collapsedSeriesIndices.push(t);var c=a.risingSeries.indexOf(t);a.risingSeries.splice(c,1)}}else a.collapsedSeries.push({index:t,data:i[t]}),a.collapsedSeriesIndices.push(t);return a.allSeriesCollapsed=a.collapsedSeries.length+a.ancillaryCollapsedSeries.length===s.config.series.length,this._getSeriesBasedOnCollapsedState(i)}},{key:"hideSeries",value:function(e){for(var t=e.seriesEl,s=e.realIndex,a=this.w,i=this.getSeriesAfterCollapsing({realIndex:s}),o=t.childNodes,l=0;l<o.length;l++)o[l].classList.contains("apexcharts-series-markers-wrap")&&(o[l].classList.contains("apexcharts-hide")?o[l].classList.remove("apexcharts-hide"):o[l].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(i,a.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,s){var a=this.w,i=ne.clone(a.config.series);if(e.length>0){for(var o=0;o<e.length;o++)e[o].index===s&&(a.globals.axisCharts?i[s].data=e[o].data.slice():i[s]=e[o].data,typeof i[s]!="number"&&(i[s].hidden=!1),e.splice(o,1),t.splice(o,1),a.globals.risingSeries.push(s));i=this._getSeriesBasedOnCollapsedState(i),this.lgCtx.ctx.updateHelpers._updateSeries(i,a.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w,s=0;return t.globals.axisCharts?e.forEach(function(a,i){t.globals.collapsedSeriesIndices.indexOf(i)<0&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(i)<0||(e[i].data=[],s++)}):e.forEach(function(a,i){!t.globals.collapsedSeriesIndices.indexOf(i)<0&&(e[i]=0,s++)}),t.globals.allSeriesCollapsed=s===e.length,e}}]),r}(),rF=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new dde(this)}return dt(r,[{key:"init",value:function(){var e=this.w,t=e.globals,s=e.config,a=s.legend.showForSingleSeries&&t.series.length===1||this.isBarsDistributed||t.series.length>1;if(this.legendHelpers.appendToForeignObject(),(a||!t.axisCharts)&&s.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),s.legend.position==="bottom"||s.legend.position==="top"?this.legendAlignHorizontal():s.legend.position!=="right"&&s.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(e){var t=e.i,s=e.fillcolor,a=this.w,i=document.createElement("span");i.classList.add("apexcharts-legend-marker");var o=a.config.legend.markers.shape||a.config.markers.shape,l=o;Array.isArray(o)&&(l=o[t]);var c=Array.isArray(a.config.legend.markers.size)?parseFloat(a.config.legend.markers.size[t]):parseFloat(a.config.legend.markers.size),u=Array.isArray(a.config.legend.markers.offsetX)?parseFloat(a.config.legend.markers.offsetX[t]):parseFloat(a.config.legend.markers.offsetX),h=Array.isArray(a.config.legend.markers.offsetY)?parseFloat(a.config.legend.markers.offsetY[t]):parseFloat(a.config.legend.markers.offsetY),f=Array.isArray(a.config.legend.markers.strokeWidth)?parseFloat(a.config.legend.markers.strokeWidth[t]):parseFloat(a.config.legend.markers.strokeWidth),g=i.style;if(g.height=2*(c+f)+"px",g.width=2*(c+f)+"px",g.left=u+"px",g.top=h+"px",a.config.legend.markers.customHTML)g.background="transparent",g.color=s[t],Array.isArray(a.config.legend.markers.customHTML)?a.config.legend.markers.customHTML[t]&&(i.innerHTML=a.config.legend.markers.customHTML[t]()):i.innerHTML=a.config.legend.markers.customHTML();else{var x=new Ph(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(l),seriesIndex:t,strokeWidth:f,size:c}),y=window.SVG().addTo(i).size("100%","100%"),b=new Be(this.ctx).drawMarker(0,0,et(et({},x),{},{pointFillColor:Array.isArray(s)?s[t]:x.pointFillColor,shape:l}));a.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach(function(v){v.node.classList.contains("apexcharts-marker-triangle")?v.node.style.transform="translate(50%, 45%)":v.node.style.transform="translate(50%, 50%)"}),y.add(b)}return i}},{key:"drawLegends",value:function(){var e=this,t=this,s=this.w,a=s.config.legend.fontFamily,i=s.globals.seriesNames,o=s.config.legend.markers.fillColors?s.config.legend.markers.fillColors.slice():s.globals.colors.slice();if(s.config.chart.type==="heatmap"){var l=s.config.plotOptions.heatmap.colorScale.ranges;i=l.map(function(x){return x.name?x.name:x.from+" - "+x.to}),o=l.map(function(x){return x.color})}else this.isBarsDistributed&&(i=s.globals.labels.slice());s.config.legend.customLegendItems.length&&(i=s.config.legend.customLegendItems);var c=s.globals.legendFormatter,u=s.config.legend.inverseOrder,h=[];s.globals.seriesGroups.length>1&&s.config.legend.clusterGroupedSeries&&s.globals.seriesGroups.forEach(function(x,y){h[y]=document.createElement("div"),h[y].classList.add("apexcharts-legend-group","apexcharts-legend-group-".concat(y)),s.config.legend.clusterGroupedSeriesOrientation==="horizontal"?s.globals.dom.elLegendWrap.classList.add("apexcharts-legend-group-horizontal"):h[y].classList.add("apexcharts-legend-group-vertical")});for(var f=function(x){var y,b=c(i[x],{seriesIndex:x,w:s}),v=!1,N=!1;if(s.globals.collapsedSeries.length>0)for(var k=0;k<s.globals.collapsedSeries.length;k++)s.globals.collapsedSeries[k].index===x&&(v=!0);if(s.globals.ancillaryCollapsedSeriesIndices.length>0)for(var A=0;A<s.globals.ancillaryCollapsedSeriesIndices.length;A++)s.globals.ancillaryCollapsedSeriesIndices[A]===x&&(N=!0);var R=e.createLegendMarker({i:x,fillcolor:o});Be.setAttrs(R,{rel:x+1,"data:collapsed":v||N}),(v||N)&&R.classList.add("apexcharts-inactive-legend");var _=document.createElement("div"),I=document.createElement("span");I.classList.add("apexcharts-legend-text"),I.innerHTML=Array.isArray(b)?b.join(" "):b;var P=s.config.legend.labels.useSeriesColors?s.globals.colors[x]:Array.isArray(s.config.legend.labels.colors)?(y=s.config.legend.labels.colors)===null||y===void 0?void 0:y[x]:s.config.legend.labels.colors;P||(P=s.config.chart.foreColor),I.style.color=P,I.style.fontSize=parseFloat(s.config.legend.fontSize)+"px",I.style.fontWeight=s.config.legend.fontWeight,I.style.fontFamily=a||s.config.chart.fontFamily,Be.setAttrs(I,{rel:x+1,i:x,"data:default-text":encodeURIComponent(b),"data:collapsed":v||N}),_.appendChild(R),_.appendChild(I);var T=new wr(e.ctx);s.config.legend.showForZeroSeries||T.getSeriesTotalByIndex(x)===0&&T.seriesHaveSameValues(x)&&!T.isSeriesNull(x)&&s.globals.collapsedSeriesIndices.indexOf(x)===-1&&s.globals.ancillaryCollapsedSeriesIndices.indexOf(x)===-1&&_.classList.add("apexcharts-hidden-zero-series"),s.config.legend.showForNullSeries||T.isSeriesNull(x)&&s.globals.collapsedSeriesIndices.indexOf(x)===-1&&s.globals.ancillaryCollapsedSeriesIndices.indexOf(x)===-1&&_.classList.add("apexcharts-hidden-null-series"),h.length?s.globals.seriesGroups.forEach(function(D,L){var F;D.includes((F=s.config.series[x])===null||F===void 0?void 0:F.name)&&(s.globals.dom.elLegendWrap.appendChild(h[L]),h[L].appendChild(_))}):s.globals.dom.elLegendWrap.appendChild(_),s.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(s.config.legend.horizontalAlign)),s.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+s.config.legend.position),_.classList.add("apexcharts-legend-series"),_.style.margin="".concat(s.config.legend.itemMargin.vertical,"px ").concat(s.config.legend.itemMargin.horizontal,"px"),s.globals.dom.elLegendWrap.style.width=s.config.legend.width?s.config.legend.width+"px":"",s.globals.dom.elLegendWrap.style.height=s.config.legend.height?s.config.legend.height+"px":"",Be.setAttrs(_,{rel:x+1,seriesName:ne.escapeString(i[x]),"data:collapsed":v||N}),(v||N)&&_.classList.add("apexcharts-inactive-legend"),s.config.legend.onItemClick.toggleDataSeries||_.classList.add("apexcharts-no-click")},g=u?i.length-1:0;u?g>=0:g<=i.length-1;u?g--:g++)f(g);s.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),s.config.legend.onItemHover.highlightDataSeries&&s.config.legend.customLegendItems.length===0&&(s.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),s.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var s=this.w,a=s.globals.dom.elLegendWrap,i=a.clientHeight,o=0,l=0;if(s.config.legend.position==="bottom")l=s.globals.svgHeight-Math.min(i,s.globals.svgHeight/2)-5;else if(s.config.legend.position==="top"){var c=new hb(this.ctx),u=c.dimHelpers.getTitleSubtitleCoords("title").height,h=c.dimHelpers.getTitleSubtitleCoords("subtitle").height;l=(u>0?u-10:0)+(h>0?h-10:0)}a.style.position="absolute",o=o+e+s.config.legend.offsetX,l=l+t+s.config.legend.offsetY,a.style.left=o+"px",a.style.top=l+"px",s.config.legend.position==="right"&&(a.style.left="auto",a.style.right=25+s.config.legend.offsetX+"px"),["width","height"].forEach(function(f){a.style[f]&&(a.style[f]=parseInt(s.config.legend[f],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.elLegendWrap.style.right=0;var t=new hb(this.ctx),s=t.dimHelpers.getTitleSubtitleCoords("title"),a=t.dimHelpers.getTitleSubtitleCoords("subtitle"),i=0;e.config.legend.position==="top"&&(i=s.height+a.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,i)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendDimensions(),s=0;e.config.legend.position==="left"&&(s=20),e.config.legend.position==="right"&&(s=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(s,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,s=e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if(t.config.chart.type==="heatmap"||this.isBarsDistributed){if(s){var a=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,a,this.w]),new zn(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&s&&new zn(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var s=parseInt(e.target.getAttribute("rel"),10)-1,a=e.target.getAttribute("data:collapsed")==="true",i=this.w.config.chart.events.legendClick;typeof i=="function"&&i(this.ctx,s,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,s,this.w]);var o=this.w.config.legend.markers.onClick;typeof o=="function"&&e.target.classList.contains("apexcharts-legend-marker")&&(o(this.ctx,s,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,s,this.w])),t.config.chart.type!=="treemap"&&t.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(s,a)}}}]),r}(),aF=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w;var t=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=t.globals.minX,this.maxX=t.globals.maxX}return dt(r,[{key:"createToolbar",value:function(){var e=this,t=this.w,s=function(){return document.createElement("div")},a=s();if(a.setAttribute("class","apexcharts-toolbar"),a.style.top=t.config.chart.toolbar.offsetY+"px",a.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(a),this.elZoom=s(),this.elZoomIn=s(),this.elZoomOut=s(),this.elPan=s(),this.elSelection=s(),this.elZoomReset=s(),this.elMenuIcon=s(),this.elMenu=s(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var i=0;i<this.t.customIcons.length;i++)this.elCustomIcons.push(s());var o=[],l=function(f,g,x){var y=f.toLowerCase();e.t[y]&&t.config.chart.zoom.enabled&&o.push({el:g,icon:typeof e.t[y]=="string"?e.t[y]:x,title:e.localeValues[f],class:"apexcharts-".concat(y,"-icon")})};l("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),l("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var c=function(f){e.t[f]&&t.config.chart[f].enabled&&o.push({el:f==="zoom"?e.elZoom:e.elSelection,icon:typeof e.t[f]=="string"?e.t[f]:f==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:e.localeValues[f==="zoom"?"selectionZoom":"selection"],class:"apexcharts-".concat(f,"-icon")})};c("zoom"),c("selection"),this.t.pan&&t.config.chart.zoom.enabled&&o.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:"apexcharts-pan-icon"}),l("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&o.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var u=0;u<this.elCustomIcons.length;u++)o.push({el:this.elCustomIcons[u],icon:this.t.customIcons[u].icon,title:this.t.customIcons[u].title,index:this.t.customIcons[u].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[u].class});o.forEach(function(f,g){f.index&&ne.moveIndexInArray(o,g,f.index)});for(var h=0;h<o.length;h++)Be.setAttrs(o[h].el,{class:o[h].class,title:o[h].title}),o[h].el.innerHTML=o[h].icon,a.appendChild(o[h].el);this._createHamburgerMenu(a),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),Be.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],s=0;s<t.length;s++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[s].innerHTML=t[s].title,Be.setAttrs(this.elMenuItems[s],{class:"apexcharts-menu-item ".concat(t[s].name),title:t[s].title}),this.elMenu.appendChild(this.elMenuItems[s])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(s){s.classList.contains("exportSVG")?s.addEventListener("click",e.handleDownload.bind(e,"svg")):s.classList.contains("exportPNG")?s.addEventListener("click",e.handleDownload.bind(e,"png")):s.classList.contains("exportCSV")&&s.addEventListener("click",e.handleDownload.bind(e,"csv"))});for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls();var s=e==="selection"?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,a=e==="selection"?"selectionEnabled":"zoomEnabled";t.w.globals[a]=!t.w.globals[a],s.classList.contains(t.ctx.toolbar.selectedClass)?s.classList.remove(t.ctx.toolbar.selectedClass):s.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),e==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t=e==="pan"?this.elPan:this.elZoom,s=e==="pan"?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),s&&s.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(s){s&&s.classList.remove(e.selectedClass)})}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,s=(this.minX+t)/2,a=(this.maxX+t)/2,i=this._getNewMinXMaxX(s,a);e.globals.disableZoomIn||this.zoomUpdateOptions(i.minX,i.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!(e.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,s=this.minX-(t-this.minX),a=this.maxX-(t-this.maxX),i=this._getNewMinXMaxX(s,a);e.globals.disableZoomOut||this.zoomUpdateOptions(i.minX,i.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var s=this.w.config.xaxis.convertedCatToNumeric;return{minX:s?Math.floor(e):e,maxX:s?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var s=this.w;if(e!==void 0||t!==void 0){if(!(s.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=s.globals.dataPoints),t-e<2))){var a={min:e,max:t},i=this.getBeforeZoomRange(a);i&&(a=i.xaxis);var o={xaxis:a},l=ne.clone(s.globals.initialConfig.yaxis);s.config.chart.group||(o.yaxis=l),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(o,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(a,l)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){typeof this.ev.zoomed=="function"&&(this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t}),this.ctx.events.fireEvent("zoomed",{xaxis:e,yaxis:t}))}},{key:"getBeforeZoomRange",value:function(e,t){var s=null;return typeof this.ev.beforeZoom=="function"&&(s=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),s}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout(function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(e){var t=this.w,s=new Af(this.ctx);switch(e){case"svg":s.exportToSVG(this.ctx);break;case"png":s.exportToPng(this.ctx);break;case"csv":s.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach(function(t){var s=t.w;if(s.globals.lastXAxis.min=s.globals.initialConfig.xaxis.min,s.globals.lastXAxis.max=s.globals.initialConfig.xaxis.max,t.updateHelpers.revertDefaultAxisMinMax(),typeof s.config.chart.events.beforeResetZoom=="function"){var a=s.config.chart.events.beforeResetZoom(t,s);a&&t.updateHelpers.revertDefaultAxisMinMax(a)}typeof s.config.chart.events.zoomed=="function"&&t.ctx.toolbar.zoomCallback({min:s.config.xaxis.min,max:s.config.xaxis.max}),s.globals.zoomed=!1;var i=t.ctx.series.emptyCollapsedSeries(ne.clone(s.globals.initialSeries));t.updateHelpers._updateSeries(i,s.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),r}(),ude=function(r){Ug(t,aF);var e=Fg(t);function t(s){var a;return ct(this,t),(a=e.call(this,s)).ctx=s,a.w=s.w,a.dragged=!1,a.graphics=new Be(a.ctx),a.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],a.clientX=0,a.clientY=0,a.startX=0,a.endX=0,a.dragX=0,a.startY=0,a.endY=0,a.dragY=0,a.moveDirection="none",a.debounceTimer=null,a.debounceDelay=100,a.wheelDelay=400,a}return dt(t,[{key:"init",value:function(s){var a=this,i=s.xyRatios,o=this.w,l=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=o.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new vr(0,0,o.globals.gridWidth,o.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),o.globals.dom.Paper.add(this.zoomRect),o.globals.dom.Paper.add(this.selectionRect),o.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:o.globals.gridWidth,maxY:o.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):o.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:o.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=o.globals.dom.baseEl.querySelector("".concat(o.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(c){a.hoverArea.addEventListener(c,l.svgMouseEvents.bind(l,i),{capture:!1,passive:!0})}),o.config.chart.zoom.enabled&&o.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",l.mouseWheelEvent.bind(l),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(s,a){var i=this.w,o=this.ctx.toolbar,l=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type,c=i.config.chart.toolbar.autoSelected;if(a.shiftKey?(this.shiftWasPressed=!0,o.enableZoomPanFromToolbar(c==="pan"?"zoom":"pan")):this.shiftWasPressed&&(o.enableZoomPanFromToolbar(c),this.shiftWasPressed=!1),a.target){var u,h=a.target.classList;if(a.target.parentNode&&a.target.parentNode!==null&&(u=a.target.parentNode.classList),!(h.contains("apexcharts-legend-marker")||h.contains("apexcharts-legend-text")||u&&u.contains("apexcharts-toolbar"))){if(this.clientX=a.type==="touchmove"||a.type==="touchstart"?a.touches[0].clientX:a.type==="touchend"?a.changedTouches[0].clientX:a.clientX,this.clientY=a.type==="touchmove"||a.type==="touchstart"?a.touches[0].clientY:a.type==="touchend"?a.changedTouches[0].clientY:a.clientY,a.type==="mousedown"&&a.which===1||a.type==="touchstart"){var f=this.gridRect.getBoundingClientRect();this.startX=this.clientX-f.left-i.globals.barPadForNumericAxis,this.startY=this.clientY-f.top,this.dragged=!1,this.w.globals.mousedown=!0}(a.type==="mousemove"&&a.which===1||a.type==="touchmove")&&(this.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:l,xyRatios:s})):(this.w.globals.mousedown&&i.globals.zoomEnabled||this.w.globals.mousedown&&i.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:l}))),a.type!=="mouseup"&&a.type!=="touchend"&&a.type!=="mouseleave"||this.handleMouseUp({zoomtype:l}),this.makeSelectionRectDraggable()}}}},{key:"handleMouseUp",value:function(s){var a,i=s.zoomtype,o=s.isResized,l=this.w,c=(a=this.gridRect)===null||a===void 0?void 0:a.getBoundingClientRect();c&&(this.w.globals.mousedown||o)&&(this.endX=this.clientX-c.left-l.globals.barPadForNumericAxis,this.endY=this.clientY-c.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(l.globals.zoomEnabled||l.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:i})),l.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}},{key:"mouseWheelEvent",value:function(s){var a=this,i=this.w;s.preventDefault();var o=Date.now();o-i.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(s),i.globals.lastWheelExecution=o),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){o-i.globals.lastWheelExecution>a.wheelDelay&&(a.executeMouseWheelZoom(s),i.globals.lastWheelExecution=o)},this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(s){var a,i=this.w;this.minX=i.globals.isRangeBar?i.globals.minY:i.globals.minX,this.maxX=i.globals.isRangeBar?i.globals.maxY:i.globals.maxX;var o=(a=this.gridRect)===null||a===void 0?void 0:a.getBoundingClientRect();if(o){var l,c,u,h=(s.clientX-o.left)/o.width,f=this.minX,g=this.maxX,x=g-f;if(s.deltaY<0){var y=f+h*x;c=y-(l=.5*x)/2,u=y+l/2}else c=f-(l=1.5*x)/2,u=g+l/2;if(!i.globals.isRangeBar){c=Math.max(c,i.globals.initialMinX),u=Math.min(u,i.globals.initialMaxX);var b=.01*(i.globals.initialMaxX-i.globals.initialMinX);if(u-c<b){var v=(c+u)/2;c=v-b/2,u=v+b/2}}var N=this._getNewMinXMaxX(c,u);isNaN(N.minX)||isNaN(N.maxX)||this.zoomUpdateOptions(N.minX,N.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var s=this,a=this.w;if(this.selectionRect){var i=this.selectionRect.node.getBoundingClientRect();i.width>0&&i.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(o,l,c,u,h){return h==="l"||h==="r"?o.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):o.circle(0)},updateHandle:function(o,l){return o.center(l[0],l[1])}}).resize().on("resize",function(){var o=a.globals.zoomEnabled?a.config.chart.zoom.type:a.config.chart.selection.type;s.handleMouseUp({zoomtype:o,isResized:!0})}))}}},{key:"preselectedSelection",value:function(){var s=this.w,a=this.xyRatios;if(!s.globals.zoomEnabled){if(s.globals.selection!==void 0&&s.globals.selection!==null)this.drawSelectionRect(et(et({},s.globals.selection),{},{translateX:s.globals.translateX,translateY:s.globals.translateY}));else if(s.config.chart.selection.xaxis.min!==void 0&&s.config.chart.selection.xaxis.max!==void 0){var i=(s.config.chart.selection.xaxis.min-s.globals.minX)/a.xRatio,o=s.globals.gridWidth-(s.globals.maxX-s.config.chart.selection.xaxis.max)/a.xRatio-i;s.globals.isRangeBar&&(i=(s.config.chart.selection.xaxis.min-s.globals.yAxisScale[0].niceMin)/a.invertedYRatio,o=(s.config.chart.selection.xaxis.max-s.config.chart.selection.xaxis.min)/a.invertedYRatio);var l={x:i,y:0,width:o,height:s.globals.gridHeight,translateX:s.globals.translateX,translateY:s.globals.translateY,selectionEnabled:!0};this.drawSelectionRect(l),this.makeSelectionRectDraggable(),typeof s.config.chart.events.selection=="function"&&s.config.chart.events.selection(this.ctx,{xaxis:{min:s.config.chart.selection.xaxis.min,max:s.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(s){var a=s.x,i=s.y,o=s.width,l=s.height,c=s.translateX,u=c===void 0?0:c,h=s.translateY,f=h===void 0?0:h,g=this.w,x=this.zoomRect,y=this.selectionRect;if(this.dragged||g.globals.selection!==null){var b={transform:"translate("+u+", "+f+")"};g.globals.zoomEnabled&&this.dragged&&(o<0&&(o=1),x.attr({x:a,y:i,width:o,height:l,fill:g.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":g.config.chart.zoom.zoomedArea.fill.opacity,stroke:g.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":g.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":g.config.chart.zoom.zoomedArea.stroke.opacity}),Be.setAttrs(x.node,b)),g.globals.selectionEnabled&&(y.attr({x:a,y:i,width:o>0?o:0,height:l>0?l:0,fill:g.config.chart.selection.fill.color,"fill-opacity":g.config.chart.selection.fill.opacity,stroke:g.config.chart.selection.stroke.color,"stroke-width":g.config.chart.selection.stroke.width,"stroke-dasharray":g.config.chart.selection.stroke.dashArray,"stroke-opacity":g.config.chart.selection.stroke.opacity}),Be.setAttrs(y.node,b))}}},{key:"hideSelectionRect",value:function(s){s&&s.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(s){var a=s.context,i=s.zoomtype,o=this.w,l=a,c=this.gridRect.getBoundingClientRect(),u=l.startX-1,h=l.startY,f=!1,g=!1,x=l.clientX-c.left-o.globals.barPadForNumericAxis,y=l.clientY-c.top,b=x-u,v=y-h,N={translateX:o.globals.translateX,translateY:o.globals.translateY};return Math.abs(b+u)>o.globals.gridWidth?b=o.globals.gridWidth-u:x<0&&(b=u),u>x&&(f=!0,b=Math.abs(b)),h>y&&(g=!0,v=Math.abs(v)),N=et(et({},N=i==="x"?{x:f?u-b:u,y:0,width:b,height:o.globals.gridHeight}:i==="y"?{x:0,y:g?h-v:h,width:o.globals.gridWidth,height:v}:{x:f?u-b:u,y:g?h-v:h,width:b,height:v}),{},{translateX:o.globals.translateX,translateY:o.globals.translateY}),l.drawSelectionRect(N),l.selectionDragging("resizing"),N}},{key:"selectionDragging",value:function(s,a){var i=this,o=this.w;if(a){a.preventDefault();var l=a.detail,c=l.handler,u=l.box,h=u.x,f=u.y;h<this.constraints.x&&(h=this.constraints.x),f<this.constraints.y&&(f=this.constraints.y),u.x2>this.constraints.x2&&(h=this.constraints.x2-u.w),u.y2>this.constraints.y2&&(f=this.constraints.y2-u.h),c.move(h,f);var g=this.xyRatios,x=this.selectionRect,y=0;s==="resizing"&&(y=30);var b=function(N){return parseFloat(x.node.getAttribute(N))},v={x:b("x"),y:b("y"),width:b("width"),height:b("height")};o.globals.selection=v,typeof o.config.chart.events.selection=="function"&&o.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var N,k,A,R,_=i.gridRect.getBoundingClientRect(),I=x.node.getBoundingClientRect();o.globals.isRangeBar?(N=o.globals.yAxisScale[0].niceMin+(I.left-_.left)*g.invertedYRatio,k=o.globals.yAxisScale[0].niceMin+(I.right-_.left)*g.invertedYRatio,A=0,R=1):(N=o.globals.xAxisScale.niceMin+(I.left-_.left)*g.xRatio,k=o.globals.xAxisScale.niceMin+(I.right-_.left)*g.xRatio,A=o.globals.yAxisScale[0].niceMin+(_.bottom-I.bottom)*g.yRatio[0],R=o.globals.yAxisScale[0].niceMax-(I.top-_.top)*g.yRatio[0]);var P={xaxis:{min:N,max:k},yaxis:{min:A,max:R}};o.config.chart.events.selection(i.ctx,P),o.config.chart.brush.enabled&&o.config.chart.events.brushScrolled!==void 0&&o.config.chart.events.brushScrolled(i.ctx,P)},y))}}},{key:"selectionDrawn",value:function(s){var a,i,o=s.context,l=s.zoomtype,c=this.w,u=o,h=this.xyRatios,f=this.ctx.toolbar,g=c.globals.zoomEnabled?u.zoomRect.node.getBoundingClientRect():u.selectionRect.node.getBoundingClientRect(),x=u.gridRect.getBoundingClientRect(),y=g.left-x.left-c.globals.barPadForNumericAxis,b=g.right-x.left-c.globals.barPadForNumericAxis,v=g.top-x.top,N=g.bottom-x.top;c.globals.isRangeBar?(a=c.globals.yAxisScale[0].niceMin+y*h.invertedYRatio,i=c.globals.yAxisScale[0].niceMin+b*h.invertedYRatio):(a=c.globals.xAxisScale.niceMin+y*h.xRatio,i=c.globals.xAxisScale.niceMin+b*h.xRatio);var k=[],A=[];if(c.config.yaxis.forEach(function(L,F){var z=c.globals.seriesYAxisMap[F][0],O=c.globals.yAxisScale[F].niceMax-h.yRatio[z]*v,V=c.globals.yAxisScale[F].niceMax-h.yRatio[z]*N;k.push(O),A.push(V)}),u.dragged&&(u.dragX>10||u.dragY>10)&&a!==i){if(c.globals.zoomEnabled){var R=ne.clone(c.globals.initialConfig.yaxis),_=ne.clone(c.globals.initialConfig.xaxis);if(c.globals.zoomed=!0,c.config.xaxis.convertedCatToNumeric&&(a=Math.floor(a),i=Math.floor(i),a<1&&(a=1,i=c.globals.dataPoints),i-a<2&&(i=a+1)),l!=="xy"&&l!=="x"||(_={min:a,max:i}),l!=="xy"&&l!=="y"||R.forEach(function(L,F){R[F].min=A[F],R[F].max=k[F]}),f){var I=f.getBeforeZoomRange(_,R);I&&(_=I.xaxis?I.xaxis:_,R=I.yaxis?I.yaxis:R)}var P={xaxis:_};c.config.chart.group||(P.yaxis=R),u.ctx.updateHelpers._updateOptions(P,!1,u.w.config.chart.animations.dynamicAnimation.enabled),typeof c.config.chart.events.zoomed=="function"&&f.zoomCallback(_,R)}else if(c.globals.selectionEnabled){var T,D=null;T={min:a,max:i},l!=="xy"&&l!=="y"||(D=ne.clone(c.config.yaxis)).forEach(function(L,F){D[F].min=A[F],D[F].max=k[F]}),c.globals.selection=u.selection,typeof c.config.chart.events.selection=="function"&&c.config.chart.events.selection(u.ctx,{xaxis:T,yaxis:D})}}}},{key:"panDragging",value:function(s){var a=s.context,i=this.w,o=a;if(i.globals.lastClientPosition.x!==void 0){var l=i.globals.lastClientPosition.x-o.clientX,c=i.globals.lastClientPosition.y-o.clientY;Math.abs(l)>Math.abs(c)&&l>0?this.moveDirection="left":Math.abs(l)>Math.abs(c)&&l<0?this.moveDirection="right":Math.abs(c)>Math.abs(l)&&c>0?this.moveDirection="up":Math.abs(c)>Math.abs(l)&&c<0&&(this.moveDirection="down")}i.globals.lastClientPosition={x:o.clientX,y:o.clientY};var u=i.globals.isRangeBar?i.globals.minY:i.globals.minX,h=i.globals.isRangeBar?i.globals.maxY:i.globals.maxX;o.panScrolled(u,h)}},{key:"panScrolled",value:function(s,a){var i=this.w,o=this.xyRatios,l=ne.clone(i.globals.initialConfig.yaxis),c=o.xRatio,u=i.globals.minX,h=i.globals.maxX;i.globals.isRangeBar&&(c=o.invertedYRatio,u=i.globals.minY,h=i.globals.maxY),this.moveDirection==="left"?(s=u+i.globals.gridWidth/15*c,a=h+i.globals.gridWidth/15*c):this.moveDirection==="right"&&(s=u-i.globals.gridWidth/15*c,a=h-i.globals.gridWidth/15*c),i.globals.isRangeBar||(s<i.globals.initialMinX||a>i.globals.initialMaxX)&&(s=u,a=h);var f={xaxis:{min:s,max:a}};i.config.chart.group||(f.yaxis=l),this.updateScrolledChart(f,s,a)}},{key:"updateScrolledChart",value:function(s,a,i){var o=this.w;if(this.ctx.updateHelpers._updateOptions(s,!1,!1),typeof o.config.chart.events.scrolled=="function"){var l={xaxis:{min:a,max:i}};o.config.chart.events.scrolled(this.ctx,l),this.ctx.events.fireEvent("scrolled",l)}}}]),t}(),nF=function(){function r(e){ct(this,r),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return dt(r,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,s=e.elGrid,a=e.clientX,i=e.clientY,o=this.w,l=s.getBoundingClientRect(),c=l.width,u=l.height,h=c/(o.globals.dataPoints-1),f=u/o.globals.dataPoints,g=this.hasBars();!o.globals.comboCharts&&!g||o.config.xaxis.convertedCatToNumeric||(h=c/o.globals.dataPoints);var x=a-l.left-o.globals.barPadForNumericAxis,y=i-l.top;x<0||y<0||x>c||y>u?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):o.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):o.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var b=Math.round(x/h),v=Math.floor(y/f);g&&!o.config.xaxis.convertedCatToNumeric&&(b=Math.ceil(x/h),b-=1);var N=null,k=null,A=o.globals.seriesXvalues.map(function(T){return T.filter(function(D){return ne.isNumber(D)})}),R=o.globals.seriesYvalues.map(function(T){return T.filter(function(D){return ne.isNumber(D)})});if(o.globals.isXNumeric){var _=this.ttCtx.getElGrid().getBoundingClientRect(),I=x*(_.width/c),P=y*(_.height/u);N=(k=this.closestInMultiArray(I,P,A,R)).index,b=k.j,N!==null&&o.globals.hasNullValues&&(A=o.globals.seriesXvalues[N],b=(k=this.closestInArray(I,A)).j)}return o.globals.capturedSeriesIndex=N===null?-1:N,(!b||b<1)&&(b=0),o.globals.isBarHorizontal?o.globals.capturedDataPointIndex=v:o.globals.capturedDataPointIndex=b,{capturedSeries:N,j:o.globals.isBarHorizontal?v:b,hoverX:x,hoverY:y}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,s=0,a=e.map(function(o,l){return o.length>0?l:-1}),i=0;i<a.length;i++)if(a[i]!==-1&&t.globals.collapsedSeriesIndices.indexOf(i)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(i)===-1){s=a[i];break}return s}},{key:"closestInMultiArray",value:function(e,t,s,a){for(var i,o=this.w,l=1/0,c=null,u=null,h=0;h<s.length;h++)if(i=h,o.globals.collapsedSeriesIndices.indexOf(i)===-1&&o.globals.ancillaryCollapsedSeriesIndices.indexOf(i)===-1)for(var f=s[h],g=a[h],x=Math.min(f.length,g.length),y=0;y<x;y++){var b=e-f[y],v=Math.sqrt(b*b);if(!o.globals.allSeriesHasEqualX){var N=t-g[y];v=Math.sqrt(b*b+N*N)}v<l&&(l=v,c=h,u=y)}return{index:c,j:u}}},{key:"closestInArray",value:function(e,t){for(var s=t[0],a=null,i=Math.abs(e-s),o=0;o<t.length;o++){var l=Math.abs(e-t[o]);l<i&&(i=l,a=o)}return{j:a}}},{key:"isXoverlap",value:function(e){var t=[],s=this.w.globals.seriesX.filter(function(i){return i[0]!==void 0});if(s.length>0)for(var a=0;a<s.length-1;a++)s[a][e]!==void 0&&s[a+1][e]!==void 0&&s[a][e]!==s[a+1][e]&&t.push("unEqual");return t.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,s=0;s<t.length-1;s++)if(t[s].data.length!==t[s+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return Gr(e).reduce(function(t,s){return t+s.getBBox().height},0)}},{key:"getElMarkers",value:function(e){return typeof e=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],s=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");s=Gr(s),t&&(s=s.filter(function(i){var o=Number(i.getAttribute("data:realIndex"));return e.w.globals.collapsedSeriesIndices.indexOf(o)===-1})),s.sort(function(i,o){var l=Number(i.getAttribute("data:realIndex")),c=Number(o.getAttribute("data:realIndex"));return c<l?1:c>l?-1:0});var a=[];return s.forEach(function(i){a.push(i.querySelector(".apexcharts-marker"))}),a}},{key:"hasMarkers",value:function(e){return this.getElMarkers(e).length>0}},{key:"getPathFromPoint",value:function(e,t){var s=Number(e.getAttribute("cx")),a=Number(e.getAttribute("cy")),i=e.getAttribute("shape");return new Be(this.ctx).getMarkerPath(s,a,i,t)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,s=t.config.markers.hover.size;return s===void 0&&(s=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),s}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,s=this.ttCtx;s.allTooltipSeriesGroups.length===0&&(s.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var a=s.allTooltipSeriesGroups,i=0;i<a.length;i++)e==="enable"?(a[i].classList.add("apexcharts-active"),a[i].style.display=t.config.tooltip.items.display):(a[i].classList.remove("apexcharts-active"),a[i].style.display="none")}}]),r}(),hde=function(){function r(e){ct(this,r),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new nF(e)}return dt(r,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,s=t===void 0||t,a=e.ttItems,i=e.i,o=i===void 0?0:i,l=e.j,c=l===void 0?null:l,u=e.y1,h=e.y2,f=e.e,g=this.w;g.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:o,j:c,y1:u,y2:h,w:g}):this.toggleActiveInactiveSeries(s,o);var x=this.getValuesToPrint({i:o,j:c});this.printLabels({i:o,j:c,values:x,ttItems:a,shared:s,e:f});var y=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=y.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=y.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,s=this,a=e.i,i=e.j,o=e.values,l=e.ttItems,c=e.shared,u=e.e,h=this.w,f=[],g=function(_){return h.globals.seriesGoals[_]&&h.globals.seriesGoals[_][i]&&Array.isArray(h.globals.seriesGoals[_][i])},x=o.xVal,y=o.zVal,b=o.xAxisTTVal,v="",N=h.globals.colors[a];i!==null&&h.config.plotOptions.bar.distributed&&(N=h.globals.colors[i]);for(var k=function(_,I){var P=s.getFormatters(a);v=s.getSeriesName({fn:P.yLbTitleFormatter,index:a,seriesIndex:a,j:i}),h.config.chart.type==="treemap"&&(v=P.yLbTitleFormatter(String(h.config.series[a].data[i].x),{series:h.globals.series,seriesIndex:a,dataPointIndex:i,w:h}));var T=h.config.tooltip.inverseOrder?I:_;if(h.globals.axisCharts){var D=function(z){var O,V,Y,H;return h.globals.isRangeData?P.yLbFormatter((O=h.globals.seriesRangeStart)===null||O===void 0||(V=O[z])===null||V===void 0?void 0:V[i],{series:h.globals.seriesRangeStart,seriesIndex:z,dataPointIndex:i,w:h})+" - "+P.yLbFormatter((Y=h.globals.seriesRangeEnd)===null||Y===void 0||(H=Y[z])===null||H===void 0?void 0:H[i],{series:h.globals.seriesRangeEnd,seriesIndex:z,dataPointIndex:i,w:h}):P.yLbFormatter(h.globals.series[z][i],{series:h.globals.series,seriesIndex:z,dataPointIndex:i,w:h})};if(c)P=s.getFormatters(T),v=s.getSeriesName({fn:P.yLbTitleFormatter,index:T,seriesIndex:a,j:i}),N=h.globals.colors[T],t=D(T),g(T)&&(f=h.globals.seriesGoals[T][i].map(function(z){return{attrs:z,val:P.yLbFormatter(z.value,{seriesIndex:T,dataPointIndex:i,w:h})}}));else{var L,F=u==null||(L=u.target)===null||L===void 0?void 0:L.getAttribute("fill");F&&(F.indexOf("url")!==-1?F.indexOf("Pattern")!==-1&&(N=h.globals.dom.baseEl.querySelector(F.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):N=F),t=D(a),g(a)&&Array.isArray(h.globals.seriesGoals[a][i])&&(f=h.globals.seriesGoals[a][i].map(function(z){return{attrs:z,val:P.yLbFormatter(z.value,{seriesIndex:a,dataPointIndex:i,w:h})}}))}}i===null&&(t=P.yLbFormatter(h.globals.series[a],et(et({},h),{},{seriesIndex:a,dataPointIndex:a}))),s.DOMHandling({i:a,t:T,j:i,ttItems:l,values:{val:t,goalVals:f,xVal:x,xAxisTTVal:b,zVal:y},seriesName:v,shared:c,pColor:N})},A=0,R=h.globals.series.length-1;A<h.globals.series.length;A++,R--)k(A,R)}},{key:"getFormatters",value:function(e){var t,s=this.w,a=s.globals.yLabelFormatters[e];return s.globals.ttVal!==void 0?Array.isArray(s.globals.ttVal)?(a=s.globals.ttVal[e]&&s.globals.ttVal[e].formatter,t=s.globals.ttVal[e]&&s.globals.ttVal[e].title&&s.globals.ttVal[e].title.formatter):(a=s.globals.ttVal.formatter,typeof s.globals.ttVal.title.formatter=="function"&&(t=s.globals.ttVal.title.formatter)):t=s.config.tooltip.y.title.formatter,typeof a!="function"&&(a=s.globals.yLabelFormatters[0]?s.globals.yLabelFormatters[0]:function(i){return i}),typeof t!="function"&&(t=function(i){return i?i+": ":""}),{yLbFormatter:a,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,s=e.index,a=e.seriesIndex,i=e.j,o=this.w;return t(String(o.globals.seriesNames[s]),{series:o.globals.series,seriesIndex:a,dataPointIndex:i,w:o})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,s=e.j,a=e.ttItems,i=e.values,o=e.seriesName,l=e.shared,c=e.pColor,u=this.w,h=this.ttCtx,f=i.val,g=i.goalVals,x=i.xVal,y=i.xAxisTTVal,b=i.zVal,v=null;v=a[t].children,u.config.tooltip.fillSeriesColor&&(a[t].style.backgroundColor=c,v[0].style.display="none"),h.showTooltipTitle&&(h.tooltipTitle===null&&(h.tooltipTitle=u.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),h.tooltipTitle.innerHTML=x),h.isXAxisTooltipEnabled&&(h.xaxisTooltipText.innerHTML=y!==""?y:x);var N=a[t].querySelector(".apexcharts-tooltip-text-y-label");N&&(N.innerHTML=o||"");var k=a[t].querySelector(".apexcharts-tooltip-text-y-value");k&&(k.innerHTML=f!==void 0?f:""),v[0]&&v[0].classList.contains("apexcharts-tooltip-marker")&&(u.config.tooltip.marker.fillColors&&Array.isArray(u.config.tooltip.marker.fillColors)&&(c=u.config.tooltip.marker.fillColors[t]),u.config.tooltip.fillSeriesColor?v[0].style.backgroundColor=c:v[0].style.color=c),u.config.tooltip.marker.show||(v[0].style.display="none");var A=a[t].querySelector(".apexcharts-tooltip-text-goals-label"),R=a[t].querySelector(".apexcharts-tooltip-text-goals-value");if(g.length&&u.globals.seriesGoals[t]){var _=function(){var T="<div>",D="<div>";g.forEach(function(L,F){T+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(L.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(L.attrs.name,"</div>"),D+="<div>".concat(L.val,"</div>")}),A.innerHTML=T+"</div>",R.innerHTML=D+"</div>"};l?u.globals.seriesGoals[t][s]&&Array.isArray(u.globals.seriesGoals[t][s])?_():(A.innerHTML="",R.innerHTML=""):_()}else A.innerHTML="",R.innerHTML="";if(b!==null&&(a[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=u.config.tooltip.z.title,a[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=b!==void 0?b:""),l&&v[0]){if(u.config.tooltip.hideEmptySeries){var I=a[t].querySelector(".apexcharts-tooltip-marker"),P=a[t].querySelector(".apexcharts-tooltip-text");parseFloat(f)==0?(I.style.display="none",P.style.display="none"):(I.style.display="block",P.style.display="block")}f==null||u.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||u.globals.collapsedSeriesIndices.indexOf(t)>-1||Array.isArray(h.tConfig.enabledOnSeries)&&h.tConfig.enabledOnSeries.indexOf(t)===-1?v[0].parentNode.style.display="none":v[0].parentNode.style.display=u.config.tooltip.items.display}else Array.isArray(h.tConfig.enabledOnSeries)&&h.tConfig.enabledOnSeries.indexOf(t)===-1&&(v[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(e,t){var s=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var a=s.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(t));a&&(a.classList.add("apexcharts-active"),a.style.display=s.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,s=e.j,a=this.w,i=this.ctx.series.filteredSeriesX(),o="",l="",c=null,u=null,h={series:a.globals.series,seriesIndex:t,dataPointIndex:s,w:a},f=a.globals.ttZFormatter;s===null?u=a.globals.series[t]:a.globals.isXNumeric&&a.config.chart.type!=="treemap"?(o=i[t][s],i[t].length===0&&(o=i[this.tooltipUtil.getFirstActiveXArray(i)][s])):o=new uS(this.ctx).isFormatXY()?a.config.series[t].data[s]!==void 0?a.config.series[t].data[s].x:"":a.globals.labels[s]!==void 0?a.globals.labels[s]:"";var g=o;return a.globals.isXNumeric&&a.config.xaxis.type==="datetime"?o=new Hg(this.ctx).xLabelFormat(a.globals.ttKeyFormatter,g,g,{i:void 0,dateFormatter:new ma(this.ctx).formatDate,w:this.w}):o=a.globals.isBarHorizontal?a.globals.yLabelFormatters[0](g,h):a.globals.xLabelFormatter(g,h),a.config.tooltip.x.formatter!==void 0&&(o=a.globals.ttKeyFormatter(g,h)),a.globals.seriesZ.length>0&&a.globals.seriesZ[t].length>0&&(c=f(a.globals.seriesZ[t][s],a)),l=typeof a.config.xaxis.tooltip.formatter=="function"?a.globals.xaxisTooltipFormatter(g,h):o,{val:Array.isArray(u)?u.join(" "):u,xVal:Array.isArray(o)?o.join(" "):o,xAxisTTVal:Array.isArray(l)?l.join(" "):l,zVal:c}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,s=e.j,a=e.y1,i=e.y2,o=e.w,l=this.ttCtx.getElTooltip(),c=o.config.tooltip.custom;Array.isArray(c)&&c[t]&&(c=c[t]);var u=c({ctx:this.ctx,series:o.globals.series,seriesIndex:t,dataPointIndex:s,y1:a,y2:i,w:o});typeof u=="string"||typeof u=="number"?l.innerHTML=u:(u instanceof Element||typeof u.nodeName=="string")&&(l.innerHTML="",l.appendChild(u.cloneNode(!0)))}}]),r}(),iF=function(){function r(e){ct(this,r),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return dt(r,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=this.ttCtx,a=this.w,i=s.getElXCrosshairs(),o=e-s.xcrosshairsWidth/2,l=a.globals.labels.slice().length;if(t!==null&&(o=a.globals.gridWidth/l*t),i===null||a.globals.isBarHorizontal||(i.setAttribute("x",o),i.setAttribute("x1",o),i.setAttribute("x2",o),i.setAttribute("y2",a.globals.gridHeight),i.classList.add("apexcharts-active")),o<0&&(o=0),o>a.globals.gridWidth&&(o=a.globals.gridWidth),s.isXAxisTooltipEnabled){var c=o;a.config.xaxis.crosshairs.width!=="tickWidth"&&a.config.xaxis.crosshairs.width!=="barWidth"||(c=o+s.xcrosshairsWidth/2),this.moveXAxisTooltip(c)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;t.ycrosshairs!==null&&Be.setAttrs(t.ycrosshairs,{y1:e,y2:e}),t.ycrosshairsHidden!==null&&Be.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,s=this.ttCtx;if(s.xaxisTooltip!==null&&s.xcrosshairsWidth!==0){s.xaxisTooltip.classList.add("apexcharts-active");var a=s.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=s.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e)){e+=t.globals.translateX;var i;i=new Be(this.ctx).getTextRects(s.xaxisTooltipText.innerHTML),s.xaxisTooltipText.style.minWidth=i.width+"px",s.xaxisTooltip.style.left=e+"px",s.xaxisTooltip.style.top=a+"px"}}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,s=this.ttCtx;s.yaxisTTEls===null&&(s.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var a=parseInt(s.ycrosshairsHidden.getAttribute("y1"),10),i=t.globals.translateY+a,o=s.yaxisTTEls[e].getBoundingClientRect(),l=o.height,c=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(c-=o.width),i-=l/2,t.globals.ignoreYAxisIndexes.indexOf(e)===-1&&i>0&&i<t.globals.gridHeight?(s.yaxisTTEls[e].classList.add("apexcharts-active"),s.yaxisTTEls[e].style.top=i+"px",s.yaxisTTEls[e].style.left=c+t.config.yaxis[e].tooltip.offsetX+"px"):s.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=this.w,i=this.ttCtx,o=i.getElTooltip(),l=i.tooltipRect,c=s!==null?parseFloat(s):1,u=parseFloat(e)+c+5,h=parseFloat(t)+c/2;if(u>a.globals.gridWidth/2&&(u=u-l.ttWidth-c-10),u>a.globals.gridWidth-l.ttWidth-10&&(u=a.globals.gridWidth-l.ttWidth),u<-20&&(u=-20),a.config.tooltip.followCursor){var f=i.getElGrid().getBoundingClientRect();(u=i.e.clientX-f.left)>a.globals.gridWidth/2&&(u-=i.tooltipRect.ttWidth),(h=i.e.clientY+a.globals.translateY-f.top)>a.globals.gridHeight/2&&(h-=i.tooltipRect.ttHeight)}else a.globals.isBarHorizontal||l.ttHeight/2+h>a.globals.gridHeight&&(h=a.globals.gridHeight-l.ttHeight+a.globals.translateY);isNaN(u)||(u+=a.globals.translateX,o.style.left=u+"px",o.style.top=h+"px")}},{key:"moveMarkers",value:function(e,t){var s=this.w,a=this.ttCtx;if(s.globals.markers.size[e]>0)for(var i=s.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),o=0;o<i.length;o++)parseInt(i[o].getAttribute("rel"),10)===t&&(a.marker.resetPointsSize(),a.marker.enlargeCurrentPoint(t,i[o]));else a.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var s,a,i,o,l=this.w,c=this.ttCtx,u=new Be(this.ctx),h=l.globals.pointsArray,f=c.tooltipUtil.getHoverMarkerSize(t),g=l.config.series[t].type;if(!g||g!=="column"&&g!=="candlestick"&&g!=="boxPlot"){i=(s=h[t][e])===null||s===void 0?void 0:s[0],o=((a=h[t][e])===null||a===void 0?void 0:a[1])||0;var x=l.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers path"));if(x&&o<l.globals.gridHeight&&o>0){var y=x.getAttribute("shape"),b=u.getMarkerPath(i,o,y,1.5*f);x.setAttribute("d",b)}this.moveXCrosshairs(i),c.fixedTooltip||this.moveTooltip(i,o,f)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,s=this.ttCtx,a=s.w,i=0,o=0,l=a.globals.pointsArray,c=new zn(this.ctx),u=new Be(this.ctx);t=c.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var h=s.tooltipUtil.getHoverMarkerSize(t);if(l[t]&&(i=l[t][e][0],o=l[t][e][1]),!isNaN(i)){var f=s.tooltipUtil.getAllMarkers();if(f.length)for(var g=0;g<a.globals.series.length;g++){var x=l[g];if(a.globals.comboCharts&&x===void 0&&f.splice(g,0,null),x&&x.length){var y=l[g][e][1],b=void 0;f[g].setAttribute("cx",i);var v=f[g].getAttribute("shape");if(a.config.chart.type==="rangeArea"&&!a.globals.comboCharts){var N=e+a.globals.series[g].length;b=l[g][N][1],y-=Math.abs(y-b)/2}if(y!==null&&!isNaN(y)&&y<a.globals.gridHeight+h&&y+h>0){var k=u.getMarkerPath(i,y,v,h);f[g].setAttribute("d",k)}else f[g].setAttribute("d","")}}this.moveXCrosshairs(i),s.fixedTooltip||this.moveTooltip(i,o||a.globals.gridHeight,h)}}},{key:"moveStickyTooltipOverBars",value:function(e,t){var s=this.w,a=this.ttCtx,i=s.globals.columnSeries?s.globals.columnSeries.length:s.globals.series.length;s.config.chart.stacked&&(i=s.globals.barGroups.length);var o=i>=2&&i%2==0?Math.floor(i/2):Math.floor(i/2)+1;s.globals.isBarHorizontal&&(o=new zn(this.ctx).getActiveConfigSeriesIndex("desc")+1);var l=s.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(o,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"']"));l||typeof t!="number"||(l=s.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,"']")));var c=l?parseFloat(l.getAttribute("cx")):0,u=l?parseFloat(l.getAttribute("cy")):0,h=l?parseFloat(l.getAttribute("barWidth")):0,f=a.getElGrid().getBoundingClientRect(),g=l&&(l.classList.contains("apexcharts-candlestick-area")||l.classList.contains("apexcharts-boxPlot-area"));s.globals.isXNumeric?(l&&!g&&(c-=i%2!=0?h/2:0),l&&g&&(c-=h/2)):s.globals.isBarHorizontal||(c=a.xAxisTicksPositions[e-1]+a.dataPointsDividedWidth/2,isNaN(c)&&(c=a.xAxisTicksPositions[e]-a.dataPointsDividedWidth/2)),s.globals.isBarHorizontal?u-=a.tooltipRect.ttHeight:s.config.tooltip.followCursor?u=a.e.clientY-f.top-a.tooltipRect.ttHeight/2:u+a.tooltipRect.ttHeight+15>s.globals.gridHeight&&(u=s.globals.gridHeight),s.globals.isBarHorizontal||this.moveXCrosshairs(c),a.fixedTooltip||this.moveTooltip(c,u||s.globals.gridHeight)}}]),r}(),mde=function(){function r(e){ct(this,r),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new iF(e)}return dt(r,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new Be(this.ctx),s=new Ph(this.ctx),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");a=Gr(a),e.config.chart.stacked&&a.sort(function(f,g){return parseFloat(f.getAttribute("data:realIndex"))-parseFloat(g.getAttribute("data:realIndex"))});for(var i=0;i<a.length;i++){var o=a[i].querySelector(".apexcharts-series-markers-wrap");if(o!==null){var l=void 0,c="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));e.config.chart.type!=="line"&&e.config.chart.type!=="area"||e.globals.comboCharts||e.config.tooltip.intersect||(c+=" no-pointer-events");var u=s.getMarkerConfig({cssClass:c,seriesIndex:Number(o.getAttribute("data:realIndex"))});(l=t.drawMarker(0,0,u)).node.setAttribute("default-marker-size",0);var h=document.createElementNS(e.globals.SVGNS,"g");h.classList.add("apexcharts-series-markers"),h.appendChild(l.node),o.appendChild(h)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=this.w;i.config.chart.type!=="bubble"&&this.newPointSize(e,t);var o=t.getAttribute("cx"),l=t.getAttribute("cy");if(s!==null&&a!==null&&(o=s,l=a),this.tooltipPosition.moveXCrosshairs(o),!this.fixedTooltip){if(i.config.chart.type==="radar"){var c=this.ttCtx.getElGrid().getBoundingClientRect();o=this.ttCtx.e.clientX-c.left}this.tooltipPosition.moveTooltip(o,l,i.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,s=this,a=this.ttCtx,i=e,o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),l=t.config.markers.hover.size,c=0;c<o.length;c++){var u=o[c].getAttribute("rel"),h=o[c].getAttribute("index");if(l===void 0&&(l=t.globals.markers.size[h]+t.config.markers.hover.sizeOffset),i===parseInt(u,10)){s.newPointSize(i,o[c]);var f=o[c].getAttribute("cx"),g=o[c].getAttribute("cy");s.tooltipPosition.moveXCrosshairs(f),a.fixedTooltip||s.tooltipPosition.moveTooltip(f,g,l)}else s.oldPointSize(o[c])}}},{key:"newPointSize",value:function(e,t){var s=this.w,a=s.config.markers.hover.size,i=e===0?t.parentNode.firstChild:t.parentNode.lastChild;if(i.getAttribute("default-marker-size")!=="0"){var o=parseInt(i.getAttribute("index"),10);a===void 0&&(a=s.globals.markers.size[o]+s.config.markers.hover.sizeOffset),a<0&&(a=0);var l=this.ttCtx.tooltipUtil.getPathFromPoint(t,a);t.setAttribute("d",l)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size")),s=this.ttCtx.tooltipUtil.getPathFromPoint(e,t);e.setAttribute("d",s)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var s=parseFloat(e[t].getAttribute("default-marker-size"));if(ne.isNumber(s)&&s>0){var a=this.ttCtx.tooltipUtil.getPathFromPoint(e[t],s);e[t].setAttribute("d",a)}else e[t].setAttribute("d","M0,0")}}}]),r}(),fde=function(){function r(e){ct(this,r),this.w=e.w;var t=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!t.globals.isBarHorizontal&&t.config.chart.type==="rangeBar"&&t.config.plotOptions.bar.rangeBarGroupRows}return dt(r,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,s=e.opt,a=e.x,i=e.y,o=e.type,l=this.ttCtx,c=this.w;if(t.target.classList.contains("apexcharts-".concat(o,"-rect"))){var u=this.getAttr(t,"i"),h=this.getAttr(t,"j"),f=this.getAttr(t,"cx"),g=this.getAttr(t,"cy"),x=this.getAttr(t,"width"),y=this.getAttr(t,"height");if(l.tooltipLabels.drawSeriesTexts({ttItems:s.ttItems,i:u,j:h,shared:!1,e:t}),c.globals.capturedSeriesIndex=u,c.globals.capturedDataPointIndex=h,a=f+l.tooltipRect.ttWidth/2+x,i=g+l.tooltipRect.ttHeight/2-y/2,l.tooltipPosition.moveXCrosshairs(f+x/2),a>c.globals.gridWidth/2&&(a=f-l.tooltipRect.ttWidth/2+x),l.w.config.tooltip.followCursor){var b=c.globals.dom.elWrap.getBoundingClientRect();a=c.globals.clientX-b.left-(a>c.globals.gridWidth/2?l.tooltipRect.ttWidth:0),i=c.globals.clientY-b.top-(i>c.globals.gridHeight/2?l.tooltipRect.ttHeight:0)}}return{x:a,y:i}}},{key:"handleMarkerTooltip",value:function(e){var t,s,a=e.e,i=e.opt,o=e.x,l=e.y,c=this.w,u=this.ttCtx;if(a.target.classList.contains("apexcharts-marker")){var h=parseInt(i.paths.getAttribute("cx"),10),f=parseInt(i.paths.getAttribute("cy"),10),g=parseFloat(i.paths.getAttribute("val"));if(s=parseInt(i.paths.getAttribute("rel"),10),t=parseInt(i.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,u.intersect){var x=ne.findAncestor(i.paths,"apexcharts-series");x&&(t=parseInt(x.getAttribute("data:realIndex"),10))}if(u.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:t,j:s,shared:!u.showOnIntersect&&c.config.tooltip.shared,e:a}),a.type==="mouseup"&&u.markerClick(a,t,s),c.globals.capturedSeriesIndex=t,c.globals.capturedDataPointIndex=s,o=h,l=f+c.globals.translateY-1.4*u.tooltipRect.ttHeight,u.w.config.tooltip.followCursor){var y=u.getElGrid().getBoundingClientRect();l=u.e.clientY+c.globals.translateY-y.top}g<0&&(l=f),u.marker.enlargeCurrentPoint(s,i.paths,o,l)}return{x:o,y:l}}},{key:"handleBarTooltip",value:function(e){var t,s,a=e.e,i=e.opt,o=this.w,l=this.ttCtx,c=l.getElTooltip(),u=0,h=0,f=0,g=this.getBarTooltipXY({e:a,opt:i});if(g.j!==null||g.barHeight!==0||g.barWidth!==0){t=g.i;var x=g.j;if(o.globals.capturedSeriesIndex=t,o.globals.capturedDataPointIndex=x,o.globals.isBarHorizontal&&l.tooltipUtil.hasBars()||!o.config.tooltip.shared?(h=g.x,f=g.y,s=Array.isArray(o.config.stroke.width)?o.config.stroke.width[t]:o.config.stroke.width,u=h):o.globals.comboCharts||o.config.tooltip.shared||(u/=2),isNaN(f)&&(f=o.globals.svgHeight-l.tooltipRect.ttHeight),parseInt(i.paths.parentNode.getAttribute("data:realIndex"),10),h+l.tooltipRect.ttWidth>o.globals.gridWidth?h-=l.tooltipRect.ttWidth:h<0&&(h=0),l.w.config.tooltip.followCursor){var y=l.getElGrid().getBoundingClientRect();f=l.e.clientY-y.top}l.tooltip===null&&(l.tooltip=o.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),o.config.tooltip.shared||(o.globals.comboBarCount>0?l.tooltipPosition.moveXCrosshairs(u+s/2):l.tooltipPosition.moveXCrosshairs(u)),!l.fixedTooltip&&(!o.config.tooltip.shared||o.globals.isBarHorizontal&&l.tooltipUtil.hasBars())&&(f=f+o.globals.translateY-l.tooltipRect.ttHeight/2,c.style.left=h+o.globals.translateX+"px",c.style.top=f+"px")}}},{key:"getBarTooltipXY",value:function(e){var t=this,s=e.e,a=e.opt,i=this.w,o=null,l=this.ttCtx,c=0,u=0,h=0,f=0,g=0,x=s.target.classList;if(x.contains("apexcharts-bar-area")||x.contains("apexcharts-candlestick-area")||x.contains("apexcharts-boxPlot-area")||x.contains("apexcharts-rangebar-area")){var y=s.target,b=y.getBoundingClientRect(),v=a.elGrid.getBoundingClientRect(),N=b.height;g=b.height;var k=b.width,A=parseInt(y.getAttribute("cx"),10),R=parseInt(y.getAttribute("cy"),10);f=parseFloat(y.getAttribute("barWidth"));var _=s.type==="touchmove"?s.touches[0].clientX:s.clientX;o=parseInt(y.getAttribute("j"),10),c=parseInt(y.parentNode.getAttribute("rel"),10)-1;var I=y.getAttribute("data-range-y1"),P=y.getAttribute("data-range-y2");i.globals.comboCharts&&(c=parseInt(y.parentNode.getAttribute("data:realIndex"),10));var T=function(L){return i.globals.isXNumeric?A-k/2:t.isVerticalGroupedRangeBar?A+k/2:A-l.dataPointsDividedWidth+k/2},D=function(){return R-l.dataPointsDividedHeight+N/2-l.tooltipRect.ttHeight/2};l.tooltipLabels.drawSeriesTexts({ttItems:a.ttItems,i:c,j:o,y1:I?parseInt(I,10):null,y2:P?parseInt(P,10):null,shared:!l.showOnIntersect&&i.config.tooltip.shared,e:s}),i.config.tooltip.followCursor?i.globals.isBarHorizontal?(u=_-v.left+15,h=D()):(u=T(),h=s.clientY-v.top-l.tooltipRect.ttHeight/2-15):i.globals.isBarHorizontal?((u=A)<l.xyRatios.baseLineInvertedY&&(u=A-l.tooltipRect.ttWidth),h=D()):(u=T(),h=R)}return{x:u,y:h,barHeight:g,barWidth:f,i:c,j:o}}}]),r}(),gde=function(){function r(e){ct(this,r),this.w=e.w,this.ttCtx=e}return dt(r,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,s=e.config.xaxis.position==="bottom";t.xaxisOffY=s?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var a=s?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",i=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+e.config.tooltip.theme),i.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,s=0;s<e.config.yaxis.length;s++){var a=e.config.yaxis[s].opposite||e.config.yaxis[s].crosshairs.opposite;t.yaxisOffX=a?e.globals.gridWidth+1:1;var i="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(s,a?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),o=e.globals.dom.elWrap;e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(s))===null&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",i+" apexcharts-theme-"+e.config.tooltip.theme),o.appendChild(t.yaxisTooltip),s===0&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[s]=document.createElement("div"),t.yaxisTooltipText[s].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[s]))}}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,s=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var a=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(a!==null&&e.config.xaxis.crosshairs.width==="barWidth"){var i=parseFloat(a.getAttribute("barWidth"));t.xcrosshairsWidth=i}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var l=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/l}else if(e.config.xaxis.crosshairs.width==="barWidth"){var c=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(c!==null){var u=parseFloat(c.getAttribute("barWidth"));t.xcrosshairsWidth=u}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),s!==null&&t.xcrosshairsWidth>0&&s.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,s){var a=this.ttCtx,i=this.w,o=i.globals,l=o.seriesYAxisMap[e];if(a.yaxisTooltips[e]&&l.length>0){var c=o.yLabelFormatters[e],u=a.getElGrid().getBoundingClientRect(),h=l[0],f=0;s.yRatio.length>1&&(f=h);var g=(t-u.top)*s.yRatio[f],x=o.maxYArr[h]-o.minYArr[h],y=o.minYArr[h]+(x-g);i.config.yaxis[e].reversed&&(y=o.maxYArr[h]-(x-g)),a.tooltipPosition.moveYCrosshairs(t-u.top),a.yaxisTooltipText[e].innerHTML=c(y),a.tooltipPosition.moveYAxisTooltip(e)}}}]),r}(),d4=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w;var t=this.w;this.tConfig=t.config.tooltip,this.tooltipUtil=new nF(this),this.tooltipLabels=new hde(this),this.tooltipPosition=new iF(this),this.marker=new mde(this),this.intersect=new fde(this),this.axesTooltip=new gde(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!t.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return dt(r,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map(function(o,l){return!!(o.show&&o.tooltip.enabled&&t.globals.axisCharts)}),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var s=document.createElement("div");if(s.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&s.classList.add(t.config.tooltip.cssClass),s.classList.add("apexcharts-theme-".concat(this.tConfig.theme||"light")),t.globals.dom.elWrap.appendChild(s),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var a=new og(this.ctx);this.xAxisTicksPositions=a.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&t.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),t.config.markers.size!==0&&t.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,s.appendChild(this.tooltipTitle));var i=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(i=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(i),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,s=this.w,a=[],i=this.getElTooltip(),o=function(c){var u=document.createElement("div");u.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(c)),u.style.order=s.config.tooltip.inverseOrder?e-c:c+1;var h=document.createElement("span");h.classList.add("apexcharts-tooltip-marker"),s.config.tooltip.fillSeriesColor?h.style.backgroundColor=s.globals.colors[c]:h.style.color=s.globals.colors[c];var f=s.config.markers.shape,g=f;Array.isArray(f)&&(g=f[c]),h.setAttribute("shape",g),u.appendChild(h);var x=document.createElement("div");x.classList.add("apexcharts-tooltip-text"),x.style.fontFamily=t.tConfig.style.fontFamily||s.config.chart.fontFamily,x.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach(function(y){var b=document.createElement("div");b.classList.add("apexcharts-tooltip-".concat(y,"-group"));var v=document.createElement("span");v.classList.add("apexcharts-tooltip-text-".concat(y,"-label")),b.appendChild(v);var N=document.createElement("span");N.classList.add("apexcharts-tooltip-text-".concat(y,"-value")),b.appendChild(N),x.appendChild(b)}),u.appendChild(x),i.appendChild(u),a.push(u)},l=0;l<e;l++)o(l);return a}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,s=this.getElTooltip(),a=!(t!=="bar"&&t!=="candlestick"&&t!=="boxPlot"&&t!=="rangeBar"),i=t==="area"||t==="line"||t==="scatter"||t==="bubble"||t==="radar",o=e.globals.dom.Paper.node,l=this.getElGrid();l&&(this.seriesBound=l.getBoundingClientRect());var c,u=[],h=[],f={hoverArea:o,elGrid:l,tooltipEl:s,tooltipY:u,tooltipX:h,ttItems:this.ttItems};if(e.globals.axisCharts&&(i?c=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):a?c=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):t!=="heatmap"&&t!=="treemap"||(c=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),c&&c.length))for(var g=0;g<c.length;g++)u.push(c[g].getAttribute("cy")),h.push(c[g].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||a&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([o],f);else if(a&&!e.globals.comboCharts||i&&this.showOnIntersect)this.addDatapointEventsListeners(f);else if(!e.globals.axisCharts||t==="heatmap"||t==="treemap"){var x=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(x,f)}if(this.showOnIntersect){var y=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");y.length>0&&this.addPathsEventListeners(y,f),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(f)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),s=t.getBoundingClientRect(),a=s.width+10,i=s.height+10,o=this.tConfig.fixed.offsetX,l=this.tConfig.fixed.offsetY,c=this.tConfig.fixed.position.toLowerCase();return c.indexOf("right")>-1&&(o=o+e.globals.svgWidth-a+10),c.indexOf("bottom")>-1&&(l=l+e.globals.svgHeight-i-10),t.style.left=o+"px",t.style.top=l+"px",{x:o,y:l,ttWidth:a,ttHeight:i}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var s=this,a=function(o){var l={paths:e[o],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(c){return e[o].addEventListener(c,s.onSeriesHover.bind(s,l),{capture:!1,passive:!0})})},i=0;i<e.length;i++)a(i)}},{key:"onSeriesHover",value:function(e,t){var s=this,a=Date.now()-this.lastHoverTime;a>=20?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){s.seriesHover(e,t)},20-a))}},{key:"seriesHover",value:function(e,t){var s=this;this.lastHoverTime=Date.now();var a=[],i=this.w;i.config.chart.group&&(a=this.ctx.getGroupedCharts()),i.globals.axisCharts&&(i.globals.minX===-1/0&&i.globals.maxX===1/0||i.globals.dataPoints===0)||(a.length?a.forEach(function(o){var l=s.getElTooltip(o),c={paths:e.paths,tooltipEl:l,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:o.w.globals.tooltip.ttItems};o.w.globals.minX===s.w.globals.minX&&o.w.globals.maxX===s.w.globals.maxX&&o.w.globals.tooltip.seriesHoverByContext({chartCtx:o,ttCtx:o.w.globals.tooltip,opt:c,e:t})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,s=e.ttCtx,a=e.opt,i=e.e,o=t.w,l=this.getElTooltip(t);l&&(s.tooltipRect={x:0,y:0,ttWidth:l.getBoundingClientRect().width,ttHeight:l.getBoundingClientRect().height},s.e=i,s.tooltipUtil.hasBars()&&!o.globals.comboCharts&&!s.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new zn(t).toggleSeriesOnHover(i,i.target.parentNode),o.globals.axisCharts?s.axisChartsTooltips({e:i,opt:a,tooltipRect:s.tooltipRect}):s.nonAxisChartsTooltips({e:i,opt:a,tooltipRect:s.tooltipRect}),s.fixedTooltip&&s.drawFixedTooltipRect())}},{key:"axisChartsTooltips",value:function(e){var t,s,a=e.e,i=e.opt,o=this.w,l=i.elGrid.getBoundingClientRect(),c=a.type==="touchmove"?a.touches[0].clientX:a.clientX,u=a.type==="touchmove"?a.touches[0].clientY:a.clientY;if(this.clientY=u,this.clientX=c,o.globals.capturedSeriesIndex=-1,o.globals.capturedDataPointIndex=-1,u<l.top||u>l.top+l.height)this.handleMouseOut(i);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!o.config.tooltip.shared){var h=parseInt(i.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(h)<0)return void this.handleMouseOut(i)}var f=this.getElTooltip(),g=this.getElXCrosshairs(),x=[];o.config.chart.group&&(x=this.ctx.getSyncedCharts());var y=o.globals.xyCharts||o.config.chart.type==="bar"&&!o.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||o.globals.comboCharts&&this.tooltipUtil.hasBars();if(a.type==="mousemove"||a.type==="touchmove"||a.type==="mouseup"){if(o.globals.collapsedSeries.length+o.globals.ancillaryCollapsedSeries.length===o.globals.series.length)return;g!==null&&g.classList.add("apexcharts-active");var b=this.yaxisTooltips.filter(function(k){return k===!0});if(this.ycrosshairs!==null&&b.length&&this.ycrosshairs.classList.add("apexcharts-active"),y&&!this.showOnIntersect||x.length>1)this.handleStickyTooltip(a,c,u,i);else if(o.config.chart.type==="heatmap"||o.config.chart.type==="treemap"){var v=this.intersect.handleHeatTreeTooltip({e:a,opt:i,x:t,y:s,type:o.config.chart.type});t=v.x,s=v.y,f.style.left=t+"px",f.style.top=s+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:a,opt:i}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:a,opt:i,x:t,y:s});if(this.yaxisTooltips.length)for(var N=0;N<o.config.yaxis.length;N++)this.axesTooltip.drawYaxisTooltipText(N,u,this.xyRatios);o.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),i.tooltipEl.classList.add("apexcharts-active")}else a.type!=="mouseout"&&a.type!=="touchend"||this.handleMouseOut(i)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,s=e.opt,a=e.tooltipRect,i=this.w,o=s.paths.getAttribute("rel"),l=this.getElTooltip(),c=i.globals.dom.elWrap.getBoundingClientRect();if(t.type==="mousemove"||t.type==="touchmove"){i.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),l.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:s.ttItems,i:parseInt(o,10)-1,shared:!1});var u=i.globals.clientX-c.left-a.ttWidth/2,h=i.globals.clientY-c.top-a.ttHeight-10;if(l.style.left=u+"px",l.style.top=h+"px",i.config.legend.tooltipHoverFormatter){var f=o-1,g=(0,i.config.legend.tooltipHoverFormatter)(this.legendLabels[f].getAttribute("data:default-text"),{seriesIndex:f,dataPointIndex:f,w:i});this.legendLabels[f].innerHTML=g}}else t.type!=="mouseout"&&t.type!=="touchend"||(l.classList.remove("apexcharts-active"),i.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),i.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(x){var y=x.getAttribute("data:default-text");x.innerHTML=decodeURIComponent(y)}))}},{key:"handleStickyTooltip",value:function(e,t,s,a){var i=this.w,o=this.tooltipUtil.getNearestValues({context:this,hoverArea:a.hoverArea,elGrid:a.elGrid,clientX:t,clientY:s}),l=o.j,c=o.capturedSeries;i.globals.collapsedSeriesIndices.includes(c)&&(c=null);var u=a.elGrid.getBoundingClientRect();if(o.hoverX<0||o.hoverX>u.width)this.handleMouseOut(a);else if(c!==null)this.handleStickyCapturedSeries(e,c,a,l);else if(this.tooltipUtil.isXoverlap(l)||i.globals.isBarHorizontal){var h=i.globals.series.findIndex(function(f,g){return!i.globals.collapsedSeriesIndices.includes(g)});this.create(e,this,h,l,a.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(e,t,s,a){var i=this.w;if(!this.tConfig.shared&&i.globals.series[t][a]===null)return void this.handleMouseOut(s);if(i.globals.series[t][a]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(a)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,a,s.ttItems):this.create(e,this,t,a,s.ttItems,!1);else if(this.tooltipUtil.isXoverlap(a)){var o=i.globals.series.findIndex(function(l,c){return!i.globals.collapsedSeriesIndices.includes(c)});this.create(e,this,o,a,s.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new Be(this.ctx),s=e.globals.dom.Paper.find(".apexcharts-bar-area"),a=0;a<s.length;a++)t.pathMouseLeave(s[a])}},{key:"handleMouseOut",value:function(e){var t=this.w,s=this.getElXCrosshairs();if(t.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),t.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),s!==null&&s.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var a=0;a<this.yaxisTTEls.length;a++)this.yaxisTTEls[a].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(i){var o=i.getAttribute("data:default-text");i.innerHTML=decodeURIComponent(o)})}},{key:"markerClick",value:function(e,t,s){var a=this.w;typeof a.config.chart.events.markerClick=="function"&&a.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:s,w:a}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:s,w:a}])}},{key:"create",value:function(e,t,s,a,i){var o,l,c,u,h,f,g,x,y,b,v,N,k,A,R,_,I=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,P=this.w,T=t;e.type==="mouseup"&&this.markerClick(e,s,a),I===null&&(I=this.tConfig.shared);var D=this.tooltipUtil.hasMarkers(s),L=this.tooltipUtil.getElBars(),F=function(){P.globals.markers.largestSize>0?T.marker.enlargePoints(a):T.tooltipPosition.moveDynamicPointsOnHover(a)};if(P.config.legend.tooltipHoverFormatter){var z=P.config.legend.tooltipHoverFormatter,O=Array.from(this.legendLabels);O.forEach(function(se){var le=se.getAttribute("data:default-text");se.innerHTML=decodeURIComponent(le)});for(var V=0;V<O.length;V++){var Y=O[V],H=parseInt(Y.getAttribute("i"),10),$=decodeURIComponent(Y.getAttribute("data:default-text")),X=z($,{seriesIndex:I?H:s,dataPointIndex:a,w:P});if(I)Y.innerHTML=P.globals.collapsedSeriesIndices.indexOf(H)<0?X:$;else if(Y.innerHTML=H===s?X:$,s===H)break}}var G=et(et({ttItems:i,i:s,j:a},((o=P.globals.seriesRange)===null||o===void 0||(l=o[s])===null||l===void 0||(c=l[a])===null||c===void 0||(u=c.y[0])===null||u===void 0?void 0:u.y1)!==void 0&&{y1:(h=P.globals.seriesRange)===null||h===void 0||(f=h[s])===null||f===void 0||(g=f[a])===null||g===void 0||(x=g.y[0])===null||x===void 0?void 0:x.y1}),((y=P.globals.seriesRange)===null||y===void 0||(b=y[s])===null||b===void 0||(v=b[a])===null||v===void 0||(N=v.y[0])===null||N===void 0?void 0:N.y2)!==void 0&&{y2:(k=P.globals.seriesRange)===null||k===void 0||(A=k[s])===null||A===void 0||(R=A[a])===null||R===void 0||(_=R.y[0])===null||_===void 0?void 0:_.y2});if(I){if(T.tooltipLabels.drawSeriesTexts(et(et({},G),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),D)F();else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(L),this.barSeriesHeight>0)){var B=new Be(this.ctx),Q=P.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(a,"']"));this.deactivateHoverFilter(),T.tooltipUtil.getAllMarkers(!0).length&&!this.barSeriesHeight&&F(),T.tooltipPosition.moveStickyTooltipOverBars(a,s);for(var ee=0;ee<Q.length;ee++)B.pathMouseEnter(Q[ee])}}else T.tooltipLabels.drawSeriesTexts(et({shared:!1},G)),this.tooltipUtil.hasBars()&&T.tooltipPosition.moveStickyTooltipOverBars(a,s),D&&T.tooltipPosition.moveMarkers(s,a)}}]),r}(),pde=function(){function r(e){ct(this,r),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return dt(r,[{key:"handleBarDataLabels",value:function(e){var t,s,a=e.x,i=e.y,o=e.y1,l=e.y2,c=e.i,u=e.j,h=e.realIndex,f=e.columnGroupIndex,g=e.series,x=e.barHeight,y=e.barWidth,b=e.barXPosition,v=e.barYPosition,N=e.visibleSeries,k=this.w,A=new Be(this.barCtx.ctx),R=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[h]:this.barCtx.strokeWidth;k.globals.isXNumeric&&!k.globals.isBarHorizontal?(t=a+parseFloat(y*(N+1)),s=i+parseFloat(x*(N+1))-R):(t=a+parseFloat(y*N),s=i+parseFloat(x*N));var _,I=null,P=a,T=i,D={},L=k.config.dataLabels,F=this.barCtx.barOptions.dataLabels,z=this.barCtx.barOptions.dataLabels.total;v!==void 0&&this.barCtx.isRangeBar&&(s=v,T=v),b!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(t=b,P=b);var O=L.offsetX,V=L.offsetY,Y={width:0,height:0};if(k.config.dataLabels.enabled){var H=k.globals.series[c][u];Y=A.getTextRects(k.config.dataLabels.formatter?k.config.dataLabels.formatter(H,et(et({},k),{},{seriesIndex:c,dataPointIndex:u,w:k})):k.globals.yLabelFormatters[0](H),parseFloat(L.style.fontSize))}var $={x:a,y:i,i:c,j:u,realIndex:h,columnGroupIndex:f,bcx:t,bcy:s,barHeight:x,barWidth:y,textRects:Y,strokeWidth:R,dataLabelsX:P,dataLabelsY:T,dataLabelsConfig:L,barDataLabelsConfig:F,barTotalDataLabelsConfig:z,offX:O,offY:V};return D=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition($):this.calculateColumnsDataLabelsPosition($),_=this.drawCalculatedDataLabels({x:D.dataLabelsX,y:D.dataLabelsY,val:this.barCtx.isRangeBar?[o,l]:k.config.chart.stackType==="100%"?g[h][u]:k.globals.series[h][u],i:h,j:u,barWidth:y,barHeight:x,textRects:Y,dataLabelsConfig:L}),k.config.chart.stacked&&z.enabled&&(I=this.drawTotalDataLabels({x:D.totalDataLabelsX,y:D.totalDataLabelsY,barWidth:y,barHeight:x,realIndex:h,textAnchor:D.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:h,j:u}),dataLabelsConfig:L,barTotalDataLabelsConfig:z})),{dataLabelsPos:D,dataLabels:_,totalDataLabels:I}}},{key:"getStackedTotalDataLabel",value:function(e){var t=e.realIndex,s=e.j,a=this.w,i=this.barCtx.stackedSeriesTotals[s];return this.totalFormatter&&(i=this.totalFormatter(i,et(et({},a),{},{seriesIndex:t,dataPointIndex:s,w:a}))),i}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t=this,s=this.w,a=e.i,i=e.j,o=e.realIndex;e.columnGroupIndex;var l,c,u=e.y,h=e.bcx,f=e.barWidth,g=e.barHeight,x=e.textRects,y=e.dataLabelsX,b=e.dataLabelsY,v=e.dataLabelsConfig,N=e.barDataLabelsConfig,k=e.barTotalDataLabelsConfig,A=e.strokeWidth,R=e.offX,_=e.offY,I=h;g=Math.abs(g);var P=s.config.plotOptions.bar.dataLabels.orientation==="vertical",T=this.barCtx.barHelpers.getZeroValueEncounters({i:a,j:i}).zeroEncounters;h-=A/2;var D=s.globals.gridWidth/s.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?y+=f/2:(y=s.globals.isXNumeric?h-f/2+R:h-D+f/2+R,!s.config.chart.stacked&&T>0&&s.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(y-=f*T)),P&&(y=y+x.height/2-A/2-2);var L=s.globals.series[a][i]<0,F=u;switch(this.barCtx.isReversed&&(F=u+(L?g:-g)),N.position){case"center":b=P?L?F-g/2+_:F+g/2-_:L?F-g/2+x.height/2+_:F+g/2+x.height/2-_;break;case"bottom":b=P?L?F-g+_:F+g-_:L?F-g+x.height+A+_:F+g-x.height/2+A-_;break;case"top":b=P?L?F+_:F-_:L?F-x.height/2-_:F+x.height+_}var z=F;if(s.globals.seriesGroups.forEach(function(Y){var H;(H=t.barCtx[Y.join(",")])===null||H===void 0||H.prevY.forEach(function($){z=L?Math.max($[i],z):Math.min($[i],z)})}),this.barCtx.lastActiveBarSerieIndex===o&&k.enabled){var O=new Be(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:o,j:i}),v.fontSize);l=L?z-O.height/2-_-k.offsetY+18:z+O.height+_+k.offsetY-18;var V=D;c=I+(s.globals.isXNumeric?-f*s.globals.barGroups.length/2:s.globals.barGroups.length*f/2-(s.globals.barGroups.length-1)*f-V)+k.offsetX}return s.config.chart.stacked||(b<0?b=0+A:b+x.height/3>s.globals.gridHeight&&(b=s.globals.gridHeight-A)),{bcx:h,bcy:u,dataLabelsX:y,dataLabelsY:b,totalDataLabelsX:c,totalDataLabelsY:l,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this,s=this.w,a=e.x,i=e.i,o=e.j,l=e.realIndex,c=e.bcy,u=e.barHeight,h=e.barWidth,f=e.textRects,g=e.dataLabelsX,x=e.strokeWidth,y=e.dataLabelsConfig,b=e.barDataLabelsConfig,v=e.barTotalDataLabelsConfig,N=e.offX,k=e.offY,A=s.globals.gridHeight/s.globals.dataPoints,R=this.barCtx.barHelpers.getZeroValueEncounters({i,j:o}).zeroEncounters;h=Math.abs(h);var _,I,P=c-(this.barCtx.isRangeBar?0:A)+u/2+f.height/2+k-3;!s.config.chart.stacked&&R>0&&s.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(P-=u*R);var T="start",D=s.globals.series[i][o]<0,L=a;switch(this.barCtx.isReversed&&(L=a+(D?-h:h),T=D?"start":"end"),b.position){case"center":g=D?L+h/2-N:Math.max(f.width/2,L-h/2)+N;break;case"bottom":g=D?L+h-x-N:L-h+x+N;break;case"top":g=D?L-x-N:L-x+N}var F=L;if(s.globals.seriesGroups.forEach(function(O){var V;(V=t.barCtx[O.join(",")])===null||V===void 0||V.prevX.forEach(function(Y){F=D?Math.min(Y[o],F):Math.max(Y[o],F)})}),this.barCtx.lastActiveBarSerieIndex===l&&v.enabled){var z=new Be(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:l,j:o}),y.fontSize);D?(_=F-x-N-v.offsetX,T="end"):_=F+N+v.offsetX+(this.barCtx.isReversed?-(h+x):x),I=P-f.height/2+z.height/2+v.offsetY+x,s.globals.barGroups.length>1&&(I-=s.globals.barGroups.length/2*(u/2))}return s.config.chart.stacked||(y.textAnchor==="start"?g-f.width<0?g=D?f.width+x:x:g+f.width>s.globals.gridWidth&&(g=D?s.globals.gridWidth-x:s.globals.gridWidth-f.width-x):y.textAnchor==="middle"?g-f.width/2<0?g=f.width/2+x:g+f.width/2>s.globals.gridWidth&&(g=s.globals.gridWidth-f.width/2-x):y.textAnchor==="end"&&(g<1?g=f.width+x:g+1>s.globals.gridWidth&&(g=s.globals.gridWidth-f.width-x))),{bcx:a,bcy:c,dataLabelsX:g,dataLabelsY:P,totalDataLabelsX:_,totalDataLabelsY:I,totalDataLabelsAnchor:T}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,s=e.y,a=e.val,i=e.i,o=e.j,l=e.textRects,c=e.barHeight,u=e.barWidth,h=e.dataLabelsConfig,f=this.w,g="rotate(0)";f.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(g="rotate(-90, ".concat(t,", ").concat(s,")"));var x=new ah(this.barCtx.ctx),y=new Be(this.barCtx.ctx),b=h.formatter,v=null,N=f.globals.collapsedSeriesIndices.indexOf(i)>-1;if(h.enabled&&!N){v=y.group({class:"apexcharts-data-labels",transform:g});var k="";a!==void 0&&(k=b(a,et(et({},f),{},{seriesIndex:i,dataPointIndex:o,w:f}))),!a&&f.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(k="");var A=f.globals.series[i][o]<0,R=f.config.plotOptions.bar.dataLabels.position;f.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(R==="top"&&(h.textAnchor=A?"end":"start"),R==="center"&&(h.textAnchor="middle"),R==="bottom"&&(h.textAnchor=A?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&u<y.getTextRects(k,parseFloat(h.style.fontSize)).width&&(k=""),f.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?l.width/1.6>Math.abs(u)&&(k=""):l.height/1.6>Math.abs(c)&&(k=""));var _=et({},h);this.barCtx.isHorizontal&&a<0&&(h.textAnchor==="start"?_.textAnchor="end":h.textAnchor==="end"&&(_.textAnchor="start")),x.plotDataLabelsText({x:t,y:s,text:k,i,j:o,parent:v,dataLabelsConfig:_,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return v}},{key:"drawTotalDataLabels",value:function(e){var t=e.x,s=e.y,a=e.val,i=e.realIndex,o=e.textAnchor,l=e.barTotalDataLabelsConfig;this.w;var c,u=new Be(this.barCtx.ctx);return l.enabled&&t!==void 0&&s!==void 0&&this.barCtx.lastActiveBarSerieIndex===i&&(c=u.drawText({x:t,y:s,foreColor:l.style.color,text:a,textAnchor:o,fontFamily:l.style.fontFamily,fontSize:l.style.fontSize,fontWeight:l.style.fontWeight})),c}}]),r}(),xde=function(){function r(e){ct(this,r),this.w=e.w,this.barCtx=e}return dt(r,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var s=0;s<e.length;s++)if(e[s].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[s].length),t.globals.isXNumeric)for(var a=0;a<e[s].length;a++)t.globals.seriesX[s][a]>t.globals.minX&&t.globals.seriesX[s][a]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(t.globals.series),ne.isSafari()&&(this.arrBorderRadius=this.arrBorderRadius.map(function(i){return i.map(function(o){return"none"})})),this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(e){var t,s,a,i,o,l,c,u,h=this.w,f=h.globals.dataPoints;this.barCtx.isRangeBar&&(f=h.globals.labels.length);var g=this.barCtx.seriesLen;if(h.config.plotOptions.bar.rangeBarGroupRows&&(g=1),this.barCtx.isHorizontal)o=(a=h.globals.gridHeight/f)/g,h.globals.isXNumeric&&(o=(a=h.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),o=o*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(o=parseInt(this.barCtx.barOptions.barHeight,10)),u=this.barCtx.baseLineInvertedY+h.globals.padHorizontal+(this.barCtx.isReversed?h.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(u=h.globals.gridWidth/2),s=(a-o*this.barCtx.seriesLen)/2;else{if(i=h.globals.gridWidth/this.barCtx.visibleItems,h.config.xaxis.convertedCatToNumeric&&(i=h.globals.gridWidth/h.globals.dataPoints),l=i/g*parseInt(this.barCtx.barOptions.columnWidth,10)/100,h.globals.isXNumeric){var x=this.barCtx.xRatio;h.globals.minXDiff&&h.globals.minXDiff!==.5&&h.globals.minXDiff/x>0&&(i=h.globals.minXDiff/x),(l=i/g*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(l=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(l=parseInt(this.barCtx.barOptions.columnWidth,10)),c=h.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?h.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),h.globals.isXNumeric?t=this.barCtx.getBarXForNumericXAxis({x:t,j:0,realIndex:e,barWidth:l}).x:t=h.globals.padHorizontal+ne.noExponents(i-l*this.barCtx.seriesLen)/2}return h.globals.barHeight=o,h.globals.barWidth=l,{x:t,y:s,yDivision:a,xDivision:i,barHeight:o,barWidth:l,zeroH:c,zeroW:u}}},{key:"initializeStackedPrevVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].prevY=[],e[t].prevX=[],e[t].prevYF=[],e[t].prevXF=[],e[t].prevYVal=[],e[t].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(e){e.w.globals.seriesGroups.forEach(function(t){e[t]||(e[t]={}),e[t].xArrj=[],e[t].xArrjF=[],e[t].xArrjVal=[],e[t].yArrj=[],e[t].yArrjF=[],e[t].yArrjVal=[]})}},{key:"getPathFillColor",value:function(e,t,s,a){var i,o,l,c,u=this.w,h=this.barCtx.ctx.fill,f=null,g=this.barCtx.barOptions.distributed?s:t,x=!1;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(y){e[t][s]>=y.from&&e[t][s]<=y.to&&(f=y.color,x=!0)}),{color:h.fillPath({seriesNumber:this.barCtx.barOptions.distributed?g:a,dataPointIndex:s,color:f,value:e[t][s],fillConfig:(i=u.config.series[t].data[s])===null||i===void 0?void 0:i.fill,fillType:(o=u.config.series[t].data[s])!==null&&o!==void 0&&(l=o.fill)!==null&&l!==void 0&&l.type?(c=u.config.series[t].data[s])===null||c===void 0?void 0:c.fill.type:Array.isArray(u.config.fill.type)?u.config.fill.type[a]:u.config.fill.type}),useRangeColor:x}}},{key:"getStrokeWidth",value:function(e,t,s){var a=0,i=this.w;return this.barCtx.series[e][t]===void 0||this.barCtx.series[e][t]===null||i.config.chart.type==="bar"&&!this.barCtx.series[e][t]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,i.config.stroke.show&&(this.barCtx.isNullValue||(a=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[s]:this.barCtx.strokeWidth)),a}},{key:"createBorderRadiusArr",value:function(e){var t,s=this.w,a=!this.w.config.chart.stacked||s.config.plotOptions.bar.borderRadius<=0,i=e.length,o=0|((t=e[0])===null||t===void 0?void 0:t.length),l=Array.from({length:i},function(){return Array(o).fill(a?"top":"none")});if(a)return l;for(var c=0;c<o;c++){for(var u=[],h=[],f=0,g=0;g<i;g++){var x=e[g][c];x>0?(u.push(g),f++):x<0&&(h.push(g),f++)}if(u.length>0&&h.length===0)if(u.length===1)l[u[0]][c]="both";else{var y,b=u[0],v=u[u.length-1],N=sf(u);try{for(N.s();!(y=N.n()).done;){var k=y.value;l[k][c]=k===b?"bottom":k===v?"top":"none"}}catch(H){N.e(H)}finally{N.f()}}else if(h.length>0&&u.length===0)if(h.length===1)l[h[0]][c]="both";else{var A,R=Math.max.apply(Math,h),_=Math.min.apply(Math,h),I=sf(h);try{for(I.s();!(A=I.n()).done;){var P=A.value;l[P][c]=P===R?"bottom":P===_?"top":"none"}}catch(H){I.e(H)}finally{I.f()}}else if(u.length>0&&h.length>0){var T,D=u[u.length-1],L=sf(u);try{for(L.s();!(T=L.n()).done;){var F=T.value;l[F][c]=F===D?"top":"none"}}catch(H){L.e(H)}finally{L.f()}var z,O=Math.max.apply(Math,h),V=sf(h);try{for(V.s();!(z=V.n()).done;){var Y=z.value;l[Y][c]=Y===O?"bottom":"none"}}catch(H){V.e(H)}finally{V.f()}}else f===1&&(l[u[0]||h[0]][c]="both")}return l}},{key:"barBackground",value:function(e){var t=e.j,s=e.i,a=e.x1,i=e.x2,o=e.y1,l=e.y2,c=e.elSeries,u=this.w,h=new Be(this.barCtx.ctx),f=new zn(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&f===s){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var g=this.barCtx.barOptions.colors.backgroundBarColors[t],x=h.drawRect(a!==void 0?a:0,o!==void 0?o:0,i!==void 0?i:u.globals.gridWidth,l!==void 0?l:u.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,g,this.barCtx.barOptions.colors.backgroundBarOpacity);c.add(x),x.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t,s=e.barWidth,a=e.barXPosition,i=e.y1,o=e.y2,l=e.strokeWidth,c=e.isReversed,u=e.series,h=e.seriesGroup,f=e.realIndex,g=e.i,x=e.j,y=e.w,b=new Be(this.barCtx.ctx);(l=Array.isArray(l)?l[f]:l)||(l=0);var v=s,N=a;(t=y.config.series[f].data[x])!==null&&t!==void 0&&t.columnWidthOffset&&(N=a-y.config.series[f].data[x].columnWidthOffset/2,v=s+y.config.series[f].data[x].columnWidthOffset);var k=l/2,A=N+k,R=N+v-k,_=(u[g][x]>=0?1:-1)*(c?-1:1);i+=.001-k*_,o+=.001+k*_;var I=b.move(A,i),P=b.move(A,i),T=b.line(R,i);if(y.globals.previousPaths.length>0&&(P=this.barCtx.getPreviousPath(f,x,!1)),I=I+b.line(A,o)+b.line(R,o)+T+(y.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[f][x]==="both"?" Z":" z"),P=P+b.line(A,i)+T+T+T+T+T+b.line(A,i)+(y.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[f][x]==="both"?" Z":" z"),this.arrBorderRadius[f][x]!=="none"&&(I=b.roundPathCorners(I,y.config.plotOptions.bar.borderRadius)),y.config.chart.stacked){var D=this.barCtx;(D=this.barCtx[h]).yArrj.push(o-k*_),D.yArrjF.push(Math.abs(i-o+l*_)),D.yArrjVal.push(this.barCtx.series[g][x])}return{pathTo:I,pathFrom:P}}},{key:"getBarpaths",value:function(e){var t,s=e.barYPosition,a=e.barHeight,i=e.x1,o=e.x2,l=e.strokeWidth,c=e.isReversed,u=e.series,h=e.seriesGroup,f=e.realIndex,g=e.i,x=e.j,y=e.w,b=new Be(this.barCtx.ctx);(l=Array.isArray(l)?l[f]:l)||(l=0);var v=s,N=a;(t=y.config.series[f].data[x])!==null&&t!==void 0&&t.barHeightOffset&&(v=s-y.config.series[f].data[x].barHeightOffset/2,N=a+y.config.series[f].data[x].barHeightOffset);var k=l/2,A=v+k,R=v+N-k,_=(u[g][x]>=0?1:-1)*(c?-1:1);i+=.001+k*_,o+=.001-k*_;var I=b.move(i,A),P=b.move(i,A);y.globals.previousPaths.length>0&&(P=this.barCtx.getPreviousPath(f,x,!1));var T=b.line(i,R);if(I=I+b.line(o,A)+b.line(o,R)+T+(y.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[f][x]==="both"?" Z":" z"),P=P+b.line(i,A)+T+T+T+T+T+b.line(i,A)+(y.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[f][x]==="both"?" Z":" z"),this.arrBorderRadius[f][x]!=="none"&&(I=b.roundPathCorners(I,y.config.plotOptions.bar.borderRadius)),y.config.chart.stacked){var D=this.barCtx;(D=this.barCtx[h]).xArrj.push(o+k*_),D.xArrjF.push(Math.abs(i-o-l*_)),D.xArrjVal.push(this.barCtx.series[g][x])}return{pathTo:I,pathFrom:P}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,s=this.w,a=0;a<t.length;a++){for(var i=0,o=0;o<t[s.globals.maxValsInArrayIndex].length;o++)i+=t[a][o];i===0&&this.barCtx.zeroSerieses.push(a)}}},{key:"getXForValue",value:function(e,t){var s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?t:null;return e!=null&&(s=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),s}},{key:"getYForValue",value:function(e,t,s){var a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?t:null;return e!=null&&(a=t-e/this.barCtx.yRatio[s]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[s]:0)),a}},{key:"getGoalValues",value:function(e,t,s,a,i,o){var l=this,c=this.w,u=[],h=function(x,y){var b;u.push((lb(b={},e,e==="x"?l.getXForValue(x,t,!1):l.getYForValue(x,s,o,!1)),lb(b,"attrs",y),b))};if(c.globals.seriesGoals[a]&&c.globals.seriesGoals[a][i]&&Array.isArray(c.globals.seriesGoals[a][i])&&c.globals.seriesGoals[a][i].forEach(function(x){h(x.value,x)}),this.barCtx.barOptions.isDumbbell&&c.globals.seriesRange.length){var f=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:c.globals.colors,g={strokeHeight:e==="x"?0:c.globals.markers.size[a],strokeWidth:e==="x"?c.globals.markers.size[a]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(f[a])?f[a][0]:f[a]};h(c.globals.seriesRangeStart[a][i],g),h(c.globals.seriesRangeEnd[a][i],et(et({},g),{},{strokeColor:Array.isArray(f[a])?f[a][1]:f[a]}))}return u}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,s=e.barYPosition,a=e.goalX,i=e.goalY,o=e.barWidth,l=e.barHeight,c=new Be(this.barCtx.ctx),u=c.group({className:"apexcharts-bar-goals-groups"});u.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:u.node}),u.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var h=null;return this.barCtx.isHorizontal?Array.isArray(a)&&a.forEach(function(f){if(f.x>=-1&&f.x<=c.w.globals.gridWidth+1){var g=f.attrs.strokeHeight!==void 0?f.attrs.strokeHeight:l/2,x=s+g+l/2;h=c.drawLine(f.x,x-2*g,f.x,x,f.attrs.strokeColor?f.attrs.strokeColor:void 0,f.attrs.strokeDashArray,f.attrs.strokeWidth?f.attrs.strokeWidth:2,f.attrs.strokeLineCap),u.add(h)}}):Array.isArray(i)&&i.forEach(function(f){if(f.y>=-1&&f.y<=c.w.globals.gridHeight+1){var g=f.attrs.strokeWidth!==void 0?f.attrs.strokeWidth:o/2,x=t+g+o/2;h=c.drawLine(x-2*g,f.y,x,f.y,f.attrs.strokeColor?f.attrs.strokeColor:void 0,f.attrs.strokeDashArray,f.attrs.strokeHeight?f.attrs.strokeHeight:2,f.attrs.strokeLineCap),u.add(h)}}),u}},{key:"drawBarShadow",value:function(e){var t=e.prevPaths,s=e.currPaths,a=e.color,i=this.w,o=t.x,l=t.x1,c=t.barYPosition,u=s.x,h=s.x1,f=s.barYPosition,g=c+s.barHeight,x=new Be(this.barCtx.ctx),y=new ne,b=x.move(l,g)+x.line(o,g)+x.line(u,f)+x.line(h,f)+x.line(l,g)+(i.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[realIndex][j]==="both"?" Z":" z");return x.drawPath({d:b,fill:y.shadeColor(.5,ne.rgb2hex(a)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(e){var t,s=e.i,a=e.j,i=this.w,o=0,l=0;return(i.config.plotOptions.bar.horizontal?i.globals.series.map(function(c,u){return u}):((t=i.globals.columnSeries)===null||t===void 0?void 0:t.i.map(function(c){return c}))||[]).forEach(function(c){var u=i.globals.seriesPercent[c][a];u&&o++,c<s&&u===0&&l++}),{nonZeroColumns:o,zeroEncounters:l}}},{key:"getGroupIndex",value:function(e){var t=this.w,s=t.globals.seriesGroups.findIndex(function(o){return o.indexOf(t.globals.seriesNames[e])>-1}),a=this.barCtx.columnGroupIndices,i=a.indexOf(s);return i<0&&(a.push(s),i=a.length-1),{groupIndex:s,columnGroupIndex:i}}}]),r}(),nh=function(){function r(e,t){ct(this,r),this.ctx=e,this.w=e.w;var s=this.w;this.barOptions=s.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=s.config.stroke.width,this.isNullValue=!1,this.isRangeBar=s.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!s.globals.isBarHorizontal&&s.globals.seriesRange.length&&s.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=t,this.xyRatios!==null&&(this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.invertedXRatio=t.invertedXRatio,this.invertedYRatio=t.invertedYRatio,this.baseLineY=t.baseLineY,this.baseLineInvertedY=t.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var a=new zn(this.ctx);this.lastActiveBarSerieIndex=a.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var i=a.getBarSeriesIndices(),o=new wr(this.ctx);this.stackedSeriesTotals=o.getStackedSeriesTotals(this.w.config.series.map(function(l,c){return i.indexOf(c)===-1?c:-1}).filter(function(l){return l!==-1})),this.barHelpers=new xde(this)}return dt(r,[{key:"draw",value:function(e,t){var s=this.w,a=new Be(this.ctx),i=new wr(this.ctx,s);e=i.getLogSeries(e),this.series=e,this.yRatio=i.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=a.group({class:"apexcharts-bar-series apexcharts-plot-series"});s.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var l=0,c=0;l<e.length;l++,c++){var u,h,f,g,x=void 0,y=void 0,b=[],v=[],N=s.globals.comboCharts?t[l]:l,k=this.barHelpers.getGroupIndex(N).columnGroupIndex,A=a.group({class:"apexcharts-series",rel:l+1,seriesName:ne.escapeString(s.globals.seriesNames[N]),"data:realIndex":N});this.ctx.series.addCollapsedClassToSeries(A,N),e[l].length>0&&(this.visibleI=this.visibleI+1);var R=0,_=0;this.yRatio.length>1&&(this.yaxisIndex=s.globals.seriesYAxisReverseMap[N],this.translationsIndex=N);var I=this.translationsIndex;this.isReversed=s.config.yaxis[this.yaxisIndex]&&s.config.yaxis[this.yaxisIndex].reversed;var P=this.barHelpers.initialPositions(N);y=P.y,R=P.barHeight,h=P.yDivision,g=P.zeroW,x=P.x,_=P.barWidth,u=P.xDivision,f=P.zeroH,this.isHorizontal||v.push(x+_/2);var T=a.group({class:"apexcharts-datalabels","data:realIndex":N});s.globals.delayedElements.push({el:T.node}),T.node.classList.add("apexcharts-element-hidden");var D=a.group({class:"apexcharts-bar-goals-markers"}),L=a.group({class:"apexcharts-bar-shadows"});s.globals.delayedElements.push({el:L.node}),L.node.classList.add("apexcharts-element-hidden");for(var F=0;F<e[l].length;F++){var z=this.barHelpers.getStrokeWidth(l,F,N),O=null,V={indexes:{i:l,j:F,realIndex:N,translationsIndex:I,bc:c},x,y,strokeWidth:z,elSeries:A};this.isHorizontal?(O=this.drawBarPaths(et(et({},V),{},{barHeight:R,zeroW:g,yDivision:h})),_=this.series[l][F]/this.invertedYRatio):(O=this.drawColumnPaths(et(et({},V),{},{xDivision:u,barWidth:_,zeroH:f})),R=this.series[l][F]/this.yRatio[I]);var Y=this.barHelpers.getPathFillColor(e,l,F,N);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&F>0){var H,$=this.barHelpers.drawBarShadow({color:typeof Y.color=="string"&&((H=Y.color)===null||H===void 0?void 0:H.indexOf("url"))===-1?Y.color:ne.hexToRgba(s.globals.colors[l]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:O});L.add($),s.config.chart.dropShadow.enabled&&new ga(this.ctx).dropShadow($,s.config.chart.dropShadow,N)}this.pathArr.push(O);var X=this.barHelpers.drawGoalLine({barXPosition:O.barXPosition,barYPosition:O.barYPosition,goalX:O.goalX,goalY:O.goalY,barHeight:R,barWidth:_});X&&D.add(X),y=O.y,x=O.x,F>0&&v.push(x+_/2),b.push(y),this.renderSeries(et(et({realIndex:N,pathFill:Y.color},Y.useRangeColor?{lineFill:Y.color}:{}),{},{j:F,i:l,columnGroupIndex:k,pathFrom:O.pathFrom,pathTo:O.pathTo,strokeWidth:z,elSeries:A,x,y,series:e,barHeight:Math.abs(O.barHeight?O.barHeight:R),barWidth:Math.abs(O.barWidth?O.barWidth:_),elDataLabelsWrap:T,elGoalsMarkers:D,elBarShadows:L,visibleSeries:this.visibleI,type:"bar"}))}s.globals.seriesXvalues[N]=v,s.globals.seriesYvalues[N]=b,o.add(A)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,s=e.pathFill,a=e.lineFill,i=e.j,o=e.i,l=e.columnGroupIndex,c=e.pathFrom,u=e.pathTo,h=e.strokeWidth,f=e.elSeries,g=e.x,x=e.y,y=e.y1,b=e.y2,v=e.series,N=e.barHeight,k=e.barWidth,A=e.barXPosition,R=e.barYPosition,_=e.elDataLabelsWrap,I=e.elGoalsMarkers,P=e.elBarShadows,T=e.visibleSeries,D=e.type,L=e.classes,F=this.w,z=new Be(this.ctx),O=!1;if(!a){var V=typeof F.globals.stroke.colors[t]=="function"?function(G){var B,Q=F.config.stroke.colors;return Array.isArray(Q)&&Q.length>0&&((B=Q[G])||(B=""),typeof B=="function")?B({value:F.globals.series[G][i],dataPointIndex:i,w:F}):B}(t):F.globals.stroke.colors[t];a=this.barOptions.distributed?F.globals.stroke.colors[i]:V}var Y=new pde(this).handleBarDataLabels({x:g,y:x,y1:y,y2:b,i:o,j:i,series:v,realIndex:t,columnGroupIndex:l,barHeight:N,barWidth:k,barXPosition:A,barYPosition:R,visibleSeries:T});F.globals.isBarHorizontal||(Y.dataLabelsPos.dataLabelsX+Math.max(k,F.globals.barPadForNumericAxis)<0||Y.dataLabelsPos.dataLabelsX-Math.max(k,F.globals.barPadForNumericAxis)>F.globals.gridWidth)&&(O=!0),F.config.series[o].data[i]&&F.config.series[o].data[i].strokeColor&&(a=F.config.series[o].data[i].strokeColor),this.isNullValue&&(s="none");var H=i/F.config.chart.animations.animateGradually.delay*(F.config.chart.animations.speed/F.globals.dataPoints)/2.4;if(!O){var $=z.renderPaths({i:o,j:i,realIndex:t,pathFrom:c,pathTo:u,stroke:a,strokeWidth:h,strokeLineCap:F.config.stroke.lineCap,fill:s,animationDelay:H,initialSpeed:F.config.chart.animations.speed,dataChangeSpeed:F.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(D,"-area ").concat(L),chartType:D});$.attr("clip-path","url(#gridRectBarMask".concat(F.globals.cuid,")"));var X=F.config.forecastDataPoints;X.count>0&&i>=F.globals.dataPoints-X.count&&($.node.setAttribute("stroke-dasharray",X.dashArray),$.node.setAttribute("stroke-width",X.strokeWidth),$.node.setAttribute("fill-opacity",X.fillOpacity)),y!==void 0&&b!==void 0&&($.attr("data-range-y1",y),$.attr("data-range-y2",b)),new ga(this.ctx).setSelectionFilter($,t,i),f.add($),$.attr({cy:Y.dataLabelsPos.bcy,cx:Y.dataLabelsPos.bcx,j:i,val:F.globals.series[o][i],barHeight:N,barWidth:k}),Y.dataLabels!==null&&_.add(Y.dataLabels),Y.totalDataLabels&&_.add(Y.totalDataLabels),f.add(_),I&&f.add(I),P&&f.add(P)}return f}},{key:"drawBarPaths",value:function(e){var t,s=e.indexes,a=e.barHeight,i=e.strokeWidth,o=e.zeroW,l=e.x,c=e.y,u=e.yDivision,h=e.elSeries,f=this.w,g=s.i,x=s.j;if(f.globals.isXNumeric)t=(c=(f.globals.seriesX[g][x]-f.globals.minX)/this.invertedXRatio-a)+a*this.visibleI;else if(f.config.plotOptions.bar.hideZeroBarsWhenGrouped){var y=this.barHelpers.getZeroValueEncounters({i:g,j:x}),b=y.nonZeroColumns,v=y.zeroEncounters;b>0&&(a=this.seriesLen*a/b),t=c+a*this.visibleI,t-=a*v}else t=c+a*this.visibleI;this.isFunnel&&(o-=(this.barHelpers.getXForValue(this.series[g][x],o)-o)/2),l=this.barHelpers.getXForValue(this.series[g][x],o);var N=this.barHelpers.getBarpaths({barYPosition:t,barHeight:a,x1:o,x2:l,strokeWidth:i,isReversed:this.isReversed,series:this.series,realIndex:s.realIndex,i:g,j:x,w:f});return f.globals.isXNumeric||(c+=u),this.barHelpers.barBackground({j:x,i:g,y1:t-a*this.visibleI,y2:a*this.seriesLen,elSeries:h}),{pathTo:N.pathTo,pathFrom:N.pathFrom,x1:o,x:l,y:c,goalX:this.barHelpers.getGoalValues("x",o,null,g,x),barYPosition:t,barHeight:a}}},{key:"drawColumnPaths",value:function(e){var t,s=e.indexes,a=e.x,i=e.y,o=e.xDivision,l=e.barWidth,c=e.zeroH,u=e.strokeWidth,h=e.elSeries,f=this.w,g=s.realIndex,x=s.translationsIndex,y=s.i,b=s.j,v=s.bc;if(f.globals.isXNumeric){var N=this.getBarXForNumericXAxis({x:a,j:b,realIndex:g,barWidth:l});a=N.x,t=N.barXPosition}else if(f.config.plotOptions.bar.hideZeroBarsWhenGrouped){var k=this.barHelpers.getZeroValueEncounters({i:y,j:b}),A=k.nonZeroColumns,R=k.zeroEncounters;A>0&&(l=this.seriesLen*l/A),t=a+l*this.visibleI,t-=l*R}else t=a+l*this.visibleI;i=this.barHelpers.getYForValue(this.series[y][b],c,x);var _=this.barHelpers.getColumnPaths({barXPosition:t,barWidth:l,y1:c,y2:i,strokeWidth:u,isReversed:this.isReversed,series:this.series,realIndex:g,i:y,j:b,w:f});return f.globals.isXNumeric||(a+=o),this.barHelpers.barBackground({bc:v,j:b,i:y,x1:t-u/2-l*this.visibleI,x2:l*this.seriesLen+u/2,elSeries:h}),{pathTo:_.pathTo,pathFrom:_.pathFrom,x:a,y:i,goalY:this.barHelpers.getGoalValues("y",null,c,y,b,x),barXPosition:t,barWidth:l}}},{key:"getBarXForNumericXAxis",value:function(e){var t=e.x,s=e.barWidth,a=e.realIndex,i=e.j,o=this.w,l=a;return o.globals.seriesX[a].length||(l=o.globals.maxValsInArrayIndex),ne.isNumber(o.globals.seriesX[l][i])&&(t=(o.globals.seriesX[l][i]-o.globals.minX)/this.xRatio-s*this.seriesLen/2),{barXPosition:t+s*this.visibleI,x:t}}},{key:"getPreviousPath",value:function(e,t){for(var s=this.w,a="M 0 0",i=0;i<s.globals.previousPaths.length;i++){var o=s.globals.previousPaths[i];o.paths&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(e,10)&&s.globals.previousPaths[i].paths[t]!==void 0&&(a=s.globals.previousPaths[i].paths[t].d)}return a}}]),r}(),u4=function(r){Ug(t,nh);var e=Fg(t);function t(){return ct(this,t),e.apply(this,arguments)}return dt(t,[{key:"draw",value:function(s,a){var i=this,o=this.w;this.graphics=new Be(this.ctx),this.bar=new nh(this.ctx,this.xyRatios);var l=new wr(this.ctx,o);s=l.getLogSeries(s),this.yRatio=l.getLogYRatios(this.yRatio),this.barHelpers.initVariables(s),o.config.chart.stackType==="100%"&&(s=o.globals.comboCharts?a.map(function(y){return o.globals.seriesPercent[y]}):o.globals.seriesPercent.slice()),this.series=s,this.barHelpers.initializeStackedPrevVars(this);for(var c=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),u=0,h=0,f=function(y,b){var v=void 0,N=void 0,k=void 0,A=void 0,R=o.globals.comboCharts?a[y]:y,_=i.barHelpers.getGroupIndex(R),I=_.groupIndex,P=_.columnGroupIndex;i.groupCtx=i[o.globals.seriesGroups[I]];var T=[],D=[],L=0;i.yRatio.length>1&&(i.yaxisIndex=o.globals.seriesYAxisReverseMap[R][0],L=R),i.isReversed=o.config.yaxis[i.yaxisIndex]&&o.config.yaxis[i.yaxisIndex].reversed;var F=i.graphics.group({class:"apexcharts-series",seriesName:ne.escapeString(o.globals.seriesNames[R]),rel:y+1,"data:realIndex":R});i.ctx.series.addCollapsedClassToSeries(F,R);var z=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":R}),O=i.graphics.group({class:"apexcharts-bar-goals-markers"}),V=0,Y=0,H=i.initialPositions(u,h,v,N,k,A,L);h=H.y,V=H.barHeight,N=H.yDivision,A=H.zeroW,u=H.x,Y=H.barWidth,v=H.xDivision,k=H.zeroH,o.globals.barHeight=V,o.globals.barWidth=Y,i.barHelpers.initializeStackedXYVars(i),i.groupCtx.prevY.length===1&&i.groupCtx.prevY[0].every(function(Ee){return isNaN(Ee)})&&(i.groupCtx.prevY[0]=i.groupCtx.prevY[0].map(function(){return k}),i.groupCtx.prevYF[0]=i.groupCtx.prevYF[0].map(function(){return 0}));for(var $=0;$<o.globals.dataPoints;$++){var X=i.barHelpers.getStrokeWidth(y,$,R),G={indexes:{i:y,j:$,realIndex:R,translationsIndex:L,bc:b},strokeWidth:X,x:u,y:h,elSeries:F,columnGroupIndex:P,seriesGroup:o.globals.seriesGroups[I]},B=null;i.isHorizontal?(B=i.drawStackedBarPaths(et(et({},G),{},{zeroW:A,barHeight:V,yDivision:N})),Y=i.series[y][$]/i.invertedYRatio):(B=i.drawStackedColumnPaths(et(et({},G),{},{xDivision:v,barWidth:Y,zeroH:k})),V=i.series[y][$]/i.yRatio[L]);var Q=i.barHelpers.drawGoalLine({barXPosition:B.barXPosition,barYPosition:B.barYPosition,goalX:B.goalX,goalY:B.goalY,barHeight:V,barWidth:Y});Q&&O.add(Q),h=B.y,u=B.x,T.push(u),D.push(h);var ee=i.barHelpers.getPathFillColor(s,y,$,R),se="",le=o.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y";(i.barHelpers.arrBorderRadius[R][$]==="bottom"&&o.globals.series[R][$]>0||i.barHelpers.arrBorderRadius[R][$]==="top"&&o.globals.series[R][$]<0)&&(se=le),F=i.renderSeries(et(et({realIndex:R,pathFill:ee.color},ee.useRangeColor?{lineFill:ee.color}:{}),{},{j:$,i:y,columnGroupIndex:P,pathFrom:B.pathFrom,pathTo:B.pathTo,strokeWidth:X,elSeries:F,x:u,y:h,series:s,barHeight:V,barWidth:Y,elDataLabelsWrap:z,elGoalsMarkers:O,type:"bar",visibleSeries:P,classes:se}))}o.globals.seriesXvalues[R]=T,o.globals.seriesYvalues[R]=D,i.groupCtx.prevY.push(i.groupCtx.yArrj),i.groupCtx.prevYF.push(i.groupCtx.yArrjF),i.groupCtx.prevYVal.push(i.groupCtx.yArrjVal),i.groupCtx.prevX.push(i.groupCtx.xArrj),i.groupCtx.prevXF.push(i.groupCtx.xArrjF),i.groupCtx.prevXVal.push(i.groupCtx.xArrjVal),c.add(F)},g=0,x=0;g<s.length;g++,x++)f(g,x);return c}},{key:"initialPositions",value:function(s,a,i,o,l,c,u){var h,f,g=this.w;if(this.isHorizontal){o=g.globals.gridHeight/g.globals.dataPoints;var x=g.config.plotOptions.bar.barHeight;h=String(x).indexOf("%")===-1?parseInt(x,10):o*parseInt(x,10)/100,c=g.globals.padHorizontal+(this.isReversed?g.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),a=(o-h)/2}else{f=i=g.globals.gridWidth/g.globals.dataPoints;var y=g.config.plotOptions.bar.columnWidth;g.globals.isXNumeric&&g.globals.dataPoints>1?f=(i=g.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(y).indexOf("%")===-1?f=parseInt(y,10):f*=parseInt(y,10)/100,l=this.isReversed?this.baseLineY[u]:g.globals.gridHeight-this.baseLineY[u],s=g.globals.padHorizontal+(i-f)/2}var b=g.globals.barGroups.length||1;return{x:s,y:a,yDivision:o,xDivision:i,barHeight:h/b,barWidth:f/b,zeroH:l,zeroW:c}}},{key:"drawStackedBarPaths",value:function(s){for(var a,i=s.indexes,o=s.barHeight,l=s.strokeWidth,c=s.zeroW,u=s.x,h=s.y,f=s.columnGroupIndex,g=s.seriesGroup,x=s.yDivision,y=s.elSeries,b=this.w,v=h+f*o,N=i.i,k=i.j,A=i.realIndex,R=i.translationsIndex,_=0,I=0;I<this.groupCtx.prevXF.length;I++)_+=this.groupCtx.prevXF[I][k];var P=N;if(b.config.series[A].name&&(P=g.indexOf(b.config.series[A].name)),P>0){var T=c;this.groupCtx.prevXVal[P-1][k]<0?T=this.series[N][k]>=0?this.groupCtx.prevX[P-1][k]+_-2*(this.isReversed?_:0):this.groupCtx.prevX[P-1][k]:this.groupCtx.prevXVal[P-1][k]>=0&&(T=this.series[N][k]>=0?this.groupCtx.prevX[P-1][k]:this.groupCtx.prevX[P-1][k]-_+2*(this.isReversed?_:0)),a=T}else a=c;u=this.series[N][k]===null?a:a+this.series[N][k]/this.invertedYRatio-2*(this.isReversed?this.series[N][k]/this.invertedYRatio:0);var D=this.barHelpers.getBarpaths({barYPosition:v,barHeight:o,x1:a,x2:u,strokeWidth:l,isReversed:this.isReversed,series:this.series,realIndex:i.realIndex,seriesGroup:g,i:N,j:k,w:b});return this.barHelpers.barBackground({j:k,i:N,y1:v,y2:o,elSeries:y}),h+=x,{pathTo:D.pathTo,pathFrom:D.pathFrom,goalX:this.barHelpers.getGoalValues("x",c,null,N,k,R),barXPosition:a,barYPosition:v,x:u,y:h}}},{key:"drawStackedColumnPaths",value:function(s){var a=s.indexes,i=s.x,o=s.y,l=s.xDivision,c=s.barWidth,u=s.zeroH,h=s.columnGroupIndex,f=s.seriesGroup,g=s.elSeries,x=this.w,y=a.i,b=a.j,v=a.bc,N=a.realIndex,k=a.translationsIndex;if(x.globals.isXNumeric){var A=x.globals.seriesX[N][b];A||(A=0),i=(A-x.globals.minX)/this.xRatio-c/2*x.globals.barGroups.length}for(var R,_=i+h*c,I=0,P=0;P<this.groupCtx.prevYF.length;P++)I+=isNaN(this.groupCtx.prevYF[P][b])?0:this.groupCtx.prevYF[P][b];var T=y;if(f&&(T=f.indexOf(x.globals.seriesNames[N])),T>0&&!x.globals.isXNumeric||T>0&&x.globals.isXNumeric&&x.globals.seriesX[N-1][b]===x.globals.seriesX[N][b]){var D,L,F,z=Math.min(this.yRatio.length+1,N+1);if(this.groupCtx.prevY[T-1]!==void 0&&this.groupCtx.prevY[T-1].length)for(var O=1;O<z;O++){var V;if(!isNaN((V=this.groupCtx.prevY[T-O])===null||V===void 0?void 0:V[b])){F=this.groupCtx.prevY[T-O][b];break}}for(var Y=1;Y<z;Y++){var H,$;if(((H=this.groupCtx.prevYVal[T-Y])===null||H===void 0?void 0:H[b])<0){L=this.series[y][b]>=0?F-I+2*(this.isReversed?I:0):F;break}if((($=this.groupCtx.prevYVal[T-Y])===null||$===void 0?void 0:$[b])>=0){L=this.series[y][b]>=0?F:F+I-2*(this.isReversed?I:0);break}}L===void 0&&(L=x.globals.gridHeight),R=(D=this.groupCtx.prevYF[0])!==null&&D!==void 0&&D.every(function(G){return G===0})&&this.groupCtx.prevYF.slice(1,T).every(function(G){return G.every(function(B){return isNaN(B)})})?u:L}else R=u;o=this.series[y][b]?R-this.series[y][b]/this.yRatio[k]+2*(this.isReversed?this.series[y][b]/this.yRatio[k]:0):R;var X=this.barHelpers.getColumnPaths({barXPosition:_,barWidth:c,y1:R,y2:o,yRatio:this.yRatio[k],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:f,realIndex:a.realIndex,i:y,j:b,w:x});return this.barHelpers.barBackground({bc:v,j:b,i:y,x1:_,x2:c,elSeries:g}),{pathTo:X.pathTo,pathFrom:X.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,u,y,b),barXPosition:_,x:x.globals.isXNumeric?i:i+l,y:o}}}]),t}(),E1=function(r){Ug(t,nh);var e=Fg(t);function t(){return ct(this,t),e.apply(this,arguments)}return dt(t,[{key:"draw",value:function(s,a,i){var o=this,l=this.w,c=new Be(this.ctx),u=l.globals.comboCharts?a:l.config.chart.type,h=new ri(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=l.config.plotOptions.bar.horizontal,this.isOHLC=this.candlestickOptions&&this.candlestickOptions.type==="ohlc";var f=new wr(this.ctx,l);s=f.getLogSeries(s),this.series=s,this.yRatio=f.getLogYRatios(this.yRatio),this.barHelpers.initVariables(s);for(var g=c.group({class:"apexcharts-".concat(u,"-series apexcharts-plot-series")}),x=function(b){o.isBoxPlot=l.config.chart.type==="boxPlot"||l.config.series[b].type==="boxPlot";var v,N,k,A,R=void 0,_=void 0,I=[],P=[],T=l.globals.comboCharts?i[b]:b,D=o.barHelpers.getGroupIndex(T).columnGroupIndex,L=c.group({class:"apexcharts-series",seriesName:ne.escapeString(l.globals.seriesNames[T]),rel:b+1,"data:realIndex":T});o.ctx.series.addCollapsedClassToSeries(L,T),s[b].length>0&&(o.visibleI=o.visibleI+1);var F,z,O=0;o.yRatio.length>1&&(o.yaxisIndex=l.globals.seriesYAxisReverseMap[T][0],O=T);var V=o.barHelpers.initialPositions(T);_=V.y,F=V.barHeight,N=V.yDivision,A=V.zeroW,R=V.x,z=V.barWidth,v=V.xDivision,k=V.zeroH,P.push(R+z/2);for(var Y=c.group({class:"apexcharts-datalabels","data:realIndex":T}),H=c.group({class:"apexcharts-bar-goals-markers"}),$=function(G){var B=o.barHelpers.getStrokeWidth(b,G,T),Q=null,ee={indexes:{i:b,j:G,realIndex:T,translationsIndex:O},x:R,y:_,strokeWidth:B,elSeries:L};Q=o.isHorizontal?o.drawHorizontalBoxPaths(et(et({},ee),{},{yDivision:N,barHeight:F,zeroW:A})):o.drawVerticalBoxPaths(et(et({},ee),{},{xDivision:v,barWidth:z,zeroH:k})),_=Q.y,R=Q.x;var se=o.barHelpers.drawGoalLine({barXPosition:Q.barXPosition,barYPosition:Q.barYPosition,goalX:Q.goalX,goalY:Q.goalY,barHeight:F,barWidth:z});se&&H.add(se),G>0&&P.push(R+z/2),I.push(_),Q.pathTo.forEach(function(le,Ee){var ue=!o.isBoxPlot&&o.candlestickOptions.wick.useFillColor?Q.color[Ee]:l.globals.stroke.colors[b],Oe=h.fillPath({seriesNumber:T,dataPointIndex:G,color:Q.color[Ee],value:s[b][G]});o.renderSeries({realIndex:T,pathFill:Oe,lineFill:ue,j:G,i:b,pathFrom:Q.pathFrom,pathTo:le,strokeWidth:B,elSeries:L,x:R,y:_,series:s,columnGroupIndex:D,barHeight:F,barWidth:z,elDataLabelsWrap:Y,elGoalsMarkers:H,visibleSeries:o.visibleI,type:l.config.chart.type})})},X=0;X<l.globals.dataPoints;X++)$(X);l.globals.seriesXvalues[T]=P,l.globals.seriesYvalues[T]=I,g.add(L)},y=0;y<s.length;y++)x(y);return g}},{key:"drawVerticalBoxPaths",value:function(s){var a=s.indexes,i=s.x;s.y;var o=s.xDivision,l=s.barWidth,c=s.zeroH,u=s.strokeWidth,h=this.w,f=new Be(this.ctx),g=a.i,x=a.j,y=h.config.plotOptions.candlestick.colors,b=this.boxOptions.colors,v=a.realIndex,N=function(X){return Array.isArray(X)?X[v]:X},k=N(y.upward),A=N(y.downward),R=this.yRatio[a.translationsIndex],_=this.getOHLCValue(v,x),I=c,P=c,T=_.o<_.c?[k]:[A];this.isBoxPlot&&(T=[N(b.lower),N(b.upper)]);var D=Math.min(_.o,_.c),L=Math.max(_.o,_.c),F=_.m;h.globals.isXNumeric&&(i=(h.globals.seriesX[v][x]-h.globals.minX)/this.xRatio-l/2);var z=i+l*this.visibleI;this.series[g][x]===void 0||this.series[g][x]===null?(D=c,L=c):(D=c-D/R,L=c-L/R,I=c-_.h/R,P=c-_.l/R,F=c-_.m/R);var O=f.move(z,c),V=f.move(z+l/2,D);if(h.globals.previousPaths.length>0&&(V=this.getPreviousPath(v,x,!0)),this.isOHLC){var Y=z+l/2,H=c-_.o/R,$=c-_.c/R;O=[f.move(Y,I)+f.line(Y,P)+f.move(Y,H)+f.line(z,H)+f.move(Y,$)+f.line(z+l,$)]}else O=this.isBoxPlot?[f.move(z,D)+f.line(z+l/2,D)+f.line(z+l/2,I)+f.line(z+l/4,I)+f.line(z+l-l/4,I)+f.line(z+l/2,I)+f.line(z+l/2,D)+f.line(z+l,D)+f.line(z+l,F)+f.line(z,F)+f.line(z,D+u/2),f.move(z,F)+f.line(z+l,F)+f.line(z+l,L)+f.line(z+l/2,L)+f.line(z+l/2,P)+f.line(z+l-l/4,P)+f.line(z+l/4,P)+f.line(z+l/2,P)+f.line(z+l/2,L)+f.line(z,L)+f.line(z,F)+"z"]:[f.move(z,L)+f.line(z+l/2,L)+f.line(z+l/2,I)+f.line(z+l/2,L)+f.line(z+l,L)+f.line(z+l,D)+f.line(z+l/2,D)+f.line(z+l/2,P)+f.line(z+l/2,D)+f.line(z,D)+f.line(z,L-u/2)];return V+=f.move(z,D),h.globals.isXNumeric||(i+=o),{pathTo:O,pathFrom:V,x:i,y:L,goalY:this.barHelpers.getGoalValues("y",null,c,g,x,a.translationsIndex),barXPosition:z,color:T}}},{key:"drawHorizontalBoxPaths",value:function(s){var a=s.indexes;s.x;var i=s.y,o=s.yDivision,l=s.barHeight,c=s.zeroW,u=s.strokeWidth,h=this.w,f=new Be(this.ctx),g=a.i,x=a.j,y=this.boxOptions.colors.lower;this.isBoxPlot&&(y=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var b=this.invertedYRatio,v=a.realIndex,N=this.getOHLCValue(v,x),k=c,A=c,R=Math.min(N.o,N.c),_=Math.max(N.o,N.c),I=N.m;h.globals.isXNumeric&&(i=(h.globals.seriesX[v][x]-h.globals.minX)/this.invertedXRatio-l/2);var P=i+l*this.visibleI;this.series[g][x]===void 0||this.series[g][x]===null?(R=c,_=c):(R=c+R/b,_=c+_/b,k=c+N.h/b,A=c+N.l/b,I=c+N.m/b);var T=f.move(c,P),D=f.move(R,P+l/2);return h.globals.previousPaths.length>0&&(D=this.getPreviousPath(v,x,!0)),T=[f.move(R,P)+f.line(R,P+l/2)+f.line(k,P+l/2)+f.line(k,P+l/2-l/4)+f.line(k,P+l/2+l/4)+f.line(k,P+l/2)+f.line(R,P+l/2)+f.line(R,P+l)+f.line(I,P+l)+f.line(I,P)+f.line(R+u/2,P),f.move(I,P)+f.line(I,P+l)+f.line(_,P+l)+f.line(_,P+l/2)+f.line(A,P+l/2)+f.line(A,P+l-l/4)+f.line(A,P+l/4)+f.line(A,P+l/2)+f.line(_,P+l/2)+f.line(_,P)+f.line(I,P)+"z"],D+=f.move(R,P),h.globals.isXNumeric||(i+=o),{pathTo:T,pathFrom:D,x:_,y:i,goalX:this.barHelpers.getGoalValues("x",c,null,g,x),barYPosition:P,color:y}}},{key:"getOHLCValue",value:function(s,a){var i=this.w,o=new wr(this.ctx,i),l=o.getLogValAtSeriesIndex(i.globals.seriesCandleH[s][a],s),c=o.getLogValAtSeriesIndex(i.globals.seriesCandleO[s][a],s),u=o.getLogValAtSeriesIndex(i.globals.seriesCandleM[s][a],s),h=o.getLogValAtSeriesIndex(i.globals.seriesCandleC[s][a],s),f=o.getLogValAtSeriesIndex(i.globals.seriesCandleL[s][a],s);return{o:this.isBoxPlot?l:c,h:this.isBoxPlot?c:l,m:u,l:this.isBoxPlot?h:f,c:this.isBoxPlot?f:h}}}]),t}(),oF=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,s=e.config.plotOptions[e.config.chart.type];return s.colorScale.ranges.length>0&&s.colorScale.ranges.map(function(a,i){a.from<=0&&(t=!0)}),t}},{key:"getShadeColor",value:function(e,t,s,a){var i=this.w,o=1,l=i.config.plotOptions[e].shadeIntensity,c=this.determineColor(e,t,s);i.globals.hasNegs||a?o=i.config.plotOptions[e].reverseNegativeShade?c.percent<0?c.percent/100*(1.25*l):(1-c.percent/100)*(1.25*l):c.percent<=0?1-(1+c.percent/100)*l:(1-c.percent/100)*l:(o=1-c.percent/100,e==="treemap"&&(o=(1-c.percent/100)*(1.25*l)));var u=c.color,h=new ne;if(i.config.plotOptions[e].enableShades)if(this.w.config.theme.mode==="dark"){var f=h.shadeColor(-1*o,c.color);u=ne.hexToRgba(ne.isColorHex(f)?f:ne.rgb2hex(f),i.config.fill.opacity)}else{var g=h.shadeColor(o,c.color);u=ne.hexToRgba(ne.isColorHex(g)?g:ne.rgb2hex(g),i.config.fill.opacity)}return{color:u,colorProps:c}}},{key:"determineColor",value:function(e,t,s){var a=this.w,i=a.globals.series[t][s],o=a.config.plotOptions[e],l=o.colorScale.inverse?s:t;o.distributed&&a.config.chart.type==="treemap"&&(l=s);var c=a.globals.colors[l],u=null,h=Math.min.apply(Math,Gr(a.globals.series[t])),f=Math.max.apply(Math,Gr(a.globals.series[t]));o.distributed||e!=="heatmap"||(h=a.globals.minY,f=a.globals.maxY),o.colorScale.min!==void 0&&(h=o.colorScale.min<a.globals.minY?o.colorScale.min:a.globals.minY,f=o.colorScale.max>a.globals.maxY?o.colorScale.max:a.globals.maxY);var g=Math.abs(f)+Math.abs(h),x=100*i/(g===0?g-1e-6:g);return o.colorScale.ranges.length>0&&o.colorScale.ranges.map(function(y,b){if(i>=y.from&&i<=y.to){c=y.color,u=y.foreColor?y.foreColor:null,h=y.from,f=y.to;var v=Math.abs(f)+Math.abs(h);x=100*i/(v===0?v-1e-6:v)}}),{color:c,foreColor:u,percent:x}}},{key:"calculateDataLabels",value:function(e){var t=e.text,s=e.x,a=e.y,i=e.i,o=e.j,l=e.colorProps,c=e.fontSize,u=this.w.config.dataLabels,h=new Be(this.ctx),f=new ah(this.ctx),g=null;if(u.enabled){g=h.group({class:"apexcharts-data-labels"});var x=u.offsetX,y=u.offsetY,b=s+x,v=a+parseFloat(u.style.fontSize)/3+y;f.plotDataLabelsText({x:b,y:v,text:t,i,j:o,color:l.foreColor,parent:g,fontSize:c,dataLabelsConfig:u})}return g}},{key:"addListeners",value:function(e){var t=new Be(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),r}(),bde=function(){function r(e,t){ct(this,r),this.ctx=e,this.w=e.w,this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new oF(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return dt(r,[{key:"draw",value:function(e){var t=this.w,s=new Be(this.ctx),a=s.group({class:"apexcharts-heatmap"});a.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var i=t.globals.gridWidth/t.globals.dataPoints,o=t.globals.gridHeight/t.globals.series.length,l=0,c=!1;this.negRange=this.helpers.checkColorRange();var u=e.slice();t.config.yaxis[0].reversed&&(c=!0,u.reverse());for(var h=c?0:u.length-1;c?h<u.length:h>=0;c?h++:h--){var f=s.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:ne.escapeString(t.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});if(this.ctx.series.addCollapsedClassToSeries(f,h),t.config.chart.dropShadow.enabled){var g=t.config.chart.dropShadow;new ga(this.ctx).dropShadow(f,g,h)}for(var x=0,y=t.config.plotOptions.heatmap.shadeIntensity,b=0,v=0;v<t.globals.dataPoints;v++)if(t.globals.seriesX.length&&!t.globals.allSeriesHasEqualX&&t.globals.minX+t.globals.minXDiff*v<t.globals.seriesX[h][b])x+=i;else{if(b>=u[h].length)break;var N=this.helpers.getShadeColor(t.config.chart.type,h,b,this.negRange),k=N.color,A=N.colorProps;t.config.fill.type==="image"&&(k=new ri(this.ctx).fillPath({seriesNumber:h,dataPointIndex:b,opacity:t.globals.hasNegs?A.percent<0?1-(1+A.percent/100):y+A.percent/100:A.percent/100,patternID:ne.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:i,height:t.config.fill.image.height?t.config.fill.image.height:o}));var R=this.rectRadius,_=s.drawRect(x,l,i,o,R);if(_.attr({cx:x,cy:l}),_.node.classList.add("apexcharts-heatmap-rect"),f.add(_),_.attr({fill:k,i:h,index:h,j:b,val:e[h][b],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?k:t.globals.stroke.colors[0],color:k}),this.helpers.addListeners(_),t.config.chart.animations.enabled&&!t.globals.dataChanged){var I=1;t.globals.resized||(I=t.config.chart.animations.speed),this.animateHeatMap(_,x,l,i,o,I)}if(t.globals.dataChanged){var P=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){P=this.dynamicAnim.speed;var T=t.globals.previousPaths[h]&&t.globals.previousPaths[h][b]&&t.globals.previousPaths[h][b].color;T||(T="rgba(255, 255, 255, 0)"),this.animateHeatColor(_,ne.isColorHex(T)?T:ne.rgb2hex(T),ne.isColorHex(k)?k:ne.rgb2hex(k),P)}}var D=(0,t.config.dataLabels.formatter)(t.globals.series[h][b],{value:t.globals.series[h][b],seriesIndex:h,dataPointIndex:b,w:t}),L=this.helpers.calculateDataLabels({text:D,x:x+i/2,y:l+o/2,i:h,j:b,colorProps:A,series:u});L!==null&&f.add(L),x+=i,b++}l+=o,a.add(f)}var F=t.globals.yAxisScale[0].result.slice();return t.config.yaxis[0].reversed?F.unshift(""):F.push(""),t.globals.yAxisScale[0].result=F,a}},{key:"animateHeatMap",value:function(e,t,s,a,i,o){var l=new Ah(this.ctx);l.animateRect(e,{x:t+a/2,y:s+i/2,width:0,height:0},{x:t,y:s,width:a,height:i},o,function(){l.animationCompleted(e)})}},{key:"animateHeatColor",value:function(e,t,s,a){e.attr({fill:t}).animate(a).attr({fill:s})}}]),r}(),lF=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"drawYAxisTexts",value:function(e,t,s,a){var i=this.w,o=i.config.yaxis[0],l=i.globals.yLabelFormatters[0];return new Be(this.ctx).drawText({x:e+o.labels.offsetX,y:t+o.labels.offsetY,text:l(a,s),textAnchor:"middle",fontSize:o.labels.style.fontSize,fontFamily:o.labels.style.fontFamily,foreColor:Array.isArray(o.labels.style.colors)?o.labels.style.colors[s]:o.labels.style.colors})}}]),r}(),cF=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w;var t=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=Math.min(t.globals.gridWidth,t.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=t.globals.gridWidth/2,t.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(t.config.plotOptions.pie.endAngle-t.config.plotOptions.pie.startAngle),this.initialAngle=t.config.plotOptions.pie.startAngle%this.fullAngle,t.globals.radialSize=this.defaultSize/2.05-t.config.stroke.width-(t.config.chart.sparkline.enabled?0:t.config.chart.dropShadow.blur),this.donutSize=t.globals.radialSize*parseInt(t.config.plotOptions.pie.donut.size,10)/100;var s=t.config.plotOptions.pie.customScale,a=t.globals.gridWidth/2,i=t.globals.gridHeight/2;this.translateX=a-a*s,this.translateY=i-i*s,this.dataLabelsGroup=new Be(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(s,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return dt(r,[{key:"draw",value:function(e){var t=this,s=this.w,a=new Be(this.ctx),i=a.group({class:"apexcharts-pie"});if(s.globals.noData)return i;for(var o=0,l=0;l<e.length;l++)o+=ne.negToZero(e[l]);var c=[],u=a.group();o===0&&(o=1e-5),e.forEach(function(A){t.maxY=Math.max(t.maxY,A)}),s.config.yaxis[0].max&&(this.maxY=s.config.yaxis[0].max),s.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(i);for(var h=0;h<e.length;h++){var f=this.fullAngle*ne.negToZero(e[h])/o;c.push(f),this.chartType==="polarArea"?(c[h]=this.fullAngle/e.length,this.sliceSizes.push(s.globals.radialSize*e[h]/this.maxY)):this.sliceSizes.push(s.globals.radialSize)}if(s.globals.dataChanged){for(var g,x=0,y=0;y<s.globals.previousPaths.length;y++)x+=ne.negToZero(s.globals.previousPaths[y]);for(var b=0;b<s.globals.previousPaths.length;b++)g=this.fullAngle*ne.negToZero(s.globals.previousPaths[b])/x,this.prevSectorAngleArr.push(g)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var v=a.drawCircle(this.donutSize);v.attr({cx:this.centerX,cy:this.centerY,fill:s.config.plotOptions.pie.donut.background?s.config.plotOptions.pie.donut.background:"transparent"}),u.add(v)}var N=this.drawArcs(c,e);if(this.sliceLabels.forEach(function(A){N.add(A)}),u.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(s.config.plotOptions.pie.customScale,")")}),u.add(N),i.add(u),this.donutDataLabels.show){var k=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});i.add(k)}return s.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(i),i}},{key:"drawArcs",value:function(e,t){var s=this.w,a=new ga(this.ctx),i=new Be(this.ctx),o=new ri(this.ctx),l=i.group({class:"apexcharts-slices"}),c=this.initialAngle,u=this.initialAngle,h=this.initialAngle,f=this.initialAngle;this.strokeWidth=s.config.stroke.show?s.config.stroke.width:0;for(var g=0;g<e.length;g++){var x=i.group({class:"apexcharts-series apexcharts-pie-series",seriesName:ne.escapeString(s.globals.seriesNames[g]),rel:g+1,"data:realIndex":g});l.add(x),u=f,h=(c=h)+e[g],f=u+this.prevSectorAngleArr[g];var y=h<c?this.fullAngle+h-c:h-c,b=o.fillPath({seriesNumber:g,size:this.sliceSizes[g],value:t[g]}),v=this.getChangedPath(u,f),N=i.drawPath({d:v,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[g]:this.lineColorArr,strokeWidth:0,fill:b,fillOpacity:s.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(g)});if(N.attr({index:0,j:g}),a.setSelectionFilter(N,0,g),s.config.chart.dropShadow.enabled){var k=s.config.chart.dropShadow;a.dropShadow(N,k,g)}this.addListeners(N,this.donutDataLabels),Be.setAttrs(N.node,{"data:angle":y,"data:startAngle":c,"data:strokeWidth":this.strokeWidth,"data:value":t[g]});var A={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?A=ne.polarToCartesian(this.centerX,this.centerY,s.globals.radialSize/1.25+s.config.plotOptions.pie.dataLabels.offset,(c+y/2)%this.fullAngle):this.chartType==="donut"&&(A=ne.polarToCartesian(this.centerX,this.centerY,(s.globals.radialSize+this.donutSize)/2+s.config.plotOptions.pie.dataLabels.offset,(c+y/2)%this.fullAngle)),x.add(N);var R=0;if(!this.initialAnim||s.globals.resized||s.globals.dataChanged?this.animBeginArr.push(0):((R=y/this.fullAngle*s.config.chart.animations.speed)===0&&(R=1),this.animDur=R+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&s.globals.dataChanged?this.animatePaths(N,{size:this.sliceSizes[g],endAngle:h,startAngle:c,prevStartAngle:u,prevEndAngle:f,animateStartingPos:!0,i:g,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:s.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(N,{size:this.sliceSizes[g],endAngle:h,startAngle:c,i:g,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:R}),s.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&N.node.addEventListener("mouseup",this.pieClicked.bind(this,g)),s.globals.selectedDataPoints[0]!==void 0&&s.globals.selectedDataPoints[0].indexOf(g)>-1&&this.pieClicked(g),s.config.dataLabels.enabled){var _=A.x,I=A.y,P=100*y/this.fullAngle+"%";if(y!==0&&s.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[g]){var T=s.config.dataLabels.formatter;T!==void 0&&(P=T(s.globals.seriesPercent[g][0],{seriesIndex:g,w:s}));var D=s.globals.dataLabels.style.colors[g],L=i.group({class:"apexcharts-datalabels"}),F=i.drawText({x:_,y:I,text:P,textAnchor:"middle",fontSize:s.config.dataLabels.style.fontSize,fontFamily:s.config.dataLabels.style.fontFamily,fontWeight:s.config.dataLabels.style.fontWeight,foreColor:D});if(L.add(F),s.config.dataLabels.dropShadow.enabled){var z=s.config.dataLabels.dropShadow;a.dropShadow(F,z)}F.node.classList.add("apexcharts-pie-label"),s.config.chart.animations.animate&&s.globals.resized===!1&&(F.node.classList.add("apexcharts-pie-label-delay"),F.node.style.animationDelay=s.config.chart.animations.speed/940+"s"),this.sliceLabels.push(L)}}}return l}},{key:"addListeners",value:function(e,t){var s=new Be(this.ctx);e.node.addEventListener("mouseenter",s.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",s.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",s.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var s=this.w,a=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,i=a,o=t.startAngle,l=t.startAngle;t.prevStartAngle!==void 0&&t.prevEndAngle!==void 0&&(o=t.prevEndAngle,i=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===s.config.series.length-1&&(a+l>this.fullAngle?t.endAngle=t.endAngle-(a+l):a+l<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(a+l)))),a===this.fullAngle&&(a=this.fullAngle-.01),this.animateArc(e,o,l,a,i,t)}},{key:"animateArc",value:function(e,t,s,a,i,o){var l,c=this,u=this.w,h=new Ah(this.ctx),f=o.size;(isNaN(t)||isNaN(i))&&(t=s,i=a,o.dur=0);var g=a,x=s,y=t<s?this.fullAngle+t-s:t-s;u.globals.dataChanged&&o.shouldSetPrevPaths&&o.prevEndAngle&&(l=c.getPiePath({me:c,startAngle:o.prevStartAngle,angle:o.prevEndAngle<o.prevStartAngle?this.fullAngle+o.prevEndAngle-o.prevStartAngle:o.prevEndAngle-o.prevStartAngle,size:f}),e.attr({d:l})),o.dur!==0?e.animate(o.dur,o.animBeginArr[o.i]).after(function(){c.chartType!=="pie"&&c.chartType!=="donut"&&c.chartType!=="polarArea"||this.animate(u.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":c.strokeWidth}),o.i===u.config.series.length-1&&h.animationCompleted(e)}).during(function(b){g=y+(a-y)*b,o.animateStartingPos&&(g=i+(a-i)*b,x=t-i+(s-(t-i))*b),l=c.getPiePath({me:c,startAngle:x,angle:g,size:f}),e.node.setAttribute("data:pathOrig",l),e.attr({d:l})}):(l=c.getPiePath({me:c,startAngle:x,angle:a,size:f}),o.isTrack||(u.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",l),e.attr({d:l,"stroke-width":c.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,s=this.w,a=this,i=a.sliceSizes[e]+(s.config.plotOptions.pie.expandOnClick?4:0),o=s.globals.dom.Paper.findOne(".apexcharts-".concat(a.chartType.toLowerCase(),"-slice-").concat(e));if(o.attr("data:pieClicked")!=="true"){var l=s.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(l,function(f){f.setAttribute("data:pieClicked","false");var g=f.getAttribute("data:pathOrig");g&&f.setAttribute("d",g)}),s.globals.capturedDataPointIndex=e,o.attr("data:pieClicked","true");var c=parseInt(o.attr("data:startAngle"),10),u=parseInt(o.attr("data:angle"),10);t=a.getPiePath({me:a,startAngle:c,angle:u,size:i}),u!==360&&o.plot(t)}else{o.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(o.node,this.donutDataLabels);var h=o.attr("data:pathOrig");o.attr({d:h})}}},{key:"getChangedPath",value:function(e,t){var s="";return this.dynamicAnim&&this.w.globals.dataChanged&&(s=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),s}},{key:"getPiePath",value:function(e){var t,s=e.me,a=e.startAngle,i=e.angle,o=e.size,l=new Be(this.ctx),c=a,u=Math.PI*(c-90)/180,h=i+a;Math.ceil(h)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(h=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(h)>this.fullAngle&&(h-=this.fullAngle);var f=Math.PI*(h-90)/180,g=s.centerX+o*Math.cos(u),x=s.centerY+o*Math.sin(u),y=s.centerX+o*Math.cos(f),b=s.centerY+o*Math.sin(f),v=ne.polarToCartesian(s.centerX,s.centerY,s.donutSize,h),N=ne.polarToCartesian(s.centerX,s.centerY,s.donutSize,c),k=i>180?1:0,A=["M",g,x,"A",o,o,0,k,1,y,b];return t=s.chartType==="donut"?[].concat(A,["L",v.x,v.y,"A",s.donutSize,s.donutSize,0,k,0,N.x,N.y,"L",g,x,"z"]).join(" "):s.chartType==="pie"||s.chartType==="polarArea"?[].concat(A,["L",s.centerX,s.centerY,"L",g,x]).join(" "):[].concat(A).join(" "),l.roundPathCorners(t,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(e){var t=this.w,s=new sF(this.ctx),a=new Be(this.ctx),i=new lF(this.ctx),o=a.group(),l=a.group(),c=s.niceScale(0,Math.ceil(this.maxY),0),u=c.result.reverse(),h=c.result.length;this.maxY=c.niceMax;for(var f=t.globals.radialSize,g=f/(h-1),x=0;x<h-1;x++){var y=a.drawCircle(f);if(y.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var b=i.drawYAxisTexts(this.centerX,this.centerY-f+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,x,u[x]);l.add(b)}o.add(y),f-=g}this.drawSpokes(e),e.add(o),e.add(l)}},{key:"renderInnerDataLabels",value:function(e,t,s){var a=this.w,i=new Be(this.ctx),o=t.total.show;e.node.innerHTML="",e.node.style.opacity=s.opacity;var l,c,u=s.centerX,h=this.donutDataLabels.total.label?s.centerY:s.centerY-s.centerY/6;l=t.name.color===void 0?a.globals.colors[0]:t.name.color;var f=t.name.fontSize,g=t.name.fontFamily,x=t.name.fontWeight;c=t.value.color===void 0?a.config.chart.foreColor:t.value.color;var y=t.value.formatter,b="",v="";if(o?(l=t.total.color,f=t.total.fontSize,g=t.total.fontFamily,x=t.total.fontWeight,v=this.donutDataLabels.total.label?t.total.label:"",b=t.total.formatter(a)):a.globals.series.length===1&&(b=y(a.globals.series[0],a),v=a.globals.seriesNames[0]),v&&(v=t.name.formatter(v,t.total.show,a)),t.name.show){var N=i.drawText({x:u,y:h+parseFloat(t.name.offsetY),text:v,textAnchor:"middle",foreColor:l,fontSize:f,fontWeight:x,fontFamily:g});N.node.classList.add("apexcharts-datalabel-label"),e.add(N)}if(t.value.show){var k=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,A=i.drawText({x:u,y:h+k,text:b,textAnchor:"middle",foreColor:c,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});A.node.classList.add("apexcharts-datalabel-value"),e.add(A)}return e}},{key:"printInnerLabels",value:function(e,t,s,a){var i,o=this.w;a?i=e.name.color===void 0?o.globals.colors[parseInt(a.parentNode.getAttribute("rel"),10)-1]:e.name.color:o.globals.series.length>1&&e.total.show&&(i=e.total.color);var l=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),c=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");s=(0,e.value.formatter)(s,o),a||typeof e.total.formatter!="function"||(s=e.total.formatter(o));var u=t===e.total.label;t=this.donutDataLabels.total.label?e.name.formatter(t,u,o):"",l!==null&&(l.textContent=t),c!==null&&(c.textContent=s),l!==null&&(l.style.fill=i)}},{key:"printDataLabelsInner",value:function(e,t){var s=this.w,a=e.getAttribute("data:value"),i=s.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];s.globals.series.length>1&&this.printInnerLabels(t,i,a,e);var o=s.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");o!==null&&(o.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,s=this.w,a=new Be(this.ctx),i=s.config.plotOptions.polarArea.spokes;if(i.strokeWidth!==0){for(var o=[],l=360/s.globals.series.length,c=0;c<s.globals.series.length;c++)o.push(ne.polarToCartesian(this.centerX,this.centerY,s.globals.radialSize,s.config.plotOptions.pie.startAngle+l*c));o.forEach(function(u,h){var f=a.drawLine(u.x,u.y,t.centerX,t.centerY,Array.isArray(i.connectorColors)?i.connectorColors[h]:i.connectorColors);e.add(f)})}}},{key:"revertDataLabelsInner",value:function(){var e=this.w;if(this.donutDataLabels.show){var t=e.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),s=this.renderInnerDataLabels(t,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});e.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(s)}}}]),r}(),yde=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var t=this.w;this.graphics=new Be(this.ctx),this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=t.globals.svgHeight<t.globals.svgWidth?t.globals.gridHeight:t.globals.gridWidth,this.isLog=t.config.yaxis[0].logarithmic,this.logBase=t.config.yaxis[0].logBase,this.coreUtils=new wr(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,t.globals.maxY,0):t.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):t.globals.minY,this.polygons=t.config.plotOptions.radar.polygons,this.strokeWidth=t.config.stroke.show?t.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-t.config.chart.dropShadow.blur,t.config.xaxis.labels.show&&(this.size=this.size-t.globals.xAxisLabelsWidth/1.75),t.config.plotOptions.radar.size!==void 0&&(this.size=t.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return dt(r,[{key:"draw",value:function(e){var t=this,s=this.w,a=new ri(this.ctx),i=[],o=new ah(this.ctx);e.length&&(this.dataPointsLen=e[s.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var l=s.globals.gridWidth/2,c=s.globals.gridHeight/2,u=l+s.config.plotOptions.radar.offsetX,h=c+s.config.plotOptions.radar.offsetY,f=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(u||0,", ").concat(h||0,")")}),g=[],x=null,y=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach(function(v,N){var k=v.length===s.globals.dataPoints,A=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":k,seriesName:ne.escapeString(s.globals.seriesNames[N]),rel:N+1,"data:realIndex":N});t.dataRadiusOfPercent[N]=[],t.dataRadius[N]=[],t.angleArr[N]=[],v.forEach(function(O,V){var Y=Math.abs(t.maxValue-t.minValue);O-=t.minValue,t.isLog&&(O=t.coreUtils.getLogVal(t.logBase,O,0)),t.dataRadiusOfPercent[N][V]=O/Y,t.dataRadius[N][V]=t.dataRadiusOfPercent[N][V]*t.size,t.angleArr[N][V]=V*t.disAngle}),g=t.getDataPointsPos(t.dataRadius[N],t.angleArr[N]);var R=t.createPaths(g,{x:0,y:0});x=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),y=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":N}),s.globals.delayedElements.push({el:x.node,index:N});var _={i:N,realIndex:N,animationDelay:N,initialSpeed:s.config.chart.animations.speed,dataChangeSpeed:s.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:s.globals.stroke.colors[N],strokeLineCap:s.config.stroke.lineCap},I=null;s.globals.previousPaths.length>0&&(I=t.getPreviousPath(N));for(var P=0;P<R.linePathsTo.length;P++){var T=t.graphics.renderPaths(et(et({},_),{},{pathFrom:I===null?R.linePathsFrom[P]:I,pathTo:R.linePathsTo[P],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[N]:t.strokeWidth,fill:"none",drawShadow:!1}));A.add(T);var D=a.fillPath({seriesNumber:N}),L=t.graphics.renderPaths(et(et({},_),{},{pathFrom:I===null?R.areaPathsFrom[P]:I,pathTo:R.areaPathsTo[P],strokeWidth:0,fill:D,drawShadow:!1}));if(s.config.chart.dropShadow.enabled){var F=new ga(t.ctx),z=s.config.chart.dropShadow;F.dropShadow(L,Object.assign({},z,{noUserSpaceOnUse:!0}),N)}A.add(L)}v.forEach(function(O,V){var Y=new Ph(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:N,dataPointIndex:V}),H=t.graphics.drawMarker(g[V].x,g[V].y,Y);H.attr("rel",V),H.attr("j",V),H.attr("index",N),H.node.setAttribute("default-marker-size",Y.pSize);var $=t.graphics.group({class:"apexcharts-series-markers"});$&&$.add(H),x.add($),A.add(x);var X=s.config.dataLabels;if(X.enabled){var G=X.formatter(s.globals.series[N][V],{seriesIndex:N,dataPointIndex:V,w:s});o.plotDataLabelsText({x:g[V].x,y:g[V].y,text:G,textAnchor:"middle",i:N,j:N,parent:y,offsetCorrection:!1,dataLabelsConfig:et({},X)})}A.add(y)}),i.push(A)}),this.drawPolygons({parent:f}),s.config.xaxis.labels.show){var b=this.drawXAxisTexts();f.add(b)}return i.forEach(function(v){f.add(v)}),f.add(this.yaxisLabels),f}},{key:"drawPolygons",value:function(e){for(var t=this,s=this.w,a=e.parent,i=new lF(this.ctx),o=s.globals.yAxisScale[0].result.reverse(),l=o.length,c=[],u=this.size/(l-1),h=0;h<l;h++)c[h]=u*h;c.reverse();var f=[],g=[];c.forEach(function(x,y){var b=ne.getPolygonPos(x,t.dataPointsLen),v="";b.forEach(function(N,k){if(y===0){var A=t.graphics.drawLine(N.x,N.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[k]:t.polygons.connectorColors);g.push(A)}k===0&&t.yaxisLabelsTextsPos.push({x:N.x,y:N.y}),v+=N.x+","+N.y+" "}),f.push(v)}),f.forEach(function(x,y){var b=t.polygons.strokeColors,v=t.polygons.strokeWidth,N=t.graphics.drawPolygon(x,Array.isArray(b)?b[y]:b,Array.isArray(v)?v[y]:v,s.globals.radarPolygons.fill.colors[y]);a.add(N)}),g.forEach(function(x){a.add(x)}),s.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(x,y){var b=i.drawYAxisTexts(x.x,x.y,y,o[y]);t.yaxisLabels.add(b)})}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,s=t.config.xaxis.labels,a=this.graphics.group({class:"apexcharts-xaxis"}),i=ne.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach(function(o,l){var c=t.config.xaxis.labels.formatter,u=new ah(e.ctx);if(i[l]){var h=e.getTextPos(i[l],e.size),f=c(o,{seriesIndex:-1,dataPointIndex:l,w:t});u.plotDataLabelsText({x:h.newX,y:h.newY,text:f,textAnchor:h.textAnchor,i:l,j:l,parent:a,className:"apexcharts-xaxis-label",color:Array.isArray(s.style.colors)&&s.style.colors[l]?s.style.colors[l]:"#a8a8a8",dataLabelsConfig:et({textAnchor:h.textAnchor,dropShadow:{enabled:!1}},s),offsetCorrection:!1}).on("click",function(g){if(typeof t.config.chart.events.xAxisLabelClick=="function"){var x=Object.assign({},t,{labelIndex:l});t.config.chart.events.xAxisLabelClick(g,e.ctx,x)}})}}),a}},{key:"createPaths",value:function(e,t){var s=this,a=[],i=[],o=[],l=[];if(e.length){i=[this.graphics.move(t.x,t.y)],l=[this.graphics.move(t.x,t.y)];var c=this.graphics.move(e[0].x,e[0].y),u=this.graphics.move(e[0].x,e[0].y);e.forEach(function(h,f){c+=s.graphics.line(h.x,h.y),u+=s.graphics.line(h.x,h.y),f===e.length-1&&(c+="Z",u+="Z")}),a.push(c),o.push(u)}return{linePathsFrom:i,linePathsTo:a,areaPathsFrom:l,areaPathsTo:o}}},{key:"getTextPos",value:function(e,t){var s="middle",a=e.x,i=e.y;return Math.abs(e.x)>=10?e.x>0?(s="start",a+=10):e.x<0&&(s="end",a-=10):s="middle",Math.abs(e.y)>=t-10&&(e.y<0?i-=10:e.y>0&&(i+=10)),{textAnchor:s,newX:a,newY:i}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,s=null,a=0;a<t.globals.previousPaths.length;a++){var i=t.globals.previousPaths[a];i.paths.length>0&&parseInt(i.realIndex,10)===parseInt(e,10)&&t.globals.previousPaths[a].paths[0]!==void 0&&(s=t.globals.previousPaths[a].paths[0].d)}return s}},{key:"getDataPointsPos",value:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var a=[],i=0;i<s;i++){var o={};o.x=e[i]*Math.sin(t[i]),o.y=-e[i]*Math.cos(t[i]),a.push(o)}return a}}]),r}(),vde=function(r){Ug(t,cF);var e=Fg(t);function t(s){var a;ct(this,t),(a=e.call(this,s)).ctx=s,a.w=s.w,a.animBeginArr=[0],a.animDur=0;var i=a.w;return a.startAngle=i.config.plotOptions.radialBar.startAngle,a.endAngle=i.config.plotOptions.radialBar.endAngle,a.totalAngle=Math.abs(i.config.plotOptions.radialBar.endAngle-i.config.plotOptions.radialBar.startAngle),a.trackStartAngle=i.config.plotOptions.radialBar.track.startAngle,a.trackEndAngle=i.config.plotOptions.radialBar.track.endAngle,a.barLabels=a.w.config.plotOptions.radialBar.barLabels,a.donutDataLabels=a.w.config.plotOptions.radialBar.dataLabels,a.radialDataLabels=a.donutDataLabels,a.trackStartAngle||(a.trackStartAngle=a.startAngle),a.trackEndAngle||(a.trackEndAngle=a.endAngle),a.endAngle===360&&(a.endAngle=359.99),a.margin=parseInt(i.config.plotOptions.radialBar.track.margin,10),a.onBarLabelClick=a.onBarLabelClick.bind(wL(a)),a}return dt(t,[{key:"draw",value:function(s){var a=this.w,i=new Be(this.ctx),o=i.group({class:"apexcharts-radialbar"});if(a.globals.noData)return o;var l=i.group(),c=this.defaultSize/2,u=a.globals.gridWidth/2,h=this.defaultSize/2.05;a.config.chart.sparkline.enabled||(h=h-a.config.stroke.width-a.config.chart.dropShadow.blur);var f=a.globals.fill.colors;if(a.config.plotOptions.radialBar.track.show){var g=this.drawTracks({size:h,centerX:u,centerY:c,colorArr:f,series:s});l.add(g)}var x=this.drawArcs({size:h,centerX:u,centerY:c,colorArr:f,series:s}),y=360;a.config.plotOptions.radialBar.startAngle<0&&(y=this.totalAngle);var b=(360-y)/360;if(a.globals.radialSize=h-h*b,this.radialDataLabels.value.show){var v=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);a.globals.radialSize+=v*b}return l.add(x.g),a.config.plotOptions.radialBar.hollow.position==="front"&&(x.g.add(x.elHollow),x.dataLabels&&x.g.add(x.dataLabels)),o.add(l),o}},{key:"drawTracks",value:function(s){var a=this.w,i=new Be(this.ctx),o=i.group({class:"apexcharts-tracks"}),l=new ga(this.ctx),c=new ri(this.ctx),u=this.getStrokeWidth(s);s.size=s.size-u/2;for(var h=0;h<s.series.length;h++){var f=i.group({class:"apexcharts-radialbar-track apexcharts-track"});o.add(f),f.attr({rel:h+1}),s.size=s.size-u-this.margin;var g=a.config.plotOptions.radialBar.track,x=c.fillPath({seriesNumber:0,size:s.size,fillColors:Array.isArray(g.background)?g.background[h]:g.background,solid:!0}),y=this.trackStartAngle,b=this.trackEndAngle;Math.abs(b)+Math.abs(y)>=360&&(b=360-Math.abs(this.startAngle)-.1);var v=i.drawPath({d:"",stroke:x,strokeWidth:u*parseInt(g.strokeWidth,10)/100,fill:"none",strokeOpacity:g.opacity,classes:"apexcharts-radialbar-area"});if(g.dropShadow.enabled){var N=g.dropShadow;l.dropShadow(v,N)}f.add(v),v.attr("id","apexcharts-radialbarTrack-"+h),this.animatePaths(v,{centerX:s.centerX,centerY:s.centerY,endAngle:b,startAngle:y,size:s.size,i:h,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return o}},{key:"drawArcs",value:function(s){var a=this.w,i=new Be(this.ctx),o=new ri(this.ctx),l=new ga(this.ctx),c=i.group(),u=this.getStrokeWidth(s);s.size=s.size-u/2;var h=a.config.plotOptions.radialBar.hollow.background,f=s.size-u*s.series.length-this.margin*s.series.length-u*parseInt(a.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,g=f-a.config.plotOptions.radialBar.hollow.margin;a.config.plotOptions.radialBar.hollow.image!==void 0&&(h=this.drawHollowImage(s,c,f,h));var x=this.drawHollow({size:g,centerX:s.centerX,centerY:s.centerY,fill:h||"transparent"});if(a.config.plotOptions.radialBar.hollow.dropShadow.enabled){var y=a.config.plotOptions.radialBar.hollow.dropShadow;l.dropShadow(x,y)}var b=1;!this.radialDataLabels.total.show&&a.globals.series.length>1&&(b=0);var v=null;if(this.radialDataLabels.show){var N=a.globals.dom.Paper.findOne(".apexcharts-datalabels-group");v=this.renderInnerDataLabels(N,this.radialDataLabels,{hollowSize:f,centerX:s.centerX,centerY:s.centerY,opacity:b})}a.config.plotOptions.radialBar.hollow.position==="back"&&(c.add(x),v&&c.add(v));var k=!1;a.config.plotOptions.radialBar.inverseOrder&&(k=!0);for(var A=k?s.series.length-1:0;k?A>=0:A<s.series.length;k?A--:A++){var R=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:ne.escapeString(a.globals.seriesNames[A])});c.add(R),R.attr({rel:A+1,"data:realIndex":A}),this.ctx.series.addCollapsedClassToSeries(R,A),s.size=s.size-u-this.margin;var _=o.fillPath({seriesNumber:A,size:s.size,value:s.series[A]}),I=this.startAngle,P=void 0,T=ne.negToZero(s.series[A]>100?100:s.series[A])/100,D=Math.round(this.totalAngle*T)+this.startAngle,L=void 0;a.globals.dataChanged&&(P=this.startAngle,L=Math.round(this.totalAngle*ne.negToZero(a.globals.previousPaths[A])/100)+P),Math.abs(D)+Math.abs(I)>360&&(D-=.01),Math.abs(L)+Math.abs(P)>360&&(L-=.01);var F=D-I,z=Array.isArray(a.config.stroke.dashArray)?a.config.stroke.dashArray[A]:a.config.stroke.dashArray,O=i.drawPath({d:"",stroke:_,strokeWidth:u,fill:"none",fillOpacity:a.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+A,strokeDashArray:z});if(Be.setAttrs(O.node,{"data:angle":F,"data:value":s.series[A]}),a.config.chart.dropShadow.enabled){var V=a.config.chart.dropShadow;l.dropShadow(O,V,A)}if(l.setSelectionFilter(O,0,A),this.addListeners(O,this.radialDataLabels),R.add(O),O.attr({index:0,j:A}),this.barLabels.enabled){var Y=ne.polarToCartesian(s.centerX,s.centerY,s.size,I),H=this.barLabels.formatter(a.globals.seriesNames[A],{seriesIndex:A,w:a}),$=["apexcharts-radialbar-label"];this.barLabels.onClick||$.push("apexcharts-no-click");var X=this.barLabels.useSeriesColors?a.globals.colors[A]:a.config.chart.foreColor;X||(X=a.config.chart.foreColor);var G=Y.x+this.barLabels.offsetX,B=Y.y+this.barLabels.offsetY,Q=i.drawText({x:G,y:B,text:H,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:X,cssClass:$.join(" ")});Q.on("click",this.onBarLabelClick),Q.attr({rel:A+1}),I!==0&&Q.attr({"transform-origin":"".concat(G," ").concat(B),transform:"rotate(".concat(I," 0 0)")}),R.add(Q)}var ee=0;!this.initialAnim||a.globals.resized||a.globals.dataChanged||(ee=a.config.chart.animations.speed),a.globals.dataChanged&&(ee=a.config.chart.animations.dynamicAnimation.speed),this.animDur=ee/(1.2*s.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(O,{centerX:s.centerX,centerY:s.centerY,endAngle:D,startAngle:I,prevEndAngle:L,prevStartAngle:P,size:s.size,i:A,totalItems:2,animBeginArr:this.animBeginArr,dur:ee,shouldSetPrevPaths:!0})}return{g:c,elHollow:x,dataLabels:v}}},{key:"drawHollow",value:function(s){var a=new Be(this.ctx).drawCircle(2*s.size);return a.attr({class:"apexcharts-radialbar-hollow",cx:s.centerX,cy:s.centerY,r:s.size,fill:s.fill}),a}},{key:"drawHollowImage",value:function(s,a,i,o){var l=this.w,c=new ri(this.ctx),u=ne.randomId(),h=l.config.plotOptions.radialBar.hollow.image;if(l.config.plotOptions.radialBar.hollow.imageClipped)c.clippedImgArea({width:i,height:i,image:h,patternID:"pattern".concat(l.globals.cuid).concat(u)}),o="url(#pattern".concat(l.globals.cuid).concat(u,")");else{var f=l.config.plotOptions.radialBar.hollow.imageWidth,g=l.config.plotOptions.radialBar.hollow.imageHeight;if(f===void 0&&g===void 0){var x=l.globals.dom.Paper.image(h,function(b){this.move(s.centerX-b.width/2+l.config.plotOptions.radialBar.hollow.imageOffsetX,s.centerY-b.height/2+l.config.plotOptions.radialBar.hollow.imageOffsetY)});a.add(x)}else{var y=l.globals.dom.Paper.image(h,function(b){this.move(s.centerX-f/2+l.config.plotOptions.radialBar.hollow.imageOffsetX,s.centerY-g/2+l.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(f,g)});a.add(y)}}return o}},{key:"getStrokeWidth",value:function(s){var a=this.w;return s.size*(100-parseInt(a.config.plotOptions.radialBar.hollow.size,10))/100/(s.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(s){var a=parseInt(s.target.getAttribute("rel"),10)-1,i=this.barLabels.onClick,o=this.w;i&&i(o.globals.seriesNames[a],{w:o,seriesIndex:a})}}]),t}(),wde=function(r){Ug(t,nh);var e=Fg(t);function t(){return ct(this,t),e.apply(this,arguments)}return dt(t,[{key:"draw",value:function(s,a){var i=this.w,o=new Be(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=s,this.seriesRangeStart=i.globals.seriesRangeStart,this.seriesRangeEnd=i.globals.seriesRangeEnd,this.barHelpers.initVariables(s);for(var l=o.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),c=0;c<s.length;c++){var u,h,f,g,x=void 0,y=void 0,b=i.globals.comboCharts?a[c]:c,v=this.barHelpers.getGroupIndex(b).columnGroupIndex,N=o.group({class:"apexcharts-series",seriesName:ne.escapeString(i.globals.seriesNames[b]),rel:c+1,"data:realIndex":b});this.ctx.series.addCollapsedClassToSeries(N,b),s[c].length>0&&(this.visibleI=this.visibleI+1);var k=0,A=0,R=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[b][0],R=b);var _=this.barHelpers.initialPositions(b);y=_.y,g=_.zeroW,x=_.x,A=_.barWidth,k=_.barHeight,u=_.xDivision,h=_.yDivision,f=_.zeroH;for(var I=o.group({class:"apexcharts-datalabels","data:realIndex":b}),P=o.group({class:"apexcharts-rangebar-goals-markers"}),T=0;T<i.globals.dataPoints;T++){var D=this.barHelpers.getStrokeWidth(c,T,b),L=this.seriesRangeStart[c][T],F=this.seriesRangeEnd[c][T],z=null,O=null,V=null,Y={x,y,strokeWidth:D,elSeries:N},H=this.seriesLen;if(i.config.plotOptions.bar.rangeBarGroupRows&&(H=1),i.config.series[c].data[T]===void 0)break;if(this.isHorizontal){V=y+k*this.visibleI;var $=(h-k*H)/2;if(i.config.series[c].data[T].x){var X=this.detectOverlappingBars({i:c,j:T,barYPosition:V,srty:$,barHeight:k,yDivision:h,initPositions:_});k=X.barHeight,V=X.barYPosition}A=(z=this.drawRangeBarPaths(et({indexes:{i:c,j:T,realIndex:b},barHeight:k,barYPosition:V,zeroW:g,yDivision:h,y1:L,y2:F},Y))).barWidth}else{i.globals.isXNumeric&&(x=(i.globals.seriesX[c][T]-i.globals.minX)/this.xRatio-A/2),O=x+A*this.visibleI;var G=(u-A*H)/2;if(i.config.series[c].data[T].x){var B=this.detectOverlappingBars({i:c,j:T,barXPosition:O,srtx:G,barWidth:A,xDivision:u,initPositions:_});A=B.barWidth,O=B.barXPosition}k=(z=this.drawRangeColumnPaths(et({indexes:{i:c,j:T,realIndex:b,translationsIndex:R},barWidth:A,barXPosition:O,zeroH:f,xDivision:u},Y))).barHeight}var Q=this.barHelpers.drawGoalLine({barXPosition:z.barXPosition,barYPosition:V,goalX:z.goalX,goalY:z.goalY,barHeight:k,barWidth:A});Q&&P.add(Q),y=z.y,x=z.x;var ee=this.barHelpers.getPathFillColor(s,c,T,b);this.renderSeries({realIndex:b,pathFill:ee.color,lineFill:ee.useRangeColor?ee.color:i.globals.stroke.colors[b],j:T,i:c,x,y,y1:L,y2:F,pathFrom:z.pathFrom,pathTo:z.pathTo,strokeWidth:D,elSeries:N,series:s,barHeight:k,barWidth:A,barXPosition:O,barYPosition:V,columnGroupIndex:v,elDataLabelsWrap:I,elGoalsMarkers:P,visibleSeries:this.visibleI,type:"rangebar"})}l.add(N)}return l}},{key:"detectOverlappingBars",value:function(s){var a=s.i,i=s.j,o=s.barYPosition,l=s.barXPosition,c=s.srty,u=s.srtx,h=s.barHeight,f=s.barWidth,g=s.yDivision,x=s.xDivision,y=s.initPositions,b=this.w,v=[],N=b.config.series[a].data[i].rangeName,k=b.config.series[a].data[i].x,A=Array.isArray(k)?k.join(" "):k,R=b.globals.labels.map(function(I){return Array.isArray(I)?I.join(" "):I}).indexOf(A),_=b.globals.seriesRange[a].findIndex(function(I){return I.x===A&&I.overlaps.length>0});return this.isHorizontal?(o=b.config.plotOptions.bar.rangeBarGroupRows?c+g*R:c+h*this.visibleI+g*R,_>-1&&!b.config.plotOptions.bar.rangeBarOverlap&&(v=b.globals.seriesRange[a][_].overlaps).indexOf(N)>-1&&(o=(h=y.barHeight/v.length)*this.visibleI+g*(100-parseInt(this.barOptions.barHeight,10))/100/2+h*(this.visibleI+v.indexOf(N))+g*R)):(R>-1&&!b.globals.timescaleLabels.length&&(l=b.config.plotOptions.bar.rangeBarGroupRows?u+x*R:u+f*this.visibleI+x*R),_>-1&&!b.config.plotOptions.bar.rangeBarOverlap&&(v=b.globals.seriesRange[a][_].overlaps).indexOf(N)>-1&&(l=(f=y.barWidth/v.length)*this.visibleI+x*(100-parseInt(this.barOptions.barWidth,10))/100/2+f*(this.visibleI+v.indexOf(N))+x*R)),{barYPosition:o,barXPosition:l,barHeight:h,barWidth:f}}},{key:"drawRangeColumnPaths",value:function(s){var a=s.indexes,i=s.x,o=s.xDivision,l=s.barWidth,c=s.barXPosition,u=s.zeroH,h=this.w,f=a.i,g=a.j,x=a.realIndex,y=a.translationsIndex,b=this.yRatio[y],v=this.getRangeValue(x,g),N=Math.min(v.start,v.end),k=Math.max(v.start,v.end);this.series[f][g]===void 0||this.series[f][g]===null?N=u:(N=u-N/b,k=u-k/b);var A=Math.abs(k-N),R=this.barHelpers.getColumnPaths({barXPosition:c,barWidth:l,y1:N,y2:k,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:x,i:x,j:g,w:h});if(h.globals.isXNumeric){var _=this.getBarXForNumericXAxis({x:i,j:g,realIndex:x,barWidth:l});i=_.x,c=_.barXPosition}else i+=o;return{pathTo:R.pathTo,pathFrom:R.pathFrom,barHeight:A,x:i,y:v.start<0&&v.end<0?N:k,goalY:this.barHelpers.getGoalValues("y",null,u,f,g,y),barXPosition:c}}},{key:"preventBarOverflow",value:function(s){var a=this.w;return s<0&&(s=0),s>a.globals.gridWidth&&(s=a.globals.gridWidth),s}},{key:"drawRangeBarPaths",value:function(s){var a=s.indexes,i=s.y,o=s.y1,l=s.y2,c=s.yDivision,u=s.barHeight,h=s.barYPosition,f=s.zeroW,g=this.w,x=a.realIndex,y=a.j,b=this.preventBarOverflow(f+o/this.invertedYRatio),v=this.preventBarOverflow(f+l/this.invertedYRatio),N=this.getRangeValue(x,y),k=Math.abs(v-b),A=this.barHelpers.getBarpaths({barYPosition:h,barHeight:u,x1:b,x2:v,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:x,realIndex:x,j:y,w:g});return g.globals.isXNumeric||(i+=c),{pathTo:A.pathTo,pathFrom:A.pathFrom,barWidth:k,x:N.start<0&&N.end<0?b:v,goalX:this.barHelpers.getGoalValues("x",f,null,x,y),y:i}}},{key:"getRangeValue",value:function(s,a){var i=this.w;return{start:i.globals.seriesRangeStart[s][a],end:i.globals.seriesRangeEnd[s][a]}}}]),t}(),Nde=function(){function r(e){ct(this,r),this.w=e.w,this.lineCtx=e}return dt(r,[{key:"sameValueSeriesFix",value:function(e,t){var s=this.w;if((s.config.fill.type==="gradient"||s.config.fill.type[e]==="gradient")&&new wr(this.lineCtx.ctx,s).seriesHaveSameValues(e)){var a=t[e].slice();a[a.length-1]=a[a.length-1]+1e-6,t[e]=a}return t}},{key:"calculatePoints",value:function(e){var t=e.series,s=e.realIndex,a=e.x,i=e.y,o=e.i,l=e.j,c=e.prevY,u=this.w,h=[],f=[],g=this.lineCtx.categoryAxisCorrection+u.config.markers.offsetX;return u.globals.isXNumeric&&(g=(u.globals.seriesX[s][0]-u.globals.minX)/this.lineCtx.xRatio+u.config.markers.offsetX),l===0&&(h.push(g),f.push(ne.isNumber(t[o][0])?c+u.config.markers.offsetY:null)),h.push(a+u.config.markers.offsetX),f.push(ne.isNumber(t[o][l+1])?i+u.config.markers.offsetY:null),{x:h,y:f}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,s=e.pathFromArea,a=e.realIndex,i=this.w,o=0;o<i.globals.previousPaths.length;o++){var l=i.globals.previousPaths[o];(l.type==="line"||l.type==="area")&&l.paths.length>0&&parseInt(l.realIndex,10)===parseInt(a,10)&&(l.type==="line"?(this.lineCtx.appendPathFrom=!1,t=i.globals.previousPaths[o].paths[0].d):l.type==="area"&&(this.lineCtx.appendPathFrom=!1,s=i.globals.previousPaths[o].paths[0].d,i.config.stroke.show&&i.globals.previousPaths[o].paths[1]&&(t=i.globals.previousPaths[o].paths[1].d)))}return{pathFromLine:t,pathFromArea:s}}},{key:"determineFirstPrevY",value:function(e){var t,s,a,i=e.i,o=e.realIndex,l=e.series,c=e.prevY,u=e.lineYPosition,h=e.translationsIndex,f=this.w,g=f.config.chart.stacked&&!f.globals.comboCharts||f.config.chart.stacked&&f.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[o])===null||t===void 0?void 0:t.type)==="bar"||((s=this.w.config.series[o])===null||s===void 0?void 0:s.type)==="column");if(((a=l[i])===null||a===void 0?void 0:a[0])!==void 0)c=(u=g&&i>0?this.lineCtx.prevSeriesY[i-1][0]:this.lineCtx.zeroY)-l[i][0]/this.lineCtx.yRatio[h]+2*(this.lineCtx.isReversed?l[i][0]/this.lineCtx.yRatio[h]:0);else if(g&&i>0&&l[i][0]===void 0){for(var x=i-1;x>=0;x--)if(l[x][0]!==null&&l[x][0]!==void 0){c=u=this.lineCtx.prevSeriesY[x][0];break}}return{prevY:c,lineYPosition:u}}}]),r}(),jde=function(r){for(var e,t,s,a,i=function(h){for(var f=[],g=h[0],x=h[1],y=f[0]=T1(g,x),b=1,v=h.length-1;b<v;b++)g=x,x=h[b+1],f[b]=.5*(y+(y=T1(g,x)));return f[b]=y,f}(r),o=r.length-1,l=[],c=0;c<o;c++)s=T1(r[c],r[c+1]),Math.abs(s)<1e-6?i[c]=i[c+1]=0:(a=(e=i[c]/s)*e+(t=i[c+1]/s)*t)>9&&(a=3*s/Math.sqrt(a),i[c]=a*e,i[c+1]=a*t);for(var u=0;u<=o;u++)a=(r[Math.min(o,u+1)][0]-r[Math.max(0,u-1)][0])/(6*(1+i[u]*i[u])),l.push([a||0,i[u]*a||0]);return l},kde=function(r){var e=jde(r),t=r[1],s=r[0],a=[],i=e[1],o=e[0];a.push(s,[s[0]+o[0],s[1]+o[1],t[0]-i[0],t[1]-i[1],t[0],t[1]]);for(var l=2,c=e.length;l<c;l++){var u=r[l],h=e[l];a.push([u[0]-h[0],u[1]-h[1],u[0],u[1]])}return a},Sde=function(r,e,t){var s=r.slice(e,t);if(e){if(t-e>1&&s[1].length<6){var a=s[0].length;s[1]=[2*s[0][a-2]-s[0][a-4],2*s[0][a-1]-s[0][a-3]].concat(s[1])}s[0]=s[0].slice(-2)}return s};function T1(r,e){return(e[1]-r[1])/(e[0]-r[0])}var P1=function(){function r(e,t,s){ct(this,r),this.ctx=e,this.w=e.w,this.xyRatios=t,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||s,this.scatter=new JL(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Nde(this),this.markers=new Ph(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return dt(r,[{key:"draw",value:function(e,t,s,a){var i,o=this.w,l=new Be(this.ctx),c=o.globals.comboCharts?t:o.config.chart.type,u=l.group({class:"apexcharts-".concat(c,"-series apexcharts-plot-series")}),h=new wr(this.ctx,o);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=h.getLogSeries(e),this.yRatio=h.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var f=[],g=0;g<e.length;g++){e=this.lineHelpers.sameValueSeriesFix(g,e);var x=o.globals.comboCharts?s[g]:g,y=this.yRatio.length>1?x:0;this._initSerieVariables(e,g,x);var b=[],v=[],N=[],k=o.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,x),o.globals.isXNumeric&&o.globals.seriesX.length>0&&(k=(o.globals.seriesX[x][0]-o.globals.minX)/this.xRatio),N.push(k);var A,R=k,_=void 0,I=R,P=this.zeroY,T=this.zeroY;P=this.lineHelpers.determineFirstPrevY({i:g,realIndex:x,series:e,prevY:P,lineYPosition:0,translationsIndex:y}).prevY,o.config.stroke.curve==="monotoneCubic"&&e[g][0]===null?b.push(null):b.push(P),A=P,c==="rangeArea"&&(_=T=this.lineHelpers.determineFirstPrevY({i:g,realIndex:x,series:a,prevY:T,lineYPosition:0,translationsIndex:y}).prevY,v.push(b[0]!==null?T:null));var D=this._calculatePathsFrom({type:c,series:e,i:g,realIndex:x,translationsIndex:y,prevX:I,prevY:P,prevY2:T}),L=[b[0]],F=[v[0]],z={type:c,series:e,realIndex:x,translationsIndex:y,i:g,x:k,y:1,pX:R,pY:A,pathsFrom:D,linePaths:[],areaPaths:[],seriesIndex:s,lineYPosition:0,xArrj:N,yArrj:b,y2Arrj:v,seriesRangeEnd:a},O=this._iterateOverDataPoints(et(et({},z),{},{iterations:c==="rangeArea"?e[g].length-1:void 0,isRangeStart:!0}));if(c==="rangeArea"){for(var V=this._calculatePathsFrom({series:a,i:g,realIndex:x,prevX:I,prevY:T}),Y=this._iterateOverDataPoints(et(et({},z),{},{series:a,xArrj:[k],yArrj:L,y2Arrj:F,pY:_,areaPaths:O.areaPaths,pathsFrom:V,iterations:a[g].length-1,isRangeStart:!1})),H=O.linePaths.length/2,$=0;$<H;$++)O.linePaths[$]=Y.linePaths[$+H]+O.linePaths[$];O.linePaths.splice(H),O.pathFromLine=Y.pathFromLine+O.pathFromLine}else O.pathFromArea+="z";this._handlePaths({type:c,realIndex:x,i:g,paths:O}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),f.push(this.elSeries)}if(((i=o.config.series[0])===null||i===void 0?void 0:i.zIndex)!==void 0&&f.sort(function(B,Q){return Number(B.node.getAttribute("zIndex"))-Number(Q.node.getAttribute("zIndex"))}),o.config.chart.stacked)for(var X=f.length-1;X>=0;X--)u.add(f[X]);else for(var G=0;G<f.length;G++)u.add(f[G]);return u}},{key:"_initSerieVariables",value:function(e,t,s){var a=this.w,i=new Be(this.ctx);this.xDivision=a.globals.gridWidth/(a.globals.dataPoints-(a.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(a.config.stroke.width)?a.config.stroke.width[s]:a.config.stroke.width;var o=0;if(this.yRatio.length>1&&(this.yaxisIndex=a.globals.seriesYAxisReverseMap[s],o=s),this.isReversed=a.config.yaxis[this.yaxisIndex]&&a.config.yaxis[this.yaxisIndex].reversed,this.zeroY=a.globals.gridHeight-this.baseLineY[o]-(this.isReversed?a.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[o]:0),this.areaBottomY=this.zeroY,(this.zeroY>a.globals.gridHeight||a.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=a.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=i.group({class:"apexcharts-series",zIndex:a.config.series[s].zIndex!==void 0?a.config.series[s].zIndex:s,seriesName:ne.escapeString(a.globals.seriesNames[s])}),this.elPointsMain=i.group({class:"apexcharts-series-markers-wrap","data:realIndex":s}),a.globals.hasNullValues){var l=this.markers.plotChartMarkers({pointsPos:{x:[0],y:[a.globals.gridHeight+a.globals.markers.largestSize]},seriesIndex:t,j:0,pSize:.1,alwaysDrawMarker:!0,isVirtualPoint:!0});l!==null&&this.elPointsMain.add(l)}this.elDataLabelsWrap=i.group({class:"apexcharts-datalabels","data:realIndex":s});var c=e[t].length===a.globals.dataPoints;this.elSeries.attr({"data:longestSeries":c,rel:t+1,"data:realIndex":s}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,s,a,i,o=e.type,l=e.series,c=e.i,u=e.realIndex,h=e.translationsIndex,f=e.prevX,g=e.prevY,x=e.prevY2,y=this.w,b=new Be(this.ctx);if(l[c][0]===null){for(var v=0;v<l[c].length;v++)if(l[c][v]!==null){f=this.xDivision*v,g=this.zeroY-l[c][v]/this.yRatio[h],t=b.move(f,g),s=b.move(f,this.areaBottomY);break}}else t=b.move(f,g),o==="rangeArea"&&(t=b.move(f,x)+b.line(f,g)),s=b.move(f,this.areaBottomY)+b.line(f,g);if(a=b.move(0,this.areaBottomY)+b.line(0,this.areaBottomY),i=b.move(0,this.areaBottomY)+b.line(0,this.areaBottomY),y.globals.previousPaths.length>0){var N=this.lineHelpers.checkPreviousPaths({pathFromLine:a,pathFromArea:i,realIndex:u});a=N.pathFromLine,i=N.pathFromArea}return{prevX:f,prevY:g,linePath:t,areaPath:s,pathFromLine:a,pathFromArea:i}}},{key:"_handlePaths",value:function(e){var t=e.type,s=e.realIndex,a=e.i,i=e.paths,o=this.w,l=new Be(this.ctx),c=new ri(this.ctx);this.prevSeriesY.push(i.yArrj),o.globals.seriesXvalues[s]=i.xArrj,o.globals.seriesYvalues[s]=i.yArrj;var u=o.config.forecastDataPoints;if(u.count>0&&t!=="rangeArea"){var h=o.globals.seriesXvalues[s][o.globals.seriesXvalues[s].length-u.count-1],f=l.drawRect(h,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(f.node);var g=l.drawRect(0,0,h,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(g.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:s});var x={i:a,realIndex:s,animationDelay:a,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if(t==="area")for(var y=c.fillPath({seriesNumber:s}),b=0;b<i.areaPaths.length;b++){var v=l.renderPaths(et(et({},x),{},{pathFrom:i.pathFromArea,pathTo:i.areaPaths[b],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:y}));this.elSeries.add(v)}if(o.config.stroke.show&&!this.pointsChart){var N=null;if(t==="line")N=c.fillPath({seriesNumber:s,i:a});else if(o.config.stroke.fill.type==="solid")N=o.globals.stroke.colors[s];else{var k=o.config.fill;o.config.fill=o.config.stroke.fill,N=c.fillPath({seriesNumber:s,i:a}),o.config.fill=k}for(var A=0;A<i.linePaths.length;A++){var R=N;t==="rangeArea"&&(R=c.fillPath({seriesNumber:s}));var _=et(et({},x),{},{pathFrom:i.pathFromLine,pathTo:i.linePaths[A],stroke:N,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:t==="rangeArea"?R:"none"}),I=l.renderPaths(_);if(this.elSeries.add(I),I.attr("fill-rule","evenodd"),u.count>0&&t!=="rangeArea"){var P=l.renderPaths(_);P.node.setAttribute("stroke-dasharray",u.dashArray),u.strokeWidth&&P.node.setAttribute("stroke-width",u.strokeWidth),this.elSeries.add(P),P.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),I.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var t,s,a=this,i=e.type,o=e.series,l=e.iterations,c=e.realIndex,u=e.translationsIndex,h=e.i,f=e.x,g=e.y,x=e.pX,y=e.pY,b=e.pathsFrom,v=e.linePaths,N=e.areaPaths,k=e.seriesIndex,A=e.lineYPosition,R=e.xArrj,_=e.yArrj,I=e.y2Arrj,P=e.isRangeStart,T=e.seriesRangeEnd,D=this.w,L=new Be(this.ctx),F=this.yRatio,z=b.prevY,O=b.linePath,V=b.areaPath,Y=b.pathFromLine,H=b.pathFromArea,$=ne.isNumber(D.globals.minYArr[c])?D.globals.minYArr[c]:D.globals.minY;l||(l=D.globals.dataPoints>1?D.globals.dataPoints-1:D.globals.dataPoints);var X=function(Ie,ie){return ie-Ie/F[u]+2*(a.isReversed?Ie/F[u]:0)},G=g,B=D.config.chart.stacked&&!D.globals.comboCharts||D.config.chart.stacked&&D.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[c])===null||t===void 0?void 0:t.type)==="bar"||((s=this.w.config.series[c])===null||s===void 0?void 0:s.type)==="column"),Q=D.config.stroke.curve;Array.isArray(Q)&&(Q=Array.isArray(k)?Q[k[h]]:Q[h]);for(var ee,se=0,le=0;le<l&&o[h].length!==0;le++){var Ee=o[h][le+1]===void 0||o[h][le+1]===null;if(D.globals.isXNumeric){var ue=D.globals.seriesX[c][le+1];D.globals.seriesX[c][le+1]===void 0&&(ue=D.globals.seriesX[c][l-1]),f=(ue-D.globals.minX)/this.xRatio}else f+=this.xDivision;B?h>0&&D.globals.collapsedSeries.length<D.config.series.length-1?A=this.prevSeriesY[function(Ie){for(var ie=Ie;ie>0;ie--){if(!(D.globals.collapsedSeriesIndices.indexOf(k?.[ie]||ie)>-1))return ie;ie--}return 0}(h-1)][le+1]:A=this.zeroY:A=this.zeroY,Ee?g=X($,A):(g=X(o[h][le+1],A),i==="rangeArea"&&(G=X(T[h][le+1],A))),R.push(o[h][le+1]===null?null:f),!Ee||D.config.stroke.curve!=="smooth"&&D.config.stroke.curve!=="monotoneCubic"?(_.push(g),I.push(G)):(_.push(null),I.push(null));var Oe=this.lineHelpers.calculatePoints({series:o,x:f,y:g,realIndex:c,i:h,j:le,prevY:z}),Pe=this._createPaths({type:i,series:o,i:h,realIndex:c,j:le,x:f,y:g,y2:G,xArrj:R,yArrj:_,y2Arrj:I,pX:x,pY:y,pathState:se,segmentStartX:ee,linePath:O,areaPath:V,linePaths:v,areaPaths:N,curve:Q,isRangeStart:P});N=Pe.areaPaths,v=Pe.linePaths,x=Pe.pX,y=Pe.pY,se=Pe.pathState,ee=Pe.segmentStartX,V=Pe.areaPath,O=Pe.linePath,!this.appendPathFrom||D.globals.hasNullValues||Q==="monotoneCubic"&&i==="rangeArea"||(Y+=L.line(f,this.areaBottomY),H+=L.line(f,this.areaBottomY)),this.handleNullDataPoints(o,Oe,h,le,c),this._handleMarkersAndLabels({type:i,pointsPos:Oe,i:h,j:le,realIndex:c,isRangeStart:P})}return{yArrj:_,xArrj:R,pathFromArea:H,areaPaths:N,pathFromLine:Y,linePaths:v,linePath:O,areaPath:V}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.type,s=e.pointsPos,a=e.isRangeStart,i=e.i,o=e.j,l=e.realIndex,c=this.w,u=new ah(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,o,{realIndex:l,pointsPos:s,zRatio:this.zRatio,elParent:this.elPointsMain});else{c.globals.series[i].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var h=this.markers.plotChartMarkers({pointsPos:s,seriesIndex:l,j:o+1});h!==null&&this.elPointsMain.add(h)}var f=u.drawDataLabel({type:t,isRangeStart:a,pos:s,i:l,j:o+1});f!==null&&this.elDataLabelsWrap.add(f)}},{key:"_createPaths",value:function(e){var t=e.type,s=e.series,a=e.i;e.realIndex;var i,o=e.j,l=e.x,c=e.y,u=e.xArrj,h=e.yArrj,f=e.y2,g=e.y2Arrj,x=e.pX,y=e.pY,b=e.pathState,v=e.segmentStartX,N=e.linePath,k=e.areaPath,A=e.linePaths,R=e.areaPaths,_=e.curve,I=e.isRangeStart,P=new Be(this.ctx),T=this.areaBottomY,D=t==="rangeArea",L=t==="rangeArea"&&I;switch(_){case"monotoneCubic":var F=I?h:g;switch(b){case 0:if(F[o+1]===null)break;b=1;case 1:if(!(D?u.length===s[a].length:o===s[a].length-2))break;case 2:var z=I?u:u.slice().reverse(),O=I?F:F.slice().reverse(),V=(i=O,z.map(function(ue,Oe){return[ue,i[Oe]]}).filter(function(ue){return ue[1]!==null})),Y=V.length>1?kde(V):V,H=[];D&&(L?R=V:H=R.reverse());var $=0,X=0;if(function(ue,Oe){for(var Pe=function(Ve){var ce=[],ke=0;return Ve.forEach(function(Qe){Qe!==null?ke++:ke>0&&(ce.push(ke),ke=0)}),ke>0&&ce.push(ke),ce}(ue),Ie=[],ie=0,ze=0;ie<Pe.length;ze+=Pe[ie++])Ie[ie]=Sde(Oe,ze,ze+Pe[ie]);return Ie}(O,Y).forEach(function(ue){$++;var Oe=function(ie){for(var ze="",Ve=0;Ve<ie.length;Ve++){var ce=ie[Ve],ke=ce.length;ke>4?(ze+="C".concat(ce[0],", ").concat(ce[1]),ze+=", ".concat(ce[2],", ").concat(ce[3]),ze+=", ".concat(ce[4],", ").concat(ce[5])):ke>2&&(ze+="S".concat(ce[0],", ").concat(ce[1]),ze+=", ".concat(ce[2],", ").concat(ce[3]))}return ze}(ue),Pe=X,Ie=(X+=ue.length)-1;L?N=P.move(V[Pe][0],V[Pe][1])+Oe:D?N=P.move(H[Pe][0],H[Pe][1])+P.line(V[Pe][0],V[Pe][1])+Oe+P.line(H[Ie][0],H[Ie][1]):(N=P.move(V[Pe][0],V[Pe][1])+Oe,k=N+P.line(V[Ie][0],T)+P.line(V[Pe][0],T)+"z",R.push(k)),A.push(N)}),D&&$>1&&!L){var G=A.slice($).reverse();A.splice($),G.forEach(function(ue){return A.push(ue)})}b=0}break;case"smooth":var B=.35*(l-x);if(s[a][o]===null)b=0;else switch(b){case 0:if(v=x,N=L?P.move(x,g[o])+P.line(x,y):P.move(x,y),k=P.move(x,y),s[a][o+1]===null||s[a][o+1]===void 0){A.push(N),R.push(k);break}if(b=1,o<s[a].length-2){var Q=P.curve(x+B,y,l-B,c,l,c);N+=Q,k+=Q;break}case 1:if(s[a][o+1]===null)N+=L?P.line(x,f):P.move(x,y),k+=P.line(x,T)+P.line(v,T)+"z",A.push(N),R.push(k),b=-1;else{var ee=P.curve(x+B,y,l-B,c,l,c);N+=ee,k+=ee,o>=s[a].length-2&&(L&&(N+=P.curve(l,c,l,c,l,f)+P.move(l,f)),k+=P.curve(l,c,l,c,l,T)+P.line(v,T)+"z",A.push(N),R.push(k),b=-1)}}x=l,y=c;break;default:var se=function(ue,Oe,Pe){var Ie=[];switch(ue){case"stepline":Ie=P.line(Oe,null,"H")+P.line(null,Pe,"V");break;case"linestep":Ie=P.line(null,Pe,"V")+P.line(Oe,null,"H");break;case"straight":Ie=P.line(Oe,Pe)}return Ie};if(s[a][o]===null)b=0;else switch(b){case 0:if(v=x,N=L?P.move(x,g[o])+P.line(x,y):P.move(x,y),k=P.move(x,y),s[a][o+1]===null||s[a][o+1]===void 0){A.push(N),R.push(k);break}if(b=1,o<s[a].length-2){var le=se(_,l,c);N+=le,k+=le;break}case 1:if(s[a][o+1]===null)N+=L?P.line(x,f):P.move(x,y),k+=P.line(x,T)+P.line(v,T)+"z",A.push(N),R.push(k),b=-1;else{var Ee=se(_,l,c);N+=Ee,k+=Ee,o>=s[a].length-2&&(L&&(N+=P.line(l,f)),k+=P.line(l,T)+P.line(v,T)+"z",A.push(N),R.push(k),b=-1)}}x=l,y=c}return{linePaths:A,areaPaths:R,pX:x,pY:y,pathState:b,segmentStartX:v,linePath:N,areaPath:k}}},{key:"handleNullDataPoints",value:function(e,t,s,a,i){var o=this.w;if(e[s][a]===null&&o.config.markers.showNullDataPoints||e[s].length===1){var l=this.strokeWidth-o.config.markers.strokeWidth/2;l>0||(l=0);var c=this.markers.plotChartMarkers({pointsPos:t,seriesIndex:i,j:a+1,pSize:l,alwaysDrawMarker:!0});c!==null&&this.elPointsMain.add(c)}}}]),r}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function r(l,c,u,h){this.xoffset=l,this.yoffset=c,this.height=h,this.width=u,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(f){var g,x=[],y=this.xoffset,b=this.yoffset,v=i(f)/this.height,N=i(f)/this.width;if(this.width>=this.height)for(g=0;g<f.length;g++)x.push([y,b,y+v,b+f[g]/v]),b+=f[g]/v;else for(g=0;g<f.length;g++)x.push([y,b,y+f[g]/N,b+N]),y+=f[g]/N;return x},this.cutArea=function(f){var g;if(this.width>=this.height){var x=f/this.height,y=this.width-x;g=new r(this.xoffset+x,this.yoffset,y,this.height)}else{var b=f/this.width,v=this.height-b;g=new r(this.xoffset,this.yoffset+b,this.width,v)}return g}}function e(l,c,u,h,f){h=h===void 0?0:h,f=f===void 0?0:f;var g=t(function(x,y){var b,v=[],N=y/i(x);for(b=0;b<x.length;b++)v[b]=x[b]*N;return v}(l,c*u),[],new r(h,f,c,u),[]);return function(x){var y,b,v=[];for(y=0;y<x.length;y++)for(b=0;b<x[y].length;b++)v.push(x[y][b]);return v}(g)}function t(l,c,u,h){var f,g,x;if(l.length!==0)return f=u.shortestEdge(),function(y,b,v){var N;if(y.length===0)return!0;(N=y.slice()).push(b);var k=s(y,v),A=s(N,v);return k>=A}(c,g=l[0],f)?(c.push(g),t(l.slice(1),c,u,h)):(x=u.cutArea(i(c),h),h.push(u.getCoordinates(c)),t(l,[],x,h)),h;h.push(u.getCoordinates(c))}function s(l,c){var u=Math.min.apply(Math,l),h=Math.max.apply(Math,l),f=i(l);return Math.max(Math.pow(c,2)*h/Math.pow(f,2),Math.pow(f,2)/(Math.pow(c,2)*u))}function a(l){return l&&l.constructor===Array}function i(l){var c,u=0;for(c=0;c<l.length;c++)u+=l[c];return u}function o(l){var c,u=0;if(a(l[0]))for(c=0;c<l.length;c++)u+=o(l[c]);else u=i(l);return u}return function l(c,u,h,f,g){f=f===void 0?0:f,g=g===void 0?0:g;var x,y,b=[],v=[];if(a(c[0])){for(y=0;y<c.length;y++)b[y]=o(c[y]);for(x=e(b,u,h,f,g),y=0;y<c.length;y++)v.push(l(c[y],x[y][2]-x[y][0],x[y][3]-x[y][1],x[y][0],x[y][1]))}else v=e(c,u,h,f,g);return v}}();var _de=function(){function r(e,t){ct(this,r),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new oF(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return dt(r,[{key:"draw",value:function(e){var t=this,s=this.w,a=new Be(this.ctx),i=new ri(this.ctx),o=a.group({class:"apexcharts-treemap"});if(s.globals.noData)return o;var l=[];return e.forEach(function(c){var u=c.map(function(h){return Math.abs(h)});l.push(u)}),this.negRange=this.helpers.checkColorRange(),s.config.series.forEach(function(c,u){c.data.forEach(function(h){Array.isArray(t.labels[u])||(t.labels[u]=[]),t.labels[u].push(h.x)})}),window.TreemapSquared.generate(l,s.globals.gridWidth,s.globals.gridHeight).forEach(function(c,u){var h=a.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:ne.escapeString(s.globals.seriesNames[u]),rel:u+1,"data:realIndex":u});if(s.config.chart.dropShadow.enabled){var f=s.config.chart.dropShadow;new ga(t.ctx).dropShadow(o,f,u)}var g=a.group({class:"apexcharts-data-labels"}),x={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0};c.forEach(function(Y,H){var $=Y[0],X=Y[1],G=Y[2],B=Y[3];x.xMin=Math.min(x.xMin,$),x.yMin=Math.min(x.yMin,X),x.xMax=Math.max(x.xMax,G),x.yMax=Math.max(x.yMax,B);var Q=t.helpers.getShadeColor(s.config.chart.type,u,H,t.negRange),ee=Q.color,se=i.fillPath({color:ee,seriesNumber:u,dataPointIndex:H}),le=a.drawRect($,X,G-$,B-X,s.config.plotOptions.treemap.borderRadius,"#fff",1,t.strokeWidth,s.config.plotOptions.treemap.useFillColorAsStroke?ee:s.globals.stroke.colors[u]);le.attr({cx:$,cy:X,index:u,i:u,j:H,width:G-$,height:B-X,fill:se}),le.node.classList.add("apexcharts-treemap-rect"),t.helpers.addListeners(le);var Ee={x:$+(G-$)/2,y:X+(B-X)/2,width:0,height:0},ue={x:$,y:X,width:G-$,height:B-X};if(s.config.chart.animations.enabled&&!s.globals.dataChanged){var Oe=1;s.globals.resized||(Oe=s.config.chart.animations.speed),t.animateTreemap(le,Ee,ue,Oe)}if(s.globals.dataChanged){var Pe=1;t.dynamicAnim.enabled&&s.globals.shouldAnimate&&(Pe=t.dynamicAnim.speed,s.globals.previousPaths[u]&&s.globals.previousPaths[u][H]&&s.globals.previousPaths[u][H].rect&&(Ee=s.globals.previousPaths[u][H].rect),t.animateTreemap(le,Ee,ue,Pe))}var Ie=t.getFontSize(Y),ie=s.config.dataLabels.formatter(t.labels[u][H],{value:s.globals.series[u][H],seriesIndex:u,dataPointIndex:H,w:s});s.config.plotOptions.treemap.dataLabels.format==="truncate"&&(Ie=parseInt(s.config.dataLabels.style.fontSize,10),ie=t.truncateLabels(ie,Ie,$,X,G,B));var ze=null;s.globals.series[u][H]&&(ze=t.helpers.calculateDataLabels({text:ie,x:($+G)/2,y:(X+B)/2+t.strokeWidth/2+Ie/3,i:u,j:H,colorProps:Q,fontSize:Ie,series:e})),s.config.dataLabels.enabled&&ze&&t.rotateToFitLabel(ze,Ie,ie,$,X,G,B),h.add(le),ze!==null&&h.add(ze)});var y=s.config.plotOptions.treemap.seriesTitle;if(s.config.series.length>1&&y&&y.show){var b=s.config.series[u].name||"";if(b&&x.xMin<1/0&&x.yMin<1/0){var v=y.offsetX,N=y.offsetY,k=y.borderColor,A=y.borderWidth,R=y.borderRadius,_=y.style,I=_.color||s.config.chart.foreColor,P={left:_.padding.left,right:_.padding.right,top:_.padding.top,bottom:_.padding.bottom},T=a.getTextRects(b,_.fontSize,_.fontFamily),D=T.width+P.left+P.right,L=T.height+P.top+P.bottom,F=x.xMin+(v||0),z=x.yMin+(N||0),O=a.drawRect(F,z,D,L,R,_.background,1,A,k),V=a.drawText({x:F+P.left,y:z+P.top+.75*T.height,text:b,fontSize:_.fontSize,fontFamily:_.fontFamily,fontWeight:_.fontWeight,foreColor:I,cssClass:_.cssClass||""});h.add(O),h.add(V)}}h.add(g),o.add(h)}),o}},{key:"getFontSize",value:function(e){var t=this.w,s=function a(i){var o,l=0;if(Array.isArray(i[0]))for(o=0;o<i.length;o++)l+=a(i[o]);else for(o=0;o<i.length;o++)l+=i[o].length;return l}(this.labels)/function a(i){var o,l=0;if(Array.isArray(i[0]))for(o=0;o<i.length;o++)l+=a(i[o]);else for(o=0;o<i.length;o++)l+=1;return l}(this.labels);return function(a,i){var o=a*i,l=Math.pow(o,.5);return Math.min(l/s,parseInt(t.config.dataLabels.style.fontSize,10))}(e[2]-e[0],e[3]-e[1])}},{key:"rotateToFitLabel",value:function(e,t,s,a,i,o,l){var c=new Be(this.ctx),u=c.getTextRects(s,t);if(u.width+this.w.config.stroke.width+5>o-a&&u.width<=l-i){var h=c.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(h.x," ").concat(h.y,") translate(").concat(u.height/3,")"))}}},{key:"truncateLabels",value:function(e,t,s,a,i,o){var l=new Be(this.ctx),c=l.getTextRects(e,t).width+this.w.config.stroke.width+5>i-s&&o-a>i-s?o-a:i-s,u=l.getTextBasedOnMaxWidth({text:e,maxWidth:c,fontSize:t});return e.length!==u.length&&c/t<5?"":u}},{key:"animateTreemap",value:function(e,t,s,a){var i=new Ah(this.ctx);i.animateRect(e,t,s,a,function(){i.animationCompleted(e)})}}]),r}(),dF=86400,Ade=10/dF,Cde=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return dt(r,[{key:"calculateTimeScaleTicks",value:function(e,t){var s=this,a=this.w;if(a.globals.allSeriesCollapsed)return a.globals.labels=[],a.globals.timescaleLabels=[],[];var i=new ma(this.ctx),o=(t-e)/864e5;this.determineInterval(o),a.globals.disableZoomIn=!1,a.globals.disableZoomOut=!1,o<Ade?a.globals.disableZoomIn=!0:o>5e4&&(a.globals.disableZoomOut=!0);var l=i.getTimeUnitsfromTimestamp(e,t,this.utc),c=a.globals.gridWidth/o,u=c/24,h=u/60,f=h/60,g=Math.floor(24*o),x=Math.floor(1440*o),y=Math.floor(o*dF),b=Math.floor(o),v=Math.floor(o/30),N=Math.floor(o/365),k={minMillisecond:l.minMillisecond,minSecond:l.minSecond,minMinute:l.minMinute,minHour:l.minHour,minDate:l.minDate,minMonth:l.minMonth,minYear:l.minYear},A={firstVal:k,currentMillisecond:k.minMillisecond,currentSecond:k.minSecond,currentMinute:k.minMinute,currentHour:k.minHour,currentMonthDate:k.minDate,currentDate:k.minDate,currentMonth:k.minMonth,currentYear:k.minYear,daysWidthOnXAxis:c,hoursWidthOnXAxis:u,minutesWidthOnXAxis:h,secondsWidthOnXAxis:f,numberOfSeconds:y,numberOfMinutes:x,numberOfHours:g,numberOfDays:b,numberOfMonths:v,numberOfYears:N};switch(this.tickInterval){case"years":this.generateYearScale(A);break;case"months":case"half_year":this.generateMonthScale(A);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(A);break;case"hours":this.generateHourScale(A);break;case"minutes_fives":case"minutes":this.generateMinuteScale(A);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(A)}var R=this.timeScaleArray.map(function(_){var I={position:_.position,unit:_.unit,year:_.year,day:_.day?_.day:1,hour:_.hour?_.hour:0,month:_.month+1};return _.unit==="month"?et(et({},I),{},{day:1,value:_.value+1}):_.unit==="day"||_.unit==="hour"?et(et({},I),{},{value:_.value}):_.unit==="minute"?et(et({},I),{},{value:_.value,minute:_.value}):_.unit==="second"?et(et({},I),{},{value:_.value,minute:_.minute,second:_.second}):_});return R.filter(function(_){var I=1,P=Math.ceil(a.globals.gridWidth/120),T=_.value;a.config.xaxis.tickAmount!==void 0&&(P=a.config.xaxis.tickAmount),R.length>P&&(I=Math.floor(R.length/P));var D=!1,L=!1;switch(s.tickInterval){case"years":_.unit==="year"&&(D=!0);break;case"half_year":I=7,_.unit==="year"&&(D=!0);break;case"months":I=1,_.unit==="year"&&(D=!0);break;case"months_fortnight":I=15,_.unit!=="year"&&_.unit!=="month"||(D=!0),T===30&&(L=!0);break;case"months_days":I=10,_.unit==="month"&&(D=!0),T===30&&(L=!0);break;case"week_days":I=8,_.unit==="month"&&(D=!0);break;case"days":I=1,_.unit==="month"&&(D=!0);break;case"hours":_.unit==="day"&&(D=!0);break;case"minutes_fives":case"seconds_fives":T%5!=0&&(L=!0);break;case"seconds_tens":T%10!=0&&(L=!0)}if(s.tickInterval==="hours"||s.tickInterval==="minutes_fives"||s.tickInterval==="seconds_tens"||s.tickInterval==="seconds_fives"){if(!L)return!0}else if((T%I==0||D)&&!L)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var s=this.w,a=this.formatDates(e),i=this.removeOverlappingTS(a);s.globals.timescaleLabels=i.slice(),new hb(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,s=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case s>15:this.tickInterval="minutes_fives";break;case s>5:this.tickInterval="minutes";break;case s>1:this.tickInterval="seconds_tens";break;case 60*s>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,s=e.currentMonth,a=e.currentYear,i=e.daysWidthOnXAxis,o=e.numberOfYears,l=t.minYear,c=0,u=new ma(this.ctx),h="year";if(t.minDate>1||t.minMonth>0){var f=u.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);c=(u.determineDaysOfYear(t.minYear)-f+1)*i,l=t.minYear+1,this.timeScaleArray.push({position:c,value:l,unit:h,year:l,month:ne.monthMod(s+1)})}else t.minDate===1&&t.minMonth===0&&this.timeScaleArray.push({position:c,value:l,unit:h,year:a,month:ne.monthMod(s+1)});for(var g=l,x=c,y=0;y<o;y++)g++,x=u.determineDaysOfYear(g-1)*i+x,this.timeScaleArray.push({position:x,value:g,unit:h,year:g,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,s=e.currentMonthDate,a=e.currentMonth,i=e.currentYear,o=e.daysWidthOnXAxis,l=e.numberOfMonths,c=a,u=0,h=new ma(this.ctx),f="month",g=0;if(t.minDate>1){u=(h.determineDaysOfMonths(a+1,t.minYear)-s+1)*o,c=ne.monthMod(a+1);var x=i+g,y=ne.monthMod(c),b=c;c===0&&(f="year",b=x,y=1,x+=g+=1),this.timeScaleArray.push({position:u,value:b,unit:f,year:x,month:y})}else this.timeScaleArray.push({position:u,value:c,unit:f,year:i,month:ne.monthMod(a)});for(var v=c+1,N=u,k=0,A=1;k<l;k++,A++){(v=ne.monthMod(v))===0?(f="year",g+=1):f="month";var R=this._getYear(i,v,g);N=h.determineDaysOfMonths(v,R)*o+N;var _=v===0?R:v;this.timeScaleArray.push({position:N,value:_,unit:f,year:R,month:v===0?1:v}),v++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,s=e.currentMonth,a=e.currentYear,i=e.hoursWidthOnXAxis,o=e.numberOfDays,l=new ma(this.ctx),c="day",u=t.minDate+1,h=u,f=function(A,R,_){return A>l.determineDaysOfMonths(R+1,_)&&(h=1,c="month",x=R+=1),R},g=(24-t.minHour)*i,x=u,y=f(h,s,a);t.minHour===0&&t.minDate===1?(g=0,x=ne.monthMod(t.minMonth),c="month",h=t.minDate):t.minDate!==1&&t.minHour===0&&t.minMinute===0&&(g=0,u=t.minDate,x=u,y=f(h=u,s,a),x!==1&&(c="day")),this.timeScaleArray.push({position:g,value:x,unit:c,year:this._getYear(a,y,0),month:ne.monthMod(y),day:h});for(var b=g,v=0;v<o;v++){c="day",y=f(h+=1,y,this._getYear(a,y,0));var N=this._getYear(a,y,0);b=24*i+b;var k=h===1?ne.monthMod(y):h;this.timeScaleArray.push({position:b,value:k,unit:c,year:N,month:ne.monthMod(y),day:k})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,s=e.currentDate,a=e.currentMonth,i=e.currentYear,o=e.minutesWidthOnXAxis,l=e.numberOfHours,c=new ma(this.ctx),u="hour",h=function(I,P){return I>c.determineDaysOfMonths(P+1,i)&&(v=1,P+=1),{month:P,date:v}},f=function(I,P){return I>c.determineDaysOfMonths(P+1,i)?P+=1:P},g=60-(t.minMinute+t.minSecond/60),x=g*o,y=t.minHour+1,b=y;g===60&&(x=0,b=y=t.minHour);var v=s;b>=24&&(b=0,u="day",y=v+=1);var N=h(v,a).month;N=f(v,N),y>31&&(y=v=1),this.timeScaleArray.push({position:x,value:y,unit:u,day:v,hour:b,year:i,month:ne.monthMod(N)}),b++;for(var k=x,A=0;A<l;A++){u="hour",b>=24&&(b=0,u="day",N=h(v+=1,N).month,N=f(v,N));var R=this._getYear(i,N,0);k=60*o+k;var _=b===0?v:b;this.timeScaleArray.push({position:k,value:_,unit:u,hour:b,day:v,year:R,month:ne.monthMod(N)}),b++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,s=e.currentSecond,a=e.currentMinute,i=e.currentHour,o=e.currentDate,l=e.currentMonth,c=e.currentYear,u=e.minutesWidthOnXAxis,h=e.secondsWidthOnXAxis,f=e.numberOfMinutes,g=a+1,x=o,y=l,b=c,v=i,N=(60-s-t/1e3)*h,k=0;k<f;k++)g>=60&&(g=0,(v+=1)===24&&(v=0)),this.timeScaleArray.push({position:N,value:g,unit:"minute",hour:v,minute:g,day:x,year:this._getYear(b,y,0),month:ne.monthMod(y)}),N+=u,g++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,s=e.currentSecond,a=e.currentMinute,i=e.currentHour,o=e.currentDate,l=e.currentMonth,c=e.currentYear,u=e.secondsWidthOnXAxis,h=e.numberOfSeconds,f=s+1,g=a,x=o,y=l,b=c,v=i,N=(1e3-t)/1e3*u,k=0;k<h;k++)f>=60&&(f=0,++g>=60&&(g=0,++v===24&&(v=0))),this.timeScaleArray.push({position:N,value:f,unit:"second",hour:v,minute:g,second:f,day:x,year:this._getYear(b,y,0),month:ne.monthMod(y)}),N+=u,f++}},{key:"createRawDateString",value:function(e,t){var s=e.year;return e.month===0&&(e.month=1),s+="-"+("0"+e.month.toString()).slice(-2),e.unit==="day"?s+=e.unit==="day"?"-"+("0"+t).slice(-2):"-01":s+="-"+("0"+(e.day?e.day:"1")).slice(-2),e.unit==="hour"?s+=e.unit==="hour"?"T"+("0"+t).slice(-2):"T00":s+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),e.unit==="minute"?s+=":"+("0"+t).slice(-2):s+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),e.unit==="second"?s+=":"+("0"+t).slice(-2):s+=":00",this.utc&&(s+=".000Z"),s}},{key:"formatDates",value:function(e){var t=this,s=this.w;return e.map(function(a){var i=a.value.toString(),o=new ma(t.ctx),l=t.createRawDateString(a,i),c=o.getDate(o.parseDate(l));if(t.utc||(c=o.getDate(o.parseDateWithTimezone(l))),s.config.xaxis.labels.format===void 0){var u="dd MMM",h=s.config.xaxis.labels.datetimeFormatter;a.unit==="year"&&(u=h.year),a.unit==="month"&&(u=h.month),a.unit==="day"&&(u=h.day),a.unit==="hour"&&(u=h.hour),a.unit==="minute"&&(u=h.minute),a.unit==="second"&&(u=h.second),i=o.formatDate(c,u)}else i=o.formatDate(c,s.config.xaxis.labels.format);return{dateString:l,position:a.position,value:i,unit:a.unit,year:a.year,month:a.month}})}},{key:"removeOverlappingTS",value:function(e){var t,s=this,a=new Be(this.ctx),i=!1;e.length>0&&e[0].value&&e.every(function(c){return c.value.length===e[0].value.length})&&(i=!0,t=a.getTextRects(e[0].value).width);var o=0,l=e.map(function(c,u){if(u>0&&s.w.config.xaxis.labels.hideOverlappingLabels){var h=i?t:a.getTextRects(e[o].value).width,f=e[o].position;return c.position>f+h+10?(o=u,c):null}return c});return l=l.filter(function(c){return c!==null})}},{key:"_getYear",value:function(e,t,s){return e+Math.floor(t/12)+s}}]),r}(),Ede=function(){function r(e,t){ct(this,r),this.ctx=t,this.w=t.w,this.el=e}return dt(r,[{key:"setupElements",value:function(){var e=this.w,t=e.globals,s=e.config,a=s.chart.type;t.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(a),t.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(a),t.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(a)&&s.plotOptions.bar.horizontal,t.chartClass=".apexcharts".concat(t.chartID),t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),Be.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas ".concat(t.chartClass.substring(1))}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=window.SVG().addTo(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(s.chart.offsetX,", ").concat(s.chart.offsetY,")")}),t.dom.Paper.node.style.background=s.theme.mode!=="dark"||s.chart.background?s.theme.mode!=="light"||s.chart.background?s.chart.background:"#fff":"#343A3F",this.setSVGDimensions(),t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject"),Be.setAttrs(t.dom.elLegendForeign,{x:0,y:0,width:t.svgWidth,height:t.svgHeight}),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.node.appendChild(t.dom.elLegendForeign),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var s=this.w,a=this.ctx,i=s.config,o=s.globals,l={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},bar:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},c=i.chart.type||"line",u=null,h=0;o.series.forEach(function(I,P){var T,D,L=((T=e[P])===null||T===void 0?void 0:T.type)==="column"?"bar":((D=e[P])===null||D===void 0?void 0:D.type)||(c==="column"?"bar":c);l[L]?(L==="rangeArea"?(l[L].series.push(o.seriesRangeStart[P]),l[L].seriesRangeEnd.push(o.seriesRangeEnd[P])):l[L].series.push(I),l[L].i.push(P),L==="bar"&&(s.globals.columnSeries=l.bar)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(L)?u=L:console.warn("You have specified an unrecognized series type (".concat(L,").")),c!==L&&L!=="scatter"&&h++}),h>0&&(u&&console.warn("Chart or series type ".concat(u," cannot appear with other chart or series types.")),l.bar.series.length>0&&i.plotOptions.bar.horizontal&&(h-=l.bar.series.length,l.bar={series:[],i:[]},s.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),o.comboCharts||(o.comboCharts=h>0);var f=new P1(a,t),g=new E1(a,t);a.pie=new cF(a);var x=new vde(a);a.rangeBar=new wde(a,t);var y=new yde(a),b=[];if(o.comboCharts){var v,N,k=new wr(a);if(l.area.series.length>0&&(v=b).push.apply(v,Gr(k.drawSeriesByGroup(l.area,o.areaGroups,"area",f))),l.bar.series.length>0)if(i.chart.stacked){var A=new u4(a,t);b.push(A.draw(l.bar.series,l.bar.i))}else a.bar=new nh(a,t),b.push(a.bar.draw(l.bar.series,l.bar.i));if(l.rangeArea.series.length>0&&b.push(f.draw(l.rangeArea.series,"rangeArea",l.rangeArea.i,l.rangeArea.seriesRangeEnd)),l.line.series.length>0&&(N=b).push.apply(N,Gr(k.drawSeriesByGroup(l.line,o.lineGroups,"line",f))),l.candlestick.series.length>0&&b.push(g.draw(l.candlestick.series,"candlestick",l.candlestick.i)),l.boxPlot.series.length>0&&b.push(g.draw(l.boxPlot.series,"boxPlot",l.boxPlot.i)),l.rangeBar.series.length>0&&b.push(a.rangeBar.draw(l.rangeBar.series,l.rangeBar.i)),l.scatter.series.length>0){var R=new P1(a,t,!0);b.push(R.draw(l.scatter.series,"scatter",l.scatter.i))}if(l.bubble.series.length>0){var _=new P1(a,t,!0);b.push(_.draw(l.bubble.series,"bubble",l.bubble.i))}}else switch(i.chart.type){case"line":b=f.draw(o.series,"line");break;case"area":b=f.draw(o.series,"area");break;case"bar":i.chart.stacked?b=new u4(a,t).draw(o.series):(a.bar=new nh(a,t),b=a.bar.draw(o.series));break;case"candlestick":b=new E1(a,t).draw(o.series,"candlestick");break;case"boxPlot":b=new E1(a,t).draw(o.series,i.chart.type);break;case"rangeBar":b=a.rangeBar.draw(o.series);break;case"rangeArea":b=f.draw(o.seriesRangeStart,"rangeArea",void 0,o.seriesRangeEnd);break;case"heatmap":b=new bde(a,t).draw(o.series);break;case"treemap":b=new _de(a,t).draw(o.series);break;case"pie":case"donut":case"polarArea":b=a.pie.draw(o.series);break;case"radialBar":b=x.draw(o.series);break;case"radar":b=y.draw(o.series);break;default:b=f.draw(o.series)}return b}},{key:"setSVGDimensions",value:function(){var e=this.w,t=e.globals,s=e.config;s.chart.width=s.chart.width||"100%",s.chart.height=s.chart.height||"auto",t.svgWidth=s.chart.width,t.svgHeight=s.chart.height;var a=ne.getDimensions(this.el),i=s.chart.width.toString().split(/[0-9]+/g).pop();i==="%"?ne.isNumber(a[0])&&(a[0].width===0&&(a=ne.getDimensions(this.el.parentNode)),t.svgWidth=a[0]*parseInt(s.chart.width,10)/100):i!=="px"&&i!==""||(t.svgWidth=parseInt(s.chart.width,10));var o=String(s.chart.height).toString().split(/[0-9]+/g).pop();if(t.svgHeight!=="auto"&&t.svgHeight!=="")if(o==="%"){var l=ne.getDimensions(this.el.parentNode);t.svgHeight=l[1]*parseInt(s.chart.height,10)/100}else t.svgHeight=parseInt(s.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;if(t.svgWidth=Math.max(t.svgWidth,0),t.svgHeight=Math.max(t.svgHeight,0),Be.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),o!=="%"){var c=s.chart.sparkline.enabled?0:t.axisCharts?s.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(t.svgHeight+c,"px")}t.dom.elWrap.style.width="".concat(t.svgWidth,"px"),t.dom.elWrap.style.height="".concat(t.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,s=e.translateX;Be.setAttrs(e.dom.elGraphical.node,{transform:"translate(".concat(s,", ").concat(t,")")})}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,s=0,a=e.config.chart.sparkline.enabled?1:15;a+=e.config.grid.padding.bottom,["top","bottom"].includes(e.config.legend.position)&&e.config.legend.show&&!e.config.legend.floating&&(s=new rF(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var i=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),o=2.05*e.globals.radialSize;if(i&&!e.config.chart.sparkline.enabled&&e.config.plotOptions.radialBar.startAngle!==0){var l=ne.getBoundingClientRect(i);o=l.bottom;var c=l.bottom-l.top;o=Math.max(2.05*e.globals.radialSize,c)}var u=Math.ceil(o+t.translateY+s+a);t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",u),e.config.chart.height&&String(e.config.chart.height).includes("%")||(t.dom.elWrap.style.height="".concat(u,"px"),Be.setAttrs(t.dom.Paper.node,{height:u}),t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(u,"px"))}},{key:"coreCalculations",value:function(){new hj(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map(function(){return[]})},s=new ZL,a=this.w.globals,i={dataWasParsed:a.dataWasParsed,originalSeries:a.originalSeries};s.initGlobalVars(a),a.seriesXvalues=t(),a.seriesYvalues=t(),i.dataWasParsed&&(a.dataWasParsed=i.dataWasParsed,a.originalSeries=i.originalSeries)}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var e=this.w,t=null;if(e.globals.axisCharts){if(e.config.xaxis.crosshairs.position==="back"&&new mj(this.ctx).drawXCrosshairs(),e.config.yaxis[0].crosshairs.position==="back"&&new mj(this.ctx).drawYCrosshairs(),e.config.xaxis.type==="datetime"&&e.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new Cde(this.ctx);var s=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?s=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(s=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(s)}t=new wr(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.ctx,s=this.w;if(s.config.chart.brush.enabled&&typeof s.config.chart.events.selection!="function"){var a=Array.isArray(s.config.chart.brush.targets)?s.config.chart.brush.targets:[s.config.chart.brush.target];a.forEach(function(i){var o=t.constructor.getChartByID(i);o.w.globals.brushSource=e.ctx,typeof o.w.config.chart.events.zoomed!="function"&&(o.w.config.chart.events.zoomed=function(){return e.updateSourceChart(o)}),typeof o.w.config.chart.events.scrolled!="function"&&(o.w.config.chart.events.scrolled=function(){return e.updateSourceChart(o)})}),s.config.chart.events.selection=function(i,o){a.forEach(function(l){t.constructor.getChartByID(l).ctx.updateHelpers._updateOptions({xaxis:{min:o.xaxis.min,max:o.xaxis.max}},!1,!1,!1,!1)})}}}}]),r}(),Tde=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"_updateOptions",value:function(e){var t=this,s=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(l){var c=[t.ctx];i&&(c=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(c=[t.ctx],t.ctx.w.globals.isExecCalled=!1),c.forEach(function(u,h){var f=u.w;if(f.globals.shouldAnimate=a,s||(f.globals.resized=!0,f.globals.dataChanged=!0,a&&u.series.getPreviousPaths()),e&&Da(e)==="object"&&(u.config=new ig(e),e=wr.extendArrayProps(u.config,e,f),u.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,f.config=ne.extend(f.config,e),o&&(f.globals.lastXAxis=e.xaxis?ne.clone(e.xaxis):[],f.globals.lastYAxis=e.yaxis?ne.clone(e.yaxis):[],f.globals.initialConfig=ne.extend({},f.config),f.globals.initialSeries=ne.clone(f.config.series),e.series))){for(var g=0;g<f.globals.collapsedSeriesIndices.length;g++){var x=f.config.series[f.globals.collapsedSeriesIndices[g]];f.globals.collapsedSeries[g].data=f.globals.axisCharts?x.data.slice():x}for(var y=0;y<f.globals.ancillaryCollapsedSeriesIndices.length;y++){var b=f.config.series[f.globals.ancillaryCollapsedSeriesIndices[y]];f.globals.ancillaryCollapsedSeries[y].data=f.globals.axisCharts?b.data.slice():b}u.series.emptyCollapsedSeries(f.config.series)}return u.update(e).then(function(){h===c.length-1&&l(u)})})})}},{key:"_updateSeries",value:function(e,t){var s=this,a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(i){var o=s.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&s.ctx.series.getPreviousPaths(),s.ctx.data.resetParsingFlags(),s.ctx.data.parseData(e),a&&(o.globals.initialConfig.series=ne.clone(o.config.series),o.globals.initialSeries=ne.clone(o.config.series)),s.ctx.update().then(function(){i(s.ctx)})})}},{key:"_extendSeries",value:function(e,t){var s=this.w,a=s.config.series[t];return et(et({},s.config.series[t]),{},{name:e.name?e.name:a?.name,color:e.color?e.color:a?.color,type:e.type?e.type:a?.type,group:e.group?e.group:a?.group,hidden:e.hidden!==void 0?e.hidden:a?.hidden,data:e.data?e.data:a?.data,zIndex:e.zIndex!==void 0?e.zIndex:t})}},{key:"toggleDataPointSelection",value:function(e,t){var s=this.w,a=null,i=".apexcharts-series[data\\:realIndex='".concat(e,"']");return s.globals.axisCharts?a=s.globals.dom.Paper.findOne("".concat(i," path[j='").concat(t,"'], ").concat(i," circle[j='").concat(t,"'], ").concat(i," rect[j='").concat(t,"']")):t===void 0&&(a=s.globals.dom.Paper.findOne("".concat(i," path[j='").concat(e,"']")),s.config.chart.type!=="pie"&&s.config.chart.type!=="polarArea"&&s.config.chart.type!=="donut"||this.ctx.pie.pieClicked(e)),a?(new Be(this.ctx).pathMouseDown(a,null),a.node?a.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach(function(a){e.xaxis[a]!==void 0&&(t.config.xaxis[a]=e.xaxis[a],t.globals.lastXAxis[a]=e.xaxis[a])}),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var s=new ng(e);e=s.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&e.chart.stackType==="100%"&&(Array.isArray(e.yaxis)?e.yaxis.forEach(function(t,s){e.yaxis[s].min=0,e.yaxis[s].max=100}):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,s=this.w,a=s.globals.lastXAxis,i=s.globals.lastYAxis;e&&e.xaxis&&(a=e.xaxis),e&&e.yaxis&&(i=e.yaxis),s.config.xaxis.min=a.min,s.config.xaxis.max=a.max;var o=function(l){i[l]!==void 0&&(s.config.yaxis[l].min=i[l].min,s.config.yaxis[l].max=i[l].max)};s.config.yaxis.map(function(l,c){s.globals.zoomed||i[c]!==void 0?o(c):t.ctx.opts.yaxis[c]!==void 0&&(l.min=t.ctx.opts.yaxis[c].min,l.max=t.ctx.opts.yaxis[c].max)})}}]),r}();(function(){function r(){for(var i=arguments.length>0&&arguments[0]!==f?arguments[0]:[],o=arguments.length>1?arguments[1]:f,l=arguments.length>2?arguments[2]:f,c=arguments.length>3?arguments[3]:f,u=arguments.length>4?arguments[4]:f,h=arguments.length>5?arguments[5]:f,f=arguments.length>6?arguments[6]:f,g=i.slice(o,l||f),x=c.slice(u,h||f),y=0,b={pos:[0,0],start:[0,0]},v={pos:[0,0],start:[0,0]};g[y]=e.call(b,g[y]),x[y]=e.call(v,x[y]),g[y][0]!=x[y][0]||g[y][0]=="M"||g[y][0]=="A"&&(g[y][4]!=x[y][4]||g[y][5]!=x[y][5])?(Array.prototype.splice.apply(g,[y,1].concat(s.call(b,g[y]))),Array.prototype.splice.apply(x,[y,1].concat(s.call(v,x[y])))):(g[y]=t.call(b,g[y]),x[y]=t.call(v,x[y])),!(++y==g.length&&y==x.length);)y==g.length&&g.push(["C",b.pos[0],b.pos[1],b.pos[0],b.pos[1],b.pos[0],b.pos[1]]),y==x.length&&x.push(["C",v.pos[0],v.pos[1],v.pos[0],v.pos[1],v.pos[0],v.pos[1]]);return{start:g,dest:x}}function e(i){switch(i[0]){case"z":case"Z":i[0]="L",i[1]=this.start[0],i[2]=this.start[1];break;case"H":i[0]="L",i[2]=this.pos[1];break;case"V":i[0]="L",i[2]=i[1],i[1]=this.pos[0];break;case"T":i[0]="Q",i[3]=i[1],i[4]=i[2],i[1]=this.reflection[1],i[2]=this.reflection[0];break;case"S":i[0]="C",i[6]=i[4],i[5]=i[3],i[4]=i[2],i[3]=i[1],i[2]=this.reflection[1],i[1]=this.reflection[0]}return i}function t(i){var o=i.length;return this.pos=[i[o-2],i[o-1]],"SCQT".indexOf(i[0])!=-1&&(this.reflection=[2*this.pos[0]-i[o-4],2*this.pos[1]-i[o-3]]),i}function s(i){var o=[i];switch(i[0]){case"M":return this.pos=this.start=[i[1],i[2]],o;case"L":i[5]=i[3]=i[1],i[6]=i[4]=i[2],i[1]=this.pos[0],i[2]=this.pos[1];break;case"Q":i[6]=i[4],i[5]=i[3],i[4]=1*i[4]/3+2*i[2]/3,i[3]=1*i[3]/3+2*i[1]/3,i[2]=1*this.pos[1]/3+2*i[2]/3,i[1]=1*this.pos[0]/3+2*i[1]/3;break;case"A":o=function(l,c){var u,h,f,g,x,y,b,v,N,k,A,R,_,I,P,T,D,L,F,z,O,V,Y,H,$,X,G=Math.abs(c[1]),B=Math.abs(c[2]),Q=c[3]%360,ee=c[4],se=c[5],le=c[6],Ee=c[7],ue=new Cs(l),Oe=new Cs(le,Ee),Pe=[];if(G===0||B===0||ue.x===Oe.x&&ue.y===Oe.y)return[["C",ue.x,ue.y,Oe.x,Oe.y,Oe.x,Oe.y]];for(u=new Cs((ue.x-Oe.x)/2,(ue.y-Oe.y)/2).transform(new jt().rotate(Q)),h=u.x*u.x/(G*G)+u.y*u.y/(B*B),h>1&&(G*=h=Math.sqrt(h),B*=h),f=new jt().rotate(Q).scale(1/G,1/B).rotate(-Q),ue=ue.transform(f),Oe=Oe.transform(f),g=[Oe.x-ue.x,Oe.y-ue.y],y=g[0]*g[0]+g[1]*g[1],x=Math.sqrt(y),g[0]/=x,g[1]/=x,b=y<4?Math.sqrt(1-y/4):0,ee===se&&(b*=-1),v=new Cs((Oe.x+ue.x)/2+b*-g[1],(Oe.y+ue.y)/2+b*g[0]),N=new Cs(ue.x-v.x,ue.y-v.y),k=new Cs(Oe.x-v.x,Oe.y-v.y),A=Math.acos(N.x/Math.sqrt(N.x*N.x+N.y*N.y)),N.y<0&&(A*=-1),R=Math.acos(k.x/Math.sqrt(k.x*k.x+k.y*k.y)),k.y<0&&(R*=-1),se&&A>R&&(R+=2*Math.PI),!se&&A<R&&(R-=2*Math.PI),I=Math.ceil(2*Math.abs(A-R)/Math.PI),T=[],D=A,_=(R-A)/I,P=4*Math.tan(_/4)/3,O=0;O<=I;O++)F=Math.cos(D),L=Math.sin(D),z=new Cs(v.x+F,v.y+L),T[O]=[new Cs(z.x+P*L,z.y-P*F),z,new Cs(z.x-P*L,z.y+P*F)],D+=_;for(T[0][0]=T[0][1].clone(),T[T.length-1][2]=T[T.length-1][1].clone(),f=new jt().rotate(Q).scale(G,B).rotate(-Q),O=0,V=T.length;O<V;O++)T[O][0]=T[O][0].transform(f),T[O][1]=T[O][1].transform(f),T[O][2]=T[O][2].transform(f);for(O=1,V=T.length;O<V;O++)Y=(z=T[O-1][2]).x,H=z.y,$=(z=T[O][0]).x,X=z.y,le=(z=T[O][1]).x,Ee=z.y,Pe.push(["C",Y,H,$,X,le,Ee]);return Pe}(this.pos,i),i=o[0]}return i[0]="C",this.pos=[i[5],i[6]],this.reflection=[2*i[5]-i[3],2*i[6]-i[4]],o}function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0;if(o===!1)return!1;for(var l=o,c=i.length;l<c;++l)if(i[l][0]=="M")return l;return!1}Tt(Jn,{morph:function(i,o,l,c,u){for(var h=this.parse(i),f=this.parse(o),g=0,x=0,y=!1,b=!1;g!==!1||x!==!1;){var v;y=a(h,g!==!1&&g+1),b=a(f,x!==!1&&x+1),g===!1&&(g=(v=new Jn(N.start).bbox()).height==0||v.width==0?h.push(h[0])-1:h.push(["M",v.x+v.width/2,v.y+v.height/2])-1),x===!1&&(x=(v=new Jn(N.dest).bbox()).height==0||v.width==0?f.push(f[0])-1:f.push(["M",v.x+v.width/2,v.y+v.height/2])-1);var N=r(h,g,y,f,x,b);h=h.slice(0,g).concat(N.start,y===!1?[]:h.slice(y)),f=f.slice(0,x).concat(N.dest,b===!1?[]:f.slice(b)),g=y!==!1&&g+N.start.length,x=b!==!1&&x+N.dest.length}this._array=h,this.destination=new Jn,this.destination._array=f;var k=this.fromArray(h.map(function(A,R){var _=f[R].map(function(I,P){return P===0?I:c.step(A[P],f[R][P],l,u[R],u)});return _}));return k}})})();const h4=r=>(r.changedTouches&&(r=r.changedTouches[0]),{x:r.clientX,y:r.clientY});class Pde{constructor(e){e.remember("_draggable",this),this.el=e,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(e){e?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(e){const t=!e.type.indexOf("mouse");if(t&&e.which!==1&&e.buttons!==0||this.el.dispatch("beforedrag",{event:e,handler:this}).defaultPrevented)return;e.preventDefault(),e.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(h4(e));const s=(t?"mouseup":"touchend")+".drag";_o(window,(t?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),_o(window,s,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:e,handler:this,box:this.box})}drag(e){const{box:t,lastClick:s}=this,a=this.el.point(h4(e)),i=a.x-s.x,o=a.y-s.y;if(!i&&!o)return t;const l=t.x+i,c=t.y+o;this.box=new vr(l,c,t.w,t.h),this.lastClick=a,this.el.dispatch("dragmove",{event:e,handler:this,box:this.box}).defaultPrevented||this.move(l,c)}move(e,t){this.el.type==="svg"?Tl.prototype.move.call(this.el,e,t):this.el.move(e,t)}endDrag(e){this.drag(e),this.el.fire("dragend",{event:e,handler:this,box:this.box}),Fn(window,"mousemove.drag"),Fn(window,"touchmove.drag"),Fn(window,"mouseup.drag"),Fn(window,"touchend.drag"),this.init(!0)}}/*!
* @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
* @version 4.0.1
* https://github.com/svgdotjs/svg.select.js
*
* @copyright Ulrich-Matthias Schäfer
* @license MIT
*
* BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
*/function fj(r,e,t,s=null){return function(a){a.preventDefault(),a.stopPropagation();var i=a.pageX||a.touches[0].pageX,o=a.pageY||a.touches[0].pageY;e.fire(r,{x:i,y:o,event:a,index:s,points:t})}}function gj([r,e],{a:t,b:s,c:a,d:i,e:o,f:l}){return[r*t+e*a+o,r*s+e*i+l]}Tt(xa,{draggable(r=!0){return(this.remember("_draggable")||new Pde(this)).init(r),this}});let uF=class{constructor(r){this.el=r,r.remember("_selectHandler",this),this.selection=new Tl,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=zg();this.observer=new e.MutationObserver(this.mutationHandler)}init(r){this.createHandle=r.createHandle||this.createHandleFn,this.createRot=r.createRot||this.createRotFn,this.updateHandle=r.updateHandle||this.updateHandleFn,this.updateRot=r.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(r,e){if(!r)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((r,e,t)=>{const s=this.order[e];this.createHandle.call(this,this.selection,r,e,t,s),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+s).on("mousedown.selection touchstart.selection",fj(s,this.el,this.handlePoints,e))})}createHandleFn(r){r.polyline()}updateHandleFn(r,e,t,s){const a=s.at(t-1),i=s[(t+1)%s.length],o=e,l=[o[0]-a[0],o[1]-a[1]],c=[o[0]-i[0],o[1]-i[1]],u=Math.sqrt(l[0]*l[0]+l[1]*l[1]),h=Math.sqrt(c[0]*c[0]+c[1]*c[1]),f=[l[0]/u,l[1]/u],g=[c[0]/h,c[1]/h],x=[o[0]-10*f[0],o[1]-10*f[1]],y=[o[0]-10*g[0],o[1]-10*g[1]];r.plot([x,o,y])}updateResizeHandles(){this.handlePoints.forEach((r,e,t)=>{const s=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),r,e,t,s)})}createRotFn(r){r.line(),r.circle(5)}getPoint(r){return this.handlePoints[this.order.indexOf(r)]}getPointHandle(r){return this.selection.get(this.order.indexOf(r)+1)}updateRotFn(r,e){const t=this.getPoint("t");r.get(0).plot(t[0],t[1],e[0],e[1]),r.get(1).center(e[0],e[1])}createRotationHandle(){const r=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",fj("rot",this.el,this.handlePoints));this.createRot.call(this,r)}updateRotationHandle(){const r=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(r,this.rotationPoint,this.handlePoints)}updatePoints(){const r=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(r).map(t=>gj(t,e)),this.rotationPoint=gj(this.getRotationPoint(r),e)}getHandlePoints({x:r,x2:e,y:t,y2:s,cx:a,cy:i}=this.el.bbox()){return[[r,t],[a,t],[e,t],[e,i],[e,s],[a,s],[r,s],[r,i]]}getRotationPoint({y:r,cx:e}=this.el.bbox()){return[e,r-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}};const m4=r=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let s=this.remember("_"+r.name);return s||(e.prototype instanceof uF?(s=new e(this),e=!0):s=new r(this),this.remember("_"+r.name,s)),s.active(e,t),this};/*!
* @svgdotjs/svg.resize.js - An extension for svg.js which allows to resize elements which are selected
* @version 2.0.4
* https://github.com/svgdotjs/svg.resize.js
*
* @copyright [object Object]
* @license MIT
*
* BUILT: Fri Sep 13 2024 12:43:14 GMT+0200 (Central European Summer Time)
*//*!
* @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
* @version 4.0.1
* https://github.com/svgdotjs/svg.select.js
*
* @copyright Ulrich-Matthias Schäfer
* @license MIT
*
* BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
*/function pj(r,e,t,s=null){return function(a){a.preventDefault(),a.stopPropagation();var i=a.pageX||a.touches[0].pageX,o=a.pageY||a.touches[0].pageY;e.fire(r,{x:i,y:o,event:a,index:s,points:t})}}function xj([r,e],{a:t,b:s,c:a,d:i,e:o,f:l}){return[r*t+e*a+o,r*s+e*i+l]}Tt(xa,{select:m4(uF)}),Tt([Gc,Kc,Xc],{pointSelect:m4(class{constructor(r){this.el=r,r.remember("_pointSelectHandler",this),this.selection=new Tl,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=zg();this.observer=new e.MutationObserver(this.mutationHandler)}init(r){this.createHandle=r.createHandle||this.createHandleFn,this.updateHandle=r.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(r,e){if(!r)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((r,e,t)=>{this.createHandle.call(this,this.selection,r,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",fj("point",this.el,this.points,e))})}createHandleFn(r){r.circle(5)}updateHandleFn(r,e){r.center(e[0],e[1])}updatePointHandles(){this.points.forEach((r,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),r,e,t)})}updatePoints(){const r=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(e=>gj(e,r))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});class hF{constructor(e){this.el=e,e.remember("_selectHandler",this),this.selection=new Tl,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const t=zg();this.observer=new t.MutationObserver(this.mutationHandler)}init(e){this.createHandle=e.createHandle||this.createHandleFn,this.createRot=e.createRot||this.createRotFn,this.updateHandle=e.updateHandle||this.updateHandleFn,this.updateRot=e.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(e,t){if(!e)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((e,t,s)=>{const a=this.order[t];this.createHandle.call(this,this.selection,e,t,s,a),this.selection.get(t+1).addClass("svg_select_handle svg_select_handle_"+a).on("mousedown.selection touchstart.selection",pj(a,this.el,this.handlePoints,t))})}createHandleFn(e){e.polyline()}updateHandleFn(e,t,s,a){const i=a.at(s-1),o=a[(s+1)%a.length],l=t,c=[l[0]-i[0],l[1]-i[1]],u=[l[0]-o[0],l[1]-o[1]],h=Math.sqrt(c[0]*c[0]+c[1]*c[1]),f=Math.sqrt(u[0]*u[0]+u[1]*u[1]),g=[c[0]/h,c[1]/h],x=[u[0]/f,u[1]/f],y=[l[0]-10*g[0],l[1]-10*g[1]],b=[l[0]-10*x[0],l[1]-10*x[1]];e.plot([y,l,b])}updateResizeHandles(){this.handlePoints.forEach((e,t,s)=>{const a=this.order[t];this.updateHandle.call(this,this.selection.get(t+1),e,t,s,a)})}createRotFn(e){e.line(),e.circle(5)}getPoint(e){return this.handlePoints[this.order.indexOf(e)]}getPointHandle(e){return this.selection.get(this.order.indexOf(e)+1)}updateRotFn(e,t){const s=this.getPoint("t");e.get(0).plot(s[0],s[1],t[0],t[1]),e.get(1).center(t[0],t[1])}createRotationHandle(){const e=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",pj("rot",this.el,this.handlePoints));this.createRot.call(this,e)}updateRotationHandle(){const e=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(e,this.rotationPoint,this.handlePoints)}updatePoints(){const e=this.el.bbox(),t=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(e).map(s=>xj(s,t)),this.rotationPoint=xj(this.getRotationPoint(e),t)}getHandlePoints({x:e,x2:t,y:s,y2:a,cx:i,cy:o}=this.el.bbox()){return[[e,s],[i,s],[t,s],[t,o],[t,a],[i,a],[e,a],[e,o]]}getRotationPoint({y:e,cx:t}=this.el.bbox()){return[t,e-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}}const f4=r=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let s=this.remember("_"+r.name);return s||(e.prototype instanceof hF?(s=new e(this),e=!0):s=new r(this),this.remember("_"+r.name,s)),s.active(e,t),this};Tt(xa,{select:f4(hF)}),Tt([Gc,Kc,Xc],{pointSelect:f4(class{constructor(r){this.el=r,r.remember("_pointSelectHandler",this),this.selection=new Tl,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=zg();this.observer=new e.MutationObserver(this.mutationHandler)}init(r){this.createHandle=r.createHandle||this.createHandleFn,this.updateHandle=r.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(r,e){if(!r)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((r,e,t)=>{this.createHandle.call(this,this.selection,r,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",pj("point",this.el,this.points,e))})}createHandleFn(r){r.circle(5)}updateHandleFn(r,e){r.center(e[0],e[1])}updatePointHandles(){this.points.forEach((r,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),r,e,t)})}updatePoints(){const r=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(e=>xj(e,r))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});const zx=r=>(r.changedTouches&&(r=r.changedTouches[0]),{x:r.clientX,y:r.clientY}),g4=r=>{let e=1/0,t=1/0,s=-1/0,a=-1/0;for(let i=0;i<r.length;i++){const o=r[i];e=Math.min(e,o[0]),t=Math.min(t,o[1]),s=Math.max(s,o[0]),a=Math.max(a,o[1])}return new vr(e,t,s-e,a-t)};class p4{constructor(e){this.el=e,e.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(e,t){this.preserveAspectRatio=t.preserveAspectRatio??!1,this.aroundCenter=t.aroundCenter??!1,this.grid=t.grid??0,this.degree=t.degree??0,this.el.off(".resize"),e&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&(this.eventType==="rot"?this.rotate(this.lastEvent):this.eventType==="point"?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(e){this.eventType=e.type;const{event:t,index:s,points:a}=e.detail,i=!t.type.indexOf("mouse");if(i&&(t.which||t.buttons)!==1||this.el.dispatch("beforeresize",{event:e,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(zx(t)),this.index=s,this.points=a.slice();const o=(i?"mousemove":"touchmove")+".resize",l=(i?"mouseup":"touchcancel.resize touchend")+".resize";e.type==="point"?_o(window,o,this.movePoint):e.type==="rot"?_o(window,o,this.rotate):_o(window,o,this.resize),_o(window,l,this.endResize)}resize(e){this.lastEvent=e;const t=this.snapToGrid(this.el.point(zx(e)));let s=t.x-this.startPoint.x,a=t.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(s*=2,a*=2);const i=this.box.x+s,o=this.box.y+a,l=this.box.x2+s,c=this.box.y2+a;let u=new vr(this.box);if(this.eventType.includes("l")&&(u.x=Math.min(i,this.box.x2),u.x2=Math.max(i,this.box.x2)),this.eventType.includes("r")&&(u.x=Math.min(l,this.box.x),u.x2=Math.max(l,this.box.x)),this.eventType.includes("t")&&(u.y=Math.min(o,this.box.y2),u.y2=Math.max(o,this.box.y2)),this.eventType.includes("b")&&(u.y=Math.min(c,this.box.y),u.y2=Math.max(c,this.box.y)),u.width=u.x2-u.x,u.height=u.y2-u.y,this.preserveAspectRatio){const h=u.width/this.box.width,f=u.height/this.box.height,g=["lt","t","rt","r","rb","b","lb","l"],x=(g.indexOf(this.eventType)+4)%g.length,y=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[x];let b=this.eventType.includes("t")||this.eventType.includes("b")?f:h;b=this.eventType.length===2?Math.max(h,f):b,u=function(v,N,k){const A=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]].map(([R,_])=>{const I=R-N[0],P=(_-N[1])*k;return[I*k+N[0],P+N[1]]});return g4(A)}(this.box,y,b)}this.el.dispatch("resize",{box:new vr(u),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.size(u.width,u.height).move(u.x,u.y)}movePoint(e){this.lastEvent=e;const{x:t,y:s}=this.snapToGrid(this.el.point(zx(e))),a=this.el.array().slice();a[this.index]=[t,s],this.el.dispatch("resize",{box:g4(a),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.plot(a)}rotate(e){this.lastEvent=e;const t=this.startPoint,s=this.el.point(zx(e)),{cx:a,cy:i}=this.box,o=t.x-a,l=t.y-i,c=s.x-a,u=s.y-i,h=Math.sqrt(o*o+l*l)*Math.sqrt(c*c+u*u);if(h===0)return;let f=Math.acos((o*c+l*u)/h)/Math.PI*180;if(!f)return;s.x<t.x&&(f=-f);const g=new jt(this.el),{x,y}=new Cs(a,i).transformO(g),{rotate:b}=g.decompose(),v=this.snapToAngle(b+f)-b;this.el.dispatch("resize",{box:this.box,angle:v,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.transform(g.rotateO(v,x,y))}endResize(e){this.eventType!=="rot"&&this.eventType!=="point"&&this.resize(e),this.lastEvent=null,this.eventType="",Fn(window,"mousemove.resize touchmove.resize"),Fn(window,"mouseup.resize touchend.resize")}snapToGrid(e){return this.grid&&(e.x=Math.round(e.x/this.grid)*this.grid,e.y=Math.round(e.y/this.grid)*this.grid),e}snapToAngle(e){return this.degree&&(e=Math.round(e/this.degree)*this.degree),e}}Tt(xa,{resize:function(r=!0,e={}){typeof r=="object"&&(e=r,r=!0);let t=this.remember("_ResizeHandler");return t||(r.prototype instanceof p4?(t=new r(this),r=!0):t=new p4(this),this.remember("_resizeHandler",t)),t.active(r,e),this}}),window.SVG===void 0&&(window.SVG=Yce),window.Apex===void 0&&(window.Apex={});var x4=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new Ah(this.ctx),this.ctx.axes=new sde(this.ctx),this.ctx.core=new Ede(this.ctx.el,this.ctx),this.ctx.config=new ig({}),this.ctx.data=new uS(this.ctx),this.ctx.grid=new tF(this.ctx),this.ctx.graphics=new Be(this.ctx),this.ctx.coreUtils=new wr(this.ctx),this.ctx.crosshairs=new mj(this.ctx),this.ctx.events=new ede(this.ctx),this.ctx.exports=new Af(this.ctx),this.ctx.fill=new ri(this.ctx),this.ctx.localization=new tde(this.ctx),this.ctx.options=new Uc,this.ctx.responsive=new rde(this.ctx),this.ctx.series=new zn(this.ctx),this.ctx.theme=new ade(this.ctx),this.ctx.formatters=new Hg(this.ctx),this.ctx.titleSubtitle=new nde(this.ctx),this.ctx.legend=new rF(this.ctx),this.ctx.toolbar=new aF(this.ctx),this.ctx.tooltip=new d4(this.ctx),this.ctx.dimensions=new hb(this.ctx),this.ctx.updateHelpers=new Tde(this.ctx),this.ctx.zoomPanSelection=new ude(this.ctx),this.ctx.w.globals.tooltip=new d4(this.ctx)}}]),r}(),b4=function(){function r(e){ct(this,r),this.ctx=e,this.w=e.w}return dt(r,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each(function(){this.removeClass("*"),this.off()},!0),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,s=e.isUpdating,a=this.w.globals.dom.Paper.node;a.parentNode&&a.parentNode.parentNode&&!s&&(a.parentNode.parentNode.style.minHeight="unset");var i=this.w.globals.dom.baseEl;i&&this.ctx.eventList.forEach(function(l){i.removeEventListener(l,t.ctx.events.documentEvent)});var o=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(o.Paper),o.Paper.remove(),o.elWrap=null,o.elGraphical=null,o.elLegendWrap=null,o.elLegendForeign=null,o.baseEl=null,o.elGridRect=null,o.elGridRectMask=null,o.elGridRectBarMask=null,o.elGridRectMarkerMask=null,o.elForecastMask=null,o.elNonForecastMask=null,o.elDefs=null}}]),r}(),R1=new WeakMap,Rde=function(){function r(e,t){ct(this,r),this.opts=t,this.ctx=this,this.w=new Jce(t).init(),this.el=e,this.w.globals.cuid=ne.randomId(),this.w.globals.chartID=this.w.config.chart.id?ne.escapeString(this.w.config.chart.id):this.w.globals.cuid,new x4(this).initModules(),this.lastUpdateOptions=null,this.create=ne.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return dt(r,[{key:"render",value:function(){var e=this;return new Promise(function(t,s){if(ne.elementExists(e.el)){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var a=e.w.config.chart.events.beforeMount;typeof a=="function"&&a(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(g,x){var y=!1;if(g.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var b=g.getBoundingClientRect();g.style.display!=="none"&&b.width!==0||(y=!0)}var v=new ResizeObserver(function(N){y&&x.call(g,N),y=!0});g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(g.children).forEach(function(N){return v.observe(N)}):v.observe(g),R1.set(x,v)}(e.el.parentNode,e.parentResizeHandler);var i=e.el.getRootNode&&e.el.getRootNode(),o=ne.is("ShadowRoot",i),l=e.el.ownerDocument,c=o?i.getElementById("apexcharts-css"):l.getElementById("apexcharts-css");if(!c){var u;(c=document.createElement("style")).id="apexcharts-css",c.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  direction: ltr !important;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  display: inline-block;
  position: relative;
  width: 16px;
  height: 16px;
  font-size: 16px;
  line-height: 16px;
  margin-right: 4px;
  text-align: center;
  vertical-align: middle;
  color: inherit;
}

.apexcharts-tooltip-marker::before {
  content: "";
  display: inline-block;
  width: 100%;
  text-align: center;
  color: currentcolor;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  font-size: 26px;
  font-family: Arial, Helvetica, sans-serif;
  line-height: 14px;
  font-weight: 900;
}

.apexcharts-tooltip-marker[shape="circle"]::before {
  content: "\\25CF";
}

.apexcharts-tooltip-marker[shape="square"]::before,
.apexcharts-tooltip-marker[shape="rect"]::before {
  content: "\\25A0";
  transform: translate(-1px, -2px);
}

.apexcharts-tooltip-marker[shape="line"]::before {
  content: "\\2500";
}

.apexcharts-tooltip-marker[shape="diamond"]::before {
  content: "\\25C6";
  font-size: 28px;
}

.apexcharts-tooltip-marker[shape="triangle"]::before {
  content: "\\25B2";
  font-size: 22px;
}

.apexcharts-tooltip-marker[shape="cross"]::before {
  content: "\\2715";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="plus"]::before {
  content: "\\2715";
  transform: rotate(45deg) translate(-1px, -1px);
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="star"]::before {
  content: "\\2605";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="sparkle"]::before {
  content: "\\2726";
  font-size: 20px;
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_shape {
  stroke-width: 1;
  stroke-dasharray: 10 10;
  stroke: black;
  stroke-opacity: 0.1;
  pointer-events: none;
  fill: none;
}

.svg_select_handle {
  stroke-width: 3;
  stroke: black;
  fill: none;
}

.svg_select_handle_r {
  cursor: e-resize;
}

.svg_select_handle_l {
  cursor: w-resize;
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path:not(.apexcharts-marker),
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect,
.no-pointer-events {
  pointer-events: none
}

.apexcharts-tooltip-active .apexcharts-marker {
  transition: .15s ease all
}

.apexcharts-radar-series .apexcharts-yaxis {
  pointer-events: none;
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}

.apexcharts-disable-transitions * {
  transition: none !important;
}`;var h=((u=e.opts.chart)===null||u===void 0?void 0:u.nonce)||e.w.config.chart.nonce;h&&c.setAttribute("nonce",h),o?i.prepend(c):e.w.config.chart.injectStyleSheet!==!1&&l.head.appendChild(c)}var f=e.create(e.w.config.series,{});if(!f)return t(e);e.mount(f).then(function(){typeof e.w.config.chart.events.mounted=="function"&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(f)}).catch(function(g){s(g)})}else s(new Error("Element not found"))})}},{key:"create",value:function(e,t){var s=this,a=this.w;new x4(this).initModules();var i=this.w.globals;if(i.noData=!1,i.animationEnded=!1,!ne.elementExists(this.el)||(this.responsive.checkResponsiveConfig(t),a.config.xaxis.convertedCatToNumeric&&new ng(a.config).convertCatToNumericXaxis(a.config,this.ctx),this.core.setupElements(),a.config.chart.type==="treemap"&&(a.config.grid.show=!1,a.config.yaxis[0].show=!1),i.svgWidth===0))return i.animationEnded=!0,null;var o=e;e.forEach(function(g,x){g.hidden&&(o=s.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:x}))});var l=wr.checkComboSeries(o,a.config.chart.type);i.comboCharts=l.comboCharts,i.comboBarCount=l.comboBarCount;var c=o.every(function(g){return g.data&&g.data.length===0});(o.length===0||c&&i.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(o),this.theme.init(),new Ph(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),i.noData&&i.collapsedSeries.length!==i.series.length&&!a.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),i.axisCharts&&(this.core.coreCalculations(),a.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=a.globals.minX,this.ctx.toolbar.maxX=a.globals.maxX),this.formatters.heatmapLabelFormatters(),new wr(this).getLargestMarkerSize(),this.dimensions.plotCoords();var u=this.core.xySettings();this.grid.createGridMask();var h=this.core.plotChartType(o,u),f=new ah(this);return f.bringForward(),a.config.dataLabels.background.enabled&&f.dataLabelsBackground(),this.core.shiftGraphPosition(),a.globals.dataPoints>50&&a.globals.dom.elWrap.classList.add("apexcharts-disable-transitions"),{elGraph:h,xyRatios:u,dimensions:{plot:{left:a.globals.translateX,top:a.globals.translateY,width:a.globals.gridWidth,height:a.globals.gridHeight}}}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=this,a=s.w;return new Promise(function(i,o){if(s.el===null)return o(new Error("Not enough data to display or target element not found"));(t===null||a.globals.allSeriesCollapsed)&&s.series.handleNoData(),s.grid=new tF(s);var l,c,u=s.grid.drawGrid();if(s.annotations=new Zce(s),s.annotations.drawImageAnnos(),s.annotations.drawTextAnnos(),a.config.grid.position==="back"&&(u&&a.globals.dom.elGraphical.add(u.el),u!=null&&(l=u.elGridBorders)!==null&&l!==void 0&&l.node&&a.globals.dom.elGraphical.add(u.elGridBorders)),Array.isArray(t.elGraph))for(var h=0;h<t.elGraph.length;h++)a.globals.dom.elGraphical.add(t.elGraph[h]);else a.globals.dom.elGraphical.add(t.elGraph);a.config.grid.position==="front"&&(u&&a.globals.dom.elGraphical.add(u.el),u!=null&&(c=u.elGridBorders)!==null&&c!==void 0&&c.node&&a.globals.dom.elGraphical.add(u.elGridBorders)),a.config.xaxis.crosshairs.position==="front"&&s.crosshairs.drawXCrosshairs(),a.config.yaxis[0].crosshairs.position==="front"&&s.crosshairs.drawYCrosshairs(),a.config.chart.type!=="treemap"&&s.axes.drawAxis(a.config.chart.type,u);var f=new og(e.ctx,u),g=new hS(e.ctx,u);if(u!==null&&(f.xAxisLabelCorrections(u.xAxisTickWidth),g.setYAxisTextAlignments(),a.config.yaxis.map(function(y,b){a.globals.ignoreYAxisIndexes.indexOf(b)===-1&&g.yAxisTitleRotate(b,y.opposite)})),s.annotations.drawAxesAnnotations(),!a.globals.noData){if(a.config.tooltip.enabled&&!a.globals.noData&&s.w.globals.tooltip.drawTooltip(t.xyRatios),a.globals.axisCharts&&(a.globals.isXNumeric||a.config.xaxis.convertedCatToNumeric||a.globals.isRangeBar))(a.config.chart.zoom.enabled||a.config.chart.selection&&a.config.chart.selection.enabled||a.config.chart.pan&&a.config.chart.pan.enabled)&&s.zoomPanSelection.init({xyRatios:t.xyRatios});else{var x=a.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(y){x[y]=!1})}a.config.chart.toolbar.show&&!a.globals.allSeriesCollapsed&&s.toolbar.createToolbar()}a.globals.memory.methodsToExec.length>0&&a.globals.memory.methodsToExec.forEach(function(y){y.method(y.params,!1,y.context)}),a.globals.axisCharts||a.globals.noData||s.core.resizeNonAxisCharts(),i(s)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),function(t,s){var a=R1.get(s);a&&(a.disconnect(),R1.delete(s))}(this.el.parentNode,this.parentResizeHandler);var e=this.w.config.chart.id;e&&Apex._chartInstances.forEach(function(t,s){t.id===ne.escapeString(e)&&Apex._chartInstances.splice(s,1)}),new b4(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,s=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],l=this.w;return l.globals.selection=void 0,this.lastUpdateOptions&&JSON.stringify(this.lastUpdateOptions)===JSON.stringify(e)?this:(e.series&&(this.data.resetParsingFlags(),this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map(function(c,u){return t.updateHelpers._extendSeries(c,u)})),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),l.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,s,a,i,o))}},{key:"updateSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.data.resetParsingFlags(),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,s)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.data.resetParsingFlags();var a=this.w.config.series.slice();return a.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(a,t,s)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],s=this;s.data.resetParsingFlags(),s.w.globals.dataChanged=!0,s.series.getPreviousPaths();for(var a=s.w.config.series.slice(),i=0;i<a.length;i++)if(e[i]!==null&&e[i]!==void 0)for(var o=0;o<e[i].data.length;o++)a[i].data.push(e[i].data[o]);return s.w.config.series=a,t&&(s.w.globals.initialSeries=ne.clone(s.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise(function(s,a){if(t.lastUpdateOptions&&JSON.stringify(t.lastUpdateOptions)===JSON.stringify(e))return s(t);t.lastUpdateOptions=ne.clone(e),new b4(t.ctx).clear({isUpdating:!0});var i=t.create(t.w.config.series,e);if(!i)return s(t);t.mount(i).then(function(){typeof t.w.config.chart.events.updated=="function"&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,s(t)}).catch(function(o){a(o)})})}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach(function(s){t.push(s)})),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter(function(t){if(t.group)return!0}).map(function(t){return e.w.config.chart.group===t.group?t.chart:e})}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"highlightSeries",value:function(e){this.series.highlightSeries(e)}},{key:"isSeriesHidden",value:function(e){this.series.isSeriesHidden(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,a=this;s&&(a=s),a.annotations.addXaxisAnnotationExternal(e,t,a)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,a=this;s&&(a=s),a.annotations.addYaxisAnnotationExternal(e,t,a)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,a=this;s&&(a=s),a.annotations.addPointAnnotationExternal(e,t,a)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=this;t&&(s=t),s.annotations.removeAnnotation(s,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new hj(this.ctx).getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new hj(this.ctx).getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new Af(this.ctx).dataURI(e)}},{key:"getSvgString",value:function(e){return new Af(this.ctx).getSvgString(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Af(this.ctx).exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;typeof e=="function"&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=ne.escapeString(e);if(Apex._chartInstances){var s=Apex._chartInstances.filter(function(a){return a.id===t})[0];return s&&s.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),t=0;t<e.length;t++)new r(e[t],JSON.parse(e[t].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var s=this.getChartByID(e);if(s){s.w.globals.isExecCalled=!0;var a=null;if(s.publicMethods.indexOf(t)!==-1){for(var i=arguments.length,o=new Array(i>2?i-2:0),l=2;l<i;l++)o[l-2]=arguments[l];a=s[t].apply(s,o)}return a}}},{key:"merge",value:function(e,t){return ne.extend(e,t)}},{key:"getThemePalettes",value:function(){return{palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3F51B5","#03A9F4","#4CAF50","#F9CE1D","#FF9800"],palette3:["#33B2DF","#546E7A","#D4526E","#13D8AA","#A5978B"],palette4:["#4ECDC4","#C7F464","#81D4FA","#FD6A6A","#546E7A"],palette5:["#2B908F","#F9A3A4","#90EE7E","#FA4443","#69D2E7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}}}]),r}();const Ide=Object.freeze(Object.defineProperty({__proto__:null,default:Rde},Symbol.toStringTag,{value:"Module"})),Dde=U8(Ide);var y4;function Mde(){return y4||(y4=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=A;var e=l(fb()),t=i(Dde),s=i(dO()),a=["type","width","height","series","options"];function i(R){return R&&R.__esModule?R:{default:R}}function o(R){var _,I;return typeof WeakMap!="function"?null:(_=new WeakMap,I=new WeakMap,(o=function(P){return P?I:_})(R))}function l(R,_){if(!_&&R&&R.__esModule)return R;if(R===null||f(R)!="object"&&typeof R!="function")return{default:R};if(_=o(_),_&&_.has(R))return _.get(R);var I,P,T={__proto__:null},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(I in R)I!=="default"&&{}.hasOwnProperty.call(R,I)&&((P=D?Object.getOwnPropertyDescriptor(R,I):null)&&(P.get||P.set)?Object.defineProperty(T,I,P):T[I]=R[I]);return T.default=R,_&&_.set(R,T),T}function c(){return(c=Object.assign?Object.assign.bind():function(R){for(var _=1;_<arguments.length;_++){var I,P=arguments[_];for(I in P)!{}.hasOwnProperty.call(P,I)||(R[I]=P[I])}return R}).apply(null,arguments)}function u(R,_){if(R==null)return{};var I,P=h(R,_);if(Object.getOwnPropertySymbols)for(var T=Object.getOwnPropertySymbols(R),D=0;D<T.length;D++)I=T[D],_.includes(I)||{}.propertyIsEnumerable.call(R,I)&&(P[I]=R[I]);return P}function h(R,_){if(R==null)return{};var I,P={};for(I in R)if({}.hasOwnProperty.call(R,I)){if(_.includes(I))continue;P[I]=R[I]}return P}function f(R){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(R)}function g(R,_){var I,P=Object.keys(R);return Object.getOwnPropertySymbols&&(I=Object.getOwnPropertySymbols(R),_&&(I=I.filter(function(T){return Object.getOwnPropertyDescriptor(R,T).enumerable})),P.push.apply(P,I)),P}function x(R){for(var _=1;_<arguments.length;_++){var I=arguments[_]!=null?arguments[_]:{};_%2?g(Object(I),!0).forEach(function(P){y(R,P,I[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(I)):g(Object(I)).forEach(function(P){Object.defineProperty(R,P,Object.getOwnPropertyDescriptor(I,P))})}return R}function y(R,_,I){return(_=b(_))in R?Object.defineProperty(R,_,{value:I,enumerable:!0,configurable:!0,writable:!0}):R[_]=I,R}function b(R){return R=v(R,"string"),f(R)=="symbol"?R:R+""}function v(R,_){if(f(R)!="object"||!R)return R;var I=R[Symbol.toPrimitive];if(I===void 0)return(_==="string"?String:Number)(R);if(I=I.call(R,_),f(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}function N(R,_){var I=x({},R);return _.forEach(function(P){delete I[P]}),I}function k(R,_){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:new WeakSet;if(R!==_){if(f(R)!=="object"||R===null||f(_)!=="object"||_===null)return!1;if(!I.has(R)&&!I.has(_)){I.add(R),I.add(_);var P=Object.keys(R),T=Object.keys(_);if(P.length!==T.length)return!1;for(var D=0,L=P;D<L.length;D++){var F=L[D];if(!T.includes(F)||!k(R[F],_[F],I))return!1}}}return!0}function A($){function _(X){return X&&f(X)==="object"&&!Array.isArray(X)}var F=$.type,I=F===void 0?"line":F,F=$.width,P=F===void 0?"100%":F,F=$.height,T=F===void 0?"auto":F,D=$.series,L=$.options,F=u($,a),z=(0,e.useRef)(null),O=(0,e.useRef)(null),V=(0,e.useRef)(),Y=((0,e.useEffect)(function(){V.current=L;var X=z.current;return O.current=new t.default(X,Y()),O.current.render(),function(){O.current&&typeof O.current.destroy=="function"&&O.current.destroy()}},[]),(0,e.useEffect)(function(){var X=!k(O.current.w.config.series,D),G=!k(V.current,L)||T!==O.current.opts.chart.height||P!==O.current.opts.chart.width;(X||G)&&(!X||G?O.current.updateOptions(Y()):O.current.updateSeries(D)),V.current=L},[L,D,T,P]),function(){return H(L,{chart:{type:I,height:T,width:P},series:D})}),H=function(X,G){var B=x({},X);return _(X)&&_(G)&&Object.keys(G).forEach(function(Q){_(G[Q])&&Q in X?B[Q]=H(X[Q],G[Q]):Object.assign(B,y({},Q,G[Q]))}),B},$=N(F,Object.keys(A.propTypes));return e.default.createElement("div",c({ref:z},$))}A.propTypes={type:s.default.string.isRequired,series:s.default.array.isRequired,options:s.default.object.isRequired,width:s.default.oneOfType([s.default.string,s.default.number]),height:s.default.oneOfType([s.default.string,s.default.number])}}(f1)),f1}var Ode=Mde();const Lde=mb(Ode);function Fde(){const r=us(),[e,t]=E.useState(0),[s,a]=E.useState(0),[i,o]=E.useState(""),[l,c]=E.useState(""),[u,h]=E.useState(!0),[f,g]=E.useState(!1),[x,y]=E.useState(null),[b,v]=E.useState(!1),[N,k]=E.useState({series:[],options:{}});E.useEffect(()=>{if(!ve.currentUser){r("/login");return}(async()=>{const L=Ne(J,"wallets",ve.currentUser.uid),F=Ne(J,"users",ve.currentUser.uid);try{const z=await it(L);if(console.log(`Fetching wallet for ${ve.currentUser.uid}:`,z.exists()?z.data():"No wallet"),!z.exists()){console.log(`Creating wallet for ${ve.currentUser.uid}`);const H=await it(F),$=H.exists()&&H.data().accountDetails?H.data().accountDetails:{accountNumber:`MOCK${Math.random().toString().slice(2,12)}`,bankName:"Mock Bank",accountName:"Mock Seller"};await Gt(L,{availableBalance:0,pendingWithdrawals:0,updatedAt:Ti(),accountDetails:$})}const O=await it(F),V=O.exists()&&O.data().isOnboarded===!0,Y=O.exists()&&O.data().isProSeller===!0;console.log(`Seller ${ve.currentUser.uid} onboarding status: ${V?"onboarded":"not onboarded"}, pro status: ${Y?"pro":"standard"}`),y(V||Y),v(Y),h(!1)}catch(z){console.error(`Error fetching wallet or status for ${ve.currentUser.uid}:`,z),c("Failed to load wallet or status: "+z.message),h(!1)}})();const I=Ne(J,"wallets",ve.currentUser.uid),P=os(I,L=>{if(L.exists()){const F=L.data();console.log(`Snapshot for ${ve.currentUser.uid}:`,F),t(F.availableBalance||0),a(F.pendingWithdrawals||0),R(F.availableBalance||0,F.pendingWithdrawals||0)}else console.log(`No wallet for ${ve.currentUser.uid}`),t(0),a(0),R(0,0)},L=>{console.error("Wallet snapshot error:",L),c("Failed to update wallet: "+L.message)}),T=ft(_e(J,"transactions"),rt("sellerId","==",ve.currentUser.uid),rt("type","==","Withdrawal")),D=os(T,L=>{console.log(`Received ${L.docs.length} withdrawal transactions for seller ${ve.currentUser.uid}`)},L=>{console.error("Transaction snapshot error:",L),c(`Failed to fetch transactions: ${L.message}`)});return()=>{P(),D()}},[r]);const A=async _=>{if(_.preventDefault(),c(""),h(!0),!x){console.log(`Withdrawal blocked: Seller ${ve.currentUser.uid} is not onboarded`),g(!0),h(!1);return}const I=parseFloat(i);if(isNaN(I)||I<=0){c("Enter a valid amount."),h(!1);return}if(I>e){c("Insufficient balance."),h(!1);return}const P="https://foremade-backend.onrender.com";try{const T=Ne(J,"wallets",ve.currentUser.uid),D=await it(T),L=D.exists()&&D.data().accountDetails?D.data().accountDetails:{accountNumber:`MOCK${Math.random().toString().slice(2,12)}`,bankName:"Mock Bank",accountName:"Mock Seller"},F={sellerId:ve.currentUser.uid,amount:I,transactionReference:`TXN_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,accountDetails:L};console.log("Withdrawal request:",`${P}/initiate-seller-payout`,F),(await ss.post(`${P}/initiate-seller-payout`,F,{timeout:1e4})).data.status==="success"&&(o(""),g(!1),alert("Withdrawal submitted. Funds will be credited upon admin approval."))}catch(T){console.error("Withdrawal error:",T),c("Withdrawal failed: "+(T.response?.data?.error||T.message))}finally{h(!1)}},R=(_=e,I=0)=>{k({series:[_,I],options:{chart:{type:"area",height:"100%",width:"100%",animations:{enabled:!0}},xaxis:{categories:["Balance"]},yaxis:{title:{text:"Amount (NGN)"},min:0},stroke:{curve:"smooth"},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.9,stops:[0,90,100]}},colors:["#2563EB","#c08640"],legend:{position:"top",horizontalAlign:"center"},tooltip:{y:{formatter:P=>`₦${P.toFixed(2)}`},custom:({series:P,seriesIndex:T,dataPointIndex:D,w:L})=>`<div class="p-2 bg-gray-800 text-white rounded-lg">
              ${L.globals.seriesNames[T]}: ₦${P[T][D].toFixed(2)}
            </div>`},dataLabels:{enabled:!1}}})};return u?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 sm:p-6 md:p-8 lg:p-10",children:n.jsxs("div",{className:"max-w-8xl mx-auto w-full bg-white rounded-2xl shadow-lg p-6 sm:p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(zu,{className:"w-8 h-8 text-blue-600"}),n.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-blue-900",children:"My Wallet"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(tO,{}),x!==null&&n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${x?"text-green-600 bg-green-100":"text-red-600 bg-red-100"}`,children:x?`Status: Onboarded (${b?"Pro":"Standard"} Seller)`:"Please Onboard"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-5 text-white shadow-md relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-2 right-2 opacity-30",children:n.jsx(zu,{className:"w-16 h-16"})}),n.jsxs("span",{className:"text-xs font-light",children:["Wallet ID: ",ve.currentUser.uid]}),n.jsx("h3",{className:"text-lg font-semibold mt-2",children:"Available Balance"}),n.jsx("p",{className:"text-2xl font-bold mt-2 bg-white p-2 rounded-lg text-blue-900",children:n.jsx(lr,{price:e})})]}),n.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-5 text-white shadow-md relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-2 right-2 opacity-30",children:n.jsx(zu,{className:"w-16 h-16"})}),n.jsx("span",{className:"text-xs font-light",children:"Pending Transactions"}),n.jsx("h3",{className:"text-lg font-semibold mt-2",children:"Pending Withdrawals"}),n.jsx("p",{className:"text-2xl font-bold mt-2 bg-white p-2 rounded-lg text-orange-900",children:n.jsx(lr,{price:s})})]})]}),n.jsxs("form",{onSubmit:A,className:"bg-white border border-gray-100 rounded-2xl shadow-md p-5 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(eee,{className:"w-5 h-5 text-green-600"}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Request Withdrawal"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"withdraw-amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Withdrawal Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"withdraw-amount",type:"number",value:i,onChange:_=>o(_.target.value),className:"p-3 pl-10 w-full border border-blue-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-base transition",required:!0,"aria-label":"Withdrawal Amount",min:"1",step:"any"}),n.jsx("i",{className:"bx bx-money absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum withdrawal: ₦1. Withdrawals subject to admin approval, may take up to 24 hours."})]}),l&&n.jsx("p",{className:"text-red-500 text-sm mb-4",children:l}),n.jsxs("button",{type:"submit",className:`w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300 transition flex items-center justify-center gap-2 ${u?"opacity-50 cursor-not-allowed":""}`,disabled:u,"aria-label":"Request Withdrawal",children:[n.jsx("i",{className:"bx bx-wallet"}),"Request Withdrawal",u&&n.jsx("i",{className:"bx bx-loader-alt animate-spin"})]})]}),n.jsxs("div",{className:"mt-6 bg-white p-4 sm:p-6 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-wallet text-blue-600"}),"Wallet Balance"]}),n.jsx("div",{className:"h-64 sm:h-80",children:n.jsx(Lde,{options:N.options,series:N.series,type:"area",height:"100%"})})]}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Onboarding Required"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Please onboard as a seller to withdraw funds."}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition","aria-label":"Close modal",children:"Cancel"}),n.jsx("button",{onClick:()=>r("/seller-onboarding"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition","aria-label":"Go to onboarding",children:"Onboard Now"})]})]})})]})})]})}const Ude=()=>{const[r,e]=E.useState({}),t=a=>{e(i=>({...i,[a]:!i[a]}))},s=[{id:"introduction",title:"Introduction and Scope",icon:"bx-info-circle",content:n.jsx("p",{className:"text-secondary leading-relaxed",children:'This Privacy Notice explains how Foremade and its affiliates ("Foremade", "we", "us", or "our") collect, use, store, share, and protect your personal data. It complies with international privacy laws including GDPR, NDPR, CCPA, and more.'})},{id:"controller",title:"Data Controller",icon:"bx-globe",content:n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{region:"EU",entity:"Foremade GmbH – Berlin, Germany"},{region:"UK",entity:"Foremade UK Ltd. – London"},{region:"Nigeria",entity:"Foremade Nigeria Ltd. – Lagos"},{region:"Other Africa",entity:"Foremade Africa Ltd. – Nairobi"},{region:"Americas",entity:"Foremade Americas Inc. – Delaware, USA"},{region:"Asia",entity:"Foremade Asia Pte. Ltd. – Singapore"},{region:"All Regions",entity:"Foremade Global AG – Zurich"}].map(({region:a,entity:i},o)=>n.jsxs("div",{className:"bg-background-light p-3 rounded-lg border-l-4 border-primary",children:[n.jsx("div",{className:"font-semibold text-primary",children:a}),n.jsx("div",{className:"text-sm text-secondary",children:i})]},o))})},{id:"contact",title:"Contact and DPO",icon:"bx-envelope",content:n.jsx("div",{className:"bg-background-light p-4 rounded-lg border border-border-light",children:n.jsxs("p",{className:"text-secondary",children:["Reach our Data Protection Officers via the"," ",n.jsx(he,{to:"/privacy-policy/contact",className:"policy-link font-semibold",children:"Privacy Centre"}),"."]})})},{id:"data-collection",title:"What Data We Collect",icon:"bx-shield",content:n.jsx("div",{className:"space-y-3",children:[{type:"Identity",desc:"Name, email, phone number"},{type:"Account Data",desc:"Order history, preferences, settings"},{type:"Usage Data",desc:"Device/browser information, interaction patterns"},{type:"Geolocation",desc:"Location data (if enabled by you)"},{type:"Third-party Sources",desc:"Data from partners and public sources"}].map(({type:a,desc:i},o)=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-background-light rounded-lg",children:[n.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-primary",children:a}),n.jsx("div",{className:"text-sm text-secondary",children:i})]})]},o))})},{id:"legal-basis",title:"Legal Basis",icon:"bx-check-circle",content:n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:["Contract fulfillment","Legal compliance","Platform improvement","Consent (e.g., marketing)"].map((a,i)=>n.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-background-light rounded-lg",children:[n.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),n.jsx("span",{className:"text-primary font-medium",children:a})]},i))})},{id:"transfers",title:"International Transfers",icon:"bx-world",content:n.jsx("div",{className:"bg-background-light p-4 rounded-lg border-l-4 border-primary",children:n.jsx("p",{className:"text-secondary leading-relaxed",children:"We use Standard Contractual Clauses (SCCs), NDPR rules, APEC frameworks, or other safeguards to protect your data when transferred internationally."})})},{id:"retention",title:"Data Retention",icon:"bx-folder",content:n.jsx("p",{className:"text-secondary leading-relaxed",children:"We keep your data as long as needed to deliver services, comply with legal obligations, or resolve disputes."})},{id:"rights",title:"Your Rights",icon:"bx-user",content:n.jsxs("div",{className:"bg-background-light p-4 rounded-lg border border-border-light",children:[n.jsx("p",{className:"text-secondary mb-3",children:"Depending on your region, you may request access, correction, deletion, or restriction of your data."}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-primary",children:"Submit requests via our"}),n.jsx(he,{to:"/privacy-policy/contact",className:"policy-link font-semibold",children:"Privacy Centre"})]})]})},{id:"cookies",title:"Cookies",icon:"bx-cookie",content:n.jsx("div",{className:"bg-background-light p-4 rounded-lg border border-border-light",children:n.jsxs("p",{className:"text-secondary mb-3",children:["We use cookies to enhance performance and deliver marketing. Adjust your preferences in our"," ",n.jsx(he,{to:"/privacy-policy/cookies",className:"policy-link font-semibold",children:"Cookie Settings"}),"."]})})},{id:"security",title:"Data Security",icon:"bx-lock",content:n.jsx("div",{className:"bg-background-light p-4 rounded-lg border-l-4 border-primary",children:n.jsx("p",{className:"text-secondary leading-relaxed",children:"We apply encryption, access controls, and secure infrastructure to protect your data from unauthorized access and breaches."})})},{id:"third-party",title:"Third-Party Links",icon:"bx-link",content:n.jsx("p",{className:"text-secondary leading-relaxed",children:"We are not responsible for third-party privacy practices linked from our platform. Please review their policies separately."})},{id:"children",title:"Children's Privacy",icon:"bx-child",content:n.jsx("div",{className:"bg-background-light p-4 rounded-lg border border-border-light",children:n.jsx("p",{className:"text-secondary leading-relaxed",children:"Children under 16 require verified parental consent to use our services."})})},{id:"updates",title:"Policy Updates",icon:"bx-refresh",content:n.jsx("p",{className:"text-secondary leading-relaxed",children:"We may update this policy and will notify you of major changes through our website or email notifications."})}];return n.jsxs(n.Fragment,{children:[n.jsx("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css",rel:"stylesheet"}),n.jsxs("div",{className:"min-h-screen bg-background-light py-8",children:[n.jsx("div",{className:"bg-gray-100",children:n.jsx("div",{className:"max-w-4xl mx-auto px-6 py-16",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("div",{className:"bg-primary/10 p-4 rounded-2xl",children:n.jsx("i",{className:"bx bx-shield text-4xl text-primary"})})}),n.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-primary",children:"Foremade Global Privacy Notice"}),n.jsx("div",{className:"bg-accent px-4 py-2 rounded-full inline-block",children:n.jsx("p",{className:"text-accent font-medium",children:"Effective Date: June 2, 2025"})})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsx("div",{className:"space-y-4",children:s.map(a=>n.jsxs("div",{className:"bg-background-light rounded-xl shadow-sm border border-border-light overflow-hidden hover:shadow-md transition-shadow",children:[n.jsxs("button",{onClick:()=>t(a.id),className:"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-background-dark transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"text-primary flex items-center justify-center w-8",children:n.jsx("i",{className:`bx ${a.icon} text-2xl`})}),n.jsx("h2",{className:"text-xl font-semibold text-primary",children:a.title})]}),n.jsx("div",{className:"text-secondary",children:r[a.id]?n.jsx("i",{className:"bx bx-chevron-down text-2xl"}):n.jsx("i",{className:"bx bx-chevron-right text-2xl"})})]}),r[a.id]&&n.jsx("div",{className:"px-6 pb-6 border-t border-border-light",children:n.jsx("div",{className:"pt-4",children:a.content})})]},a.id))}),n.jsxs("div",{className:"mt-8",children:[n.jsx("h3",{className:"text-2xl font-semibold text-primary mb-4",children:"Regional Policies"}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"EU Policy",type:"eu"},{name:"UK Policy",type:"uk"},{name:"US Policy",type:"us"},{name:"Nigeria Policy",type:"nigeria"},{name:"Other Africa",type:"africa"},{name:"Americas Policy",type:"americas"},{name:"Asia Policy",type:"asia"},{name:"Australia/Oceania",type:"australia"}].map((a,i)=>n.jsxs(he,{to:`/privacy-policy/${a.type}`,className:"block p-4 rounded-lg border-2 bg-background-light hover:bg-background-dark transition-all group border-border-light hover:border-primary",children:[n.jsx("div",{className:"text-primary group-hover:text-secondary",children:a.name}),n.jsxs("div",{className:"text-sm flex items-center gap-1 text-secondary",children:["View regional details",n.jsx("i",{className:"bx bx-right-arrow-alt"})]})]},i))})]}),n.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:n.jsxs("div",{className:"text-secondary text-sm",children:["© ",new Date().getFullYear()," Foremade Global. All rights reserved."]})})]})]})]})},zde=()=>{const[r,e]=E.useState("requests"),[t,s]=E.useState({requestType:"",fullName:"",email:"",phone:"",region:"",requestDetails:"",additionalInfo:""}),[a,i]=E.useState(!1),o=[{value:"access",label:"Access My Data",description:"Get a copy of all personal data we hold about you"},{value:"correction",label:"Correct My Data",description:"Update or correct inaccurate personal information"},{value:"deletion",label:"Delete My Data",description:"Request deletion of your personal data (Right to be Forgotten)"},{value:"restriction",label:"Restrict Processing",description:"Limit how we process your personal data"},{value:"portability",label:"Data Portability",description:"Receive your data in a structured, machine-readable format"},{value:"objection",label:"Object to Processing",description:"Object to processing based on legitimate interests"},{value:"withdraw",label:"Withdraw Consent",description:"Withdraw previously given consent for data processing"},{value:"complaint",label:"File a Complaint",description:"Report privacy concerns or violations"}],l=[{value:"eu",label:"European Union (GDPR)"},{value:"uk",label:"United Kingdom (UK GDPR)"},{value:"nigeria",label:"Nigeria (NDPR)"},{value:"us",label:"United States (CCPA/CPRA)"},{value:"canada",label:"Canada (PIPEDA)"},{value:"australia",label:"Australia (Privacy Act)"},{value:"singapore",label:"Singapore (PDPA)"},{value:"other",label:"Other Region"}],c=h=>{const{name:f,value:g}=h.target;s(x=>({...x,[f]:g}))},u=async h=>{if(h.preventDefault(),!t.requestType||!t.fullName||!t.email){xe.error("Please fill in all required fields");return}i(!0),setTimeout(()=>{xe.success("Privacy request submitted successfully! We will respond within 30 days."),s({requestType:"",fullName:"",email:"",phone:"",region:"",requestDetails:"",additionalInfo:""}),i(!1)},2e3)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[n.jsx("div",{className:"flex justify-center mb-8",children:n.jsxs("div",{className:"bg-gray-100 rounded-lg p-1",children:[n.jsx("button",{onClick:()=>e("requests"),className:`px-6 py-2 rounded-md transition-colors ${r==="requests"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Privacy Requests"}),n.jsx("button",{onClick:()=>e("contact"),className:`px-6 py-2 rounded-md transition-colors ${r==="contact"?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Contact DPO"})]})}),r==="requests"&&n.jsxs("form",{onSubmit:u,className:"space-y-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Submit Privacy Request"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Request Type *"}),n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:o.map(h=>n.jsxs("label",{className:"flex items-start space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"requestType",value:h.value,checked:t.requestType===h.value,onChange:c,className:"mt-1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:h.label}),n.jsx("div",{className:"text-sm text-gray-600",children:h.description})]})]},h.value))})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),n.jsx("input",{type:"text",name:"fullName",value:t.fullName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),n.jsx("input",{type:"email",name:"email",value:t.email,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),n.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Region *"}),n.jsxs("select",{name:"region",value:t.region,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select your region"}),l.map(h=>n.jsx("option",{value:h.value,children:h.label},h.value))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Request Details *"}),n.jsx("textarea",{name:"requestDetails",value:t.requestDetails,onChange:c,rows:"4",placeholder:"Please provide specific details about your request...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("i",{className:"bx bx-info-circle text-blue-600 text-xl mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Email Verification"}),n.jsxs("p",{className:"text-sm text-blue-700",children:["We will verify your identity via email at ",n.jsx("strong",{children:t.email}),". Please check your inbox for a verification link after submitting this request."]})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Information (Optional)"}),n.jsx("textarea",{name:"additionalInfo",value:t.additionalInfo,onChange:c,rows:"3",placeholder:"Any additional context or specific requirements...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:a,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-semibold",children:a?n.jsxs("span",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-loader-alt animate-spin mr-2"}),"Submitting..."]}):"Submit Request"})})]}),r==="contact"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Contact Data Protection Officer"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Email Contact"}),n.jsx("p",{className:"text-blue-700 mb-4",children:"For privacy-related inquiries and support:"}),n.jsx("a",{href:"mailto:privacy@foremade.com",className:"text-blue-600 hover:text-blue-800 font-semibold",children:"privacy@foremade.com"})]}),n.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[n.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Response Time"}),n.jsx("p",{className:"text-green-700 mb-2",children:"We aim to respond to all privacy requests within:"}),n.jsxs("ul",{className:"text-green-700 text-sm space-y-1",children:[n.jsx("li",{children:"• Initial acknowledgment: 24 hours"}),n.jsx("li",{children:"• Full response: 30 days"}),n.jsx("li",{children:"• Complex requests: 60 days"})]})]})]}),n.jsxs("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200",children:[n.jsx("h4",{className:"font-semibold text-yellow-900 mb-3",children:"Data Protection Officer"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"mb-2",children:[n.jsx("strong",{className:"text-yellow-800",children:"Email:"})," privacy@foremade.com"]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("strong",{className:"text-yellow-800",children:"Response Time:"})," Within 24-48 hours"]}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-yellow-800",children:"Languages:"})," English, French, Spanish, Arabic"]})]})]})]})]})},Vde=()=>{const{type:r}=Lo(),e=us(),t=()=>{switch(r){case"cookies":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-cookie text-2xl text-yellow-600"}),"Cookie Settings"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-700",children:"We use cookies and similar technologies to provide, protect, and improve our services. This page helps you understand how we use them and what choices you have."}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Essential Cookies"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Required for basic site functionality. Always active."})]}),n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Analytics Cookies"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Help us understand how visitors interact with our website."})]}),n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Marketing Cookies"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Used to deliver personalized advertisements."})]}),n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Preference Cookies"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Remember your settings and preferences."})]})]}),n.jsxs("div",{className:"mt-6 flex gap-4",children:[n.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Accept All"}),n.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Essential Only"})]})]})]});case"contact":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-support text-2xl text-blue-600"}),"Privacy Centre"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-700",children:"Contact our Data Protection Officers for any privacy-related concerns or to exercise your data rights."}),n.jsx(zde,{})]})]});case"eu":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-flag text-2xl text-blue-600"}),"EU Privacy Policy"]}),n.jsxs("div",{className:"prose prose-blue max-w-none",children:[n.jsx("p",{className:"text-gray-700",children:"This policy complies with GDPR requirements for EU residents."}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key GDPR Rights"}),n.jsx("div",{className:"grid gap-4",children:[{title:"Right to Access",description:"Individuals can request access to their personal data and obtain information about how it's processed.",link:"https://gdpr-info.eu/art-15-gdpr/"},{title:"Right to Rectification",description:"Allows individuals to have inaccurate personal data corrected.",link:"https://gdpr-info.eu/art-16-gdpr/"},{title:'Right to Erasure ("Right to be Forgotten")',description:"Enables individuals to request the deletion of their personal data under certain circumstances.",link:"https://gdpr-info.eu/art-17-gdpr/"},{title:"Right to Restrict Processing",description:"Individuals can request the limitation of their data processing under specific conditions.",link:"https://gdpr-info.eu/art-18-gdpr/"},{title:"Right to Data Portability",description:"Allows individuals to receive their personal data in a structured format and transfer it to another controller.",link:"https://gdpr-info.eu/art-20-gdpr/"},{title:"Right to Object to Processing",description:"Grants individuals the right to object to the processing of their personal data in certain situations.",link:"https://gdpr-info.eu/art-21-gdpr/"}].map((s,a)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:s.title}),n.jsx("p",{className:"text-gray-600 mb-3",children:s.description}),n.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors",children:["Learn More",n.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});case"nigeria":return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center bg-green-100 rounded-full",children:n.jsx("i",{className:"bx bx-shield text-5xl text-green-700"})}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-green-700 mb-2",children:"Your Data Protection Rights under Nigerian Law (NDPA 2023)"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"As a data subject in Nigeria, the Nigeria Data Protection Act (NDPA) 2023 grants you specific rights regarding your personal data. These rights ensure transparency, accountability, and give you greater control over how your information is collected, used, stored, and shared by organizations."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-green-100",children:[n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"1. Right to Access Personal Data"}),n.jsx("p",{className:"mb-2",children:"You have the right to request and receive confirmation as to whether or not an organization holds your personal data. Where your data is being processed, you are entitled to:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-green-900",children:[n.jsx("li",{children:"A copy of the personal data being processed"}),n.jsx("li",{children:"Information about the purpose of the processing"}),n.jsx("li",{children:"The categories of data involved"}),n.jsx("li",{children:"The recipients or categories of recipients to whom the data has been disclosed"}),n.jsx("li",{children:"The retention period for the data or criteria for determining that period"}),n.jsx("li",{children:"The existence of your data protection rights (e.g., correction, deletion)"}),n.jsx("li",{children:"Information about any automated decision-making (e.g., profiling) that may affect you"})]}),n.jsx("p",{className:"mb-4",children:"Organizations must respond within 30 days and in a clear, intelligible format."}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"2. Right to Data Correction (Rectification)"}),n.jsx("p",{className:"mb-4",children:"You have the right to request that inaccurate or incomplete data about you be corrected or updated without undue delay. The organization must also notify any third parties who received the inaccurate data."}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"3. Right to Data Deletion (Erasure)"}),n.jsx("p",{className:"mb-2",children:'Also known as the "right to be forgotten", you may request the deletion of your data under specific conditions, such as:'}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Data is no longer needed for its original purpose"}),n.jsx("li",{children:"You withdraw consent"}),n.jsx("li",{children:"You object to processing with no overriding legitimate reason"}),n.jsx("li",{children:"Data was unlawfully processed"}),n.jsx("li",{children:"Deletion is required for legal compliance"})]}),n.jsx("p",{className:"mb-4",children:"Note: This right is not absolute and may be limited by legal obligations."}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"4. Right to Restrict Data Processing"}),n.jsx("p",{className:"mb-2",children:"You can request temporary restriction of data processing under circumstances such as:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Contesting the accuracy of the data"}),n.jsx("li",{children:"Unlawful processing but preferring restriction over deletion"}),n.jsx("li",{children:"Data no longer needed but required for legal claims"}),n.jsx("li",{children:"Pending verification of objection to processing"})]}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"5. Right to Data Portability"}),n.jsx("p",{className:"mb-4",children:"You have the right to receive your personal data in a structured, machine-readable format, and to transmit it to another data controller. This applies to data based on consent or a contract and processed by automated means."}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-3 mt-8",children:"How to Exercise Your Rights"}),n.jsxs("p",{className:"mb-4",children:["You may contact the organization (data controller) through a formal Data Subject Access Request (DSAR). A response is typically required within 30 days. If unsatisfied, complaints can be filed with the Nigeria Data Protection Commission (NDPC) at ",n.jsx("a",{href:"https://ndpc.gov.ng",target:"_blank",rel:"noopener noreferrer",className:"text-green-700 underline font-semibold",children:"https://ndpc.gov.ng"}),"."]})]})]})});case"us":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-flag text-2xl text-red-600"}),"US Privacy Policy"]}),n.jsxs("div",{className:"prose prose-red max-w-none",children:[n.jsx("p",{className:"text-gray-700",children:"This policy complies with CCPA and other US privacy requirements."}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key CCPA Rights"}),n.jsx("div",{className:"grid gap-4",children:[{title:"Right to Know",description:"Consumers can request disclosure of categories and specific pieces of personal information collected, sources, purposes, and third parties with whom it's shared.",link:"https://oag.ca.gov/privacy/ccpa"},{title:"Right to Delete",description:"Consumers can request the deletion of personal information collected by the business, subject to certain exceptions.",link:"https://oag.ca.gov/privacy/ccpa"},{title:"Right to Opt-Out of Sale or Sharing",description:"Consumers can direct businesses to stop selling or sharing their personal information with third parties.",link:"https://cppa.ca.gov/"},{title:"Right to Non-Discrimination",description:"Businesses cannot discriminate against consumers for exercising their CCPA rights.",link:"https://cppa.ca.gov/"}].map((s,a)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:s.title}),n.jsx("p",{className:"text-gray-600 mb-3",children:s.description}),n.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-full hover:bg-red-100 transition-colors",children:["Learn More",n.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});case"asia":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-flag text-2xl text-yellow-600"}),"Asia Privacy Policy"]}),n.jsxs("div",{className:"prose prose-yellow max-w-none",children:[n.jsx("p",{className:"text-gray-700",children:"This policy complies with APEC and Asian privacy requirements."}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key Privacy Resources"}),n.jsx("div",{className:"grid gap-4",children:[{title:"APEC Privacy Framework",description:"Comprehensive framework for privacy protection across APEC member economies.",link:"https://www.apec.org/docs/default-source/Publications/2005/12/APEC-Privacy-Framework/05_ecsg_privacyframewk.pdf"},{title:"APEC Secretariat Privacy Policy",description:"Official privacy policy and procedures of the APEC Secretariat.",link:"https://www.apec.org/docs/default-source/aboutus/policiesandprocedures/1a-apec-secretariat—personal-data-protection-policy-v2-1-%28approved-by-cmg-on-22-july-2022%29.pdf"},{title:"CBPR System Guidelines",description:"Cross-Border Privacy Rules system policies and guidelines.",link:"https://cbprs.org/wp-content/uploads/2019/11/4.-CBPR-Policies-Rules-and-Guidelines-Revised-For-Posting-3-16-updated-1709-2019.pdf"},{title:"Hong Kong Privacy Guidelines",description:"Privacy protection guidelines from the Office of the Privacy Commissioner for Personal Data.",link:"https://www.pcpd.org.hk/english/files/infocentre/1tonylam1_ppt.pdf"}].map((s,a)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:s.title}),n.jsx("p",{className:"text-gray-600 mb-3",children:s.description}),n.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-50 text-yellow-600 rounded-full hover:bg-yellow-100 transition-colors",children:["View Document",n.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});case"australia":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("i",{className:"bx bx-flag text-2xl text-purple-600"}),"Australia/Oceania Privacy Policy"]}),n.jsxs("div",{className:"prose prose-purple max-w-none",children:[n.jsx("p",{className:"text-gray-700",children:"This policy complies with Australian Privacy Principles (APPs)."}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-6 mb-4",children:"Key Privacy Resources"}),n.jsx("div",{className:"grid gap-4",children:[{title:"Australian Privacy Principles",description:"The 13 APPs that form the basis of privacy protection in Australia.",link:"https://www.oaic.gov.au/privacy/australian-privacy-principles"},{title:"Privacy Complaints",description:"Information about making privacy complaints and the complaint process.",link:"https://www.oaic.gov.au/privacy/privacy-complaints"},{title:"Privacy Guidance for Organisations and Government Agencies",description:"Guidance for organisations and government agencies on privacy obligations.",link:"https://www.oaic.gov.au/privacy/guidance-and-advice"},{title:"Notifiable Data Breaches",description:"Information about the Notifiable Data Breaches (NDB) scheme and reporting requirements.",link:"https://www.oaic.gov.au/privacy/notifiable-data-breaches"},{title:"Anonymity and Pseudonymity",description:"Guidelines on anonymity and pseudonymity in data collection.",link:"https://www.oaic.gov.au/privacy/privacy-fact-sheets/individuals/anonymity-and-pseudonymity"},{title:"Data Collection and Use",description:"Information about how personal data is collected and used.",link:"https://www.oaic.gov.au/privacy/your-privacy-rights/knowing-how-your-data-is-collected-and-used"}].map((s,a)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:s.title}),n.jsx("p",{className:"text-gray-600 mb-3",children:s.description}),n.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-50 text-purple-600 rounded-full hover:bg-purple-100 transition-colors",children:["Learn More",n.jsx("i",{className:"bx bx-external-link text-lg"})]})]},a))})]})]});default:return e("/privacy-policy"),null}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white",children:n.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{"aria-label":"back",onClick:()=>e("/privacy-policy"),className:"bg-white/10 p-2 rounded-lg hover:bg-white/20 transition-colors",children:n.jsx("i",{className:"bx bx-arrow-back text-2xl"})}),n.jsx("h1",{className:"text-3xl font-bold",children:"Privacy Settings"})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:t()}),n.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:n.jsx("div",{className:"text-gray-500 text-sm",children:"© 2025 Foremade Global. All rights reserved."})})]})]})},Bde=()=>{const[r,e]=E.useState(!1);return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("section",{className:"bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 text-white",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6 leading-tight",children:"Foremade Empowerment Hub"}),n.jsx("p",{className:"text-xl md:text-2xl text-indigo-100 max-w-3xl mx-auto leading-relaxed",children:"Empowering the Next Generation of Creators & Entrepreneurs"})]})})}),n.jsx("section",{className:"py-16 bg-white",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"text-center mb-12",children:n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-8",children:"Our Mission"})}),n.jsxs("div",{className:"prose prose-xl mx-auto text-gray-700 leading-relaxed",children:[n.jsx("p",{className:"mb-8",children:"At Foremade, we believe that the future belongs to the bold. We are committed to supporting young individuals with creative minds and entrepreneurial passion through comprehensive funding, expert mentorship, and a professional platform to showcase their talents."}),n.jsx("p",{children:"Our mission extends beyond providing tools—we create pathways for visionaries to bring their ideas to life and establish sustainable businesses that thrive both locally and globally. Each creator we sponsor represents the embodiment of passion, cultural heritage, and innovation."})]})]})}),n.jsx("section",{className:"py-16 bg-gray-50",children:n.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden",children:n.jsxs("div",{className:"md:flex",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx("img",{src:"https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2000&q=80",alt:"Handcrafted jewelry collection",className:"h-64 md:h-full w-full object-cover"})}),n.jsxs("div",{className:"md:w-1/2 p-8 md:p-12",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("span",{className:"inline-block bg-indigo-100 text-indigo-800 text-sm font-semibold px-3 py-1 rounded-full mb-4",children:"Featured Creator"}),n.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rhoda"}),n.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"Founder, Rhodabella Crafted"}),n.jsx("p",{className:"text-lg text-indigo-600 font-medium",children:"Handmade • Heritage-Inspired • Uniquely Crafted"})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("p",{className:"text-gray-700 mb-6 leading-relaxed",children:["Rhoda is a distinguished jewelry designer who masterfully blends traditional African artistry with contemporary aesthetics. Her brand, ",n.jsx("strong",{children:"Rhodabella Crafted"}),", creates handcrafted pieces that serve as both elegant accessories and powerful expressions of cultural identity."]}),n.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"From intricately beaded chokers to custom waist beads, each piece in Rhoda's collections tells a story of heritage, pride, and individual expression."}),n.jsxs("blockquote",{className:"border-l-4 border-indigo-500 pl-6 italic text-gray-600 mb-8",children:['"My jewelry transcends mere aesthetics. It honors our heritage while expressing our authentic selves."',n.jsx("footer",{className:"text-sm font-semibold text-gray-900 mt-2",children:"— Rhoda, Rhodabella Crafted"})]})]}),n.jsxs("a",{href:"https://foremade.com/store/RhodabellaCrafted",className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors duration-200",target:"_blank",rel:"noopener noreferrer",children:["Visit Store",n.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})})})}),n.jsx("section",{className:"py-16 bg-white",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Program Benefits"}),n.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Comprehensive support designed to transform creative passion into sustainable business success"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Financial Sponsorship"}),n.jsx("p",{className:"text-gray-600",children:"Funding for product development and business growth"})]}),n.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Expert Mentorship"}),n.jsx("p",{className:"text-gray-600",children:"Professional guidance in branding and digital commerce"})]}),n.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"E-commerce Platform"}),n.jsx("p",{className:"text-gray-600",children:"Professional online storefront at no cost"})]}),n.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Global Promotion"}),n.jsx("p",{className:"text-gray-600",children:"Marketing and visibility across Africa and beyond"})]})]})]})}),n.jsx("section",{className:"py-16 bg-gradient-to-r from-indigo-600 to-purple-600 mb-20",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Join Our Creator Program"}),n.jsx("p",{className:"text-xl text-indigo-100 mb-8 max-w-2xl mx-auto leading-relaxed",children:"Are you a young creator or entrepreneur ready to transform your vision into reality? Apply to become part of our exclusive empowerment program."}),n.jsx("div",{className:"flex items-center justify-center mb-8",children:n.jsxs("label",{className:"flex items-center text-white",children:[n.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-indigo-300 rounded border-white",onChange:t=>e(t.target.checked),checked:r}),n.jsxs("span",{className:"ml-2 text-sm",children:["I have read and agree to the"," ",n.jsx(he,{to:"/youth-empowerment-terms",className:"underline hover:text-indigo-200",children:"Terms and Conditions"})]})]})}),n.jsxs(he,{to:r?"/youth-empowerment-form":"#",className:`inline-flex items-center px-8 py-4 font-semibold rounded-lg transition-colors duration-200 ${r?"bg-white text-indigo-600 hover:bg-gray-100":"bg-gray-400 text-gray-700 cursor-not-allowed"}`,onClick:t=>{r||(t.preventDefault(),alert("Please accept the terms and conditions to continue."))},children:["Apply Now",n.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})]})},Hde=()=>{const[r,e]=E.useState(1),[t,s]=E.useState(!1),[a,i]=E.useState({fullName:"",age:"",email:"",businessIdea:"",motivation:"",relevantExperience:"",expectedChallenges:"",twelveMonthGoals:"",supportNeeded:""}),[o,l]=E.useState({}),{alerts:c,addAlert:u,removeAlert:h}=Bl(),f=(N,k)=>{i(A=>({...A,[N]:k})),o[N]&&l(A=>({...A,[N]:""}))},g=N=>{const k={};return N===1&&(a.fullName||(k.fullName="Name is required"),a.age||(k.age="Age is required"),a.email?/\S+@\S+\.\S+/.test(a.email)||(k.email="Invalid email"):k.email="Email is required"),N===2&&(a.businessIdea||(k.businessIdea="Business idea is required"),a.motivation||(k.motivation="Motivation is required"),a.relevantExperience||(k.relevantExperience="Relevant experience is required")),N===3&&(a.expectedChallenges||(k.expectedChallenges="Expected challenges is required"),a.twelveMonthGoals||(k.twelveMonthGoals="12-month goals is required"),a.supportNeeded||(k.supportNeeded="Support needed is required")),l(k),Object.keys(k).length===0},x=async()=>{g(r)&&(r<3?e(N=>N+1):await y())},y=async()=>{s(!0);try{const N={...a,submittedAt:new Date().toISOString(),timestamp:Date.now(),userAgent:navigator.userAgent,formType:"Youth Empowerment Application"};console.log("=== YOUTH EMPOWERMENT FORM SUBMISSION ==="),console.log("Form Data:",N),console.log("Submission Time:",new Date().toLocaleString()),console.log("Total Fields:",Object.keys(a).length),console.log("=========================================="),console.log("Sending data to /api/youth-empowerment...");const A=await fetch("https://foremade-backend.onrender.com/api/youth-empowerment",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(N)});if(console.log("API Response Status:",A.status),console.log("API Response Headers:",Object.fromEntries(A.headers.entries())),!A.ok){const _=await A.text();throw console.error("API Error Response:",_),new Error(`HTTP error! status: ${A.status}, message: ${_}`)}const R=await A.json();console.log("API Success Response:",R),console.log("=== SUBMISSION COMPLETED SUCCESSFULLY ==="),u("Application submitted successfully! We will review your application and get back to you soon.","success"),i({fullName:"",age:"",email:"",businessIdea:"",motivation:"",relevantExperience:"",expectedChallenges:"",twelveMonthGoals:"",supportNeeded:""}),e(1)}catch(N){console.error("=== SUBMISSION ERROR ==="),console.error("Error Details:",N),console.error("Error Message:",N.message),console.error("Error Stack:",N.stack),console.error("======================="),u("There was an error submitting your application. Please try again or contact support at support@foremade.com","error")}finally{s(!1)}},b=()=>{r>1&&e(N=>N-1)},v=()=>{const N={enter:{x:50,opacity:0},center:{x:0,opacity:1},exit:{x:-50,opacity:0}};return n.jsx(tn,{mode:"wait",children:n.jsxs(Ze.div,{variants:N,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},children:[r===1&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(Vl,{className:"w-6 h-6 text-neutral-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Personal Information"}),n.jsx("p",{className:"text-neutral-600",children:"Let's start with the basics"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Full Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Enter your full name",value:a.fullName,onChange:k=>f("fullName",k.target.value),className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all ${o.fullName?"border-red-500":"border-gray-300"}`}),o.fullName&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.fullName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Age ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Enter your age",value:a.age,onChange:k=>f("age",k.target.value),className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all pr-12 ${o.age?"border-red-500":"border-gray-300"}`}),n.jsx(GJ,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-neutral-400"})]}),o.age&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.age})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"your.email@example.com",value:a.email,onChange:k=>f("email",k.target.value),className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all ${o.email?"border-red-500":"border-gray-300"}`}),o.email&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.email})]})]}),r===2&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(Y5,{className:"w-6 h-6 text-neutral-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Your Business Vision"}),n.jsx("p",{className:"text-neutral-600",children:"Tell us about your entrepreneurial journey"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Idea ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"Describe your business idea in detail...",value:a.businessIdea,onChange:k=>f("businessIdea",k.target.value),rows:4,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.businessIdea?"border-red-500":"border-gray-300"}`}),o.businessIdea&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.businessIdea})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Motivation ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"What drives you to pursue this business opportunity?",value:a.motivation,onChange:k=>f("motivation",k.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.motivation?"border-red-500":"border-gray-300"}`}),o.motivation&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.motivation})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Relevant Experience ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"Share any relevant experience, skills, or background...",value:a.relevantExperience,onChange:k=>f("relevantExperience",k.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.relevantExperience?"border-red-500":"border-gray-300"}`}),o.relevantExperience&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.relevantExperience})]})]}),r===3&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(dte,{className:"w-6 h-6 text-neutral-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Goals & Support"}),n.jsx("p",{className:"text-neutral-600",children:"Help us understand how we can support your success"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Expected Challenges ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"What obstacles do you anticipate in your entrepreneurial journey?",value:a.expectedChallenges,onChange:k=>f("expectedChallenges",k.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.expectedChallenges?"border-red-500":"border-gray-300"}`}),o.expectedChallenges&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.expectedChallenges})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["12-Month Goals ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"What do you aim to achieve in the next 12 months?",value:a.twelveMonthGoals,onChange:k=>f("twelveMonthGoals",k.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.twelveMonthGoals?"border-red-500":"border-gray-300"}`}),o.twelveMonthGoals&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.twelveMonthGoals})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Support Needed from Foremade ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{placeholder:"What specific support, resources, or guidance would be most valuable to you?",value:a.supportNeeded,onChange:k=>f("supportNeeded",k.target.value),rows:3,className:`w-full px-4 py-3 sm:py-3.5 border rounded-xl text-gray-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-transparent transition-all resize-none ${o.supportNeeded?"border-red-500":"border-gray-300"}`}),o.supportNeeded&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.supportNeeded})]})]})]},r)})};return n.jsxs("div",{className:"relative",children:[n.jsx(Co,{alerts:c,removeAlert:h}),n.jsx("div",{className:"min-h-screen bg-neutral-50 py-6 px-4 sm:py-8 md:py-12 lg:py-16",children:n.jsxs("div",{className:"max-w-md lg:max-w-2xl xl:max-w-3xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8 sm:mb-10 lg:mb-12",children:[n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-black rounded-2xl flex items-center justify-center mx-auto mb-4 sm:mb-6",children:n.jsx(eO,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})}),n.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-neutral-900 mb-3 sm:mb-4 leading-tight",children:["Youth Empowerment",n.jsx("br",{}),"Program"]}),n.jsx("p",{className:"text-neutral-600 text-sm sm:text-base lg:text-lg leading-relaxed max-w-2xl mx-auto",children:"Join our exclusive community of ambitious young entrepreneurs and creators."})]}),n.jsx("div",{className:"flex justify-center items-center gap-2 sm:gap-4 lg:gap-6 mb-8 sm:mb-10 max-w-lg mx-auto",children:[1,2,3].map((N,k)=>n.jsxs(cs.Fragment,{children:[n.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center transition-all
                    ${r>N||r===N?"bg-black text-white":"bg-neutral-200 text-neutral-600"}`,children:r>N?n.jsx(Gn,{className:"w-4 h-4 sm:w-5 sm:h-5"}):n.jsx("span",{className:"text-sm sm:text-base font-bold",children:N})}),k<2&&n.jsx("div",{className:`w-8 sm:w-12 h-0.5 transition-all ${r>N+1?"bg-black":"bg-neutral-200"}`})]},N))}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 sm:p-6 lg:p-8 shadow-xl shadow-neutral-200/50 mb-6",children:[v(),n.jsxs("div",{className:"flex gap-3 mt-6 sm:mt-8 lg:mt-10",children:[r>1&&n.jsx("button",{onClick:b,className:"flex-1 px-4 py-3 sm:py-4 border border-neutral-300 rounded-xl font-semibold text-neutral-600 hover:bg-neutral-50 transition-colors lg:text-lg",children:"Previous"}),n.jsx("button",{onClick:x,disabled:t,className:`flex-1 bg-black text-white py-3 sm:py-4 px-6 rounded-xl font-semibold flex items-center justify-center gap-2 transition-colors lg:text-lg ${t?"bg-gray-400 cursor-not-allowed":"hover:bg-neutral-800"}`,children:r===3?t?n.jsxs(n.Fragment,{children:["Submitting...",n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"})]}):n.jsxs(n.Fragment,{children:["Submit Application",n.jsx(Gn,{className:"w-4 h-4"})]}):n.jsxs(n.Fragment,{children:["Continue",n.jsx(Yf,{className:"w-4 h-4"})]})})]})]}),n.jsx("div",{className:"text-center",children:n.jsxs("p",{className:"text-xs sm:text-sm lg:text-base text-neutral-500",children:["Questions? Contact us at"," ",n.jsx("span",{className:"text-black font-medium hover:underline",children:"support@foremade.com"})]})})]})})]})},$de=()=>n.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 min-h-screen py-12",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsx(Hde,{})})}),Wde=()=>n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:[n.jsxs("div",{className:"max-w-5xl mx-auto p-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-100",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 rounded-full",children:n.jsx("i",{className:"bx bx-world text-3xl text-white"})})}),n.jsx("h1",{className:"text-4xl font-bold text-center bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"FOREMADE Youth Empowerment"}),n.jsx("h2",{className:"text-2xl font-semibold text-center text-gray-700 mb-4",children:"Terms of Engagement"}),n.jsx("div",{className:"bg-indigo-50 rounded-lg p-4",children:n.jsx("p",{className:"text-center text-gray-700 font-medium",children:'"Empowered Creators Collaboration Agreement"'})}),n.jsxs("p",{className:"mt-6 text-gray-600 text-center leading-relaxed",children:["This agreement outlines the terms and conditions between ",n.jsx("strong",{className:"text-indigo-600",children:"FOREMADE Marketplace"}),' ("FOREMADE") and the selected participant/brand ("Creator") under the ',n.jsx("strong",{className:"text-purple-600",children:"FOREMADE Youth Empowerment Initiative"}),"."]})]}),n.jsx("div",{className:"space-y-6",children:Yde.map((r,e)=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"bg-indigo-50 p-2 rounded-lg mr-3",children:n.jsx("i",{className:`bx ${r.icon} text-indigo-600 text-xl`})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:r.title})]}),r.content]},e))}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 text-white mb-20",children:[n.jsxs("div",{className:"flex items-center justify-center mb-4",children:[n.jsx("i",{className:"bx bx-handshake text-3xl mr-3"}),n.jsx("h3",{className:"text-xl font-semibold",children:"Agreement Commitment"})]}),n.jsx("p",{className:"text-center leading-relaxed",children:n.jsx("strong",{children:"By entering into this agreement, both parties commit to upholding the objectives of the Youth Empowerment Initiative in a fair and transparent manner."})})]})]}),n.jsx("link",{href:"https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css",rel:"stylesheet"})]}),Yde=[{icon:"bx-target-lock",title:"1. Purpose",content:n.jsx("p",{className:"text-gray-600 leading-relaxed ml-12",children:"The initiative aims to empower talented youth-led creators by offering financial support, free retail exposure, and a structured commercial partnership to scale their creations through the FOREMADE platform."})},{icon:"bx-briefcase",title:"2. Project Scope",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-dollar-circle text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Provide initial funding for production setup"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-store text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Offer access to online retail infrastructure"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-trending-up text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Co-market the Creator's selected product lines through web and social campaigns"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-shield-check text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-600",children:["Retain co-ownership of the empowered product lines ",n.jsx("strong",{className:"text-indigo-600",children:"until 10,000 units are sold"})]})]})]})},{icon:"bx-time",title:"3. Duration & Termination",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-calendar text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-600",children:["The partnership runs until a total of ",n.jsx("strong",{className:"text-indigo-600",children:"10,000 units"})," have been sold"]})]}),n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 mt-3",children:[n.jsx("div",{className:"font-medium text-indigo-700 mb-2",children:"After reaching this threshold:"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-crown text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-600",children:["Creator retains ",n.jsx("strong",{className:"text-indigo-600",children:"100% ownership"})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-no-entry text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"FOREMADE no longer shares in profits"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-wallet text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"50% of capital funding is retained by the Creator"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-refresh text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Option to renew under revised terms"})]})]})]})]})},{icon:"bx-pie-chart-alt",title:"4. Profit Sharing",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsx("div",{className:"bg-indigo-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-line-chart text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-700",children:[n.jsx("strong",{children:"0–10,000 units:"})," Creator gets ",n.jsx("strong",{className:"text-indigo-600",children:"40% net profit"})]})]})}),n.jsx("div",{className:"bg-indigo-50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-trending-up text-indigo-500 mr-2"}),n.jsxs("span",{className:"text-gray-700",children:[n.jsx("strong",{children:"Post-10,000 units:"})," Creator gets ",n.jsx("strong",{className:"text-indigo-600",children:"60%"}),", FOREMADE gets ",n.jsx("strong",{className:"text-indigo-600",children:"40%"})," (if agreement continues)"]})]})})]})},{icon:"bx-money",title:"5. Capital Funding",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-package text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Initial setup costs covered by FOREMADE"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-repeat text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Performance-based funding adjustments"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-coin-stack text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Materials and packaging support included"})]})]})},{icon:"bx-refresh",title:"6. Continuation Clause",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-copyright text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Creator retains intellectual property rights"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-package text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"FOREMADE continues logistics support"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-calendar-check text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Quarterly performance reviews"})]})]})},{icon:"bx-package",title:"7. Product Standards",content:n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed ml-12",children:"All products must meet agreed quality standards. Packaging design must align with youth-focused branding and maintain consistency with the Creator's vision while meeting FOREMADE's marketplace requirements."})},{icon:"bx-bullhorn",title:"8. Marketing & Branding",content:n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed ml-12",children:'Products will be featured prominently on the "Empowered Creators" section. All marketing materials will include Creator credits and cultural storytelling elements to maintain authenticity.'})},{icon:"bx-exit",title:"9. Termination Clause",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-time text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"14 days notice required"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-calculator text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Fair reconciliation of funding and inventory"})]})]})},{icon:"bx-balance-scale",title:"10. Dispute Resolution",content:n.jsxs("div",{className:"ml-12 space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-conversation text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Mediation as primary resolution method"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("i",{className:"bx bx-book-open text-indigo-500 mr-2"}),n.jsx("span",{className:"text-gray-600",children:"Local jurisdiction laws apply"})]}),n.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:[n.jsx("strong",{children:"Note:"})," All disputes will be handled in accordance with the laws applicable to your country of operation."]})]})}],qde=()=>{const r=()=>{window.open("https://gdpr-info.eu/art-15-gdpr/","_blank","noopener,noreferrer")};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white",children:n.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(he,{to:"/privacy-policy/eu",className:"bg-white/10 p-2 rounded-lg hover:bg-white/20 transition-colors",children:n.jsx("i",{className:"bx bx-arrow-back text-2xl"})}),n.jsx("h1",{className:"text-3xl font-bold",children:"Right of Access (Article 15 GDPR)"})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"prose prose-blue max-w-none",children:[n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-gray-700",children:"To view the official text of Article 15 of the GDPR, please click the button below to open it in a new window:"})}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx("i",{className:"bx bx-external-link text-xl"}),"View Article 15 GDPR"]})}),n.jsxs("div",{className:"mt-8 bg-gray-50 p-6 rounded-lg",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"How to Exercise Your Right"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"To exercise your right of access, you can:"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("i",{className:"bx bx-envelope text-blue-600 text-xl mt-1"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:"Email Request"}),n.jsx("p",{className:"text-gray-600",children:"Send your request to privacy@foremade.com"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("i",{className:"bx bx-user text-blue-600 text-xl mt-1"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:"Privacy Centre"}),n.jsxs("p",{className:"text-gray-600",children:["Submit your request through our ",n.jsx(he,{to:"/privacy-policy/contact",className:"text-blue-600 hover:text-blue-800",children:"Privacy Centre"})]})]})]})]})]})]})}),n.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:n.jsx("div",{className:"text-gray-500 text-sm",children:"© 2025 Foremade Global. All rights reserved."})})]})]})},ih=({category:r})=>{const e={"Tablet & Phones":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496510/photo_2025-06-09_20-11-21_vsojz8.jpg","Health & Beauty":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496502/photo_2025-06-09_20-11-23_2_kwjqqr.jpg",Electronics:"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496477/photo_2025-06-09_20-11-29_tzs0vs.jpg","Computers & Accessories":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496469/photo_2025-06-09_20-11-31_xtfepw.jpg","Baby Products":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749496470/photo_2025-06-09_20-11-30_ht9ms8.jpg","Games & Fun":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749425277/photo_2025-06-09_00-28-12_dt7sp3.jpg","Drinks & Categories":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749417059/photo_2025-06-08_22-10-17_inpwcf.jpg","Home & Kitchen":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749425370/photo_2025-06-09_00-28-16_mildb8.jpg","Smart Watches":"https://res.cloudinary.com/dvhogp27g/image/upload/v1749425266/photo_2025-06-09_00-28-13_hai2go.jpg"};return n.jsxs("div",{className:"w-full h-[200px] relative overflow-hidden rounded-lg mb-6",children:[n.jsx("img",{src:e[r]||"default-banner-url.jpg",alt:`${r} banner`,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/50 to-transparent",children:n.jsx("div",{className:"flex items-center h-full px-6",children:n.jsx("h1",{className:"hidden text-3xl font-bold text-white",children:r})})})]})};function Xde(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null),o="Tablet & Phones",l=1,c="tablet & phones";return E.useEffect(()=>{(async()=>{try{s(!0),i(null);const h=ft(_e(J,"products"),rt("category","==",c)),g=(await Ke(h)).docs.map(y=>{const b=y.data();return{id:y.id,...b}});console.log("All fetched products (Tablet & Phones):",g);const x=g.map(y=>{const b=y;let v=b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://")?b.imageUrl:Array.isArray(b.imageUrls)&&b.imageUrls[0]&&typeof b.imageUrls[0]=="string"&&b.imageUrls[0].startsWith("https://")?b.imageUrls[0]:"/images/placeholder.jpg";return{id:y.id,name:b.name||"Unnamed Product",description:b.description||"",price:b.price||0,stock:b.stock||0,category:b.category||"tablet & phones",categoryId:b.category?.trim().toLowerCase()===c.toLowerCase()?l:1,colors:b.colors||[],sizes:b.sizes||[],condition:b.condition||"",imageUrl:v,sellerId:b.sellerId||"",rating:b.rating||Math.random()*2+3}}).filter(y=>y.stock<10?(console.warn("Filtered out product with low stock (Tablet & Phones):",{id:y.id,name:y.name,stock:y.stock}),!1):!(y.imageUrl&&typeof y.imageUrl=="string"&&y.imageUrl.startsWith("https://"))&&y.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (Tablet & Phones):",{id:y.id,name:y.name,imageUrl:y.imageUrl}),!1):!0).sort((y,b)=>b.rating-y.rating);if(console.log(`Fetched ${o} products:`,x),x.length===0){console.warn("No products passed the filters (Tablet & Phones). Relaxing stock filter to debug...");const y=g.map(b=>{const v=b;let N=v.imageUrl&&typeof v.imageUrl=="string"&&v.imageUrl.startsWith("https://")?v.imageUrl:Array.isArray(v.imageUrls)&&v.imageUrls[0]&&typeof v.imageUrls[0]=="string"&&v.imageUrls[0].startsWith("https://")?v.imageUrls[0]:"/images/placeholder.jpg";return{id:b.id,name:v.name||"Unnamed Product",description:v.description||"",price:v.price||0,stock:v.stock||0,category:v.category||"tablet & phones",categoryId:v.category?.trim().toLowerCase()===c.toLowerCase()?l:1,colors:v.colors||[],sizes:v.sizes||[],condition:v.condition||"",imageUrl:N,sellerId:v.sellerId||"",rating:v.rating||Math.random()*2+3}}).filter(b=>!(b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://"))&&b.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (relaxed filter, Tablet & Phones):",{id:b.id,name:b.name,imageUrl:b.imageUrl}),!1):!0);console.log("Products with relaxed stock filter (Tablet & Phones):",y),e(y.sort((b,v)=>v.rating-b.rating))}else e(x)}catch(h){console.error(`Error loading ${o} products:`,{message:h.message,code:h.code}),i(`Failed to load ${o} products.`)}finally{s(!1)}})()},[]),t?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(ih,{category:o}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(4)].map((u,h)=>n.jsx("div",{className:"w-full",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},h))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(ih,{category:o}),n.jsxs("div",{className:"flex mt-6 justify-between items-center mb-6",children:[n.jsxs("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:["Trending ",o]}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx(he,{to:`/products?category=${l}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"})})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[r.length===0?n.jsxs("p",{className:"text-gray-600",children:["No ",o," products found."]}):r.map(u=>n.jsx("div",{className:"w-full",children:n.jsx(Vr,{product:u})},u.id)),console.log(a)]})]})})}function Gde(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null),o="Electronics",l=3,c="electronics";return E.useEffect(()=>{(async()=>{try{s(!0),i(null);const h=ft(_e(J,"products"),rt("category","==",c)),g=(await Ke(h)).docs.map(y=>{const b=y.data();return{id:y.id,...b}});console.log("All fetched products (Electronics):",g);const x=g.map(y=>{const b=y;let v=b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://")?b.imageUrl:Array.isArray(b.imageUrls)&&b.imageUrls[0]&&typeof b.imageUrls[0]=="string"&&b.imageUrls[0].startsWith("https://")?b.imageUrls[0]:"/images/placeholder.jpg";return{id:y.id,name:b.name||"Unnamed Product",description:b.description||"",price:b.price||0,stock:b.stock||0,category:b.category||"electronics",categoryId:b.category?.trim().toLowerCase()===c.toLowerCase()?l:3,colors:b.colors||[],sizes:b.sizes||[],condition:b.condition||"",imageUrl:v,sellerId:b.sellerId||"",rating:b.rating||Math.random()*2+3}}).filter(y=>y.stock<10?(console.warn("Filtered out product with low stock (Electronics):",{id:y.id,name:y.name,stock:y.stock}),!1):!(y.imageUrl&&typeof y.imageUrl=="string"&&y.imageUrl.startsWith("https://"))&&y.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (Electronics):",{id:y.id,name:y.name,imageUrl:y.imageUrl}),!1):!0).sort((y,b)=>b.rating-y.rating);if(console.log(`Fetched ${o} products:`,x),x.length===0){console.warn("No products passed the filters (Electronics). Relaxing stock filter to debug...");const y=g.map(b=>{const v=b;let N=v.imageUrl&&typeof v.imageUrl=="string"&&v.imageUrl.startsWith("https://")?v.imageUrl:Array.isArray(v.imageUrls)&&v.imageUrls[0]&&typeof v.imageUrls[0]=="string"&&v.imageUrls[0].startsWith("https://")?v.imageUrls[0]:"/images/placeholder.jpg";return{id:b.id,name:v.name||"Unnamed Product",description:v.description||"",price:v.price||0,stock:v.stock||0,category:v.category||"electronics",categoryId:v.category?.trim().toLowerCase()===c.toLowerCase()?l:3,colors:v.colors||[],sizes:v.sizes||[],condition:v.condition||"",imageUrl:N,sellerId:v.sellerId||"",rating:v.rating||Math.random()*2+3}}).filter(b=>!(b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://"))&&b.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (relaxed filter, Electronics):",{id:b.id,name:b.name,imageUrl:b.imageUrl}),!1):!0);console.log("Products with relaxed stock filter (Electronics):",y),e(y.sort((b,v)=>v.rating-b.rating))}else e(x)}catch(h){console.error(`Error loading ${o} products:`,{message:h.message,code:h.code}),i(`Failed to load ${o} products.`)}finally{s(!1)}})()},[]),t?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(ih,{category:o}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[...Array(4)].map((u,h)=>n.jsx("div",{className:"w-full",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},h))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(ih,{category:o}),n.jsxs("div",{className:"flex mt-6 justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx(he,{to:`/products?category=${l}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"})})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[r.length===0?n.jsxs("p",{className:"text-gray-600 p-4",children:["No ",o," products found."]}):r.map(u=>n.jsx("div",{className:"w-full",children:n.jsx(Vr,{product:u})},u.id)),console.log(a)]})]})})}function Kde(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null),o="Smart Watches",l=9,c="smart watches";return E.useEffect(()=>{(async()=>{try{s(!0),i(null);const h=ft(_e(J,"products"),rt("category","==",c)),g=(await Ke(h)).docs.map(y=>{const b=y.data();return{id:y.id,...b}});console.log("All fetched products (Smart Watches):",g);const x=g.map(y=>{const b=y;let v=b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://")?b.imageUrl:Array.isArray(b.imageUrls)&&b.imageUrls[0]&&typeof b.imageUrls[0]=="string"&&b.imageUrls[0].startsWith("https://")?b.imageUrls[0]:"/images/placeholder.jpg";return{id:y.id,name:b.name||"Unnamed Product",description:b.description||"",price:b.price||0,stock:b.stock||0,category:b.category||"smart watches",categoryId:b.category?.trim().toLowerCase()===c.toLowerCase()?l:9,colors:b.colors||[],sizes:b.sizes||[],condition:b.condition||"",imageUrl:v,sellerId:b.sellerId||"",rating:b.rating||Math.random()*2+3}}).filter(y=>y.stock<10?(console.warn("Filtered out product with low stock (Smart Watches):",{id:y.id,name:y.name,stock:y.stock}),!1):!(y.imageUrl&&typeof y.imageUrl=="string"&&y.imageUrl.startsWith("https://"))&&y.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (Smart Watches):",{id:y.id,name:y.name,imageUrl:y.imageUrl}),!1):!0).sort((y,b)=>b.rating-y.rating);if(console.log(`Fetched ${o} products:`,x),x.length===0){console.warn("No products passed the filters (Smart Watches). Relaxing stock filter to debug...");const y=g.map(b=>{const v=b;let N=v.imageUrl&&typeof v.imageUrl=="string"&&v.imageUrl.startsWith("https://")?v.imageUrl:Array.isArray(v.imageUrls)&&v.imageUrls[0]&&typeof v.imageUrls[0]=="string"&&v.imageUrls[0].startsWith("https://")?v.imageUrls[0]:"/images/placeholder.jpg";return{id:b.id,name:v.name||"Unnamed Product",description:v.description||"",price:v.price||0,stock:v.stock||0,category:v.category||"smart watches",categoryId:v.category?.trim().toLowerCase()===c.toLowerCase()?l:9,colors:v.colors||[],sizes:v.sizes||[],condition:v.condition||"",imageUrl:N,sellerId:v.sellerId||"",rating:v.rating||Math.random()*2+3}}).filter(b=>!(b.imageUrl&&typeof b.imageUrl=="string"&&b.imageUrl.startsWith("https://"))&&b.imageUrl!=="/images/placeholder.jpg"?(console.warn("Filtered out product with invalid imageUrl (relaxed filter, Smart Watches):",{id:b.id,name:b.name,imageUrl:b.imageUrl}),!1):!0);console.log("Products with relaxed stock filter (Smart Watches):",y),e(y.sort((b,v)=>v.rating-b.rating))}else e(x)}catch(h){console.error(`Error loading ${o} products:`,{message:h.message,code:h.code}),i(`Failed to load ${o} products.`)}finally{s(!1)}})()},[]),t?n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(ih,{category:o}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(4)].map((u,h)=>n.jsx("div",{className:"w-full",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 w-full animate-pulse"})},h))})]})}):n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(ih,{category:o}),n.jsxs("div",{className:"flex mt-6 justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:o}),n.jsx("div",{className:"flex items-center gap-3",children:n.jsx(he,{to:`/products?category=${l}`,className:"text-blue-600 text-sm hover:text-blue-400",children:"See All"})})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:[r.length===0?n.jsx("p",{className:"text-gray-600",children:"No product found."}):r.map(u=>n.jsx("div",{className:"w-full",children:n.jsx(Vr,{product:u})},u.id)),console.log(a)]})]})})}const Qde=r=>{switch(r.message){case"Network Error":return"Check your network connection and try again.";case"No user found with this email":return"No user found with this email.";case"Valid email is required":return"Please enter a valid email address.";default:return"An unexpected error occurred. Please try again later."}};function Zde(){const r=us(),[e,t]=E.useState(""),[s,a]=E.useState(""),[i,o]=E.useState(""),[l,c]=E.useState(!1),u=f=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f),h=async f=>{if(f.preventDefault(),a(""),o(""),c(!0),!e){a("Email is required."),c(!1);return}if(!u(e)){a("Please enter a valid email address."),c(!1);return}try{const g=await fetch("https://foremade-backend.onrender.com/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),x=await g.json();if(!g.ok)throw new Error(x.error||"Failed to send reset link");o(`Password reset email sent to ${e}. Please check your inbox.`),t(""),setTimeout(()=>{c(!1),r("/login")},7e3)}catch(g){console.error("Error sending password reset email:",g),a(Qde(g)),c(!1)}};return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"w-full h-screen flex",children:[n.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://images.pexels.com/photos/5625115/pexels-photo-5625115.jpeg?auto=compress&cs=tinysrgb&w=600')"},children:n.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 dark:bg-black/50 flex flex-col justify-center items-center text-white p-8",children:[n.jsx("h1",{className:"text-3xl font-bold flex-col items-center",children:n.jsx("img",{src:kh,alt:"Formade logo",className:"h-20"})}),n.jsx("p",{className:"text-lg",children:"Recover Your Password."})]})}),n.jsxs("div",{className:"w-full md:w-1/2 h-full p-9 flex flex-col justify-center bg-white dark:bg-gray-800",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Forgot Password"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Already have an account?"," ",n.jsx(he,{to:"/login",className:"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Sign In"})]}),n.jsxs("form",{onSubmit:h,className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"email",id:"email",value:e,onChange:f=>{t(f.target.value),a("")},className:`w-full p-3 border rounded-lg transition-all duration-300 ${s?"border-red-500":i?"border-green-500":"border-gray-300 dark:border-gray-600"}`,autoComplete:"email",required:!0}),n.jsx("label",{htmlFor:"email",className:`absolute left-3 top-3 text-gray-500 dark:text-gray-400 transition-all duration-300 transform origin-left pointer-events-none peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-500 peer-focus:bg-white dark:peer-focus:bg-gray-800 peer-focus:px-1 ${e?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":""}`,children:"Email"}),n.jsx("span",{className:"absolute right-3 top-3 text-blue-500 dark:text-blue-400",children:n.jsx("i",{className:"bx bx-envelope text-xl"})}),s&&n.jsx("p",{className:"text-red-600 text-[10px] mt-1",children:s})]}),i&&n.jsx("p",{className:"text-green-600 text-[10px] mb-4",children:i}),n.jsx("button",{type:"submit",className:"w-full bg-slate-600 text-white p-3 rounded-lg hover:bg-blue-800 transition duration-200 dark:bg-slate-700 dark:hover:bg-blue-900",disabled:l,children:l?"Sending...":n.jsxs(n.Fragment,{children:["Send Reset Link"," ",n.jsx("i",{className:"bx bx-send text-blue-500 text-xl inline-block ml-2"})]})})]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-5",children:["Don’t have an account?"," ",n.jsx(he,{to:"/register",className:"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300",children:"Sign Up"})]})]})]})})}const Jde="https://foremade-backend.onrender.com",eue=r=>{switch(r.message){case"Network Error":return"Check your network connection and try again.";case"Invalid or used token":return"Invalid or expired reset link. Please request a new one.";case"No user found with this email":return"No user found with this email.";case"New password must be at least 8 characters":return"New password must be at least 8 characters long.";default:return"An unexpected error occurred. Please try again later."}};function tue(){const r=us(),e=Br(),[t,s]=E.useState(""),[a,i]=E.useState(""),[o,l]=E.useState(""),[c,u]=E.useState(!1),h=new URLSearchParams(e.search),f=h.get("token"),g=h.get("email");E.useEffect(()=>{(!f||!g)&&i("Invalid or missing reset link. Please request a new one.")},[f,g]);const x=async y=>{if(y.preventDefault(),i(""),l(""),u(!0),!t){i("New password is required."),u(!1);return}if(t.length<8){i("New password must be at least 8 characters long."),u(!1);return}try{const b=await fetch(`${Jde}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g,token:f,newPassword:t})});let v;try{v=await b.json()}catch(N){throw console.error("JSON parse error:",N),new Error("Server returned an invalid response")}if(!b.ok)throw new Error(v.error||"Failed to reset password");l("Password reset successfully! Redirecting to login..."),s(""),setTimeout(()=>{u(!1),r("/login")},3e3)}catch(b){console.error("Error resetting password:",b),i(eue(b)),u(!1)}};return n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:n.jsxs("div",{className:"w-full h-screen flex",children:[n.jsx("div",{className:"hidden md:block md:w-1/2 h-full bg-cover bg-center",style:{backgroundImage:"url('https://images.pexels.com/photos/5625115/pexels-photo-5625115.jpeg?auto=compress&cs=tinysrgb&w=600')"},children:n.jsxs("div",{className:"w-full h-full bg-black bg-opacity-40 dark:bg-black/50 flex flex-col justify-center items-center text-white p-8",children:[n.jsx("h1",{className:"text-3xl font-bold flex-col items-center",children:n.jsx("img",{src:kh,alt:"Formade logo",className:"h-20",onError:y=>{y.target.src="/fallback-logo.png"}})}),n.jsx("p",{className:"text-lg",children:"Reset Your Password"})]})}),n.jsxs("div",{className:"w-full md:w-1/2 h-full p-6 sm:p-9 flex flex-col justify-center bg-white dark:bg-gray-800",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Reset Password"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Back to login?"," ",n.jsx(he,{to:"/login",className:"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300","aria-label":"Sign in to your account",children:"Sign In"})]}),n.jsxs("form",{onSubmit:x,className:"space-y-4",noValidate:!0,children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"password",id:"new-password",value:t,onChange:y=>{s(y.target.value),i(""),l("")},className:`w-full p-3 border rounded-lg transition-all duration-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 ${a?"border-red-500":o?"border-green-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100`,autoComplete:"new-password",required:!0,disabled:c,"aria-describedby":a?"password-error":void 0,"aria-invalid":a?"true":"false"}),n.jsx("label",{htmlFor:"new-password",className:`absolute left-3 top-3 text-gray-500 dark:text-gray-400 transition-all duration-300 transform origin-left pointer-events-none ${t?"-translate-y-6 scale-75 text-blue-500 bg-white dark:bg-gray-800 px-1":"peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-500 peer-focus:bg-white dark:peer-focus:bg-gray-800 peer-focus:px-1"}`,children:"New Password"}),n.jsx("span",{className:"absolute right-3 top-3 text-blue-500 dark:text-blue-400",children:n.jsx("i",{className:"bx bx-lock text-xl"})}),a&&n.jsx("p",{id:"password-error",className:"text-red-600 text-xs mt-1",children:a})]}),o&&n.jsxs("div",{className:"relative bg-green-100 text-green-700 p-3 rounded-lg flex items-center justify-between",children:[n.jsx("p",{className:"text-sm",children:o}),n.jsx("button",{onClick:()=>r("/login"),className:"ml-2 text-green-700 hover:text-green-900 focus:outline-none focus:ring-2 focus:ring-green-500","aria-label":"Dismiss success message and go to login",children:n.jsx("i",{className:"bx bx-check-circle text-xl"})})]}),n.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold transition duration-200 flex items-center justify-center space-x-2 ${c||!f||!g?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-slate-600 hover:bg-blue-800 dark:bg-slate-700 dark:hover:bg-blue-900 text-white"}`,disabled:c||!f||!g,"aria-label":"Reset password",children:c?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z"})]}),n.jsx("span",{children:"Resetting..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"Reset Password"}),n.jsx("i",{className:"bx bx-lock text-xl"})]})})]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-5",children:["Don’t have an account?"," ",n.jsx(he,{to:"/register",className:"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300","aria-label":"Sign up for a new account",children:"Sign Up"})]})]})]})})}const sue={Shoes:"https://banner2.cleanpng.com/20180406/wow/kisspng-shoe-jumpman-sneakers-air-jordan-teal-jordan-5ac6ff9c2fcfe2.7959868915229910041959.jpg",Fashion:"https://pngimg.com/uploads/dress_shirt/dress_shirt_PNG8088.png",Phones:"https://banner2.cleanpng.com/20240415/cv/transparent-apple-logo-person-holding-iphone-11-pro-max661df755177ea1.73458741.webp",Laptops:"https://banner2.cleanpng.com/lnd/20240424/uxz/transparent-rainbow-open-laptop-with-rainbow-gradient-background-image662945f170dc49.58708681.webp",Watches:"https://banner2.cleanpng.com/20180202/lie/av2ldq3r4.webp",Electronics:"https://banner2.cleanpng.com/20180131/jgw/av1z4nree.webp"};function rue(r){const e=Lo();Br();const t=r.category||e.category||"",[s,a]=E.useState([]),[i,o]=E.useState(!0);E.useEffect(()=>{if(!t)return;(async()=>{o(!0);try{const u=ft(_e(J,"products"),rt("category","==",t.toLowerCase())),f=(await Ke(u)).docs.map(g=>({id:g.id,...g.data()}));a(f)}catch{a([])}finally{o(!1)}})()},[t]);const l=sue[t]||null;return n.jsxs("section",{className:"py-8 bg-white",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative w-full h-40 md:h-56 bg-gradient-to-r from-blue-100 to-blue-300 flex items-center justify-center rounded-lg overflow-hidden",children:[l&&n.jsx("img",{src:l,alt:t,className:"absolute right-4 bottom-0 h-32 md:h-48 object-contain opacity-60 pointer-events-none",style:{maxWidth:"40%"}}),n.jsx("h1",{className:"relative z-10 text-2xl md:text-4xl font-bold text-blue-900 drop-shadow-lg",children:t?`${t} Products`:"Products"})]})}),n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-4",children:t?`Products in ${t}`:"Products"}),i?n.jsx("div",{children:"Loading..."}):s.length===0?n.jsx("p",{className:"text-gray-600",children:"No products found for this category."}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:s.map(c=>n.jsx(Vr,{product:c},c.id))})]})]})}const aue=()=>n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[n.jsx("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white",children:n.jsx("div",{className:"max-w-4xl mx-auto px-6 py-16",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:n.jsx("i",{className:"bx bx-store text-4xl text-blue-600"})})}),n.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"About Us"}),n.jsx("p",{className:"text-xl text-blue-100",children:"Shop. Sell. Smile."})]})})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"prose prose-lg max-w-none",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Welcome to ",n.jsx("strong",{className:"text-blue-600",children:"FOREMADE Marketplace"})," — the people-first platform where ",n.jsx("em",{children:"everyone can shop, sell, and smile"}),".",n.jsx("br",{}),"Whether you're clearing out the old, launching something new, or simply looking to buy smart, FOREMADE gives you the tools, the platform, and the audience."]})}),n.jsx("div",{className:"mb-8",children:n.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["We're ",n.jsx("strong",{className:"text-blue-600",children:"not just another marketplace"}),". FOREMADE was created to ",n.jsx("strong",{children:"level the playing field"})," — giving everyday people, creatives, and entrepreneurs a ",n.jsx("strong",{children:"free, secure space to sell"})," new or used products and reach buyers everywhere."]})}),n.jsxs("div",{className:"mb-12",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-star text-2xl text-yellow-500 mr-3"}),"What Makes Us Different?"]}),n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{icon:"bx-gift",title:"Free to Sell",desc:"List your items at no cost — new, handmade, or preloved."},{icon:"bx-money",title:"Get Paid Fast",desc:"Sellers receive full payment after confirmed deliveries. No delays."},{icon:"bx-mobile",title:"User-Friendly Platform",desc:"Designed to be mobile-first, easy to use, and built with sellers in mind."},{icon:"bx-globe",title:"Worldwide Reach",desc:"Buy or sell across cities, countries, and continents."},{icon:"bx-shield",title:"Safe & Secure",desc:"Protected payments, verified vendors, and encrypted data."},{icon:"bx-check-shield",title:"Zero Tolerance for Fraud",desc:"Robust anti-money laundering and transaction monitoring systems."},{icon:"bx-truck",title:"Fast, Discounted Delivery",desc:"Reliable logistics and savings on bundled shipments."}].map((r,e)=>n.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsx("div",{className:"text-blue-600 flex items-center justify-center w-8",children:n.jsx("i",{className:`bx ${r.icon} text-2xl`})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:r.title}),n.jsx("p",{className:"text-sm text-gray-600",children:r.desc})]})]},e))})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-globe text-2xl text-green-600 mr-3"}),"For Everyone. Open to the World."]}),n.jsx("p",{className:"text-gray-700 leading-relaxed",children:"FOREMADE empowers sellers from all walks of life to connect with a growing global marketplace. Whether you're a student with a side hustle or a brand ready to scale, we help you get noticed — and get paid."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-100",children:[n.jsx("p",{className:"text-gray-800 font-semibold mb-2",children:"Shop what you love. Sell what you have. To your neighborhood — or across borders. And always, smile."}),n.jsx("p",{className:"text-gray-600 italic",children:"Because on FOREMADE, everyone is a seller, and everyone is a customer."})]})]})}),n.jsx("div",{className:"mt-12 text-center",children:n.jsxs(he,{to:"/products",className:"inline-flex items-center gap-2 px-6 py-3 bg-[#112d4e] text-white rounded-lg hover:bg-[#112d4e] transition-colors",children:["Start Shopping",n.jsx("i",{className:"bx bx-right-arrow-alt"})]})}),n.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center",children:n.jsx("div",{className:"text-gray-500 text-sm",children:"© 2025 Foremade Global. All rights reserved."})})]})]}),nue=()=>{const[r,e]=E.useState(""),[t,s]=E.useState([]),[a,i]=E.useState(!1),[o,l]=E.useState([]),[c,u]=E.useState("All"),[h,f]=E.useState([0,1e5]);E.useEffect(()=>{(async()=>{try{const y=await Ke(_e(J,"products")),b=new Set(y.docs.map(v=>v.data().category||"Other"));l(["All",...b])}catch(y){console.error("Error fetching categories:",y),xe.error("Failed to load categories.")}})()},[]);const g=async()=>{if(!r.trim()){s([]);return}i(!0);try{let x=ft(_e(J,"products"),rt("status","==","approved"));c!=="All"&&(x=ft(x,rt("category","==",c)));const b=(await Ke(x)).docs.map(v=>({id:v.id,...v.data()})).filter(v=>v.name.toLowerCase().includes(r.toLowerCase())&&v.price>=h[0]&&v.price<=h[1]);s(b)}catch(x){console.error("Error searching products:",x),xe.error("Failed to load search results.")}finally{i(!1)}};return E.useEffect(()=>{const x=setTimeout(g,500);return()=>clearTimeout(x)},[r,c,h]),n.jsx("div",{className:"min-h-screen bg-gray-100 py-4 xs:py-6",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsxs("div",{className:"relative mb-4 xs:mb-6",children:[n.jsx("input",{type:"text",placeholder:"Search for items...",value:r,onChange:x=>e(x.target.value),className:"w-full pl-10 pr-4 py-2 xs:py-3 rounded-full bg-white shadow-sm text-sm xs:text-base focus:outline-none focus:ring-2 focus:ring-blue-500 justify-end"}),n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-lg xs:text-xl"})]}),n.jsxs("div",{className:"flex flex-col xs:flex-row gap-3 xs:gap-4 mb-4 xs:mb-6",children:[n.jsx("select",{value:c,onChange:x=>u(x.target.value),className:"px-3 py-2 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.map(x=>n.jsx("option",{value:x,children:x},x))}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",placeholder:"Min",value:h[0]||"",onChange:x=>f([Number(x.target.value)||0,h[1]]),className:"w-20 px-2 py-2 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("span",{children:"-"}),n.jsx("input",{type:"number",placeholder:"Max",value:h[1]||"",onChange:x=>f([h[0],Number(x.target.value)||1e5]),className:"w-20 px-2 py-2 rounded-lg bg-white shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a?n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 xs:gap-4",children:[...Array(8)].map((x,y)=>n.jsx("div",{className:"bg-white rounded-lg shadow-sm h-[260px] animate-pulse"},y))}):t.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-600",children:[n.jsx("i",{className:"bx bx-search-alt-2 text-4xl mb-2"}),n.jsx("p",{className:"text-sm xs:text-base",children:"No products found. Try a different search term."})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 xs:gap-4",children:t.map(x=>n.jsx(Vr,{product:{id:x.id,name:x.name,price:x.price,imageUrls:x.imageUrls,sellerName:x.sellerName||"Unknown Seller"}},x.id))})]})})},iue=()=>{const[r,e]=E.useState([]),[t,s]=E.useState(!0);E.useEffect(()=>{(async()=>{s(!0);try{const c=ve.currentUser?.uid;if(!c){e([]),s(!1);return}const u=ft(_e(J,"notifications"),rt("userId","==",c),jg("createdAt","desc")),f=(await Ke(u)).docs.map(g=>({id:g.id,...g.data()}));e(f)}catch(c){console.error("Error fetching notifications:",c),xe.error("Failed to load notifications.")}finally{s(!1)}})()},[]);const a=l=>{switch(l){case"signup":return"bx bx-user-plus";case"login":return"bx bx-log-in";case"order_placed":return"bx bx-package";case"order_status":return"bx bx-truck";case"promo":return"bx bx-gift";default:return"bx bx-bell"}},i=(l,c)=>{switch(l){case"signup":return"Welcome! You have successfully signed up.";case"login":return`You logged in from ${c?.device||"an unknown device"} at ${o(c?.timestamp||new Date)}`;case"order_placed":return`Your order #${c?.orderId||"N/A"} has been placed.`;case"order_status":return`Order #${c?.orderId||"N/A"} is now ${c?.status||"updated"}.`;case"promo":return c?.message||"New promotion available! Check it out.";default:return"New notification received."}},o=l=>l?(l.toDate?l.toDate():new Date(l)).toLocaleString("en-NG",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"Unknown time";return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-6",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-bell text-blue-600 mr-3 text-2xl"}),"Your Activity & Notifications"]}),t?n.jsx("div",{className:"space-y-4",children:[...Array(5)].map((l,c)=>n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},c))}):r.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[n.jsx("i",{className:"bx bx-bell-off text-4xl mb-4"}),n.jsx("p",{className:"text-lg",children:"No activities or notifications yet."})]}):n.jsx("div",{className:"space-y-4",children:r.map(l=>n.jsxs("div",{className:`bg-white rounded-lg shadow-md p-4 flex items-start gap-4 ${l.read===!1?"border-l-4 border-blue-500":""}`,children:[n.jsx("i",{className:`${a(l.type)} text-blue-600 text-2xl`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-base text-gray-800",children:i(l.type,l.data)}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:o(l.createdAt)})]})]},l.id))})]})})};function oue(){return n.jsxs("div",{children:["No store available at the moment.",n.jsx("p",{children:"Check back later for updates."})]})}function lue(){const{productId:r}=Lo(),e=us(),[t,s]=E.useState({name:"",price:"",quantity:0,description:"",imageUrls:[],videoUrls:[],colors:[],status:"pending",locationData:{country:"",state:"",city:"",address:""},isDailyDeal:!1,discountPercentage:0}),[a,i]=E.useState(!0),[o,l]=E.useState({}),[c,u]=E.useState(""),[h,f]=E.useState(""),[g,x]=E.useState("");E.useEffect(()=>{(async()=>{try{const I=ve.currentUser?.uid;if(!I)throw new Error("User not authenticated");const P=Ne(J,"products",r),T=await it(P);if(T.exists()&&T.data().sellerId===I){const D=T.data();s({name:D.name||"",price:D.price||"",quantity:D.quantity||0,description:D.description||"",imageUrls:Array.isArray(D.imageUrls)?D.imageUrls:[],videoUrls:Array.isArray(D.videoUrls)?D.videoUrls:[],colors:Array.isArray(D.colors)?D.colors:[],status:D.status||"pending",locationData:D.locationData||{country:"",state:"",city:"",address:""},isDailyDeal:D.isDailyDeal||!1,discountPercentage:D.discountPercentage||0})}else throw new Error("Product not found or unauthorized")}catch(I){l({general:I.message})}finally{i(!1)}})()},[r]);const y=()=>{const _={};return t.name.trim()||(_.name="Product name is required"),(!t.price||isNaN(t.price)||Number(t.price)<=0)&&(_.price="Valid price is required"),t.quantity<0&&(_.quantity="Quantity cannot be negative"),t.locationData.country||(_.country="Country is required"),t.locationData.state||(_.state="State is required"),t.isDailyDeal&&(!t.discountPercentage||t.discountPercentage<0||t.discountPercentage>100)&&(_.discountPercentage="Discount must be between 0 and 100%"),_},b=_=>{const{name:I,value:P,type:T,checked:D}=_.target;s(L=>({...L,[I]:T==="checkbox"?D:P}))},v=_=>{const I=Number(_.target.value);s(P=>({...P,quantity:I>=0?I:0}))},N=_=>{const I=_.target.value;s(P=>({...P,colors:I?[...new Set([...P.colors,I])]:P.colors}))},k=async _=>{const I=_.target.files[0];if(I){const P=new FileReader;P.onloadend=async()=>{const T=P.result,D=ST(lN,`products/${r}/images/${Date.now()}`);await jT(D,T,"data_url");const L=await kT(D);s(F=>({...F,imageUrls:[...F.imageUrls,L]}))},P.readAsDataURL(I)}},A=async _=>{const I=_.target.files[0];if(I){const P=new FileReader;P.onloadend=async()=>{const T=P.result,D=ST(lN,`products/${r}/videos/${Date.now()}`);await jT(D,T,"data_url");const L=await kT(D);s(F=>({...F,videoUrls:[...F.videoUrls,L]}))},P.readAsDataURL(I)}},R=async()=>{const _=y();if(Object.keys(_).length>0){l(_);return}try{const I=ve.currentUser?.uid,P=Ne(J,"products",r);await Qr(P,{...t,updatedAt:Ti()});const T=Ne(_e(J,"adminNotifications"));await Gt(T,{message:`Product "${t.name}" (ID: ${r}) edited by seller ${I}`,type:"product_edit",sellerId:I,productId:r,timestamp:Ti(),read:!1}),u("Product updated successfully!"),setTimeout(()=>e("/seller/products"),2e3)}catch(I){l({general:"Failed to save product: "+I.message})}};return a?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-2xl"}),n.jsx("span",{children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 flex justify-center items-start mb-14",children:n.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-6 flex items-center",children:[n.jsx("i",{className:"bx bx-edit-alt text-blue-500 mr-2"})," Edit Product"]}),o.general&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg mb-6",children:n.jsx("p",{className:"text-red-700",children:o.general})}),c&&n.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg mb-6",children:n.jsx("p",{className:"text-green-700",children:c})}),n.jsxs("form",{className:"space-y-6 sm:space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:b,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${o.name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),o.name&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:o.name})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:["Price (₦) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",id:"price",name:"price",value:t.price,onChange:b,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${o.price?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),o.price&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:o.price})]}),n.jsxs("div",{className:"relative group",children:[n.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",id:"quantity",name:"quantity",value:t.quantity,onChange:v,className:`mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 ${o.quantity?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`}),o.quantity&&n.jsx("p",{className:"text-red-600 text-xs mt-1",children:o.quantity})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{htmlFor:"colors",className:"block text-sm font-medium text-gray-700",children:"Colors"}),n.jsx("input",{type:"text",id:"colors",name:"colors",value:"",onChange:N,placeholder:"Enter a color (e.g., #FF0000)",className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.colors.map((_,I)=>n.jsx("span",{className:"inline-block w-6 h-6 rounded-full",style:{backgroundColor:_}},I))})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:b,className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500",rows:"4"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Images"}),n.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.imageUrls.map((_,I)=>n.jsx("img",{src:_,alt:"Product",className:"w-20 h-20 object-cover rounded-lg"},I))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Videos"}),n.jsx("input",{type:"file",accept:"video/*",onChange:A,className:"mt-1 w-full py-2 px-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 border-gray-300 focus:ring-blue-500"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.videoUrls.map((_,I)=>n.jsxs("video",{controls:!0,className:"w-40 h-30 object-cover rounded-lg",children:[n.jsx("source",{src:_,type:"video/mp4"}),"Your browser does not support the video tag."]},I))})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"button",onClick:R,className:"w-full sm:w-auto px-6 py-3 rounded-lg bg-gray-800 text-white hover:bg-gray-700 font-bold shadow-md hover:from-blue-700 hover:to-purple-700 transition focus:outline-blue-400 focus:ring-4 focus:ring-blue-300 mt-4 sm:mt-0",children:"Save Changes"})})]})]})})]})}function cue({title:r,imageUrl:e}){return n.jsxs("div",{className:"relative h-64 md:h-96 overflow-hidden",children:[e?n.jsx("img",{src:e,alt:r,className:"w-full h-full object-cover"}):n.jsx("div",{className:"bg-gray-200 border-2 border-dashed w-full h-full"}),r&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:n.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white text-center",children:r})})]})}const Vx={Transport:{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485716/auto_big_k4jp8e.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485719/auto_small_fvr8do.jpg"},Television:{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485684/screens_big_stuvgq.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485713/screens_small_wzvifu.jpg"},Scent:{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485702/perfume_big_mzpohm.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485684/perfume_small_xhsxan.jpg"},"Home & Living":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485706/garden_big_p9bfjz.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485710/garden_small_ruvatt.jpg"},Photography:{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485711/camera_big_icewmf.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485703/camera_small_dv0k55.jpg"},"Game & Console":{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485685/games_big_tyfg2v.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485698/games_small_s2hvrp.jpg"},Beverages:{desktop:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485685/drink_big_afnisz.jpg",mobile:"https://res.cloudinary.com/dvhogp27g/image/upload/v1750485685/drink_small_tsaqxo.jpg"}};function due(){const[r,e]=E.useState(window.innerWidth<768);return E.useEffect(()=>{const t=()=>e(window.innerWidth<768);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),r}const Bx="https://cdn.pixabay.com/photo/2018/08/29/17/07/ecommerce-3640321_640.jpg";function uue(r){return r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function hue(r,e){return Object.keys(e).find(t=>uue(t)===r)}function mue(){const{categoryName:r}=Lo(),[e,t]=E.useState({}),[s,a]=E.useState(null),[i,o]=E.useState(null),[l,c]=E.useState(!0),[u,h]=E.useState(""),[f,g]=E.useState([]),[x,y]=E.useState(!1),b=due();E.useEffect(()=>{const R=os(_e(J,"customSubcategories"),_=>{const I={};_.forEach(P=>{I[P.id]=P.data().subcategories||[]}),t(I),c(!1)});return()=>R()},[]);const v=hue(r,e),N=v?e[v]:null;E.useEffect(()=>{v&&(async()=>{const _=Ne(J,"categories",v),I=await it(_);if(I.exists()){const P=I.data();a(P.bannerDesktop||Vx[v]?.desktop||Bx),o(P.bannerMobile||Vx[v]?.mobile||Bx)}else a(Vx[v]?.desktop||Bx),o(Vx[v]?.mobile||Bx)})()},[v]);const k=b?i:s,A=!s;return E.useEffect(()=>{N&&N.length>0&&h(N[0])},[N]),E.useEffect(()=>{(async()=>{if(!(!v||!u)){y(!0);try{const _=ft(_e(J,"products"),rt("category","==",v.toLowerCase()),rt("subcategory","==",u)),P=(await Ke(_)).docs.map(T=>({id:T.id,...T.data()}));g(P)}catch{g([])}finally{y(!1)}}})()},[v,u]),l?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):N?n.jsxs("div",{className:"bg-white min-h-screen mb-14",children:[n.jsx(cue,{title:A?v:"",imageUrl:k}),n.jsxs("div",{className:"container mx-auto px-4 py-6",children:[n.jsx("div",{className:"flex overflow-x-auto pb-2 mb-6 -mx-4 px-4 border-b",children:N.map(R=>n.jsx("button",{className:`px-4 py-2 font-medium whitespace-nowrap ${u===R?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,onClick:()=>h(R),children:R},R))}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h2",{className:"text-xl font-bold",children:[u," Products"]}),n.jsx(he,{to:`/products?category=${encodeURIComponent(v)}&subcategory=${encodeURIComponent(u)}`,className:"text-blue-600 hover:underline",children:"See All"})]}),x?n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(5)].map((R,_)=>n.jsx("div",{className:"bg-gray-200 rounded-lg aspect-square animate-pulse"},_))}):f.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-600",children:["No products found in ",u]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:f.map(R=>n.jsx(Vr,{product:R},R.id))})]})]})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Category not found"}),n.jsxs("p",{className:"mt-4",children:['The category "',r,`" doesn't exist.`]}),n.jsx(he,{to:"/",className:"mt-6 inline-block text-blue-600 hover:underline",children:"Return to homepage"})]})})}const v4={businessName:"",regNumber:"",regVerified:!1,regVerifying:!1,regError:"",taxRef:"",taxVerified:!1,taxVerifying:!1,taxError:"",address:"",country:"Nigeria",phone:"",phoneCode:"+234",email:"",password:"",firstName:"",lastName:"",manager:"",managerEmail:"",managerPhone:"",productLines:[],categories:[],bankName:"",bankCode:"",accountNumber:"",accountName:"",accountVerified:!1,accountVerifying:!1,accountError:"",agree:!1,signup:!1},fue=(r,e)=>{const t=[r,e].filter(l=>l?.trim()),s=t[0]?.slice(0,4).toLowerCase()||"user",a=t[1]?.slice(0,3).toLowerCase()||"",i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return(s+a).replace(/[^a-z0-9]/g,"")+i},gue=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo (Congo-Brazzaville)","Costa Rica","Croatia","Cuba","Cyprus","Czechia","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea (North)","Korea (South)","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],pue=()=>{const[r,e]=E.useState(1),[t,s]=E.useState(!1),[a,i]=E.useState(v4),[o,l]=E.useState({}),[c,u]=E.useState([]),[h,f]=E.useState([]),[g,x]=E.useState(!0),[y,b]=E.useState(!0),{alerts:v,addAlert:N,removeAlert:k}=Bl(),{user:A,setUser:R}=hd(),_=us();E.useEffect(()=>{let $=!1;x(!0),b(!0);const X="https://foremade-backend.onrender.com";return fetch("/api/categories").then(G=>G.json()).then(G=>{$||(u(G),x(!1))}).catch(G=>{$||(u([{name:"Electronics"},{name:"Fashion"},{name:"Home & Living"},{name:"Beauty"},{name:"Sports"},{name:"Automotive"},{name:"Books"},{name:"Toys"},{name:"Groceries"},{name:"Health"}]),x(!1))}),fetch(`${X}/fetch-banks`).then(G=>G.json()).then(G=>{$||(f(G),b(!1))}).catch(G=>{$||(f([{code:"044",name:"Access Bank"},{code:"063",name:"Diamond Bank"},{code:"050",name:"Ecobank"},{code:"011",name:"First Bank"},{code:"033",name:"United Bank for Africa"}]),b(!1),N("Failed to fetch banks. Using fallback data.","error"))}),()=>{$=!0}},[]);const I=($,X)=>{if(i(G=>({...G,[$]:X})),o[$]&&l(G=>({...G,[$]:""})),$==="regNumber"){const G=X.replace(/[^0-9]/g,"").slice(0,8);I("regNumber",G),P(G)}},P=$=>{i(G=>({...G,regError:"",regVerified:!1,regVerifying:!1}));const X=/^\d{7,8}$/.test($);!X&&$?i(G=>({...G,regError:"Registration number must be 7-8 digits"})):X&&(i(G=>({...G,regVerifying:!0})),setTimeout(()=>{i(G=>({...G,regVerified:!0,regVerifying:!1}))},1500))},T=$=>{const X={};return $===1&&(a.businessName||(X.businessName="Business name is required"),a.regNumber||(X.regNumber="Registration number is required"),a.regError&&(X.regNumber=a.regError),a.address||(X.address="Business address is required"),a.country||(X.country="Country is required")),$===2&&(a.firstName||(X.firstName="First name is required"),a.lastName||(X.lastName="Last name is required"),a.phone||(X.phone="Phone number is required"),a.email||(X.email="Email is required"),a.signup&&!a.password&&(X.password="Password is required for signup"),a.manager||(X.manager="Manager name is required"),a.managerEmail||(X.managerEmail="Manager email is required"),a.managerEmail&&a.email&&a.managerEmail.trim().toLowerCase()===a.email.trim().toLowerCase()&&(X.managerEmail="Manager/Company email must be different from your personal email")),$===3&&(a.productLines.length||(X.productLines="At least one product line is required"),a.bankName||(X.bankName="Bank name is required"),a.accountNumber||(X.accountNumber="Account number is required"),a.agree||(X.agree="You must agree to the terms"),a.accountError&&(X.accountNumber=a.accountError)),l(X),Object.keys(X).length===0},D=async()=>{r<4?T(r)&&e(r+1):await L()},L=async()=>{if(!T(3)){s(!1);return}s(!0);try{let $=A?.uid,X=null;const B=ch().currentUser;if(!B&&a.signup&&a.email&&a.password){const Ee=await A0(ve,a.email,a.password);$=Ee.user.uid,X=await Ee.user.getIdToken(!0),await Pf(Ee.user,{displayName:`${a.firstName} ${a.lastName}`}),typeof R=="function"?R(Ee.user):console.warn("setUser is not a function. Skipping auth context update.");const ue=fue(a.firstName,a.lastName),Oe=Ne(J,"users",$);let Pe=0;const Ie=3;for(;Pe<Ie;)try{await Gt(Oe,{email:a.email,username:ue,firstName:a.firstName,lastName:a.lastName,createdAt:new Date().toISOString(),phoneNumber:a.phoneCode+a.phone,country:a.country,addresses:[{street:a.address,city:"",state:"",postalCode:"",country:a.country}],proStatus:"pending"},{merge:!0}),N("Account and profile created successfully!","success");break}catch(ie){if(Pe++,Pe===Ie)throw console.error("Firestore profile creation failed after retries:",ie),new Error("Failed to create user profile in Firestore after multiple attempts.");await new Promise(ze=>setTimeout(ze,1e3))}}else if(B){$=B.uid;try{X=await B.getIdToken(!0)}catch(Ee){if(Ee.code==="auth/user-token-expired"){N("Your session has expired. Please sign in again.","error"),_("/login");return}throw Ee}}else throw new Error("No authenticated user found and signup not selected.");const Q={...a,submittedAt:new Date().toISOString(),timestamp:Date.now(),userAgent:navigator.userAgent,formType:"Pro Seller Application",uid:$||`guest_${Date.now()}_${Math.random().toString(36).substring(2,8)}`},se=await fetch("https://foremade-backend.onrender.com/api/pro-seller",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",...X?{Authorization:`Bearer ${X}`}:{}},body:JSON.stringify(Q)}),le=await se.json();if(!se.ok)throw new Error(le.error||le.message||"Submission failed");N("Pro Seller application submitted successfully! We will review your application and get back to you soon.","success"),i(v4),e(1),_("/profile")}catch($){console.error("Submission error:",$.message,$),$.code==="auth/user-token-expired"?(N("Your session has expired. Please sign in again.","error"),_("/login")):N(`There was an error submitting your application: ${$.message}. Please try again or contact support.`,"error")}finally{s(!1)}},F=()=>{r>1&&e($=>$-1)},z=()=>{P(a.regNumber)},O=()=>{i($=>({...$,taxError:"",taxVerified:!0}))},V=async()=>{if(!(!a.accountNumber||!a.bankCode)){i($=>({...$,accountVerifying:!0,accountError:"",accountVerified:!1,accountName:""}));try{const $={accountNumber:a.accountNumber,bankCode:a.bankCode},G=await fetch("https://foremade-backend.onrender.com/verify-bank-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)}),B=await G.json();G.ok&&(B.accountName||B.account_name)?i(Q=>({...Q,accountVerified:!0,accountVerifying:!1,accountError:"",accountName:B.accountName||B.account_name})):i(Q=>({...Q,accountVerified:!1,accountVerifying:!1,accountError:B.message||"Verification failed.",accountName:""}))}catch($){i(X=>({...X,accountVerified:!1,accountVerifying:!1,accountError:"Network or server error.",accountName:""})),console.error("Bank account verification error:",$)}}},Y=()=>{const $={enter:{x:50,opacity:0},center:{x:0,opacity:1},exit:{x:-50,opacity:0}};return n.jsx(tn,{mode:"wait",children:n.jsxs(Ze.div,{variants:$,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},children:[r===1&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(DJ,{className:"w-6 h-6 text-orange-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-orange-800 mb-2",children:"Business Information"}),n.jsx("p",{className:"text-orange-600",children:"Let's start with your business details"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Business Name",value:a.businessName,onChange:X=>I("businessName",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.businessName?"border-red-500":"border-gray-300"}`}),o.businessName&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.businessName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center",children:["Registration Number ",n.jsx("span",{className:"text-red-500",children:"*"}),a.regVerifying&&n.jsxs("span",{className:"ml-2 text-xs text-orange-500 animate-pulse",children:["Verifying... ",n.jsx("span",{className:"ml-1 w-4 h-4 border-2 border-t-orange-500 border-orange-200 rounded-full animate-spin"})]}),a.regVerified&&!a.regError&&n.jsx(Gn,{className:"ml-2 w-5 h-5 text-green-500"}),a.regError&&n.jsx("span",{className:"ml-2 text-xs text-red-500",children:a.regError})]}),n.jsx("input",{type:"text",placeholder:"7-8 digits (e.g., 1234567)",value:a.regNumber,onChange:X=>I("regNumber",X.target.value),onBlur:z,pattern:"\\d{7,8}",title:"Must be 7-8 digits",className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${a.regError?"border-red-500":a.regVerified?"border-green-500":o.regNumber?"border-red-500":"border-gray-300"}`,required:!0}),o.regNumber&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.regNumber})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Tax Reference (Optional)",a.taxVerifying&&n.jsx("span",{className:"ml-2 text-xs text-orange-500 animate-pulse",children:"Verifying..."}),a.taxVerified&&!a.taxError&&n.jsx(Gn,{className:"ml-2 w-5 h-5 text-green-500"}),a.taxError&&n.jsx("span",{className:"ml-2 text-xs text-red-500",children:a.taxError})]}),n.jsx("input",{type:"text",placeholder:"Tax Reference (optional)",value:a.taxRef,onChange:X=>I("taxRef",X.target.value),onBlur:O,className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${a.taxError?"border-red-500":a.taxVerified?"border-green-500":"border-gray-300"}`})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Business Address ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Business Address",value:a.address,onChange:X=>I("address",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.address?"border-red-500":"border-gray-300"}`}),o.address&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.address})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Country ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:a.country,onChange:X=>{I("country",X.target.value),I("regNumber",""),i(G=>({...G,regError:"",regVerified:!1}))},className:`w-full px-4 py-3 border rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.country?"border-red-500":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select Country"}),gue.map(X=>n.jsx("option",{value:X,children:X},X))]}),o.country&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.country})]})]}),r===2&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(Vl,{className:"w-6 h-6 text-orange-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-orange-800 mb-2",children:"Contact Information"}),n.jsxs("p",{className:"text-orange-600",children:["How can we reach you? ",n.jsx("span",{className:"text-sm text-gray-500",children:"(Sign up option available)"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"First Name",value:a.firstName,onChange:X=>I("firstName",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.firstName?"border-red-500":"border-gray-300"}`}),o.firstName&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.firstName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Last Name",value:a.lastName,onChange:X=>I("lastName",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.lastName?"border-red-500":"border-gray-300"}`}),o.lastName&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.lastName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Phone Number",value:a.phone,onChange:X=>I("phone",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.phone?"border-red-500":"border-gray-300"}`}),o.phone&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.phone})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"Email Address",value:a.email,onChange:X=>I("email",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.email?"border-red-500":"border-gray-300"}`}),o.email&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.email})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:a.signup,onChange:X=>I("signup",X.target.checked),className:"accent-orange-500 w-4 h-4"}),n.jsx("label",{className:"text-sm text-gray-700",children:"Create an account with this email"})]}),a.signup&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"password",placeholder:"Password",value:a.password,onChange:X=>I("password",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.password?"border-red-500":"border-gray-300"}`}),o.password&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.password})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Manager Name",value:a.manager,onChange:X=>I("manager",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.manager?"border-red-500":"border-gray-300"}`}),o.manager&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.manager})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"Manager Email",value:a.managerEmail,onChange:X=>I("managerEmail",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.managerEmail?"border-red-500":"border-gray-300"}`}),o.managerEmail&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.managerEmail})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager Phone ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Manager Phone",value:a.managerPhone,onChange:X=>I("managerPhone",X.target.value),className:`w-full px-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.managerPhone?"border-red-500":"border-gray-300"}`}),o.managerPhone&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.managerPhone})]})]}),r===3&&n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(gd,{className:"w-6 h-6 text-orange-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-orange-800 mb-2",children:"Products & Banking"}),n.jsx("p",{className:"text-orange-600",children:"Tell us about your products and banking details"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Product Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:g?n.jsx("span",{className:"text-gray-400 italic",children:"Loading categories..."}):c.length>0?c.map((X,G)=>n.jsxs("label",{className:"flex items-center space-x-2 bg-orange-50 rounded-lg px-3 py-2 cursor-pointer hover:bg-orange-100 transition",children:[n.jsx("input",{type:"checkbox",checked:a.productLines.includes(X.value||X.name||X),onChange:B=>{let Q=a.productLines.includes(X.value||X.name||X)?a.productLines.filter(ee=>ee!==(X.value||X.name||X)):[...a.productLines,X.value||X.name||X];I("productLines",Q)},className:"accent-orange-500 w-4 h-4"}),n.jsx("span",{className:"text-sm",children:X.label||X.name||X})]},X.value||X.code||X.name||G)):n.jsx("span",{className:"text-gray-400 italic",children:"No categories available."})}),o.productLines&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.productLines})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Bank Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:a.bankCode,onChange:X=>{const G=h.find(B=>B.code===X.target.value);I("bankCode",X.target.value),I("bankName",G?G.name:"")},className:`w-full px-4 py-3 border rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${o.bankName?"border-red-500":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select Bank"}),y?n.jsx("option",{value:"",children:"Loading banks..."}):h.length>0?h.map((X,G)=>n.jsx("option",{value:X.code,children:X.name},X.code||G)):n.jsx("option",{value:"",children:"No banks available."})]}),o.bankName&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.bankName})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center",children:["Account Number ",n.jsx("span",{className:"text-red-500",children:"*"}),a.accountVerifying&&n.jsx("span",{className:"ml-2 text-xs text-orange-500 animate-pulse",children:"Verifying..."}),a.accountVerified&&!a.accountError&&n.jsx(Gn,{className:"ml-2 w-5 h-5 text-green-500"}),a.accountError&&n.jsx("span",{className:"ml-2 text-xs text-red-500",children:a.accountError})]}),n.jsx("input",{type:"text",placeholder:"Account Number",value:a.accountNumber,onChange:X=>I("accountNumber",X.target.value),onBlur:V,className:`w-full px-4 py-3 border rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ${a.accountError?"border-red-500":a.accountVerified?"border-green-500":o.accountNumber?"border-red-500":"border-gray-300"}`}),a.accountName&&n.jsxs("div",{className:"mt-2 flex items-center text-green-600 text-sm font-semibold",children:[n.jsx(Gn,{className:"w-5 h-5 mr-1"}),a.accountName]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:a.agree,onChange:X=>I("agree",X.target.checked),className:"accent-orange-500 w-4 h-4"}),n.jsxs("label",{className:"text-sm text-gray-700",children:["I agree to the",n.jsx(he,{to:"/terms-conditions",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 underline hover:text-orange-800 ml-1",children:"Pro Seller Terms & Conditions"}),n.jsx("span",{className:"text-red-500",children:"*"})]}),o.agree&&n.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.agree})]})]}),r===4&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx(Gn,{className:"w-8 h-8 text-green-500 mx-auto mb-3"}),n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-2",children:"Review & Submit"}),n.jsx("p",{className:"text-green-600",children:"Please review your information before submitting."})]}),n.jsxs("div",{className:"bg-orange-50 rounded-xl p-4 shadow space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Business Name:"})," ",a.businessName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Registration Number:"})," ",a.regNumber," ",a.regVerified&&n.jsx(Gn,{className:"inline w-4 h-4 text-green-500 ml-1"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Tax Reference:"})," ",a.taxRef||"Not provided"," ",a.taxVerified&&n.jsx(Gn,{className:"inline w-4 h-4 text-green-500 ml-1"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Business Address:"})," ",a.address]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Country:"})," ",a.country]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"First Name:"})," ",a.firstName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Last Name:"})," ",a.lastName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Phone:"})," ",a.phoneCode," ",a.phone]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",a.email]}),a.signup&&n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Password:"})," [Set for new account]"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Manager:"})," ",a.manager]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Manager Email:"})," ",a.managerEmail]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Manager Phone:"})," ",a.managerPhone]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Product Lines:"})," ",a.productLines.join(", ")||"None"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Bank:"})," ",a.bankName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Account Number:"})," ",a.accountNumber," ",a.accountVerified&&n.jsx(Gn,{className:"inline w-4 h-4 text-green-500 ml-1"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Account Name:"})," ",a.accountName||"Not verified"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Agreed to Terms:"})," ",a.agree?"Yes":"No"]})]}),n.jsx("div",{className:"text-xs text-gray-500 text-center",children:"By submitting, you confirm all information is correct and consent to verification."})]})]},r)})},H=[{label:"Business Info"},{label:"Contact Info"},{label:"Products & Banking"},{label:"Review & Submit"}];return n.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-100 flex items-center justify-center py-8 px-2 sm:px-4",children:[n.jsx(Co,{alerts:v,removeAlert:k}),n.jsx("div",{className:"w-full max-w-2xl mx-auto px-2 sm:px-4 md:px-8",children:n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl border border-orange-100 dark:border-gray-800 overflow-hidden",children:n.jsxs("div",{className:"px-4 sm:px-8 md:px-12 pt-10 pb-4 md:pt-14 md:pb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold text-orange-700 dark:text-orange-400 tracking-tight",children:"Pro Seller Registration"}),n.jsx(Gn,{className:"w-9 h-9 text-orange-500 self-center"})]}),n.jsxs("div",{className:"block sm:hidden mb-10",children:[n.jsx("div",{className:"flex items-center w-full mb-2",children:H.map(($,X)=>n.jsxs(cs.Fragment,{children:[n.jsx("div",{className:"flex-1 flex flex-col items-center",children:n.jsx("div",{className:`w-7 h-7 flex items-center justify-center rounded-full border-2 text-sm font-bold
                          ${X<r-1?"border-orange-600 bg-orange-100 text-orange-600":X===r-1?"border-orange-700 bg-orange-200 text-orange-700":"border-gray-200 bg-gray-100 text-gray-400"}`,children:X+1})}),X<H.length-1&&n.jsx("div",{className:`flex-1 h-1 mx-1 rounded-full ${X<r-1?"bg-orange-600":"bg-gray-200"}`})]},$.label))}),n.jsx("div",{className:"flex justify-between w-full px-1",children:H.map(($,X)=>n.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wide text-center flex-1 ${X===r-1?"text-orange-700":"text-gray-400"}`,children:$.label},$.label))})]}),n.jsx("div",{className:"hidden sm:flex items-center justify-center mb-10 gap-4",children:H.map(($,X)=>n.jsxs(cs.Fragment,{children:[n.jsxs("div",{className:`flex flex-col items-center ${X<r-1?"text-orange-600":X===r-1?"text-orange-700 font-bold dark:text-orange-300":"text-gray-300 dark:text-gray-600"}`,children:[n.jsx("div",{className:`w-9 h-9 flex items-center justify-center rounded-full border-4 ${X<r-1?"border-orange-600 bg-orange-100":X===r-1?"border-orange-700 bg-orange-200 dark:bg-orange-900":"border-gray-200 bg-gray-100 dark:bg-gray-800"} text-lg font-bold`,children:X+1}),n.jsx("span",{className:"text-xs mt-2 font-semibold tracking-wide uppercase whitespace-nowrap",children:$.label})]}),X<H.length-1&&n.jsx("div",{className:`flex-1 h-1 mx-2 rounded-full ${X<r-1?"bg-orange-600":"bg-gray-200 dark:bg-gray-700"}`})]},$.label))}),n.jsxs("form",{onSubmit:$=>{$.preventDefault(),D()},children:[n.jsx("div",{className:"max-h-[60vh] md:max-h-[65vh] overflow-y-auto pb-4 custom-scrollbar px-1 md:px-2",children:Y()}),n.jsx("div",{className:"sticky bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-white via-white/90 to-transparent dark:from-gray-900 dark:via-gray-900/90 dark:to-transparent px-0 pt-6 pb-4 mt-8 border-t border-orange-100 dark:border-gray-800 shadow-2xl flex flex-col items-center gap-2",children:n.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-3 sm:gap-4",children:[r>1&&n.jsx("button",{type:"button",onClick:F,className:"flex-1 px-6 py-3 rounded-xl bg-orange-100 text-orange-700 font-bold text-base sm:text-lg shadow hover:bg-orange-200 transition border-2 border-orange-200",children:"Back"}),n.jsx("button",{type:"submit",disabled:t,className:"flex-1 px-6 py-3 rounded-xl bg-gradient-to-r from-orange-500 to-orange-600 text-white font-extrabold text-base sm:text-lg shadow-lg hover:from-orange-600 hover:to-orange-700 focus:ring-4 focus:ring-orange-200 transition border-2 border-orange-500 disabled:opacity-60 disabled:cursor-not-allowed",children:t?"Submitting...":r<4?"Continue":"Submit"})]})})]})]})})})]})},mF="/assets/bg-wEpT47DD.jpg",xue="/assets/1-BrZQmCyo.png",bue="/assets/3-jTyAYhqG.png",yue="/assets/2-DOJJuS8a.png";function vue(){return n.jsxs("div",{className:"min-h-screen relative overflow-x-hidden flex flex-col",children:[n.jsx("style",{children:`
        .arrow-border {
          clip-path: polygon(0% 10%, 50% 10%, 50% 0%, 100% 50%, 50% 100%, 50% 90%, 0% 90%);
          box-shadow: 0 4px 24px 0 rgba(0,0,0,0.08);
          background: white;
        }
        .fold-effect {
          /* Optionally add a slight transform for the fold effect */
          box-shadow: 0 8px 32px 0 rgba(0,0,0,0.18);
          z-index: 2;
        }
        .sway {
          animation: sway-left-right 2.2s ease-in-out infinite alternate;
        }
        @keyframes sway-left-right {
          0% { transform: translateX(0); }
          50% { transform: translateX(10px); }
          100% { transform: translateX(0); }
        }
        .learn-more-anim {
          transition: background 0.3s, color 0.3s, transform 0.3s;
        }
        .learn-more-anim:hover {
          background: #f59e42;
          color: #fff;
          transform: scale(1.07) translateY(-2px);
        }
        .learn-more-anim .arrow-anim {
          transition: transform 0.3s;
        }
        .learn-more-anim:hover .arrow-anim {
          transform: translateX(8px) scale(1.2) rotate(8deg);
        }
        .register-anim {
          transition: background 0.3s, box-shadow 0.3s, transform 0.3s;
        }
        .register-anim:hover {
          background: linear-gradient(90deg, #1e3a8a 0%, #7c3aed 100%);
          box-shadow: 0 8px 32px 0 rgba(245,158,66,0.18);
          transform: scale(1.06) translateY(-2px);
        }
        .register-anim .arrow-anim {
          transition: transform 0.3s;
        }
        .register-anim:hover .arrow-anim {
          transform: translateX(8px) scale(1.2) rotate(8deg);
        }
      `}),n.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat pointer-events-none",style:{backgroundImage:`url(${mF})`}}),n.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 flex items-center justify-end pr-8 pointer-events-none select-none"}),n.jsxs("div",{className:"relative z-10 flex-1 flex flex-col justify-center max-w-6xl mx-auto px-4 py-12 w-full",children:[n.jsx("div",{className:"mb-12 max-w-2xl lg:ml-0 ml-0",children:n.jsxs("div",{className:"bg-gradient-to-r from-blue-900 via-blue-800 to-purple-900 text-white p-10 md:p-16 rounded-2xl shadow-2xl flex flex-col items-start",children:[n.jsx("h1",{className:"text-orange-400 text-4xl md:text-5xl font-extrabold mb-4 self-start",children:"Foremade Pro Seller"}),n.jsxs("div",{className:"flex items-center text-lg md:text-xl",children:[n.jsx("span",{children:"Grow Your Business With Ease"}),n.jsxs(he,{to:"/pro-seller-form",className:"ml-4 flex items-center group",children:[n.jsx(vf,{className:"w-8 h-8 animate-pulse text-yellow-300 group-hover:text-orange-400 transition-colors duration-200 sway"}),n.jsx(vf,{className:"w-8 h-8 animate-pulse delay-75 text-yellow-300 group-hover:text-orange-400 transition-colors duration-200 sway"}),n.jsx(vf,{className:"w-8 h-8 animate-pulse delay-150 text-yellow-300 group-hover:text-orange-400 transition-colors duration-200 sway"})]})]})]})}),n.jsx("div",{className:"mb-12 max-w-4xl lg:ml-0 ml-0",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-10 md:p-16 w-full",children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 pb-2 border-b border-gray-200",children:"WHO CAN REGISTER AS A PRO SELLER?"}),n.jsx("div",{className:"mb-8",children:n.jsx("p",{className:"text-gray-700 text-lg leading-relaxed",children:"Are you a manufacturer, trader, brand, or retail business looking to expand your reach and grow your customer base? Become a FOREMADE Pro Seller and gain access to advanced features, dedicated support, and increased visibility."})}),n.jsxs("div",{className:"space-y-6 mb-8",children:[n.jsxs("div",{className:"hover:bg-blue-50 p-4 rounded transition-colors duration-200",children:[n.jsx("h3",{className:"font-semibold text-blue-900 text-lg mb-2",children:"1. New to FOREMADE?"}),n.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"Sign up directly through the FOREMADE Pro Seller registration page."})]}),n.jsxs("div",{className:"hover:bg-blue-50 p-4 rounded transition-colors duration-200",children:[n.jsx("h3",{className:"font-semibold text-blue-900 text-lg mb-2",children:"2. Already have a FOREMADE account?"}),n.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"You can upgrade your existing seller account to a Pro account once all current orders are fulfilled."})]}),n.jsxs("div",{className:"hover:bg-blue-50 p-4 rounded transition-colors duration-200",children:[n.jsx("h3",{className:"font-semibold text-blue-900 text-lg mb-2",children:"3. Need both personal and business accounts?"}),n.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:"No problem! You're welcome to have one standard account and one Pro account - just use a different email and phone number for your Pro registration."})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(he,{to:"/pro-seller-guide-full",className:"learn-more-anim group text-orange-500 text-lg font-semibold px-6 py-2 rounded-full border border-orange-200 shadow hover:shadow-lg flex items-center justify-end w-fit",children:n.jsxs("span",{className:"flex items-center justify-center",children:["Learn more",n.jsx(Yf,{className:"ml-2 w-5 h-5 arrow-anim group-hover:text-white transition-transform duration-200 sway"})]})})})]})}),n.jsxs("div",{className:"flex flex-col items-center justify-center w-full gap-8 -mt-11 -mb-4",children:[n.jsxs("div",{className:"flex flex-row items-end justify-start gap-8 w-full",children:[n.jsx("div",{className:"w-48 h-48 md:w-52 md:h-52 lg:w-72 lg:h-72 rounded-full shadow-lg bg-white flex items-center justify-center overflow-hidden",children:n.jsx("img",{src:xue,alt:"Seller 1",className:"w-full h-full object-cover"})}),n.jsx("div",{className:"w-48 h-48 md:w-52 md:h-52 lg:w-72 lg:h-72 rounded-full shadow-xl bg-white flex items-center justify-center overflow-hidden fold-effect",children:n.jsx("img",{src:bue,alt:"Seller 2",className:"w-full h-full object-cover"})})]}),n.jsxs("div",{className:"flex flex-row items-center justify-center lg:justify-end w-full gap-6 -mt-9 mb-8",children:[n.jsx("div",{className:"w-48 h-48 md:w-52 md:h-52 lg:w-72 lg:h-72 arrow-border shadow-xl bg-white flex items-center justify-center overflow-hidden flex-shrink-0",children:n.jsx("img",{src:yue,alt:"Seller 3",className:"w-full h-full object-cover"})}),n.jsx(he,{to:"/pro-seller-form",className:"register-anim group bg-gradient-to-r from-blue-900 to-purple-900 text-white px-8 py-4 rounded-full font-semibold text-base flex items-center hover:from-blue-800 hover:to-purple-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:n.jsxs("span",{className:"flex items-center",children:["Register Now",n.jsx(Yf,{className:"ml-2 w-5 h-5 arrow-anim group-hover:text-orange-300 transition-transform duration-200 sway"})]})})]})]})]})]})}function wue(){return n.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-10 pointer-events-none",style:{backgroundImage:`url(${mF})`}}),n.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-4 py-12 w-full",children:[n.jsxs("section",{className:"mb-10 bg-white rounded-2xl shadow-lg p-8",children:[n.jsx("h1",{className:"text-4xl font-extrabold text-blue-900 mb-4",children:"Foremade Pro Seller Guide"}),n.jsx("p",{className:"text-lg text-gray-700 mb-2",children:"Welcome to the comprehensive guide for becoming a Foremade Pro Seller. This page covers everything you need to know to get started, maximize your success, and understand the benefits and requirements of the Pro Seller program."})]}),n.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Who Can Register?"}),n.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Manufacturers, brands, and authorized distributors"}),n.jsx("li",{children:"Retailers and traders with a business presence"}),n.jsx("li",{children:"Businesses seeking advanced selling tools and analytics"}),n.jsx("li",{children:"Existing Foremade sellers ready to upgrade"})]})]}),n.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Benefits of Becoming a Pro Seller"}),n.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Priority listing and increased product visibility"}),n.jsx("li",{children:"Access to advanced analytics and sales reports"}),n.jsx("li",{children:"Dedicated account manager and support"}),n.jsx("li",{children:"Bulk product upload and inventory management tools"}),n.jsx("li",{children:"Exclusive marketing and promotional opportunities"}),n.jsx("li",{children:"Early access to new platform features"})]})]}),n.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Requirements"}),n.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Valid business registration and tax information"}),n.jsx("li",{children:"Proof of product authenticity (for brands/distributors)"}),n.jsx("li",{children:"Minimum monthly sales volume (varies by category)"}),n.jsx("li",{children:"Compliance with Foremade’s seller policies"}),n.jsx("li",{children:"Active fulfillment of orders and positive ratings"})]})]}),n.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"How to Register"}),n.jsxs("ol",{className:"list-decimal pl-6 text-gray-700 space-y-1",children:[n.jsxs("li",{children:["Go to the ",n.jsx(he,{to:"/pro-seller-form",className:"text-blue-600 underline",children:"Pro Seller Registration Form"}),"."]}),n.jsx("li",{children:"Fill in your business and contact details."}),n.jsx("li",{children:"Upload required documents (business registration, product certificates, etc.)."}),n.jsx("li",{children:"Submit your application for review."}),n.jsx("li",{children:"Wait for approval and onboarding instructions from the Foremade team."})]}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsxs(he,{to:"/pro-seller-form",className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-full font-semibold flex items-center shadow",children:["Register Now ",n.jsx(Yf,{className:"ml-2 w-5 h-5"})]})})]}),n.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Fees & Commissions"}),n.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[n.jsx("li",{children:"One-time registration fee (see registration form for current amount)"}),n.jsx("li",{children:"Commission on sales (varies by product category, typically 5-15%)"}),n.jsx("li",{children:"No hidden charges; all fees are transparently listed in your seller dashboard"})]})]}),n.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Support & Resources"}),n.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[n.jsx("li",{children:"Dedicated Pro Seller support team"}),n.jsx("li",{children:"Access to training materials and webinars"}),n.jsx("li",{children:"Community forums and peer support"}),n.jsx("li",{children:"Knowledge base with step-by-step guides"})]})]}),n.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Frequently Asked Questions"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"How long does approval take?"}),n.jsx("p",{className:"text-gray-700",children:"Most applications are reviewed within 2-5 business days. You will be notified by email once your account is approved or if more information is needed."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Can I upgrade from a regular seller account?"}),n.jsx("p",{className:"text-gray-700",children:"Yes! If you already sell on Foremade, you can apply for Pro Seller status. Make sure all your current orders are fulfilled before applying."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"What if I need help with my application?"}),n.jsxs("p",{className:"text-gray-700",children:["Contact our support team at ",n.jsx("a",{href:"mailto:support@foremade.com",className:"text-blue-600 underline",children:"support@foremade.com"})," for assistance."]})]})]})]}),n.jsxs("section",{className:"mb-8 bg-white rounded-2xl shadow p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-2",children:"Contact & Help"}),n.jsxs("p",{className:"text-gray-700",children:["For further questions or support, email ",n.jsx("a",{href:"mailto:support@foremade.com",className:"text-blue-600 underline",children:"support@foremade.com"})," or visit our ",n.jsx(he,{to:"/support",className:"text-blue-600 underline",children:"Support Center"}),"."]})]})]})]})}const Nue=["name","description","price","stock","category","subcategory","colors","sizes","condition","tags","manualSize","imageUrls","videoUrl","country","state","city","address","specifications"],jue=()=>{const[r,e]=E.useState([]),[t,s]=E.useState(!1),[a,i]=E.useState([]),[o,l]=E.useState({}),[c,u]=E.useState(""),h=E.useRef(null),{alerts:f,removeAlert:g}=Bl(),{userProfile:x}=hd();if(E.useEffect(()=>{(async()=>{try{const Y=(await Ke(_e(J,"categories"))).docs.map(ee=>ee.data().name);i(Y);const H=await Ke(_e(J,"customSubcategories")),$={};H.forEach(ee=>{$[ee.id]=ee.data().subcategories||[]}),l($);let X=["# VALID CATEGORIES & SUBCATEGORIES:"];Y.forEach(ee=>{X.push(`# ${ee}: ${$[ee]?.join(", ")||""}`)});const G=[];let B=0;for(const ee of Y){const se=$[ee]||[];if(se.length!==0){for(const le of se)if(B>=5||(G.push([`Sample Product ${B+1}`,`Description for sample product ${B+1}`,1e4+B*1e3,10+B,ee,le,"Red|blue","M|L","New","Sample|Demo","Medium","https://dummyphotos.com/sample1.jpg|https://dummyphotos.com/sample2.jpg","","Nigeria","Lagos","Ikeja",`${10+B} Sample Address St`,'{"brand":"SampleBrand"}'].join(",")),B++,B>=5))break;if(B>=5)break}}const Q=["# INSTRUCTIONS:",...X,"# - Do NOT change the column headers.","# - Use only valid categories and subcategories as listed above.","# - For multiple values (colors, sizes, tags, imageUrls), separate with | (pipe).","# - Specifications must be valid JSON.","# - Do not add extra columns or change the order.","# - If unsure, download the latest template or check the category list in the product upload form.",Nue.join(","),...G];u(Q.join(`
`))}catch{u("")}})()},[]),!x&&!x.isProSeller)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow text-center max-w-md mx-auto",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4 text-orange-600",children:"Pro Seller Feature"}),n.jsx("p",{className:"mb-4 text-gray-700",children:"Bulk product upload is only available to Pro Sellers. Upgrade now to manage your inventory more efficiently!"}),n.jsx("a",{href:"/pro-seller-guide-full",className:"inline-block px-6 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 font-semibold",children:"Upgrade to Pro Seller"}),n.jsx("div",{className:"mt-6",children:n.jsx("a",{href:"/sell",className:"inline-block px-5 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold",children:"Return to Dashboard"})})]})});const y=()=>{if(!c){xe.error("Categories are still loading. Please try again in a moment.");return}const O=new Blob([c],{type:"text/csv"}),V=window.URL.createObjectURL(O),Y=document.createElement("a");Y.href=V,Y.download="bulk_upload_template.csv",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),window.URL.revokeObjectURL(V),xe.success("Template downloaded successfully!")},b=O=>{const V=O.split(/\r?\n/).filter(Boolean),Y=V[0].split(","),H=[];for(let $=1;$<V.length;$++){const X=[];let G="",B=!1;for(let ee of V[$])ee==='"'?B=!B:ee===","&&!B?(X.push(G),G=""):G+=ee;X.push(G);const Q={};Y.forEach((ee,se)=>{let le=X[se]||"";if(ee==="price"||ee==="stock")le=parseFloat(le)||0;else if(["colors","sizes","tags","imageUrls"].includes(ee))le=le?le.split("|").map(Ee=>Ee.trim()).filter(Boolean):[];else if(ee==="specifications")try{le=le?JSON.parse(le):{}}catch{le={}}else le=le.trim();Q[ee]=le}),H.push(Q)}return H};function v(O){return(O||"").replace(/\s+/g," ").trim().toLowerCase()}function N(O,V){const Y=v(O);return V.find(H=>v(H)===Y)||O}function k(O,V){const Y=v(O);return V.some(H=>v(H)===Y)}const A=O=>{if(!a.length||!Object.keys(o).length){xe.error("Categories are still loading. Please wait a moment and try again.");return}const V=O.target.files[0];if(!V)return;if(V.type!=="text/csv"&&V.type!=="application/vnd.ms-excel"){xe.error("Please upload a CSV file");return}const Y=new FileReader;Y.onload=H=>{try{const X=b(H.target.result).map(G=>{const B=N(G.category,a),Q=o[B]||[];o[B]||console.warn(`Category "${B}" not found in subcategories object`,o);const ee=N(G.subcategory,Q);return console.log("Categories:",a),console.log("Subcategories:",o),console.log("Product category:",G.category,"->",B,"subcategory:",G.subcategory,"->",ee),{...G,category:B,subcategory:ee}});e(X),xe.success(`${X.length} products loaded successfully!`)}catch{xe.error("Error parsing CSV file. Please check the format.")}},Y.readAsText(V)},R=O=>{const V={};return O.name||(V.name="Name is required"),O.description||(V.description="Description is required"),(!O.price||O.price<=0)&&(V.price="Valid price is required"),(!O.stock||O.stock<0)&&(V.stock="Stock is required"),O.category?k(O.category,a)||(V.category=`Invalid category: "${O.category}". Valid: ${a.join(", ")}`):V.category="Category is required",O.subcategory?k(O.subcategory,o[O.category]||[])||(V.subcategory=`Invalid subcategory: "${O.subcategory}". Valid: ${(o[O.category]||[]).join(", ")}`):V.subcategory="Subcategory is required",(!O.colors||O.colors.length===0)&&(V.colors="At least one color is required"),(!O.imageUrls||O.imageUrls.length===0)&&(V.imageUrls="At least one image is required"),O.country||(V.country="Country is required"),O.state||(V.state="State is required"),V},[_,I]=E.useState([]),P=(O,V,Y)=>{e(H=>H.map(($,X)=>X===O?{...$,[V]:Y}:$))},T=async(O,V=!1,Y)=>{const H=new FormData;H.append("file",O),H.append("isVideo",V);try{const X=await ss.post("https://foremade-backend.onrender.com/upload",H,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4,onUploadProgress:G=>{}});if(X.status!==200||!X.data.url)throw new Error(`Failed to upload ${V?"video":"image"} to Cloudinary.`);return X.data.url}catch($){throw console.error(`${V?"Video":"Image"} upload error:`,{message:$.message,code:$.code,response:$.response?.data}),new Error($.code==="ECONNABORTED"?"Request timed out. Please check your network or try again later.":$.code==="ERR_NETWORK"?"Cannot connect to server. Please check your network or server status.":$.response?.data?.error||`Failed to upload ${V?"video":"image"}.`)}finally{}},D=(O,V)=>{const Y=Array.from(V);e(H=>H.map(($,X)=>X===O?{...$,imageFiles:Y,imageUrls:[]}:$))},L=(O,V)=>{const Y=V[0];e(H=>H.map(($,X)=>X===O?{...$,videoFile:Y,videoUrl:""}:$))},F=O=>{e(V=>V.filter((Y,H)=>H!==O))},z=async()=>{if(!a.length||!Object.keys(o).length){xe.error("Categories are still loading. Please wait a moment and try again.");return}const O=r.map(Q=>{const ee=N(Q.category,a),se=o[ee]||[];o[ee]||console.warn(`Category "${ee}" not found in subcategories object`,o);const le=N(Q.subcategory,se);return console.log("Categories:",a),console.log("Subcategories:",o),console.log("Product category:",Q.category,"->",ee,"subcategory:",Q.subcategory,"->",le),{...Q,category:ee,subcategory:le}}),V=O.map(R);if(I(V),V.some(Q=>Object.keys(Q).length>0)){xe.error("Please fix errors before submitting.");return}s(!0);let Y=0,H=0,$=[];const X=ve.currentUser,G=X?.uid||x?.uid||"",B=X?.displayName||x?.displayName||x?.name||"";try{const Q=await Promise.all(O.map(async ee=>{let se=[];ee.imageFiles&&ee.imageFiles.length>0?se=await Promise.all(ee.imageFiles.map(ue=>T(ue,!1))):ee.imageUrls&&ee.imageUrls.length>0&&(se=ee.imageUrls);let le="";ee.videoFile?le=await T(ee.videoFile,!0):ee.videoUrl&&(le=ee.videoUrl);const Ee={...ee,imageUrls:se,videoUrl:le,sellerId:G,seller:{name:B,id:G},sellerName:B};return delete Ee.imageFiles,delete Ee.videoFile,Ee}));for(const ee of Q)try{await Za(_e(J,"products"),ee),Y++}catch(se){H++,$.push(ee.name||"Unnamed product"),console.error("Failed to upload product:",ee,se)}Y>0&&(xe.success(`${Y} products uploaded successfully!`),e([]),h.current&&(h.current.value="")),H>0&&xe.error(`Failed to upload ${H} products: ${$.join(", ")}`)}catch(Q){xe.error(Q.message||"Failed to upload products")}finally{s(!1)}};return n.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-4 md:p-8",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsx("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-center gap-2",children:n.jsx("a",{href:"/sell",className:"inline-block px-5 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold",children:"Return to Dashboard"})}),n.jsx(Co,{alerts:f,removeAlert:g}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bulk Product Upload"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Upload multiple products at once for faster inventory management"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-[#112d4e]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Download Template"}),n.jsx("p",{className:"text-sm text-[#112d4e]",children:"Get the CSV template to format your data correctly"})]})]}),n.jsx("button",{onClick:y,className:"mt-4 w-full px-4 py-2 bg-[#112d4e] text-white rounded-md hover:bg-blue-700 transition-colors",children:"Download Template"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-blue-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-[#112d4e]",children:"Upload CSV"}),n.jsx("p",{className:"text-sm text-[#112d4e]",children:"Upload your formatted CSV file with product data"})]})]}),n.jsx("input",{ref:h,type:"file",accept:".csv",onChange:A,className:"mt-4 w-full px-4 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-[#112d4e]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-[#112d4e]",children:"Submit for Review"}),n.jsx("p",{className:"text-sm text-[#112d4e]",children:"Submit your products for admin approval"})]})]}),n.jsx("button",{onClick:z,disabled:t||r.length===0,className:"mt-4 w-full px-4 py-2 bg-[#112d4e] text-white rounded-md hover:bg-[#112d4e] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t?"Submitting...":`Submit ${r.length} Products`})]})]}),r.length>0&&n.jsx("div",{className:"space-y-6",children:r.map((O,V)=>n.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Name *"}),n.jsx("input",{type:"text",value:O.name||"",onChange:Y=>P(V,"name",Y.target.value),className:`w-full border rounded px-2 py-1 text-sm ${_[V]?.name?"border-red-500":"border-gray-300"}`}),_[V]?.name&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].name})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Category *"}),n.jsx("input",{type:"text",value:O.category||"",onChange:Y=>P(V,"category",Y.target.value),className:`w-full border rounded px-2 py-1 text-sm ${_[V]?.category?"border-red-500":"border-gray-300"}`}),_[V]?.category&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].category})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Description *"}),n.jsx("textarea",{value:O.description||"",onChange:Y=>P(V,"description",Y.target.value),className:`w-full border rounded px-2 py-1 text-sm ${_[V]?.description?"border-red-500":"border-gray-300"}`,rows:2}),_[V]?.description&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].description})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Price *"}),n.jsx("input",{type:"number",value:O.price||"",onChange:Y=>P(V,"price",Y.target.value),className:`w-full border rounded px-2 py-1 text-sm ${_[V]?.price?"border-red-500":"border-gray-300"}`}),_[V]?.price&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].price})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Stock *"}),n.jsx("input",{type:"number",value:O.stock||"",onChange:Y=>P(V,"stock",Y.target.value),className:`w-full border rounded px-2 py-1 text-sm ${_[V]?.stock?"border-red-500":"border-gray-300"}`}),_[V]?.stock&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].stock})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Colors *"}),n.jsx("input",{type:"text",value:O.colors?.join(" | ")||"",onChange:Y=>P(V,"colors",Y.target.value.split("|").map(H=>H.trim()).filter(Boolean)),className:`w-full border rounded px-2 py-1 text-sm ${_[V]?.colors?"border-red-500":"border-gray-300"}`,placeholder:"e.g. Red | blue"}),_[V]?.colors&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].colors})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Sizes"}),n.jsx("input",{type:"text",value:O.sizes?.join(" | ")||"",onChange:Y=>P(V,"sizes",Y.target.value.split("|").map(H=>H.trim()).filter(Boolean)),className:"w-full border rounded px-2 py-1 text-sm",placeholder:"e.g. S | M | L"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Tags"}),n.jsx("input",{type:"text",value:O.tags?.join(" | ")||"",onChange:Y=>P(V,"tags",Y.target.value.split("|").map(H=>H.trim()).filter(Boolean)),className:"w-full border rounded px-2 py-1 text-sm",placeholder:"e.g. Audio | Portable"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Manual Size"}),n.jsx("input",{type:"text",value:O.manualSize||"",onChange:Y=>P(V,"manualSize",Y.target.value),className:"w-full border rounded px-2 py-1 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Condition"}),n.jsx("input",{type:"text",value:O.condition||"",onChange:Y=>P(V,"condition",Y.target.value),className:"w-full border rounded px-2 py-1 text-sm",placeholder:"e.g. New"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Subcategory"}),n.jsx("input",{type:"text",value:O.subcategory||"",onChange:Y=>P(V,"subcategory",Y.target.value),className:"w-full border rounded px-2 py-1 text-sm"}),_[V]?.subcategory&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].subcategory})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Country *"}),n.jsx("input",{type:"text",value:O.country||"",onChange:Y=>P(V,"country",Y.target.value),className:`w-full border rounded px-2 py-1 text-sm ${_[V]?.country?"border-red-500":"border-gray-300"}`}),_[V]?.country&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].country})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"State *"}),n.jsx("input",{type:"text",value:O.state||"",onChange:Y=>P(V,"state",Y.target.value),className:`w-full border rounded px-2 py-1 text-sm ${_[V]?.state?"border-red-500":"border-gray-300"}`}),_[V]?.state&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].state})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"City"}),n.jsx("input",{type:"text",value:O.city||"",onChange:Y=>P(V,"city",Y.target.value),className:"w-full border rounded px-2 py-1 text-sm"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Address"}),n.jsx("input",{type:"text",value:O.address||"",onChange:Y=>P(V,"address",Y.target.value),className:"w-full border rounded px-2 py-1 text-sm"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Specifications (JSON)"}),n.jsx("textarea",{value:typeof O.specifications=="string"?O.specifications:JSON.stringify(O.specifications||{}),onChange:Y=>P(V,"specifications",Y.target.value),className:"w-full border rounded px-2 py-1 text-sm",rows:2})]})]}),n.jsxs("div",{className:"flex flex-col gap-2 w-full md:w-64",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Images *"}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:O.imageFiles&&O.imageFiles.length>0?O.imageFiles.map((Y,H)=>Y instanceof File?n.jsx("img",{src:URL.createObjectURL(Y),alt:"preview",className:"w-16 h-16 object-cover rounded border"},H):null):O.imageUrls?.map((Y,H)=>typeof Y=="string"&&Y?n.jsx("img",{src:Y,alt:"preview",className:"w-16 h-16 object-cover rounded border"},H):null)}),n.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Y=>D(V,Y.target.files),className:"w-full"}),n.jsx("input",{type:"text",placeholder:"Or paste image URLs separated by |",value:O.imageUrls?.join(" | ")||"",onChange:Y=>P(V,"imageUrls",Y.target.value.split("|").map(H=>H.trim()).filter(Boolean)),className:"w-full mt-1 text-xs border rounded px-2 py-1"}),_[V]?.imageUrls&&n.jsx("div",{className:"text-xs text-red-600",children:_[V].imageUrls})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700",children:"Video"}),O.videoFile&&n.jsx("video",{src:URL.createObjectURL(O.videoFile),controls:!0,className:"w-full h-24 object-cover rounded mb-1"}),!O.videoFile&&O.videoUrl&&n.jsx("video",{src:O.videoUrl,controls:!0,className:"w-full h-24 object-cover rounded mb-1"}),n.jsx("input",{type:"file",accept:"video/*",onChange:Y=>L(V,Y.target.files),className:"w-full"}),n.jsx("input",{type:"text",placeholder:"Or paste video URL",value:O.videoUrl||"",onChange:Y=>P(V,"videoUrl",Y.target.value),className:"w-full mt-1 text-xs border rounded px-2 py-1"})]}),n.jsx("button",{onClick:()=>F(V),type:"button",className:"mt-2 w-full px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-xs",children:"Remove Product"})]})]},V))}),n.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Instructions"}),n.jsxs("div",{className:"text-sm text-blue-900 space-y-2",children:[n.jsxs("p",{children:["• Download the CSV template and fill in your product data. Use ",n.jsx("b",{children:"|"})," to separate multiple values (e.g. Red|blue for colors)."]}),n.jsx("p",{children:"• Ensure all required fields are filled (name, description, price, stock, category, colors, imageUrls, country, state)."}),n.jsx("p",{children:"• Maximum 100 products per upload."}),n.jsx("p",{children:"• All products will be reviewed by admin before approval."}),n.jsx("p",{children:"• Image URLs should be publicly accessible, or you can upload images after CSV upload."}),n.jsx("p",{children:"• Specifications should be in valid JSON format."})]})]})]})})]})},kue=()=>{const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(""),[o,l]=E.useState({}),[c,u]=E.useState(0),[h,f]=E.useState(""),[g,x]=E.useState(!1),[y,b]=E.useState(!1),{userProfile:v}=hd(),[N,k]=E.useState({}),A=[{value:"72h",label:"3 Days",price:1500,hours:"72h"},{value:"168h",label:"7 Days",price:3500,hours:"168h"}];E.useCallback(Sd(V=>{f(V)},300),[]);const R=async()=>{try{ai(ve,async V=>{if(V)try{const Y=ft(_e(J,"products"),rt("sellerId","==",V.uid)),$=(await Ke(Y)).docs.map(X=>{const G=X.data(),B=Array.isArray(G.imageUrls)?G.imageUrls.filter(Q=>typeof Q=="string"&&Q.startsWith("https://res.cloudinary.com/")):G.imageUrl&&typeof G.imageUrl=="string"&&G.imageUrl.startsWith("https://res.cloudinary.com/")?[G.imageUrl]:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"];return{id:X.id,...G,imageUrls:B.length>0?B:["https://res.cloudinary.com/your_cloud_name/image/upload/v1/default.jpg"],uploadDate:G.uploadDate?G.uploadDate.toDate():new Date,bumpExpiry:G.bumpExpiry?G.bumpExpiry.toDate():null,isBumped:G.isBumped||!1}});e($)}catch(Y){i("Failed to fetch products: "+Y.message)}else i("Please log in to view your products.");s(!1)})}catch(V){i("Authentication error: "+V.message),s(!1)}},_=async()=>{try{const V=await fetch("https://foremade-backend.onrender.com/api/pro-seller/bump-quota",{method:"GET",headers:{"Content-Type":"application/json"}}),Y=await V.text();if(!V.ok){const $=Y?JSON.parse(Y):{error:"Unknown error"};throw new Error(`HTTP error! Status: ${V.status}, Message: ${$.error||"No details"}`)}const H=Y?JSON.parse(Y):{};u(H.quota||0)}catch(V){console.error("Fetch bump quota error:",V.message),u(0),xe.error("Failed to load bump quota. Please try again.")}},I=async(V,Y,H)=>{try{x(!0);const $=ve.currentUser;if(!$)throw new Error("User not authenticated");const X=await $.getIdToken(!0),B={"72h":"72h","168h":"168h"}[H]||"24h",Q="https://foremade-backend.onrender.com",se=A.find(ce=>ce.hours===H).price*100,le=Math.floor(se*.1),Ee=se-le,ue=await fetch(`${Q}/api/bump-product`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({productId:Y,bumpDuration:B,paymentIntentId:V.reference||`fallback-${Date.now()}`,adminFee:le,sellerAmount:Ee})}),Oe=await ue.text();if(!ue.ok){const ce=Oe?JSON.parse(Oe):{error:"Unknown error"};throw new Error(`HTTP error! Status: ${ue.status}, Message: ${ce.error||"No details"}`)}const Pe=Oe?JSON.parse(Oe):{};xe.success(Pe.message||"Product bumped successfully!");const Ie=new Date,ie={"72h":4320*60*1e3,"168h":10080*60*1e3}[B];Ie.setTime(Ie.getTime()+ie),await Za(_e(J,"bumpTransactions"),{productId:Y,sellerId:$.uid,bumpDuration:B,paymentIntentId:V.reference||`fallback-${Date.now()}`,bumpExpiry:Ie,timestamp:new Date});const ze=Ne(J,"products",Y);await Qr(ze,{bumpExpiry:Ie,isBumped:!0});const Ve=await fetch(`${Q}/api/send-bump-email`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({sellerId:$.uid,productId:Y,productName:r.find(ce=>ce.id===Y)?.name||"Unnamed Product",expiryDate:Ie.toISOString()})});Ve.ok||console.warn("Email notification failed:",await Ve.text()),e(ce=>ce.map(ke=>ke.id===Y?{...ke,bumpExpiry:Ie,isBumped:!0}:ke)),u(ce=>ce-1)}catch($){console.error("Bump product error:",$.message),xe.error($.message||"Failed to bump product")}finally{x(!1),l($=>({...$,[Y]:!1}))}},P=()=>{xe.info("Payment cancelled.",{position:"top-right",autoClose:3e3})},T=async V=>{const Y=Ne(J,"products",V);await Qr(Y,{views:(r.find(H=>H.id===V)?.views||0)+1})};E.useEffect(()=>{let V;return(()=>{V=ai(ve,H=>{H?(R(),_()):(i("Please log in to view your products."),s(!1))})})(),()=>V&&V()},[]),E.useEffect(()=>{const V=()=>{const H={};r.forEach($=>{if($.bumpExpiry&&new Date($.bumpExpiry)>new Date){const X=new Date,B=new Date($.bumpExpiry)-X;H[$.id]=B>0?B:0}}),k(H)};V();const Y=setInterval(V,1e3);return()=>clearInterval(Y)},[r]);const D=V=>{if(V<=0)return"Expired";const Y=Math.floor(V/(1e3*60*60)),H=Math.floor(V%(1e3*60*60)/(1e3*60)),$=Math.floor(V%(1e3*60)/1e3);return`${Y}:${H.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}`},L=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=V=>V.isBumped&&V.bumpExpiry&&new Date(V.bumpExpiry)>new Date,z=()=>window.location.reload(),O=r.filter(V=>V.name?.toLowerCase().includes(h.toLowerCase()));return t?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Es,{onToggle:()=>b(!y),isOpen:y}),n.jsx("div",{className:`flex-1 p-2 sm:p-4 ${y?"ml-64":"ml-0"} transition-all duration-300 md:ml-64 flex justify-center items-center`,children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-4 w-full max-w-5xl",children:Array.from({length:6}).map((V,Y)=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-2 sm:p-3 shadow-sm animate-pulse h-32 sm:h-40"},Y))})})]}):a?n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-100 to-gray-50",children:n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-3 sm:p-4 rounded-lg shadow-lg max-w-xs sm:max-w-md mx-auto",children:[n.jsx("p",{className:"text-red-700 text-sm sm:text-base mb-1 sm:mb-2",children:a}),n.jsx(he,{to:"/login",className:"text-blue-600 hover:text-blue-800 font-medium underline text-sm sm:text-base",children:"Return to Login"})]})}):v&&!v.isProSeller?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow text-center max-w-sm sm:max-w-md mx-auto",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-3 text-orange-600",children:"Pro Seller Feature"}),n.jsx("p",{className:"mb-2 sm:mb-3 text-gray-700 text-sm sm:text-base",children:"Product bump is only available to Pro Sellers. Upgrade now to boost your products' visibility!"}),n.jsx(he,{to:"/pro-seller-guide-full",className:"inline-block px-3 sm:px-4 py-1.5 sm:py-2 text-white rounded font-semibold",style:{backgroundColor:"#112d4e"},onMouseOver:V=>V.target.style.backgroundColor="#0d2440",onMouseOut:V=>V.target.style.backgroundColor="#112d4e",children:"Upgrade to Pro Seller"}),n.jsx("div",{className:"mt-2 sm:mt-3",children:n.jsx(he,{to:"/sell",className:"inline-block px-3 sm:px-4 py-1.5 sm:py-2 bg-gray-200 text-gray-900 rounded hover:bg-gray-300 font-semibold text-sm sm:text-base",children:"Return to Dashboard"})})]})}):n.jsxs("div",{className:"min-h-screen flex m-5",children:[n.jsx(Es,{onToggle:()=>b(!y),isOpen:y}),n.jsxs("div",{className:`flex-1 p-2 sm:p-4 ${y?"ml-64":"ml-0"} mt-6 transition-all duration-300 md:ml-64`,children:[n.jsxs("div",{className:"mb-4 sm:mb-6",children:[n.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:"Product Bump"}),n.jsxs("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:["Boost your products' visibility with the bump feature. Quota: ",c]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 mb-4 sm:mb-6",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-3",children:n.jsxs("div",{className:"p-4 flex items-center",children:[n.jsx("div",{className:"p-1 sm:p-1.5 bg-blue-100 rounded-lg",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsxs("div",{className:"ml-1 sm:ml-2",children:[n.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"Bump Overview"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-700",children:"Increase visibility of your products"})]})]})}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 sm:p-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-1 sm:p-1.5 bg-blue-100 rounded-lg",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),n.jsxs("div",{className:"ml-1 sm:ml-2",children:[n.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"Refresh"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-700",children:"Update your product list"})]})]}),n.jsx("button",{onClick:z,className:"mt-1 sm:mt-2 w-full px-2 sm:px-3 py-1 sm:py-1.5 text-white rounded-lg transition-colors text-xs sm:text-sm",style:{backgroundColor:"#112d4e"},onMouseOver:V=>V.target.style.backgroundColor="#0d2440",onMouseOut:V=>V.target.style.backgroundColor="#112d4e",children:"Refresh"})]})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3",children:O.length>0?O.map(V=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 sm:p-3 shadow-md hover:shadow-lg transition duration-300",onClick:()=>T(V.id),children:[n.jsxs("div",{className:"relative aspect-square sm:aspect-[4/3] mb-1 sm:mb-2 overflow-hidden rounded-lg",children:[n.jsx("img",{src:V.imageUrls[0],alt:V.name||"Product Image",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105 cursor-pointer",onError:Y=>{Y.target.style.display="none",Y.target.parentElement.innerHTML='<div class="absolute w-full h-full bg-gray-200 rounded-lg flex items-center justify-center"><span class="text-gray-500 text-xs sm:text-sm">Image N/A</span></div>'}}),F(V)&&n.jsx("span",{className:"absolute top-1 left-1 inline-flex items-center px-1 sm:px-1.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Bumped Up"})]}),n.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-1 truncate",children:V.name||"Unnamed Product"}),n.jsxs("p",{className:"text-gray-700 text-xs sm:text-sm mb-1",children:["Price: ₦",(V.price||0).toLocaleString("en-NG")]}),n.jsxs("p",{className:"text-gray-600 text-xs mt-1",children:["Uploaded: ",V.uploadDate.toLocaleDateString("en-NG",{day:"2-digit",month:"short",year:"numeric"})]}),F(V)&&N[V.id]>0&&n.jsxs("div",{className:"mt-1 sm:mt-2 p-1 sm:p-1.5 bg-green-50 border border-green-200 rounded-md",children:[n.jsxs("p",{className:"text-xs sm:text-sm text-gray-900",children:["Time Remaining: ",D(N[V.id])]}),V.bumpExpiry&&n.jsxs("p",{className:"text-xs mt-0.5",children:["Expires: ",L(V.bumpExpiry)]})]}),!F(V)&&n.jsx("div",{className:"mt-1 sm:mt-2 space-y-1 sm:space-y-1.5",children:A.map(Y=>n.jsx(bO,{email:ve.currentUser?.email,amount:Y.price*100,onSuccess:H=>I(H,V.id,Y.hours),onClose:P,disabled:o[V.id]||c<=0||g,buttonText:`${Y.label} (₦${Y.price.toLocaleString("en-NG")})`,className:`w-full flex items-center justify-center px-1.5 sm:px-2 py-1 rounded-lg text-xs sm:text-sm font-medium transition duration-200 ${o[V.id]||c<=0||g?"bg-gray-200 text-gray-500 cursor-not-allowed":"text-white"}`,style:o[V.id]||c<=0||g?{}:{backgroundColor:"#112d4e"},onMouseOver:H=>{o[V.id]||c<=0||g||(H.target.style.backgroundColor="#0d2440")},onMouseOut:H=>{o[V.id]||c<=0||g||(H.target.style.backgroundColor="#112d4e")},sellerId:ve.currentUser?.uid},Y.hours))}),o[V.id]&&n.jsxs("div",{className:"flex items-center justify-center py-1",children:[n.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-1 text-xs sm:text-sm text-blue-600",children:"Processing..."})]})]},V.id)):n.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center mt-4 sm:mt-6 mb-4 sm:mb-6",children:[n.jsx(qf,{className:"w-12 sm:w-16 h-12 sm:h-16 text-gray-300"}),n.jsxs("p",{className:"text-gray-900 text-center text-sm sm:text-base mt-1 sm:mt-2",children:["No products uploaded yet.",n.jsx("br",{}),"Start by adding your first product!"]}),n.jsx(he,{to:"/products-upload",className:"mt-1 sm:mt-2 px-3 sm:px-4 py-1 sm:py-1.5 text-white rounded-lg transition duration-300 text-sm sm:text-base",style:{backgroundColor:"#112d4e"},onMouseOver:V=>V.target.style.backgroundColor="#0d2440",onMouseOut:V=>V.target.style.backgroundColor="#112d4e",children:"Add Your First Product"})]})}),n.jsxs("div",{className:"mt-3 sm:mt-4 bg-blue-50/50 border border-blue-100 rounded-lg p-4 sm:p-4",children:[n.jsx("h3",{className:"text-sm sm:text-base font-semibold text-blue-800 mb-1 sm:mb-2",children:"How Product Bump Works"}),n.jsxs("div",{className:"text-xs sm:text-sm text-blue-700/80 space-y-0.5 sm:space-y-1",children:[n.jsx("p",{children:"• Select a product from the list below."}),n.jsx("p",{children:"• Choose a bump duration (3 or 7 days) and click the corresponding button."}),n.jsx("p",{children:"• Complete the payment via Paystack to activate the bump."}),n.jsx("p",{children:"• Bumped products appear at the top of search results for the selected duration."})]})]})]})]})};function Sue({alerts:r,removeAlert:e}){return n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:n.jsx(tn,{children:r.map(t=>n.jsxs(Ze.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},transition:{duration:.3},className:`p-4 rounded-lg shadow-lg flex items-center gap-2 ${t.type==="error"?"bg-red-600":"bg-green-600"} text-white`,children:[n.jsx("i",{className:`bx ${t.type==="error"?"bx-error-circle":"bx-check-circle"} text-xl`}),n.jsx("span",{children:t.message}),n.jsx("button",{onClick:()=>e(t.id),className:"ml-auto text-lg font-bold hover:text-gray-200",children:"✕"})]},t.id))})})}function _ue(){const[r,e]=E.useState([]),t=E.useCallback((a,i="success")=>{const o=Date.now();e(l=>[...l,{id:o,message:a,type:i}]),setTimeout(()=>e(l=>l.filter(c=>c.id!==o)),5e3)},[]),s=E.useCallback(a=>{e(i=>i.filter(o=>o.id!==a))},[]);return{alerts:r,addAlert:t,removeAlert:s}}function Aue(){const r=us(),{alerts:e,addAlert:t,removeAlert:s}=_ue(),[a,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState(""),h=E.useCallback(Sd(g=>{u(g)},300),[]),f=g=>{h(g.target.value)};return E.useEffect(()=>{if(!ve.currentUser){t("Please log in.","error"),r("/login");return}const g=ft(_e(J,"transactions"),rt("sellerId","==",ve.currentUser.uid)),x=os(g,y=>{const b=y.docs.map(v=>({id:v.id,...v.data()}));i(b),l(b.filter(v=>(v.id?.toLowerCase()||"").includes(c.toLowerCase())||(v.type?.toLowerCase()||"").includes(c.toLowerCase())))},y=>{console.error("Firestore error:",y.message),t(`Failed to fetch transactions: ${y.message}`,"error")});return()=>x()},[r,c]),n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(Es,{}),n.jsx(Ze.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:[n.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:n.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500 flex items-center gap-2",children:[n.jsx(zu,{className:"w-8 h-8"}),"Transaction History"]})}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search by Transaction ID or Type...",onChange:f,className:"w-full p-3 pl-10 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"}),n.jsx("i",{className:"bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"})]})}),o.length===0?n.jsx(Ze.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-gray-600 dark:text-gray-400 text-center py-8",children:"No transactions found."}):n.jsx(Ze.div,{className:"grid gap-4 lg:grid-cols-2",children:n.jsx(tn,{children:o.map((g,x)=>n.jsxs(Ze.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,delay:x*.1},className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",g.id]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Type:"})," ",g.type||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Status:"})," ",n.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-semibold ${g.status==="Pending"?"bg-yellow-100 text-yellow-800":g.status==="Approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.status||"N/A"})]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ",g.country==="United Kingdom"?"£":"₦",g.amount?.toFixed(2)||"0.00"]}),g.type==="Withdrawal"&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Bank:"})," ",g.bankName||"N/A"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Account:"})," ",g.accountNumber||"N/A"]})]})]})]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Date:"})," ",g.createdAt?.toDate?new Date(g.createdAt.toDate()).toLocaleString():"N/A"]}),g.status==="Failed"&&g.failureReason&&n.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Reason:"})," ",g.failureReason]})]},g.id))})}),n.jsx(Sue,{alerts:e,removeAlert:s})]})})]})}_h.register(O2,aoe,U2,z2,noe,F2,L2);const Tc={background:"#fff",borderRadius:16,boxShadow:"0 2px 16px rgba(0,0,0,0.06)",width:"100%",padding:"1rem"},Cue=()=>{const[r,e]=E.useState({totalProducts:0,activeProducts:0,totalViews:0,totalSales:0,averageRating:0,topProducts:[],monthlyTrends:[]}),[t,s]=E.useState(!0),[a,i]=E.useState(""),[o,l]=E.useState("30d"),{alerts:c,removeAlert:u}=Bl(),{userProfile:h}=hd(),f=[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"1y",label:"Last Year"}];if(h&&!h.isProSeller)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow text-center max-w-xs sm:max-w-md mx-auto",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-orange-600",children:"Pro Seller Feature"}),n.jsx("p",{className:"mb-4 text-gray-700 text-sm sm:text-base",children:"Product analytics are only available to Pro Sellers. Upgrade now to track your performance and sales metrics!"}),n.jsx("a",{href:"/pro-seller-guide-full",className:"inline-block px-4 py-2 sm:px-6 sm:py-2 bg-orange-500 text-white rounded hover:bg-orange-600 font-semibold text-sm sm:text-base",children:"Upgrade to Pro Seller"}),n.jsx("div",{className:"mt-4 sm:mt-6",children:n.jsx("a",{href:"/sell",className:"inline-block px-4 py-2 sm:px-5 sm:py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold text-sm sm:text-base",children:"Return to Dashboard"})})]})});E.useEffect(()=>{let N;return s(!0),i(""),N=ai(ve,async k=>{if(!k){i("Please log in to view analytics."),s(!1);return}try{const A=k.uid,I=(await Ke(ft(_e(J,"products"),rt("sellerId","==",A)))).docs.map(Y=>({id:Y.id,...Y.data()})).map(Y=>{const H=localStorage.getItem(`analytics_${Y.id}`);if(H){const{views:$,sales:X,bumpExpiry:G}=JSON.parse(H);return{...Y,views:$,sales:X,bumpExpiry:G?new Date(G):null}}return Y}),P=I.length,T=I.filter(Y=>Y.status==="approved").length,D=I.reduce((Y,H)=>Y+(H.views||0),0),L=I.reduce((Y,H)=>Y+(H.sales||0),0),F=I.length?I.reduce((Y,H)=>Y+(H.rating||0),0)/I.length:0,z=[...I].sort((Y,H)=>(H.sales||0)-(Y.sales||0)).slice(0,5).map(Y=>({name:Y.name,sales:Y.sales||0,views:Y.views||0})),O={};I.forEach(Y=>{if(Y.createdAt){const H=new Date(Y.createdAt),$=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}`;O[$]||(O[$]={month:$,views:0,sales:0}),O[$].views+=Y.views||0,O[$].sales+=Y.sales||0}});const V=Object.values(O).sort((Y,H)=>Y.month.localeCompare(H.month));e({totalProducts:P,activeProducts:T,totalViews:D,totalSales:L,averageRating:F,topProducts:z,monthlyTrends:V})}catch(A){i("Failed to load analytics: "+A.message)}finally{s(!1)}}),()=>N&&N()},[o]);const g=N=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(N),x=N=>new Intl.NumberFormat("en-NG").format(N);if(t)return n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Es,{}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 p-2 sm:p-4 flex justify-center items-center",children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 w-full max-w-4xl",children:Array.from({length:6}).map((N,k)=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-2 sm:p-3 shadow-md animate-pulse h-48 sm:h-56"},k))})})]});if(a)return n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-50",children:[n.jsx(Es,{}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow text-center max-w-xs sm:max-w-md mx-auto",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-red-600",children:"Error"}),n.jsx("p",{className:"mb-4 text-gray-700 text-sm sm:text-base",children:a}),n.jsx("a",{href:"/sell",className:"inline-block px-4 py-2 sm:px-5 sm:py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold text-sm sm:text-base",children:"Return to Dashboard"})]})]});const y={labels:r.topProducts.map(N=>N.name),datasets:[{label:"Sales",data:r.topProducts.map(N=>N.sales),backgroundColor:"#8884d8"}]},b={labels:r.monthlyTrends.map(N=>N.month),datasets:[{label:"Views",data:r.monthlyTrends.map(N=>N.views),borderColor:"#8884d8",backgroundColor:"rgba(136,132,216,0.2)",fill:!0,tension:.4},{label:"Sales",data:r.monthlyTrends.map(N=>N.sales),borderColor:"#82ca9d",backgroundColor:"rgba(130,202,157,0.2)",fill:!0,tension:.4}]},v={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{enabled:!0}},scales:{x:{ticks:{font:{size:10}}},y:{beginAtZero:!0,ticks:{font:{size:10}}}}};return n.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[n.jsx(Es,{}),n.jsxs("div",{className:"flex-1 ml-0 md:ml-64 p-2 sm:p-4",children:[n.jsx("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-4",children:n.jsx(he,{to:"/sell",className:"inline-block px-3 sm:px-4 py-1 sm:py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 font-semibold text-xs sm:text-sm",children:"Return to Dashboard"})}),n.jsx(Co,{alerts:c,removeAlert:u}),n.jsxs("div",{className:"mb-4 sm:mb-6",children:[n.jsx("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900",children:"Pro Seller Analytics"}),n.jsx("p",{className:"text-gray-600 mt-1 sm:mt-2 text-xs sm:text-base",children:"Track your performance and sales metrics"}),n.jsx("div",{className:"mt-2 sm:mt-4",children:n.jsx("select",{value:o,onChange:N=>l(N.target.value),className:"w-full sm:w-auto px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-md text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:f.map(N=>n.jsx("option",{value:N.value,children:N.label},N.value))})})]}),!r.topProducts?.length&&!r.monthlyTrends?.length&&n.jsx("div",{className:"text-center text-gray-500 mb-4 sm:mb-6 text-xs sm:text-base",children:"No analytics data available yet."}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 mb-4 sm:mb-6",children:[n.jsxs("div",{style:Tc,className:"flex items-center",children:[n.jsx("div",{className:"p-1 sm:p-2 bg-blue-100 rounded-lg",children:n.jsx("svg",{className:"w-4 sm:w-6 h-4 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),n.jsxs("div",{className:"ml-2 sm:ml-4",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Products"}),n.jsx("p",{className:"text-base sm:text-2xl font-bold text-gray-900",children:x(r.totalProducts)})]})]}),n.jsxs("div",{style:Tc,className:"flex items-center",children:[n.jsx("div",{className:"p-1 sm:p-2 bg-green-100 rounded-lg",children:n.jsxs("svg",{className:"w-4 sm:w-6 h-4 sm:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),n.jsxs("div",{className:"ml-2 sm:ml-4",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Views"}),n.jsx("p",{className:"text-base sm:text-2xl font-bold text-gray-900",children:x(r.totalViews)})]})]}),n.jsxs("div",{style:Tc,className:"flex items-center",children:[n.jsx("div",{className:"p-1 sm:p-2 bg-yellow-100 rounded-lg",children:n.jsx("svg",{className:"w-4 sm:w-6 h-4 sm:h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),n.jsxs("div",{className:"ml-2 sm:ml-4",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsx("p",{className:"text-base sm:text-2xl font-bold text-gray-900",children:g(r.totalSales)})]})]}),n.jsxs("div",{style:Tc,className:"flex items-center",children:[n.jsx("div",{className:"p-1 sm:p-2 bg-purple-100 rounded-lg",children:n.jsx("svg",{className:"w-4 sm:w-6 h-4 sm:h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),n.jsxs("div",{className:"ml-2 sm:ml-4",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Average Rating"}),n.jsx("p",{className:"text-base sm:text-2xl font-bold text-gray-900",children:r.averageRating.toFixed(1)})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 sm:gap-4 mb-4 sm:mb-6",children:[n.jsxs("div",{style:Tc,children:[n.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2 sm:mb-4",children:"Monthly Trends"}),n.jsx("div",{className:"w-full h-40 sm:h-64 md:h-80",children:n.jsx(Moe,{data:b,options:v})})]}),n.jsxs("div",{style:Tc,children:[n.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2 sm:mb-4",children:"Top Products"}),n.jsx("div",{className:"w-full h-40 sm:h-64 md:h-80",children:n.jsx(B2,{data:y,options:v})})]})]}),n.jsxs("div",{style:Tc,children:[n.jsx("div",{className:"px-2 sm:px-4 py-2 sm:py-3 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Top Performing Products"})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 sm:px-4 py-1 sm:py-2 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-2 sm:px-4 py-1 sm:py-2 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Views"}),n.jsx("th",{className:"px-2 sm:px-4 py-1 sm:py-2 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Sales"}),n.jsx("th",{className:"px-2 sm:px-4 py-1 sm:py-2 text-left text-xs sm:text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.topProducts.map((N,k)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 sm:px-4 py-1 sm:py-2 whitespace-nowrap text-sm sm:text-base font-medium text-gray-900",children:N.name}),n.jsx("td",{className:"px-2 sm:px-4 py-1 sm:py-2 whitespace-nowrap text-sm sm:text-base text-gray-900",children:x(N.views)}),n.jsx("td",{className:"px-2 sm:px-4 py-1 sm:py-2 whitespace-nowrap text-sm sm:text-base text-gray-900",children:x(N.sales)}),n.jsx("td",{className:"px-2 sm:px-4 py-1 sm:py-2 whitespace-nowrap text-sm sm:text-base font-medium text-gray-900",children:g(N.sales)})]},N.productId))})]})})]})]})]})};function Eue(r){if(r.length===0)return!1;const e=r[r.length-1];return/photo|image|picture|show|damage|send us|share/i.test(e.text)}const w4=()=>{const{chatId:r}=Lo(),e=us(),[t,s]=E.useState([]),[a,i]=E.useState(null),[o,l]=E.useState([]),[c,u]=E.useState(""),[h,f]=E.useState(null),[g,x]=E.useState(null),[y,b]=E.useState(!1),[v,N]=E.useState(!1),[k,A]=E.useState(!0),[R,_]=E.useState(!1),I=E.useRef(null),P=E.useRef(null);E.useEffect(()=>{const $=(()=>{if(!ve.currentUser)return xe.error("Please sign in to view chats."),e("/login"),A(!1),()=>{};const X=ft(_e(J,"chats"),rt("sellerId","==",ve.currentUser.uid));return os(X,async B=>{try{const Q=await Promise.all(B.docs.map(async ee=>{const se=ee.data(),le=Ne(J,"orders",se.orderId),Ee=await it(le),ue=Ee.exists()?Ee.data():{},Oe=Ne(J,"users",se.userId),Pe=await it(Oe),Ie=Pe.exists()?Pe.data():{},ie=Ne(J,"products",se.productId),ze=await it(ie),Ve=ze.exists()?ze.data():{};return{chatId:ee.id,orderId:se.orderId,buyerName:Ie.displayName||"Unknown Buyer",buyerAvatar:Ie.avatar||"https://ui-avatars.com/api/?name=B&background=3b82f6&color=fff&size=40",productName:ue.items?.[0]?.name||Ve.name||"Product",lastMessage:se.lastMessage||"",lastMessageTime:se.lastMessageTime||se.createdAt||new Date}}));if(console.log("Fetched chats:",Q),s(Q),r){const ee=Q.find(se=>se.chatId===r);if(ee){i(ee);const se=ft(_e(J,"chats",r,"messages"),jg("timestamp","asc")),le=os(se,Oe=>{const Pe=Oe.docs.map(Ie=>({id:Ie.id,...Ie.data()}));l(Pe),A(!1)},Oe=>{console.error("Error fetching messages:",Oe.message),xe.error("Failed to load messages."),A(!1)}),Ee=Ne(J,"chats",r),ue=os(Ee,Oe=>{const Pe=Oe.data();N(Pe?.typing?.[Pe.userId]||!1),A(!1)},Oe=>{console.error("Error fetching typing status:",Oe.message),A(!1)});return()=>{le(),ue()}}else console.warn(`Chat with ID ${r} not found.`),xe.error("Chat not found."),i(null),l([]),A(!1)}else i(null),l([]),A(!1)}catch(Q){console.error("Error fetching chats:",Q.message),xe.error("Failed to load chats."),A(!1)}},B=>{console.error("Error in chats snapshot:",B.message),xe.error("Failed to load chats."),A(!1)})})();return()=>$()},[r,e]);const T=()=>{P.current?.scrollIntoView({behavior:"smooth"})};E.useEffect(()=>{T()},[o]);const D=H=>{const $=H.target.files[0];if($){if(!$.type.startsWith("image/")){xe.error("Please select an image file");return}if($.size>5*1024*1024){xe.error("Image size should be less than 5MB");return}f($);const X=new FileReader;X.onload=G=>x(G.target.result),X.readAsDataURL($)}},L=async()=>{if(!c||!a){xe.error("Please select a message template.");return}try{b(!0),await Za(_e(J,"chats",a.chatId,"messages"),{senderId:ve.currentUser.uid,text:eh.seller[c],image:null,timestamp:new Date,status:"delivered"}),await Qr(Ne(J,"chats",a.chatId),{lastMessage:eh.seller[c],lastMessageTime:new Date,[`typing.${ve.currentUser.uid}`]:!1}),u("")}catch(H){console.error("Error sending message:",H.message),xe.error("Failed to send message.")}finally{b(!1)}},F=async()=>{if(!(!h||!g||!a))try{b(!0),await Za(_e(J,"chats",a.chatId,"messages"),{senderId:ve.currentUser.uid,text:"",image:g,timestamp:new Date,status:"delivered"}),await Qr(Ne(J,"chats",a.chatId),{lastMessage:"Image sent",lastMessageTime:new Date,[`typing.${ve.currentUser.uid}`]:!1}),f(null),x(null),I.current&&(I.current.value="")}catch(H){console.error("Error sending image:",H.message),xe.error("Failed to send image.")}finally{b(!1)}},z=async()=>{if(a)try{await Qr(Ne(J,"chats",a.chatId),{[`typing.${ve.currentUser.uid}`]:!0})}catch(H){console.error("Error updating typing status:",H.message)}},O=H=>{if(!H)return"";try{return(H.toDate?H.toDate():new Date(H)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}},V=H=>{if(!H)return"";try{const $=H.toDate?H.toDate():new Date(H),X=new Date;return $.toDateString()===X.toDateString()?$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):$.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return""}},Y=()=>{_(!R)};return k?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx("div",{className:`fixed inset-y-0 left-0 z-30 w-64 transform transition-transform duration-300 ease-in-out ${R?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:static md:w-64 md:flex-shrink-0`,children:n.jsx(Es,{})}),n.jsx("div",{className:"flex-1 p-4 sm:p-6 flex justify-center items-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[n.jsx("i",{className:"bx bx-loader bx-spin text-xl sm:text-2xl"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Loading..."})]})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx("div",{className:`fixed inset-y-0 left-0 z-30 w-64 transform transition-transform duration-300 ease-in-out ${R?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:static md:w-64 md:flex-shrink-0`,children:n.jsx(Es,{})}),n.jsx("button",{onClick:Y,className:"md:hidden fixed top-4 left-4 z-40 p-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition","aria-label":"Toggle sidebar",children:n.jsx("i",{className:`bx ${R?"bx-x":"bx-menu"} text-lg sm:text-xl`})}),n.jsx("div",{className:"flex-1 p-2 sm:p-4 md:p-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl shadow-lg p-3 sm:p-4 md:p-6 border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"mb-3 sm:mb-4 md:mb-6",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 flex items-center",children:[n.jsx("i",{className:"bx bx-chat text-blue-500 mr-2 text-lg sm:text-xl md:text-2xl"}),"Seller Chats"]}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm mt-1",children:"Manage your conversations with buyers."})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-3 sm:gap-4 h-[calc(100vh-8rem)] sm:h-[calc(100vh-9rem)] md:h-[calc(100vh-10rem)]",children:[n.jsxs(Ze.div,{className:"md:w-1/3 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-600",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5},children:[n.jsx("div",{className:"p-2 sm:p-3 md:p-4 bg-blue-50 dark:bg-blue-900 border-b border-gray-200 dark:border-gray-600",children:n.jsx("h2",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-800 dark:text-gray-100",children:"Chats"})}),t.length===0?n.jsx("p",{className:"p-2 sm:p-3 md:p-4 text-gray-600 dark:text-gray-400 text-xs sm:text-sm",children:"No chats found."}):n.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-600 max-h-[calc(100vh-12rem)] sm:max-h-[calc(100vh-13rem)] md:max-h-[calc(100vh-14rem)] overflow-y-auto",children:n.jsx(tn,{children:t.map(H=>n.jsxs(Ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},onClick:()=>{e(`/seller-chat/${H.chatId}`),i(H),_(!1)},className:`p-2 sm:p-3 md:p-4 flex items-center gap-2 sm:gap-3 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-800 transition ${a?.chatId===H.chatId?"bg-blue-100 dark:bg-blue-900":""}`,children:[n.jsx("img",{src:H.buyerAvatar,alt:"Buyer",className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 rounded-full border border-gray-200 dark:border-gray-600"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-semibold text-xs sm:text-sm md:text-base text-gray-800 dark:text-gray-100 truncate",children:H.buyerName}),n.jsx("p",{className:"text-[10px] sm:text-xs md:text-sm text-gray-500 dark:text-gray-400 truncate",children:H.lastMessage||"No messages yet"})]}),n.jsx("p",{className:"text-[10px] sm:text-xs md:text-sm text-gray-400 dark:text-gray-500",children:V(H.lastMessageTime)})]},H.chatId))})})]}),n.jsx(Ze.div,{className:"md:w-2/3 flex flex-col bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-600",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5},children:a?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 px-2 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-3 bg-blue-600 dark:bg-blue-700 text-white border-b border-gray-200 dark:border-gray-600",children:[n.jsx("img",{src:a.buyerAvatar,alt:"Buyer",className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 rounded-full border-2 border-white"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-sm sm:text-base md:text-lg",children:a.buyerName}),n.jsxs("div",{className:"text-[10px] sm:text-xs md:text-sm text-blue-100 dark:text-blue-200 truncate",children:["Product: ",a.productName]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-2 sm:p-3 md:p-4 space-y-2 sm:space-y-3 bg-gray-100 dark:bg-gray-900 max-h-[calc(100vh-14rem)] sm:max-h-[calc(100vh-15rem)] md:max-h-[calc(100vh-16rem)]",children:[n.jsxs(tn,{children:[o.map(H=>n.jsx(Ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2},className:`flex ${H.senderId===ve.currentUser.uid?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[80%] sm:max-w-[75%] md:max-w-[70%] rounded-lg p-2 sm:p-2.5 md:p-3 shadow-sm relative ${H.senderId===ve.currentUser.uid?"bg-blue-500 text-white rounded-br-none":"bg-white dark:bg-gray-600 text-gray-800 dark:text-gray-100 rounded-bl-none"}`,children:[H.text&&n.jsx("div",{className:"text-xs sm:text-sm md:text-base",children:H.text}),H.image&&n.jsx("img",{src:H.image,alt:"chat-img",className:"max-w-[100px] sm:max-w-[120px] md:max-w-[150px] rounded-md border border-gray-200 dark:border-gray-600 mb-1"}),n.jsx("div",{className:"flex items-center justify-end gap-1 text-[10px] sm:text-xs md:text-sm mt-1",children:n.jsx("span",{className:H.senderId===ve.currentUser.uid?"text-blue-100":"text-gray-500 dark:text-gray-400",children:O(H.timestamp)})}),n.jsx("div",{className:`absolute bottom-0 ${H.senderId===ve.currentUser.uid?"right-[-6px]":"left-[-6px]"} w-0 h-0 border-t-[6px] border-t-transparent ${H.senderId===ve.currentUser.uid?"border-l-[6px] border-l-blue-500":"border-r-[6px] border-r-white dark:border-r-gray-600"} border-b-[6px] border-b-transparent`})]})},H.id)),(y||v)&&n.jsx(Ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-start",children:n.jsx("div",{className:"bg-white dark:bg-gray-600 rounded-lg p-2 sm:p-2.5 md:p-3 shadow-sm",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),n.jsx("div",{ref:P})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 px-2 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-3 border-t border-gray-200 dark:border-gray-600",children:[n.jsx("div",{className:"mb-2 sm:mb-2.5 md:mb-3",children:n.jsx(nO,{role:"seller",onSelect:u,selectedTemplate:c,className:"w-full p-2 sm:p-2.5 md:p-3 pl-6 sm:pl-8 md:pl-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition text-xs sm:text-sm md:text-base"})}),h&&g&&n.jsx(Ze.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-2 sm:mb-2.5 md:mb-3 p-2 sm:p-2.5 md:p-3 bg-gray-100 dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-600",children:n.jsx("img",{src:g,alt:"preview",className:"max-w-[50px] sm:max-w-[60px] md:max-w-[80px] max-h-[50px] sm:max-h-[60px] md:max-h-[80px] rounded-md"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-2 sm:gap-3 bg-gray-100 dark:bg-gray-600 rounded-lg p-2 sm:p-2.5 md:p-3",children:[Eue(o)&&n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:I,type:"file",accept:"image/*",onChange:D,className:"hidden",id:"image-upload"}),n.jsx(Ze.label,{htmlFor:"image-upload",whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-gray-600 dark:text-gray-300 p-1 sm:p-1.5 md:p-2 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400",children:n.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.586-6.586M12 3v6m0 0v6m0-6h6m-6 0H6"})})})]}),c?n.jsxs(Ze.button,{onClick:L,disabled:y,whileHover:{scale:1.05},whileTap:{scale:.95},className:`ml-auto py-1 sm:py-1.5 md:py-2 px-2 sm:px-3 md:px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-1 sm:gap-2 transition text-xs sm:text-sm md:text-base ${y?"opacity-50 cursor-not-allowed":""}`,onMouseDown:z,children:[n.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send"]}):n.jsxs(Ze.button,{onClick:()=>e("/support"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"ml-auto py-1 sm:py-1.5 md:py-2 px-2 sm:px-3 md:px-4 bg-orange-500 text-white rounded-lg shadow-md hover:bg-orange-600 flex items-center justify-center gap-1 sm:gap-2 transition text-xs sm:text-sm md:text-base",children:[n.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636A9 9 0 1121 12h-3m-6 6v3m-6-3h-3m6-6H3m6-6V3"})}),"Support"]})]}),h&&g&&n.jsxs(Ze.button,{onClick:F,disabled:y,whileHover:{scale:1.05},whileTap:{scale:.95},className:`py-1 sm:py-1.5 md:py-2 px-2 sm:px-3 md:px-4 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 flex items-center justify-center gap-1 sm:gap-2 transition text-xs sm:text-sm md:text-base ${y?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send Image"]})]})]})]}):n.jsx(Ze.div,{className:"flex-1 flex items-center justify-center text-gray-600 dark:text-gray-400 text-xs sm:text-sm md:text-base",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:"Select a chat to view messages."})})]})]})})]})},Tue=({isOpen:r,onClose:e,onConfirm:t,password:s,setPassword:a,isDeleting:i})=>n.jsx(tn,{children:r&&n.jsx(Ze.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:n.jsxs(Ze.div,{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl border border-orange-200 dark:border-gray-700",initial:{scale:.8,y:50,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:50,opacity:0},transition:{duration:.3,ease:"easeOut"},children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsx(LN,{className:"w-12 h-12 text-red-500"})}),n.jsx("h2",{className:"text-xl font-bold text-orange-800 dark:text-orange-400 text-center mb-4",children:"Delete Your Account"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-4",children:"You are about to delete your account. This action cannot be undone."}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(X5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-400 w-5 h-5"}),n.jsx("input",{type:"password",placeholder:"Enter your password",value:s,onChange:o=>a(o.target.value),className:"w-full pl-10 pr-4 py-3 border rounded-xl text-gray-900 placeholder-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all border-gray-300",disabled:i})]})]}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:t,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-red-500 to-red-600 text-white font-bold text-base shadow-lg hover:from-red-600 hover:to-red-700 focus:ring-4 focus:ring-red-200 transition disabled:opacity-60 disabled:cursor-not-allowed",disabled:i||!s,children:i?"Deleting...":"Yes, Delete"}),n.jsx("button",{onClick:e,className:"px-6 py-3 rounded-xl bg-orange-100 text-orange-700 font-bold text-base shadow hover:bg-orange-200 transition border-2 border-orange-200",disabled:i,children:"No, Cancel"})]})]})})}),Pue=()=>{const[r,e]=E.useState(!1),[t,s,a]=E.useState(""),[i,o]=E.useState(!1),{alerts:l,addAlert:c,removeAlert:u}=Bl(),h=us(),f=ch(),g=async()=>{if(!f.currentUser){c("No user is logged in.","error");return}if(!t){c("Please enter your password to confirm deletion.","error");return}o(!0);try{const x=Gl.credential(f.currentUser.email,t);await S3(f.currentUser,x);const y=Ne(J,"users",f.currentUser.uid);await na(y).catch(b=>{throw console.error("Firestore deletion error:",b),new Error("Failed to delete user data.")}),await m7(f.currentUser).catch(b=>{throw console.error("Auth deletion error:",b),new Error("Failed to delete user account.")}),s(""),e(!1),c("Your account has been successfully deleted.","success"),h("/")}catch(x){console.error("Account deletion error:",x),x.code==="auth/wrong-password"?c("Incorrect password. Please try again.","error"):x.code==="auth/requires-recent-login"?(c("Please log in again to authenticate this action.","error"),h("/login")):c(`Failed to delete account: ${x.message}`,"error")}finally{o(!1)}};return n.jsxs("div",{className:"min-h-screen bg-background-light py-8",children:[n.jsx(Co,{alerts:l,removeAlert:u}),n.jsx(Tue,{isOpen:r,onClose:()=>{e(!1),s("")},onConfirm:g,password:t,setPassword:s,isDeleting:i}),n.jsxs("div",{className:"max-w-3xl mx-auto policy-card",children:[n.jsx("div",{className:"policy-header text-primary",children:"FOREMADE Marketplace & FOREMADEGo User Agreement"}),n.jsxs("div",{className:"policy-content",children:[n.jsxs("p",{className:"mb-2 text-secondary",children:[n.jsx("strong",{children:"Effective Date:"})," 30th July 2025"]}),n.jsxs("p",{className:"mb-2 text-secondary",children:[n.jsx("strong",{children:"Last Updated:"})," 30th July 2025"]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Scope of Agreement"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Buyers and sellers on the FOREMADE Marketplace;"}),n.jsx("li",{children:"Delivery partners and riders using FOREMADEGo;"}),n.jsx("li",{children:"Use of the FOREMADE Wallet for receiving, holding, and withdrawing funds;"}),n.jsx("li",{children:"Any use of linked external websites and services."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Eligibility"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Be at least 18 years of age;"}),n.jsx("li",{children:"Have the legal capacity to enter into contracts;"}),n.jsx("li",{children:"Provide accurate and complete registration details."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Account Registration and Security"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"You must create an account to access key services."}),n.jsx("li",{children:"You are responsible for safeguarding your account credentials and all activity under your account."}),n.jsx("li",{children:"FOREMADE reserves the right to suspend or terminate accounts due to fraud, abuse, or policy violations."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Marketplace Use (Buying & Selling)"}),n.jsx("strong",{className:"block mb-2 text-secondary",children:"Buyers agree to:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Review product listings thoroughly before purchase;"}),n.jsx("li",{children:"Use authorized payment methods only;"}),n.jsx("li",{children:"Raise complaints or disputes through the Platform."})]}),n.jsx("strong",{className:"block mb-2 text-secondary",children:"Sellers agree to:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Provide accurate and honest product listings;"}),n.jsx("li",{children:"Fulfill orders within the promised timeframe;"}),n.jsx("li",{children:"Comply with all relevant product, tax, and business obligations;"}),n.jsx("li",{children:"Accept returns and issue refunds in accordance with FOREMADE guidelines."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"FOREMADEGo (Delivery Network)"}),n.jsx("p",{className:"mb-2 text-secondary",children:"FOREMADEGo is our parcel delivery network connecting senders with approved delivery riders."}),n.jsx("strong",{className:"block mb-2 text-secondary",children:"Riders agree to:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsxs("li",{children:["Register via ",n.jsx("a",{href:"https://foremadego.com/rider/register.php",className:"policy-link",target:"_blank",rel:"noopener noreferrer",children:"Rider Registration"}),";"]}),n.jsx("li",{children:"Accept delivery jobs through the dashboard;"}),n.jsx("li",{children:"Handle deliveries professionally and on time;"}),n.jsx("li",{children:"Confirm delivery with required proof, including photos where applicable;"}),n.jsx("li",{children:"Follow all safety and service standards."})]}),n.jsx("strong",{className:"block mb-2 text-secondary",children:"Senders and recipients agree to:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Provide accurate delivery information;"}),n.jsx("li",{children:"Avoid sending prohibited, restricted, or illegal items;"}),n.jsx("li",{children:"Cooperate with delivery personnel during handoffs."})]}),n.jsx("p",{className:"mb-4 text-secondary",children:"FOREMADE reserves the right to remove any rider or user for misconduct, policy violations, or misuse of the platform."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"FOREMADE Wallet – Fair Use and Security"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Automated System: Powered by integrated financial technology partners to ensure fast and secure processing."}),n.jsx("li",{children:"Regulatory Compliance: Operates in connection with financial regulations applicable in your local jurisdiction."}),n.jsx("li",{children:"Real-Time Tracking: Users can view their wallet balances and transaction history at any time."}),n.jsx("li",{children:"Instant Withdrawals: Earnings can be withdrawn at any time to a verified bank account. Processing times may vary based on the financial institution."}),n.jsxs("li",{children:["Fair Use Policy:",n.jsxs("ul",{className:"list-disc ml-6 mb-2",children:[n.jsx("li",{children:"The Wallet is strictly for funds earned through transactions on FOREMADE or FOREMADEGo."}),n.jsx("li",{children:"Fraudulent activity or system manipulation may result in a freeze or closure of the account."}),n.jsx("li",{children:"FOREMADE may temporarily restrict wallet use during investigations or dispute resolution."})]})]})]}),n.jsx("p",{className:"mb-4 text-secondary",children:"All wallet data is protected using secure encryption and authentication protocols."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Fees and Payments"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"FOREMADE may charge transaction, listing, or service fees as applicable."}),n.jsx("li",{children:"All fees will be clearly displayed during your transaction or use of a service."}),n.jsx("li",{children:"FOREMADE reserves the right to update its fee structure, with notice posted on the Platform."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Returns, Refunds, and Disputes"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Buyers may request returns or refunds in accordance with seller policies and FOREMADE standards."}),n.jsx("li",{children:"Disputes can be raised through the platform for moderation."}),n.jsx("li",{children:"FOREMADE acts as a neutral facilitator and may take appropriate action based on the evidence provided."}),n.jsx("li",{children:"Misuse of the dispute system may result in account restrictions."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"External Links and Third-Party Websites"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"FOREMADE and FOREMADEGo may include links to third-party services such as payment gateways or logistics tools."}),n.jsx("li",{children:"These links are provided for user convenience only."}),n.jsx("li",{children:"FOREMADE is not responsible for the content, policies, or services of any third-party website."}),n.jsx("li",{children:"Users should review third-party terms before engaging with those services."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Intellectual Property"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"All content, branding, and features on FOREMADE and FOREMADEGo are owned by or licensed to FOREMADE Ltd."}),n.jsx("li",{children:"Sellers retain ownership of their content but grant FOREMADE a non-exclusive, royalty-free license to use it for promotion and platform functionality."}),n.jsx("li",{children:"You may not copy, distribute, or reproduce platform content without prior written consent."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Termination and Suspension"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Violating this Agreement;"}),n.jsx("li",{children:"Engaging in fraudulent, harmful, or illegal conduct;"}),n.jsx("li",{children:"Abusing platform systems, wallets, or other users."})]}),n.jsx("p",{className:"mb-4 text-secondary",children:"You may close your account at any time. If eligible, your remaining wallet balance will be made available for withdrawal, subject to any pending investigations or disputes."}),n.jsx("div",{className:"mt-6 flex",children:n.jsx("button",{onClick:()=>e(!0),className:"px-6 py-3 rounded-xl bg-gradient-to-r from-red-500 to-red-600 text-white font-bold text-base shadow-lg hover:from-red-600 hover:to-red-700 focus:ring-4 focus:ring-red-200 transition",children:"Opt Out"})}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Limitation of Liability"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"FOREMADE is not liable for indirect, incidental, or consequential damages;"}),n.jsx("li",{children:"We are not responsible for the actions or failures of buyers, sellers, riders, or third parties;"}),n.jsx("li",{children:"Platform services are provided “as is” without warranties of any kind."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Indemnity"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsx("li",{children:"Your breach of this Agreement;"}),n.jsx("li",{children:"Your use or misuse of the Platform;"}),n.jsx("li",{children:"Any product or service you list, purchase, or deliver via FOREMADE or FOREMADEGo."})]}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Governing Law"}),n.jsx("p",{className:"mb-4 text-secondary",children:"This Agreement shall be interpreted and enforced in accordance with applicable local laws, without reference to specific jurisdictions. Users are responsible for complying with laws in their region while using the platform."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Amendments"}),n.jsx("p",{className:"mb-4 text-secondary",children:"We may update or revise this Agreement from time to time. The latest version will be posted on the Platform, and continued use constitutes your acceptance of the updated terms."}),n.jsx("h2",{className:"text-xl font-bold text-primary mb-3 mt-8",children:"Contact Information"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-secondary",children:[n.jsxs("li",{children:["General Support: ",n.jsx("a",{href:"mailto:support@foremade.com",className:"policy-link",children:"support@foremade.com"})]}),n.jsxs("li",{children:["Privacy Questions: ",n.jsx("a",{href:"mailto:privacy@foremadego.com",className:"policy-link",children:"privacy@foremadego.com"})]}),n.jsxs("li",{children:["Marketplace: ",n.jsx("a",{href:"https://foremade.com",className:"policy-link",target:"_blank",rel:"noopener noreferrer",children:"foremade.com"})]}),n.jsxs("li",{children:["Delivery Platform (FOREMADEGo): ",n.jsx("a",{href:"https://foremadego.com",className:"policy-link",target:"_blank",rel:"noopener noreferrer",children:"foremadego.com"})]}),n.jsxs("li",{children:["Rider Registration: ",n.jsx("a",{href:"https://foremadego.com/rider/register.php",className:"policy-link",target:"_blank",rel:"noopener noreferrer",children:"foremadego.com/rider/register.php"})]})]}),n.jsx("p",{className:"mb-4 text-secondary font-semibold",children:"By using FOREMADE and/or FOREMADEGo, you confirm that you have read, understood, and agreed to this User Agreement."})]}),n.jsxs("footer",{className:"policy-footer",children:["© ",new Date().getFullYear()," Foremade. All rights reserved."]})]})]})},fF="/assets/undraw_my-files_1xwx-DOxcO3os.svg",Rue=()=>n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("img",{src:fF,alt:"Buyer Protection",className:"w-40 h-40 mb-4"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"Buyer Protection Policy"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"Your peace of mind is our priority. Learn how Foremade protects your purchases and ensures a safe shopping experience."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3",children:"Important"}),n.jsxs("p",{className:"mb-4",children:["If your purchase was made through a Foremade Pro Seller, please refer to our ",n.jsx("strong",{children:"Pro Refund Policy"})," instead.",n.jsx("br",{}),"Every order placed using the Buy Now button includes our Buyer Protection (added as a fee at checkout), which activates the Foremade Refund Policy. This protection ensures you're eligible for a refund if:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[n.jsx("li",{children:"Your parcel never arrives"}),n.jsx("li",{children:"Your parcel arrives damaged"}),n.jsx("li",{children:"The item you receive is significantly not as described (SNAD)"})]}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 mb-4 rounded",children:[n.jsx("strong",{className:"text-blue-700",children:"Please note:"})," Refunds are not guaranteed for items that don't fit or aren't your style. You may still contact the seller to request a return, but approval is at their discretion."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Refunds for Returns"}),n.jsx("p",{className:"mb-2",children:"A full return refund may include:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"The price of returned items"}),n.jsx("li",{children:"The Buyer Protection fee linked to returned items"}),n.jsx("li",{children:"Your original shipping fee"}),n.jsx("li",{children:"Optional services (e.g., Item or Electronics Verification)"})]}),n.jsx("p",{className:"mb-4",children:"We'll calculate the protection refund based on the items kept and refund the remaining portion. Discounts or voucher values used during purchase will be deducted proportionally from your refund."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Partial Refunds"}),n.jsxs("p",{className:"mb-2",children:["If your item is SNAD, the seller may offer a partial refund, allowing you to keep the item while receiving part of the cost back. You'll see the offer in your chat with the seller, where you can ",n.jsx("em",{children:"accept or decline"}),". Accepted partial refunds include:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"A partial item price refund"}),n.jsx("li",{children:"A proportional refund of the Buyer Protection fee"})]}),n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4 rounded",children:"Shipping fees and optional service charges are not refunded in partial cases. Bundled purchases don't qualify for partial refunds—only full or item-specific returns."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"How to Request a Refund"}),n.jsx("p",{className:"mb-2",children:"You must act within 2 days of being notified that your order was delivered or marked as lost:"}),n.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[n.jsxs("li",{children:["Go to your ",n.jsx("em",{children:"chat with the seller"})]}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"I have an issue"})]}),n.jsx("li",{children:"Follow the prompts to submit your refund request"})]}),n.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 mb-4 rounded",children:"This action temporarily freezes the order while we help resolve the situation. If you do nothing within the 2-day window, payment will be released to the seller."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"What Happens Next?"}),n.jsx("p",{className:"mb-2",children:"Depending on the issue, here's how we handle it:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Order is paused"}),n.jsx("li",{children:"Payment is held securely"}),n.jsx("li",{children:"You and the seller can work toward a solution"})]}),n.jsxs("p",{className:"mb-4",children:["You can track the status directly in the ",n.jsx("em",{children:"conversation screen"}),". If you both resolve the issue yourselves, simply press:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:[n.jsx("em",{children:"Resolve this issue"})," for missing/damaged parcels"]}),n.jsxs("li",{children:[n.jsx("em",{children:"Cancel & keep order"})," for agreed resolutions"]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You're the Seller"}),n.jsx("p",{className:"mb-2",children:"If a buyer raises an SNAD claim:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:["Ask them to suspend the order by clicking ",n.jsx("em",{children:"I have an issue"})]}),n.jsx("li",{children:"You'll have 14 days to resolve the issue"}),n.jsxs("li",{children:["Review buyer's evidence and choose one option:",n.jsxs("ul",{className:"list-disc ml-6",children:[n.jsxs("li",{children:[n.jsx("em",{children:"Partial refund"})," (buyer keeps item)"]}),n.jsxs("li",{children:[n.jsx("em",{children:"Full refund"})," (buyer keeps item)"]}),n.jsx("li",{children:n.jsx("em",{children:"Request a return"})})]})]})]}),n.jsx("p",{className:"mb-2",children:"If a return is requested:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Buyer ships the item within 5 business days"}),n.jsxs("li",{children:["Share your ",n.jsx("em",{children:"contact info"})," if required"]}),n.jsx("li",{children:"After receiving the item, confirm its condition within 2 days"}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"Everything is OK"})," to complete the return"]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You Disagree with a Claim"}),n.jsx("p",{className:"mb-2",children:"You may dispute the refund request:"}),n.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[n.jsxs("li",{children:["Press ",n.jsx("em",{children:"View issue details"})]}),n.jsxs("li",{children:["Click ",n.jsx("em",{children:"Contact Us"})]}),n.jsxs("li",{children:["Review the terms and press ",n.jsx("em",{children:"Agree"})]}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"Submit"})," to escalate to our support team"]})]}),n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 mb-4 rounded",children:[n.jsx("strong",{children:"Note:"})," You can only dispute if you haven't already accepted a refund option."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If No Agreement is Reached"}),n.jsx("p",{className:"mb-4",children:"If both sides can't find a solution within 14 days, and no one reaches out for support, Foremade will step in to review the case and issue a final decision."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Special Cases"}),n.jsxs("p",{className:"mb-2",children:[n.jsx("strong",{children:"Item Verified but Still SNAD"}),n.jsx("br",{}),"Follow the steps under ",n.jsx("em",{children:"I've received a SNAD item"})," to request a refund."]}),n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Device Linked to Seller's Account"})}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Notify the seller"}),n.jsx("li",{children:"If unlinking fails, discuss a return or refund"}),n.jsxs("li",{children:["If a return is required, use the ",n.jsx("em",{children:"Return the order"})," button"]})]}),n.jsx("p",{className:"mb-4",children:"Shipping details must be accurate. If not provided, Foremade may issue a refund even without a return."})]})]})}),Iue=()=>n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-10",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsx("img",{src:fF,alt:"Refund Policy",className:"w-40 h-40 mb-4"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-blue-700 mb-2",children:"Refund Policy"}),n.jsx("p",{className:"text-gray-600 max-w-xl",children:"Understand how Foremade handles refunds and protects your purchases."})]}),n.jsxs("div",{className:"bg-white/90 rounded-xl shadow-lg p-6 md:p-10 border border-blue-100",children:[n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3",children:"Important"}),n.jsxs("p",{className:"mb-4",children:["If your purchase was made through a Foremade ",n.jsx(he,{to:"/pro-seller-guide",className:"text-blue-600 underline font-semibold",children:"Pro Seller"}),", please refer to our ",n.jsx(he,{to:"/pro-refund-policy",className:"text-blue-600 underline font-semibold",children:"Pro Refund Policy"})," instead.",n.jsx("br",{}),"Every order placed using the Buy Now button includes our Buyer Protection (added as a fee at checkout), which activates the Foremade Refund Policy. This protection ensures you're eligible for a refund if:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4 text-blue-900",children:[n.jsx("li",{children:"Your parcel never arrives"}),n.jsx("li",{children:"Your parcel arrives damaged"}),n.jsx("li",{children:"The item you receive is significantly not as described (SNAD)"})]}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 mb-4 rounded",children:[n.jsx("strong",{className:"text-blue-700",children:"Please note:"})," Refunds are not guaranteed for items that don't fit or aren't your style. You may still contact the seller to request a return, but approval is at their discretion."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Refunds for Returns"}),n.jsx("p",{className:"mb-2",children:"A full return refund may include:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"The price of returned items"}),n.jsx("li",{children:"The Buyer Protection fee linked to returned items"}),n.jsx("li",{children:"Your original shipping fee"}),n.jsx("li",{children:"Optional services (e.g., Item or Electronics Verification)"})]}),n.jsx("p",{className:"mb-4",children:"We'll calculate the protection refund based on the items kept and refund the remaining portion. Discounts or voucher values used during purchase will be deducted proportionally from your refund."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Partial Refunds"}),n.jsxs("p",{className:"mb-2",children:["If your item is SNAD, the seller may offer a partial refund, allowing you to keep the item while receiving part of the cost back. You'll see the offer in your chat with the seller, where you can ",n.jsx("em",{children:"accept or decline"}),". Accepted partial refunds include:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"A partial item price refund"}),n.jsx("li",{children:"A proportional refund of the Buyer Protection fee"})]}),n.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4 rounded",children:"Shipping fees and optional service charges are not refunded in partial cases. Bundled purchases don't qualify for partial refunds—only full or item-specific returns."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"How to Request a Refund"}),n.jsx("p",{className:"mb-2",children:"You must act within 2 days of being notified that your order was delivered or marked as lost:"}),n.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[n.jsxs("li",{children:["Go to your ",n.jsx(he,{to:"/orders",className:"text-blue-600 underline font-semibold",children:"chat with the seller"})]}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"I have an issue"})]}),n.jsx("li",{children:"Follow the prompts to submit your refund request"})]}),n.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-3 mb-4 rounded",children:"This action temporarily freezes the order while we help resolve the situation. If you do nothing within the 2-day window, payment will be released to the seller."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"What Happens Next?"}),n.jsx("p",{className:"mb-2",children:"Depending on the issue, here's how we handle it:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Order is paused"}),n.jsx("li",{children:"Payment is held securely"}),n.jsx("li",{children:"You and the seller can work toward a solution"})]}),n.jsxs("p",{className:"mb-4",children:["You can track the status directly in the ",n.jsx(he,{to:"/orders",className:"text-blue-600 underline font-semibold",children:"conversation screen"}),". If you both resolve the issue yourselves, simply press:"]}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:[n.jsx("em",{children:"Resolve this issue"})," for missing/damaged parcels"]}),n.jsxs("li",{children:[n.jsx("em",{children:"Cancel & keep order"})," for agreed resolutions"]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You're the Seller"}),n.jsx("p",{className:"mb-2",children:"If a buyer raises an SNAD claim:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsxs("li",{children:["Ask them to suspend the order by clicking ",n.jsx("em",{children:"I have an issue"})]}),n.jsx("li",{children:"You'll have 14 days to resolve the issue"}),n.jsxs("li",{children:["Review buyer's evidence and choose one option:",n.jsxs("ul",{className:"list-disc ml-6",children:[n.jsxs("li",{children:[n.jsx("em",{children:"Partial refund"})," (buyer keeps item)"]}),n.jsxs("li",{children:[n.jsx("em",{children:"Full refund"})," (buyer keeps item)"]}),n.jsx("li",{children:n.jsx("em",{children:"Request a return"})})]})]})]}),n.jsx("p",{className:"mb-2",children:"If a return is requested:"}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Buyer ships the item within 5 business days"}),n.jsxs("li",{children:["Share your ",n.jsx("em",{children:"contact info"})," if required (",n.jsx(he,{to:"/support",className:"text-blue-600 underline font-semibold",children:"Contact Us"}),")"]}),n.jsx("li",{children:"After receiving the item, confirm its condition within 2 days"}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"Everything is OK"})," to complete the return"]})]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If You Disagree with a Claim"}),n.jsx("p",{className:"mb-2",children:"You may dispute the refund request:"}),n.jsxs("ol",{className:"list-decimal ml-6 mb-4",children:[n.jsxs("li",{children:["Press ",n.jsx("em",{children:"View issue details"})]}),n.jsxs("li",{children:["Click ",n.jsx(he,{to:"/support",className:"text-blue-600 underline font-semibold",children:"Contact Us"})]}),n.jsxs("li",{children:["Review the terms and press ",n.jsx("em",{children:"Agree"})]}),n.jsxs("li",{children:["Press ",n.jsx("em",{children:"Submit"})," to escalate to our support team"]})]}),n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 mb-4 rounded",children:[n.jsx("strong",{children:"Note:"})," You can only dispute if you haven't already accepted a refund option."]}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"If No Agreement is Reached"}),n.jsx("p",{className:"mb-4",children:"If both sides can't find a solution within 14 days, and no one reaches out for support, Foremade will step in to review the case and issue a final decision."}),n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-3 mt-8",children:"Special Cases"}),n.jsxs("p",{className:"mb-2",children:[n.jsx("strong",{children:"Item Verified but Still SNAD"}),n.jsx("br",{}),"Follow the steps under ",n.jsx("em",{children:"I've received a SNAD item"})," to request a refund."]}),n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Device Linked to Seller's Account"})}),n.jsxs("ul",{className:"list-disc ml-6 mb-4",children:[n.jsx("li",{children:"Notify the seller"}),n.jsx("li",{children:"If unlinking fails, discuss a return or refund"}),n.jsxs("li",{children:["If a return is required, use the ",n.jsx(he,{to:"/orders",className:"text-blue-600 underline font-semibold",children:"Return the order"})," button"]})]}),n.jsx("p",{className:"mb-4",children:"Shipping details must be accurate. If not provided, Foremade may issue a refund even without a return."})]})]})}),Due={background:"#fff",borderRadius:16,boxShadow:"0 2px 16px rgba(0,0,0,0.06)",maxWidth:600,width:"100%",padding:32,margin:"0 16px"},vu={marginBottom:32,borderBottom:"1px solid #f0f0f0",paddingBottom:24},Mue={marginBottom:0,borderBottom:"none",paddingBottom:0},Oue={color:"#003366",fontSize:32,fontWeight:800,marginBottom:8,letterSpacing:"-1px"},Pc={color:"#003366",fontSize:22,fontWeight:700,margin:"0 0 12px 0",display:"flex",alignItems:"center",gap:10},Rc={color:"#003366",marginRight:8,verticalAlign:"middle"},Lue={color:"#181818",fontWeight:"bold"},Fue={backgroundColor:"#f9f9f9",padding:15,borderLeft:"4px solid #ffcc00",marginTop:15,color:"#181818",borderRadius:6,fontSize:15},wu={color:"#003366",textDecoration:"none",fontWeight:"bold",borderBottom:"1px solid #003366",transition:"background 0.2s, color 0.2s",padding:"1px 2px",borderRadius:2},I1={textDecoration:"underline",background:"#f0f6fa"},Hx={background:"#003366",color:"#fff",border:"none",borderRadius:6,padding:"10px 22px",fontWeight:600,fontSize:16,cursor:"pointer",marginTop:18,marginBottom:0,transition:"background 0.2s",textDecoration:"none",display:"inline-block"};function Uue(){const[r,e]=cs.useState(""),[t,s]=cs.useState(!1),a=o=>e(o),i=()=>e("");return n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsxs("div",{className:"relative",children:[n.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-[#112d4e] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300",onClick:()=>s(!t),"aria-label":t?"Close menu":"Open menu",children:t?n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),t&&n.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>s(!1)}),n.jsx("div",{className:`${t?"translate-x-0":"-translate-x-full"} md:translate-x-0 fixed md:static top-0 left-0 h-full z-40 md:z-0 w-64 bg-[#112d4e] shadow-lg md:shadow-none transition-transform duration-300 ease-in-out`,children:n.jsx(Es,{})})]}),n.jsx("div",{className:"flex-1 ml-0 md:ml-64 flex justify-center items-start py-10 bg-gray-50",children:n.jsxs("div",{style:Due,children:[n.jsxs("h1",{style:Oue,children:[n.jsx(Xf,{size:32,style:{display:"inline",marginRight:12,verticalAlign:"middle"}})," Product Bumps"]}),n.jsx("p",{style:{marginBottom:24,fontSize:18,color:"#181818"},children:"Get more eyes on your listings. Sell faster."}),n.jsxs("div",{style:vu,children:[n.jsxs("h2",{style:Pc,children:[n.jsx(Xf,{style:Rc,size:22}),"What is a Product Bump?"]}),n.jsxs("p",{style:{fontSize:16},children:["A ",n.jsx("strong",{children:"Product Bump"})," is a paid tool that promotes your listing on FOREMADE. It increases visibility by pushing your item higher in search results and buyer feeds for ",n.jsx("strong",{children:"3 or 7 days"}),"—or until it sells."]}),n.jsxs("p",{style:{fontSize:16},children:["You can choose to bump your listing ",n.jsx("strong",{children:"locally"})," or make it visible to ",n.jsx("strong",{children:"international buyers"})," across all active FOREMADE regions."]})]}),n.jsxs("div",{style:vu,children:[n.jsxs("h2",{style:Pc,children:[n.jsx(K5,{style:Rc,size:22}),"Why Use a Product Bump?"]}),n.jsxs("ul",{style:{paddingLeft:20,fontSize:16,margin:0},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"More Visibility:"})," Appear higher in search results and feeds."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Targeted Reach:"})," Get shown to the right buyers based on browsing history."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Performance Tracking:"})," Monitor views and interactions via your dashboard."]})]})]}),n.jsxs("div",{style:vu,children:[n.jsxs("h2",{style:Pc,children:[n.jsx(LN,{style:Rc,size:22}),"Before You Bump"]}),n.jsxs("ul",{style:{paddingLeft:20,fontSize:16,margin:0},children:[n.jsxs("li",{children:["Ensure your listing meets our "," ",n.jsx("a",{href:"/help/listing-guidelines",style:r==="guidelines"?{...wu,...I1}:wu,onMouseEnter:()=>a("guidelines"),onMouseLeave:i,children:"Listing Guidelines"}),"."]}),n.jsx("li",{children:"Update your images, title, price, and description before activating a bump."}),n.jsxs("li",{children:["You can ",n.jsx("span",{style:Lue,children:"lower"})," the price while a bump is active—but you can't raise it until the bump ends."]})]}),n.jsxs("div",{style:Fue,children:[n.jsx(LN,{size:16,style:{display:"inline",marginRight:6,verticalAlign:"middle"}})," Lowering the price doesn't reduce the cost of the bump. No refunds are given for price changes after activation."]})]}),n.jsxs("div",{style:vu,children:[n.jsxs("h2",{style:Pc,children:[n.jsx(Y5,{style:Rc,size:22}),"How to Apply a Bump"]}),n.jsxs("ol",{style:{paddingLeft:20,fontSize:16,margin:0},children:[n.jsxs("li",{children:["Log in to your "," ",n.jsx("a",{href:"/dashboard",style:r==="dashboard1"?{...wu,...I1}:wu,onMouseEnter:()=>a("dashboard1"),onMouseLeave:i,children:"Seller Dashboard"}),"."]}),n.jsx("li",{children:"Select the item you want to promote."}),n.jsxs("li",{children:["Choose ",n.jsx("strong",{children:"3 or 7-day duration"}),"."]}),n.jsxs("li",{children:["Choose ",n.jsx("strong",{children:"Local"})," or ",n.jsx("strong",{children:"International"})," visibility."]}),n.jsx("li",{children:"Pay and activate!"})]})]}),n.jsxs("div",{style:vu,children:[n.jsxs("h2",{style:Pc,children:[n.jsx(TJ,{style:Rc,size:22}),"Bump Pricing"]}),n.jsx("p",{style:{fontSize:16},children:"Pricing depends on:"}),n.jsxs("ul",{style:{paddingLeft:20,fontSize:16,margin:0},children:[n.jsx("li",{children:"Item price"}),n.jsx("li",{children:"Bump duration (3 or 7 days)"}),n.jsx("li",{children:"Target location: Local or International"})]}),n.jsx("p",{style:{marginTop:12},children:n.jsx("a",{href:"/pricing",style:r==="pricing"?{...Hx,background:"#002244",color:"#fff"}:Hx,onMouseEnter:()=>a("pricing"),onMouseLeave:i,children:"View Bump Pricing"})})]}),n.jsxs("div",{style:vu,children:[n.jsxs("h2",{style:Pc,children:[n.jsx(aee,{style:Rc,size:22}),"Frequently Asked Questions"]}),n.jsxs("div",{style:{fontSize:16},children:[n.jsxs("p",{style:{marginBottom:10},children:[n.jsx("strong",{children:"What if I cancel the sale?"}),n.jsx("br",{}),"- If you cancel it, the bump ends and is not refunded. You'll need to buy a new bump.",n.jsx("br",{}),"- If the buyer cancels, contact "," ",n.jsx("a",{href:"/contact",style:r==="contact"?{...wu,...I1}:wu,onMouseEnter:()=>a("contact"),onMouseLeave:i,children:"FOREMADE Support"})," for help."]}),n.jsxs("p",{style:{marginBottom:10},children:[n.jsx("strong",{children:"Can I bump any item?"}),n.jsx("br",{}),"Yes! Even items under verification can be bumped."]}),n.jsxs("p",{style:{marginBottom:10},children:[n.jsx("strong",{children:"Can I bump multiple listings?"}),n.jsx("br",{}),"Yes, as many as you want—but only one bump per item at a time."]}),n.jsxs("p",{style:{marginBottom:0},children:[n.jsx("strong",{children:"Can bumps be transferred?"}),n.jsx("br",{}),"No. Bumps are tied to specific listings."]})]})]}),n.jsxs("div",{style:Mue,children:[n.jsxs("h2",{style:Pc,children:[n.jsx(Mg,{style:Rc,size:22}),"Start Selling Smarter"]}),n.jsxs("p",{style:{fontSize:16},children:[n.jsx("a",{href:"/dashboard",style:r==="dashboard2"?{...Hx,background:"#002244",color:"#fff"}:Hx,onMouseEnter:()=>a("dashboard2"),onMouseLeave:i,children:"Go to your dashboard"})," ","to bump a product and increase your sales today!"]})]})]})})]})}function zue(){us();const[r,e]=E.useState(""),[t,s]=E.useState(null),[a,i]=E.useState(!1),[o,l]=E.useState(0),[c,u]=E.useState(!1),[h,f]=E.useState(null);E.useEffect(()=>{if(h&&(h(),f(null)),!r||!ve.currentUser){s(null),l(0),u(!1);return}i(!0);const N=Ne(J,"orders",r),k=os(N,A=>{if(A.exists()){const R=A.data();s({status:R.status||"Order Placed",updatedAt:R.updatedAt?.toDate()||new Date,trackingDetails:R.trackingDetails||[]}),l(0),u(!1)}else(async()=>{const _=ft(_e(J,"orders"),rt("userId","==",ve.currentUser.uid)),P=(await Ke(_)).docs.find(T=>T.data().paymentId===r||`TRK-${T.id.slice(0,8)}`===r);if(P){const T=P.data();s({status:T.status||"Order Placed",updatedAt:T.updatedAt?.toDate()||new Date,trackingDetails:T.trackingDetails||[]}),l(0),u(!1)}else s({status:"Not Found",updatedAt:new Date,trackingDetails:[]}),l(T=>T+1);i(!1)})()},A=>{console.error("Error fetching order:",A),s({status:"Error",updatedAt:new Date,trackingDetails:[]}),l(R=>R+1),i(!1)});return f(()=>k),()=>{h&&h()}},[r,ve.currentUser]),E.useEffect(()=>{o>=2&&u(!0)},[o]);const g=N=>{N.preventDefault(),r&&ve.currentUser&&s(null)},x=["Order Placed","Packed","Shipped","Delivered"],b=t?((N,k)=>{if(!N||N==="Not Found"||N==="Error")return 0;if(k.length>0){const A=k[k.length-1].status;return x.indexOf(A)+1||1}return x.indexOf(N)+1||1})(t.status,t.trackingDetails):0,v=b/x.length*100;return n.jsx("div",{className:"container mx-auto px-4 py-8 text-gray-800 dark:text-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx(_d,{}),n.jsx(Ze.div,{className:"md:w-3/4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-black dark:text-white mb-4",children:"Track Your Order"}),n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsx("input",{type:"text",value:r,onChange:N=>e(N.target.value),placeholder:"Track your orders (e.g., order ID or TRK-...)",className:"w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"}),n.jsx("button",{type:"submit",disabled:a||!r||!ve.currentUser,className:`w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition ${a||!r||!ve.currentUser?"opacity-50 cursor-not-allowed":""}`,children:a?"Tracking...":"Track Order"})]}),c&&n.jsxs(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mt-6 p-4 bg-yellow-100 dark:bg-yellow-800 rounded-lg text-gray-800 dark:text-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Need Help Tracking Your Order?"}),n.jsx("p",{className:"text-sm mt-2",children:'Enter your full order ID (e.g., "order-12368738293") or tracking ID (e.g., "TRK-order12") from your order history or confirmation email. If you don’t know your ID, check your "Orders" page or contact support.'}),n.jsx("button",{onClick:()=>u(!1),className:"mt-2 text-blue-600 dark:text-blue-400 hover:underline",children:"Close Guide"})]}),t&&n.jsxs(Ze.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"mt-6 space-y-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"Order Status"}),n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"flex justify-between items-center mb-2",children:x.map((N,k)=>n.jsxs("div",{className:"flex flex-col items-center relative",children:[n.jsx(Ze.div,{className:`w-8 h-8 rounded-full flex items-center justify-center z-10 ${k<b?"bg-blue-600 text-white":k===b?"bg-blue-200 text-blue-800":"bg-gray-200 text-gray-500"}`,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,delay:k*.1},children:k+1}),n.jsx("span",{className:"text-xs mt-1 text-gray-600 dark:text-gray-400",children:N})]},k))}),n.jsx(Ze.div,{className:"absolute top-4 left-0 h-1 bg-gray-300",style:{width:"100%"},initial:{width:0},animate:{width:"100%"},transition:{duration:1,ease:"easeInOut"}}),n.jsx(Ze.div,{className:"absolute top-4 left-0 h-1 bg-blue-500",style:{width:`${v}%`},initial:{width:0},animate:{width:`${v}%`},transition:{duration:.8,ease:"easeOut"}})]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:["Current Step: ",b>0?x[b-1]:"Not Found"]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Last Updated: ",t.updatedAt.toLocaleString()]}),t.trackingDetails.length>0&&n.jsxs("div",{className:"space-y-2 mt-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:"Tracking Timeline"}),n.jsx("ul",{className:"list-disc pl-5",children:t.trackingDetails.map((N,k)=>n.jsxs(Ze.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:k*.1},className:"text-gray-600 dark:text-gray-400",children:[N.status," - ",new Date(N.timestamp).toLocaleString()]},k))})]})]})]})]})})]})})}function Vue(){const r=[{image:"https://res.cloudinary.com/dbczfoqnc/image/upload/v1751541163/products/kdcrrjozm0dq2r8a74zk.jpg",text:"Daily Deals Await!",tagline:"Limited Time Offers",description:"Grab exclusive discounts on top products before they’re gone.",link:"/daily-deals"},{image:"https://res.cloudinary.com/dbczfoqnc/image/upload/v1748369792/products/d3mt7oyewtwsswr9b9li.jpg",text:"Hot Deals Today",tagline:"Save Big Today",description:"Explore the best deals available only for a short time.",link:"/daily-deals"}],[e,t]=E.useState(0),[s,a]=E.useState(!0),[i,o]=E.useState({hours:0,minutes:0,seconds:0});E.useEffect(()=>{if(!s)return;const c=setInterval(()=>{t(u=>(u+1)%r.length)},6e3);return()=>clearInterval(c)},[e,r.length,s]),E.useEffect(()=>{const c=()=>{const h=new Date,f=new Date(h);f.setHours(23,59,59,999);const g=f-h,x=Math.floor(g/(1e3*60*60)),y=Math.floor(g%(1e3*60*60)/(1e3*60)),b=Math.floor(g%(1e3*60)/1e3);o({hours:x,minutes:y,seconds:b})};c();const u=setInterval(c,1e3);return()=>clearInterval(u)},[]);const l=c=>{t(c),a(!1),setTimeout(()=>a(!0),1e4)};return n.jsxs("div",{className:"relative overflow-hidden my-4 mx-2 sm:mx-4 lg:mx-6 rounded-2xl border border-neutral-800/30 h-[200px] xs:h-[220px] sm:h-[260px] lg:h-[300px]",children:[n.jsxs("div",{className:"absolute inset-0 z-0",children:[n.jsx(Ze.div,{className:"absolute inset-0 bg-gradient-to-br from-amber-600 via-orange-400/60 to-blue-900 animate-gradient-x",initial:{opacity:0},animate:{opacity:.7},transition:{duration:1}}),n.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 sm:opacity-30 transition-all duration-700 scale-110",style:{backgroundImage:`url(${r[e].image})`}}),n.jsx("div",{className:"absolute inset-0 backdrop-blur-md"})]}),n.jsx(Ze.div,{className:"relative z-10 h-full flex items-center w-full",children:n.jsx("div",{className:"w-full mx-auto px-3 xs:px-4 sm:px-8 lg:px-16 flex flex-col items-center justify-center gap-4 sm:gap-6 py-4 sm:py-6 flex-wrap",children:n.jsxs("div",{className:"text-center space-y-3 sm:space-y-4",children:[n.jsx(Ze.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"inline-flex items-center h-6 px-3 rounded-full bg-gradient-to-r from-amber-600/30 to-orange-400/20 border border-amber-500/30",children:n.jsx("span",{className:"text-xs font-medium text-amber-100 tracking-wide",children:r[e].tagline})}),n.jsx(Ze.h2,{className:"text-xl sm:text-2xl lg:text-3xl font-extrabold leading-tight text-white drop-shadow-lg",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:r[e].text}),n.jsx(Ze.p,{className:"hidden sm:block text-sm sm:text-base text-white/90 max-w-md",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:r[e].description}),n.jsxs(Ze.div,{className:"flex items-center justify-center space-x-2 sm:space-x-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[n.jsxs("div",{className:"bg-white/30 backdrop-blur-lg rounded-lg p-2 sm:p-3 border border-amber-100/30",children:[n.jsx("span",{className:"text-lg sm:text-xl font-bold text-amber-600",children:String(i.hours).padStart(2,"0")}),n.jsx("span",{className:"text-xs sm:text-sm text-white/80 ml-1",children:"Hours"})]}),n.jsx("span",{className:"text-lg sm:text-xl text-white/80 font-bold",children:":"}),n.jsxs("div",{className:"bg-white/30 backdrop-blur-lg rounded-lg p-2 sm:p-3 border border-amber-100/30",children:[n.jsx("span",{className:"text-lg sm:text-xl font-bold text-amber-600",children:String(i.minutes).padStart(2,"0")}),n.jsx("span",{className:"text-xs sm:text-sm text-white/80 ml-1",children:"Minutes"})]}),n.jsx("span",{className:"text-lg sm:text-xl text-white/80 font-bold",children:":"}),n.jsxs("div",{className:"bg-white/30 backdrop-blur-lg rounded-lg p-2 sm:p-3 border border-amber-100/30",children:[n.jsx("span",{className:"text-lg sm:text-xl font-bold text-amber-600",children:String(i.seconds).padStart(2,"0")}),n.jsx("span",{className:"text-xs sm:text-sm text-white/80 ml-1",children:"Seconds"})]})]})]})})}),n.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-2 z-20",children:r.map((c,u)=>n.jsx("button",{onClick:()=>l(u),className:"group","aria-label":`Go to slide ${u+1}`,children:n.jsx("span",{className:`block w-2 h-2 sm:w-3 sm:h-3 rounded-full transition-all duration-200 ${e===u?"bg-amber-400 scale-125 shadow-lg shadow-amber-400/50":"bg-white/40 group-hover:bg-white/60 group-hover:scale-105"}`})},u))})]})}const N4=async(r,e=3,t=1e3)=>{for(let s=1;s<=e;s++)try{return await r()}catch(a){if(s===e)throw a;const i=t*Math.pow(2,s-1);console.warn(`Retry ${s}/${e} after ${i}ms due to: ${a.message}`),await new Promise(o=>setTimeout(o,i))}},j4="https://via.placeholder.com/200?text=No+Image";function Bue(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null);return E.useEffect(()=>{(async()=>{try{s(!0),i(null);const c=(await N4(()=>Ke(_e(J,"dailyDeals")))).docs.map(f=>({id:f.id,...f.data()}));console.log("Raw deals:",c);const u=c.filter(f=>new Date(f.endDate)>new Date);console.log("Valid deals:",u);const h=await Promise.all(u.map(async f=>{const g=await N4(()=>it(Ne(J,"products",f.productId))),x=g.exists()?g.data():{};console.log(`Product for deal ${f.id}:`,x);const y=Array.isArray(x.imageUrls)&&x.imageUrls.length>0?x.imageUrls.find(N=>typeof N=="string"&&N.startsWith("https://res.cloudinary.com/"))||j4:x.imageUrl&&typeof x.imageUrl=="string"&&x.imageUrl.startsWith("https://res.cloudinary.com/")?x.imageUrl:j4;console.log(`Image for deal ${f.id}:`,y);const b=Number(x.price)||0,v=Number((f.discount*100).toFixed(2))||0;return{id:f.id,productId:f.productId,productName:x.name||"Unnamed Product",price:b,discountPercentage:v,imageUrl:y,description:x.description||"No description available",condition:x.condition||"",isDailyDeal:!0}}));console.log("Final deal products:",h),e(h)}catch(l){console.error("Error loading daily deals:",{message:l.message,stack:l.stack}),i("Failed to load daily deals. Please try again later.")}finally{s(!1)}})()},[]),t?n.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50 h-screen mb-10",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsx("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:n.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[n.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),n.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"})]})}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[...Array(8)].map((o,l)=>n.jsx("div",{className:"flex-shrink-0 w-full",children:n.jsx("div",{className:"bg-gray-200 rounded-lg h-[200px] xs:h-[240px] sm:h-[260px] w-full animate-pulse"})},l))})]})}):a?n.jsx("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50",children:n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsx("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:n.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[n.jsx("i",{className:"bx bx-time text-yellow-600 text-xl xs:text-2xl"}),n.jsx("h2",{className:"text-base xs:text-lg sm:text-xl font-bold text-gray-800",children:"Daily Deals"})]})}),n.jsxs("p",{className:"text-red-600 text-sm xs:text-base p-3 xs:p-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-error-circle"}),a]})]})}):n.jsxs("section",{className:"py-4 xs:py-6 sm:py-8 bg-yellow-50 mb-16",children:[n.jsx(Vue,{}),n.jsxs("div",{className:"container mx-auto px-3 xs:px-4",children:[n.jsx("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6",children:n.jsxs("div",{className:"flex items-center space-x-2 xs:space-x-3",children:[n.jsx("i",{className:"bx bx-time text-yellow-600 text-3xl xs:text-3xl"}),n.jsx("h2",{className:"text-base xs:text-xl sm:text-2xl md:text-3xl lg:text-3xl font-bold text-gray-800",children:"Daily Deals"})]})}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:r.length===0?n.jsxs("p",{className:"text-gray-600 text-sm xs:text-base p-3 xs:p-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-info-circle"}),"No deals available right now. Check back later for hot offers! 🔥"]}):r.map(o=>n.jsx("div",{className:"w-full",children:n.jsxs("div",{className:"relative",children:[n.jsx(Vr,{product:{id:o.productId,name:o.productName,price:o.price,imageUrl:o.imageUrl,condition:o.condition,category:o.category||"default",variants:o.variants||[],stock:o.stock||0,sellerId:o.sellerId||"",currency:localStorage.getItem("currency")||"USD",isDailyDeal:o.isDailyDeal,discountPercentage:o.discountPercentage}}),n.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-1.5 xs:px-2 py-0.5 xs:py-1 rounded-full text-[10px] xs:text-xs font-bold",children:[o.discountPercent,"% OFF"]})]})},o.id))})]})]})}function Hue(){const[r,e]=E.useState([]),[t,s]=E.useState([]),[a,i]=E.useState(!0),o="Fashion",l=["foremade fashion","clothing","accessories","footwear","jewelry","bags & wallets"],c=async()=>{try{i(!0);const u=ft(_e(J,"trendingItems"),rt("category","==",o)),f=(await Ke(u)).docs.map(b=>b.data());if(f.length>0){const b=f.map(async N=>{const k=await it(Ne(J,"products",N.productId));return k.exists()?{id:k.id,...k.data()}:null}),v=(await Promise.all(b)).filter(N=>N&&N.status==="approved");e(v);return}const g=ft(_e(J,"products"),rt("status","==","approved"),rt("category","in",l)),y=(await Ke(g)).docs.map(b=>({id:b.id,...b.data()}));e(y)}catch{xe.error("Failed to load fashion products")}finally{i(!1)}};return E.useEffect(()=>{c(),Ke(_e(J,"dailyDeals")).then(u=>{s(u.docs.map(h=>({id:h.id,...h.data()})))})},[]),n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-6",children:"All Trending Fashion"}),a?n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:[...Array(8)].map((u,h)=>n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 animate-pulse"},h))}):r.length===0?n.jsx("p",{className:"text-gray-600",children:"No fashion products found."}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:r.map(u=>n.jsx(Vr,{product:u,dailyDeals:t},u.id))})]})})}function $ue(){const[r,e]=E.useState([]),[t,s]=E.useState([]),[a,i]=E.useState(!0),o="Gadgets",l=["tablet & phones","computers & accessories","electronics","smart watches","game & fun"],c=async()=>{try{i(!0);const u=ft(_e(J,"trendingItems"),rt("category","==",o)),f=(await Ke(u)).docs.map(b=>b.data());if(f.length>0){const b=f.map(async N=>{const k=await it(Ne(J,"products",N.productId));return k.exists()?{id:k.id,...k.data()}:null}),v=(await Promise.all(b)).filter(N=>N&&N.status==="approved");e(v);return}const g=ft(_e(J,"products"),rt("status","==","approved"),rt("category","in",l)),y=(await Ke(g)).docs.map(b=>({id:b.id,...b.data()}));e(y)}catch{xe.error("Failed to load gadgets products")}finally{i(!1)}};return E.useEffect(()=>{c(),Ke(_e(J,"dailyDeals")).then(u=>{s(u.docs.map(h=>({id:h.id,...h.data()})))})},[]),n.jsx("section",{className:"py-8 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-6",children:"All Trending Gadgets"}),a?n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:[...Array(8)].map((u,h)=>n.jsx("div",{className:"bg-gray-200 rounded-lg h-72 animate-pulse"},h))}):r.length===0?n.jsx("p",{className:"text-gray-600",children:"No gadgets products found."}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6",children:r.map(u=>n.jsx(Vr,{product:u,dailyDeals:t},u.id))})]})})}const wa=({children:r,requireAdmin:e=!1})=>{const t=ch(),s=Br(),a=us(),[i,o]=E.useState(!0),[l,c]=E.useState(!1);return E.useEffect(()=>{const u=ai(t,h=>{if(!h){console.log("No user authenticated, redirecting to login"),a("/login",{replace:!0,state:{from:s.pathname}}),o(!1);return}const f=["Foremade@icloud.com","echinecherem729@gmail.com"],g=h.email.toLowerCase(),x=f.some(y=>y.toLowerCase()===g);console.log("Authenticated user email:",h.email),console.log("Normalized user email:",g),console.log("Is admin?",x),e&&!x?(console.log("Non-admin access attempted, redirecting to login"),a("/login",{replace:!0,state:{from:s.pathname}})):c(!0),o(!1)});return()=>u()},[t,s.pathname,a,e]),console.log("Rendering ProtectedRoute, loading:",i,"hasAccess:",l),l?r:null},Wue=()=>{const{sellerId:r}=Lo(),[e,t]=E.useState(null),[s,a]=E.useState([]),[i,o]=E.useState({}),[l,c]=E.useState(!0),[u,h]=E.useState(null);return E.useEffect(()=>{r?(async()=>{try{c(!0),h(null);const g=Ne(J,"feeConfigurations","categoryFees"),x=await it(g),y=x.exists()?x.data():{};o(y);const b=Ne(J,"users",r),v=await it(b);if(!v.exists()){h("Seller not found.");return}const N=v.data(),k={username:N.username||`Seller ${r.slice(0,6)}`,profilePicture:N.profilePicture||`https://ui-avatars.com/api/?name=${encodeURIComponent(N.username||"Seller")}&size=128&background=112d4e&color=fff`,isProSeller:N.isProSeller||!1};t(k);const A=ft(_e(J,"products"),rt("sellerId","==",r)),_=(await Ke(A)).docs.map(I=>{const P=I.data(),T=P.category||"default",D=y[T]||{minPrice:1e3,maxPrice:1/0,buyerProtectionRate:.08,handlingRate:.2},L=P.price||0,F=L+L*D.buyerProtectionRate+L*D.handlingRate;return{id:I.id,...P,imageUrls:Array.isArray(P.imageUrls)&&P.imageUrls.length>0?P.imageUrls[0]:Ds,totalPrice:F,category:T}});a(_)}catch(g){console.error("Error fetching seller data:",g),h("Failed to load seller data."),xe.error("Failed to load seller data.",{position:"top-right",autoClose:3e3})}finally{c(!1)}})():(h("Invalid seller ID."),c(!1))},[r]),l?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx(si,{}),n.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Loading seller data..."})]}):u?n.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[n.jsx("p",{className:"text-red-600 text-sm",children:u}),n.jsxs(he,{to:"/products",className:"text-blue-600 hover:underline text-sm flex items-center gap-1 justify-center mt-4","aria-label":"Back to products",children:[n.jsx("i",{className:"bx bx-arrow-back","aria-hidden":"true"}),"Back to Products"]})]}):n.jsxs("div",{className:"container mx-auto px-4 py-8 mb-10",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-store text-blue-600","aria-hidden":"true"}),"Seller Profile"]}),n.jsxs(he,{to:"/products",className:"text-blue-600 hover:underline text-sm flex items-center gap-1","aria-label":"Back to products",children:[n.jsx("i",{className:"bx bx-arrow-back","aria-hidden":"true"}),"Back to Products"]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8 flex items-center gap-6",children:[n.jsx("img",{src:e.profilePicture,alt:`${e.username}'s avatar`,className:"w-24 h-24 rounded-full object-cover border-2 border-blue-600",onError:f=>{f.target.src=Ds},loading:"lazy","aria-label":"Seller avatar"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.username}),e.isProSeller?n.jsx(Q5,{className:"w-5 h-5 text-amber-500","aria-label":"Pro Seller",title:"Premium Seller"}):n.jsx(Vl,{className:"w-5 h-5 text-gray-500","aria-label":"Standard Seller",title:"Standard Seller"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," ",s.length===1?"product":"products"," listed"]}),n.jsx("p",{className:"text-sm text-amber-500 mt-3",children:e.isProSeller?"Pro Seller":"Standard Seller"})]})]}),n.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx("i",{className:"bx bx-package text-blue-600","aria-hidden":"true"}),"Products by ",e.username,n.jsxs("span",{className:"ml-2 text-xs text-gray-500 cursor-help relative group","aria-label":"Prices include fees",children:[n.jsx("i",{className:"bx bx-info-circle","aria-hidden":"true"}),n.jsx("span",{className:"absolute hidden group-hover:block bg-gray-800 text-white text-xs rounded-lg p-2 -top-10 left-0 w-48 z-10",children:"Prices are inclusive of taxes etc."})]})]}),s.length===0?n.jsxs("p",{className:"text-gray-600 text-sm",children:["No products found for this seller."," ",n.jsx(he,{to:"/products",className:"text-blue-600 hover:underline",children:"Browse other products"})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(f=>n.jsxs(he,{to:`/product/${f.id}`,className:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition transform","aria-label":`View ${f.name}`,children:[n.jsx("img",{src:f.imageUrls,alt:f.name||"Product image",className:"w-full h-48 object-cover rounded-lg mb-4",onError:g=>{g.target.src=Ds},loading:"lazy"}),n.jsx("h3",{className:"text-base font-semibold text-gray-800 truncate",children:f.name||"Unnamed Product"}),n.jsx("p",{className:"text-sm text-gray-600",children:n.jsx(lr,{price:f.totalPrice||0,currency:"NGN"})})]},f.id))})]})};function Yue(){const[r,e]=E.useState([]),[t,s]=E.useState(!0),[a,i]=E.useState(null);return E.useEffect(()=>{(async()=>{if(!ve.currentUser){i("Please log in as an admin."),s(!1);return}try{const l=_e(J,"users"),u=(await Ke(l)).docs.map(h=>{const f=h.data(),g=f.name||f.username||"N/A";return{id:h.id,name:g,phoneNumber:f.phoneNumber||"Not Provided"}});e(u)}catch(l){i(`Failed to fetch users: ${l.message}`)}finally{s(!1)}})()},[]),t?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx(Ze.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:n.jsx("div",{className:"max-w-8xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10 text-center",children:n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading users..."})})})]}):a?n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx(Ze.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:n.jsx("div",{className:"max-w-8xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10 text-center",children:n.jsx("p",{className:"text-red-600 dark:text-red-400",children:a})})})]}):n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx(Ze.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:n.jsxs("div",{className:"max-w-8xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-900 to-amber-500 mb-6",children:"User Phone Numbers"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-200 dark:bg-gray-700",children:[n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Name"}),n.jsx("th",{className:"p-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Phone Number"})]})}),n.jsx("tbody",{children:r.map(o=>n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600",children:[n.jsx("td",{className:"p-3 text-sm text-gray-800 dark:text-gray-200",children:o.name}),n.jsx("td",{className:"p-3 text-sm text-gray-800 dark:text-gray-200",children:o.phoneNumber})]},o.id))})]})}),r.length===0&&n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center py-4",children:"No users found."})]})})]})}function que(){const{proSellerId:r}=Lo(),e=us(),[t,s]=E.useState(null),[a,i]=E.useState(!1),[o,l]=E.useState({}),[c,u]=E.useState(!0),[h,f]=E.useState(null);E.useEffect(()=>{g()},[r]);const g=async()=>{u(!0);try{const N=Ne(J,"proSellers",r),k=await it(N);if(k.exists()){const A=k.data();s(A),l(A)}else f("Pro seller not found")}catch(N){console.error("Fetch error:",N),f(`Failed to fetch pro seller details: ${N.message}`)}finally{u(!1)}},x=N=>{const{name:k,value:A,type:R,checked:_}=N.target;l(I=>({...I,[k]:R==="checkbox"?_:A}))},y=async()=>{try{const N=Ne(J,"proSellers",r);await Qr(N,o),s(o),i(!1),xe.success("Pro seller updated successfully")}catch(N){console.error("Update error:",N),xe.error(N.message||"Failed to update pro seller")}},b=async()=>{if(window.confirm("Are you sure you want to delete this pro seller?"))try{const N=Ne(J,"proSellers",r);await na(N),xe.success("Pro seller deleted successfully"),e("/admin/pro-seller-requests")}catch(N){console.error("Delete error:",N),xe.error(N.message||"Failed to delete pro seller")}};if(c)return n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx(Ze.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:n.jsx("div",{className:"max-w-8xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10 text-center",children:n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading pro seller details..."})})})]});if(h)return n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx(Ze.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:n.jsx("div",{className:"max-w-8xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10 text-center",children:n.jsx("p",{className:"text-red-600 dark:text-red-400",children:h})})})]});return n.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900",children:[n.jsx(bs,{}),n.jsx(Ze.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex-1 ml-0 md:ml-64 p-4 md:p-6 lg:p-8",children:n.jsxs("div",{className:"max-w-8xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 bg-clip-text text-transparent bg-gradient-to-r from-blue-900 to-amber-500 mb-6",children:"Pro Seller Details"}),n.jsxs("div",{className:"flex justify-end mb-6",children:[n.jsxs("button",{onClick:()=>i(!a),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-1 text-sm",children:[n.jsx("i",{className:"bx bx-edit"})," ",a?"Cancel":"Edit"]}),a&&n.jsxs("button",{onClick:y,className:"ml-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center gap-1 text-sm",children:[n.jsx("i",{className:"bx bx-save"})," Save"]}),n.jsxs("button",{onClick:b,className:"ml-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition flex items-center gap-1 text-sm",children:[n.jsx("i",{className:"bx bx-trash"})," Delete"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{label:"Pro Seller ID",key:"proSellerId"},{label:"User ID",key:"userId"},{label:"Business Name",key:"businessName"},{label:"Account Name",key:"accountName"},{label:"Account Number",key:"accountNumber"},{label:"Bank Name",key:"bankName"},{label:"Address",key:"address"},{label:"Email",key:"email"},{label:"Phone",key:"phone"},{label:"Manager",key:"manager"},{label:"Manager Email",key:"managerEmail"},{label:"Manager Phone",key:"managerPhone"},{label:"Reg Number",key:"regNumber"},{label:"Tax Ref",key:"taxRef"},{label:"Country",key:"country"},{label:"Business Type",key:"businessType"},{label:"Status",key:"status"},{label:"Created At",key:"createdAt",format:v},{label:"Updated At",key:"updatedAt",format:v},{label:"Description",key:"description"},{label:"Categories",key:"categories",isArray:!0},{label:"Analytics",key:"features.analytics",isBoolean:!0},{label:"Bulk Upload",key:"features.bulkUpload",isBoolean:!0},{label:"Priority Support",key:"features.prioritySupport",isBoolean:!0},{label:"Product Bumping",key:"features.productBumping",isBoolean:!0},{label:"Is Active",key:"isActive",isBoolean:!0},{label:"Account Verified",key:"extraFields.accountVerified",isBoolean:!0},{label:"Reg Verified",key:"extraFields.regVerified",isBoolean:!0},{label:"Tax Verified",key:"extraFields.taxVerified",isBoolean:!0},{label:"Website",key:"website"}].map(({label:N,key:k,format:A=I=>I,isArray:R=!1,isBoolean:_=!1})=>{const I=R?(o[k]||[]).join(", "):_?o[k]?"Yes":"No":A(o[k]);return n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:N}),a?n.jsx("input",{type:_?"checkbox":"text",name:k,value:_?void 0:o[k]||"",checked:_?!!o[k]:void 0,onChange:x,className:"mt-1 p-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}):n.jsx("p",{className:"mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded-lg text-gray-900 dark:text-gray-100",children:I||"-"})]},k)})})]})})]});function v(N){if(!N)return"-";if(N instanceof Date)return isNaN(N.getTime())?"-":N.toLocaleDateString();const k=new Date(N);return isNaN(k.getTime())?"-":k.toLocaleDateString()}}const Xue=({children:r})=>{const e=Br(),t=["/login","/register","/recover-password","/reset-password","/sell","/smile","/overview","/settings","/products-gallery","/products-upload","/products-upload-variant","/admin","/admin/payouts","/admin/dashboard","/admin/users","/admin/admins","/admin/edit/fees","/admin/edit/categories","/admin/sellers/payouts","/admin/products","/admin/notifications","/admin/manager","/admin/edit/banners","/admin/edit/daily-deals","/admin/pro-sellers-requests","/admin/pro-seller-details/:proSellerId","/admin/bumped-products","/admin/users-phone","/bulk-upload","/product-bump","/product-bump-info","/seller-transactions","/pro-seller-analytics","/sellers/orders","/sellers/products","/seller-onboarding","/seller-chat","/admin/sellers-wallet","/admin/transactions","/dashboard"],s=[/^\/seller\/edit-product\/[^/]+$/,/^\/seller-chat\/[^/]+$/,/^\/admin\/pro-seller-details\/[^/]+$/],a=t.includes(e.pathname)||s.some(o=>o.test(e.pathname)),i=["/profile","/about"].includes(e.pathname);return n.jsxs(n.Fragment,{children:[!a&&n.jsx(kte,{}),!a&&n.jsx(HX,{}),n.jsx("main",{className:"min-h-screen bg-white text-black dark:bg-gray-900 dark:text-white",children:r}),i&&n.jsx(Ate,{})]})};function Gue(){return n.jsx(lz,{children:n.jsx(AX,{children:n.jsx(KY,{children:n.jsx(Xue,{children:n.jsxs(UU,{children:[n.jsx(at,{path:"/login",element:n.jsx(rse,{})}),n.jsx(at,{path:"/register",element:n.jsx(ise,{})}),n.jsx(at,{path:"/recover-password",element:n.jsx(Zde,{})}),n.jsx(at,{path:"/reset-password",element:n.jsx(tue,{})}),n.jsx(at,{path:"/add-phone",element:n.jsx(dse,{})}),n.jsx(at,{path:"/pro-seller-form",element:n.jsx(pue,{})}),n.jsx(at,{path:"/sellers-guide",element:n.jsx(pce,{})}),n.jsx(at,{path:"/",element:n.jsx(Gte,{})}),n.jsx(at,{path:"/smile",element:n.jsx(Fde,{})}),n.jsx(at,{path:"/sell",element:n.jsx(VI,{})}),n.jsx(at,{path:"/sellers/products",element:n.jsx(Loe,{})}),n.jsx(at,{path:"/products-upload",element:n.jsx(jle,{})}),n.jsx(at,{path:"/products-upload-variant",element:n.jsx(_le,{})}),n.jsx(at,{path:"/products-gallery",element:n.jsx(Ale,{})}),n.jsx(at,{path:"/seller/edit-product/:productId",element:n.jsx(lue,{})}),n.jsx(at,{path:"/dashboard",element:n.jsx(VI,{})}),n.jsx(at,{path:"/sellers/orders",element:n.jsx(dre,{})}),n.jsx(at,{path:"/settings",element:n.jsx(ure,{})}),n.jsx(at,{path:"/seller-onboarding",element:n.jsx(Foe,{})}),n.jsx(at,{path:"/bulk-upload",element:n.jsx(jue,{})}),n.jsx(at,{path:"/product-bump",element:n.jsx(kue,{})}),n.jsx(at,{path:"/product-bump-info",element:n.jsx(Uue,{})}),n.jsx(at,{path:"/seller-transactions",element:n.jsx(Aue,{})}),n.jsx(at,{path:"/pro-seller-analytics",element:n.jsx(Cue,{})}),n.jsx(at,{path:"/terms-conditions",element:n.jsx(Ele,{})}),n.jsx(at,{path:"/seller-agreement",element:n.jsx(yz,{})}),n.jsx(at,{path:"/pro-seller-guide",element:n.jsx(vue,{})}),n.jsx(at,{path:"/pro-seller-guide-full",element:n.jsx(wue,{})}),n.jsx(at,{path:"/support",element:n.jsx(Cle,{})}),n.jsx(at,{path:"/buyer-protection-policy",element:n.jsx(Rue,{})}),n.jsx(at,{path:"/refund-policy",element:n.jsx(Iue,{})}),n.jsx(at,{path:"/empowerment-hub",element:n.jsx(Bde,{})}),n.jsx(at,{path:"/youth-empowerment-form",element:n.jsx($de,{})}),n.jsx(at,{path:"/youth-empowerment-terms",element:n.jsx(Wde,{})}),n.jsx(at,{path:"/products",element:n.jsx(ese,{})}),n.jsx(at,{path:"/product/:id",element:n.jsx(cse,{})}),n.jsx(at,{path:"/best-selling",element:n.jsx(aO,{})}),n.jsx(at,{path:"/electronics",element:n.jsx(Gde,{})}),n.jsx(at,{path:"/tablet-phones",element:n.jsx(Xde,{})}),n.jsx(at,{path:"/smart-watches",element:n.jsx(Kde,{})}),n.jsx(at,{path:"/privacy-policy",element:n.jsx(Ude,{})}),n.jsx(at,{path:"/shipping-policy",element:n.jsx(vz,{})}),n.jsx(at,{path:"/privacy-policy/:type",element:n.jsx(Vde,{})}),n.jsx(at,{path:"/privacy-policy/eu/access",element:n.jsx(qde,{})}),n.jsx(at,{path:"/pages/other-products/:category",element:n.jsx(rue,{})}),n.jsx(at,{path:"/stores",element:n.jsx(oue,{})}),n.jsx(at,{path:"/cart",element:n.jsx(fse,{})}),n.jsx(at,{path:"/checkout",element:n.jsx(rre,{})}),n.jsx(at,{path:"/favorites",element:n.jsx(gse,{})}),n.jsx(at,{path:"/order-confirmation",element:n.jsx(cre,{})}),n.jsx(at,{path:"/profile",element:n.jsx(pse,{})}),n.jsx(at,{path:"/orders",element:n.jsx(are,{})}),n.jsx(at,{path:"/address",element:n.jsx(nre,{})}),n.jsx(at,{path:"/setting",element:n.jsx(ire,{})}),n.jsx(at,{path:"/search",element:n.jsx(nue,{})}),n.jsx(at,{path:"/notifications",element:n.jsx(iue,{})}),n.jsx(at,{path:"/about",element:n.jsx(aue,{})}),n.jsx(at,{path:"/seller-chat",element:n.jsx(w4,{})}),n.jsx(at,{path:"/seller-chat/:chatId",element:n.jsx(w4,{})}),n.jsx(at,{path:"/chat/:orderId",element:n.jsx(sse,{})}),n.jsx(at,{path:"/seller/:sellerId",element:n.jsx(Wue,{})}),n.jsx(at,{path:"/order-tracking",element:n.jsx(zue,{})}),n.jsx(at,{path:"/category/:categoryName",element:n.jsx(mue,{})}),n.jsx(at,{path:"/user-agreement",element:n.jsx(Pue,{})}),n.jsx(at,{path:"/daily-deals",element:n.jsx(Bue,{})}),n.jsx(at,{path:"/trending-fashions",element:n.jsx(Hue,{})}),n.jsx(at,{path:"/trending-gadgets",element:n.jsx($ue,{})}),n.jsx(at,{path:"/admin/dashboard",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(Rle,{})})}),n.jsx(at,{path:"/admin/transactions",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(gce,{})})}),n.jsx(at,{path:"/admin/users",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(Ule,{})})}),n.jsx(at,{path:"/admin/products",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(Ple,{})})}),n.jsx(at,{path:"/admin/sellers/payouts",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(Ble,{})})}),n.jsx(at,{path:"/admin/edit/fees",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(tce,{})})}),n.jsx(at,{path:"/admin/edit/categories",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(ace,{})})}),n.jsx(at,{path:"/admin/notifications",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(Mle,{})})}),n.jsx(at,{path:"/admin/edit/banners",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(Yle,{})})}),n.jsx(at,{path:"/admin/edit/daily-deals",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(Gle,{})})}),n.jsx(at,{path:"/admin/manager",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(oce,{})})}),n.jsx(at,{path:"/admin/sellers-wallet",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(dce,{})})}),n.jsx(at,{path:"/admin/pro-sellers-requests",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(uce,{})})}),n.jsx(at,{path:"/admin/bumped-products",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(hce,{})})}),n.jsx(at,{path:"/admin/users-phone",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(Yue,{})})}),n.jsx(at,{path:"/admin/pro-seller-details/:proSellerId",element:n.jsx(wa,{requireAdmin:!0,children:n.jsx(que,{})})}),n.jsx(at,{path:"*",element:n.jsx(lse,{})})]})})})})})}G8.createRoot(document.getElementById("root")).render(n.jsx(E.StrictMode,{children:n.jsx(Gue,{})}));
